(self.webpackChunkeditor=self.webpackChunkeditor||[]).push([[179],{255:e=>{function i(s){return Promise.resolve().then(()=>{var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a})}i.keys=()=>[],i.resolve=i,i.id=255,e.exports=i},500:function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,i;i=function(){return function(opts){for(var name in opts)this[name]=opts[name];var __mxOutput={},mxClient={VERSION:"4.2.2",IS_IE:null!=navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0,IS_IE6:null!=navigator.userAgent&&navigator.userAgent.indexOf("MSIE 6")>=0,IS_IE11:null!=navigator.userAgent&&!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:null!=navigator.userAgent&&!!navigator.userAgent.match(/Edge\//),IS_QUIRKS:null!=navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0&&(null==document.documentMode||5==document.documentMode),IS_EM:"spellcheck"in document.createElement("textarea")&&8==document.documentMode,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:null!=navigator.userAgent&&navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_OP:null!=navigator.userAgent&&(navigator.userAgent.indexOf("Opera/")>=0||navigator.userAgent.indexOf("OPR/")>=0),IS_OT:null!=navigator.userAgent&&navigator.userAgent.indexOf("Presto/")>=0&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:/Apple Computer, Inc/.test(navigator.vendor),IS_ANDROID:navigator.appVersion.indexOf("Android")>=0,IS_IOS:/iP(hone|od|ad)/.test(navigator.platform),IS_GC:/Google Inc/.test(navigator.vendor),IS_CHROMEAPP:null!=window.chrome&&null!=chrome.app&&null!=chrome.app.runtime,IS_FF:"undefined"!=typeof InstallTrigger,IS_MT:navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0,IS_VML:"MICROSOFT INTERNET EXPLORER"==navigator.appName.toUpperCase(),IS_SVG:"MICROSOFT INTERNET EXPLORER"!=navigator.appName.toUpperCase(),NO_FO:!document.createElementNS||"[object SVGForeignObjectElement]"!=document.createElementNS("http://www.w3.org/2000/svg","foreignObject")||navigator.userAgent.indexOf("Opera/")>=0,IS_WIN:navigator.appVersion.indexOf("Win")>0,IS_MAC:navigator.appVersion.indexOf("Mac")>0,IS_CHROMEOS:/\bCrOS\b/.test(navigator.appVersion),IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:null!=window.PointerEvent&&!(navigator.appVersion.indexOf("Mac")>0),IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0,defaultBundles:[],isBrowserSupported:function(){return mxClient.IS_VML||mxClient.IS_SVG},link:function(e,i,s,a){if(s=s||document,mxClient.IS_IE6)s.write('<link rel="'+e+'" href="'+i+'" charset="UTF-8" type="text/css"/>');else{var l=s.createElement("link");l.setAttribute("rel",e),l.setAttribute("href",i),l.setAttribute("charset","UTF-8"),l.setAttribute("type","text/css"),a&&l.setAttribute("id",a),s.getElementsByTagName("head")[0].appendChild(l)}},loadResources:function(e,i){var s=mxClient.defaultBundles.length;function a(){0==--s&&e()}for(var l=0;l<mxClient.defaultBundles.length;l++)mxResources.add(mxClient.defaultBundles[l],i,a)},include:function(e){document.write('<script src="'+e+'"><\/script>')}},e;"undefined"==typeof mxLoadResources&&(mxLoadResources=!0),"undefined"==typeof mxForceIncludes&&(mxForceIncludes=!1),"undefined"==typeof mxResourceExtension&&(mxResourceExtension=".txt"),"undefined"==typeof mxLoadStylesheets&&(mxLoadStylesheets=!0),"undefined"!=typeof mxBasePath&&mxBasePath.length>0?("/"==mxBasePath.substring(mxBasePath.length-1)&&(mxBasePath=mxBasePath.substring(0,mxBasePath.length-1)),mxClient.basePath=mxBasePath):mxClient.basePath=".","undefined"!=typeof mxImageBasePath&&mxImageBasePath.length>0?("/"==mxImageBasePath.substring(mxImageBasePath.length-1)&&(mxImageBasePath=mxImageBasePath.substring(0,mxImageBasePath.length-1)),mxClient.imageBasePath=mxImageBasePath):mxClient.imageBasePath=mxClient.basePath+"/images",mxClient.language="undefined"!=typeof mxLanguage&&null!=mxLanguage?mxLanguage:mxClient.IS_IE?navigator.userLanguage:navigator.language,mxClient.defaultLanguage="undefined"!=typeof mxDefaultLanguage&&null!=mxDefaultLanguage?mxDefaultLanguage:"en",mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/common.css"),"undefined"!=typeof mxLanguages&&null!=mxLanguages&&(mxClient.languages=mxLanguages),mxClient.IS_VML&&(mxClient.IS_SVG?mxClient.IS_VML=!1:(null!=document.namespaces&&(8==document.documentMode?(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml","#default#VML"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office","#default#VML")):(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office"))),mxClient.IS_QUIRKS&&document.styleSheets.length>=30?(e=document.createElement("style"),e.type="text/css",e.styleSheet.cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",document.getElementsByTagName("head")[0].appendChild(e)):document.createStyleSheet().cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/explorer.css"))),(mxForceIncludes||null==module.exports)&&(mxClient.include(mxClient.basePath+"/js/util/mxLog.js"),mxClient.include(mxClient.basePath+"/js/util/mxObjectIdentity.js"),mxClient.include(mxClient.basePath+"/js/util/mxDictionary.js"),mxClient.include(mxClient.basePath+"/js/util/mxResources.js"),mxClient.include(mxClient.basePath+"/js/util/mxPoint.js"),mxClient.include(mxClient.basePath+"/js/util/mxRectangle.js"),mxClient.include(mxClient.basePath+"/js/util/mxEffects.js"),mxClient.include(mxClient.basePath+"/js/util/mxUtils.js"),mxClient.include(mxClient.basePath+"/js/util/mxConstants.js"),mxClient.include(mxClient.basePath+"/js/util/mxEventObject.js"),mxClient.include(mxClient.basePath+"/js/util/mxMouseEvent.js"),mxClient.include(mxClient.basePath+"/js/util/mxEventSource.js"),mxClient.include(mxClient.basePath+"/js/util/mxEvent.js"),mxClient.include(mxClient.basePath+"/js/util/mxXmlRequest.js"),mxClient.include(mxClient.basePath+"/js/util/mxClipboard.js"),mxClient.include(mxClient.basePath+"/js/util/mxWindow.js"),mxClient.include(mxClient.basePath+"/js/util/mxForm.js"),mxClient.include(mxClient.basePath+"/js/util/mxImage.js"),mxClient.include(mxClient.basePath+"/js/util/mxDivResizer.js"),mxClient.include(mxClient.basePath+"/js/util/mxDragSource.js"),mxClient.include(mxClient.basePath+"/js/util/mxToolbar.js"),mxClient.include(mxClient.basePath+"/js/util/mxUndoableEdit.js"),mxClient.include(mxClient.basePath+"/js/util/mxUndoManager.js"),mxClient.include(mxClient.basePath+"/js/util/mxUrlConverter.js"),mxClient.include(mxClient.basePath+"/js/util/mxPanningManager.js"),mxClient.include(mxClient.basePath+"/js/util/mxPopupMenu.js"),mxClient.include(mxClient.basePath+"/js/util/mxAutoSaveManager.js"),mxClient.include(mxClient.basePath+"/js/util/mxAnimation.js"),mxClient.include(mxClient.basePath+"/js/util/mxMorphing.js"),mxClient.include(mxClient.basePath+"/js/util/mxImageBundle.js"),mxClient.include(mxClient.basePath+"/js/util/mxImageExport.js"),mxClient.include(mxClient.basePath+"/js/util/mxAbstractCanvas2D.js"),mxClient.include(mxClient.basePath+"/js/util/mxXmlCanvas2D.js"),mxClient.include(mxClient.basePath+"/js/util/mxSvgCanvas2D.js"),mxClient.include(mxClient.basePath+"/js/util/mxVmlCanvas2D.js"),mxClient.include(mxClient.basePath+"/js/util/mxGuide.js"),mxClient.include(mxClient.basePath+"/js/shape/mxShape.js"),mxClient.include(mxClient.basePath+"/js/shape/mxStencil.js"),mxClient.include(mxClient.basePath+"/js/shape/mxStencilRegistry.js"),mxClient.include(mxClient.basePath+"/js/shape/mxMarker.js"),mxClient.include(mxClient.basePath+"/js/shape/mxActor.js"),mxClient.include(mxClient.basePath+"/js/shape/mxCloud.js"),mxClient.include(mxClient.basePath+"/js/shape/mxRectangleShape.js"),mxClient.include(mxClient.basePath+"/js/shape/mxEllipse.js"),mxClient.include(mxClient.basePath+"/js/shape/mxDoubleEllipse.js"),mxClient.include(mxClient.basePath+"/js/shape/mxRhombus.js"),mxClient.include(mxClient.basePath+"/js/shape/mxPolyline.js"),mxClient.include(mxClient.basePath+"/js/shape/mxArrow.js"),mxClient.include(mxClient.basePath+"/js/shape/mxArrowConnector.js"),mxClient.include(mxClient.basePath+"/js/shape/mxText.js"),mxClient.include(mxClient.basePath+"/js/shape/mxTriangle.js"),mxClient.include(mxClient.basePath+"/js/shape/mxHexagon.js"),mxClient.include(mxClient.basePath+"/js/shape/mxLine.js"),mxClient.include(mxClient.basePath+"/js/shape/mxImageShape.js"),mxClient.include(mxClient.basePath+"/js/shape/mxLabel.js"),mxClient.include(mxClient.basePath+"/js/shape/mxCylinder.js"),mxClient.include(mxClient.basePath+"/js/shape/mxConnector.js"),mxClient.include(mxClient.basePath+"/js/shape/mxSwimlane.js"),mxClient.include(mxClient.basePath+"/js/layout/mxGraphLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxStackLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxPartitionLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxCompactTreeLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxRadialTreeLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxFastOrganicLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxCircleLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxParallelEdgeLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxCompositeLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxEdgeLabelLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxGraphAbstractHierarchyCell.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxGraphHierarchyNode.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxGraphHierarchyEdge.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxGraphHierarchyModel.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxSwimlaneModel.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxHierarchicalLayoutStage.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxMedianHybridCrossingReduction.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxMinimumCycleRemover.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxCoordinateAssignment.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxSwimlaneOrdering.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/mxHierarchicalLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/mxSwimlaneLayout.js"),mxClient.include(mxClient.basePath+"/js/model/mxGraphModel.js"),mxClient.include(mxClient.basePath+"/js/model/mxCell.js"),mxClient.include(mxClient.basePath+"/js/model/mxGeometry.js"),mxClient.include(mxClient.basePath+"/js/model/mxCellPath.js"),mxClient.include(mxClient.basePath+"/js/view/mxPerimeter.js"),mxClient.include(mxClient.basePath+"/js/view/mxPrintPreview.js"),mxClient.include(mxClient.basePath+"/js/view/mxStylesheet.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellState.js"),mxClient.include(mxClient.basePath+"/js/view/mxGraphSelectionModel.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellEditor.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellRenderer.js"),mxClient.include(mxClient.basePath+"/js/view/mxEdgeStyle.js"),mxClient.include(mxClient.basePath+"/js/view/mxStyleRegistry.js"),mxClient.include(mxClient.basePath+"/js/view/mxGraphView.js"),mxClient.include(mxClient.basePath+"/js/view/mxGraph.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellOverlay.js"),mxClient.include(mxClient.basePath+"/js/view/mxOutline.js"),mxClient.include(mxClient.basePath+"/js/view/mxMultiplicity.js"),mxClient.include(mxClient.basePath+"/js/view/mxLayoutManager.js"),mxClient.include(mxClient.basePath+"/js/view/mxSwimlaneManager.js"),mxClient.include(mxClient.basePath+"/js/view/mxTemporaryCellStates.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellStatePreview.js"),mxClient.include(mxClient.basePath+"/js/view/mxConnectionConstraint.js"),mxClient.include(mxClient.basePath+"/js/handler/mxGraphHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxPanningHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxPopupMenuHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxCellMarker.js"),mxClient.include(mxClient.basePath+"/js/handler/mxSelectionCellsHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxConnectionHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxConstraintHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxRubberband.js"),mxClient.include(mxClient.basePath+"/js/handler/mxHandle.js"),mxClient.include(mxClient.basePath+"/js/handler/mxVertexHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxEdgeHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxElbowEdgeHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxEdgeSegmentHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxKeyHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxTooltipHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxCellTracker.js"),mxClient.include(mxClient.basePath+"/js/handler/mxCellHighlight.js"),mxClient.include(mxClient.basePath+"/js/editor/mxDefaultKeyHandler.js"),mxClient.include(mxClient.basePath+"/js/editor/mxDefaultPopupMenu.js"),mxClient.include(mxClient.basePath+"/js/editor/mxDefaultToolbar.js"),mxClient.include(mxClient.basePath+"/js/editor/mxEditor.js"),mxClient.include(mxClient.basePath+"/js/io/mxCodecRegistry.js"),mxClient.include(mxClient.basePath+"/js/io/mxCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxObjectCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxCellCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxModelCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxRootChangeCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxChildChangeCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxTerminalChangeCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxGenericChangeCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxGraphCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxGraphViewCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxStylesheetCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxDefaultKeyHandlerCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxDefaultToolbarCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxDefaultPopupMenuCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxEditorCodec.js")),__mxOutput.mxClient=void 0!==mxClient?mxClient:void 0;var mxLog={consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){if(null==mxLog.window&&null!=document.body){var e=mxLog.consoleName+" - mxGraph "+mxClient.VERSION,i=document.createElement("table");i.setAttribute("width","100%"),i.setAttribute("height","100%");var s=document.createElement("tbody"),a=document.createElement("tr"),l=document.createElement("td");l.style.verticalAlign="top",mxLog.textarea=document.createElement("textarea"),mxLog.textarea.setAttribute("wrap","off"),mxLog.textarea.setAttribute("readOnly","true"),mxLog.textarea.style.height="100%",mxLog.textarea.style.resize="none",mxLog.textarea.value=mxLog.buffer,mxLog.textarea.style.width=mxClient.IS_NS&&"BackCompat"!=document.compatMode?"99%":"100%",l.appendChild(mxLog.textarea),a.appendChild(l),s.appendChild(a),a=document.createElement("tr"),mxLog.td=document.createElement("td"),mxLog.td.style.verticalAlign="top",mxLog.td.setAttribute("height","30px"),a.appendChild(mxLog.td),s.appendChild(a),i.appendChild(s),mxLog.addButton("Info",function(x){mxLog.info()}),mxLog.addButton("DOM",function(x){var v=mxUtils.getInnerHtml(document.body);mxLog.debug(v)}),mxLog.addButton("Trace",function(x){mxLog.TRACE=!mxLog.TRACE,mxLog.debug(mxLog.TRACE?"Tracing enabled":"Tracing disabled")}),mxLog.addButton("Copy",function(x){try{mxUtils.copy(mxLog.textarea.value)}catch(v){mxUtils.alert(v)}}),mxLog.addButton("Show",function(x){try{mxUtils.popup(mxLog.textarea.value)}catch(v){mxUtils.alert(v)}}),mxLog.addButton("Clear",function(x){mxLog.textarea.value=""});var d=0,c=0;if("number"==typeof window.innerWidth?(d=window.innerHeight,c=window.innerWidth):(d=document.documentElement.clientHeight||document.body.clientHeight,c=document.body.clientWidth),mxLog.window=new mxWindow(e,i,Math.max(0,c-320),Math.max(0,d-210),300,160),mxLog.window.setMaximizable(!0),mxLog.window.setScrollable(!1),mxLog.window.setResizable(!0),mxLog.window.setClosable(!0),mxLog.window.destroyOnClose=!1,(mxClient.IS_NS||mxClient.IS_IE)&&!mxClient.IS_GC&&!mxClient.IS_SF&&"BackCompat"!=document.compatMode||11==document.documentMode){var f=mxLog.window.getElement(),m=function(x,v){mxLog.textarea.style.height=Math.max(0,f.offsetHeight-70)+"px"};mxLog.window.addListener(mxEvent.RESIZE_END,m),mxLog.window.addListener(mxEvent.MAXIMIZE,m),mxLog.window.addListener(mxEvent.NORMALIZE,m),mxLog.textarea.style.height="92px"}}},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(e,i){var s=document.createElement("button");mxUtils.write(s,e),mxEvent.addListener(s,"click",i),mxLog.td.appendChild(s)},isVisible:function(){return null!=mxLog.window&&mxLog.window.isVisible()},show:function(){mxLog.setVisible(!0)},setVisible:function(e){null==mxLog.window&&mxLog.init(),null!=mxLog.window&&mxLog.window.setVisible(e)},enter:function(e){if(mxLog.TRACE)return mxLog.writeln("Entering "+e),(new Date).getTime()},leave:function(e,i){if(mxLog.TRACE){var s=0!=i?" ("+((new Date).getTime()-i)+" ms)":"";mxLog.writeln("Leaving "+e+s)}},debug:function(){mxLog.DEBUG&&mxLog.writeln.apply(this,arguments)},warn:function(){mxLog.WARN&&mxLog.writeln.apply(this,arguments)},write:function(){for(var e="",i=0;i<arguments.length;i++)e+=arguments[i],i<arguments.length-1&&(e+=" ");null!=mxLog.textarea?(mxLog.textarea.value=mxLog.textarea.value+e,null!=navigator.userAgent&&navigator.userAgent.indexOf("Presto/2.5")>=0&&(mxLog.textarea.style.visibility="hidden",mxLog.textarea.style.visibility="visible"),mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight):mxLog.buffer+=e},writeln:function(){for(var e="",i=0;i<arguments.length;i++)e+=arguments[i],i<arguments.length-1&&(e+=" ");mxLog.write(e+"\n")}};__mxOutput.mxLog=void 0!==mxLog?mxLog:void 0;var mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(e){if(null!=e){if(null==e[mxObjectIdentity.FIELD_NAME])if("object"==typeof e){var i=mxUtils.getFunctionName(e.constructor);e[mxObjectIdentity.FIELD_NAME]=i+"#"+mxObjectIdentity.counter++}else"function"==typeof e&&(e[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++);return e[mxObjectIdentity.FIELD_NAME]}return null},clear:function(e){("object"==typeof e||"function"==typeof e)&&delete e[mxObjectIdentity.FIELD_NAME]}};function mxDictionary(){this.clear()}__mxOutput.mxObjectIdentity=void 0!==mxObjectIdentity?mxObjectIdentity:void 0,mxDictionary.prototype.map=null,mxDictionary.prototype.clear=function(){this.map={}},mxDictionary.prototype.get=function(e){var i=mxObjectIdentity.get(e);return this.map[i]},mxDictionary.prototype.put=function(e,i){var s=mxObjectIdentity.get(e),a=this.map[s];return this.map[s]=i,a},mxDictionary.prototype.remove=function(e){var i=mxObjectIdentity.get(e),s=this.map[i];return delete this.map[i],s},mxDictionary.prototype.getKeys=function(){var e=[];for(var i in this.map)e.push(i);return e},mxDictionary.prototype.getValues=function(){var e=[];for(var i in this.map)e.push(this.map[i]);return e},mxDictionary.prototype.visit=function(e){for(var i in this.map)e(i,this.map[i])},__mxOutput.mxDictionary=void 0!==mxDictionary?mxDictionary:void 0;var mxResources={resources:{},extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(e){return null==mxClient.languages||mxUtils.indexOf(mxClient.languages,e)>=0},getDefaultBundle:function(e,i){return mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(i)?e+mxResources.extension:null},getSpecialBundle:function(e,i){if(null==mxClient.languages||!this.isLanguageSupported(i)){var s=i.indexOf("-");s>0&&(i=i.substring(0,s))}return mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(i)&&i!=mxClient.defaultLanguage?e+"_"+i+mxResources.extension:null},add:function(e,i,s){if((i=null!=i?i:null!=mxClient.language?mxClient.language.toLowerCase():mxConstants.NONE)!=mxConstants.NONE){var a=mxResources.getDefaultBundle(e,i),l=mxResources.getSpecialBundle(e,i),d=function(){if(null!=l)if(s)mxUtils.get(l,function(m){mxResources.parse(m.getText()),s()},function(){s()});else try{var f=mxUtils.load(l);f.isReady()&&mxResources.parse(f.getText())}catch(m){}else null!=s&&s()};if(null!=a)if(s)mxUtils.get(a,function(f){mxResources.parse(f.getText()),d()},function(){d()});else try{var c=mxUtils.load(a);c.isReady()&&mxResources.parse(c.getText()),d()}catch(f){}else d()}},parse:function(e){if(null!=e)for(var i=e.split("\n"),s=0;s<i.length;s++)if("#"!=i[s].charAt(0)){var a=i[s].indexOf("=");if(a>0){var l=i[s].substring(0,a),d=i[s].length;13==i[s].charCodeAt(d-1)&&d--;var c=i[s].substring(a+1,d);this.resourcesEncoded?(c=c.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources.resources[l]=unescape(c)):mxResources.resources[l]=c}}},get:function(e,i,s){var a=mxResources.resources[e];return null==a&&(a=s),null!=a&&null!=i&&(a=mxResources.replacePlaceholders(a,i)),a},replacePlaceholders:function(e,i){for(var s=[],a=null,l=0;l<e.length;l++){var d=e.charAt(l);"{"==d?a="":null!=a&&"}"==d?((a=parseInt(a)-1)>=0&&a<i.length&&s.push(i[a]),a=null):null!=a?a+=d:s.push(d)}return s.join("")},loadResources:function(e){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,e)})}};function mxPoint(e,i){this.x=null!=e?e:0,this.y=null!=i?i:0}function mxRectangle(e,i,s,a){mxPoint.call(this,e,i),this.width=null!=s?s:0,this.height=null!=a?a:0}__mxOutput.mxResources=void 0!==mxResources?mxResources:void 0,mxPoint.prototype.x=null,mxPoint.prototype.y=null,mxPoint.prototype.equals=function(e){return null!=e&&e.x==this.x&&e.y==this.y},mxPoint.prototype.clone=function(){return mxUtils.clone(this)},__mxOutput.mxPoint=void 0!==mxPoint?mxPoint:void 0,mxRectangle.prototype=new mxPoint,mxRectangle.prototype.constructor=mxRectangle,mxRectangle.prototype.width=null,mxRectangle.prototype.height=null,mxRectangle.prototype.setRect=function(e,i,s,a){this.x=e,this.y=i,this.width=s,this.height=a},mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2},mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2},mxRectangle.prototype.add=function(e){if(null!=e){var i=Math.min(this.x,e.x),s=Math.min(this.y,e.y),a=Math.max(this.x+this.width,e.x+e.width),l=Math.max(this.y+this.height,e.y+e.height);this.x=i,this.y=s,this.width=a-i,this.height=l-s}},mxRectangle.prototype.intersect=function(e){if(null!=e){var i=this.x+this.width,s=e.x+e.width,a=this.y+this.height,l=e.y+e.height;this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.width=Math.min(i,s)-this.x,this.height=Math.min(a,l)-this.y}},mxRectangle.prototype.grow=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)},mxRectangle.prototype.rotate90=function(){var e=(this.width-this.height)/2;this.x+=e,this.y-=e;var i=this.width;this.width=this.height,this.height=i},mxRectangle.prototype.equals=function(e){return null!=e&&e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height},mxRectangle.fromRectangle=function(e){return new mxRectangle(e.x,e.y,e.width,e.height)},__mxOutput.mxRectangle=void 0!==mxRectangle?mxRectangle:void 0;var mxEffects={animateChanges:function(e,i,s){var a=10,l=0,d=function(){for(var f=!1,m=0;m<i.length;m++){var x=i[m];if(x instanceof mxGeometryChange||x instanceof mxTerminalChange||x instanceof mxValueChange||x instanceof mxChildChange||x instanceof mxStyleChange){var v=e.getView().getState(x.cell||x.child,!1);if(null!=v)if(f=!0,x.constructor!=mxGeometryChange||e.model.isEdge(x.cell))mxUtils.setOpacity(v.shape.node,100*l/a);else{var E=e.getView().scale,S=(x.geometry.x-x.previous.x)*E,b=(x.geometry.y-x.previous.y)*E,T=(x.geometry.width-x.previous.width)*E,D=(x.geometry.height-x.previous.height)*E;0==l?(v.x-=S,v.y-=b,v.width-=T,v.height-=D):(v.x+=S/a,v.y+=b/a,v.width+=T/a,v.height+=D/a),e.cellRenderer.redraw(v),mxEffects.cascadeOpacity(e,x.cell,100*l/a)}}}l<a&&f?(l++,window.setTimeout(d,c)):null!=s&&s()},c=30;d()},cascadeOpacity:function(e,i,s){for(var a=e.model.getChildCount(i),l=0;l<a;l++){var d=e.model.getChildAt(i,l),c=e.getView().getState(d);null!=c&&(mxUtils.setOpacity(c.shape.node,s),mxEffects.cascadeOpacity(e,d,s))}var f=e.model.getEdges(i);if(null!=f)for(l=0;l<f.length;l++){var m=e.getView().getState(f[l]);null!=m&&mxUtils.setOpacity(m.shape.node,s)}},fadeOut:function(e,i,s,a,l,d){a=a||40,l=l||30;var c=i||100;if(mxUtils.setOpacity(e,c),d||null==d){var f=function(){c=Math.max(c-a,0),mxUtils.setOpacity(e,c),c>0?window.setTimeout(f,l):(e.style.visibility="hidden",s&&e.parentNode&&e.parentNode.removeChild(e))};window.setTimeout(f,l)}else e.style.visibility="hidden",s&&e.parentNode&&e.parentNode.removeChild(e)}};__mxOutput.mxEffects=void 0!==mxEffects?mxEffects:void 0;var mxUtils={errorResource:"none"!=mxClient.language?"error":"",closeResource:"none"!=mxClient.language?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(e){null!=e.style&&(e.style.cursor="");var i=e.childNodes;if(null!=i)for(var s=i.length,a=0;a<s;a+=1)mxUtils.removeCursors(i[a])},getCurrentStyle:mxClient.IS_IE&&(null==document.documentMode||document.documentMode<9)?function(e){return null!=e?e.currentStyle:null}:function(e){return null!=e?window.getComputedStyle(e,""):null},parseCssNumber:function(e){return"thin"==e?e="2":"medium"==e?e="4":"thick"==e&&(e="6"),e=parseFloat(e),isNaN(e)&&(e=0),e},setPrefixedStyle:function(){var e=null;return mxClient.IS_OT?e="O":mxClient.IS_SF||mxClient.IS_GC?e="Webkit":mxClient.IS_MT?e="Moz":mxClient.IS_IE&&document.documentMode>=9&&document.documentMode<10&&(e="ms"),function(i,s,a){i[s]=a,null!=e&&s.length>0&&(i[s=e+s.substring(0,1).toUpperCase()+s.substring(1)]=a)}}(),hasScrollbars:function(e){var i=mxUtils.getCurrentStyle(e);return null!=i&&("scroll"==i.overflow||"auto"==i.overflow)},bind:function(e,i){return function(){return i.apply(e,arguments)}},eval:function(expr){var result=null;if(expr.indexOf("function")>=0)try{eval("var _mxJavaScriptExpression="+expr),result=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}else try{result=eval(expr)}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}return result},findNode:function(e,i,s){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var a=e.getAttribute(i);if(null!=a&&a==s)return e}for(e=e.firstChild;null!=e;){var l=mxUtils.findNode(e,i,s);if(null!=l)return l;e=e.nextSibling}return null},getFunctionName:function(e){var i=null;if(null!=e)if(null!=e.name)i=e.name;else if(i=mxUtils.trim(e.toString()),/^function\s/.test(i)){var s=(i=mxUtils.ltrim(i.substring(9))).indexOf("(");s>0&&(i=i.substring(0,s))}return i},indexOf:function(e,i){if(null!=e&&null!=i)for(var s=0;s<e.length;s++)if(e[s]==i)return s;return-1},forEach:function(e,i){if(null!=e&&null!=i)for(var s=0;s<e.length;s++)i(e[s]);return e},remove:function(e,i){var s=null;if("object"==typeof i)for(var a=mxUtils.indexOf(i,e);a>=0;)i.splice(a,1),s=e,a=mxUtils.indexOf(i,e);for(var l in i)i[l]==e&&(delete i[l],s=e);return s},isNode:function(e,i,s,a){return!(null==e||isNaN(e.nodeType)||null!=i&&e.nodeName.toLowerCase()!=i.toLowerCase()||null!=s&&e.getAttribute(s)!=a)},isAncestorNode:function(e,i){for(var s=i;null!=s;){if(s==e)return!0;s=s.parentNode}return!1},getChildNodes:function(e,i){i=i||mxConstants.NODETYPE_ELEMENT;for(var s=[],a=e.firstChild;null!=a;)a.nodeType==i&&s.push(a),a=a.nextSibling;return s},importNode:function(e,i,s){return mxClient.IS_IE&&(null==document.documentMode||document.documentMode<10)?mxUtils.importNodeImplementation(e,i,s):e.importNode(i,s)},importNodeImplementation:function(e,i,s){switch(i.nodeType){case 1:var a=e.createElement(i.nodeName);if(i.attributes&&i.attributes.length>0)for(var l=0;l<i.attributes.length;l++)a.setAttribute(i.attributes[l].nodeName,i.getAttribute(i.attributes[l].nodeName));if(s&&i.childNodes&&i.childNodes.length>0)for(l=0;l<i.childNodes.length;l++)a.appendChild(mxUtils.importNodeImplementation(e,i.childNodes[l],s));return a;case 3:case 4:case 8:return e.createTextNode(null!=i.nodeValue?i.nodeValue:i.value)}},createXmlDocument:function(){var e=null;return document.implementation&&document.implementation.createDocument?e=document.implementation.createDocument("","",null):"ActiveXObject"in window&&(e=mxUtils.createMsXmlDocument()),e},createMsXmlDocument:function(){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.validateOnParse=!1,e.resolveExternals=!1,e},parseXml:window.DOMParser?function(e){return(new DOMParser).parseFromString(e,"text/xml")}:function(e){var i=mxUtils.createMsXmlDocument();return i.loadXML(e),i},clearSelection:document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){},removeWhitespace:function(e,i){for(var s=i?e.previousSibling:e.nextSibling;null!=s&&s.nodeType==mxConstants.NODETYPE_TEXT;){var a=i?s.previousSibling:s.nextSibling,l=mxUtils.getTextContent(s);0==mxUtils.trim(l).length&&s.parentNode.removeChild(s),s=a}},htmlEntities:function(e,i){return e=(e=(e=(e=(e=(e=String(e||"")).replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/\'/g,"&#39;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),(null==i||i)&&(e=e.replace(/\n/g,"&#xa;")),e},isVml:function(e){return null!=e&&"urn:schemas-microsoft-com:vml"==e.tagUrn},getXml:function(e,i){var s="";return mxClient.IS_IE||mxClient.IS_IE11?s=mxUtils.getPrettyXml(e,"","",""):null!=window.XMLSerializer?s=(new XMLSerializer).serializeToString(e):null!=e.xml&&(s=e.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")),s.replace(/\n/g,i=i||"&#xa;")},getPrettyXml:function(e,i,s,a,l){var d=[];if(null!=e)if(i=null!=i?i:"  ",s=null!=s?s:"",a=null!=a?a:"\n",null!=e.namespaceURI&&e.namespaceURI!=l&&(l=e.namespaceURI,null==e.getAttribute("xmlns")&&e.setAttribute("xmlns",e.namespaceURI)),e.nodeType==mxConstants.NODETYPE_DOCUMENT)d.push(mxUtils.getPrettyXml(e.documentElement,i,s,a,l));else if(e.nodeType==mxConstants.NODETYPE_DOCUMENT_FRAGMENT){if(null!=(c=e.firstChild))for(;null!=c;)d.push(mxUtils.getPrettyXml(c,i,s,a,l)),c=c.nextSibling}else if(e.nodeType==mxConstants.NODETYPE_COMMENT)(f=mxUtils.getTextContent(e)).length>0&&d.push(s+"\x3c!--"+f+"--\x3e"+a);else if(e.nodeType==mxConstants.NODETYPE_TEXT)(f=mxUtils.trim(mxUtils.getTextContent(e))).length>0&&d.push(s+mxUtils.htmlEntities(f,!1)+a);else if(e.nodeType==mxConstants.NODETYPE_CDATA){var f;(f=mxUtils.getTextContent(e)).length>0&&d.push(s+"<![CDATA["+f+"]]"+a)}else{d.push(s+"<"+e.nodeName);var c,m=e.attributes;if(null!=m)for(var x=0;x<m.length;x++){var v=mxUtils.htmlEntities(m[x].value);d.push(" "+m[x].nodeName+'="'+v+'"')}if(null!=(c=e.firstChild)){for(d.push(">"+a);null!=c;)d.push(mxUtils.getPrettyXml(c,i,s+i,a,l)),c=c.nextSibling;d.push(s+"</"+e.nodeName+">"+a)}else d.push(" />"+a)}return d.join("")},extractTextWithWhitespace:function(e){var i=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"],s=[];return function a(l){if(1!=l.length||"BR"!=l[0].nodeName&&"\n"!=l[0].innerHTML)for(var d=0;d<l.length;d++){var c=l[d];"BR"==c.nodeName||"\n"==c.innerHTML||(1==l.length||0==d)&&"DIV"==c.nodeName&&"<br>"==c.innerHTML.toLowerCase()?s.push("\n"):(3===c.nodeType||4===c.nodeType?c.nodeValue.length>0&&s.push(c.nodeValue):8!==c.nodeType&&c.childNodes.length>0&&a(c.childNodes),d<l.length-1&&mxUtils.indexOf(i,l[d+1].nodeName)>=0&&s.push("\n"))}}(e),s.join("")},replaceTrailingNewlines:function(e,i){for(var s="";e.length>0&&"\n"==e.charAt(e.length-1);)e=e.substring(0,e.length-1),s+=i;return e+s},getTextContent:function(e){return mxClient.IS_IE&&void 0!==e.innerText?e.innerText:null!=e?e[void 0===e.textContent?"text":"textContent"]:""},setTextContent:function(e,i){void 0!==e.innerText?e.innerText=i:e[void 0===e.textContent?"text":"textContent"]=i},getInnerHtml:mxClient.IS_IE?function(e){return null!=e?e.innerHTML:""}:function(e){return null!=e?(new XMLSerializer).serializeToString(e):""},getOuterHtml:mxClient.IS_IE?function(e){if(null!=e){if(null!=e.outerHTML)return e.outerHTML;var i=[];i.push("<"+e.nodeName);var s=e.attributes;if(null!=s)for(var a=0;a<s.length;a++){var l=s[a].value;null!=l&&l.length>0&&(i.push(" "),i.push(s[a].nodeName),i.push('="'),i.push(l),i.push('"'))}return 0==e.innerHTML.length?i.push("/>"):(i.push(">"),i.push(e.innerHTML),i.push("</"+e.nodeName+">")),i.join("")}return""}:function(e){return null!=e?(new XMLSerializer).serializeToString(e):""},write:function(e,i){var a=e.ownerDocument.createTextNode(i);return null!=e&&e.appendChild(a),a},writeln:function(e,i){var a=e.ownerDocument.createTextNode(i);return null!=e&&(e.appendChild(a),e.appendChild(document.createElement("br"))),a},br:function(e,i){i=i||1;for(var s=null,a=0;a<i;a++)null!=e&&(s=e.ownerDocument.createElement("br"),e.appendChild(s));return s},button:function(e,i,s){var a=(s=null!=s?s:document).createElement("button");return mxUtils.write(a,e),mxEvent.addListener(a,"click",function(l){i(l)}),a},para:function(e,i){var s=document.createElement("p");return mxUtils.write(s,i),null!=e&&e.appendChild(s),s},addTransparentBackgroundFilter:function(e){e.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(e,i,s,a,l){return mxUtils.link(e,i,function(){s.execute(a)},l)},linkInvoke:function(e,i,s,a,l,d){return mxUtils.link(e,i,function(){s[a](l)},d)},link:function(e,i,s,a){var l=document.createElement("span");return l.style.color="blue",l.style.textDecoration="underline",l.style.cursor="pointer",null!=a&&(l.style.paddingLeft=a+"px"),mxEvent.addListener(l,"click",s),mxUtils.write(l,i),null!=e&&e.appendChild(l),l},getDocumentSize:function(){var e=document.body,i=document.documentElement;try{return new mxRectangle(0,0,e.clientWidth||i.clientWidth,Math.max(e.clientHeight||0,i.clientHeight))}catch(s){return new mxRectangle}},fit:function(e){var i=mxUtils.getDocumentSize(),s=parseInt(e.offsetLeft),a=parseInt(e.offsetWidth),l=mxUtils.getDocumentScrollOrigin(e.ownerDocument),d=l.x,c=l.y,x=(document,document,d+i.width);s+a>x&&(e.style.left=Math.max(d,x-a)+"px");var v=parseInt(e.offsetTop),E=parseInt(e.offsetHeight),S=c+i.height;v+E>S&&(e.style.top=Math.max(c,S-E)+"px")},load:function(e){var i=new mxXmlRequest(e,null,"GET",!1);return i.send(),i},get:function(e,i,s,a,l,d,c){var f=new mxXmlRequest(e,null,"GET"),m=f.setRequestHeaders;return c&&(f.setRequestHeaders=function(x,v){for(var E in m.apply(this,arguments),c)x.setRequestHeader(E,c[E])}),null!=a&&f.setBinary(a),f.send(i,s,l,d),f},getAll:function(e,i,s){for(var a=e.length,l=[],d=0,c=function(){0==d&&null!=s&&s(),d++},f=0;f<e.length;f++)!function(m,x){mxUtils.get(m,function(v){var E=v.getStatus();E<200||E>299?c():(l[x]=v,0==--a&&i(l))},c)}(e[f],f);0==a&&i(l)},post:function(e,i,s,a){return new mxXmlRequest(e,i).send(s,a)},submit:function(e,i,s,a){return new mxXmlRequest(e,i).simulate(s,a)},loadInto:function(e,i,s){mxClient.IS_IE?i.onreadystatechange=function(){4==i.readyState&&s()}:i.addEventListener("load",s,!1),i.load(e)},getValue:function(e,i,s){var a=null!=e?e[i]:null;return null==a&&(a=s),a},getNumber:function(e,i,s){var a=null!=e?e[i]:null;return null==a&&(a=s||0),Number(a)},getColor:function(e,i,s){var a=null!=e?e[i]:null;return null==a?a=s:a==mxConstants.NONE&&(a=null),a},clone:function(e,i,s){s=null!=s&&s;var a=null;if(null!=e&&"function"==typeof e.constructor)for(var l in a=new e.constructor,e)l!=mxObjectIdentity.FIELD_NAME&&(null==i||mxUtils.indexOf(i,l)<0)&&(a[l]=s||"object"!=typeof e[l]?e[l]:mxUtils.clone(e[l]));return a},equalPoints:function(e,i){if(null==e&&null!=i||null!=e&&null==i||null!=e&&null!=i&&e.length!=i.length)return!1;if(null!=e&&null!=i)for(var s=0;s<e.length;s++)if(null!=e[s]&&null==i[s]||null==e[s]&&null!=i[s]||null!=e[s]&&null!=i[s]&&(e[s].x!=i[s].x||e[s].y!=i[s].y))return!1;return!0},equalEntries:function(e,i){var s=0;if(null==e&&null!=i||null!=e&&null==i||null!=e&&null!=i&&e.length!=i.length)return!1;if(null!=e&&null!=i){for(var a in i)s++;for(var a in e)if(s--,!(mxUtils.isNaN(e[a])&&mxUtils.isNaN(i[a])||e[a]==i[a]))return!1}return 0==s},removeDuplicates:function(e){for(var i=new mxDictionary,s=[],a=0;a<e.length;a++)i.get(e[a])||(s.push(e[a]),i.put(e[a],!0));return s},isNaN:function(e){return"number"==typeof e&&isNaN(e)},extend:function(e,i){var s=function(){};s.prototype=i.prototype,e.prototype=new s,e.prototype.constructor=e},toString:function(e){var i="";for(var s in e)try{i+=null==e[s]?s+" = [null]\n":"function"==typeof e[s]?s+" => [Function]\n":"object"==typeof e[s]?s+" => ["+mxUtils.getFunctionName(e[s].constructor)+"]\n":s+" = "+e[s]+"\n"}catch(l){i+=s+"="+l.message}return i},toRadians:function(e){return Math.PI*e/180},toDegree:function(e){return 180*e/Math.PI},arcToCurves:function(e,i,s,a,l,d,c,f,m){if(f-=e,m-=i,0===s||0===a)return De;var x=c,v=l;s=Math.abs(s),a=Math.abs(a);var V,E=-f/2,S=-m/2,b=Math.cos(v*Math.PI/180),T=Math.sin(v*Math.PI/180),D=b*E+T*S,I=-1*T*E+b*S,O=D*D,N=I*I,k=s*s,P=a*a,F=O/k+N/P;if(F>1)s=Math.sqrt(F)*s,a=Math.sqrt(F)*a,V=0;else{var Y=1;d===x&&(Y=-1),V=Y*Math.sqrt((k*P-k*N-P*O)/(k*N+P*O))}var j=V*s*I/a,X=-1*V*a*D/s,Z=b*j-T*X+f/2,Q=T*j+b*X+m/2,ee=Math.atan2((I-X)/a,(D-j)/s)-Math.atan2(0,1),K=ee>=0?ee:2*Math.PI+ee,oe=(ee=Math.atan2((-I-X)/a,(-D-j)/s)-Math.atan2((I-X)/a,(D-j)/s))>=0?ee:2*Math.PI+ee;0==x&&oe>0?oe-=2*Math.PI:0!=x&&oe<0&&(oe+=2*Math.PI);for(var B=2*oe/Math.PI,he=Math.ceil(B<0?-1*B:B),Oe=oe/he,Ve=8/3*Math.sin(Oe/4)*Math.sin(Oe/4)/Math.sin(Oe/2),Re=b*s,_e=b*a,rt=T*s,st=T*a,Pe=Math.cos(K),et=Math.sin(K),Sn=-Ve*(Re*et+st*Pe),jt=-Ve*(rt*et-_e*Pe),gt=0,xt=0,De=[],Ne=0;Ne<he;++Ne){K+=Oe,gt=Re*(Pe=Math.cos(K))-st*(et=Math.sin(K))+Z,xt=rt*Pe+_e*et+Q;var We=-Ve*(Re*et+st*Pe),_n=-Ve*(rt*et-_e*Pe),Kt=6*Ne;De[Kt]=Number(Sn+e),De[Kt+1]=Number(jt+i),De[Kt+2]=Number(gt-We+e),De[Kt+3]=Number(xt-_n+i),De[Kt+4]=Number(gt+e),De[Kt+5]=Number(xt+i),Sn=gt+We,jt=xt+_n}return De},getBoundingBox:function(e,i,s){var a=null;if(null!=e&&null!=i&&0!=i){var l=mxUtils.toRadians(i),d=Math.cos(l),c=Math.sin(l);s=null!=s?s:new mxPoint(e.x+e.width/2,e.y+e.height/2);var f=new mxPoint(e.x,e.y),m=new mxPoint(e.x+e.width,e.y),x=new mxPoint(m.x,e.y+e.height),v=new mxPoint(e.x,x.y);f=mxUtils.getRotatedPoint(f,d,c,s),m=mxUtils.getRotatedPoint(m,d,c,s),x=mxUtils.getRotatedPoint(x,d,c,s),v=mxUtils.getRotatedPoint(v,d,c,s),(a=new mxRectangle(f.x,f.y,0,0)).add(new mxRectangle(m.x,m.y,0,0)),a.add(new mxRectangle(x.x,x.y,0,0)),a.add(new mxRectangle(v.x,v.y,0,0))}return a},getRotatedPoint:function(e,i,s,a){a=null!=a?a:new mxPoint;var l=e.x-a.x,d=e.y-a.y;return new mxPoint(l*i-d*s+a.x,d*i+l*s+a.y)},getPortConstraints:function(e,i,s,a){var l=mxUtils.getValue(e.style,mxConstants.STYLE_PORT_CONSTRAINT,mxUtils.getValue(i.style,s?mxConstants.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants.STYLE_TARGET_PORT_CONSTRAINT,null));if(null==l)return a;var d=l.toString(),c=mxConstants.DIRECTION_MASK_NONE,m=0;1==mxUtils.getValue(e.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0)&&(m=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0));var x=0;if(m>45?(x=1,m>=135&&(x=2)):m<-45&&(x=3,m<=-135&&(x=2)),d.indexOf(mxConstants.DIRECTION_NORTH)>=0)switch(x){case 0:c|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:c|=mxConstants.DIRECTION_MASK_EAST;break;case 2:c|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:c|=mxConstants.DIRECTION_MASK_WEST}if(d.indexOf(mxConstants.DIRECTION_WEST)>=0)switch(x){case 0:c|=mxConstants.DIRECTION_MASK_WEST;break;case 1:c|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:c|=mxConstants.DIRECTION_MASK_EAST;break;case 3:c|=mxConstants.DIRECTION_MASK_SOUTH}if(d.indexOf(mxConstants.DIRECTION_SOUTH)>=0)switch(x){case 0:c|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:c|=mxConstants.DIRECTION_MASK_WEST;break;case 2:c|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:c|=mxConstants.DIRECTION_MASK_EAST}if(d.indexOf(mxConstants.DIRECTION_EAST)>=0)switch(x){case 0:c|=mxConstants.DIRECTION_MASK_EAST;break;case 1:c|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:c|=mxConstants.DIRECTION_MASK_WEST;break;case 3:c|=mxConstants.DIRECTION_MASK_NORTH}return c},reversePortConstraints:function(e){var i=0;return i=(e&mxConstants.DIRECTION_MASK_WEST)<<3,i|=(e&mxConstants.DIRECTION_MASK_NORTH)<<1,(i|=(e&mxConstants.DIRECTION_MASK_SOUTH)>>1)|(e&mxConstants.DIRECTION_MASK_EAST)>>3},findNearestSegment:function(e,i,s){var a=-1;if(e.absolutePoints.length>0)for(var l=e.absolutePoints[0],d=null,c=1;c<e.absolutePoints.length;c++){var f=e.absolutePoints[c],m=mxUtils.ptSegDistSq(l.x,l.y,f.x,f.y,i,s);(null==d||m<d)&&(d=m,a=c-1),l=f}return a},getDirectedBounds:function(e,i,s,a,l){var d=mxUtils.getValue(s,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST);if(a=null!=a?a:mxUtils.getValue(s,mxConstants.STYLE_FLIPH,!1),l=null!=l?l:mxUtils.getValue(s,mxConstants.STYLE_FLIPV,!1),i.x=Math.round(Math.max(0,Math.min(e.width,i.x))),i.y=Math.round(Math.max(0,Math.min(e.height,i.y))),i.width=Math.round(Math.max(0,Math.min(e.width,i.width))),i.height=Math.round(Math.max(0,Math.min(e.height,i.height))),l&&(d==mxConstants.DIRECTION_SOUTH||d==mxConstants.DIRECTION_NORTH)||a&&(d==mxConstants.DIRECTION_EAST||d==mxConstants.DIRECTION_WEST)){var c=i.x;i.x=i.width,i.width=c}(a&&(d==mxConstants.DIRECTION_SOUTH||d==mxConstants.DIRECTION_NORTH)||l&&(d==mxConstants.DIRECTION_EAST||d==mxConstants.DIRECTION_WEST))&&(c=i.y,i.y=i.height,i.height=c);var f=mxRectangle.fromRectangle(i);return d==mxConstants.DIRECTION_SOUTH?(f.y=i.x,f.x=i.height,f.width=i.y,f.height=i.width):d==mxConstants.DIRECTION_WEST?(f.y=i.height,f.x=i.width,f.width=i.x,f.height=i.y):d==mxConstants.DIRECTION_NORTH&&(f.y=i.width,f.x=i.y,f.width=i.height,f.height=i.x),new mxRectangle(e.x+f.x,e.y+f.y,e.width-f.width-f.x,e.height-f.height-f.y)},getPerimeterPoint:function(e,i,s){for(var a=null,l=0;l<e.length-1;l++){var d=mxUtils.intersection(e[l].x,e[l].y,e[l+1].x,e[l+1].y,i.x,i.y,s.x,s.y);if(null!=d){var c=s.x-d.x,f=s.y-d.y,m={p:d,distSq:f*f+c*c};null!=m&&(null==a||a.distSq>m.distSq)&&(a=m)}}return null!=a?a.p:null},rectangleIntersectsSegment:function(e,i,s){var a=e.y,l=e.x,d=a+e.height,c=l+e.width,f=i.x,m=s.x;if(i.x>s.x&&(f=s.x,m=i.x),m>c&&(m=c),f<l&&(f=l),f>m)return!1;var x=i.y,v=s.y,E=s.x-i.x;if(Math.abs(E)>1e-7){var S=(s.y-i.y)/E,b=i.y-S*i.x;x=S*f+b,v=S*m+b}if(x>v){var T=v;v=x,x=T}return v>d&&(v=d),x<a&&(x=a),!(x>v)},contains:function(e,i,s){return e.x<=i&&e.x+e.width>=i&&e.y<=s&&e.y+e.height>=s},intersects:function(e,i){var s=e.width,a=e.height,l=i.width,d=i.height;if(l<=0||d<=0||s<=0||a<=0)return!1;var c=e.x,f=e.y,m=i.x,x=i.y;return d+=x,s+=c,a+=f,((l+=m)<m||l>c)&&(d<x||d>f)&&(s<c||s>m)&&(a<f||a>x)},intersectsHotspot:function(e,i,s,a,l,d){if(l=null!=l?l:0,d=null!=d?d:0,(a=null!=a?a:1)>0){var c=e.getCenterX(),f=e.getCenterY(),m=e.width,x=e.height,v=mxUtils.getValue(e.style,mxConstants.STYLE_STARTSIZE)*e.view.scale;v>0&&(mxUtils.getValue(e.style,mxConstants.STYLE_HORIZONTAL,!0)?(f=e.y+v/2,x=v):(c=e.x+v/2,m=v)),m=Math.max(l,m*a),x=Math.max(l,x*a),d>0&&(m=Math.min(m,d),x=Math.min(x,d));var E=new mxRectangle(c-m/2,f-x/2,m,x),S=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0);if(0!=S){var b=Math.cos(-S),T=Math.sin(-S),D=(c=new mxPoint(e.getCenterX(),e.getCenterY()),mxUtils.getRotatedPoint(new mxPoint(i,s),b,T,c));i=D.x,s=D.y}return mxUtils.contains(E,i,s)}return!0},getOffset:function(e,i){for(var s=0,a=0,l=!1,d=e,c=document.body,f=document.documentElement;null!=d&&d!=c&&d!=f&&!l;){var m=mxUtils.getCurrentStyle(d);null!=m&&(l=l||"fixed"==m.position),d=d.parentNode}if(!i&&!l){var x=mxUtils.getDocumentScrollOrigin(e.ownerDocument);s+=x.x,a+=x.y}var v=e.getBoundingClientRect();return null!=v&&(s+=v.left,a+=v.top),new mxPoint(s,a)},getDocumentScrollOrigin:function(e){if(mxClient.IS_QUIRKS)return new mxPoint(e.body.scrollLeft,e.body.scrollTop);var i=e.defaultView||e.parentWindow;return new mxPoint(null!=i&&void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,null!=i&&void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)},getScrollOrigin:function(e,i,s){i=null!=i&&i,s=null==s||s;for(var a=null!=e?e.ownerDocument:document,l=a.body,d=a.documentElement,c=new mxPoint,f=!1;null!=e&&e!=l&&e!=d;){!isNaN(e.scrollLeft)&&!isNaN(e.scrollTop)&&(c.x+=e.scrollLeft,c.y+=e.scrollTop);var m=mxUtils.getCurrentStyle(e);null!=m&&(f=f||"fixed"==m.position),e=i?e.parentNode:null}if(!f&&s){var x=mxUtils.getDocumentScrollOrigin(a);c.x+=x.x,c.y+=x.y}return c},convertPoint:function(e,i,s){var a=mxUtils.getScrollOrigin(e,!1),l=mxUtils.getOffset(e);return l.x-=a.x,l.y-=a.y,new mxPoint(i-l.x,s-l.y)},ltrim:function(e,i){return i=i||"\\s",null!=e?e.replace(new RegExp("^["+i+"]+","g"),""):null},rtrim:function(e,i){return i=i||"\\s",null!=e?e.replace(new RegExp("["+i+"]+$","g"),""):null},trim:function(e,i){return mxUtils.ltrim(mxUtils.rtrim(e,i),i)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)&&("string"!=typeof e||e.toLowerCase().indexOf("0x")<0)},isInteger:function(e){return String(parseInt(e))===String(e)},mod:function(e,i){return(e%i+i)%i},intersection:function(e,i,s,a,l,d,c,f){var m=(f-d)*(s-e)-(c-l)*(a-i),E=((c-l)*(i-d)-(f-d)*(e-l))/m,S=((s-e)*(i-d)-(a-i)*(e-l))/m;return E>=0&&E<=1&&S>=0&&S<=1?new mxPoint(e+E*(s-e),i+E*(a-i)):null},ptSegDistSq:function(e,i,s,a,l,d){var f,c=(l-=e)*(s-=e)+(d-=i)*(a-=i);f=c<=0||(c=(l=s-l)*s+(d=a-d)*a)<=0?0:c*c/(s*s+a*a);var m=l*l+d*d-f;return m<0&&(m=0),m},ptLineDist:function(e,i,s,a,l,d){return Math.abs((a-i)*l-(s-e)*d+s*i-a*e)/Math.sqrt((a-i)*(a-i)+(s-e)*(s-e))},relativeCcw:function(e,i,s,a,l,d){var c=(l-=e)*(a-=i)-(d-=i)*(s-=e);return 0==c&&(c=l*s+d*a)>0&&(c=(l-=s)*s+(d-=a)*a)<0&&(c=0),c<0?-1:c>0?1:0},animateChanges:function(e,i){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(e,i,s){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(e,i,s,a,l,d){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(e,i){mxUtils.isVml(e)?e.style.filter=i>=100?"":"alpha(opacity="+i/5+")":mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?e.style.filter=i>=100?"":"alpha(opacity="+i+")":e.style.opacity=i/100},createImage:function(e){var i=null;return mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?((i=document.createElement(mxClient.VML_PREFIX+":image")).setAttribute("src",e),i.style.borderStyle="none"):((i=document.createElement("img")).setAttribute("src",e),i.setAttribute("border","0")),i},sortCells:function(e,i){i=null==i||i;var s=new mxDictionary;return e.sort(function(a,l){var d=s.get(a);null==d&&(d=mxCellPath.create(a).split(mxCellPath.PATH_SEPARATOR),s.put(a,d));var c=s.get(l);null==c&&(c=mxCellPath.create(l).split(mxCellPath.PATH_SEPARATOR),s.put(l,c));var f=mxCellPath.compare(d,c);return 0==f?0:f>0==i?1:-1}),e},getStylename:function(e){if(null!=e){var s=e.split(";")[0];if(s.indexOf("=")<0)return s}return""},getStylenames:function(e){var i=[];if(null!=e)for(var s=e.split(";"),a=0;a<s.length;a++)s[a].indexOf("=")<0&&i.push(s[a]);return i},indexOfStylename:function(e,i){if(null!=e&&null!=i)for(var s=e.split(";"),a=0,l=0;l<s.length;l++){if(s[l]==i)return a;a+=s[l].length+1}return-1},addStylename:function(e,i){return mxUtils.indexOfStylename(e,i)<0&&(null==e?e="":e.length>0&&";"!=e.charAt(e.length-1)&&(e+=";"),e+=i),e},removeStylename:function(e,i){var s=[];if(null!=e)for(var a=e.split(";"),l=0;l<a.length;l++)a[l]!=i&&s.push(a[l]);return s.join(";")},removeAllStylenames:function(e){var i=[];if(null!=e)for(var s=e.split(";"),a=0;a<s.length;a++)s[a].indexOf("=")>=0&&i.push(s[a]);return i.join(";")},setCellStyles:function(e,i,s,a){if(null!=i&&i.length>0){e.beginUpdate();try{for(var l=0;l<i.length;l++)if(null!=i[l]){var d=mxUtils.setStyle(e.getStyle(i[l]),s,a);e.setStyle(i[l],d)}}finally{e.endUpdate()}}},setStyle:function(e,i,s){var a=null!=s&&(void 0===s.length||s.length>0);if(null==e||0==e.length)a&&(e=i+"="+s+";");else if(e.substring(0,i.length+1)==i+"="){var l=e.indexOf(";");e=a?i+"="+s+(l<0?";":e.substring(l)):l<0||l==e.length-1?"":e.substring(l+1)}else{var d=e.indexOf(";"+i+"=");if(d<0){if(a){var c=";"==e.charAt(e.length-1)?"":";";e=e+c+i+"="+s+";"}}else l=e.indexOf(";",d+1),e=a?e.substring(0,d+1)+i+"="+s+(l<0?";":e.substring(l)):e.substring(0,d)+(l<0?";":e.substring(l))}return e},setCellStyleFlags:function(e,i,s,a,l){if(null!=i&&i.length>0){e.beginUpdate();try{for(var d=0;d<i.length;d++)if(null!=i[d]){var c=mxUtils.setStyleFlag(e.getStyle(i[d]),s,a,l);e.setStyle(i[d],c)}}finally{e.endUpdate()}}},setStyleFlag:function(e,i,s,a){if(null==e||0==e.length)e=a||null==a?i+"="+s:i+"=0";else{var l=e.indexOf(i+"=");if(l<0){var d=";"==e.charAt(e.length-1)?"":";";e=a||null==a?e+d+i+"="+s:e+d+i+"=0"}else{var c=e.indexOf(";",l),f="";f=c<0?e.substring(l+i.length+1):e.substring(l+i.length+1,c),f=null==a?parseInt(f)^s:a?parseInt(f)|s:parseInt(f)&~s,e=e.substring(0,l)+i+"="+f+(c>=0?e.substring(c):"")}}return e},getAlignmentAsPoint:function(e,i){var s=-.5,a=-.5;return e==mxConstants.ALIGN_LEFT?s=0:e==mxConstants.ALIGN_RIGHT&&(s=-1),i==mxConstants.ALIGN_TOP?a=0:i==mxConstants.ALIGN_BOTTOM&&(a=-1),new mxPoint(s,a)},getSizeForString:function(e,i,s,a,l){i=null!=i?i:mxConstants.DEFAULT_FONTSIZE,s=null!=s?s:mxConstants.DEFAULT_FONTFAMILY;var d=document.createElement("div");if(d.style.fontFamily=s,d.style.fontSize=Math.round(i)+"px",d.style.lineHeight=Math.round(i*mxConstants.LINE_HEIGHT)+"px",null!=l){(l&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(d.style.fontWeight="bold"),(l&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(d.style.fontStyle="italic");var c=[];(l&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&c.push("underline"),(l&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&c.push("line-through"),c.length>0&&(d.style.textDecoration=c.join(" "))}d.style.position="absolute",d.style.visibility="hidden",d.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",d.style.zoom="1",null!=a?(d.style.width=a+"px",d.style.whiteSpace="normal"):d.style.whiteSpace="nowrap",d.innerHTML=e,document.body.appendChild(d);var f=new mxRectangle(0,0,d.offsetWidth,d.offsetHeight);return document.body.removeChild(d),f},getViewXml:function(e,i,s,a,l){a=null!=a?a:0,l=null!=l?l:0,i=null!=i?i:1,null==s&&(s=[e.getModel().getRoot()]);var c=e.getView(),f=null,m=c.isEventsEnabled();c.setEventsEnabled(!1);var x=c.drawPane,v=c.overlayPane;e.dialect==mxConstants.DIALECT_SVG?(c.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),c.canvas.appendChild(c.drawPane),c.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),c.canvas.appendChild(c.overlayPane)):(c.drawPane=c.drawPane.cloneNode(!1),c.canvas.appendChild(c.drawPane),c.overlayPane=c.overlayPane.cloneNode(!1),c.canvas.appendChild(c.overlayPane));var E=c.getTranslate();c.translate=new mxPoint(a,l);var S=new mxTemporaryCellStates(e.getView(),i,s);try{f=(new mxCodec).encode(e.getView())}finally{S.destroy(),c.translate=E,c.canvas.removeChild(c.drawPane),c.canvas.removeChild(c.overlayPane),c.drawPane=x,c.overlayPane=v,c.setEventsEnabled(m)}return f},getScaleForPageCount:function(e,i,s,a){if(e<1)return 1;var l=(s=null!=s?s:mxConstants.PAGE_FORMAT_A4_PORTRAIT).width-2*(a=null!=a?a:0),d=s.height-2*a,c=i.getGraphBounds().clone(),f=i.getView().getScale();c.width/=f,c.height/=f;var m=c.width,b=m/c.height/(l/d),T=Math.sqrt(e),D=Math.sqrt(b),I=T*D,O=T/D;if(I<1&&O>e){var N=O/e;O=e,I/=N}O<1&&I>e&&(N=I/e,I=e,O/=N);for(var k=Math.ceil(I)*Math.ceil(O),P=0;k>e;){var F=Math.floor(I)/I,V=Math.floor(O)/O;if(1==F&&(F=Math.floor(I-1)/I),1==V&&(V=Math.floor(O-1)/O),N=1,I*=N=F>V?F:V,O*=N,k=Math.ceil(I)*Math.ceil(O),++P>10)break}return l*I/m*.99999},show:function(e,i,s,a,l,d){s=null!=s?s:0,a=null!=a?a:0,null==i?i=window.open().document:i.open(),9==document.documentMode&&i.writeln('\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]--\x3e');var f=e.getGraphBounds(),m=Math.ceil(s-f.x),x=Math.ceil(a-f.y);if(null==l&&(l=Math.ceil(f.width+s)+Math.ceil(Math.ceil(f.x)-f.x)),null==d&&(d=Math.ceil(f.height+a)+Math.ceil(Math.ceil(f.y)-f.y)),mxClient.IS_IE||11==document.documentMode){for(var v="<html><head>",E=document.getElementsByTagName("base"),S=0;S<E.length;S++)v+=E[S].outerHTML;for(v+="<style>",S=0;S<document.styleSheets.length;S++)try{v+=document.styleSheets[S].cssText}catch(F){}v+='</style></head><body style="margin:0px;">',v+='<div style="position:absolute;overflow:hidden;width:'+l+"px;height:"+d+'px;"><div style="position:relative;left:'+m+"px;top:"+x+'px;">',v+=e.container.innerHTML,i.writeln(v+="</div></div></body><html>"),i.close()}else{for(i.writeln("<html><head>"),E=document.getElementsByTagName("base"),S=0;S<E.length;S++)i.writeln(mxUtils.getOuterHtml(E[S]));var b=document.getElementsByTagName("link");for(S=0;S<b.length;S++)i.writeln(mxUtils.getOuterHtml(b[S]));var T=document.getElementsByTagName("style");for(S=0;S<T.length;S++)i.writeln(mxUtils.getOuterHtml(T[S]));i.writeln('</head><body style="margin:0px;"></body></html>'),i.close();var D=i.createElement("div");D.position="absolute",D.overflow="hidden",D.style.width=l+"px",D.style.height=d+"px";var I=i.createElement("div");I.style.position="absolute",I.style.left=m+"px",I.style.top=x+"px";for(var O=e.container.firstChild,N=null;null!=O;){var k=O.cloneNode(!0);O==e.view.drawPane.ownerSVGElement?(D.appendChild(k),N=k):I.appendChild(k),O=O.nextSibling}i.body.appendChild(D),null!=I.firstChild&&i.body.appendChild(I),null!=N&&(N.style.minWidth="",N.style.minHeight="",N.firstChild.setAttribute("transform","translate("+m+","+x+")"))}return mxUtils.removeCursors(i.body),i},printScreen:function(e){var i=window.open();e.getGraphBounds(),mxUtils.show(e,i.document);var a=function(){i.focus(),i.print(),i.close()};mxClient.IS_GC?i.setTimeout(a,500):a()},popup:function(e,i){if(i){var s=document.createElement("div");s.style.overflow="scroll",s.style.width="636px",s.style.height="460px",(a=document.createElement("pre")).innerHTML=mxUtils.htmlEntities(e,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),s.appendChild(a),(c=new mxWindow("Popup Window",s,document.body.clientWidth/2-320,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)/2-240,640,480,!1,!0)).setClosable(!0),c.setVisible(!0)}else if(mxClient.IS_NS)(c=window.open()).document.writeln("<pre>"+mxUtils.htmlEntities(e)+"</pre"),c.document.close();else{var c,a;(a=(c=window.open()).document.createElement("pre")).innerHTML=mxUtils.htmlEntities(e,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),c.document.body.appendChild(a)}},alert:function(e){alert(e)},prompt:function(e,i){return prompt(e,null!=i?i:"")},confirm:function(e){return confirm(e)},error:function(e,i,s,a){var l=document.createElement("div");l.style.padding="20px";var d=document.createElement("img");d.setAttribute("src",a||mxUtils.errorImage),d.setAttribute("valign","bottom"),d.style.verticalAlign="middle",l.appendChild(d),l.appendChild(document.createTextNode("\xa0")),l.appendChild(document.createTextNode("\xa0")),l.appendChild(document.createTextNode("\xa0")),mxUtils.write(l,e);var c=document.body.clientWidth,f=document.body.clientHeight||document.documentElement.clientHeight,m=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,l,(c-i)/2,f/4,i,null,!1,!0);if(s){mxUtils.br(l);var x=document.createElement("p"),v=document.createElement("button");mxClient.IS_IE?v.style.cssText="float:right":v.setAttribute("style","float:right"),mxEvent.addListener(v,"click",function(E){m.destroy()}),mxUtils.write(v,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource),x.appendChild(v),l.appendChild(x),mxUtils.br(l),m.setClosable(!0)}return m.setVisible(!0),m},makeDraggable:function(e,i,s,a,l,d,c,f,m,x){var v=new mxDragSource(e,s);return v.dragOffset=new mxPoint(null!=l?l:0,null!=d?d:mxConstants.TOOLTIP_VERTICAL_OFFSET),v.autoscroll=c,v.setGuidesEnabled(!1),null!=m&&(v.highlightDropTargets=m),null!=x&&(v.getDropTarget=x),v.getGraphForEvent=function(E){return"function"==typeof i?i(E):i},null!=a&&(v.createDragElement=function(){return a.cloneNode(!0)},f&&(v.createPreviewElement=function(E){var S=a.cloneNode(!0),b=parseInt(S.style.width),T=parseInt(S.style.height);return S.style.width=Math.round(b*E.view.scale)+"px",S.style.height=Math.round(T*E.view.scale)+"px",S})),v}};__mxOutput.mxUtils=void 0!==mxUtils?mxUtils:void 0;var mxConstants={DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_VML:"vml",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,827,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,827),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_SOURCE_PORT_CONSTRAINT:"sourcePortConstraint",STYLE_TARGET_PORT_CONSTRAINT:"targetPortConstraint",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_DX:"exitDx",STYLE_EXIT_DY:"exitDy",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_DX:"entryDx",STYLE_ENTRY_DY:"entryDy",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_FIX_DASH:"fixDash",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_ABSOLUTE_ARCSIZE:"absoluteArcSize",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ANCHOR_POINT_DIRECTION:"anchorPointDirection",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BACKGROUND_OUTLINE:"backgroundOutline",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,FONT_STRIKETHROUGH:8,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};function mxEventObject(e){this.name=e,this.properties=[];for(var i=1;i<arguments.length;i+=2)null!=arguments[i+1]&&(this.properties[arguments[i]]=arguments[i+1])}function mxMouseEvent(e,i){this.evt=e,this.state=i,this.sourceState=i}function mxEventSource(e){this.setEventSource(e)}__mxOutput.mxConstants=void 0!==mxConstants?mxConstants:void 0,mxEventObject.prototype.name=null,mxEventObject.prototype.properties=null,mxEventObject.prototype.consumed=!1,mxEventObject.prototype.getName=function(){return this.name},mxEventObject.prototype.getProperties=function(){return this.properties},mxEventObject.prototype.getProperty=function(e){return this.properties[e]},mxEventObject.prototype.isConsumed=function(){return this.consumed},mxEventObject.prototype.consume=function(){this.consumed=!0},__mxOutput.mxEventObject=void 0!==mxEventObject?mxEventObject:void 0,mxMouseEvent.prototype.consumed=!1,mxMouseEvent.prototype.evt=null,mxMouseEvent.prototype.graphX=null,mxMouseEvent.prototype.graphY=null,mxMouseEvent.prototype.state=null,mxMouseEvent.prototype.sourceState=null,mxMouseEvent.prototype.getEvent=function(){return this.evt},mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)},mxMouseEvent.prototype.isSource=function(e){return null!=e&&mxUtils.isAncestorNode(e.node,this.getSource())},mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())},mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())},mxMouseEvent.prototype.getGraphX=function(){return this.graphX},mxMouseEvent.prototype.getGraphY=function(){return this.graphY},mxMouseEvent.prototype.getState=function(){return this.state},mxMouseEvent.prototype.getCell=function(){var e=this.getState();return null!=e?e.cell:null},mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())},mxMouseEvent.prototype.isConsumed=function(){return this.consumed},mxMouseEvent.prototype.consume=function(e){(e=null!=e?e:null!=this.evt.touches||mxEvent.isMouseEvent(this.evt))&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0},__mxOutput.mxMouseEvent=void 0!==mxMouseEvent?mxMouseEvent:void 0,mxEventSource.prototype.eventListeners=null,mxEventSource.prototype.eventsEnabled=!0,mxEventSource.prototype.eventSource=null,mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled},mxEventSource.prototype.setEventsEnabled=function(e){this.eventsEnabled=e},mxEventSource.prototype.getEventSource=function(){return this.eventSource},mxEventSource.prototype.setEventSource=function(e){this.eventSource=e},mxEventSource.prototype.addListener=function(e,i){null==this.eventListeners&&(this.eventListeners=[]),this.eventListeners.push(e),this.eventListeners.push(i)},mxEventSource.prototype.removeListener=function(e){if(null!=this.eventListeners)for(var i=0;i<this.eventListeners.length;)this.eventListeners[i+1]==e?this.eventListeners.splice(i,2):i+=2},mxEventSource.prototype.fireEvent=function(e,i){if(null!=this.eventListeners&&this.isEventsEnabled()){null==e&&(e=new mxEventObject),null==i&&(i=this.getEventSource()),null==i&&(i=this);for(var s=[i,e],a=0;a<this.eventListeners.length;a+=2){var l=this.eventListeners[a];(null==l||l==e.getName())&&this.eventListeners[a+1].apply(this,s)}}},__mxOutput.mxEventSource=void 0!==mxEventSource?mxEventSource:void 0;var mxEvent={addListener:function(){var e=function(i,s,a){null==i.mxListenerList&&(i.mxListenerList=[]),i.mxListenerList.push({name:s,f:a})};return window.addEventListener?function(i,s,a){i.addEventListener(s,a,!1),e(i,s,a)}:function(i,s,a){i.attachEvent("on"+s,a),e(i,s,a)}}(),removeListener:function(){var e=function(i,s,a){if(null!=i.mxListenerList){for(var l=i.mxListenerList.length,d=0;d<l;d++)if(i.mxListenerList[d].f==a){i.mxListenerList.splice(d,1);break}0==i.mxListenerList.length&&(i.mxListenerList=null)}};return window.removeEventListener?function(i,s,a){i.removeEventListener(s,a,!1),e(i,0,a)}:function(i,s,a){i.detachEvent("on"+s,a),e(i,0,a)}}(),removeAllListeners:function(e){var i=e.mxListenerList;if(null!=i)for(;i.length>0;){var s=i[0];mxEvent.removeListener(e,s.name,s.f)}},addGestureListeners:function(e,i,s,a){null!=i&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",i),null!=s&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",s),null!=a&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",a),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=i&&mxEvent.addListener(e,"touchstart",i),null!=s&&mxEvent.addListener(e,"touchmove",s),null!=a&&mxEvent.addListener(e,"touchend",a))},removeGestureListeners:function(e,i,s,a){null!=i&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",i),null!=s&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",s),null!=a&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",a),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=i&&mxEvent.removeListener(e,"touchstart",i),null!=s&&mxEvent.removeListener(e,"touchmove",s),null!=a&&mxEvent.removeListener(e,"touchend",a))},redirectMouseEvents:function(e,i,s,a,l,d,c){var f=function(m){return"function"==typeof s?s(m):s};mxEvent.addGestureListeners(e,function(m){null!=a?a(m):mxEvent.isConsumed(m)||i.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(m,f(m)))},function(m){null!=l?l(m):mxEvent.isConsumed(m)||i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(m,f(m)))},function(m){null!=d?d(m):mxEvent.isConsumed(m)||i.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(m,f(m)))}),mxEvent.addListener(e,"dblclick",function(m){if(null!=c)c(m);else if(!mxEvent.isConsumed(m)){var x=f(m);i.dblClick(m,null!=x?x.cell:null)}})},release:function(e){try{if(null!=e){mxEvent.removeAllListeners(e);var i=e.childNodes;if(null!=i)for(var s=i.length,a=0;a<s;a+=1)mxEvent.release(i[a])}}catch(l){}},addMouseWheelListener:function(e,i){if(null!=e){if(i=null!=i?i:window,mxClient.IS_SF&&!mxClient.IS_TOUCH){var a=1;mxEvent.addListener(i,"gesturestart",function(f){mxEvent.consume(f),a=1}),mxEvent.addListener(i,"gesturechange",function(f){mxEvent.consume(f);var m=a-f.scale;Math.abs(m)>.2&&(e(f,m<0,!0),a=f.scale)}),mxEvent.addListener(i,"gestureend",function(f){mxEvent.consume(f)})}else{var l=[],d=0,c=0;mxEvent.addGestureListeners(i,mxUtils.bind(this,function(f){!mxEvent.isMouseEvent(f)&&null!=f.pointerId&&l.push(f)}),mxUtils.bind(this,function(f){if(!mxEvent.isMouseEvent(f)&&2==l.length){for(var m=0;m<l.length;m++)if(f.pointerId==l[m].pointerId){l[m]=f;break}var x=Math.abs(l[0].clientX-l[1].clientX),v=Math.abs(l[0].clientY-l[1].clientY),E=Math.abs(x-d),S=Math.abs(v-c);(E>mxEvent.PINCH_THRESHOLD||S>mxEvent.PINCH_THRESHOLD)&&(e(l[0],E>S?x>d:v>c,!0,l[0].clientX+(l[1].clientX-l[0].clientX)/2,l[0].clientY+(l[1].clientY-l[0].clientY)/2),d=x,c=v)}}),mxUtils.bind(this,function(f){l=[],d=0,c=0}))}mxEvent.addListener(i,"wheel",function(f){null==f&&(f=window.event),f.ctrlKey&&f.preventDefault(),(Math.abs(f.deltaX)>.5||Math.abs(f.deltaY)>.5)&&e(f,0==f.deltaY?-f.deltaX>0:-f.deltaY>0)})}},disableContextMenu:function(e){mxEvent.addListener(e,"contextmenu",function(i){return i.preventDefault&&i.preventDefault(),!1})},getSource:function(e){return null!=e.srcElement?e.srcElement:e.target},isConsumed:function(e){return null!=e.isConsumed&&e.isConsumed},isTouchEvent:function(e){return null!=e.pointerType?"touch"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH:null!=e.mozInputSource?5==e.mozInputSource:0==e.type.indexOf("touch")},isPenEvent:function(e){return null!=e.pointerType?"pen"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_PEN:null!=e.mozInputSource?2==e.mozInputSource:0==e.type.indexOf("pen")},isMultiTouchEvent:function(e){return null!=e.type&&0==e.type.indexOf("touch")&&null!=e.touches&&e.touches.length>1},isMouseEvent:function(e){return null!=e.pointerType?"mouse"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE:null!=e.mozInputSource?1==e.mozInputSource:0==e.type.indexOf("mouse")},isLeftMouseButton:function(e){return!("buttons"in e)||"mousedown"!=e.type&&"mousemove"!=e.type?"which"in e?1===e.which:1===e.button:1==e.buttons},isMiddleMouseButton:function(e){return"which"in e?2===e.which:4===e.button},isRightMouseButton:function(e){return"which"in e?3===e.which:2===e.button},isPopupTrigger:function(e){return mxEvent.isRightMouseButton(e)||mxClient.IS_MAC&&mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)&&!mxEvent.isMetaDown(e)&&!mxEvent.isAltDown(e)},isShiftDown:function(e){return null!=e&&e.shiftKey},isAltDown:function(e){return null!=e&&e.altKey},isControlDown:function(e){return null!=e&&e.ctrlKey},isMetaDown:function(e){return null!=e&&e.metaKey},getMainEvent:function(e){return"touchstart"!=e.type&&"touchmove"!=e.type||null==e.touches||null==e.touches[0]?"touchend"==e.type&&null!=e.changedTouches&&null!=e.changedTouches[0]&&(e=e.changedTouches[0]):e=e.touches[0],e},getClientX:function(e){return mxEvent.getMainEvent(e).clientX},getClientY:function(e){return mxEvent.getMainEvent(e).clientY},consume:function(e,i,s){s=null==s||s,(i=null==i||i)&&(e.preventDefault?(s&&e.stopPropagation(),e.preventDefault()):s&&(e.cancelBubble=!0)),e.isConsumed=!0,e.preventDefault||(e.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset",PINCH_THRESHOLD:10};function mxXmlRequest(e,i,s,a,l,d){this.url=e,this.params=i,this.method=s||"POST",this.async=null==a||a,this.username=l,this.password=d}__mxOutput.mxEvent=void 0!==mxEvent?mxEvent:void 0,mxXmlRequest.prototype.url=null,mxXmlRequest.prototype.params=null,mxXmlRequest.prototype.method=null,mxXmlRequest.prototype.async=null,mxXmlRequest.prototype.binary=!1,mxXmlRequest.prototype.withCredentials=!1,mxXmlRequest.prototype.username=null,mxXmlRequest.prototype.password=null,mxXmlRequest.prototype.request=null,mxXmlRequest.prototype.decodeSimulateValues=!1,mxXmlRequest.prototype.isBinary=function(){return this.binary},mxXmlRequest.prototype.setBinary=function(e){this.binary=e},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.isReady=function(){return 4==this.request.readyState},mxXmlRequest.prototype.getDocumentElement=function(){var e=this.getXml();return null!=e?e.documentElement:null},mxXmlRequest.prototype.getXml=function(){var e=this.request.responseXML;return(document.documentMode>=9||null==e||null==e.documentElement)&&(e=mxUtils.parseXml(this.request.responseText)),e},mxXmlRequest.prototype.getStatus=function(){return null!=this.request?this.request.status:null},mxXmlRequest.prototype.create=window.XMLHttpRequest?function(){var e=new XMLHttpRequest;return this.isBinary()&&e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e}:"undefined"!=typeof ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:void 0,mxXmlRequest.prototype.send=function(e,i,s,a){this.request=this.create(),null!=this.request&&(null!=e&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&(e(this),this.request.onreadystatechange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),!mxClient.IS_QUIRKS&&(null==document.documentMode||document.documentMode>9)&&window.XMLHttpRequest&&null!=s&&null!=a&&(this.request.timeout=s,this.request.ontimeout=a),this.request.send(this.params))},mxXmlRequest.prototype.setRequestHeaders=function(e,i){null!=i&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},mxXmlRequest.prototype.simulate=function(e,i){var s=null;(e=e||document)==document&&(s=window.onbeforeunload,window.onbeforeunload=null);var a=e.createElement("form");a.setAttribute("method",this.method),a.setAttribute("action",this.url),null!=i&&a.setAttribute("target",i),a.style.display="none",a.style.visibility="hidden";for(var l=this.params.indexOf("&")>0?this.params.split("&"):this.params.split(),d=0;d<l.length;d++){var c=l[d].indexOf("=");if(c>0){var f=l[d].substring(0,c),m=l[d].substring(c+1);this.decodeSimulateValues&&(m=decodeURIComponent(m));var x=e.createElement("textarea");x.setAttribute("wrap","off"),x.setAttribute("name",f),mxUtils.write(x,m),a.appendChild(x)}}e.body.appendChild(a),a.submit(),null!=a.parentNode&&a.parentNode.removeChild(a),null!=s&&(window.onbeforeunload=s)},__mxOutput.mxXmlRequest=void 0!==mxXmlRequest?mxXmlRequest:void 0;var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(e){mxClipboard.cells=e},getCells:function(){return mxClipboard.cells},isEmpty:function(){return null==mxClipboard.getCells()},cut:function(e,i){return i=mxClipboard.copy(e,i),mxClipboard.insertCount=0,mxClipboard.removeCells(e,i),i},removeCells:function(e,i){e.removeCells(i)},copy:function(e,i){i=i||e.getSelectionCells();var s=e.getExportableCells(e.model.getTopmostCells(i));return mxClipboard.insertCount=1,mxClipboard.setCells(e.cloneCells(s)),s},paste:function(e){var i=null;if(!mxClipboard.isEmpty()){i=e.getImportableCells(mxClipboard.getCells());var s=mxClipboard.insertCount*mxClipboard.STEPSIZE,a=e.getDefaultParent();i=e.importCells(i,s,s,a),mxClipboard.insertCount++,e.setSelectionCells(i)}return i}};function mxWindow(e,i,s,a,l,d,c,f,m,x){null!=i&&(c=null==c||c,this.content=i,this.init(s,a,l,d,x),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(c),this.setTitle(e),(null==f||f)&&this.installMoveHandler(),null!=m&&null!=m.parentNode?m.parentNode.replaceChild(this.div,m):document.body.appendChild(this.div))}function mxForm(e){this.table=document.createElement("table"),this.table.className=e,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}function mxImage(e,i,s){this.src=e,this.width=i,this.height=s}function mxDivResizer(e,i){if("div"==e.nodeName.toLowerCase()){null==i&&(i=window),this.div=e;var s=mxUtils.getCurrentStyle(e);null!=s&&(this.resizeWidth="auto"==s.width,this.resizeHeight="auto"==s.height),mxEvent.addListener(i,"resize",mxUtils.bind(this,function(a){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize()}}function mxDragSource(e,i){this.element=e,this.dropHandler=i,mxEvent.addGestureListeners(e,mxUtils.bind(this,function(s){this.mouseDown(s)})),mxEvent.addListener(e,"dragstart",function(s){mxEvent.consume(s)}),this.eventConsumer=function(s,a){var l=a.getProperty("eventName"),d=a.getProperty("event");l!=mxEvent.MOUSE_DOWN&&d.consume()}}function mxToolbar(e){this.container=e}function mxUndoableEdit(e,i){this.source=e,this.changes=[],this.significant=null==i||i}function mxUndoManager(e){this.size=null!=e?e:100,this.clear()}__mxOutput.mxClipboard=void 0!==mxClipboard?mxClipboard:void 0,mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=8==document.documentMode||7==document.documentMode?6:2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(e,i,s,a,l){l=null!=l?l:"mxWindow",this.div=document.createElement("div"),this.div.className=l,this.div.style.left=e+"px",this.div.style.top=i+"px",this.table=document.createElement("table"),this.table.className=l,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),null!=s&&(mxClient.IS_QUIRKS||(this.div.style.width=s+"px"),this.table.style.width=s+"px"),null!=a&&(mxClient.IS_QUIRKS||(this.div.style.height=a+"px"),this.table.style.height=a+"px");var d=document.createElement("tbody"),c=document.createElement("tr");this.title=document.createElement("td"),this.title.className=l+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),c.appendChild(this.title),d.appendChild(c),c=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=l+"Pane",7==document.documentMode&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=l+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),(mxClient.IS_QUIRKS||"DIV"!=this.content.nodeName.toUpperCase())&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),c.appendChild(this.td),d.appendChild(c),this.table.appendChild(d),this.div.appendChild(this.table);var f=mxUtils.bind(this,function(m){this.activate()});mxEvent.addGestureListeners(this.title,f),mxEvent.addGestureListeners(this.table,f),this.hide()},mxWindow.prototype.setTitle=function(e){for(var i=this.title.firstChild;null!=i;){var s=i.nextSibling;i.nodeType==mxConstants.NODETYPE_TEXT&&i.parentNode.removeChild(i),i=s}mxUtils.write(this.title,e||""),this.title.appendChild(this.buttons)},mxWindow.prototype.setScrollable=function(e){(null==navigator.userAgent||navigator.userAgent.indexOf("Presto/2.5")<0)&&(this.contentWrapper.style.overflow=e?"auto":"hidden")},mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var e=mxUtils.getCurrentStyle(this.getElement()),i=null!=e?e.zIndex:3;if(mxWindow.activeWindow){var s=mxWindow.activeWindow.getElement();null!=s&&null!=s.style&&(s.style.zIndex=i)}var a=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(i)+1,mxWindow.activeWindow=this,this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",a))}},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize&&"none"!=this.resize.style.display},mxWindow.prototype.setResizable=function(e){if(e)if(null==this.resize){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize";var i=null,s=null,a=null,l=null,d=mxUtils.bind(this,function(m){this.activate(),i=mxEvent.getClientX(m),s=mxEvent.getClientY(m),a=this.div.offsetWidth,l=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,c,f),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",m)),mxEvent.consume(m)}),c=mxUtils.bind(this,function(m){if(null!=i&&null!=s){var x=mxEvent.getClientX(m)-i,v=mxEvent.getClientY(m)-s;this.setSize(a+x,l+v),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",m)),mxEvent.consume(m)}}),f=mxUtils.bind(this,function(m){null!=i&&null!=s&&(i=null,s=null,mxEvent.removeGestureListeners(document,null,c,f),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",m)),mxEvent.consume(m))});mxEvent.addGestureListeners(this.resize,d,c,f),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(e,i){e=Math.max(this.minimumSize.width,e),i=Math.max(this.minimumSize.height,i),mxClient.IS_QUIRKS||(this.div.style.width=e+"px",this.div.style.height=i+"px"),this.table.style.width=e+"px",this.table.style.height=i+"px",mxClient.IS_QUIRKS||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")},mxWindow.prototype.setMinimizable=function(e){this.minimize.style.display=e?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginLeft="2px",this.minimize.style.display="none",this.buttons.appendChild(this.minimize);var e=!1,i=null,s=null,a=mxUtils.bind(this,function(l){if(this.activate(),e)e=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=i,mxClient.IS_QUIRKS||(this.div.style.height=s),this.table.style.height=s,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",l));else{e=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",i=this.maximize.style.display,this.maximize.style.display="none",s=this.table.style.height;var d=this.getMinimumSize();d.height>0&&(mxClient.IS_QUIRKS||(this.div.style.height=d.height+"px"),this.table.style.height=d.height+"px"),d.width>0&&(mxClient.IS_QUIRKS||(this.div.style.width=d.width+"px"),this.table.style.width=d.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",l))}mxEvent.consume(l)});mxEvent.addGestureListeners(this.minimize,a)},mxWindow.prototype.setMaximizable=function(e){this.maximize.style.display=e?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var e=!1,i=null,s=null,a=null,l=null,d=null,c=mxUtils.bind(this,function(f){if(this.activate(),"none"!=this.maximize.style.display){if(e)e=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimize.style.display=d,this.div.style.left=i+"px",this.div.style.top=s+"px",mxClient.IS_QUIRKS||(this.div.style.height=a,this.div.style.width=l,("auto"==mxUtils.getCurrentStyle(this.contentWrapper).overflow||null!=this.resize)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")),this.table.style.height=a,this.table.style.width=l,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",f));else{e=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",d=this.minimize.style.display,this.minimize.style.display="none",i=parseInt(this.div.style.left),s=parseInt(this.div.style.top),a=this.table.style.height,l=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";var m=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);mxClient.IS_QUIRKS||(this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=m-2+"px"),this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=m-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden"),mxClient.IS_QUIRKS||("auto"==mxUtils.getCurrentStyle(this.contentWrapper).overflow||null!=this.resize)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",f))}mxEvent.consume(f)}});mxEvent.addGestureListeners(this.maximize,c),mxEvent.addListener(this.title,"dblclick",c)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(e){var i=mxEvent.getClientX(e),s=mxEvent.getClientY(e),a=this.getX(),l=this.getY(),d=mxUtils.bind(this,function(f){var m=mxEvent.getClientX(f)-i,x=mxEvent.getClientY(f)-s;this.setLocation(a+m,l+x),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",f)),mxEvent.consume(f)}),c=mxUtils.bind(this,function(f){mxEvent.removeGestureListeners(document,null,d,c),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",f)),mxEvent.consume(f)});mxEvent.addGestureListeners(document,null,d,c),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",e)),mxEvent.consume(e)})),mxClient.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(e,i){this.div.style.left=e+"px",this.div.style.top=i+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(e){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",e)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(e)}))},mxWindow.prototype.setImage=function(e){this.image=document.createElement("img"),this.image.setAttribute("src",e),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(e){this.closeImg.style.display=e?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div&&"none"!=this.div.style.display},mxWindow.prototype.setVisible=function(e){null!=this.div&&this.isVisible()!=e&&(e?this.show():this.hide())},mxWindow.prototype.show=function(){this.div.style.display="",this.activate();var e=mxUtils.getCurrentStyle(this.contentWrapper);!mxClient.IS_QUIRKS&&("auto"==e.overflow||null!=this.resize)&&"none"!=this.contentWrapper.style.display&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null},__mxOutput.mxWindow=void 0!==mxWindow?mxWindow:void 0,mxForm.prototype.table=null,mxForm.prototype.body=!1,mxForm.prototype.getTable=function(){return this.table},mxForm.prototype.addButtons=function(e,i){var s=document.createElement("tr"),a=document.createElement("td");s.appendChild(a),a=document.createElement("td");var l=document.createElement("button");mxUtils.write(l,mxResources.get("ok")||"OK"),a.appendChild(l),mxEvent.addListener(l,"click",function(){e()}),l=document.createElement("button"),mxUtils.write(l,mxResources.get("cancel")||"Cancel"),a.appendChild(l),mxEvent.addListener(l,"click",function(){i()}),s.appendChild(a),this.body.appendChild(s)},mxForm.prototype.addText=function(e,i,s){var a=document.createElement("input");return a.setAttribute("type",s||"text"),a.value=i,this.addField(e,a)},mxForm.prototype.addCheckbox=function(e,i){var s=document.createElement("input");return s.setAttribute("type","checkbox"),this.addField(e,s),i&&(s.checked=!0),s},mxForm.prototype.addTextarea=function(e,i,s){var a=document.createElement("textarea");return mxClient.IS_NS&&s--,a.setAttribute("rows",s||2),a.value=i,this.addField(e,a)},mxForm.prototype.addCombo=function(e,i,s){var a=document.createElement("select");return null!=s&&a.setAttribute("size",s),i&&a.setAttribute("multiple","true"),this.addField(e,a)},mxForm.prototype.addOption=function(e,i,s,a){var l=document.createElement("option");mxUtils.writeln(l,i),l.setAttribute("value",s),a&&l.setAttribute("selected",a),e.appendChild(l)},mxForm.prototype.addField=function(e,i){var s=document.createElement("tr"),a=document.createElement("td");return mxUtils.write(a,e),s.appendChild(a),(a=document.createElement("td")).appendChild(i),s.appendChild(a),this.body.appendChild(s),i},__mxOutput.mxForm=void 0!==mxForm?mxForm:void 0,mxImage.prototype.src=null,mxImage.prototype.width=null,mxImage.prototype.height=null,__mxOutput.mxImage=void 0!==mxImage?mxImage:void 0,mxDivResizer.prototype.resizeWidth=!0,mxDivResizer.prototype.resizeHeight=!0,mxDivResizer.prototype.handlingResize=!1,mxDivResizer.prototype.resize=function(){var e=this.getDocumentWidth(),i=this.getDocumentHeight(),s=parseInt(this.div.style.left),a=parseInt(this.div.style.right),l=parseInt(this.div.style.top),d=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(s)&&!isNaN(a)&&s>=0&&a>=0&&e-a-s>0&&(this.div.style.width=e-a-s+"px"),this.resizeHeight&&!isNaN(l)&&!isNaN(d)&&l>=0&&d>=0&&i-l-d>0&&(this.div.style.height=i-l-d+"px")},mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth},mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight},__mxOutput.mxDivResizer=void 0!==mxDivResizer?mxDivResizer:void 0,mxDragSource.prototype.element=null,mxDragSource.prototype.dropHandler=null,mxDragSource.prototype.dragOffset=null,mxDragSource.prototype.dragElement=null,mxDragSource.prototype.previewElement=null,mxDragSource.prototype.previewOffset=null,mxDragSource.prototype.enabled=!0,mxDragSource.prototype.currentGraph=null,mxDragSource.prototype.currentDropTarget=null,mxDragSource.prototype.currentPoint=null,mxDragSource.prototype.currentGuide=null,mxDragSource.prototype.currentHighlight=null,mxDragSource.prototype.autoscroll=!0,mxDragSource.prototype.guidesEnabled=!0,mxDragSource.prototype.gridEnabled=!0,mxDragSource.prototype.highlightDropTargets=!0,mxDragSource.prototype.dragElementZIndex=100,mxDragSource.prototype.dragElementOpacity=70,mxDragSource.prototype.checkEventSource=!0,mxDragSource.prototype.isEnabled=function(){return this.enabled},mxDragSource.prototype.setEnabled=function(e){this.enabled=e},mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled},mxDragSource.prototype.setGuidesEnabled=function(e){this.guidesEnabled=e},mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled},mxDragSource.prototype.setGridEnabled=function(e){this.gridEnabled=e},mxDragSource.prototype.getGraphForEvent=function(e){return null},mxDragSource.prototype.getDropTarget=function(e,i,s,a){return e.getCellAt(i,s)},mxDragSource.prototype.createDragElement=function(e){return this.element.cloneNode(!0)},mxDragSource.prototype.createPreviewElement=function(e){return null},mxDragSource.prototype.isActive=function(){return null!=this.mouseMoveHandler},mxDragSource.prototype.reset=function(){null!=this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()},mxDragSource.prototype.mouseDown=function(e){this.enabled&&!mxEvent.isConsumed(e)&&null==this.mouseMoveHandler&&(this.startDrag(e),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(e)&&(this.eventSource=mxEvent.getSource(e),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))},mxDragSource.prototype.startDrag=function(e){this.dragElement=this.createDragElement(e),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")},mxDragSource.prototype.stopDrag=function(){this.removeDragElement()},mxDragSource.prototype.removeDragElement=function(){null!=this.dragElement&&(null!=this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)},mxDragSource.prototype.getElementForEvent=function(e){return mxEvent.isTouchEvent(e)||mxEvent.isPenEvent(e)?document.elementFromPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)):mxEvent.getSource(e)},mxDragSource.prototype.graphContainsEvent=function(e,i){var s=mxEvent.getClientX(i),a=mxEvent.getClientY(i),l=mxUtils.getOffset(e.container),d=mxUtils.getScrollOrigin(),c=this.getElementForEvent(i);if(this.checkEventSource)for(;null!=c&&c!=e.container;)c=c.parentNode;return null!=c&&s>=l.x-d.x&&a>=l.y-d.y&&s<=l.x-d.x+e.container.offsetWidth&&a<=l.y-d.y+e.container.offsetHeight},mxDragSource.prototype.mouseMove=function(e){var i=this.getGraphForEvent(e);if(null!=i&&!this.graphContainsEvent(i,e)&&(i=null),i!=this.currentGraph&&(null!=this.currentGraph&&this.dragExit(this.currentGraph,e),this.currentGraph=i,null!=this.currentGraph&&this.dragEnter(this.currentGraph,e)),null!=this.currentGraph&&this.dragOver(this.currentGraph,e),null==this.dragElement||null!=this.previewElement&&"visible"==this.previewElement.style.visibility)null!=this.dragElement&&(this.dragElement.style.visibility="hidden");else{var s=mxEvent.getClientX(e),a=mxEvent.getClientY(e);null==this.dragElement.parentNode&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",null!=this.dragOffset&&(s+=this.dragOffset.x,a+=this.dragOffset.y);var l=mxUtils.getDocumentScrollOrigin(document);this.dragElement.style.left=s+l.x+"px",this.dragElement.style.top=a+l.y+"px"}mxEvent.consume(e)},mxDragSource.prototype.mouseUp=function(e){if(null!=this.currentGraph){if(null!=this.currentPoint&&(null==this.previewElement||"hidden"!=this.previewElement.style.visibility)){var i=this.currentGraph.view.scale,s=this.currentGraph.view.translate;this.drop(this.currentGraph,e,this.currentDropTarget,this.currentPoint.x/i-s.x,this.currentPoint.y/i-s.y)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),mxEvent.consume(e)},mxDragSource.prototype.removeListeners=function(){null!=this.eventSource&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null},mxDragSource.prototype.dragEnter=function(e,i){e.isMouseDown=!0,e.isMouseTrigger=mxEvent.isMouseEvent(i),this.previewElement=this.createPreviewElement(e),null!=this.previewElement&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&null!=this.previewElement&&(this.currentGuide=new mxGuide(e,e.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(e,mxConstants.DROP_TARGET_COLOR)),e.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)},mxDragSource.prototype.dragExit=function(e,i){this.currentDropTarget=null,this.currentPoint=null,e.isMouseDown=!1,e.removeListener(this.eventConsumer),null!=this.previewElement&&(null!=this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),null!=this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),null!=this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)},mxDragSource.prototype.dragOver=function(e,i){var s=mxUtils.getOffset(e.container),a=mxUtils.getScrollOrigin(e.container),l=mxEvent.getClientX(i)-s.x+a.x-e.panDx,d=mxEvent.getClientY(i)-s.y+a.y-e.panDy;if(e.autoScroll&&(null==this.autoscroll||this.autoscroll)&&e.scrollPointToVisible(l,d,e.autoExtend),null!=this.currentHighlight&&e.isDropEnabled()){this.currentDropTarget=this.getDropTarget(e,l,d,i);var c=e.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(c)}if(null!=this.previewElement){null==this.previewElement.parentNode&&(e.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");var f=this.isGridEnabled()&&e.isGridEnabledEvent(i),m=!0;if(null!=this.currentGuide&&this.currentGuide.isEnabledForEvent(i)){var E=new mxRectangle(0,0,parseInt(this.previewElement.style.width),parseInt(this.previewElement.style.height)),S=new mxPoint(l,d);m=!1,l=(S=this.currentGuide.move(E,S,f,!0)).x,d=S.y}else if(f){var b=e.view.scale,T=e.view.translate,D=e.gridSize/2;l=(e.snap(l/b-T.x-D)+T.x)*b,d=(e.snap(d/b-T.y-D)+T.y)*b}null!=this.currentGuide&&m&&this.currentGuide.hide(),null!=this.previewOffset&&(l+=this.previewOffset.x,d+=this.previewOffset.y),this.previewElement.style.left=Math.round(l)+"px",this.previewElement.style.top=Math.round(d)+"px",this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(l,d)},mxDragSource.prototype.drop=function(e,i,s,a,l){this.dropHandler.apply(this,arguments),"hidden"!=e.container.style.visibility&&e.container.focus()},__mxOutput.mxDragSource=void 0!==mxDragSource?mxDragSource:void 0,mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(e,i,s,a,l,d){var c=document.createElement(null!=i?"img":"button"),f=l||(null!=d?"mxToolbarMode":"mxToolbarItem");c.className=f,c.setAttribute("src",i),null!=e&&(null!=i?c.setAttribute("title",e):mxUtils.write(c,e)),this.container.appendChild(c),null!=s&&(mxEvent.addListener(c,"click",s),mxClient.IS_TOUCH&&mxEvent.addListener(c,"touchend",s));var m=mxUtils.bind(this,function(x){null!=a?c.setAttribute("src",i):c.style.backgroundColor=""});return mxEvent.addGestureListeners(c,mxUtils.bind(this,function(x){if(null!=a?c.setAttribute("src",a):c.style.backgroundColor="gray",null!=d){null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init());var v=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),v!=c){this.currentImg=c,this.menu.factoryMethod=d;var E=new mxPoint(c.offsetLeft,c.offsetTop+c.offsetHeight);this.menu.popup(E.x,E.y,null,x),this.menu.isMenuShowing()&&(c.className=f+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),c.className=f,this.currentImg=null})}}}),null,m),mxEvent.addListener(c,"mouseout",m),c},mxToolbar.prototype.addCombo=function(e){var i=document.createElement("div");i.style.display="inline",i.className="mxToolbarComboContainer";var s=document.createElement("select");return s.className=e||"mxToolbarCombo",i.appendChild(s),this.container.appendChild(i),s},mxToolbar.prototype.addActionCombo=function(e,i){var s=document.createElement("select");return s.className=i||"mxToolbarCombo",this.addOption(s,e,null),mxEvent.addListener(s,"change",function(a){var l=s.options[s.selectedIndex];s.selectedIndex=0,null!=l.funct&&l.funct(a)}),this.container.appendChild(s),s},mxToolbar.prototype.addOption=function(e,i,s){var a=document.createElement("option");return mxUtils.writeln(a,i),"function"==typeof s?a.funct=s:a.setAttribute("value",s),e.appendChild(a),a},mxToolbar.prototype.addSwitchMode=function(e,i,s,a,l){var d=document.createElement("img");return d.initialClassName=l||"mxToolbarMode",d.className=d.initialClassName,d.setAttribute("src",i),d.altIcon=a,null!=e&&d.setAttribute("title",e),mxEvent.addListener(d,"click",mxUtils.bind(this,function(c){var f;null!=(f=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",f)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=d),this.selectedMode=d,null!=(f=d.altIcon)?(d.altIcon=d.getAttribute("src"),d.setAttribute("src",f)):d.className=d.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),s()})),this.container.appendChild(d),null==this.defaultMode&&(this.defaultMode=d,this.selectMode(d),s()),d},mxToolbar.prototype.addMode=function(e,i,s,a,l,d){d=null==d||d;var c=document.createElement(null!=i?"img":"button");return c.initialClassName=l||"mxToolbarMode",c.className=c.initialClassName,c.setAttribute("src",i),c.altIcon=a,null!=e&&c.setAttribute("title",e),this.enabled&&d&&(mxEvent.addListener(c,"click",mxUtils.bind(this,function(f){this.selectMode(c,s),this.noReset=!1})),mxEvent.addListener(c,"dblclick",mxUtils.bind(this,function(f){this.selectMode(c,s),this.noReset=!0})),null==this.defaultMode&&(this.defaultMode=c,this.defaultFunction=s,this.selectMode(c,s))),this.container.appendChild(c),c},mxToolbar.prototype.selectMode=function(e,i){var s;this.selectedMode!=e&&(null!=this.selectedMode&&(null!=(s=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",s)):this.selectedMode.className=this.selectedMode.initialClassName),this.selectedMode=e,null!=(s=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",s)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",i)))},mxToolbar.prototype.resetMode=function(e){(e||!this.noReset)&&this.selectedMode!=this.defaultMode&&this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(e){return this.addItem(null,e,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var e=document.createElement("hr");e.style.marginRight="6px",e.setAttribute("size","1"),this.container.appendChild(e)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,null!=this.menu&&this.menu.destroy()},__mxOutput.mxToolbar=void 0!==mxToolbar?mxToolbar:void 0,mxUndoableEdit.prototype.source=null,mxUndoableEdit.prototype.changes=null,mxUndoableEdit.prototype.significant=null,mxUndoableEdit.prototype.undone=!1,mxUndoableEdit.prototype.redone=!1,mxUndoableEdit.prototype.isEmpty=function(){return 0==this.changes.length},mxUndoableEdit.prototype.isSignificant=function(){return this.significant},mxUndoableEdit.prototype.add=function(e){this.changes.push(e)},mxUndoableEdit.prototype.notify=function(){},mxUndoableEdit.prototype.die=function(){},mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var i=this.changes.length-1;i>=0;i--){var s=this.changes[i];null!=s.execute?s.execute():null!=s.undo&&s.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",s))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var e=this.changes.length,i=0;i<e;i++){var s=this.changes[i];null!=s.execute?s.execute():null!=s.redo&&s.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",s))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},__mxOutput.mxUndoableEdit=void 0!==mxUndoableEdit?mxUndoableEdit:void 0,mxUndoManager.prototype=new mxEventSource,mxUndoManager.prototype.constructor=mxUndoManager,mxUndoManager.prototype.size=null,mxUndoManager.prototype.history=null,mxUndoManager.prototype.indexOfNextAdd=0,mxUndoManager.prototype.isEmpty=function(){return 0==this.history.length},mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject(mxEvent.CLEAR))},mxUndoManager.prototype.canUndo=function(){return this.indexOfNextAdd>0},mxUndoManager.prototype.undo=function(){for(;this.indexOfNextAdd>0;){var e=this.history[--this.indexOfNextAdd];if(e.undo(),e.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e));break}}},mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length},mxUndoManager.prototype.redo=function(){for(var e=this.history.length;this.indexOfNextAdd<e;){var i=this.history[this.indexOfNextAdd++];if(i.redo(),i.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",i));break}}},mxUndoManager.prototype.undoableEditHappened=function(e){this.trim(),this.size>0&&this.size==this.history.length&&this.history.shift(),this.history.push(e),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",e))},mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var e=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),i=0;i<e.length;i++)e[i].die()},__mxOutput.mxUndoManager=void 0!==mxUndoManager?mxUndoManager:void 0;var mxUrlConverter=function(){};function mxPanningManager(e){this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:function(s,a){},mouseMove:function(s,a){},mouseUp:mxUtils.bind(this,function(s,a){this.active&&this.stop()})},e.addMouseListener(this.mouseListener),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.stop()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener);var i=mxUtils.bind(this,function(){return this.scrollbars=mxUtils.hasScrollbars(e.container),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,window.setInterval(mxUtils.bind(this,function(){if(this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars){var s=-e.container.scrollLeft-Math.ceil(this.dx),a=-e.container.scrollTop-Math.ceil(this.dy);e.panGraph(s,a),e.panDx=this.scrollLeft-e.container.scrollLeft,e.panDy=this.scrollTop-e.container.scrollTop,e.fireEvent(new mxEventObject(mxEvent.PAN))}else e.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=e.view.translate.x,this.t0y=e.view.translate.y,this.active=!0},this.panTo=function(s,a,l,d){this.active||this.start(),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,d=null!=d?d:0;var c=e.container;this.dx=s+(l=null!=l?l:0)-c.scrollLeft-c.clientWidth,this.dx=this.dx<0&&Math.abs(this.dx)<this.border?this.border+this.dx:this.handleMouseOut?Math.max(this.dx,0):0,0==this.dx&&(this.dx=s-c.scrollLeft,this.dx=this.dx>0&&this.dx<this.border?this.dx-this.border:this.handleMouseOut?Math.min(0,this.dx):0),this.dy=a+d-c.scrollTop-c.clientHeight,this.dy=this.dy<0&&Math.abs(this.dy)<this.border?this.border+this.dy:this.handleMouseOut?Math.max(this.dy,0):0,0==this.dy&&(this.dy=a-c.scrollTop,this.dy=this.dy>0&&this.dy<this.border?this.dy-this.border:this.handleMouseOut?Math.min(0,this.dy):0),0!=this.dx||0!=this.dy?(this.dx*=this.damper,this.dy*=this.damper,null==this.thread&&(this.thread=i())):null!=this.thread&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){if(this.active)if(this.active=!1,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars)e.panDx=0,e.panDy=0,e.fireEvent(new mxEventObject(mxEvent.PAN));else{var s=e.panDx,a=e.panDy;(0!=s||0!=a)&&(e.panGraph(0,0),e.view.setTranslate(this.t0x+s/e.view.scale,this.t0y+a/e.view.scale))}},this.destroy=function(){e.removeMouseListener(this.mouseListener),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)}}function mxPopupMenu(e){this.factoryMethod=e,null!=e&&this.init()}function mxAutoSaveManager(e){this.changeHandler=mxUtils.bind(this,function(i,s){this.isEnabled()&&this.graphModelChanged(s.getProperty("edit").changes)}),this.setGraph(e)}function mxAnimation(e){this.delay=null!=e?e:20}function mxMorphing(e,i,s,a){mxAnimation.call(this,a),this.graph=e,this.steps=null!=i?i:6,this.ease=null!=s?s:1.5}function mxImageBundle(e){this.images=[],this.alt=null!=e&&e}function mxImageExport(){}function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}function mxXmlCanvas2D(e){mxAbstractCanvas2D.call(this),this.root=e,this.writeDefaults()}function mxSvgCanvas2D(e,i){mxAbstractCanvas2D.call(this),this.root=e,this.gradients=[],this.defs=null,this.styleEnabled=null!=i&&i;var s=null;if(e.ownerDocument!=document){for(var a=e;null!=a&&"svg"!=a.nodeName;)a=a.parentNode;s=a}null!=s&&(s.getElementsByTagName("defs").length>0&&(this.defs=s.getElementsByTagName("defs")[0]),null==this.defs&&(this.defs=this.createElement("defs"),null!=s.firstChild?s.insertBefore(this.defs,s.firstChild):s.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle()))}mxUrlConverter.prototype.enabled=!0,mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var e=this.baseUrl.lastIndexOf("/");e>0&&(this.baseUrl=this.baseUrl.substring(0,e+1))},mxUrlConverter.prototype.isEnabled=function(){return this.enabled},mxUrlConverter.prototype.setEnabled=function(e){this.enabled=e},mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl},mxUrlConverter.prototype.setBaseUrl=function(e){this.baseUrl=e},mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(e){this.baseDomain=e},mxUrlConverter.prototype.isRelativeUrl=function(e){return null!=e&&"//"!=e.substring(0,2)&&"http://"!=e.substring(0,7)&&"https://"!=e.substring(0,8)&&"data:image"!=e.substring(0,10)&&"file://"!=e.substring(0,7)},mxUrlConverter.prototype.convert=function(e){return this.isEnabled()&&this.isRelativeUrl(e)&&(null==this.getBaseUrl()&&this.updateBaseUrl(),e="/"==e.charAt(0)?this.getBaseDomain()+e:this.getBaseUrl()+e),e},__mxOutput.mxUrlConverter=void 0!==mxUrlConverter?mxUrlConverter:void 0,mxPanningManager.prototype.damper=1/6,mxPanningManager.prototype.delay=10,mxPanningManager.prototype.handleMouseOut=!0,mxPanningManager.prototype.border=0,__mxOutput.mxPanningManager=void 0!==mxPanningManager?mxPanningManager:void 0,mxPopupMenu.prototype=new mxEventSource,mxPopupMenu.prototype.constructor=mxPopupMenu,mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif",mxPopupMenu.prototype.zIndex=10006,mxPopupMenu.prototype.factoryMethod=null,mxPopupMenu.prototype.useLeftButtonForPopup=!1,mxPopupMenu.prototype.enabled=!0,mxPopupMenu.prototype.itemCount=0,mxPopupMenu.prototype.autoExpand=!1,mxPopupMenu.prototype.smartSeparators=!1,mxPopupMenu.prototype.labels=!0,mxPopupMenu.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent.disableContextMenu(this.div)},mxPopupMenu.prototype.isEnabled=function(){return this.enabled},mxPopupMenu.prototype.setEnabled=function(e){this.enabled=e},mxPopupMenu.prototype.isPopupTrigger=function(e){return e.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(e.getEvent())},mxPopupMenu.prototype.addItem=function(e,i,s,a,l,d,c,f){a=a||this,this.itemCount++,a.willAddSeparator&&(a.containsItems&&this.addSeparator(a,!0),a.willAddSeparator=!1),a.containsItems=!0;var m=document.createElement("tr");m.className="mxPopupMenuItem";var x=document.createElement("td");if(x.className="mxPopupMenuIcon",null!=i){var v=document.createElement("img");v.src=i,x.appendChild(v)}else if(null!=l){var E=document.createElement("div");E.className=l,x.appendChild(E)}if(m.appendChild(x),this.labels){var S=document.createElement("td");S.className="mxPopupMenuItem"+(null==d||d?"":" mxDisabled"),mxUtils.write(S,e),S.align="left",m.appendChild(S);var b=document.createElement("td");b.className="mxPopupMenuItem"+(null==d||d?"":" mxDisabled"),b.style.paddingRight="6px",b.style.textAlign="right",m.appendChild(b),null==a.div&&this.createSubmenu(a)}if(a.tbody.appendChild(m),0!=c&&0!=d){var T=null;mxEvent.addGestureListeners(m,mxUtils.bind(this,function(D){this.eventReceiver=m,a.activeRow!=m&&a.activeRow!=a&&(null!=a.activeRow&&null!=a.activeRow.div.parentNode&&this.hideSubmenu(a),null!=m.div&&(this.showSubmenu(a,m),a.activeRow=m)),null!=document.selection&&(mxClient.IS_QUIRKS||8==document.documentMode)&&(T=document.selection.createRange()),mxEvent.consume(D)}),mxUtils.bind(this,function(D){a.activeRow!=m&&a.activeRow!=a&&(null!=a.activeRow&&null!=a.activeRow.div.parentNode&&this.hideSubmenu(a),this.autoExpand&&null!=m.div&&(this.showSubmenu(a,m),a.activeRow=m)),f||(m.className="mxPopupMenuItemHover")}),mxUtils.bind(this,function(D){if(this.eventReceiver==m){if(a.activeRow!=m&&this.hideMenu(),null!=T){try{T.select()}catch(I){}T=null}null!=s&&s(D)}this.eventReceiver=null,mxEvent.consume(D)})),f||mxEvent.addListener(m,"mouseout",mxUtils.bind(this,function(D){m.className="mxPopupMenuItem"}))}return m},mxPopupMenu.prototype.addCheckmark=function(e,i){var s=e.firstChild.nextSibling;s.style.backgroundImage="url('"+i+"')",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="2px 50%"},mxPopupMenu.prototype.createSubmenu=function(e){e.table=document.createElement("table"),e.table.className="mxPopupMenu",e.tbody=document.createElement("tbody"),e.table.appendChild(e.tbody),e.div=document.createElement("div"),e.div.className="mxPopupMenu",e.div.style.position="absolute",e.div.style.display="inline",e.div.style.zIndex=this.zIndex,e.div.appendChild(e.table);var i=document.createElement("img");i.setAttribute("src",this.submenuImage),td=e.firstChild.nextSibling.nextSibling,td.appendChild(i)},mxPopupMenu.prototype.showSubmenu=function(e,i){if(null!=i.div){i.div.style.left=e.div.offsetLeft+i.offsetLeft+i.offsetWidth-1+"px",i.div.style.top=e.div.offsetTop+i.offsetTop+"px",document.body.appendChild(i.div);var s=parseInt(i.div.offsetLeft),a=parseInt(i.div.offsetWidth),l=mxUtils.getDocumentScrollOrigin(document),d=document.body,c=document.documentElement;s+a>l.x+(d.clientWidth||c.clientWidth)&&(i.div.style.left=Math.max(0,e.div.offsetLeft-a+(mxClient.IS_IE?6:-6))+"px"),mxUtils.fit(i.div)}},mxPopupMenu.prototype.addSeparator=function(e,i){if(e=e||this,this.smartSeparators&&!i)e.willAddSeparator=!0;else if(null!=e.tbody){e.willAddSeparator=!1;var s=document.createElement("tr"),a=document.createElement("td");a.className="mxPopupMenuIcon",a.style.padding="0 0 0 0px",s.appendChild(a);var l=document.createElement("td");l.style.padding="0 0 0 0px",l.setAttribute("colSpan","2");var d=document.createElement("hr");d.setAttribute("size","1"),l.appendChild(d),s.appendChild(l),e.tbody.appendChild(s)}},mxPopupMenu.prototype.popup=function(e,i,s,a){if(null!=this.div&&null!=this.tbody&&null!=this.factoryMethod){for(this.div.style.left=e+"px",this.div.style.top=i+"px";null!=this.tbody.firstChild;)mxEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,s,a),this.itemCount>0&&(this.showMenu(),this.fireEvent(new mxEventObject(mxEvent.SHOW)))}},mxPopupMenu.prototype.isMenuShowing=function(){return null!=this.div&&this.div.parentNode==document.body},mxPopupMenu.prototype.showMenu=function(){document.documentMode>=9&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)},mxPopupMenu.prototype.hideMenu=function(){null!=this.div&&(null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject(mxEvent.HIDE)))},mxPopupMenu.prototype.hideSubmenu=function(e){null!=e.activeRow&&(this.hideSubmenu(e.activeRow),null!=e.activeRow.div.parentNode&&e.activeRow.div.parentNode.removeChild(e.activeRow.div),e.activeRow=null)},mxPopupMenu.prototype.destroy=function(){null!=this.div&&(mxEvent.release(this.div),null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.div=null)},__mxOutput.mxPopupMenu=void 0!==mxPopupMenu?mxPopupMenu:void 0,mxAutoSaveManager.prototype=new mxEventSource,mxAutoSaveManager.prototype.constructor=mxAutoSaveManager,mxAutoSaveManager.prototype.graph=null,mxAutoSaveManager.prototype.autoSaveDelay=10,mxAutoSaveManager.prototype.autoSaveThrottle=2,mxAutoSaveManager.prototype.autoSaveThreshold=5,mxAutoSaveManager.prototype.ignoredChanges=0,mxAutoSaveManager.prototype.lastSnapshot=0,mxAutoSaveManager.prototype.enabled=!0,mxAutoSaveManager.prototype.changeHandler=null,mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled},mxAutoSaveManager.prototype.setEnabled=function(e){this.enabled=e},mxAutoSaveManager.prototype.setGraph=function(e){null!=this.graph&&this.graph.getModel().removeListener(this.changeHandler),this.graph=e,null!=this.graph&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)},mxAutoSaveManager.prototype.save=function(){},mxAutoSaveManager.prototype.graphModelChanged=function(e){var s=((new Date).getTime()-this.lastSnapshot)/1e3;s>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&s>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++},mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=(new Date).getTime(),this.ignoredChanges=0},mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxAutoSaveManager=void 0!==mxAutoSaveManager?mxAutoSaveManager:void 0,mxAnimation.prototype=new mxEventSource,mxAnimation.prototype.constructor=mxAnimation,mxAnimation.prototype.delay=null,mxAnimation.prototype.thread=null,mxAnimation.prototype.isRunning=function(){return null!=this.thread},mxAnimation.prototype.startAnimation=function(){null==this.thread&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))},mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))},mxAnimation.prototype.stopAnimation=function(){null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))},__mxOutput.mxAnimation=void 0!==mxAnimation?mxAnimation:void 0,mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){mxAnimation.prototype.updateAnimation.apply(this,arguments);var e=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var i=0;i<this.cells.length;i++)this.animateCell(this.cells[i],e,!1);else this.animateCell(this.graph.getModel().getRoot(),e,!0);this.show(e),(e.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(e){e.show()},mxMorphing.prototype.animateCell=function(e,i,s){var a=this.graph.getView().getState(e),l=null;if(null!=a&&(l=this.getDelta(a),this.graph.getModel().isVertex(e)&&(0!=l.x||0!=l.y))){var d=this.graph.view.getTranslate(),c=this.graph.view.getScale();l.x+=d.x*c,l.y+=d.y*c,i.moveState(a,-l.x/this.ease,-l.y/this.ease)}if(s&&!this.stopRecursion(a,l))for(var f=this.graph.getModel().getChildCount(e),m=0;m<f;m++)this.animateCell(this.graph.getModel().getChildAt(e,m),i,s)},mxMorphing.prototype.stopRecursion=function(e,i){return null!=i&&(0!=i.x||0!=i.y)},mxMorphing.prototype.getDelta=function(e){var i=this.getOriginForCell(e.cell),s=this.graph.getView().getTranslate(),a=this.graph.getView().getScale();return new mxPoint((i.x-(e.x/a-s.x))*a,(i.y-(e.y/a-s.y))*a)},mxMorphing.prototype.getOriginForCell=function(e){var i=null;if(null!=e){var s=this.graph.getModel().getParent(e),a=this.graph.getCellGeometry(e);if(i=this.getOriginForCell(s),null!=a)if(a.relative){var l=this.graph.getCellGeometry(s);null!=l&&(i.x+=a.x*l.width,i.y+=a.y*l.height)}else i.x+=a.x,i.y+=a.y}if(null==i){var d=this.graph.view.getTranslate();i=new mxPoint(-d.x,-d.y)}return i},__mxOutput.mxMorphing=void 0!==mxMorphing?mxMorphing:void 0,mxImageBundle.prototype.images=null,mxImageBundle.prototype.alt=null,mxImageBundle.prototype.putImage=function(e,i,s){this.images[e]={value:i,fallback:s}},mxImageBundle.prototype.getImage=function(e){var i=null;if(null!=e){var s=this.images[e];null!=s&&(i=this.alt?s.fallback:s.value)}return i},__mxOutput.mxImageBundle=void 0!==mxImageBundle?mxImageBundle:void 0,mxImageExport.prototype.includeOverlays=!1,mxImageExport.prototype.drawState=function(e,i){null!=e&&(this.visitStatesRecursive(e,i,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays&&this.visitStatesRecursive(e,i,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)})))},mxImageExport.prototype.visitStatesRecursive=function(e,i,s){if(null!=e){s(e,i);for(var a=e.view.graph,l=a.model.getChildCount(e.cell),d=0;d<l;d++){var c=a.view.getState(a.model.getChildAt(e.cell,d));this.visitStatesRecursive(c,i,s)}}},mxImageExport.prototype.getLinkForCellState=function(e,i){return null},mxImageExport.prototype.drawCellState=function(e,i){var s=this.getLinkForCellState(e,i);null!=s&&i.setLink(s),this.drawShape(e,i),this.drawText(e,i),null!=s&&i.setLink(null)},mxImageExport.prototype.drawShape=function(e,i){e.shape instanceof mxShape&&e.shape.checkBounds()&&(i.save(),e.shape.beforePaint(i),e.shape.paint(i),e.shape.afterPaint(i),i.restore())},mxImageExport.prototype.drawText=function(e,i){null!=e.text&&e.text.checkBounds()&&(i.save(),e.text.beforePaint(i),e.text.paint(i),e.text.afterPaint(i),i.restore())},mxImageExport.prototype.drawOverlays=function(e,i){null!=e.overlays&&e.overlays.visit(function(s,a){a instanceof mxShape&&a.paint(i)})},__mxOutput.mxImageExport=void 0!==mxImageExport?mxImageExport:void 0,mxAbstractCanvas2D.prototype.state=null,mxAbstractCanvas2D.prototype.states=null,mxAbstractCanvas2D.prototype.path=null,mxAbstractCanvas2D.prototype.rotateHtml=!0,mxAbstractCanvas2D.prototype.lastX=0,mxAbstractCanvas2D.prototype.lastY=0,mxAbstractCanvas2D.prototype.moveOp="M",mxAbstractCanvas2D.prototype.lineOp="L",mxAbstractCanvas2D.prototype.quadOp="Q",mxAbstractCanvas2D.prototype.curveOp="C",mxAbstractCanvas2D.prototype.closeOp="Z",mxAbstractCanvas2D.prototype.pointerEvents=!1,mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter},mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]},mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}},mxAbstractCanvas2D.prototype.format=function(e){return Math.round(parseFloat(e))},mxAbstractCanvas2D.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),arguments.length>2))for(var e=this.state,i=2;i<arguments.length;i+=2)this.lastX=arguments[i-1],this.lastY=arguments[i],this.path.push(this.format((this.lastX+e.dx)*e.scale)),this.path.push(this.format((this.lastY+e.dy)*e.scale))},mxAbstractCanvas2D.prototype.rotatePoint=function(e,i,s,a,l){var d=s*(Math.PI/180);return mxUtils.getRotatedPoint(new mxPoint(e,i),Math.cos(d),Math.sin(d),new mxPoint(a,l))},mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)},mxAbstractCanvas2D.prototype.restore=function(){this.states.length>0&&(this.state=this.states.pop())},mxAbstractCanvas2D.prototype.setLink=function(e){},mxAbstractCanvas2D.prototype.scale=function(e){this.state.scale*=e,this.state.strokeWidth*=e},mxAbstractCanvas2D.prototype.translate=function(e,i){this.state.dx+=e,this.state.dy+=i},mxAbstractCanvas2D.prototype.rotate=function(e,i,s,a,l){},mxAbstractCanvas2D.prototype.setAlpha=function(e){this.state.alpha=e},mxAbstractCanvas2D.prototype.setFillAlpha=function(e){this.state.fillAlpha=e},mxAbstractCanvas2D.prototype.setStrokeAlpha=function(e){this.state.strokeAlpha=e},mxAbstractCanvas2D.prototype.setFillColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fillColor=e,this.state.gradientColor=null},mxAbstractCanvas2D.prototype.setGradient=function(e,i,s,a,l,d,c,f,m){var x=this.state;x.fillColor=e,x.gradientFillAlpha=null!=f?f:1,x.gradientColor=i,x.gradientAlpha=null!=m?m:1,x.gradientDirection=c},mxAbstractCanvas2D.prototype.setStrokeColor=function(e){e==mxConstants.NONE&&(e=null),this.state.strokeColor=e},mxAbstractCanvas2D.prototype.setStrokeWidth=function(e){this.state.strokeWidth=e},mxAbstractCanvas2D.prototype.setDashed=function(e,i){this.state.dashed=e,this.state.fixDash=i},mxAbstractCanvas2D.prototype.setDashPattern=function(e){this.state.dashPattern=e},mxAbstractCanvas2D.prototype.setLineCap=function(e){this.state.lineCap=e},mxAbstractCanvas2D.prototype.setLineJoin=function(e){this.state.lineJoin=e},mxAbstractCanvas2D.prototype.setMiterLimit=function(e){this.state.miterLimit=e},mxAbstractCanvas2D.prototype.setFontColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontColor=e},mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontBackgroundColor=e},mxAbstractCanvas2D.prototype.setFontBorderColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontBorderColor=e},mxAbstractCanvas2D.prototype.setFontSize=function(e){this.state.fontSize=parseFloat(e)},mxAbstractCanvas2D.prototype.setFontFamily=function(e){this.state.fontFamily=e},mxAbstractCanvas2D.prototype.setFontStyle=function(e){null==e&&(e=0),this.state.fontStyle=e},mxAbstractCanvas2D.prototype.setShadow=function(e){this.state.shadow=e},mxAbstractCanvas2D.prototype.setShadowColor=function(e){e==mxConstants.NONE&&(e=null),this.state.shadowColor=e},mxAbstractCanvas2D.prototype.setShadowAlpha=function(e){this.state.shadowAlpha=e},mxAbstractCanvas2D.prototype.setShadowOffset=function(e,i){this.state.shadowDx=e,this.state.shadowDy=i},mxAbstractCanvas2D.prototype.begin=function(){this.lastX=0,this.lastY=0,this.path=[]},mxAbstractCanvas2D.prototype.moveTo=function(e,i){this.addOp(this.moveOp,e,i)},mxAbstractCanvas2D.prototype.lineTo=function(e,i){this.addOp(this.lineOp,e,i)},mxAbstractCanvas2D.prototype.quadTo=function(e,i,s,a){this.addOp(this.quadOp,e,i,s,a)},mxAbstractCanvas2D.prototype.curveTo=function(e,i,s,a,l,d){this.addOp(this.curveOp,e,i,s,a,l,d)},mxAbstractCanvas2D.prototype.arcTo=function(e,i,s,a,l,d,c){var f=mxUtils.arcToCurves(this.lastX,this.lastY,e,i,s,a,l,d,c);if(null!=f)for(var m=0;m<f.length;m+=6)this.curveTo(f[m],f[m+1],f[m+2],f[m+3],f[m+4],f[m+5])},mxAbstractCanvas2D.prototype.close=function(e,i,s,a,l,d){this.addOp(this.closeOp)},mxAbstractCanvas2D.prototype.end=function(){},__mxOutput.mxAbstractCanvas2D=void 0!==mxAbstractCanvas2D?mxAbstractCanvas2D:void 0,mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D),mxXmlCanvas2D.prototype.textEnabled=!0,mxXmlCanvas2D.prototype.compressed=!0,mxXmlCanvas2D.prototype.writeDefaults=function(){var e;(e=this.createElement("fontfamily")).setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(e),(e=this.createElement("fontsize")).setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(e),(e=this.createElement("shadowcolor")).setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(e),(e=this.createElement("shadowalpha")).setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(e),(e=this.createElement("shadowoffset")).setAttribute("dx",mxConstants.SHADOW_OFFSET_X),e.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(e)},mxXmlCanvas2D.prototype.format=function(e){return parseFloat(parseFloat(e).toFixed(2))},mxXmlCanvas2D.prototype.createElement=function(e){return this.root.ownerDocument.createElement(e)},mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))},mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))},mxXmlCanvas2D.prototype.scale=function(e){var i=this.createElement("scale");i.setAttribute("scale",e),this.root.appendChild(i)},mxXmlCanvas2D.prototype.translate=function(e,i){var s=this.createElement("translate");s.setAttribute("dx",this.format(e)),s.setAttribute("dy",this.format(i)),this.root.appendChild(s)},mxXmlCanvas2D.prototype.rotate=function(e,i,s,a,l){var d=this.createElement("rotate");(0!=e||i||s)&&(d.setAttribute("theta",this.format(e)),d.setAttribute("flipH",i?"1":"0"),d.setAttribute("flipV",s?"1":"0"),d.setAttribute("cx",this.format(a)),d.setAttribute("cy",this.format(l)),this.root.appendChild(d))},mxXmlCanvas2D.prototype.setAlpha=function(e){if(this.compressed){if(this.state.alpha==e)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var i=this.createElement("alpha");i.setAttribute("alpha",this.format(e)),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setFillAlpha=function(e){if(this.compressed){if(this.state.fillAlpha==e)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var i=this.createElement("fillalpha");i.setAttribute("alpha",this.format(e)),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setStrokeAlpha=function(e){if(this.compressed){if(this.state.strokeAlpha==e)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var i=this.createElement("strokealpha");i.setAttribute("alpha",this.format(e)),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setFillColor=function(e){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fillColor==e)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var i=this.createElement("fillcolor");i.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setGradient=function(e,i,s,a,l,d,c,f,m){if(null!=e&&null!=i){mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments);var x=this.createElement("gradient");x.setAttribute("c1",e),x.setAttribute("c2",i),x.setAttribute("x",this.format(s)),x.setAttribute("y",this.format(a)),x.setAttribute("w",this.format(l)),x.setAttribute("h",this.format(d)),null!=c&&x.setAttribute("direction",c),null!=f&&x.setAttribute("alpha1",f),null!=m&&x.setAttribute("alpha2",m),this.root.appendChild(x)}},mxXmlCanvas2D.prototype.setStrokeColor=function(e){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.strokeColor==e)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var i=this.createElement("strokecolor");i.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setStrokeWidth=function(e){if(this.compressed){if(this.state.strokeWidth==e)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var i=this.createElement("strokewidth");i.setAttribute("width",this.format(e)),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setDashed=function(e,i){if(this.compressed){if(this.state.dashed==e)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var s=this.createElement("dashed");s.setAttribute("dashed",e?"1":"0"),null!=i&&s.setAttribute("fixDash",i?"1":"0"),this.root.appendChild(s)},mxXmlCanvas2D.prototype.setDashPattern=function(e){if(this.compressed){if(this.state.dashPattern==e)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var i=this.createElement("dashpattern");i.setAttribute("pattern",e),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setLineCap=function(e){if(this.compressed){if(this.state.lineCap==e)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var i=this.createElement("linecap");i.setAttribute("cap",e),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setLineJoin=function(e){if(this.compressed){if(this.state.lineJoin==e)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var i=this.createElement("linejoin");i.setAttribute("join",e),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setMiterLimit=function(e){if(this.compressed){if(this.state.miterLimit==e)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var i=this.createElement("miterlimit");i.setAttribute("limit",e),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setFontColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontColor==e)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var i=this.createElement("fontcolor");i.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(i)}},mxXmlCanvas2D.prototype.setFontBackgroundColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontBackgroundColor==e)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var i=this.createElement("fontbackgroundcolor");i.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(i)}},mxXmlCanvas2D.prototype.setFontBorderColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontBorderColor==e)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var i=this.createElement("fontbordercolor");i.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(i)}},mxXmlCanvas2D.prototype.setFontSize=function(e){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==e)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var i=this.createElement("fontsize");i.setAttribute("size",e),this.root.appendChild(i)}},mxXmlCanvas2D.prototype.setFontFamily=function(e){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==e)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var i=this.createElement("fontfamily");i.setAttribute("family",e),this.root.appendChild(i)}},mxXmlCanvas2D.prototype.setFontStyle=function(e){if(this.textEnabled){if(null==e&&(e=0),this.compressed){if(this.state.fontStyle==e)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var i=this.createElement("fontstyle");i.setAttribute("style",e),this.root.appendChild(i)}},mxXmlCanvas2D.prototype.setShadow=function(e){if(this.compressed){if(this.state.shadow==e)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var i=this.createElement("shadow");i.setAttribute("enabled",e?"1":"0"),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setShadowColor=function(e){if(this.compressed){if(e==mxConstants.NONE&&(e=null),this.state.shadowColor==e)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var i=this.createElement("shadowcolor");i.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setShadowAlpha=function(e){if(this.compressed){if(this.state.shadowAlpha==e)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var i=this.createElement("shadowalpha");i.setAttribute("alpha",e),this.root.appendChild(i)},mxXmlCanvas2D.prototype.setShadowOffset=function(e,i){if(this.compressed){if(this.state.shadowDx==e&&this.state.shadowDy==i)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var s=this.createElement("shadowoffset");s.setAttribute("dx",e),s.setAttribute("dy",i),this.root.appendChild(s)},mxXmlCanvas2D.prototype.rect=function(e,i,s,a){var l=this.createElement("rect");l.setAttribute("x",this.format(e)),l.setAttribute("y",this.format(i)),l.setAttribute("w",this.format(s)),l.setAttribute("h",this.format(a)),this.root.appendChild(l)},mxXmlCanvas2D.prototype.roundrect=function(e,i,s,a,l,d){var c=this.createElement("roundrect");c.setAttribute("x",this.format(e)),c.setAttribute("y",this.format(i)),c.setAttribute("w",this.format(s)),c.setAttribute("h",this.format(a)),c.setAttribute("dx",this.format(l)),c.setAttribute("dy",this.format(d)),this.root.appendChild(c)},mxXmlCanvas2D.prototype.ellipse=function(e,i,s,a){var l=this.createElement("ellipse");l.setAttribute("x",this.format(e)),l.setAttribute("y",this.format(i)),l.setAttribute("w",this.format(s)),l.setAttribute("h",this.format(a)),this.root.appendChild(l)},mxXmlCanvas2D.prototype.image=function(e,i,s,a,l,d,c,f){l=this.converter.convert(l);var m=this.createElement("image");m.setAttribute("x",this.format(e)),m.setAttribute("y",this.format(i)),m.setAttribute("w",this.format(s)),m.setAttribute("h",this.format(a)),m.setAttribute("src",l),m.setAttribute("aspect",d?"1":"0"),m.setAttribute("flipH",c?"1":"0"),m.setAttribute("flipV",f?"1":"0"),this.root.appendChild(m)},mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastX=0,this.lastY=0},mxXmlCanvas2D.prototype.moveTo=function(e,i){var s=this.createElement("move");s.setAttribute("x",this.format(e)),s.setAttribute("y",this.format(i)),this.root.appendChild(s),this.lastX=e,this.lastY=i},mxXmlCanvas2D.prototype.lineTo=function(e,i){var s=this.createElement("line");s.setAttribute("x",this.format(e)),s.setAttribute("y",this.format(i)),this.root.appendChild(s),this.lastX=e,this.lastY=i},mxXmlCanvas2D.prototype.quadTo=function(e,i,s,a){var l=this.createElement("quad");l.setAttribute("x1",this.format(e)),l.setAttribute("y1",this.format(i)),l.setAttribute("x2",this.format(s)),l.setAttribute("y2",this.format(a)),this.root.appendChild(l),this.lastX=s,this.lastY=a},mxXmlCanvas2D.prototype.curveTo=function(e,i,s,a,l,d){var c=this.createElement("curve");c.setAttribute("x1",this.format(e)),c.setAttribute("y1",this.format(i)),c.setAttribute("x2",this.format(s)),c.setAttribute("y2",this.format(a)),c.setAttribute("x3",this.format(l)),c.setAttribute("y3",this.format(d)),this.root.appendChild(c),this.lastX=l,this.lastY=d},mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))},mxXmlCanvas2D.prototype.text=function(e,i,s,a,l,d,c,f,m,x,v,E,S){if(this.textEnabled&&null!=l){mxUtils.isNode(l)&&(l=mxUtils.getOuterHtml(l));var b=this.createElement("text");b.setAttribute("x",this.format(e)),b.setAttribute("y",this.format(i)),b.setAttribute("w",this.format(s)),b.setAttribute("h",this.format(a)),b.setAttribute("str",l),null!=d&&b.setAttribute("align",d),null!=c&&b.setAttribute("valign",c),b.setAttribute("wrap",f?"1":"0"),null==m&&(m=""),b.setAttribute("format",m),null!=x&&b.setAttribute("overflow",x),null!=v&&b.setAttribute("clip",v?"1":"0"),null!=E&&b.setAttribute("rotation",E),null!=S&&b.setAttribute("dir",S),this.root.appendChild(b)}},mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))},mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))},mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))},__mxOutput.mxXmlCanvas2D=void 0!==mxXmlCanvas2D?mxXmlCanvas2D:void 0,mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D),function(){if(mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&"function"==typeof DOMParser&&"function"==typeof XMLSerializer,mxSvgCanvas2D.prototype.useDomParser)try{var e=(new DOMParser).parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=null!=e}catch(i){mxSvgCanvas2D.prototype.useDomParser=!1}mxSvgCanvas2D.prototype.useAbsoluteIds=!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&document.getElementsByTagName("base").length>0}(),mxSvgCanvas2D.prototype.node=null,mxSvgCanvas2D.prototype.matchHtmlAlignment=!0,mxSvgCanvas2D.prototype.textEnabled=!0,mxSvgCanvas2D.prototype.foEnabled=!0,mxSvgCanvas2D.prototype.foAltText="[Object]",mxSvgCanvas2D.prototype.foOffset=0,mxSvgCanvas2D.prototype.textOffset=0,mxSvgCanvas2D.prototype.imageOffset=0,mxSvgCanvas2D.prototype.strokeTolerance=0,mxSvgCanvas2D.prototype.minStrokeWidth=1,mxSvgCanvas2D.prototype.refCount=0,mxSvgCanvas2D.prototype.lineHeightCorrection=1,mxSvgCanvas2D.prototype.pointerEventsValue="all",mxSvgCanvas2D.prototype.fontMetricsPadding=10,mxSvgCanvas2D.prototype.cacheOffsetSize=!0,mxSvgCanvas2D.prototype.format=function(e){return parseFloat(parseFloat(e).toFixed(2))},mxSvgCanvas2D.prototype.getBaseUrl=function(){var e=window.location.href,i=e.lastIndexOf("#");return i>0&&(e=e.substring(0,i)),e},mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[]},mxSvgCanvas2D.prototype.createStyle=function(e){var i=this.createElement("style");return i.setAttribute("type","text/css"),mxUtils.write(i,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),i},mxSvgCanvas2D.prototype.createElement=function(e,i){if(null!=this.root.ownerDocument.createElementNS)return this.root.ownerDocument.createElementNS(i||mxConstants.NS_SVG,e);var s=this.root.ownerDocument.createElement(e);return null!=i&&s.setAttribute("xmlns",i),s},mxSvgCanvas2D.prototype.getAlternateText=function(e,i,s,a,l,d,c,f,m,x,v,E,S){return null!=d?this.foAltText:null},mxSvgCanvas2D.prototype.createAlternateContent=function(e,i,s,a,l,d,c,f,m,x,v,E,S){var b=this.getAlternateText(e,i,s,a,l,d,c,f,m,x,v,E,S),T=this.state;if(null!=b&&T.fontSize>0){var D=f==mxConstants.ALIGN_TOP?1:f==mxConstants.ALIGN_BOTTOM?0:.3,I=c==mxConstants.ALIGN_RIGHT?"end":c==mxConstants.ALIGN_LEFT?"start":"middle",O=this.createElement("text");O.setAttribute("x",Math.round(i+T.dx)),O.setAttribute("y",Math.round(s+T.dy+D*T.fontSize)),O.setAttribute("fill",T.fontColor||"black"),O.setAttribute("font-family",T.fontFamily),O.setAttribute("font-size",Math.round(T.fontSize)+"px"),"start"!=I&&O.setAttribute("text-anchor",I),(T.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&O.setAttribute("font-weight","bold"),(T.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&O.setAttribute("font-style","italic");var N=[];return(T.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&N.push("underline"),(T.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&N.push("line-through"),N.length>0&&O.setAttribute("text-decoration",N.join(" ")),mxUtils.write(O,b),O}return null},mxSvgCanvas2D.prototype.createGradientId=function(e,i,s,a,l){"#"==e.charAt(0)&&(e=e.substring(1)),"#"==i.charAt(0)&&(i=i.substring(1)),e=e.toLowerCase()+"-"+s,i=i.toLowerCase()+"-"+a;var d=null;if(null==l||l==mxConstants.DIRECTION_SOUTH)d="s";else if(l==mxConstants.DIRECTION_EAST)d="e";else{var c=e;e=i,i=c,l==mxConstants.DIRECTION_NORTH?d="s":l==mxConstants.DIRECTION_WEST&&(d="e")}return"mx-gradient-"+e+"-"+i+"-"+d},mxSvgCanvas2D.prototype.getSvgGradient=function(e,i,s,a,l){var d=this.createGradientId(e,i,s,a,l),c=this.gradients[d];if(null==c){var f=this.root.ownerSVGElement,m=0,x=d+"-"+m;if(null!=f)for(c=f.ownerDocument.getElementById(x);null!=c&&c.ownerSVGElement!=f;)x=d+"-"+m++,c=f.ownerDocument.getElementById(x);else x="id"+ ++this.refCount;null==c&&((c=this.createSvgGradient(e,i,s,a,l)).setAttribute("id",x),null!=this.defs?this.defs.appendChild(c):f.appendChild(c)),this.gradients[d]=c}return c.getAttribute("id")},mxSvgCanvas2D.prototype.createSvgGradient=function(e,i,s,a,l){var d=this.createElement("linearGradient");d.setAttribute("x1","0%"),d.setAttribute("y1","0%"),d.setAttribute("x2","0%"),d.setAttribute("y2","0%"),null==l||l==mxConstants.DIRECTION_SOUTH?d.setAttribute("y2","100%"):l==mxConstants.DIRECTION_EAST?d.setAttribute("x2","100%"):l==mxConstants.DIRECTION_NORTH?d.setAttribute("y1","100%"):l==mxConstants.DIRECTION_WEST&&d.setAttribute("x1","100%");var c=s<1?";stop-opacity:"+s:"",f=this.createElement("stop");return f.setAttribute("offset","0%"),f.setAttribute("style","stop-color:"+e+c),d.appendChild(f),c=a<1?";stop-opacity:"+a:"",(f=this.createElement("stop")).setAttribute("offset","100%"),f.setAttribute("style","stop-color:"+i+c),d.appendChild(f),d},mxSvgCanvas2D.prototype.addNode=function(e,i){var s=this.node,a=this.state;if(null!=s){if("path"==s.nodeName){if(!(null!=this.path&&this.path.length>0))return;s.setAttribute("d",this.path.join(" "))}e&&null!=a.fillColor?this.updateFill():this.styleEnabled||(s.setAttribute("fill","ellipse"==s.nodeName&&mxClient.IS_FF?"transparent":"none"),e=!1),i&&null!=a.strokeColor?this.updateStroke():this.styleEnabled||s.setAttribute("stroke","none"),null!=a.transform&&a.transform.length>0&&s.setAttribute("transform",a.transform),a.shadow&&this.root.appendChild(this.createShadow(s)),this.strokeTolerance>0&&!e&&this.root.appendChild(this.createTolerance(s)),this.pointerEvents?s.setAttribute("pointer-events",this.pointerEventsValue):!this.pointerEvents&&null==this.originalRoot&&s.setAttribute("pointer-events","none"),("rect"!=s.nodeName&&"path"!=s.nodeName&&"ellipse"!=s.nodeName||"none"!=s.getAttribute("fill")&&"transparent"!=s.getAttribute("fill")||"none"!=s.getAttribute("stroke")||"none"!=s.getAttribute("pointer-events"))&&this.root.appendChild(s),this.node=null}},mxSvgCanvas2D.prototype.updateFill=function(){var e=this.state;if((e.alpha<1||e.fillAlpha<1)&&this.node.setAttribute("fill-opacity",e.alpha*e.fillAlpha),null!=e.fillColor)if(null!=e.gradientColor){var i=this.getSvgGradient(String(e.fillColor),String(e.gradientColor),e.gradientFillAlpha,e.gradientAlpha,e.gradientDirection);if(this.root.ownerDocument==document&&this.useAbsoluteIds){var s=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+s+"#"+i+")")}else this.node.setAttribute("fill","url(#"+i+")")}else this.node.setAttribute("fill",String(e.fillColor).toLowerCase())},mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))},mxSvgCanvas2D.prototype.updateStroke=function(){var e=this.state;this.node.setAttribute("stroke",String(e.strokeColor).toLowerCase()),(e.alpha<1||e.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",e.alpha*e.strokeAlpha);var i=this.getCurrentStrokeWidth();1!=i&&this.node.setAttribute("stroke-width",i),"path"==this.node.nodeName&&this.updateStrokeAttributes(),e.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((e.fixDash?1:e.strokeWidth)*e.scale))},mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var e=this.state;if(null!=e.lineJoin&&"miter"!=e.lineJoin&&this.node.setAttribute("stroke-linejoin",e.lineJoin),null!=e.lineCap){var i=e.lineCap;"flat"==i&&(i="butt"),"butt"!=i&&this.node.setAttribute("stroke-linecap",i)}null!=e.miterLimit&&(!this.styleEnabled||10!=e.miterLimit)&&this.node.setAttribute("stroke-miterlimit",e.miterLimit)},mxSvgCanvas2D.prototype.createDashPattern=function(e){var i=[];if("string"==typeof this.state.dashPattern){var s=this.state.dashPattern.split(" ");if(s.length>0)for(var a=0;a<s.length;a++)i[a]=Number(s[a])*e}return i.join(" ")},mxSvgCanvas2D.prototype.createTolerance=function(e){var i=e.cloneNode(!0),s=parseFloat(i.getAttribute("stroke-width")||1)+this.strokeTolerance;return i.setAttribute("pointer-events","stroke"),i.setAttribute("visibility","hidden"),i.removeAttribute("stroke-dasharray"),i.setAttribute("stroke-width",s),i.setAttribute("fill","none"),i.setAttribute("stroke",mxClient.IS_OT?"none":"white"),i},mxSvgCanvas2D.prototype.createShadow=function(e){var i=e.cloneNode(!0),s=this.state;return"none"!=i.getAttribute("fill")&&(!mxClient.IS_FF||"transparent"!=i.getAttribute("fill"))&&i.setAttribute("fill",s.shadowColor),"none"!=i.getAttribute("stroke")&&i.setAttribute("stroke",s.shadowColor),i.setAttribute("transform","translate("+this.format(s.shadowDx*s.scale)+","+this.format(s.shadowDy*s.scale)+")"+(s.transform||"")),i.setAttribute("opacity",s.shadowAlpha),i},mxSvgCanvas2D.prototype.setLink=function(e){if(null==e)this.root=this.originalRoot;else{this.originalRoot=this.root;var i=this.createElement("a");null==i.setAttributeNS||this.root.ownerDocument!=document&&null==document.documentMode?i.setAttribute("xlink:href",e):i.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",e),this.root.appendChild(i),this.root=i}},mxSvgCanvas2D.prototype.rotate=function(e,i,s,a,l){if(0!=e||i||s){var d=this.state;if(a+=d.dx,l+=d.dy,a*=d.scale,l*=d.scale,d.transform=d.transform||"",i&&s)e+=180;else if(i!=s){var c=i?a:0,f=i?-1:1,m=s?l:0,x=s?-1:1;d.transform+="translate("+this.format(c)+","+this.format(m)+")scale("+this.format(f)+","+this.format(x)+")translate("+this.format(-c)+","+this.format(-m)+")"}(i?!s:s)&&(e*=-1),0!=e&&(d.transform+="rotate("+this.format(e)+","+this.format(a)+","+this.format(l)+")"),d.rotation=d.rotation+e,d.rotationCx=a,d.rotationCy=l}},mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")},mxSvgCanvas2D.prototype.rect=function(e,i,s,a){var l=this.state,d=this.createElement("rect");d.setAttribute("x",this.format((e+l.dx)*l.scale)),d.setAttribute("y",this.format((i+l.dy)*l.scale)),d.setAttribute("width",this.format(s*l.scale)),d.setAttribute("height",this.format(a*l.scale)),this.node=d},mxSvgCanvas2D.prototype.roundrect=function(e,i,s,a,l,d){this.rect(e,i,s,a),l>0&&this.node.setAttribute("rx",this.format(l*this.state.scale)),d>0&&this.node.setAttribute("ry",this.format(d*this.state.scale))},mxSvgCanvas2D.prototype.ellipse=function(e,i,s,a){var l=this.state,d=this.createElement("ellipse");d.setAttribute("cx",this.format((e+s/2+l.dx)*l.scale)),d.setAttribute("cy",this.format((i+a/2+l.dy)*l.scale)),d.setAttribute("rx",s/2*l.scale),d.setAttribute("ry",a/2*l.scale),this.node=d},mxSvgCanvas2D.prototype.image=function(e,i,s,a,l,d,c,f){l=this.converter.convert(l),d=null==d||d,c=null!=c&&c,f=null!=f&&f;var m=this.state;e+=m.dx,i+=m.dy;var x=this.createElement("image");x.setAttribute("x",this.format(e*m.scale)+this.imageOffset),x.setAttribute("y",this.format(i*m.scale)+this.imageOffset),x.setAttribute("width",this.format(s*m.scale)),x.setAttribute("height",this.format(a*m.scale)),null==x.setAttributeNS?x.setAttribute("xlink:href",l):x.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",l),d||x.setAttribute("preserveAspectRatio","none"),(m.alpha<1||m.fillAlpha<1)&&x.setAttribute("opacity",m.alpha*m.fillAlpha);var v=this.state.transform||"";if(c||f){var E=1,S=1,b=0,T=0;c&&(E=-1,b=-s-2*e),f&&(S=-1,T=-a-2*i),v+="scale("+E+","+S+")translate("+b*m.scale+","+T*m.scale+")"}v.length>0&&x.setAttribute("transform",v),this.pointerEvents||x.setAttribute("pointer-events","none"),this.root.appendChild(x)},mxSvgCanvas2D.prototype.convertHtml=function(e){if(this.useDomParser){var i=(new DOMParser).parseFromString(e,"text/html");null!=i&&("<body"==(e=(new XMLSerializer).serializeToString(i.body)).substring(0,5)&&(e=e.substring(e.indexOf(">",5)+1)),"</body>"==e.substring(e.length-7,e.length)&&(e=e.substring(0,e.length-7)))}else{if(null!=document.implementation&&null!=document.implementation.createDocument){var s=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),a=s.createElement("body");s.documentElement.appendChild(a);var l=document.createElement("div");l.innerHTML=e;for(var d=l.firstChild;null!=d;){var c=d.nextSibling;a.appendChild(s.adoptNode(d)),d=c}return a.innerHTML}var f=document.createElement("textarea");f.innerHTML=e.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=f.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return e},mxSvgCanvas2D.prototype.createDiv=function(e){var i=e;if(mxUtils.isNode(i)||(i="<div><div>"+this.convertHtml(i)+"</div></div>"),mxClient.IS_IE||mxClient.IS_IE11||!document.createElementNS)return mxUtils.isNode(i)&&(i="<div><div>"+mxUtils.getXml(i)+"</div></div>"),mxUtils.parseXml(i='<div xmlns="http://www.w3.org/1999/xhtml">'+i+"</div>").documentElement;var s=document.createElementNS("http://www.w3.org/1999/xhtml","div");if(mxUtils.isNode(i)){var a=document.createElement("div"),l=a.cloneNode(!1);this.root.ownerDocument!=document?a.appendChild(i.cloneNode(!0)):a.appendChild(i),l.appendChild(a),s.appendChild(l)}else s.innerHTML=i;return s},mxSvgCanvas2D.prototype.updateText=function(e,i,s,a,l,d,c,f,m,x,v){null!=v&&null!=v.firstChild&&null!=v.firstChild.firstChild&&this.updateTextNodes(e,i,s,a,l,d,c,f,m,x,v.firstChild)},mxSvgCanvas2D.prototype.addForeignObject=function(e,i,s,a,l,d,c,f,m,x,v,E,S,b,T){var D=this.createElement("g"),I=this.createElement("foreignObject");if(I.setAttribute("style","overflow: visible; text-align: left;"),I.setAttribute("pointer-events","none"),b.ownerDocument!=document&&(b=mxUtils.importNodeImplementation(I.ownerDocument,b,!0)),I.appendChild(b),D.appendChild(I),this.updateTextNodes(e,i,s,a,d,c,f,x,v,E,D),this.root.ownerDocument!=document){var O=this.createAlternateContent(I,e,i,s,a,l,d,c,f,m,x,v,E);if(null!=O){I.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var N=this.createElement("switch");N.appendChild(I),N.appendChild(O),D.appendChild(N)}}T.appendChild(D)},mxSvgCanvas2D.prototype.updateTextNodes=function(e,i,s,a,l,d,c,f,m,x,v){var E=this.state.scale;mxSvgCanvas2D.createCss(s+2,a,l,d,c,f,m,null!=this.state.fontBackgroundColor?this.state.fontBackgroundColor:null,null!=this.state.fontBorderColor?this.state.fontBorderColor:null,"display: flex; align-items: unsafe "+(d==mxConstants.ALIGN_TOP?"flex-start":d==mxConstants.ALIGN_BOTTOM?"flex-end":"center")+"; justify-content: unsafe "+(l==mxConstants.ALIGN_LEFT?"flex-start":l==mxConstants.ALIGN_RIGHT?"flex-end":"center")+"; ",this.getTextCss(),E,mxUtils.bind(this,function(S,b,T,D,I){e+=this.state.dx,i+=this.state.dy;var O=v.firstChild,N=O.firstChild,k=N.firstChild,F=(this.rotateHtml?this.state.rotation:0)+(null!=x?x:0),V=(0!=this.foOffset?"translate("+this.foOffset+" "+this.foOffset+")":"")+(1!=E?"scale("+E+")":"");k.firstChild.setAttribute("style",I),k.setAttribute("style",D),O.setAttribute("width",Math.ceil(1/Math.min(1,E)*100)+"%"),O.setAttribute("height",Math.ceil(1/Math.min(1,E)*100)+"%");var Y=Math.round(i+b);Y<0?O.setAttribute("y",Y):(O.removeAttribute("y"),T+="padding-top: "+Y+"px; "),N.setAttribute("style",T+"margin-left: "+Math.round(e+S)+"px;"),""!=(V+=0!=F?"rotate("+F+" "+e+" "+i+")":"")?v.setAttribute("transform",V):v.removeAttribute("transform"),1!=this.state.alpha?v.setAttribute("opacity",this.state.alpha):v.removeAttribute("opacity")}))},mxSvgCanvas2D.createCss=function(e,i,s,a,l,d,c,f,m,x,v,E,S){var b="box-sizing: border-box; font-size: 0; text-align: "+(s==mxConstants.ALIGN_LEFT?"left":s==mxConstants.ALIGN_RIGHT?"right":"center")+"; ",T=mxUtils.getAlignmentAsPoint(s,a),D="overflow: hidden; ",I="width: 1px; ",O="height: 1px; ",N=T.x*e,k=T.y*i;c?(I="width: "+Math.round(e)+"px; ",b+="max-height: "+Math.round(i)+"px; ",k=0):"fill"==d?(v+="width: 100%; height: 100%; ",b+=(I="width: "+Math.round(e)+"px; ")+(O="height: "+Math.round(i)+"px; ")):"width"==d?(v+="width: 100%; ",b+=I="width: "+Math.round(e)+"px; ",k=0,i>0&&(b+="max-height: "+Math.round(i)+"px; ")):(D="",k=0);var P="";null!=f&&(P+="background-color: "+f+"; "),null!=m&&(P+="border: 1px solid "+m+"; "),""==D||c?v+=P:b+=P,l&&e>0?(v+="white-space: normal; word-wrap: "+mxConstants.WORD_WRAP+"; ",I="width: "+Math.round(e)+"px; ",""!=D&&"fill"!=d&&(k=0)):(v+="white-space: nowrap; ",""==D&&(N=0)),S(N,k,x+I+O,b+D,v,D)},mxSvgCanvas2D.prototype.getTextCss=function(){var e=this.state,s="display: inline-block; font-size: "+e.fontSize+"px; font-family: "+e.fontFamily+"; color: "+e.fontColor+"; line-height: "+(mxConstants.ABSOLUTE_LINE_HEIGHT?e.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*this.lineHeightCorrection)+"; pointer-events: "+(this.pointerEvents?this.pointerEventsValue:"none")+"; ";(e.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(s+="font-weight: bold; "),(e.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(s+="font-style: italic; ");var a=[];return(e.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&a.push("underline"),(e.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&a.push("line-through"),a.length>0&&(s+="text-decoration: "+a.join(" ")+"; "),s},mxSvgCanvas2D.prototype.text=function(e,i,s,a,l,d,c,f,m,x,v,E,S){if(this.textEnabled&&null!=l)if(E=null!=E?E:0,this.foEnabled&&"html"==m){var b=this.createDiv(l);null!=b&&(null!=S&&b.setAttribute("dir",S),this.addForeignObject(e,i,s,a,l,d,c,f,m,x,v,E,S,b,this.root))}else this.plainText(e+this.state.dx,i+this.state.dy,s,a,l,d,c,f,x,v,E,S)},mxSvgCanvas2D.prototype.createClip=function(e,i,s,a){for(var l="mx-clip-"+(e=Math.round(e))+"-"+(i=Math.round(i))+"-"+(s=Math.round(s))+"-"+(a=Math.round(a)),d=0,c=l+"-"+d;null!=document.getElementById(c);)c=l+"-"+ ++d;clip=this.createElement("clipPath"),clip.setAttribute("id",c);var f=this.createElement("rect");return f.setAttribute("x",e),f.setAttribute("y",i),f.setAttribute("width",s),f.setAttribute("height",a),clip.appendChild(f),clip},mxSvgCanvas2D.prototype.plainText=function(e,i,s,a,l,d,c,f,m,x,v,E){v=null!=v?v:0;var S=this.state,b=S.fontSize,T=this.createElement("g"),D=S.transform||"";if(this.updateFont(T),!this.pointerEvents&&null==this.originalRoot&&T.setAttribute("pointer-events","none"),0!=v&&(D+="rotate("+v+","+this.format(e*S.scale)+","+this.format(i*S.scale)+")"),null!=E&&T.setAttribute("direction",E),x&&s>0&&a>0){var I=e,Y=i;d==mxConstants.ALIGN_CENTER?I-=s/2:d==mxConstants.ALIGN_RIGHT&&(I-=s),"fill"!=m&&(c==mxConstants.ALIGN_MIDDLE?Y-=a/2:c==mxConstants.ALIGN_BOTTOM&&(Y-=a));var O=this.createClip(I*S.scale-2,Y*S.scale-2,s*S.scale+4,a*S.scale+4);if(null!=this.defs?this.defs.appendChild(O):this.root.appendChild(O),mxClient.IS_CHROMEAPP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document)T.setAttribute("clip-path","url(#"+O.getAttribute("id")+")");else{var N=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");T.setAttribute("clip-path","url("+N+"#"+O.getAttribute("id")+")")}}var k=d==mxConstants.ALIGN_RIGHT?"end":d==mxConstants.ALIGN_CENTER?"middle":"start";"start"!=k&&T.setAttribute("text-anchor",k),(!this.styleEnabled||b!=mxConstants.DEFAULT_FONTSIZE)&&T.setAttribute("font-size",b*S.scale+"px"),D.length>0&&T.setAttribute("transform",D),S.alpha<1&&T.setAttribute("opacity",S.alpha);var P=l.split("\n"),F=Math.round(b*mxConstants.LINE_HEIGHT),V=b+(P.length-1)*F;Y=i+b-1,c==mxConstants.ALIGN_MIDDLE?Y-="fill"==m?a/2:(this.matchHtmlAlignment&&x&&a>0?Math.min(V,a):V)/2:c==mxConstants.ALIGN_BOTTOM&&(Y-="fill"==m?a:(this.matchHtmlAlignment&&x&&a>0?Math.min(V,a):V)+1);for(var X=0;X<P.length;X++){if(P[X].length>0&&mxUtils.trim(P[X]).length>0){var Z=this.createElement("text");Z.setAttribute("x",this.format(e*S.scale)+this.textOffset),Z.setAttribute("y",this.format(Y*S.scale)+this.textOffset),mxUtils.write(Z,P[X]),T.appendChild(Z)}Y+=F}this.root.appendChild(T),this.addTextBackground(T,l,e,i,s,"fill"==m?a:V,d,c,m)},mxSvgCanvas2D.prototype.updateFont=function(e){var i=this.state;e.setAttribute("fill",i.fontColor),(!this.styleEnabled||i.fontFamily!=mxConstants.DEFAULT_FONTFAMILY)&&e.setAttribute("font-family",i.fontFamily),(i.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&e.setAttribute("font-weight","bold"),(i.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&e.setAttribute("font-style","italic");var s=[];(i.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&s.push("underline"),(i.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&s.push("line-through"),s.length>0&&e.setAttribute("text-decoration",s.join(" "))},mxSvgCanvas2D.prototype.addTextBackground=function(e,i,s,a,l,d,c,f,m){var x=this.state;if(null!=x.fontBackgroundColor||null!=x.fontBorderColor){var v=null;if("fill"==m||"width"==m)c==mxConstants.ALIGN_CENTER?s-=l/2:c==mxConstants.ALIGN_RIGHT&&(s-=l),f==mxConstants.ALIGN_MIDDLE?a-=d/2:f==mxConstants.ALIGN_BOTTOM&&(a-=d),v=new mxRectangle((s+1)*x.scale,a*x.scale,(l-2)*x.scale,(d+2)*x.scale);else if(null!=e.getBBox&&this.root.ownerDocument==document)try{v=e.getBBox();var E=mxClient.IS_IE&&mxClient.IS_SVG;v=new mxRectangle(v.x,v.y+(E?0:1),v.width,v.height+(E?1:0))}catch(D){}if(null==v||0==v.width||0==v.height){var S=document.createElement("div");S.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?x.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,S.style.fontSize=x.fontSize+"px",S.style.fontFamily=x.fontFamily,S.style.whiteSpace="nowrap",S.style.position="absolute",S.style.visibility="hidden",S.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",S.style.zoom="1",(x.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(S.style.fontWeight="bold"),(x.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(S.style.fontStyle="italic"),i=mxUtils.htmlEntities(i,!1),S.innerHTML=i.replace(/\n/g,"<br/>"),document.body.appendChild(S),l=S.offsetWidth,d=S.offsetHeight,S.parentNode.removeChild(S),c==mxConstants.ALIGN_CENTER?s-=l/2:c==mxConstants.ALIGN_RIGHT&&(s-=l),f==mxConstants.ALIGN_MIDDLE?a-=d/2:f==mxConstants.ALIGN_BOTTOM&&(a-=d),v=new mxRectangle((s+1)*x.scale,(a+2)*x.scale,l*x.scale,(d+1)*x.scale)}if(null!=v){var b=this.createElement("rect");b.setAttribute("fill",x.fontBackgroundColor||"none"),b.setAttribute("stroke",x.fontBorderColor||"none"),b.setAttribute("x",Math.floor(v.x-1)),b.setAttribute("y",Math.floor(v.y-1)),b.setAttribute("width",Math.ceil(v.width+2)),b.setAttribute("height",Math.ceil(v.height));var T=null!=x.fontBorderColor?Math.max(1,this.format(x.scale)):0;b.setAttribute("stroke-width",T),this.root.ownerDocument==document&&1==mxUtils.mod(T,2)&&b.setAttribute("transform","translate(0.5, 0.5)"),e.insertBefore(b,e.firstChild)}}},mxSvgCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxSvgCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},__mxOutput.mxSvgCanvas2D=void 0!==mxSvgCanvas2D?mxSvgCanvas2D:void 0;var mxVmlCanvas2D=function(e){mxAbstractCanvas2D.call(this),this.root=e};function mxGuide(e,i){this.graph=e,this.setStates(i)}function mxShape(e){this.stencil=e,this.initStyles()}function mxStencil(e){this.desc=e,this.parseDescription(),this.parseConstraints()}mxUtils.extend(mxVmlCanvas2D,mxAbstractCanvas2D),mxVmlCanvas2D.prototype.node=null,mxVmlCanvas2D.prototype.textEnabled=!0,mxVmlCanvas2D.prototype.moveOp="m",mxVmlCanvas2D.prototype.lineOp="l",mxVmlCanvas2D.prototype.curveOp="c",mxVmlCanvas2D.prototype.closeOp="x",mxVmlCanvas2D.prototype.rotatedHtmlBackground="",mxVmlCanvas2D.prototype.vmlScale=1,mxVmlCanvas2D.prototype.createElement=function(e){return document.createElement(e)},mxVmlCanvas2D.prototype.createVmlElement=function(e){return this.createElement(mxClient.VML_PREFIX+":"+e)},mxVmlCanvas2D.prototype.addNode=function(e,i){var s=this.node,a=this.state;if(null!=s){if("shape"==s.nodeName){if(!(null!=this.path&&this.path.length>0))return;s.path=this.path.join(" ")+" e",s.style.width=this.root.style.width,s.style.height=this.root.style.height,s.coordsize=parseInt(s.style.width)+" "+parseInt(s.style.height)}s.strokeweight=this.format(Math.max(1,a.strokeWidth*a.scale/this.vmlScale))+"px",a.shadow&&this.root.appendChild(this.createShadow(s,e&&null!=a.fillColor,i&&null!=a.strokeColor)),i&&null!=a.strokeColor?(s.stroked="true",s.strokecolor=a.strokeColor):s.stroked="false",s.appendChild(this.createStroke()),e&&null!=a.fillColor?s.appendChild(this.createFill()):!this.pointerEvents||"shape"==s.nodeName&&this.path[this.path.length-1]!=this.closeOp?s.filled="false":s.appendChild(this.createTransparentFill()),this.root.appendChild(s)}},mxVmlCanvas2D.prototype.createTransparentFill=function(){var e=this.createVmlElement("fill");return e.src=mxClient.imageBasePath+"/transparent.gif",e.type="tile",e},mxVmlCanvas2D.prototype.createFill=function(){var e=this.state,i=this.createVmlElement("fill");if(i.color=e.fillColor,null!=e.gradientColor){i.type="gradient",i.method="none",i.color2=e.gradientColor;var s=180-e.rotation;e.gradientDirection==mxConstants.DIRECTION_WEST?s-=90+("x"==this.root.style.flip?180:0):e.gradientDirection==mxConstants.DIRECTION_EAST?s+=90+("x"==this.root.style.flip?180:0):e.gradientDirection==mxConstants.DIRECTION_NORTH?s-=180+("y"==this.root.style.flip?-180:0):s+="y"==this.root.style.flip?-180:0,("x"==this.root.style.flip||"y"==this.root.style.flip)&&(s*=-1),i.angle=mxUtils.mod(s,360),i.opacity=e.alpha*e.gradientFillAlpha*100+"%",i.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",e.alpha*e.gradientAlpha*100+"%")}else(e.alpha<1||e.fillAlpha<1)&&(i.opacity=e.alpha*e.fillAlpha*100+"%");return i},mxVmlCanvas2D.prototype.createStroke=function(){var e=this.state,i=this.createVmlElement("stroke");return i.endcap=e.lineCap||"flat",i.joinstyle=e.lineJoin||"miter",i.miterlimit=e.miterLimit||"10",(e.alpha<1||e.strokeAlpha<1)&&(i.opacity=e.alpha*e.strokeAlpha*100+"%"),e.dashed&&(i.dashstyle=this.getVmlDashStyle()),i},mxVmlCanvas2D.prototype.getVmlDashStyle=function(){var e="dash";if("string"==typeof this.state.dashPattern){var i=this.state.dashPattern.split(" ");i.length>0&&1==i[0]&&(e="0 2")}return e},mxVmlCanvas2D.prototype.createShadow=function(e,i,s){var a=this.state,l=-a.rotation*(Math.PI/180),d=Math.cos(l),c=Math.sin(l),f=a.shadowDx*a.scale,m=a.shadowDy*a.scale;"x"==this.root.style.flip?f*=-1:"y"==this.root.style.flip&&(m*=-1);var x=e.cloneNode(!0);return x.style.marginLeft=Math.round(f*d-m*c)+"px",x.style.marginTop=Math.round(f*c+m*d)+"px",8==document.documentMode&&(x.strokeweight=e.strokeweight,"shape"==e.nodeName&&(x.path=this.path.join(" ")+" e",x.style.width=this.root.style.width,x.style.height=this.root.style.height,x.coordsize=parseInt(e.style.width)+" "+parseInt(e.style.height))),s?(x.strokecolor=a.shadowColor,x.appendChild(this.createShadowStroke())):x.stroked="false",i?x.appendChild(this.createShadowFill()):x.filled="false",x},mxVmlCanvas2D.prototype.createShadowFill=function(){var e=this.createVmlElement("fill");return e.color=this.state.shadowColor,e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e},mxVmlCanvas2D.prototype.createShadowStroke=function(){var e=this.createStroke();return e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e},mxVmlCanvas2D.prototype.rotate=function(e,i,s,a,l){i&&s?e+=180:i?this.root.style.flip="x":s&&(this.root.style.flip="y"),(i?!s:s)&&(e*=-1),this.root.style.rotation=e,this.state.rotation=this.state.rotation+e,this.state.rotationCx=a,this.state.rotationCy=l},mxVmlCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createVmlElement("shape"),this.node.style.position="absolute"},mxVmlCanvas2D.prototype.quadTo=function(e,i,s,a){var l=this.state,d=(this.lastX+l.dx)*l.scale,c=(this.lastY+l.dy)*l.scale,f=(e+l.dx)*l.scale,m=(i+l.dy)*l.scale,x=(s+l.dx)*l.scale,v=(a+l.dy)*l.scale,S=c+2/3*(m-c),b=x+2/3*(f-x),T=v+2/3*(m-v);this.path.push("c "+this.format(d+2/3*(f-d))+" "+this.format(S)+" "+this.format(b)+" "+this.format(T)+" "+this.format(x)+" "+this.format(v)),this.lastX=x/l.scale-l.dx,this.lastY=v/l.scale-l.dy},mxVmlCanvas2D.prototype.createRect=function(e,i,s,a,l){var d=this.state,c=this.createVmlElement(e);return c.style.position="absolute",c.style.left=this.format((i+d.dx)*d.scale)+"px",c.style.top=this.format((s+d.dy)*d.scale)+"px",c.style.width=this.format(a*d.scale)+"px",c.style.height=this.format(l*d.scale)+"px",c},mxVmlCanvas2D.prototype.rect=function(e,i,s,a){this.node=this.createRect("rect",e,i,s,a)},mxVmlCanvas2D.prototype.roundrect=function(e,i,s,a,l,d){this.node=this.createRect("roundrect",e,i,s,a),this.node.setAttribute("arcsize",Math.max(100*l/s,100*d/a)+"%")},mxVmlCanvas2D.prototype.ellipse=function(e,i,s,a){this.node=this.createRect("oval",e,i,s,a)},mxVmlCanvas2D.prototype.image=function(e,i,s,a,l,d,c,f){var m=null;if(d){(m=this.createRect("rect",e,i,s,a)).stroked="false";var x=this.createVmlElement("fill");x.aspect=d?"atmost":"ignore",x.rotate="true",x.type="frame",x.src=l,m.appendChild(x)}else(m=this.createRect("image",e,i,s,a)).src=l;c&&f?m.style.rotation="180":c?m.style.flip="x":f&&(m.style.flip="y"),(this.state.alpha<1||this.state.fillAlpha<1)&&(m.style.filter+="alpha(opacity="+this.state.alpha*this.state.fillAlpha*100+")"),this.root.appendChild(m)},mxVmlCanvas2D.prototype.createDiv=function(e,i,s,a){var l=this.createElement("div"),d=this.state,c="";if(null!=d.fontBackgroundColor&&(c+="background-color:"+mxUtils.htmlEntities(d.fontBackgroundColor)+";"),null!=d.fontBorderColor&&(c+="border:1px solid "+mxUtils.htmlEntities(d.fontBorderColor)+";"),mxUtils.isNode(e))l.appendChild(e);else if("fill"!=a&&"width"!=a){var f=this.createElement("div");f.style.cssText=c,f.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",f.style.zoom="1",f.style.textDecoration="inherit",f.innerHTML=e,l.appendChild(f)}else l.style.cssText=c,l.innerHTML=e;var m=l.style;return m.fontSize=d.fontSize/this.vmlScale+"px",m.fontFamily=d.fontFamily,m.color=d.fontColor,m.verticalAlign="top",m.textAlign=i||"left",m.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?d.fontSize*mxConstants.LINE_HEIGHT/this.vmlScale+"px":mxConstants.LINE_HEIGHT,(d.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(m.fontWeight="bold"),(d.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(m.fontStyle="italic"),(d.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(m.textDecoration="underline"),l},mxVmlCanvas2D.prototype.text=function(e,i,s,a,l,d,c,f,m,x,v,E,S){if(this.textEnabled&&null!=l){var b=this.state;if("html"==m){if(null!=b.rotation){var T=this.rotatePoint(e,i,b.rotation,b.rotationCx,b.rotationCy);e=T.x,i=T.y}8!=document.documentMode||mxClient.IS_EM?(e*=b.scale,i*=b.scale):(e+=b.dx,i+=b.dy,"fill"!=x&&c==mxConstants.ALIGN_TOP&&(i-=1));var D=8!=document.documentMode||mxClient.IS_EM?this.createElement("div"):this.createVmlElement("group");D.style.position="absolute",D.style.display="inline",D.style.left=this.format(e)+"px",D.style.top=this.format(i)+"px",D.style.zoom=b.scale;var I=this.createElement("div");I.style.position="relative",I.style.display="inline";var O=mxUtils.getAlignmentAsPoint(d,c),N=O.x,k=O.y,P=this.createDiv(l,d,c,x),F=this.createElement("div");null!=S&&P.setAttribute("dir",S),f&&s>0?(v||(P.style.width=Math.round(s)+"px"),P.style.wordWrap=mxConstants.WORD_WRAP,P.style.whiteSpace="normal","break-word"==P.style.wordWrap&&null!=(V=P).firstChild&&"DIV"==V.firstChild.nodeName&&(V.firstChild.style.width="100%")):P.style.whiteSpace="nowrap";var Y=b.rotation+(E||0);if(this.rotateHtml&&0!=Y?(F.style.display="inline",F.style.zoom="1",F.appendChild(P),8!=document.documentMode||mxClient.IS_EM||"DIV"==this.root.nodeName?D.appendChild(F):(I.appendChild(F),D.appendChild(I))):8!=document.documentMode||mxClient.IS_EM?(P.style.display="inline",D.appendChild(P)):(I.appendChild(P),D.appendChild(I)),"DIV"!=this.root.nodeName){var j=this.createVmlElement("rect");j.stroked="false",j.filled="false",j.appendChild(D),this.root.appendChild(j)}else this.root.appendChild(D);if(v?(P.style.overflow="hidden",P.style.width=Math.round(s)+"px",mxClient.IS_QUIRKS||(P.style.maxHeight=Math.round(a)+"px")):"fill"==x?(P.style.overflow="hidden",P.style.width=Math.max(0,s)+1+"px",P.style.height=Math.max(0,a)+1+"px"):"width"==x&&(P.style.overflow="hidden",P.style.width=Math.max(0,s)+1+"px",P.style.maxHeight=Math.max(0,a)+1+"px"),this.rotateHtml&&0!=Y){var X=Y*(Math.PI/180),Z=parseFloat(parseFloat(Math.cos(X)).toFixed(8)),Q=parseFloat(parseFloat(Math.sin(-X)).toFixed(8));(X%=2*Math.PI)<0&&(X+=2*Math.PI),(X%=Math.PI)>Math.PI/2&&(X=Math.PI-X);var ee=Math.cos(X),K=Math.sin(X);8==document.documentMode&&!mxClient.IS_EM&&(P.style.display="inline-block",F.style.display="inline-block",I.style.display="inline-block"),P.style.visibility="hidden",P.style.position="absolute",document.body.appendChild(P);var oe=P;null!=oe.firstChild&&"DIV"==oe.firstChild.nodeName&&(oe=oe.firstChild);var V=oe.offsetWidth+3,B=oe.offsetHeight;v?(s=Math.min(s,V),B=Math.min(B,a)):s=V,f&&(P.style.width=s+"px"),mxClient.IS_QUIRKS&&(v||"width"==x)&&B>a&&(P.style.height=(B=a)+"px");var he=((a=B)-a*ee+s*-K)/2-Q*s*(N+.5)+Z*a*(k+.5),Oe=(s-s*ee+a*-K)/2+Z*s*(N+.5)+Q*a*(k+.5);if("group"==D.nodeName&&"DIV"==this.root.nodeName){var Ve=this.createElement("div");Ve.style.display="inline-block",Ve.style.position="absolute",Ve.style.left=this.format(e+(Oe-s/2)*b.scale)+"px",Ve.style.top=this.format(i+(he-a/2)*b.scale)+"px",D.parentNode.appendChild(Ve),Ve.appendChild(D)}else{var Re=8!=document.documentMode||mxClient.IS_EM?b.scale:1;D.style.left=this.format(e+(Oe-s/2)*Re)+"px",D.style.top=this.format(i+(he-a/2)*Re)+"px"}F.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+Z+", M12="+Q+", M21="+-Q+", M22="+Z+", sizingMethod='auto expand')",F.style.backgroundColor=this.rotatedHtmlBackground,this.state.alpha<1&&(F.style.filter+="alpha(opacity="+100*this.state.alpha+")"),F.appendChild(P),P.style.position="",P.style.visibility=""}else if(8!=document.documentMode||mxClient.IS_EM){P.style.verticalAlign="top",this.state.alpha<1&&(D.style.filter="alpha(opacity="+100*this.state.alpha+")");var _e=P.parentNode;P.style.visibility="hidden",document.body.appendChild(P),s=P.offsetWidth,B=P.offsetHeight,mxClient.IS_QUIRKS&&v&&B>a&&(P.style.height=(B=a)+"px"),a=B,P.style.visibility="",_e.appendChild(P),D.style.left=this.format(e+s*N*this.state.scale)+"px",D.style.top=this.format(i+a*k*this.state.scale)+"px"}else this.state.alpha<1&&(P.style.filter="alpha(opacity="+100*this.state.alpha+")"),I.style.left=100*N+"%",I.style.top=100*k+"%"}else this.plainText(e,i,s,a,mxUtils.htmlEntities(l,!1),d,c,f,m,x,v,E,S)}},mxVmlCanvas2D.prototype.plainText=function(e,i,s,a,l,d,c,f,m,x,v,E,S){var b=this.state;e=(e+b.dx)*b.scale,i=(i+b.dy)*b.scale;var T=this.createVmlElement("shape");T.style.width="1px",T.style.height="1px",T.stroked="false";var D=this.createVmlElement("fill");D.color=b.fontColor,D.opacity=100*b.alpha+"%",T.appendChild(D);var I=this.createVmlElement("path");I.textpathok="true",I.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0),T.appendChild(I);var O=this.createVmlElement("textpath");O.style.cssText="v-text-align:"+d,O.style.align=d,O.style.fontFamily=b.fontFamily,O.string=l,O.on="true";var N=b.fontSize*b.scale/this.vmlScale;O.style.fontSize=N+"px",(b.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(O.style.fontWeight="bold"),(b.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(O.style.fontStyle="italic"),(b.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(O.style.textDecoration="underline");var P=N+(l.split("\n").length-1)*N*mxConstants.LINE_HEIGHT,F=0,V=0;if(c==mxConstants.ALIGN_BOTTOM?V=-P/2:c!=mxConstants.ALIGN_MIDDLE&&(V=P/2),null!=E){T.style.rotation=E;var Y=E*(Math.PI/180);F=Math.sin(Y)*V,V=Math.cos(Y)*V}T.appendChild(O),T.style.left=this.format(e-F)+"px",T.style.top=this.format(i+V)+"px",this.root.appendChild(T)},mxVmlCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxVmlCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxVmlCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},__mxOutput.mxVmlCanvas2D=void 0!==mxVmlCanvas2D?mxVmlCanvas2D:void 0,mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.rounded=!1,mxGuide.prototype.tolerance=2,mxGuide.prototype.setStates=function(e){this.states=e},mxGuide.prototype.isEnabledForEvent=function(e){return!0},mxGuide.prototype.getGuideTolerance=function(e){return e&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance},mxGuide.prototype.createGuideShape=function(e){var i=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return i.isDashed=!0,i},mxGuide.prototype.isStateIgnored=function(e){return!1},mxGuide.prototype.move=function(e,i,s,a){if(null!=this.states&&(this.horizontal||this.vertical)&&null!=e&&null!=i){let oe=function(he,Oe,Ve){var Re=!1;Ve&&Math.abs(he-O)<b?(i.x=he-e.getCenterX(),b=Math.abs(he-O),Re=!0):Ve||(Math.abs(he-D)<b?(i.x=he-e.x,b=Math.abs(he-D),Re=!0):Math.abs(he-I)<b&&(i.x=he-e.x-e.width,b=Math.abs(he-I),Re=!0)),Re&&(m=Oe,x=he,null==this.guideX&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),f=f||Re},B=function(he,Oe,Ve){var Re=!1;Ve&&Math.abs(he-P)<T?(i.y=he-e.getCenterY(),T=Math.abs(he-P),Re=!0):Ve||(Math.abs(he-N)<T?(i.y=he-e.y,T=Math.abs(he-N),Re=!0):Math.abs(he-k)<T&&(i.y=he-e.y-e.height,T=Math.abs(he-k),Re=!0)),Re&&(E=Oe,S=he,null==this.guideY&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),v=v||Re};var l=this.graph.getView().scale,d=this.getGuideTolerance(s)*l,c=e.clone();c.x+=i.x,c.y+=i.y;for(var f=!1,m=null,x=null,v=!1,E=null,S=null,b=d,T=d,D=c.x,I=c.x+c.width,O=c.getCenterX(),N=c.y,k=c.y+c.height,P=c.getCenterY(),F=0;F<this.states.length;F++){var V=this.states[F];null!=V&&!this.isStateIgnored(V)&&(this.horizontal&&(oe.call(this,V.getCenterX(),V,!0),oe.call(this,V.x,V,!1),oe.call(this,V.x+V.width,V,!1),null==V.cell&&oe.call(this,V.getCenterX(),V,!1)),this.vertical&&(B.call(this,V.getCenterY(),V,!0),B.call(this,V.y,V,!1),B.call(this,V.y+V.height,V,!1),null==V.cell&&B.call(this,V.getCenterY(),V,!1)))}this.graph.snapDelta(i,e,!s,f,v),i=this.getDelta(e,m,i.x,E,i.y);var Y=this.graph.container;if(f||null==this.guideX){if(null!=this.guideX){var j=null,X=null;null!=m&&null!=e&&(j=Math.min(e.y+i.y-this.graph.panDy,m.y),X=Math.max(e.y+e.height+i.y-this.graph.panDy,m.y+m.height)),this.guideX.points=null!=j&&null!=X?[new mxPoint(x,j),new mxPoint(x,X)]:[new mxPoint(x,-this.graph.panDy),new mxPoint(x,Y.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(m,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()}}else this.guideX.node.style.visibility="hidden";if(v||null==this.guideY){if(null!=this.guideY){var Z=null,Q=null;null!=E&&null!=e&&(Z=Math.min(e.x+i.x-this.graph.panDx,E.x),Q=Math.max(e.x+e.width+i.x-this.graph.panDx,E.x+E.width)),this.guideY.points=null!=Z&&null!=Q?[new mxPoint(Z,S),new mxPoint(Q,S)]:[new mxPoint(-this.graph.panDx,S),new mxPoint(Y.scrollWidth-3-this.graph.panDx,S)],this.guideY.stroke=this.getGuideColor(E,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()}}else this.guideY.node.style.visibility="hidden"}return i},mxGuide.prototype.getDelta=function(e,i,s,a,l){var d=this.graph.view.scale;return(this.rounded||null!=i&&null==i.cell)&&(s=Math.round((e.x+s)/d)*d-e.x),(this.rounded||null!=a&&null==a.cell)&&(l=Math.round((e.y+l)/d)*d-e.y),new mxPoint(s,l)},mxGuide.prototype.getGuideColor=function(e,i){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(e){null!=this.guideX&&(this.guideX.node.style.visibility=e?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=e?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)},__mxOutput.mxGuide=void 0!==mxGuide?mxGuide:void 0,mxShape.prototype.dialect=null,mxShape.prototype.scale=1,mxShape.prototype.antiAlias=!0,mxShape.prototype.minSvgStrokeWidth=1,mxShape.prototype.bounds=null,mxShape.prototype.points=null,mxShape.prototype.node=null,mxShape.prototype.state=null,mxShape.prototype.style=null,mxShape.prototype.boundingBox=null,mxShape.prototype.stencil=null,mxShape.prototype.svgStrokeTolerance=8,mxShape.prototype.pointerEvents=!0,mxShape.prototype.svgPointerEvents="all",mxShape.prototype.shapePointerEvents=!1,mxShape.prototype.stencilPointerEvents=!1,mxShape.prototype.vmlScale=1,mxShape.prototype.outline=!1,mxShape.prototype.visible=!0,mxShape.prototype.useSvgBoundingBox=!1,mxShape.prototype.init=function(e){null==this.node&&(this.node=this.create(e),null!=e&&e.appendChild(this.node))},mxShape.prototype.initStyles=function(e){this.strokewidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1},mxShape.prototype.isParseVml=function(){return!0},mxShape.prototype.isHtmlAllowed=function(){return!1},mxShape.prototype.getSvgScreenOffset=function(){var e=this.stencil&&"inherit"!=this.stencil.strokewidth?Number(this.stencil.strokewidth):this.strokewidth;return 1==mxUtils.mod(Math.max(1,Math.round(e*this.scale)),2)?.5:0},mxShape.prototype.create=function(e){return null!=e&&null!=e.ownerSVGElement?this.createSvg(e):8==document.documentMode||!mxClient.IS_VML||this.dialect!=mxConstants.DIALECT_VML&&this.isHtmlAllowed()?this.createHtml(e):this.createVml(e)},mxShape.prototype.createSvg=function(){return document.createElementNS(mxConstants.NS_SVG,"g")},mxShape.prototype.createVml=function(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e},mxShape.prototype.createHtml=function(){var e=document.createElement("div");return e.style.position="absolute",e},mxShape.prototype.reconfigure=function(){this.redraw()},mxShape.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),"DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML?this.redrawShape():this.redrawHtmlShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)},mxShape.prototype.clear=function(){if(null!=this.node.ownerSVGElement)for(;null!=this.node.lastChild;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(null!=this.cursor?"cursor:"+this.cursor+";":""),this.node.innerHTML=""},mxShape.prototype.updateBoundsFromPoints=function(){var e=this.points;if(null!=e&&e.length>0&&null!=e[0]){this.bounds=new mxRectangle(Number(e[0].x),Number(e[0].y),1,1);for(var i=1;i<this.points.length;i++)null!=e[i]&&this.bounds.add(new mxRectangle(Number(e[i].x),Number(e[i].y),1,1))}},mxShape.prototype.getLabelBounds=function(e){var i=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),s=e;if(i!=mxConstants.DIRECTION_SOUTH&&i!=mxConstants.DIRECTION_NORTH&&null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()){var a=(s=s.clone()).width;s.width=s.height,s.height=a}var l=this.getLabelMargins(s);if(null!=l){var d="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,!1),c="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,!1);return null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(a=l.x,l.x=l.height,l.height=l.width,l.width=l.y,l.y=a,a=d,d=c,c=a),mxUtils.getDirectedBounds(e,l,this.style,d,c)}return e},mxShape.prototype.getLabelMargins=function(e){return null},mxShape.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&this.bounds.width>0&&this.bounds.height>0},mxShape.prototype.createVmlGroup=function(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e.style.width=this.node.style.width,e.style.height=this.node.style.height,e},mxShape.prototype.redrawShape=function(){var e=this.createCanvas();null!=e&&(e.pointerEvents=this.pointerEvents,this.beforePaint(e),this.paint(e),this.afterPaint(e),this.node!=e.root&&this.node.insertAdjacentHTML("beforeend",e.root.outerHTML),"DIV"==this.node.nodeName&&8==document.documentMode&&(this.node.style.filter="",mxUtils.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(e))},mxShape.prototype.createCanvas=function(){var e=null;return null!=this.node.ownerSVGElement?e=this.createSvgCanvas():mxClient.IS_VML&&(this.updateVmlContainer(),e=this.createVmlCanvas()),null!=e&&this.outline&&(e.setStrokeWidth(this.strokewidth),e.setStrokeColor(this.stroke),null!=this.isDashed&&e.setDashed(this.isDashed),e.setStrokeWidth=function(){},e.setStrokeColor=function(){},e.setFillColor=function(){},e.setGradient=function(){},e.setDashed=function(){},e.text=function(){}),e},mxShape.prototype.createSvgCanvas=function(){var e=new mxSvgCanvas2D(this.node,!1);e.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,e.pointerEventsValue=this.svgPointerEvents;var i=this.getSvgScreenOffset();return 0!=i?this.node.setAttribute("transform","translate("+i+","+i+")"):this.node.removeAttribute("transform"),e.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(e.format=function(s){return Math.round(parseFloat(s))}),e},mxShape.prototype.createVmlCanvas=function(){var e=8==document.documentMode&&this.isParseVml()?this.createVmlGroup():this.node,i=new mxVmlCanvas2D(e,!1);if(""!=e.tagUrn){var s=Math.max(1,Math.round(this.bounds.width)),a=Math.max(1,Math.round(this.bounds.height));e.coordsize=s*this.vmlScale+","+a*this.vmlScale,i.scale(this.vmlScale),i.vmlScale=this.vmlScale}var l=this.scale;return i.translate(-Math.round(this.bounds.x/l),-Math.round(this.bounds.y/l)),i},mxShape.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px";var e=Math.max(1,Math.round(this.bounds.width)),i=Math.max(1,Math.round(this.bounds.height));this.node.style.width=e+"px",this.node.style.height=i+"px",this.node.style.overflow="visible"},mxShape.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)},mxShape.prototype.updateHtmlFilters=function(e){var i="";if(this.opacity<100&&(i+="alpha(opacity="+this.opacity+")"),this.isShadow&&(i+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants.VML_SHADOWCOLOR+"')"),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var s=this.fill,a=this.gradient,l="0",d={east:0,south:1,west:2,north:3},c=null!=this.direction?d[this.direction]:0;if(null!=this.gradientDirection&&(c=mxUtils.mod(c+d[this.gradientDirection]-1,4)),1==c){l="1";var f=s;s=a,a=f}else 2==c?(f=s,s=a,a=f):3==c&&(l="1");i+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+s+"', endColorStr='"+a+"', gradientType='"+l+"')"}e.style.filter=i},mxShape.prototype.updateHtmlColors=function(e){var i=this.stroke;null!=i&&i!=mxConstants.NONE?(e.style.borderColor=i,this.isDashed?e.style.borderStyle="dashed":this.strokewidth>0&&(e.style.borderStyle="solid"),e.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):e.style.borderWidth="0px",null!=(i=this.outline?null:this.fill)&&i!=mxConstants.NONE?(e.style.backgroundColor=i,e.style.backgroundImage="none"):this.pointerEvents?e.style.backgroundColor="transparent":8==document.documentMode?mxUtils.addTransparentBackgroundFilter(e):this.setTransparentBackgroundImage(e)},mxShape.prototype.updateHtmlBounds=function(e){var i=document.documentMode>=9?0:Math.ceil(this.strokewidth*this.scale);e.style.borderWidth=Math.max(1,i)+"px",e.style.overflow="hidden",e.style.left=Math.round(this.bounds.x-i/2)+"px",e.style.top=Math.round(this.bounds.y-i/2)+"px","CSS1Compat"==document.compatMode&&(i=-i),e.style.width=Math.round(Math.max(0,this.bounds.width+i))+"px",e.style.height=Math.round(Math.max(0,this.bounds.height+i))+"px"},mxShape.prototype.destroyCanvas=function(e){if(e instanceof mxSvgCanvas2D){for(var i in e.gradients){var s=e.gradients[i];null!=s&&(s.mxRefCount=(s.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=e.gradients}},mxShape.prototype.beforePaint=function(e){},mxShape.prototype.afterPaint=function(e){},mxShape.prototype.paint=function(e){var i=!1;if(null!=e&&this.outline){var s=e.stroke;e.stroke=function(){i=!0,s.apply(this,arguments)};var a=e.fillAndStroke;e.fillAndStroke=function(){i=!0,a.apply(this,arguments)}}var l=this.scale,d=this.bounds.x/l,c=this.bounds.y/l,f=this.bounds.width/l,m=this.bounds.height/l;if(this.isPaintBoundsInverted()){var x=(f-m)/2;d+=x,c-=x;var v=f;f=m,m=v}this.updateTransform(e,d,c,f,m),this.configureCanvas(e,d,c,f,m);var E=null;if(null==this.stencil&&null==this.points&&this.shapePointerEvents||null!=this.stencil&&this.stencilPointerEvents){var S=this.createBoundingBox();if(this.dialect==mxConstants.DIALECT_SVG)E=this.createTransparentSvgRectangle(S.x,S.y,S.width,S.height),this.node.appendChild(E);else{var b=e.createRect("rect",S.x/l,S.y/l,S.width/l,S.height/l);b.appendChild(e.createTransparentFill()),b.stroked="false",e.root.appendChild(b)}}if(null!=this.stencil)this.stencil.drawShape(e,this,d,c,f,m);else if(e.setStrokeWidth(this.strokewidth),null!=this.points){for(var T=[],D=0;D<this.points.length;D++)null!=this.points[D]&&T.push(new mxPoint(this.points[D].x/l,this.points[D].y/l));this.paintEdgeShape(e,T)}else this.paintVertexShape(e,d,c,f,m);null!=E&&null!=e.state&&null!=e.state.transform&&E.setAttribute("transform",e.state.transform),null!=e&&this.outline&&!i&&(e.rect(d,c,f,m),e.stroke())},mxShape.prototype.configureCanvas=function(e,i,s,a,l){var d=null;if(null!=this.style&&(d=this.style.dashPattern),e.setAlpha(this.opacity/100),e.setFillAlpha(this.fillOpacity/100),e.setStrokeAlpha(this.strokeOpacity/100),null!=this.isShadow&&e.setShadow(this.isShadow),null!=this.isDashed&&e.setDashed(this.isDashed,null!=this.style&&1==mxUtils.getValue(this.style,mxConstants.STYLE_FIX_DASH,!1)),null!=d&&e.setDashPattern(d),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var c=this.getGradientBounds(e,i,s,a,l);e.setGradient(this.fill,this.gradient,c.x,c.y,c.width,c.height,this.gradientDirection)}else e.setFillColor(this.fill);e.setStrokeColor(this.stroke)},mxShape.prototype.getGradientBounds=function(e,i,s,a,l){return new mxRectangle(i,s,a,l)},mxShape.prototype.updateTransform=function(e,i,s,a,l){e.scale(this.scale),e.rotate(this.getShapeRotation(),this.flipH,this.flipV,i+a/2,s+l/2)},mxShape.prototype.paintVertexShape=function(e,i,s,a,l){this.paintBackground(e,i,s,a,l),(!this.outline||null==this.style||0==mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0))&&(e.setShadow(!1),this.paintForeground(e,i,s,a,l))},mxShape.prototype.paintBackground=function(e,i,s,a,l){},mxShape.prototype.paintForeground=function(e,i,s,a,l){},mxShape.prototype.paintEdgeShape=function(e,i){},mxShape.prototype.getArcSize=function(e,i){var s=0;if("1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0))s=Math.min(e/2,Math.min(i/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2));else{var a=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100;s=Math.min(e*a,i*a)}return s},mxShape.prototype.paintGlassEffect=function(e,i,s,a,l,d){var c=Math.ceil(this.strokewidth/2),f=.4;e.setGradient("#ffffff","#ffffff",i,s,a,.6*l,"south",.9,.1),e.begin(),d+=2*c,this.isRounded?(e.moveTo(i-c+d,s-c),e.quadTo(i-c,s-c,i-c,s-c+d),e.lineTo(i-c,s+l*f),e.quadTo(i+.5*a,s+.7*l,i+a+c,s+l*f),e.lineTo(i+a+c,s-c+d),e.quadTo(i+a+c,s-c,i+a+c-d,s-c)):(e.moveTo(i-c,s-c),e.lineTo(i-c,s+l*f),e.quadTo(i+.5*a,s+.7*l,i+a+c,s+l*f),e.lineTo(i+a+c,s-c)),e.close(),e.fill()},mxShape.prototype.addPoints=function(e,i,s,a,l,d,c){if(null!=i&&i.length>0){c=null==c||c;var f=i[i.length-1];if(l&&s){var m=(i=i.slice())[0],x=new mxPoint(f.x+(m.x-f.x)/2,f.y+(m.y-f.y)/2);i.splice(0,0,x)}var v=i[0],E=1;for(c?e.moveTo(v.x,v.y):e.lineTo(v.x,v.y);E<(l?i.length:i.length-1);){var S=i[mxUtils.mod(E,i.length)],b=v.x-S.x,T=v.y-S.y;if(s&&(0!=b||0!=T)&&(null==d||mxUtils.indexOf(d,E-1)<0)){var D=Math.sqrt(b*b+T*T),I=b*Math.min(a,D/2)/D,O=T*Math.min(a,D/2)/D;e.lineTo(S.x+I,S.y+O);for(var P=i[mxUtils.mod(E+1,i.length)];E<i.length-2&&0==Math.round(P.x-S.x)&&0==Math.round(P.y-S.y);)P=i[mxUtils.mod(E+2,i.length)],E++;b=P.x-S.x,T=P.y-S.y,D=Math.max(1,Math.sqrt(b*b+T*T));var F=b*Math.min(a,D/2)/D,V=T*Math.min(a,D/2)/D,Y=S.x+F,j=S.y+V;e.quadTo(S.x,S.y,Y,j),S=new mxPoint(Y,j)}else e.lineTo(S.x,S.y);v=S,E++}l?e.close():e.lineTo(f.x,f.y)}},mxShape.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass},mxShape.prototype.apply=function(e){if(this.state=e,this.style=e.style,null!=this.style){if(this.fill=mxUtils.getValue(this.style,mxConstants.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils.getValue(this.style,mxConstants.STYLE_ROTATION,this.rotation),this.direction=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,this.direction),this.flipH=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),this.flipV=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),null!=this.stencil&&(this.flipH=1==mxUtils.getValue(this.style,"stencilFlipH",0)||this.flipH,this.flipV=1==mxUtils.getValue(this.style,"stencilFlipV",0)||this.flipV),this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH){var i=this.flipH;this.flipH=this.flipV,this.flipV=i}this.isShadow=1==mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW,this.isShadow),this.isDashed=1==mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,this.isDashed),this.isRounded=1==mxUtils.getValue(this.style,mxConstants.STYLE_ROUNDED,this.isRounded),this.glass=1==mxUtils.getValue(this.style,mxConstants.STYLE_GLASS,this.glass),this.fill==mxConstants.NONE&&(this.fill=null),this.gradient==mxConstants.NONE&&(this.gradient=null),this.stroke==mxConstants.NONE&&(this.stroke=null)}},mxShape.prototype.setCursor=function(e){null==e&&(e=""),this.cursor=e,null!=this.node&&(this.node.style.cursor=e)},mxShape.prototype.getCursor=function(){return this.cursor},mxShape.prototype.isRoundable=function(){return!1},mxShape.prototype.updateBoundingBox=function(){if(this.useSvgBoundingBox&&null!=this.node&&null!=this.node.ownerSVGElement)try{var e=this.node.getBBox();if(e.width>0&&e.height>0)return this.boundingBox=new mxRectangle(e.x,e.y,e.width,e.height),void this.boundingBox.grow(this.strokewidth*this.scale/2)}catch(a){}if(null!=this.bounds){var i=this.createBoundingBox();if(null!=i){this.augmentBoundingBox(i);var s=this.getShapeRotation();0!=s&&(i=mxUtils.getBoundingBox(i,s))}this.boundingBox=i}},mxShape.prototype.createBoundingBox=function(){var e=this.bounds.clone();return(null!=this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)||this.isPaintBoundsInverted())&&e.rotate90(),e},mxShape.prototype.augmentBoundingBox=function(e){this.isShadow&&(e.width+=Math.ceil(mxConstants.SHADOW_OFFSET_X*this.scale),e.height+=Math.ceil(mxConstants.SHADOW_OFFSET_Y*this.scale)),e.grow(this.strokewidth*this.scale/2)},mxShape.prototype.isPaintBoundsInverted=function(){return null==this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)},mxShape.prototype.getRotation=function(){return null!=this.rotation?this.rotation:0},mxShape.prototype.getTextRotation=function(){var e=this.getRotation();return 1!=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)&&(e+=mxText.prototype.verticalTextRotation),e},mxShape.prototype.getShapeRotation=function(){var e=this.getRotation();return null!=this.direction&&(this.direction==mxConstants.DIRECTION_NORTH?e+=270:this.direction==mxConstants.DIRECTION_WEST?e+=180:this.direction==mxConstants.DIRECTION_SOUTH&&(e+=90)),e},mxShape.prototype.createTransparentSvgRectangle=function(e,i,s,a){var l=document.createElementNS(mxConstants.NS_SVG,"rect");return l.setAttribute("x",e),l.setAttribute("y",i),l.setAttribute("width",s),l.setAttribute("height",a),l.setAttribute("fill","none"),l.setAttribute("stroke","none"),l.setAttribute("pointer-events","all"),l},mxShape.prototype.setTransparentBackgroundImage=function(e){e.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"},mxShape.prototype.releaseSvgGradients=function(e){if(null!=e)for(var i in e){var s=e[i];null!=s&&(s.mxRefCount=(s.mxRefCount||0)-1,0==s.mxRefCount&&null!=s.parentNode&&s.parentNode.removeChild(s))}},mxShape.prototype.destroy=function(){null!=this.node&&(mxEvent.release(this.node),null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null},__mxOutput.mxShape=void 0!==mxShape?mxShape:void 0,mxUtils.extend(mxStencil,mxShape),mxStencil.defaultLocalized=!1,mxStencil.allowEval=!1,mxStencil.prototype.desc=null,mxStencil.prototype.constraints=null,mxStencil.prototype.aspect=null,mxStencil.prototype.w0=null,mxStencil.prototype.h0=null,mxStencil.prototype.bgNode=null,mxStencil.prototype.fgNode=null,mxStencil.prototype.strokewidth=null,mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var e=this.desc.getAttribute("aspect");this.aspect=null!=e?e:"variable";var i=this.desc.getAttribute("strokewidth");this.strokewidth=null!=i?i:"1"},mxStencil.prototype.parseConstraints=function(){var e=this.desc.getElementsByTagName("connections")[0];if(null!=e){var i=mxUtils.getChildNodes(e);if(null!=i&&i.length>0){this.constraints=[];for(var s=0;s<i.length;s++)this.constraints.push(this.parseConstraint(i[s]))}}},mxStencil.prototype.parseConstraint=function(e){var i=Number(e.getAttribute("x")),s=Number(e.getAttribute("y")),a="1"==e.getAttribute("perimeter"),l=e.getAttribute("name");return new mxConnectionConstraint(new mxPoint(i,s),a,l)},mxStencil.prototype.evaluateTextAttribute=function(e,i,s){var a=this.evaluateAttribute(e,i,s),l=e.getAttribute("localized");return(mxStencil.defaultLocalized&&null==l||"1"==l)&&(a=mxResources.get(a)),a},mxStencil.prototype.evaluateAttribute=function(e,i,s){var a=e.getAttribute(i);if(null==a){var l=mxUtils.getTextContent(e);if(null!=l&&mxStencil.allowEval){var d=mxUtils.eval(l);"function"==typeof d&&(a=d(s))}}return a},mxStencil.prototype.drawShape=function(e,i,s,a,l,d){var c=e.states.slice(),f=mxUtils.getValue(i.style,mxConstants.STYLE_DIRECTION,null),m=this.computeAspect(i.style,s,a,l,d,f),x=Math.min(m.width,m.height),v="inherit"==this.strokewidth?Number(mxUtils.getNumber(i.style,mxConstants.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*x;e.setStrokeWidth(v),null!=i.style&&"1"==mxUtils.getValue(i.style,mxConstants.STYLE_POINTER_EVENTS,"0")&&(e.setStrokeColor(mxConstants.NONE),e.rect(s,a,l,d),e.stroke(),e.setStrokeColor(i.stroke)),this.drawChildren(e,i,s,a,l,d,this.bgNode,m,!1,!0),this.drawChildren(e,i,s,a,l,d,this.fgNode,m,!0,!i.outline||null==i.style||0==mxUtils.getValue(i.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)),e.states.length!=c.length&&(e.states=c)},mxStencil.prototype.drawChildren=function(e,i,s,a,l,d,c,f,m,x){if(null!=c&&l>0&&d>0)for(var v=c.firstChild;null!=v;)v.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(e,i,v,f,m,x),v=v.nextSibling},mxStencil.prototype.computeAspect=function(e,i,s,a,l,d){var c=i,f=s,m=a/this.w0,x=l/this.h0,v=d==mxConstants.DIRECTION_NORTH||d==mxConstants.DIRECTION_SOUTH;if(v){x=a/this.h0,m=l/this.w0;var E=(a-l)/2;c+=E,f-=E}return"fixed"==this.aspect&&(m=x=Math.min(m,x),v?(c+=(l-this.w0*m)/2,f+=(a-this.h0*x)/2):(c+=(a-this.w0*m)/2,f+=(l-this.h0*x)/2)),new mxRectangle(c,f,m,x)},mxStencil.prototype.drawNode=function(e,i,s,a,l,d){var c=s.nodeName,f=a.x,m=a.y,x=a.width,v=a.height,E=Math.min(x,v);if("save"==c)e.save();else if("restore"==c)e.restore();else if(d){if("path"==c){e.begin();var S=!0;if("1"==s.getAttribute("rounded")){S=!1;for(var b=Number(s.getAttribute("arcSize")),T=0,D=[],I=s.firstChild;null!=I;){if(I.nodeType==mxConstants.NODETYPE_ELEMENT){var O=I.nodeName;if("move"!=O&&"line"!=O){S=!0;break}("move"==O||0==D.length)&&D.push([]),D[D.length-1].push(new mxPoint(f+Number(I.getAttribute("x"))*x,m+Number(I.getAttribute("y"))*v)),T++}I=I.nextSibling}if(!S&&T>0)for(var N=0;N<D.length;N++){var k=!1,P=D[N][0],F=D[N][D[N].length-1];P.x==F.x&&P.y==F.y&&(D[N].pop(),k=!0),this.addPoints(e,D[N],!0,b,k)}else S=!0}if(S)for(I=s.firstChild;null!=I;)I.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(e,i,I,a,l,d),I=I.nextSibling}else if("close"==c)e.close();else if("move"==c)e.moveTo(f+Number(s.getAttribute("x"))*x,m+Number(s.getAttribute("y"))*v);else if("line"==c)e.lineTo(f+Number(s.getAttribute("x"))*x,m+Number(s.getAttribute("y"))*v);else if("quad"==c)e.quadTo(f+Number(s.getAttribute("x1"))*x,m+Number(s.getAttribute("y1"))*v,f+Number(s.getAttribute("x2"))*x,m+Number(s.getAttribute("y2"))*v);else if("curve"==c)e.curveTo(f+Number(s.getAttribute("x1"))*x,m+Number(s.getAttribute("y1"))*v,f+Number(s.getAttribute("x2"))*x,m+Number(s.getAttribute("y2"))*v,f+Number(s.getAttribute("x3"))*x,m+Number(s.getAttribute("y3"))*v);else if("arc"==c)e.arcTo(Number(s.getAttribute("rx"))*x,Number(s.getAttribute("ry"))*v,Number(s.getAttribute("x-axis-rotation")),Number(s.getAttribute("large-arc-flag")),Number(s.getAttribute("sweep-flag")),f+Number(s.getAttribute("x"))*x,m+Number(s.getAttribute("y"))*v);else if("rect"==c)e.rect(f+Number(s.getAttribute("x"))*x,m+Number(s.getAttribute("y"))*v,Number(s.getAttribute("w"))*x,Number(s.getAttribute("h"))*v);else if("roundrect"==c){var V=Number(s.getAttribute("arcsize"));0==V&&(V=100*mxConstants.RECTANGLE_ROUNDING_FACTOR);var Y=Number(s.getAttribute("w"))*x,j=Number(s.getAttribute("h"))*v,X=Number(V)/100,Z=Math.min(Y*X,j*X);e.roundrect(f+Number(s.getAttribute("x"))*x,m+Number(s.getAttribute("y"))*v,Y,j,Z,Z)}else if("ellipse"==c)e.ellipse(f+Number(s.getAttribute("x"))*x,m+Number(s.getAttribute("y"))*v,Number(s.getAttribute("w"))*x,Number(s.getAttribute("h"))*v);else if("image"==c){if(!i.outline){var Q=this.evaluateAttribute(s,"src",i);e.image(f+Number(s.getAttribute("x"))*x,m+Number(s.getAttribute("y"))*v,Number(s.getAttribute("w"))*x,Number(s.getAttribute("h"))*v,Q,!1,"1"==s.getAttribute("flipH"),"1"==s.getAttribute("flipV"))}}else if("text"==c){if(!i.outline){var ee=this.evaluateTextAttribute(s,"str",i),K="1"==s.getAttribute("vertical")?-90:0;if("0"==s.getAttribute("align-shape")){var oe=i.rotation,B=1==mxUtils.getValue(i.style,mxConstants.STYLE_FLIPH,0),he=1==mxUtils.getValue(i.style,mxConstants.STYLE_FLIPV,0);B&&he?K-=oe:B||he?K+=oe:K-=oe}K-=s.getAttribute("rotation"),e.text(f+Number(s.getAttribute("x"))*x,m+Number(s.getAttribute("y"))*v,0,0,ee,s.getAttribute("align")||"left",s.getAttribute("valign")||"top",!1,"",null,!1,K)}}else if("include-shape"==c){var Oe=mxStencilRegistry.getStencil(s.getAttribute("name"));if(null!=Oe){var Ve=f+Number(s.getAttribute("x"))*x,Re=m+Number(s.getAttribute("y"))*v;Y=Number(s.getAttribute("w"))*x,j=Number(s.getAttribute("h"))*v,Oe.drawShape(e,i,Ve,Re,Y,j)}}else if("fillstroke"==c)e.fillAndStroke();else if("fill"==c)e.fill();else if("stroke"==c)e.stroke();else if("strokewidth"==c){var _e="1"==s.getAttribute("fixed")?1:E;e.setStrokeWidth(Number(s.getAttribute("width"))*_e)}else if("dashed"==c)e.setDashed("1"==s.getAttribute("dashed"));else if("dashpattern"==c){var rt=s.getAttribute("pattern");if(null!=rt){var st=rt.split(" "),Pe=[];for(N=0;N<st.length;N++)st[N].length>0&&Pe.push(Number(st[N])*E);rt=Pe.join(" "),e.setDashPattern(rt)}}else"strokecolor"==c?e.setStrokeColor(s.getAttribute("color")):"linecap"==c?e.setLineCap(s.getAttribute("cap")):"linejoin"==c?e.setLineJoin(s.getAttribute("join")):"miterlimit"==c?e.setMiterLimit(Number(s.getAttribute("limit"))):"fillcolor"==c?e.setFillColor(s.getAttribute("color")):"alpha"==c||"fillalpha"==c||"strokealpha"==c?e.setAlpha(s.getAttribute("alpha")):"fontcolor"==c?e.setFontColor(s.getAttribute("color")):"fontstyle"==c?e.setFontStyle(s.getAttribute("style")):"fontfamily"==c?e.setFontFamily(s.getAttribute("family")):"fontsize"==c&&e.setFontSize(Number(s.getAttribute("size"))*E);l&&("fillstroke"==c||"fill"==c||"stroke"==c)&&(l=!1,e.setShadow(!1))}},__mxOutput.mxStencil=void 0!==mxStencil?mxStencil:void 0;var mxStencilRegistry={stencils:{},addStencil:function(e,i){mxStencilRegistry.stencils[e]=i},getStencil:function(e){return mxStencilRegistry.stencils[e]}};__mxOutput.mxStencilRegistry=void 0!==mxStencilRegistry?mxStencilRegistry:void 0;var mxMarker={markers:[],addMarker:function(e,i){mxMarker.markers[e]=i},createMarker:function(e,i,s,a,l,d,c,f,m,x){var v=mxMarker.markers[s];return null!=v?v(e,i,s,a,l,d,c,f,m,x):null}};function mxActor(e,i,s,a){mxShape.call(this),this.bounds=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1}function mxCloud(e,i,s,a){mxActor.call(this),this.bounds=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1}function mxRectangleShape(e,i,s,a){mxShape.call(this),this.bounds=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1}function mxEllipse(e,i,s,a){mxShape.call(this),this.bounds=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1}function mxDoubleEllipse(e,i,s,a){mxShape.call(this),this.bounds=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1}function mxRhombus(e,i,s,a){mxShape.call(this),this.bounds=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1}function mxPolyline(e,i,s){mxShape.call(this),this.points=e,this.stroke=i,this.strokewidth=null!=s?s:1}function mxArrow(e,i,s,a,l,d,c){mxShape.call(this),this.points=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1,this.arrowWidth=null!=l?l:mxConstants.ARROW_WIDTH,this.spacing=null!=d?d:mxConstants.ARROW_SPACING,this.endSize=null!=c?c:mxConstants.ARROW_SIZE}function mxArrowConnector(e,i,s,a,l,d,c){mxShape.call(this),this.points=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1,this.arrowWidth=null!=l?l:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=d?d:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}function mxText(e,i,s,a,l,d,c,f,m,x,v,E,S,b,T,D,I,O,N,k,P){mxShape.call(this),this.value=e,this.bounds=i,this.color=null!=l?l:"black",this.align=null!=s?s:mxConstants.ALIGN_CENTER,this.valign=null!=a?a:mxConstants.ALIGN_MIDDLE,this.family=null!=d?d:mxConstants.DEFAULT_FONTFAMILY,this.size=null!=c?c:mxConstants.DEFAULT_FONTSIZE,this.fontStyle=null!=f?f:mxConstants.DEFAULT_FONTSTYLE,this.spacing=parseInt(m||2),this.spacingTop=this.spacing+parseInt(x||0),this.spacingRight=this.spacing+parseInt(v||0),this.spacingBottom=this.spacing+parseInt(E||0),this.spacingLeft=this.spacing+parseInt(S||0),this.horizontal=null==b||b,this.background=T,this.border=D,this.wrap=null!=I&&I,this.clipped=null!=O&&O,this.overflow=null!=N?N:"visible",this.labelPadding=null!=k?k:0,this.textDirection=P,this.rotation=0,this.updateMargin()}function mxTriangle(){mxActor.call(this)}function mxHexagon(){mxActor.call(this)}function mxLine(e,i,s,a){mxShape.call(this),this.bounds=e,this.stroke=i,this.strokewidth=null!=s?s:1,this.vertical=null!=a?a:this.vertical}function mxImageShape(e,i,s,a,l){mxShape.call(this),this.bounds=e,this.image=i,this.fill=s,this.stroke=a,this.strokewidth=null!=l?l:1,this.shadow=!1}function mxLabel(e,i,s,a){mxRectangleShape.call(this,e,i,s,a)}function mxCylinder(e,i,s,a){mxShape.call(this),this.bounds=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1}function mxConnector(e,i,s){mxPolyline.call(this,e,i,s)}function mxSwimlane(e,i,s,a){mxShape.call(this),this.bounds=e,this.fill=i,this.stroke=s,this.strokewidth=null!=a?a:1}function mxGraphLayout(e){this.graph=e}function WeightedCellSorter(e,i){this.cell=e,this.weightedValue=i}function mxStackLayout(e,i,s,a,l,d){mxGraphLayout.call(this,e),this.horizontal=null==i||i,this.spacing=null!=s?s:0,this.x0=null!=a?a:0,this.y0=null!=l?l:0,this.border=null!=d?d:0}function mxPartitionLayout(e,i,s,a){mxGraphLayout.call(this,e),this.horizontal=null==i||i,this.spacing=s||0,this.border=a||0}function mxCompactTreeLayout(e,i,s){mxGraphLayout.call(this,e),this.horizontal=null==i||i,this.invert=null!=s&&s}function mxRadialTreeLayout(e){mxCompactTreeLayout.call(this,e,!1)}function mxFastOrganicLayout(e){mxGraphLayout.call(this,e)}function mxCircleLayout(e,i){mxGraphLayout.call(this,e),this.radius=null!=i?i:100}function mxParallelEdgeLayout(e){mxGraphLayout.call(this,e)}function mxCompositeLayout(e,i,s){mxGraphLayout.call(this,e),this.layouts=i,this.master=s}function mxEdgeLabelLayout(e,i){mxGraphLayout.call(this,e)}function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}function mxGraphHierarchyNode(e){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=e,this.id=mxObjectIdentity.get(e),this.connectsAsTarget=[],this.connectsAsSource=[]}function mxGraphHierarchyEdge(e){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=e,this.ids=[];for(var i=0;i<e.length;i++)this.ids.push(mxObjectIdentity.get(e[i]))}function mxGraphHierarchyModel(e,i,s,a,l){e.getGraph(),this.tightenToSource=l,this.roots=s,this.parent=a,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var c=[];null==i&&(i=this.graph.getChildVertices(a)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,i,c);for(var f=0;f<i.length;f++){for(var m=c[f].connectsAsSource,x=0;x<m.length;x++){var v=m[x],E=v.edges;if(null!=E&&E.length>0){var S=E[0],b=e.getVisibleTerminal(S,!1),T=this.vertexMapper.get(b);c[f]==T&&(b=e.getVisibleTerminal(S,!0),T=this.vertexMapper.get(b)),null!=T&&c[f]!=T&&(v.target=T,0==T.connectsAsTarget.length&&(T.connectsAsTarget=[]),mxUtils.indexOf(T.connectsAsTarget,v)<0&&T.connectsAsTarget.push(v))}}c[f].temp[0]=1}}function mxSwimlaneModel(e,i,s,a,l){e.getGraph(),this.tightenToSource=l,this.roots=s,this.parent=a,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var c=[];null==i&&(i=this.graph.getChildVertices(a)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,i,c);for(var f=0;f<i.length;f++){for(var m=c[f].connectsAsSource,x=0;x<m.length;x++){var v=m[x],E=v.edges;if(null!=E&&E.length>0){var S=E[0],b=e.getVisibleTerminal(S,!1),T=this.vertexMapper.get(b);c[f]==T&&(b=e.getVisibleTerminal(S,!0),T=this.vertexMapper.get(b)),null!=T&&c[f]!=T&&(v.target=T,0==T.connectsAsTarget.length&&(T.connectsAsTarget=[]),mxUtils.indexOf(T.connectsAsTarget,v)<0&&T.connectsAsTarget.push(v))}}c[f].temp[0]=1}}function mxHierarchicalLayoutStage(){}function mxMedianHybridCrossingReduction(e){this.layout=e}function MedianCellSorter(){}function mxMinimumCycleRemover(e){this.layout=e}function mxCoordinateAssignment(e,i,s,a,l,d){this.layout=e,this.intraCellSpacing=i,this.interRankCellSpacing=s,this.orientation=a,this.initialX=l,this.parallelEdgeSpacing=d}function mxSwimlaneOrdering(e){this.layout=e}function mxHierarchicalLayout(e,i,s){mxGraphLayout.call(this,e),this.orientation=null!=i?i:mxConstants.DIRECTION_NORTH,this.deterministic=null==s||s}(function(){function e(a){return a=null!=a?a:2,function(l,d,c,f,m,x,v,E,S,b){var T=m*S*1.118,D=x*S*1.118;m*=v+S,x*=v+S;var I=f.clone();I.x-=T,I.y-=D;var O=c!=mxConstants.ARROW_CLASSIC&&c!=mxConstants.ARROW_CLASSIC_THIN?1:3/4;return f.x+=-m*O-T,f.y+=-x*O-D,function(){l.begin(),l.moveTo(I.x,I.y),l.lineTo(I.x-m-x/a,I.y-x+m/a),(c==mxConstants.ARROW_CLASSIC||c==mxConstants.ARROW_CLASSIC_THIN)&&l.lineTo(I.x-3*m/4,I.y-3*x/4),l.lineTo(I.x+x/a-m,I.y-x-m/a),l.close(),b?l.fillAndStroke():l.stroke()}}}function i(a){return a=null!=a?a:2,function(l,d,c,f,m,x,v,E,S,b){var T=m*S*1.118,D=x*S*1.118;m*=v+S,x*=v+S;var I=f.clone();return I.x-=T,I.y-=D,f.x+=2*-T,f.y+=2*-D,function(){l.begin(),l.moveTo(I.x-m-x/a,I.y-x+m/a),l.lineTo(I.x,I.y),l.lineTo(I.x+x/a-m,I.y-x-m/a),l.stroke()}}}function s(a,l,d,c,f,m,x,v,E,S){var b=d==mxConstants.ARROW_DIAMOND?.7071:.9862,T=f*E*b,D=m*E*b;f*=x+E,m*=x+E;var I=c.clone();I.x-=T,I.y-=D,c.x+=-f-T,c.y+=-m-D;var O=d==mxConstants.ARROW_DIAMOND?2:3.4;return function(){a.begin(),a.moveTo(I.x,I.y),a.lineTo(I.x-f/2-m/O,I.y+f/O-m/2),a.lineTo(I.x-f,I.y-m),a.lineTo(I.x-f/2+m/O,I.y-m/2-f/O),a.close(),S?a.fillAndStroke():a.stroke()}}mxMarker.addMarker("classic",e(2)),mxMarker.addMarker("classicThin",e(3)),mxMarker.addMarker("block",e(2)),mxMarker.addMarker("blockThin",e(3)),mxMarker.addMarker("open",i(2)),mxMarker.addMarker("openThin",i(3)),mxMarker.addMarker("oval",function(a,l,d,c,f,m,x,v,E,S){var b=x/2,T=c.clone();return c.x-=f*b,c.y-=m*b,function(){a.ellipse(T.x-b,T.y-b,x,x),S?a.fillAndStroke():a.stroke()}}),mxMarker.addMarker("diamond",s),mxMarker.addMarker("diamondThin",s)})(),__mxOutput.mxMarker=void 0!==mxMarker?mxMarker:void 0,mxUtils.extend(mxActor,mxShape),mxActor.prototype.paintVertexShape=function(e,i,s,a,l){e.translate(i,s),e.begin(),this.redrawPath(e,i,s,a,l),e.fillAndStroke()},mxActor.prototype.redrawPath=function(e,i,s,a,l){var d=a/3;e.moveTo(0,l),e.curveTo(0,3*l/5,0,2*l/5,a/2,2*l/5),e.curveTo(a/2-d,2*l/5,a/2-d,0,a/2,0),e.curveTo(a/2+d,0,a/2+d,2*l/5,a/2,2*l/5),e.curveTo(a,2*l/5,a,3*l/5,a,l),e.close()},__mxOutput.mxActor=void 0!==mxActor?mxActor:void 0,mxUtils.extend(mxCloud,mxActor),mxCloud.prototype.redrawPath=function(e,i,s,a,l){e.moveTo(.25*a,.25*l),e.curveTo(.05*a,.25*l,0,.5*l,.16*a,.55*l),e.curveTo(0,.66*l,.18*a,.9*l,.31*a,.8*l),e.curveTo(.4*a,l,.7*a,l,.8*a,.8*l),e.curveTo(a,.8*l,a,.6*l,.875*a,.5*l),e.curveTo(a,.3*l,.8*a,.1*l,.625*a,.2*l),e.curveTo(.5*a,.05*l,.3*a,.05*l,.25*a,.25*l),e.close()},__mxOutput.mxCloud=void 0!==mxCloud?mxCloud:void 0,mxUtils.extend(mxRectangleShape,mxShape),mxRectangleShape.prototype.isHtmlAllowed=function(){var e=!0;return null!=this.style&&(e="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!this.isRounded&&!this.glass&&0==this.rotation&&(e||null!=this.fill&&this.fill!=mxConstants.NONE)},mxRectangleShape.prototype.paintBackground=function(e,i,s,a,l){var d=!0;if(null!=this.style&&(d="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),d||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE){if(!d&&(null==this.fill||this.fill==mxConstants.NONE)&&(e.pointerEvents=!1),this.isRounded){var c=0;if("1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0))c=Math.min(a/2,Math.min(l/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2));else{var f=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100;c=Math.min(a*f,l*f)}e.roundrect(i,s,a,l,c,c)}else e.rect(i,s,a,l);e.fillAndStroke()}},mxRectangleShape.prototype.isRoundable=function(e,i,s,a,l){return!0},mxRectangleShape.prototype.paintForeground=function(e,i,s,a,l){this.glass&&!this.outline&&null!=this.fill&&this.fill!=mxConstants.NONE&&this.paintGlassEffect(e,i,s,a,l,this.getArcSize(a+this.strokewidth,l+this.strokewidth))},__mxOutput.mxRectangleShape=void 0!==mxRectangleShape?mxRectangleShape:void 0,mxUtils.extend(mxEllipse,mxShape),mxEllipse.prototype.paintVertexShape=function(e,i,s,a,l){e.ellipse(i,s,a,l),e.fillAndStroke()},__mxOutput.mxEllipse=void 0!==mxEllipse?mxEllipse:void 0,mxUtils.extend(mxDoubleEllipse,mxShape),mxDoubleEllipse.prototype.vmlScale=10,mxDoubleEllipse.prototype.paintBackground=function(e,i,s,a,l){e.ellipse(i,s,a,l),e.fillAndStroke()},mxDoubleEllipse.prototype.paintForeground=function(e,i,s,a,l){if(!this.outline){var d=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(a/5,l/5)));l-=2*d,(a-=2*d)>0&&l>0&&e.ellipse(i+=d,s+=d,a,l),e.stroke()}},mxDoubleEllipse.prototype.getLabelBounds=function(e){var i=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(e.width/5/this.scale,e.height/5/this.scale)))*this.scale;return new mxRectangle(e.x+i,e.y+i,e.width-2*i,e.height-2*i)},__mxOutput.mxDoubleEllipse=void 0!==mxDoubleEllipse?mxDoubleEllipse:void 0,mxUtils.extend(mxRhombus,mxShape),mxRhombus.prototype.isRoundable=function(){return!0},mxRhombus.prototype.paintVertexShape=function(e,i,s,a,l){var d=a/2,c=l/2,f=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,[new mxPoint(i+d,s),new mxPoint(i+a,s+c),new mxPoint(i+d,s+l),new mxPoint(i,s+c)],this.isRounded,f,!0),e.fillAndStroke()},__mxOutput.mxRhombus=void 0!==mxRhombus?mxRhombus:void 0,mxUtils.extend(mxPolyline,mxShape),mxPolyline.prototype.getRotation=function(){return 0},mxPolyline.prototype.getShapeRotation=function(){return 0},mxPolyline.prototype.isPaintBoundsInverted=function(){return!1},mxPolyline.prototype.paintEdgeShape=function(e,i){var s=e.pointerEventsValue;e.pointerEventsValue="stroke",null==this.style||1!=this.style[mxConstants.STYLE_CURVED]?this.paintLine(e,i,this.isRounded):this.paintCurvedLine(e,i),e.pointerEventsValue=s},mxPolyline.prototype.paintLine=function(e,i,s){var a=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,i,s,a,!1),e.stroke()},mxPolyline.prototype.paintCurvedLine=function(e,i){e.begin();var s=i[0],a=i.length;e.moveTo(s.x,s.y);for(var l=1;l<a-2;l++){var f,m;e.quadTo((f=i[l]).x,f.y,(f.x+(m=i[l+1]).x)/2,(f.y+m.y)/2)}e.quadTo((f=i[a-2]).x,f.y,(m=i[a-1]).x,m.y),e.stroke()},__mxOutput.mxPolyline=void 0!==mxPolyline?mxPolyline:void 0,mxUtils.extend(mxArrow,mxShape),mxArrow.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var i=Math.max(this.arrowWidth,this.endSize);e.grow((i/2+this.strokewidth)*this.scale)},mxArrow.prototype.paintEdgeShape=function(e,i){var s=mxConstants.ARROW_SPACING,a=mxConstants.ARROW_WIDTH,l=mxConstants.ARROW_SIZE,d=i[0],c=i[i.length-1],f=c.x-d.x,m=c.y-d.y,x=Math.sqrt(f*f+m*m),v=x-2*s-l,E=f/x,S=m/x,D=a*S/3,I=-a*E/3,O=d.x-D/2+s*E,N=d.y-I/2+s*S,k=O+D,P=N+I,F=k+v*E,V=P+v*S,Y=F+D,j=V+I,X=Y-3*D,Z=j-3*I;e.begin(),e.moveTo(O,N),e.lineTo(k,P),e.lineTo(F,V),e.lineTo(Y,j),e.lineTo(c.x-s*E,c.y-s*S),e.lineTo(X,Z),e.lineTo(X+D,Z+I),e.close(),e.fillAndStroke()},__mxOutput.mxArrow=void 0!==mxArrow?mxArrow:void 0,mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.isRoundable=function(){return!0},mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var i=this.getEdgeWidth();this.isMarkerStart()&&(i=Math.max(i,this.getStartArrowWidth())),this.isMarkerEnd()&&(i=Math.max(i,this.getEndArrowWidth())),e.grow((i/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(e,i){var s=this.strokewidth;this.outline&&(s=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth)));for(var a=this.getStartArrowWidth()+s,l=this.getEndArrowWidth()+s,d=this.outline?this.getEdgeWidth()+s:this.getEdgeWidth(),c=this.isOpenEnded(),f=this.isMarkerStart(),m=this.isMarkerEnd(),x=c?0:this.arrowSpacing+s/2,v=this.startSize+s,E=this.endSize+s,S=this.isArrowRounded(),b=i[i.length-1],T=1;T<i.length-1&&i[T].x==i[0].x&&i[T].y==i[0].y;)T++;var D=i[T].x-i[0].x,I=i[T].y-i[0].y,O=Math.sqrt(D*D+I*I);if(0!=O){var k,V,N=D/O,P=N,F=I/O,Y=F,j=d*F,X=-d*N,Z=[];S?e.setLineJoin("round"):i.length>2&&e.setMiterLimit(1.42),e.begin();var Q=N,ee=F;if(f&&!c)this.paintMarker(e,i[0].x,i[0].y,N,F,v,a,d,x,!0);else{var K=i[0].x+j/2+x*N,oe=i[0].y+X/2+x*F,B=i[0].x-j/2+x*N,he=i[0].y-X/2+x*F;c?(e.moveTo(K,oe),Z.push(function(){e.lineTo(B,he)})):(e.moveTo(B,he),e.lineTo(K,oe))}for(var Oe=0,Ve=0,Re=0,_e=0;_e<i.length-2;_e++){var rt=mxUtils.relativeCcw(i[_e].x,i[_e].y,i[_e+1].x,i[_e+1].y,i[_e+2].x,i[_e+2].y);if(Oe=i[_e+2].x-i[_e+1].x,Ve=i[_e+2].y-i[_e+1].y,0!=(Re=Math.sqrt(Oe*Oe+Ve*Ve))){P=Oe/Re,Y=Ve/Re;var Pe=Math.max(Math.sqrt((N*P+F*Y+1)/2),.04);k=N+P,V=F+Y;var et=Math.sqrt(k*k+V*V);if(0!=et){k/=et,V/=et;var Sn=Math.max(Pe,Math.min(this.strokewidth/200+.04,.35)),jt=0!=rt&&S?Math.max(.1,Sn):Math.max(Pe,.06),gt=i[_e+1].x+V*d/2/jt,xt=i[_e+1].y-k*d/2/jt,De=i[_e+1].x-V*d/2/jt,Ne=i[_e+1].y+k*d/2/jt;if(0!=rt&&S)if(-1==rt){var Kt=De+Y*d,He=Ne-P*d;e.lineTo(De+F*d,Ne-N*d),e.quadTo(gt,xt,Kt,He),function(Yt,zt){Z.push(function(){e.lineTo(Yt,zt)})}(De,Ne)}else e.lineTo(gt,xt),function(Yt,zt){var tt=gt-F*d,ji=xt+N*d,Ho=gt-Y*d,wn=xt+P*d;Z.push(function(){e.quadTo(Yt,zt,tt,ji)}),Z.push(function(){e.lineTo(Ho,wn)})}(De,Ne);else e.lineTo(gt,xt),function(Yt,zt){Z.push(function(){e.lineTo(Yt,zt)})}(De,Ne);N=P,F=Y}}}if(j=d*Y,X=-d*P,m&&!c)this.paintMarker(e,b.x,b.y,-N,-F,E,l,d,x,!1);else{e.lineTo(b.x-x*P+j/2,b.y-x*Y+X/2);var an=b.x-x*P-j/2,jn=b.y-x*Y-X/2;c?(e.moveTo(an,jn),Z.splice(0,0,function(){e.moveTo(an,jn)})):e.lineTo(an,jn)}for(_e=Z.length-1;_e>=0;_e--)Z[_e]();c?(e.end(),e.stroke()):(e.close(),e.fillAndStroke()),e.setShadow(!1),e.setMiterLimit(4),S&&e.setLineJoin("flat"),i.length>2&&(e.setMiterLimit(4),f&&!c&&(e.begin(),this.paintMarker(e,i[0].x,i[0].y,Q,ee,v,a,d,x,!0),e.stroke(),e.end()),m&&!c&&(e.begin(),this.paintMarker(e,b.x,b.y,-N,-F,E,l,d,x,!0),e.stroke(),e.end()))}},mxArrowConnector.prototype.paintMarker=function(e,i,s,a,l,d,c,f,m,x){var v=f/c,E=f*l/2,S=-f*a/2,b=(m+d)*a,T=(m+d)*l;x?e.moveTo(i-E+b,s-S+T):e.lineTo(i-E+b,s-S+T),e.lineTo(i-E/v+b,s-S/v+T),e.lineTo(i+m*a,s+m*l),e.lineTo(i+E/v+b,s+S/v+T),e.lineTo(i+E+b,s+S+T)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE},__mxOutput.mxArrowConnector=void 0!==mxArrowConnector?mxArrowConnector:void 0,mxUtils.extend(mxText,mxShape),mxText.prototype.baseSpacingTop=0,mxText.prototype.baseSpacingBottom=0,mxText.prototype.baseSpacingLeft=0,mxText.prototype.baseSpacingRight=0,mxText.prototype.replaceLinefeeds=!0,mxText.prototype.verticalTextRotation=-90,mxText.prototype.ignoreClippedStringSize=!0,mxText.prototype.ignoreStringSize=!1,mxText.prototype.textWidthPadding=8!=document.documentMode||mxClient.IS_EM?3:4,mxText.prototype.lastValue=null,mxText.prototype.cacheEnabled=!0,mxText.prototype.isParseVml=function(){return!1},mxText.prototype.isHtmlAllowed=function(){return 8!=document.documentMode||mxClient.IS_EM},mxText.prototype.getSvgScreenOffset=function(){return 0},mxText.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)},mxText.prototype.paint=function(e,i){var s=this.scale,a=this.bounds.x/s,l=this.bounds.y/s,d=this.bounds.width/s,c=this.bounds.height/s;if(this.updateTransform(e,a,l,d,c),this.configureCanvas(e,a,l,d,c),i)e.updateText(a,l,d,c,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node);else{var f=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML,m=f||e instanceof mxVmlCanvas2D?"html":"",x=this.value;!f&&"html"==m&&(x=mxUtils.htmlEntities(x,!1)),"html"==m&&!mxUtils.isNode(this.value)&&(x=mxUtils.replaceTrailingNewlines(x,"<div><br></div>")),x=!mxUtils.isNode(this.value)&&this.replaceLinefeeds&&"html"==m?x.replace(/\n/g,"<br/>"):x;var v=this.textDirection;v==mxConstants.TEXT_DIRECTION_AUTO&&!f&&(v=this.getAutoDirection()),v!=mxConstants.TEXT_DIRECTION_LTR&&v!=mxConstants.TEXT_DIRECTION_RTL&&(v=null),e.text(a,l,d,c,x,this.align,this.valign,this.wrap,m,this.overflow,this.clipped,this.getTextRotation(),v)}},mxText.prototype.redraw=function(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML))if("DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML){var e=this.createCanvas();null!=e&&null!=e.updateText?(e.pointerEvents=this.pointerEvents,this.paint(e,!0),this.destroyCanvas(e),this.updateBoundingBox()):mxShape.prototype.redraw.apply(this,arguments)}else mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():(this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()),this.updateBoundingBox();else mxShape.prototype.redraw.apply(this,arguments),this.lastValue=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML?this.value:null},mxText.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.color="black",this.align=mxConstants.ALIGN_CENTER,this.valign=mxConstants.ALIGN_MIDDLE,this.family=mxConstants.DEFAULT_FONTFAMILY,this.size=mxConstants.DEFAULT_FONTSIZE,this.fontStyle=mxConstants.DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=2,this.spacingRight=2,this.spacingBottom=2,this.spacingLeft=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants.DEFAULT_TEXT_DIRECTION,delete this.margin},mxText.prototype.apply=function(e){var i=this.spacing;mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.fontStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils.getValue(this.style,mxConstants.STYLE_FONTFAMILY,this.family),this.size=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSIZE,this.size),this.color=mxUtils.getValue(this.style,mxConstants.STYLE_FONTCOLOR,this.color),this.align=mxUtils.getValue(this.style,mxConstants.STYLE_ALIGN,this.align),this.valign=mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_TOP,this.spacingTop-i))+this.spacing,this.spacingRight=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_RIGHT,this.spacingRight-i))+this.spacing,this.spacingBottom=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_BOTTOM,this.spacingBottom-i))+this.spacing,this.spacingLeft=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_LEFT,this.spacingLeft-i))+this.spacing,this.horizontal=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipV=null,this.flipH=null},mxText.prototype.getAutoDirection=function(){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return null!=e&&e.length>0&&e[0]>"z"?mxConstants.TEXT_DIRECTION_RTL:mxConstants.TEXT_DIRECTION_LTR},mxText.prototype.getContentNode=function(){var e=this.node;return null!=e&&(e=null==e.ownerSVGElement?this.node.firstChild.firstChild:e.firstChild.firstChild.firstChild.firstChild.firstChild),e},mxText.prototype.updateBoundingBox=function(){var e=this.node;this.boundingBox=this.bounds.clone();var i=this.getTextRotation(),s=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER):null,a=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE):null;if(!(this.ignoreStringSize||null==e||"fill"==this.overflow||this.clipped&&this.ignoreClippedStringSize&&s==mxConstants.ALIGN_CENTER&&a==mxConstants.ALIGN_MIDDLE)){var l=null,d=null;if(null!=e.ownerSVGElement)if(null!=e.firstChild&&null!=e.firstChild.firstChild&&"foreignObject"==e.firstChild.firstChild.nodeName)d=(e=e.firstChild.firstChild.firstChild.firstChild).offsetHeight*this.scale,l="width"==this.overflow?this.boundingBox.width:e.offsetWidth*this.scale;else try{var c=e.getBBox();return void(this.boundingBox="string"==typeof this.value&&0==mxUtils.trim(this.value)||0==c.width&&0==c.height?null:new mxRectangle(c.x,c.y,c.width,c.height))}catch(S){}else{var f=null!=this.state?this.state.view.textDiv:null;if(null!=this.offsetWidth&&null!=this.offsetHeight)l=this.offsetWidth*this.scale,d=this.offsetHeight*this.scale;else{null!=f&&(this.updateFont(f),this.updateSize(f,!1),this.updateInnerHtml(f),e=f);var m=e;if(8!=document.documentMode||mxClient.IS_EM)null!=m.firstChild&&"DIV"==m.firstChild.nodeName&&(m=m.firstChild);else{var x=Math.round(this.bounds.width/this.scale);if(this.wrap&&x>0){if(e.style.wordWrap=mxConstants.WORD_WRAP,e.style.whiteSpace="normal","break-word"!=e.style.wordWrap){var v=m.getElementsByTagName("div");v.length>0&&(m=v[v.length-1]),l=m.offsetWidth+2,v=this.node.getElementsByTagName("div"),this.clipped&&(l=Math.min(x,l)),v.length>1&&(v[v.length-2].style.width=l+"px")}}else e.style.whiteSpace="nowrap"}this.offsetWidth=m.offsetWidth+this.textWidthPadding,this.offsetHeight=m.offsetHeight,l=this.offsetWidth*this.scale,d=this.offsetHeight*this.scale}}null!=l&&null!=d&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,l,d))}if(null!=this.boundingBox)if(0!=i){var E=mxUtils.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),i,new mxPoint(0,0));this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=E.x,this.boundingBox.y+=E.y,this.boundingBox.width=E.width,this.boundingBox.height=E.height}else this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null},mxText.prototype.getShapeRotation=function(){return 0},mxText.prototype.getTextRotation=function(){return null!=this.state&&null!=this.state.shape?this.state.shape.getTextRotation():0},mxText.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&null!=this.state&&this.state.view.graph.model.isVertex(this.state.cell)},mxText.prototype.configureCanvas=function(e,i,s,a,l){mxShape.prototype.configureCanvas.apply(this,arguments),e.setFontColor(this.color),e.setFontBackgroundColor(this.background),e.setFontBorderColor(this.border),e.setFontFamily(this.family),e.setFontSize(this.size),e.setFontStyle(this.fontStyle)},mxText.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width="1px",this.node.style.height="1px",this.node.style.overflow="visible"},mxText.prototype.getHtmlValue=function(){var e=this.value;return this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div><br></div>"),this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e},mxText.prototype.getTextCss=function(){var i="display: inline-block; font-size: "+this.size+"px; font-family: "+this.family+"; color: "+this.color+"; line-height: "+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+"; pointer-events: "+(this.pointerEvents?"all":"none")+"; ";(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(i+="font-weight: bold; "),(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(i+="font-style: italic; ");var s=[];return(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&s.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&s.push("line-through"),s.length>0&&(i+="text-decoration: "+s.join(" ")+"; "),i},mxText.prototype.redrawHtmlShape=function(){if(mxClient.IS_SVG)this.redrawHtmlShapeWithCss3();else{var e=this.node.style;e.whiteSpace="normal",e.overflow="",e.width="",e.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),this.offsetWidth=null,this.offsetHeight=null,mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()}},mxText.prototype.redrawHtmlShapeWithCss3=function(){var e=Math.max(0,Math.round(this.bounds.width/this.scale)),i=Math.max(0,Math.round(this.bounds.height/this.scale)),s="position: absolute; left: "+Math.round(this.bounds.x)+"px; top: "+Math.round(this.bounds.y)+"px; pointer-events: none; ",a=this.getTextCss();mxSvgCanvas2D.createCss(e+2,i,this.align,this.valign,this.wrap,this.overflow,this.clipped,null!=this.background?mxUtils.htmlEntities(this.background):null,null!=this.border?mxUtils.htmlEntities(this.border):null,s,a,this.scale,mxUtils.bind(this,function(l,d,c,f,m,x){var v=this.getTextRotation(),E=(1!=this.scale?"scale("+this.scale+") ":"")+(0!=v?"rotate("+v+"deg) ":"")+(0!=this.margin.x||0!=this.margin.y?"translate("+100*this.margin.x+"%,"+100*this.margin.y+"%)":"");""!=E&&(E="transform-origin: 0 0; transform: "+E+"; "),""==x?(c+=f,f="display:inline-block; min-width: 100%; "+E):(f+=E,mxClient.IS_SF&&(f+="-webkit-clip-path: content-box;")),this.opacity<100&&(m+="opacity: "+this.opacity/100+"; "),this.node.setAttribute("style",c);var S=mxUtils.isNode(this.value)?this.value.outerHTML:this.getHtmlValue();null==this.node.firstChild&&(this.node.innerHTML="<div><div>"+S+"</div></div>"),this.node.firstChild.firstChild.setAttribute("style",m),this.node.firstChild.setAttribute("style",f)}))},mxText.prototype.updateHtmlTransform=function(){var e=this.getTextRotation(),i=this.node.style,s=this.margin.x,a=this.margin.y;0!=e?(mxUtils.setPrefixedStyle(i,"transformOrigin",100*-s+"% "+100*-a+"%"),mxUtils.setPrefixedStyle(i,"transform","translate("+100*s+"%,"+100*a+"%) scale("+this.scale+") rotate("+e+"deg)")):(mxUtils.setPrefixedStyle(i,"transformOrigin","0% 0%"),mxUtils.setPrefixedStyle(i,"transform","scale("+this.scale+") translate("+100*s+"%,"+100*a+"%)")),i.left=Math.round(this.bounds.x-Math.ceil(s*("fill"!=this.overflow&&"width"!=this.overflow?3:1)))+"px",i.top=Math.round(this.bounds.y-a*("fill"!=this.overflow?3:1))+"px",i.opacity=this.opacity<100?this.opacity/100:""},mxText.prototype.updateInnerHtml=function(e){if(mxUtils.isNode(this.value))e.innerHTML=this.value.outerHTML;else{var i=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(i=mxUtils.htmlEntities(i,!1)),i=mxUtils.replaceTrailingNewlines(i,"<div>&nbsp;</div>"),i=this.replaceLinefeeds?i.replace(/\n/g,"<br/>"):i,e.innerHTML=i='<div style="display:inline-block;_display:inline;">'+i+"</div>"}},mxText.prototype.updateHtmlFilter=function(){var e=this.node.style,i=this.margin.x,s=this.margin.y,a=this.scale;mxUtils.setOpacity(this.node,this.opacity);var l=0,d=0,c=null!=this.state?this.state.view.textDiv:null,f=this.node;if(null!=c){c.style.overflow="",c.style.height="",c.style.width="",this.updateFont(c),this.updateSize(c,!1),this.updateInnerHtml(c);var m=Math.round(this.bounds.width/this.scale);this.wrap&&m>0?(c.style.whiteSpace="normal",c.style.wordWrap=mxConstants.WORD_WRAP,l=m,this.clipped&&(l=Math.min(l,this.bounds.width)),c.style.width=l+"px"):c.style.whiteSpace="nowrap",null!=(f=c).firstChild&&"DIV"==f.firstChild.nodeName&&(f=f.firstChild,this.wrap&&"break-word"==c.style.wordWrap&&(f.style.width="100%")),!this.clipped&&this.wrap&&m>0&&(c.style.width=(l=f.offsetWidth+this.textWidthPadding)+"px"),d=f.offsetHeight+2,mxClient.IS_QUIRKS&&null!=this.border&&this.border!=mxConstants.NONE&&(d+=3)}else null!=f.firstChild&&"DIV"==f.firstChild.nodeName&&(d=(f=f.firstChild).offsetHeight);l=f.offsetWidth+this.textWidthPadding,this.clipped&&(d=Math.min(d,this.bounds.height)),m=this.bounds.width/a;var x=this.bounds.height/a;"fill"==this.overflow?(d=x,l=m):"width"==this.overflow&&(d=f.scrollHeight,l=m),this.offsetWidth=l,this.offsetHeight=d,mxClient.IS_QUIRKS&&(this.clipped||"width"==this.overflow&&x>0)?(x=Math.min(x,d),e.height=Math.round(x)+"px"):x=d,"fill"!=this.overflow&&"width"!=this.overflow&&(this.clipped&&(l=Math.min(m,l)),m=l,(mxClient.IS_QUIRKS&&this.clipped||this.wrap)&&(e.width=Math.round(m)+"px")),x*=a,m*=a;var v=this.getTextRotation()*(Math.PI/180),E=parseFloat(parseFloat(Math.cos(v)).toFixed(8)),S=parseFloat(parseFloat(Math.sin(-v)).toFixed(8));(v%=2*Math.PI)<0&&(v+=2*Math.PI),(v%=Math.PI)>Math.PI/2&&(v=Math.PI-v);var b=Math.cos(v),T=Math.sin(-v),D=m*-(i+.5),I=x*-(s+.5),O=(x-x*b+m*T)/2+S*D-E*I,N=(m-m*b+x*T)/2-E*D-S*I;if(0!=v){var k="progid:DXImageTransform.Microsoft.Matrix(M11="+E+", M12="+S+", M21="+-S+", M22="+E+", sizingMethod='auto expand')";null!=e.filter&&e.filter.length>0?e.filter+=" "+k:e.filter=k}s=0,"fill"!=this.overflow&&mxClient.IS_QUIRKS&&(this.valign==mxConstants.ALIGN_TOP?s-=1:s+=this.valign==mxConstants.ALIGN_BOTTOM?2:1),e.zoom=a,e.left=Math.round(this.bounds.x+N-m/2)+"px",e.top=Math.round(this.bounds.y+O-x/2+s)+"px"},mxText.prototype.updateValue=function(){if(mxUtils.isNode(this.value))this.node.innerHTML="",this.node.appendChild(this.value);else{var e=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div><br></div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e;var i=null!=this.background&&this.background!=mxConstants.NONE?this.background:null,s=null!=this.border&&this.border!=mxConstants.NONE?this.border:null;if("fill"==this.overflow||"width"==this.overflow)null!=i&&(this.node.style.backgroundColor=i),null!=s&&(this.node.style.border="1px solid "+s);else{var a="";null!=i&&(a+="background-color:"+mxUtils.htmlEntities(i)+";"),null!=s&&(a+="border:1px solid "+mxUtils.htmlEntities(s)+";"),e='<div style="zoom:1;'+a+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+'">'+e+"</div>"}this.node.innerHTML=e;var d=this.node.getElementsByTagName("div");if(d.length>0){var c=this.textDirection;c==mxConstants.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants.DIALECT_STRICTHTML&&(c=this.getAutoDirection()),c==mxConstants.TEXT_DIRECTION_LTR||c==mxConstants.TEXT_DIRECTION_RTL?d[d.length-1].setAttribute("dir",c):d[d.length-1].removeAttribute("dir")}}},mxText.prototype.updateFont=function(e){var i=e.style;i.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,i.fontSize=this.size+"px",i.fontFamily=this.family,i.verticalAlign="top",i.color=this.color,i.fontWeight=(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?"bold":"",i.fontStyle=(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?"italic":"";var s=[];(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&s.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&s.push("line-through"),i.textDecoration=s.join(" "),i.textAlign=this.align==mxConstants.ALIGN_CENTER?"center":this.align==mxConstants.ALIGN_RIGHT?"right":"left"},mxText.prototype.updateSize=function(e,i){var s=Math.max(0,Math.round(this.bounds.width/this.scale)),a=Math.max(0,Math.round(this.bounds.height/this.scale)),l=e.style;if(this.clipped?(l.overflow="hidden",mxClient.IS_QUIRKS?l.width=s+"px":(l.maxHeight=a+"px",l.maxWidth=s+"px")):"fill"==this.overflow?(l.width=s+1+"px",l.height=a+1+"px",l.overflow="hidden"):"width"==this.overflow&&(l.width=s+1+"px",l.maxHeight=a+1+"px",l.overflow="hidden"),this.wrap&&s>0){if(l.wordWrap=mxConstants.WORD_WRAP,l.whiteSpace="normal",l.width=s+"px",i&&"fill"!=this.overflow&&"width"!=this.overflow){var d=e;null!=d.firstChild&&"DIV"==d.firstChild.nodeName&&(d=d.firstChild,"break-word"==e.style.wordWrap&&(d.style.width="100%"));var c=d.offsetWidth;if(0==c){var f=e.parentNode;e.style.visibility="hidden",document.body.appendChild(e),c=d.offsetWidth,e.style.visibility="",f.appendChild(e)}c+=3,this.clipped&&(c=Math.min(c,s)),l.width=c+"px"}}else l.whiteSpace="nowrap"},mxText.prototype.updateMargin=function(){this.margin=mxUtils.getAlignmentAsPoint(this.align,this.valign)},mxText.prototype.getSpacing=function(){return new mxPoint(this.align==mxConstants.ALIGN_CENTER?(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants.ALIGN_RIGHT?-this.spacingRight-this.baseSpacingRight:this.spacingLeft+this.baseSpacingLeft,this.valign==mxConstants.ALIGN_MIDDLE?(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants.ALIGN_BOTTOM?-this.spacingBottom-this.baseSpacingBottom:this.spacingTop+this.baseSpacingTop)},__mxOutput.mxText=void 0!==mxText?mxText:void 0,mxUtils.extend(mxTriangle,mxActor),mxTriangle.prototype.isRoundable=function(){return!0},mxTriangle.prototype.redrawPath=function(e,i,s,a,l){var d=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(0,0),new mxPoint(a,.5*l),new mxPoint(0,l)],this.isRounded,d,!0)},__mxOutput.mxTriangle=void 0!==mxTriangle?mxTriangle:void 0,mxUtils.extend(mxHexagon,mxActor),mxHexagon.prototype.redrawPath=function(e,i,s,a,l){var d=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(.25*a,0),new mxPoint(.75*a,0),new mxPoint(a,.5*l),new mxPoint(.75*a,l),new mxPoint(.25*a,l),new mxPoint(0,.5*l)],this.isRounded,d,!0)},__mxOutput.mxHexagon=void 0!==mxHexagon?mxHexagon:void 0,mxUtils.extend(mxLine,mxShape),mxLine.prototype.vertical=!1,mxLine.prototype.paintVertexShape=function(e,i,s,a,l){var d;e.begin(),this.vertical?(e.moveTo(d=i+a/2,s),e.lineTo(d,s+l)):(e.moveTo(i,d=s+l/2),e.lineTo(i+a,d)),e.stroke()},__mxOutput.mxLine=void 0!==mxLine?mxLine:void 0,mxUtils.extend(mxImageShape,mxRectangleShape),mxImageShape.prototype.preserveImageAspect=!0,mxImageShape.prototype.getSvgScreenOffset=function(){return 0},mxImageShape.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),this.fill=null,this.stroke=null,this.gradient=null,null!=this.style&&(this.preserveImageAspect=1==mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1),this.flipH=this.flipH||1==mxUtils.getValue(this.style,"imageFlipH",0),this.flipV=this.flipV||1==mxUtils.getValue(this.style,"imageFlipV",0))},mxImageShape.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect},mxImageShape.prototype.createHtml=function(){var e=document.createElement("div");return e.style.position="absolute",e},mxImageShape.prototype.isRoundable=function(e,i,s,a,l){return!1},mxImageShape.prototype.paintVertexShape=function(e,i,s,a,l){if(null!=this.image){var d=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null),c=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null);null!=d&&(e.setFillColor(d),e.setStrokeColor(c),e.rect(i,s,a,l),e.fillAndStroke()),e.image(i,s,a,l,this.image,this.preserveImageAspect,!1,!1),null!=(c=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null))&&(e.setShadow(!1),e.setStrokeColor(c),e.rect(i,s,a,l),e.stroke())}else mxRectangleShape.prototype.paintBackground.apply(this,arguments)},mxImageShape.prototype.redrawHtmlShape=function(){if(this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="",null!=this.image){var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,""),i=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=e,this.node.style.borderColor=i;var s=mxClient.IS_IE6||(null==document.documentMode||document.documentMode<=8)&&0!=this.rotation,a=document.createElement(s?mxClient.VML_PREFIX+":image":"img");a.setAttribute("border","0"),a.style.position="absolute",a.src=this.image;var l=this.opacity<100?"alpha(opacity="+this.opacity+")":"";this.node.style.filter=l,this.flipH&&this.flipV?l+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?l+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(l+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),a.style.filter!=l&&(a.style.filter=l),"image"==a.nodeName?a.style.rotation=this.rotation:mxUtils.setPrefixedStyle(a.style,"transform",0!=this.rotation?"rotate("+this.rotation+"deg)":""),a.style.width=this.node.style.width,a.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(a)}else this.setTransparentBackgroundImage(this.node)},__mxOutput.mxImageShape=void 0!==mxImageShape?mxImageShape:void 0,mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(e){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(e,i,s,a,l){this.paintImage(e,i,s,a,l),this.paintIndicator(e,i,s,a,l),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(e,i,s,a,l){if(null!=this.image){var d=this.getImageBounds(i,s,a,l);e.image(d.x,d.y,d.width,d.height,this.image,!1,!1,!1)}},mxLabel.prototype.getImageBounds=function(e,i,s,a){var l=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),d=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),c=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),f=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),m=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return new mxRectangle(e+=l==mxConstants.ALIGN_CENTER?(s-c)/2:l==mxConstants.ALIGN_RIGHT?s-c-m:m,i+=d==mxConstants.ALIGN_TOP?m:d==mxConstants.ALIGN_BOTTOM?a-f-m:(a-f)/2,c,f)},mxLabel.prototype.paintIndicator=function(e,i,s,a,l){if(null!=this.indicator)this.indicator.bounds=this.getIndicatorBounds(i,s,a,l),this.indicator.paint(e);else if(null!=this.indicatorImage){var d=this.getIndicatorBounds(i,s,a,l);e.image(d.x,d.y,d.width,d.height,this.indicatorImage,!1,!1,!1)}},mxLabel.prototype.getIndicatorBounds=function(e,i,s,a){var l=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),d=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),c=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),f=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),m=this.spacing+5;return new mxRectangle(e+=l==mxConstants.ALIGN_RIGHT?s-c-m:l==mxConstants.ALIGN_CENTER?(s-c)/2:m,i+=d==mxConstants.ALIGN_BOTTOM?a-f-m:d==mxConstants.ALIGN_TOP?m:(a-f)/2,c,f)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(null!=this.image){var e=document.createElement("img");e.style.position="relative",e.setAttribute("border","0");var i=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);i.x-=this.bounds.x,i.y-=this.bounds.y,e.style.left=Math.round(i.x)+"px",e.style.top=Math.round(i.y)+"px",e.style.width=Math.round(i.width)+"px",e.style.height=Math.round(i.height)+"px",e.src=this.image,this.node.appendChild(e)}},__mxOutput.mxLabel=void 0!==mxLabel?mxLabel:void 0,mxUtils.extend(mxCylinder,mxShape),mxCylinder.prototype.maxHeight=40,mxCylinder.prototype.svgStrokeTolerance=0,mxCylinder.prototype.paintVertexShape=function(e,i,s,a,l){e.translate(i,s),e.begin(),this.redrawPath(e,i,s,a,l,!1),e.fillAndStroke(),(!this.outline||null==this.style||0==mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0))&&(e.setShadow(!1),e.begin(),this.redrawPath(e,i,s,a,l,!0),e.stroke())},mxCylinder.prototype.getCylinderSize=function(e,i,s,a){return Math.min(this.maxHeight,Math.round(a/5))},mxCylinder.prototype.redrawPath=function(e,i,s,a,l,d){var c=this.getCylinderSize(i,s,a,l);(d&&null!=this.fill||!d&&null==this.fill)&&(e.moveTo(0,c),e.curveTo(0,2*c,a,2*c,a,c),d||(e.stroke(),e.begin())),d||(e.moveTo(0,c),e.curveTo(0,-c/3,a,-c/3,a,c),e.lineTo(a,l-c),e.curveTo(a,l+c/3,0,l+c/3,0,l-c),e.close())},__mxOutput.mxCylinder=void 0!==mxCylinder?mxCylinder:void 0,mxUtils.extend(mxConnector,mxPolyline),mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=null!=this.style&&1==this.style[mxConstants.STYLE_CURVED],mxShape.prototype.updateBoundingBox.apply(this,arguments)},mxConnector.prototype.paintEdgeShape=function(e,i){var s=this.createMarker(e,i,!0),a=this.createMarker(e,i,!1);mxPolyline.prototype.paintEdgeShape.apply(this,arguments),e.setFillColor(this.stroke),e.setShadow(!1),e.setDashed(!1),null!=s&&s(),null!=a&&a()},mxConnector.prototype.createMarker=function(e,i,s){var a=null,l=i.length,d=mxUtils.getValue(this.style,s?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW),c=s?i[1]:i[l-2],f=s?i[0]:i[l-1];if(null!=d&&null!=c&&null!=f){for(var m=1;m<l-1&&0==Math.round(c.x-f.x)&&0==Math.round(c.y-f.y);)c=s?i[1+m]:i[l-2-m],m++;var x=f.x-c.x,v=f.y-c.y,E=Math.max(1,Math.sqrt(x*x+v*v)),S=x/E,b=v/E,T=mxUtils.getNumber(this.style,s?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE);a=mxMarker.createMarker(e,this,d,f,S,b,T,s,this.strokewidth,0!=this.style[s?mxConstants.STYLE_STARTFILL:mxConstants.STYLE_ENDFILL])}return a},mxConnector.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var i=0;mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(i=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)+1),mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(i=Math.max(i,mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE))+1),e.grow(i*this.scale)},__mxOutput.mxConnector=void 0!==mxConnector?mxConnector:void 0,mxUtils.extend(mxSwimlane,mxShape),mxSwimlane.prototype.imageSize=16,mxSwimlane.prototype.isRoundable=function(e,i,s,a,l){return!0},mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils.getValue(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE))},mxSwimlane.prototype.getLabelBounds=function(e){var i=this.getTitleSize(),s=new mxRectangle(e.x,e.y,e.width,e.height),a=this.isHorizontal(),l=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),d=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),c=this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH,f=a==!c,m=!f&&l!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),x=f&&d!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST);if(c){var v=Math.min(s.width,i*this.scale);(m||x)&&(s.x+=s.width-v),s.width=v}else v=Math.min(s.height,i*this.scale),(m||x)&&(s.y+=s.height-v),s.height=v;return s},mxSwimlane.prototype.getGradientBounds=function(e,i,s,a,l){var d=this.getTitleSize();return this.isHorizontal()?new mxRectangle(i,s,a,d=Math.min(d,l)):new mxRectangle(i,s,d=Math.min(d,a),l)},mxSwimlane.prototype.getSwimlaneArcSize=function(e,i,s){return"1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(e/2,Math.min(i/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):s*(mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100)*3},mxSwimlane.prototype.isHorizontal=function(){return 1==mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)},mxSwimlane.prototype.paintVertexShape=function(e,i,s,a,l){var d=this.getTitleSize(),c=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE),f=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),m=0;d=this.isHorizontal()?Math.min(d,l):Math.min(d,a),e.translate(i,s),this.isRounded?(m=this.getSwimlaneArcSize(a,l,d),m=Math.min((this.isHorizontal()?l:a)-d,Math.min(d,m)),this.paintRoundedSwimlane(e,i,s,a,l,d,m,c,f)):this.paintSwimlane(e,i,s,a,l,d,c,f);var x=mxUtils.getValue(this.style,mxConstants.STYLE_SEPARATORCOLOR,mxConstants.NONE);if(this.paintSeparator(e,i,s,a,l,d,x),null!=this.image){var v=this.getImageBounds(i,s,a,l);e.image(v.x-i,v.y-s,v.width,v.height,this.image,!1,!1,!1)}this.glass&&(e.setShadow(!1),this.paintGlassEffect(e,0,0,a,d,m))},mxSwimlane.prototype.paintSwimlane=function(e,i,s,a,l,d,c,f){e.begin();var m=!0;null!=this.style&&(m="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!m&&(null==this.fill||this.fill==mxConstants.NONE)&&(e.pointerEvents=!1),this.isHorizontal()?(e.moveTo(0,d),e.lineTo(0,0),e.lineTo(a,0),e.lineTo(a,d),e.fillAndStroke(),d<l&&((c==mxConstants.NONE||!m)&&(e.pointerEvents=!1),c!=mxConstants.NONE&&e.setFillColor(c),e.begin(),e.moveTo(0,d),e.lineTo(0,l),e.lineTo(a,l),e.lineTo(a,d),c==mxConstants.NONE?e.stroke():e.fillAndStroke())):(e.moveTo(d,0),e.lineTo(0,0),e.lineTo(0,l),e.lineTo(d,l),e.fillAndStroke(),d<a&&((c==mxConstants.NONE||!m)&&(e.pointerEvents=!1),c!=mxConstants.NONE&&e.setFillColor(c),e.begin(),e.moveTo(d,0),e.lineTo(a,0),e.lineTo(a,l),e.lineTo(d,l),c==mxConstants.NONE?e.stroke():e.fillAndStroke())),f&&this.paintDivider(e,i,s,a,l,d,c==mxConstants.NONE)},mxSwimlane.prototype.paintRoundedSwimlane=function(e,i,s,a,l,d,c,f,m){e.begin();var x=!0;null!=this.style&&(x="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!x&&(null==this.fill||this.fill==mxConstants.NONE)&&(e.pointerEvents=!1),this.isHorizontal()?(e.moveTo(a,d),e.lineTo(a,c),e.quadTo(a,0,a-Math.min(a/2,c),0),e.lineTo(Math.min(a/2,c),0),e.quadTo(0,0,0,c),e.lineTo(0,d),e.fillAndStroke(),d<l&&((f==mxConstants.NONE||!x)&&(e.pointerEvents=!1),f!=mxConstants.NONE&&e.setFillColor(f),e.begin(),e.moveTo(0,d),e.lineTo(0,l-c),e.quadTo(0,l,Math.min(a/2,c),l),e.lineTo(a-Math.min(a/2,c),l),e.quadTo(a,l,a,l-c),e.lineTo(a,d),f==mxConstants.NONE?e.stroke():e.fillAndStroke())):(e.moveTo(d,0),e.lineTo(c,0),e.quadTo(0,0,0,Math.min(l/2,c)),e.lineTo(0,l-Math.min(l/2,c)),e.quadTo(0,l,c,l),e.lineTo(d,l),e.fillAndStroke(),d<a&&((f==mxConstants.NONE||!x)&&(e.pointerEvents=!1),f!=mxConstants.NONE&&e.setFillColor(f),e.begin(),e.moveTo(d,l),e.lineTo(a-c,l),e.quadTo(a,l,a,l-Math.min(l/2,c)),e.lineTo(a,Math.min(l/2,c)),e.quadTo(a,0,a-c,0),e.lineTo(d,0),f==mxConstants.NONE?e.stroke():e.fillAndStroke())),m&&this.paintDivider(e,i,s,a,l,d,f==mxConstants.NONE)},mxSwimlane.prototype.paintDivider=function(e,i,s,a,l,d,c){c||e.setShadow(!1),e.begin(),this.isHorizontal()?(e.moveTo(0,d),e.lineTo(a,d)):(e.moveTo(d,0),e.lineTo(d,l)),e.stroke()},mxSwimlane.prototype.paintSeparator=function(e,i,s,a,l,d,c){c!=mxConstants.NONE&&(e.setStrokeColor(c),e.setDashed(!0),e.begin(),this.isHorizontal()?(e.moveTo(a,d),e.lineTo(a,l)):(e.moveTo(d,0),e.lineTo(a,0)),e.stroke(),e.setDashed(!1))},mxSwimlane.prototype.getImageBounds=function(e,i,s,a){return this.isHorizontal()?new mxRectangle(e+s-this.imageSize,i,this.imageSize,this.imageSize):new mxRectangle(e,i,this.imageSize,this.imageSize)},__mxOutput.mxSwimlane=void 0!==mxSwimlane?mxSwimlane:void 0,mxGraphLayout.prototype.graph=null,mxGraphLayout.prototype.useBoundingBox=!0,mxGraphLayout.prototype.parent=null,mxGraphLayout.prototype.moveCell=function(e,i,s){},mxGraphLayout.prototype.resizeCell=function(e,i){},mxGraphLayout.prototype.execute=function(e){},mxGraphLayout.prototype.getGraph=function(){return this.graph},mxGraphLayout.prototype.getConstraint=function(e,i,s,a){return this.graph.getCurrentCellStyle(i)[e]},mxGraphLayout.traverse=function(e,i,s,a,l){if(null!=s&&null!=e&&(i=null==i||i,!(l=l||new mxDictionary).get(e))){l.put(e,!0);var d=s(e,a);if(null==d||d){var c=this.graph.model.getEdgeCount(e);if(c>0)for(var f=0;f<c;f++){var m=this.graph.model.getEdgeAt(e,f),x=this.graph.model.getTerminal(m,!0)==e;if(!i||x){var v=this.graph.view.getVisibleTerminal(m,!x);this.traverse(v,i,s,m,l)}}}}},mxGraphLayout.prototype.isAncestor=function(e,i,s){if(!s)return this.graph.model.getParent(i)==e;if(i==e)return!1;for(;null!=i&&i!=e;)i=this.graph.model.getParent(i);return i==e},mxGraphLayout.prototype.isVertexMovable=function(e){return this.graph.isCellMovable(e)},mxGraphLayout.prototype.isVertexIgnored=function(e){return!this.graph.getModel().isVertex(e)||!this.graph.isCellVisible(e)},mxGraphLayout.prototype.isEdgeIgnored=function(e){var i=this.graph.getModel();return!i.isEdge(e)||!this.graph.isCellVisible(e)||null==i.getTerminal(e,!0)||null==i.getTerminal(e,!1)},mxGraphLayout.prototype.setEdgeStyleEnabled=function(e,i){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,i?"0":"1",[e])},mxGraphLayout.prototype.setOrthogonalEdge=function(e,i){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,i?"1":"0",[e])},mxGraphLayout.prototype.getParentOffset=function(e){var i=new mxPoint;if(null!=e&&e!=this.parent){var s=this.graph.getModel();if(s.isAncestor(this.parent,e))for(var a=s.getGeometry(e);e!=this.parent;)i.x=i.x+a.x,i.y=i.y+a.y,e=s.getParent(e),a=s.getGeometry(e)}return i},mxGraphLayout.prototype.setEdgePoints=function(e,i){if(null!=e){var s=this.graph.model,a=s.getGeometry(e);if(null==a?(a=new mxGeometry).setRelative(!0):a=a.clone(),null!=this.parent&&null!=i)for(var l=s.getParent(e),d=this.getParentOffset(l),c=0;c<i.length;c++)i[c].x=i[c].x-d.x,i[c].y=i[c].y-d.y;a.points=i,s.setGeometry(e,a)}},mxGraphLayout.prototype.setVertexLocation=function(e,i,s){var a=this.graph.getModel(),l=a.getGeometry(e),d=null;if(null!=l){if(d=new mxRectangle(i,s,l.width,l.height),this.useBoundingBox){var c=this.graph.getView().getState(e);if(null!=c&&null!=c.text&&null!=c.text.boundingBox){var f=this.graph.getView().scale,m=c.text.boundingBox;c.text.boundingBox.x<c.x&&(i+=(c.x-m.x)/f,d.width=m.width),c.text.boundingBox.y<c.y&&(s+=(c.y-m.y)/f,d.height=m.height)}}if(null!=this.parent){var x=a.getParent(e);if(null!=x&&x!=this.parent){var v=this.getParentOffset(x);i-=v.x,s-=v.y}}(l.x!=i||l.y!=s)&&((l=l.clone()).x=i,l.y=s,a.setGeometry(e,l))}return d},mxGraphLayout.prototype.getVertexBounds=function(e){var i=this.graph.getModel().getGeometry(e);if(this.useBoundingBox){var s=this.graph.getView().getState(e);if(null!=s&&null!=s.text&&null!=s.text.boundingBox){var a=this.graph.getView().scale,l=s.text.boundingBox,d=Math.max(s.x-l.x,0)/a,c=Math.max(s.y-l.y,0)/a,f=Math.max(l.x+l.width-(s.x+s.width),0)/a,m=Math.max(l.y+l.height-(s.y+s.height),0)/a;i=new mxRectangle(i.x-d,i.y-c,i.width+d+f,i.height+c+m)}}if(null!=this.parent){var x=this.graph.getModel().getParent(e);if(i=i.clone(),null!=x&&x!=this.parent){var v=this.getParentOffset(x);i.x=i.x+v.x,i.y=i.y+v.y}}return new mxRectangle(i.x,i.y,i.width,i.height)},mxGraphLayout.prototype.arrangeGroups=function(e,i,s,a,l,d){return this.graph.updateGroupBounds(e,i,!0,s,a,l,d)},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(e,i){return null!=e&&null!=i?i.weightedValue>e.weightedValue?-1:i.weightedValue<e.weightedValue?1:i.nudge?-1:1:0},__mxOutput.mxGraphLayout=void 0!==mxGraphLayout?mxGraphLayout:void 0,mxStackLayout.prototype=new mxGraphLayout,mxStackLayout.prototype.constructor=mxStackLayout,mxStackLayout.prototype.horizontal=null,mxStackLayout.prototype.spacing=null,mxStackLayout.prototype.x0=null,mxStackLayout.prototype.y0=null,mxStackLayout.prototype.border=0,mxStackLayout.prototype.marginTop=0,mxStackLayout.prototype.marginLeft=0,mxStackLayout.prototype.marginRight=0,mxStackLayout.prototype.marginBottom=0,mxStackLayout.prototype.keepFirstLocation=!1,mxStackLayout.prototype.fill=!1,mxStackLayout.prototype.resizeParent=!1,mxStackLayout.prototype.resizeParentMax=!1,mxStackLayout.prototype.resizeLast=!1,mxStackLayout.prototype.wrap=null,mxStackLayout.prototype.borderCollapse=!0,mxStackLayout.prototype.allowGaps=!1,mxStackLayout.prototype.gridSize=0,mxStackLayout.prototype.isHorizontal=function(){return this.horizontal},mxStackLayout.prototype.moveCell=function(e,i,s){var a=this.graph.getModel(),l=a.getParent(e),d=this.isHorizontal();if(null!=e&&null!=l){var c=0,f=0,m=a.getChildCount(l),x=d?i:s,v=this.graph.getView().getState(l);for(null!=v&&(x-=d?v.x:v.y),x/=this.graph.view.scale,c=0;c<m;c++){var E=a.getChildAt(l,c);if(E!=e){var S=a.getGeometry(E);if(null!=S){var b=d?S.x+S.width/2:S.y+S.height/2;if(f<=x&&b>x)break;f=b}}}var T=l.getIndex(e);T=Math.max(0,c-(c>T?1:0)),a.add(l,e,T)}},mxStackLayout.prototype.getParentSize=function(e){var i=this.graph.getModel(),s=i.getGeometry(e);return null!=this.graph.container&&(null==s&&i.isLayer(e)||e==this.graph.getView().currentRoot)&&(s=new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1)),s},mxStackLayout.prototype.getLayoutCells=function(e){for(var i=this.graph.getModel(),s=i.getChildCount(e),a=[],l=0;l<s;l++){var d=i.getChildAt(e,l);!this.isVertexIgnored(d)&&this.isVertexMovable(d)&&a.push(d)}return this.allowGaps&&a.sort(mxUtils.bind(this,function(c,f){var m=this.graph.getCellGeometry(c),x=this.graph.getCellGeometry(f);return this.horizontal?m.x==x.x?0:m.x>x.x>0?1:-1:m.y==x.y?0:m.y>x.y>0?1:-1})),a},mxStackLayout.prototype.snap=function(e){if(null!=this.gridSize&&this.gridSize>0&&(e=Math.max(e,this.gridSize))/this.gridSize>1){var i=e%this.gridSize;e+=i>this.gridSize/2?this.gridSize-i:-i}return e},mxStackLayout.prototype.execute=function(e){if(null!=e){var i=this.getParentSize(e),s=this.isHorizontal(),a=this.graph.getModel(),l=null;null!=i&&(l=s?i.height-this.marginTop-this.marginBottom:i.width-this.marginLeft-this.marginRight),l-=2*this.border;var d=this.x0+this.border+this.marginLeft,c=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(e)){var f=this.graph.getCellStyle(e),m=mxUtils.getNumber(f,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),x=1==mxUtils.getValue(f,mxConstants.STYLE_HORIZONTAL,!0);null!=i&&(m=x?Math.min(m,i.height):Math.min(m,i.width)),s==x&&(l-=m),x?c+=m:d+=m}a.beginUpdate();try{for(var v=0,E=null,S=0,b=null,T=this.getLayoutCells(e),D=0;D<T.length;D++){var I=T[D],O=a.getGeometry(I);if(null!=O){O=O.clone(),null!=this.wrap&&null!=E&&(s&&E.x+E.width+O.width+2*this.spacing>this.wrap||!s&&E.y+E.height+O.height+2*this.spacing>this.wrap)&&(E=null,s?c+=v+this.spacing:d+=v+this.spacing,v=0),v=Math.max(v,s?O.height:O.width);var N=0;if(!this.borderCollapse){var k=this.graph.getCellStyle(I);N=mxUtils.getNumber(k,mxConstants.STYLE_STROKEWIDTH,1)}if(null!=E){var P=S+this.spacing+Math.floor(N/2);s?O.x=this.snap((this.allowGaps?Math.max(P,O.x):P)-this.marginLeft)+this.marginLeft:O.y=this.snap((this.allowGaps?Math.max(P,O.y):P)-this.marginTop)+this.marginTop}else this.keepFirstLocation||(s?O.x=this.allowGaps&&O.x>d?Math.max(this.snap(O.x-this.marginLeft)+this.marginLeft,d):d:O.y=this.allowGaps&&O.y>c?Math.max(this.snap(O.y-this.marginTop)+this.marginTop,c):c);s?O.y=c:O.x=d,this.fill&&null!=l&&(s?O.height=l:O.width=l),s?O.width=this.snap(O.width):O.height=this.snap(O.height),this.setChildGeometry(I,O),b=I,E=O,S=s?E.x+E.width+Math.floor(N/2):E.y+E.height+Math.floor(N/2)}}this.resizeParent&&null!=i&&null!=E&&!this.graph.isCellCollapsed(e)?this.updateParentGeometry(e,i,E):this.resizeLast&&null!=i&&null!=E&&null!=b&&(s?E.width=i.width-E.x-this.spacing-this.marginRight-this.marginLeft:E.height=i.height-E.y-this.spacing-this.marginBottom,this.setChildGeometry(b,E))}finally{a.endUpdate()}}},mxStackLayout.prototype.setChildGeometry=function(e,i){var s=this.graph.getCellGeometry(e);(null==s||i.x!=s.x||i.y!=s.y||i.width!=s.width||i.height!=s.height)&&this.graph.getModel().setGeometry(e,i)},mxStackLayout.prototype.updateParentGeometry=function(e,i,s){var a=this.isHorizontal(),l=this.graph.getModel(),d=i.clone();if(a){var c=s.x+s.width+this.marginRight+this.border;d.width=this.resizeParentMax?Math.max(d.width,c):c}else c=s.y+s.height+this.marginBottom+this.border,d.height=this.resizeParentMax?Math.max(d.height,c):c;(i.x!=d.x||i.y!=d.y||i.width!=d.width||i.height!=d.height)&&l.setGeometry(e,d)},__mxOutput.mxStackLayout=void 0!==mxStackLayout?mxStackLayout:void 0,mxPartitionLayout.prototype=new mxGraphLayout,mxPartitionLayout.prototype.constructor=mxPartitionLayout,mxPartitionLayout.prototype.horizontal=null,mxPartitionLayout.prototype.spacing=null,mxPartitionLayout.prototype.border=null,mxPartitionLayout.prototype.resizeVertices=!0,mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal},mxPartitionLayout.prototype.moveCell=function(e,i,s){var a=this.graph.getModel(),l=a.getParent(e);if(null!=e&&null!=l){var d=0,c=0,f=a.getChildCount(l);for(d=0;d<f;d++){var m=a.getChildAt(l,d),x=this.getVertexBounds(m);if(null!=x){var v=x.x+x.width/2;if(c<i&&v>i)break;c=v}}var E=l.getIndex(e);E=Math.max(0,d-(d>E?1:0)),a.add(l,e,E)}},mxPartitionLayout.prototype.execute=function(e){var i=this.isHorizontal(),s=this.graph.getModel(),a=s.getGeometry(e);if(null!=this.graph.container&&(null==a&&s.isLayer(e)||e==this.graph.getView().currentRoot)&&(a=new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1)),null!=a){for(var c=[],f=s.getChildCount(e),m=0;m<f;m++){var x=s.getChildAt(e,m);!this.isVertexIgnored(x)&&this.isVertexMovable(x)&&c.push(x)}var v=c.length;if(v>0){var E=this.border,S=this.border,b=i?a.height:a.width;b-=2*this.border;var T=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle;b-=i?T.height:T.width,E+=T.width,S+=T.height;var D=this.border+(v-1)*this.spacing,I=i?(a.width-E-D)/v:(a.height-S-D)/v;if(I>0){s.beginUpdate();try{for(m=0;m<v;m++){var O=s.getGeometry(x=c[m]);null!=O&&((O=O.clone()).x=E,O.y=S,i?(this.resizeVertices&&(O.width=I,O.height=b),E+=I+this.spacing):(this.resizeVertices&&(O.height=I,O.width=b),S+=I+this.spacing),s.setGeometry(x,O))}}finally{s.endUpdate()}}}}},__mxOutput.mxPartitionLayout=void 0!==mxPartitionLayout?mxPartitionLayout:void 0,mxCompactTreeLayout.prototype=new mxGraphLayout,mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout,mxCompactTreeLayout.prototype.horizontal=null,mxCompactTreeLayout.prototype.invert=null,mxCompactTreeLayout.prototype.resizeParent=!0,mxCompactTreeLayout.prototype.maintainParentLocation=!1,mxCompactTreeLayout.prototype.groupPadding=10,mxCompactTreeLayout.prototype.groupPaddingTop=0,mxCompactTreeLayout.prototype.groupPaddingRight=0,mxCompactTreeLayout.prototype.groupPaddingBottom=0,mxCompactTreeLayout.prototype.groupPaddingLeft=0,mxCompactTreeLayout.prototype.parentsChanged=null,mxCompactTreeLayout.prototype.moveTree=!1,mxCompactTreeLayout.prototype.visited=null,mxCompactTreeLayout.prototype.levelDistance=10,mxCompactTreeLayout.prototype.nodeDistance=20,mxCompactTreeLayout.prototype.resetEdges=!0,mxCompactTreeLayout.prototype.prefHozEdgeSep=5,mxCompactTreeLayout.prototype.prefVertEdgeOff=4,mxCompactTreeLayout.prototype.minEdgeJetty=8,mxCompactTreeLayout.prototype.channelBuffer=4,mxCompactTreeLayout.prototype.edgeRouting=!0,mxCompactTreeLayout.prototype.sortEdges=!1,mxCompactTreeLayout.prototype.alignRanks=!1,mxCompactTreeLayout.prototype.maxRankHeight=null,mxCompactTreeLayout.prototype.root=null,mxCompactTreeLayout.prototype.node=null,mxCompactTreeLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal},mxCompactTreeLayout.prototype.execute=function(e,i){this.parent=e;var s=this.graph.getModel();if(null==i)if(this.graph.getEdges(e,s.getParent(e),this.invert,!this.invert,!1).length>0)this.root=e;else{var a=this.graph.findTreeRoots(e,!0,this.invert);if(a.length>0)for(var l=0;l<a.length;l++)if(!this.isVertexIgnored(a[l])&&this.graph.getEdges(a[l],null,this.invert,!this.invert,!1).length>0){this.root=a[l];break}}else this.root=i;if(null!=this.root){this.parentsChanged=this.resizeParent?new Object:null,this.parentX=null,this.parentY=null,e!=this.root&&null!=s.isVertex(e)&&this.maintainParentLocation&&null!=(d=this.graph.getCellGeometry(e))&&(this.parentX=d.x,this.parentY=d.y),s.beginUpdate();try{if(this.visited=new Object,this.node=this.dfs(this.root,e),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),null!=this.node){this.layout(this.node);var c=this.graph.gridSize,f=c;if(!this.moveTree){var m=this.getVertexBounds(this.root);null!=m&&(c=m.x,f=m.y)}var d,x;if(null!=(x=this.isHorizontal()?this.horizontalLayout(this.node,c,f):this.verticalLayout(this.node,null,c,f))){var v=0,E=0;x.x<0&&(v=Math.abs(c-x.x)),x.y<0&&(E=Math.abs(f-x.y)),(0!=v||0!=E)&&this.moveNode(this.node,v,E),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)}null!=this.parentX&&null!=this.parentY&&null!=(d=this.graph.getCellGeometry(e))&&((d=d.clone()).x=this.parentX,d.y=this.parentY,s.setGeometry(e,d))}}finally{s.endUpdate()}}},mxCompactTreeLayout.prototype.moveNode=function(e,i,s){e.x+=i,e.y+=s,this.apply(e);for(var a=e.child;null!=a;)this.moveNode(a,i,s),a=a.next},mxCompactTreeLayout.prototype.sortOutgoingEdges=function(e,i){var s=new mxDictionary;i.sort(function(a,l){var d=a.getTerminal(a.getTerminal(!1)==e),c=s.get(d);null==c&&(c=mxCellPath.create(d).split(mxCellPath.PATH_SEPARATOR),s.put(d,c));var f=l.getTerminal(l.getTerminal(!1)==e),m=s.get(f);return null==m&&(m=mxCellPath.create(f).split(mxCellPath.PATH_SEPARATOR),s.put(f,m)),mxCellPath.compare(c,m)})},mxCompactTreeLayout.prototype.findRankHeights=function(e,i){(null==this.maxRankHeight[i]||this.maxRankHeight[i]<e.height)&&(this.maxRankHeight[i]=e.height);for(var s=e.child;null!=s;)this.findRankHeights(s,i+1),s=s.next},mxCompactTreeLayout.prototype.setCellHeights=function(e,i){null!=this.maxRankHeight[i]&&this.maxRankHeight[i]>e.height&&(e.height=this.maxRankHeight[i]);for(var s=e.child;null!=s;)this.setCellHeights(s,i+1),s=s.next},mxCompactTreeLayout.prototype.dfs=function(e,i){var s=mxCellPath.create(e),a=null;if(null!=e&&null==this.visited[s]&&!this.isVertexIgnored(e)){this.visited[s]=e,a=this.createNode(e);var l=this.graph.getModel(),d=null,c=this.graph.getEdges(e,i,this.invert,!this.invert,!1,!0),f=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(e,c);for(var m=0;m<c.length;m++){var x=c[m];if(!this.isEdgeIgnored(x)){this.resetEdges&&this.setEdgePoints(x,null),this.edgeRouting&&(this.setEdgeStyleEnabled(x,!1),this.setEdgePoints(x,null));var v=f.getState(x),E=null!=v?v.getVisibleTerminal(this.invert):f.getVisibleTerminal(x,this.invert),S=this.dfs(E,i);null!=S&&null!=l.getGeometry(E)&&(null==d?a.child=S:d.next=S,d=S)}}}return a},mxCompactTreeLayout.prototype.layout=function(e){if(null!=e){for(var i=e.child;null!=i;)this.layout(i),i=i.next;null!=e.child?this.attachParent(e,this.join(e)):this.layoutLeaf(e)}},mxCompactTreeLayout.prototype.horizontalLayout=function(e,i,s,a){e.x+=i+e.offsetX,e.y+=s+e.offsetY,a=this.apply(e,a);var l=e.child;if(null!=l){a=this.horizontalLayout(l,e.x,e.y,a);for(var d=e.y+l.offsetY,c=l.next;null!=c;)a=this.horizontalLayout(c,e.x+l.offsetX,d,a),d+=c.offsetY,c=c.next}return a},mxCompactTreeLayout.prototype.verticalLayout=function(e,i,s,a,l){e.x+=s+e.offsetY,e.y+=a+e.offsetX,l=this.apply(e,l);var d=e.child;if(null!=d){l=this.verticalLayout(d,e,e.x,e.y,l);for(var c=e.x+d.offsetY,f=d.next;null!=f;)l=this.verticalLayout(f,e,c,e.y+d.offsetX,l),c+=f.offsetY,f=f.next}return l},mxCompactTreeLayout.prototype.attachParent=function(e,i){var s=this.nodeDistance+this.levelDistance,a=(i-e.width)/2-this.nodeDistance,l=a+e.width+2*this.nodeDistance-i;e.child.offsetX=s+e.height,e.child.offsetY=l,e.contour.upperHead=this.createLine(e.height,0,this.createLine(s,l,e.contour.upperHead)),e.contour.lowerHead=this.createLine(e.height,0,this.createLine(s,a,e.contour.lowerHead))},mxCompactTreeLayout.prototype.layoutLeaf=function(e){var i=2*this.nodeDistance;e.contour.upperTail=this.createLine(e.height+i,0),e.contour.upperHead=e.contour.upperTail,e.contour.lowerTail=this.createLine(0,-e.width-i),e.contour.lowerHead=this.createLine(e.height+i,0,e.contour.lowerTail)},mxCompactTreeLayout.prototype.join=function(e){var i=2*this.nodeDistance,s=e.child;e.contour=s.contour;var a=s.width+i,l=a;for(s=s.next;null!=s;){var d=this.merge(e.contour,s.contour);s.offsetY=d+a,s.offsetX=0,l+=d+(a=s.width+i),s=s.next}return l},mxCompactTreeLayout.prototype.merge=function(e,i){for(var s=0,a=0,l=0,d=e.lowerHead,c=i.upperHead;null!=c&&null!=d;){var f=this.offset(s,a,c.dx,c.dy,d.dx,d.dy);a+=f,l+=f,s+c.dx<=d.dx?(s+=c.dx,a+=c.dy,c=c.next):(s-=d.dx,a-=d.dy,d=d.next)}if(null!=c){var m=this.bridge(e.upperTail,0,0,c,s,a);e.upperTail=null!=m.next?i.upperTail:m,e.lowerTail=i.lowerTail}else null==(m=this.bridge(i.lowerTail,s,a,d,0,0)).next&&(e.lowerTail=m);return e.lowerHead=i.lowerHead,l},mxCompactTreeLayout.prototype.offset=function(e,i,s,a,l,d){var c=0;return l<=e||e+s<=0?0:(c=l*a-s*d>0?e<0?e*a/s-i:e>0?e*d/l-i:-i:l<e+s?d-(i+(l-e)*a/s):l>e+s?(s+e)*d/l-(i+a):d-(i+a))>0?c:0},mxCompactTreeLayout.prototype.bridge=function(e,i,s,a,l,d){var f,c=l+a.dx-i,x=this.createLine(c,f=0==a.dx?a.dy:c*a.dy/a.dx,a.next);return e.next=this.createLine(0,d+a.dy-f-s,x),x},mxCompactTreeLayout.prototype.createNode=function(e){var i=new Object;i.cell=e,i.x=0,i.y=0,i.width=0,i.height=0;var s=this.getVertexBounds(e);return null!=s&&(this.isHorizontal()?(i.width=s.height,i.height=s.width):(i.width=s.width,i.height=s.height)),i.offsetX=0,i.offsetY=0,i.contour=new Object,i},mxCompactTreeLayout.prototype.apply=function(e,i){var s=this.graph.getModel(),a=e.cell,l=s.getGeometry(a);if(null!=a&&null!=l){if(this.isVertexMovable(a)&&(l=this.setVertexLocation(a,e.x,e.y),this.resizeParent)){var d=s.getParent(a),c=mxCellPath.create(d);null==this.parentsChanged[c]&&(this.parentsChanged[c]=d)}i=null==i?new mxRectangle(l.x,l.y,l.width,l.height):new mxRectangle(Math.min(i.x,l.x),Math.min(i.y,l.y),Math.max(i.x+i.width,l.x+l.width),Math.max(i.y+i.height,l.y+l.height))}return i},mxCompactTreeLayout.prototype.createLine=function(e,i,s){var a=new Object;return a.dx=e,a.dy=i,a.next=s,a},mxCompactTreeLayout.prototype.adjustParents=function(){var e=[];for(var i in this.parentsChanged)e.push(this.parentsChanged[i]);this.arrangeGroups(mxUtils.sortCells(e,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)},mxCompactTreeLayout.prototype.localEdgeProcessing=function(e){this.processNodeOutgoing(e);for(var i=e.child;null!=i;)this.localEdgeProcessing(i),i=i.next},mxCompactTreeLayout.prototype.processNodeOutgoing=function(e){for(var i=e.child,s=e.cell,a=0,l=[];null!=i;){a++;var d=i.x;this.horizontal&&(d=i.y),l.push(new WeightedCellSorter(i,d)),i=i.next}l.sort(WeightedCellSorter.prototype.compare);var c=e.width,f=(a+1)*this.prefHozEdgeSep;c>f+2*this.prefHozEdgeSep&&(c-=2*this.prefHozEdgeSep);var m=c/a,x=m/2;c>f+2*this.prefHozEdgeSep&&(x+=this.prefHozEdgeSep);var v=this.minEdgeJetty-this.prefVertEdgeOff,E=0,S=this.getVertexBounds(s);i=e.child;for(var b=0;b<l.length;b++){for(var T=l[b].cell.cell,D=this.getVertexBounds(T),I=this.graph.getEdgesBetween(s,T,!1),O=[],N=0,k=0,P=0;P<I.length;P++)this.horizontal?(O.push(new mxPoint(N=S.x+S.width,k=S.y+x)),O.push(new mxPoint(N=S.x+S.width+v,k)),O.push(new mxPoint(N,k=D.y+D.height/2)),this.setEdgePoints(I[P],O)):(O.push(new mxPoint(N=S.x+x,k=S.y+S.height)),O.push(new mxPoint(N,k=S.y+S.height+v)),O.push(new mxPoint(N=D.x+D.width/2,k)),this.setEdgePoints(I[P],O));b<a/2?v+=this.prefVertEdgeOff:b>a/2&&(v-=this.prefVertEdgeOff),x+=m,E=Math.max(E,v)}},__mxOutput.mxCompactTreeLayout=void 0!==mxCompactTreeLayout?mxCompactTreeLayout:void 0,mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout),mxRadialTreeLayout.prototype.angleOffset=.5,mxRadialTreeLayout.prototype.rootx=0,mxRadialTreeLayout.prototype.rooty=0,mxRadialTreeLayout.prototype.levelDistance=120,mxRadialTreeLayout.prototype.nodeDistance=10,mxRadialTreeLayout.prototype.autoRadius=!1,mxRadialTreeLayout.prototype.sortEdges=!1,mxRadialTreeLayout.prototype.rowMinX=[],mxRadialTreeLayout.prototype.rowMaxX=[],mxRadialTreeLayout.prototype.rowMinCenX=[],mxRadialTreeLayout.prototype.rowMaxCenX=[],mxRadialTreeLayout.prototype.rowRadi=[],mxRadialTreeLayout.prototype.row=[],mxRadialTreeLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxRadialTreeLayout.prototype.execute=function(e,i){this.parent=e,this.useBoundingBox=!1,this.edgeRouting=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var s=null,a=this.getVertexBounds(this.root);for(var l in this.centerX=a.x+a.width/2,this.centerY=a.y+a.height/2,this.visited){var d=this.getVertexBounds(this.visited[l]);(s=null!=s?s:d.clone()).add(d)}this.calcRowDims([this.node],0);for(var c=0,f=0,m=0;m<this.row.length;m++){var x=(this.centerX-this.rowMinX[m]-this.nodeDistance)/this.rowRadi[m],v=(this.rowMaxX[m]-this.centerX-this.nodeDistance)/this.rowRadi[m];c=Math.max(c,x),f=Math.max(f,v)}for(m=0;m<this.row.length;m++)for(var E=this.centerX-this.nodeDistance-c*this.rowRadi[m],S=this.centerX+this.nodeDistance+f*this.rowRadi[m],b=S-E,T=0;T<this.row[m].length;T++){var O=((d=this.getVertexBounds((I=(D=this.row[m])[T]).cell)).x+d.width/2-E)/b,N=2*Math.PI*O;I.theta=N}for(m=this.row.length-2;m>=0;m--){var D=this.row[m];for(T=0;T<D.length;T++){for(var k=(I=D[T]).child,P=0,F=0;null!=k;)F+=k.theta,P++,k=k.next;if(P>0){var V=F/P;if(V>I.theta&&T<D.length-1){var Y=D[T+1].theta;I.theta=Math.min(V,Y-Math.PI/10)}else if(V<I.theta&&T>0){var j=D[T-1].theta;I.theta=Math.max(V,j+Math.PI/10)}}}}for(m=0;m<this.row.length;m++)for(T=0;T<this.row[m].length;T++){var I;d=this.getVertexBounds((I=(D=this.row[m])[T]).cell),this.setVertexLocation(I.cell,this.centerX-d.width/2+this.rowRadi[m]*Math.cos(I.theta),this.centerY-d.height/2+this.rowRadi[m]*Math.sin(I.theta))}},mxRadialTreeLayout.prototype.calcRowDims=function(e,i){if(null!=e&&0!=e.length){this.rowMinX[i]=this.centerX,this.rowMaxX[i]=this.centerX,this.rowMinCenX[i]=this.centerX,this.rowMaxCenX[i]=this.centerX,this.row[i]=[];for(var s=!1,a=0;a<e.length;a++)for(var l=null!=e[a]?e[a].child:null;null!=l;){var c=this.getVertexBounds(l.cell);this.rowMinX[i]=Math.min(c.x,this.rowMinX[i]),this.rowMaxX[i]=Math.max(c.x+c.width,this.rowMaxX[i]),this.rowMinCenX[i]=Math.min(c.x+c.width/2,this.rowMinCenX[i]),this.rowMaxCenX[i]=Math.max(c.x+c.width/2,this.rowMaxCenX[i]),this.rowRadi[i]=c.y-this.getVertexBounds(this.root).y,null!=l.child&&(s=!0),this.row[i].push(l),l=l.next}s&&this.calcRowDims(this.row[i],i+1)}},__mxOutput.mxRadialTreeLayout=void 0!==mxRadialTreeLayout?mxRadialTreeLayout:void 0,mxFastOrganicLayout.prototype=new mxGraphLayout,mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout,mxFastOrganicLayout.prototype.useInputOrigin=!0,mxFastOrganicLayout.prototype.resetEdges=!0,mxFastOrganicLayout.prototype.disableEdgeStyle=!0,mxFastOrganicLayout.prototype.forceConstant=50,mxFastOrganicLayout.prototype.forceConstantSquared=0,mxFastOrganicLayout.prototype.minDistanceLimit=2,mxFastOrganicLayout.prototype.maxDistanceLimit=500,mxFastOrganicLayout.prototype.minDistanceLimitSquared=4,mxFastOrganicLayout.prototype.initialTemp=200,mxFastOrganicLayout.prototype.temperature=0,mxFastOrganicLayout.prototype.maxIterations=0,mxFastOrganicLayout.prototype.iteration=0,mxFastOrganicLayout.prototype.allowedToRun=!0,mxFastOrganicLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxFastOrganicLayout.prototype.execute=function(e){var i=this.graph.getModel();this.vertexArray=[];for(var s=this.graph.getChildVertices(e),a=0;a<s.length;a++)this.isVertexIgnored(s[a])||this.vertexArray.push(s[a]);var l=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,d=this.vertexArray.length;for(this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant,a=0;a<this.vertexArray.length;a++){var c=this.vertexArray[a];this.cellLocation[a]=[];var f=mxObjectIdentity.get(c);this.indices[f]=a;var x=(m=this.getVertexBounds(c)).width,v=m.height,S=m.y;this.cellLocation[a][0]=(E=m.x)+x/2,this.cellLocation[a][1]=S+v/2,this.radius[a]=Math.min(x,v),this.radiusSquared[a]=this.radius[a]*this.radius[a]}i.beginUpdate();try{for(a=0;a<d;a++){this.dispX[a]=0,this.dispY[a]=0,this.isMoveable[a]=this.isVertexMovable(this.vertexArray[a]);var b=this.graph.getConnections(this.vertexArray[a],e);s=this.graph.getOpposites(b,this.vertexArray[a]),this.neighbours[a]=[];for(var T=0;T<s.length;T++){this.resetEdges&&this.graph.resetEdge(b[T]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(b[T],!1),f=mxObjectIdentity.get(s[T]);var D=this.indices[f];this.neighbours[a][T]=null!=D?D:a}}for(this.temperature=this.initialTemp,0==this.maxIterations&&(this.maxIterations=20*Math.sqrt(d)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}var I=null,O=null;for(a=0;a<this.vertexArray.length;a++){var m;if(this.isVertexMovable(c=this.vertexArray[a])&&null!=(m=this.getVertexBounds(c))){this.cellLocation[a][0]-=m.width/2,this.cellLocation[a][1]-=m.height/2;var E=this.graph.snap(Math.round(this.cellLocation[a][0]));S=this.graph.snap(Math.round(this.cellLocation[a][1])),this.setVertexLocation(c,E,S),I=null==I?E:Math.min(I,E),O=null==O?S:Math.min(O,S)}}var N=1-(I||0),k=1-(O||0);null!=l&&(N+=l.x,k+=l.y),this.graph.moveCells(this.vertexArray,N,k)}finally{i.endUpdate()}},mxFastOrganicLayout.prototype.calcPositions=function(){for(var e=0;e<this.vertexArray.length;e++)if(this.isMoveable[e]){var i=Math.sqrt(this.dispX[e]*this.dispX[e]+this.dispY[e]*this.dispY[e]);i<.001&&(i=.001);var s=this.dispX[e]/i*Math.min(i,this.temperature),a=this.dispY[e]/i*Math.min(i,this.temperature);this.dispX[e]=0,this.dispY[e]=0,this.cellLocation[e][0]+=s,this.cellLocation[e][1]+=a}},mxFastOrganicLayout.prototype.calcAttraction=function(){for(var e=0;e<this.vertexArray.length;e++)for(var i=0;i<this.neighbours[e].length;i++){var s=this.neighbours[e][i];if(e!=s&&this.isMoveable[e]&&this.isMoveable[s]){var a=this.cellLocation[e][0]-this.cellLocation[s][0],l=this.cellLocation[e][1]-this.cellLocation[s][1],d=a*a+l*l-this.radiusSquared[e]-this.radiusSquared[s];d<this.minDistanceLimitSquared&&(d=this.minDistanceLimitSquared);var c=Math.sqrt(d),f=d/this.forceConstant,m=a/c*f,x=l/c*f;this.dispX[e]-=m,this.dispY[e]-=x,this.dispX[s]+=m,this.dispY[s]+=x}}},mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var e=this.vertexArray.length,i=0;i<e;i++)for(var s=i;s<e;s++){if(!this.allowedToRun)return;if(s!=i&&this.isMoveable[i]&&this.isMoveable[s]){var a=this.cellLocation[i][0]-this.cellLocation[s][0],l=this.cellLocation[i][1]-this.cellLocation[s][1];0==a&&(a=.01+Math.random()),0==l&&(l=.01+Math.random());var d=Math.sqrt(a*a+l*l),c=d-this.radius[i]-this.radius[s];if(c>this.maxDistanceLimit)continue;c<this.minDistanceLimit&&(c=this.minDistanceLimit);var f=this.forceConstantSquared/c,m=a/d*f,x=l/d*f;this.dispX[i]+=m,this.dispY[i]+=x,this.dispX[s]-=m,this.dispY[s]-=x}}},mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)},__mxOutput.mxFastOrganicLayout=void 0!==mxFastOrganicLayout?mxFastOrganicLayout:void 0,mxCircleLayout.prototype=new mxGraphLayout,mxCircleLayout.prototype.constructor=mxCircleLayout,mxCircleLayout.prototype.radius=null,mxCircleLayout.prototype.moveCircle=!1,mxCircleLayout.prototype.x0=0,mxCircleLayout.prototype.y0=0,mxCircleLayout.prototype.resetEdges=!0,mxCircleLayout.prototype.disableEdgeStyle=!0,mxCircleLayout.prototype.execute=function(e){var i=this.graph.getModel();i.beginUpdate();try{for(var s=0,a=null,l=null,d=[],c=i.getChildCount(e),f=0;f<c;f++){var m=i.getChildAt(e,f);if(this.isVertexIgnored(m))this.isEdgeIgnored(m)||(this.resetEdges&&this.graph.resetEdge(m),this.disableEdgeStyle&&this.setEdgeStyleEnabled(m,!1));else{d.push(m);var x=this.getVertexBounds(m);a=null==a?x.y:Math.min(a,x.y),l=null==l?x.x:Math.min(l,x.x),s=Math.max(s,Math.max(x.width,x.height))}}var v=this.getRadius(d.length,s);this.moveCircle&&(l=this.x0,a=this.y0),this.circle(d,v,l,a)}finally{i.endUpdate()}},mxCircleLayout.prototype.getRadius=function(e,i){return Math.max(e*i/Math.PI,this.radius)},mxCircleLayout.prototype.circle=function(e,i,s,a){for(var l=e.length,d=2*Math.PI/l,c=0;c<l;c++)this.isVertexMovable(e[c])&&this.setVertexLocation(e[c],Math.round(s+i+i*Math.sin(c*d)),Math.round(a+i+i*Math.cos(c*d)))},__mxOutput.mxCircleLayout=void 0!==mxCircleLayout?mxCircleLayout:void 0,mxParallelEdgeLayout.prototype=new mxGraphLayout,mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout,mxParallelEdgeLayout.prototype.spacing=20,mxParallelEdgeLayout.prototype.checkOverlap=!1,mxParallelEdgeLayout.prototype.execute=function(e,i){var s=this.findParallels(e,i);this.graph.model.beginUpdate();try{for(var a in s){var l=s[a];l.length>1&&this.layout(l)}}finally{this.graph.model.endUpdate()}},mxParallelEdgeLayout.prototype.findParallels=function(e,i){var s=[],a=mxUtils.bind(this,function(f){if(!this.isEdgeIgnored(f)){var m=this.getEdgeId(f);null!=m&&(null==s[m]&&(s[m]=[]),s[m].push(f))}});if(null!=i)for(var l=0;l<i.length;l++)a(i[l]);else{var d=this.graph.getModel(),c=d.getChildCount(e);for(l=0;l<c;l++)a(d.getChildAt(e,l))}return s},mxParallelEdgeLayout.prototype.getEdgeId=function(e){var i=this.graph.getView(),s=i.getVisibleTerminal(e,!0),a=i.getVisibleTerminal(e,!1),l="";if(null!=s&&null!=a){if(s=mxObjectIdentity.get(s),a=mxObjectIdentity.get(a),this.checkOverlap){var d=this.graph.view.getState(e);if(null!=d&&null!=d.absolutePoints){for(var c=[],f=0;f<d.absolutePoints.length;f++){var m=d.absolutePoints[f];null!=m&&c.push(m.x,m.y)}l=c.join(",")}}return(s>a?a+"-"+s:s+"-"+a)+l}return null},mxParallelEdgeLayout.prototype.layout=function(e){var i=e[0],s=this.graph.getView(),a=this.graph.getModel(),l=a.getGeometry(s.getVisibleTerminal(i,!0)),d=a.getGeometry(s.getVisibleTerminal(i,!1));if(l==d)for(var c=l.x+l.width+this.spacing,f=l.y+l.height/2,m=0;m<e.length;m++)this.route(e[m],c,f),c+=this.spacing;else if(null!=l&&null!=d){var x=l.x+l.width/2,v=l.y+l.height/2,b=d.x+d.width/2-x,T=d.y+d.height/2-v,D=Math.sqrt(b*b+T*T);if(D>0){c=x+b/2,f=v+T/2;var I=T*this.spacing/D,O=b*this.spacing/D;for(c+=I*(e.length-1)/2,f-=O*(e.length-1)/2,m=0;m<e.length;m++)this.route(e[m],c,f),c-=I,f+=O}}},mxParallelEdgeLayout.prototype.route=function(e,i,s){this.graph.isCellMovable(e)&&this.setEdgePoints(e,[new mxPoint(i,s)])},__mxOutput.mxParallelEdgeLayout=void 0!==mxParallelEdgeLayout?mxParallelEdgeLayout:void 0,mxCompositeLayout.prototype=new mxGraphLayout,mxCompositeLayout.prototype.constructor=mxCompositeLayout,mxCompositeLayout.prototype.layouts=null,mxCompositeLayout.prototype.master=null,mxCompositeLayout.prototype.moveCell=function(e,i,s){null!=this.master?this.master.moveCell.apply(this.master,arguments):this.layouts[0].moveCell.apply(this.layouts[0],arguments)},mxCompositeLayout.prototype.execute=function(e){var i=this.graph.getModel();i.beginUpdate();try{for(var s=0;s<this.layouts.length;s++)this.layouts[s].execute.apply(this.layouts[s],arguments)}finally{i.endUpdate()}},__mxOutput.mxCompositeLayout=void 0!==mxCompositeLayout?mxCompositeLayout:void 0,mxEdgeLabelLayout.prototype=new mxGraphLayout,mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout,mxEdgeLabelLayout.prototype.execute=function(e){for(var i=this.graph.view,s=this.graph.getModel(),a=[],l=[],d=s.getChildCount(e),c=0;c<d;c++){var f=s.getChildAt(e,c),m=i.getState(f);null!=m&&(this.isVertexIgnored(f)?this.isEdgeIgnored(f)||a.push(m):l.push(m))}this.placeLabels(l,a)},mxEdgeLabelLayout.prototype.placeLabels=function(e,i){var s=this.graph.getModel();s.beginUpdate();try{for(var a=0;a<i.length;a++){var l=i[a];if(null!=l&&null!=l.text&&null!=l.text.boundingBox)for(var d=0;d<e.length;d++){var c=e[d];null!=c&&this.avoid(l,c)}}}finally{s.endUpdate()}},mxEdgeLabelLayout.prototype.avoid=function(e,i){var s=this.graph.getModel(),a=e.text.boundingBox;if(mxUtils.intersects(a,i)){var l=-a.y-a.height+i.y,d=-a.y+i.y+i.height,c=Math.abs(l)<Math.abs(d)?l:d,f=-a.x-a.width+i.x,m=-a.x+i.x+i.width,x=Math.abs(f)<Math.abs(m)?f:m;Math.abs(x)<Math.abs(c)?c=0:x=0;var v=s.getGeometry(e.cell);null!=v&&(null!=(v=v.clone()).offset?(v.offset.x+=x,v.offset.y+=c):v.offset=new mxPoint(x,c),s.setGeometry(e.cell,v))}},__mxOutput.mxEdgeLabelLayout=void 0!==mxEdgeLabelLayout?mxEdgeLabelLayout:void 0,mxGraphAbstractHierarchyCell.prototype.maxRank=-1,mxGraphAbstractHierarchyCell.prototype.minRank=-1,mxGraphAbstractHierarchyCell.prototype.x=null,mxGraphAbstractHierarchyCell.prototype.y=null,mxGraphAbstractHierarchyCell.prototype.width=0,mxGraphAbstractHierarchyCell.prototype.height=0,mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.temp=null,mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(e){return null},mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(e){return null},mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1},mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1},mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(e){return null},mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(e,i){return null},mxGraphAbstractHierarchyCell.prototype.setX=function(e,i){this.isVertex()?this.x[0]=i:this.isEdge()&&(this.x[e-this.minRank-1]=i)},mxGraphAbstractHierarchyCell.prototype.getX=function(e){return this.isVertex()?this.x[0]:this.isEdge()?this.x[e-this.minRank-1]:0},mxGraphAbstractHierarchyCell.prototype.setY=function(e,i){this.isVertex()?this.y[0]=i:this.isEdge()&&(this.y[e-this.minRank-1]=i)},__mxOutput.mxGraphAbstractHierarchyCell=void 0!==mxGraphAbstractHierarchyCell?mxGraphAbstractHierarchyCell:void 0,mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode,mxGraphHierarchyNode.prototype.cell=null,mxGraphHierarchyNode.prototype.id=null,mxGraphHierarchyNode.prototype.connectsAsTarget=null,mxGraphHierarchyNode.prototype.connectsAsSource=null,mxGraphHierarchyNode.prototype.hashCode=!1,mxGraphHierarchyNode.prototype.getRankValue=function(e){return this.maxRank},mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(e){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var i=0;i<this.connectsAsTarget.length;i++){var s=this.connectsAsTarget[i];this.nextLayerConnectedCells[0].push(-1==s.maxRank||s.maxRank==e+1?s.source:s)}}return this.nextLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(e){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var i=0;i<this.connectsAsSource.length;i++){var s=this.connectsAsSource[i];this.previousLayerConnectedCells[0].push(-1==s.minRank||s.minRank==e-1?s.target:s)}}return this.previousLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.isVertex=function(){return!0},mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(e){return this.temp[0]},mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(e,i){this.temp[0]=i},mxGraphHierarchyNode.prototype.isAncestor=function(e){if(null!=e&&null!=this.hashCode&&null!=e.hashCode&&this.hashCode.length<e.hashCode.length){if(this.hashCode==e.hashCode)return!0;if(null==this.hashCode||null==this.hashCode)return!1;for(var i=0;i<this.hashCode.length;i++)if(this.hashCode[i]!=e.hashCode[i])return!1;return!0}return!1},mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell},__mxOutput.mxGraphHierarchyNode=void 0!==mxGraphHierarchyNode?mxGraphHierarchyNode:void 0,mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge,mxGraphHierarchyEdge.prototype.edges=null,mxGraphHierarchyEdge.prototype.ids=null,mxGraphHierarchyEdge.prototype.source=null,mxGraphHierarchyEdge.prototype.target=null,mxGraphHierarchyEdge.prototype.isReversed=!1,mxGraphHierarchyEdge.prototype.invert=function(e){var i=this.source;this.source=this.target,this.target=i,this.isReversed=!this.isReversed},mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(e){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[];for(var i=0;i<this.temp.length;i++)this.nextLayerConnectedCells[i]=[],this.nextLayerConnectedCells[i].push(i==this.temp.length-1?this.source:this)}return this.nextLayerConnectedCells[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(e){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[];for(var i=0;i<this.temp.length;i++)this.previousLayerConnectedCells[i]=[],this.previousLayerConnectedCells[i].push(0==i?this.target:this)}return this.previousLayerConnectedCells[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.isEdge=function(){return!0},mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(e){return this.temp[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(e,i){this.temp[e-this.minRank-1]=i},mxGraphHierarchyEdge.prototype.getCoreCell=function(){return null!=this.edges&&this.edges.length>0?this.edges[0]:null},__mxOutput.mxGraphHierarchyEdge=void 0!==mxGraphHierarchyEdge?mxGraphHierarchyEdge:void 0,mxGraphHierarchyModel.prototype.maxRank=null,mxGraphHierarchyModel.prototype.vertexMapper=null,mxGraphHierarchyModel.prototype.edgeMapper=null,mxGraphHierarchyModel.prototype.ranks=null,mxGraphHierarchyModel.prototype.roots=null,mxGraphHierarchyModel.prototype.parent=null,mxGraphHierarchyModel.prototype.dfsCount=0,mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxGraphHierarchyModel.prototype.createInternalCells=function(e,i,s){for(var a=e.getGraph(),l=0;l<i.length;l++){s[l]=new mxGraphHierarchyNode(i[l]),this.vertexMapper.put(i[l],s[l]);var d=e.getEdges(i[l]);s[l].connectsAsSource=[];for(var c=0;c<d.length;c++){var f=e.getVisibleTerminal(d[c],!1);if(f!=i[l]&&e.graph.model.isVertex(f)&&!e.isVertexIgnored(f)){var m=e.getEdgesBetween(i[l],f,!1),x=e.getEdgesBetween(i[l],f,!0);if(null!=m&&m.length>0&&null==this.edgeMapper.get(m[0])&&2*x.length>=m.length){for(var v=new mxGraphHierarchyEdge(m),E=0;E<m.length;E++){var S=m[E];this.edgeMapper.put(S,v),a.resetEdge(S),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(S,!1),e.setOrthogonalEdge(S,!0))}v.source=s[l],mxUtils.indexOf(s[l].connectsAsSource,v)<0&&s[l].connectsAsSource.push(v)}}}s[l].temp[0]=0}},mxGraphHierarchyModel.prototype.initialRank=function(){var e=[];if(null!=this.roots)for(var i=0;i<this.roots.length;i++)null!=(s=this.vertexMapper.get(this.roots[i]))&&e.push(s);var a=this.vertexMapper.getValues();for(i=0;i<a.length;i++)a[i].temp[0]=-1;for(var l=e.slice();e.length>0;){var c;d=(s=e[0]).connectsAsTarget,c=s.connectsAsSource;var f=!0,m=this.SOURCESCANSTARTRANK;for(i=0;i<d.length;i++){if(5270620!=(x=d[i]).temp[0]){f=!1;break}var v=x.source;m=Math.min(m,v.temp[0]-1)}if(f){if(s.temp[0]=m,this.maxRank=Math.min(this.maxRank,m),null!=c)for(i=0;i<c.length;i++)(x=c[i]).temp[0]=5270620,-1==(v=x.target).temp[0]&&(e.push(v),v.temp[0]=-2);e.shift()}else{var E=e.shift();if(e.push(s),E==s&&1==e.length)break}}for(i=0;i<a.length;i++)a[i].temp[0]-=this.maxRank;for(i=0;i<l.length;i++)for(var s,S=0,d=(s=l[i]).connectsAsSource,b=0;b<d.length;b++){var x;v=(x=d[b]).target,s.temp[0]=Math.max(S,v.temp[0]+1),S=s.temp[0]}this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank},mxGraphHierarchyModel.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var i=0;i<this.maxRank+1;i++)e[i]=[],this.ranks[i]=e[i];var s=null;if(null!=this.roots){var a=this.roots;for(s=[],i=0;i<a.length;i++){var d=this.vertexMapper.get(a[i]);s[i]=d}}this.visit(function(c,f,m,x,v){if(0==v&&f.maxRank<0&&f.minRank<0&&(e[f.temp[0]].push(f),f.maxRank=f.temp[0],f.minRank=f.temp[0],f.temp[0]=e[f.maxRank].length-1),null!=c&&null!=m&&c.maxRank-f.maxRank>1){m.maxRank=c.maxRank,m.minRank=f.maxRank,m.temp=[],m.x=[],m.y=[];for(var S=m.minRank+1;S<m.maxRank;S++)e[S].push(m),m.setGeneralPurposeVariable(S,e[S].length-1)}},s,!1,null)},mxGraphHierarchyModel.prototype.visit=function(e,i,s,a){if(null!=i){for(var l=0;l<i.length;l++){var d=i[l];null!=d&&(null==a&&(a=new Object),s?(d.hashCode=[],d.hashCode[0]=this.dfsCount,d.hashCode[1]=l,this.extendedDfs(null,d,null,e,a,d.hashCode,l,0)):this.dfs(null,d,null,e,a,0))}this.dfsCount++}},mxGraphHierarchyModel.prototype.dfs=function(e,i,s,a,l,d){if(null!=i){var c=i.id;if(null==l[c]){l[c]=i,a(e,i,s,d,0);for(var f=i.connectsAsSource.slice(),m=0;m<f.length;m++){var x=f[m];this.dfs(i,x.target,x,a,l,d+1)}}else a(e,i,s,d,1)}},mxGraphHierarchyModel.prototype.extendedDfs=function(e,i,s,a,l,d,c,f){if(null!=i){if(null!=e&&(null==i.hashCode||i.hashCode[0]!=e.hashCode[0])){var m=e.hashCode.length+1;i.hashCode=e.hashCode.slice(),i.hashCode[m-1]=c}var x=i.id;if(null==l[x]){l[x]=i,a(e,i,s,f,0);for(var v=i.connectsAsSource.slice(),E=0;E<v.length;E++){var S=v[E];this.extendedDfs(i,S.target,S,a,l,i.hashCode,E,f+1)}}else a(e,i,s,f,1)}},__mxOutput.mxGraphHierarchyModel=void 0!==mxGraphHierarchyModel?mxGraphHierarchyModel:void 0,mxSwimlaneModel.prototype.maxRank=null,mxSwimlaneModel.prototype.vertexMapper=null,mxSwimlaneModel.prototype.edgeMapper=null,mxSwimlaneModel.prototype.ranks=null,mxSwimlaneModel.prototype.roots=null,mxSwimlaneModel.prototype.parent=null,mxSwimlaneModel.prototype.dfsCount=0,mxSwimlaneModel.prototype.SOURCESCANSTARTRANK=1e8,mxSwimlaneModel.prototype.tightenToSource=!1,mxSwimlaneModel.prototype.ranksPerGroup=null,mxSwimlaneModel.prototype.createInternalCells=function(e,i,s){for(var a=e.getGraph(),l=e.swimlanes,d=0;d<i.length;d++){s[d]=new mxGraphHierarchyNode(i[d]),this.vertexMapper.put(i[d],s[d]),s[d].swimlaneIndex=-1;for(var c=0;c<l.length;c++)if(a.model.getParent(i[d])==l[c]){s[d].swimlaneIndex=c;break}var f=e.getEdges(i[d]);s[d].connectsAsSource=[];for(var m=0;m<f.length;m++){var x=e.getVisibleTerminal(f[m],!1);if(x!=i[d]&&e.graph.model.isVertex(x)&&!e.isVertexIgnored(x)){var v=e.getEdgesBetween(i[d],x,!1),E=e.getEdgesBetween(i[d],x,!0);if(null!=v&&v.length>0&&null==this.edgeMapper.get(v[0])&&2*E.length>=v.length){for(var S=new mxGraphHierarchyEdge(v),b=0;b<v.length;b++){var T=v[b];this.edgeMapper.put(T,S),a.resetEdge(T),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(T,!1),e.setOrthogonalEdge(T,!0))}S.source=s[d],mxUtils.indexOf(s[d].connectsAsSource,S)<0&&s[d].connectsAsSource.push(S)}}}s[d].temp[0]=0}},mxSwimlaneModel.prototype.initialRank=function(){this.ranksPerGroup=[];var e=[],i=new Object;if(null!=this.roots)for(var s=0;s<this.roots.length;s++){var a=this.vertexMapper.get(this.roots[s]);this.maxChainDfs(null,a,null,i,0),null!=a&&e.push(a)}var l=[],d=[];for(s=this.ranksPerGroup.length-1;s>=0;s--)l[s]=s==this.ranksPerGroup.length-1?0:d[s+1]+1,d[s]=l[s]+this.ranksPerGroup[s];this.maxRank=d[0];var c=this.vertexMapper.getValues();for(s=0;s<c.length;s++)c[s].temp[0]=-1;for(e.slice();e.length>0;){var m,x;m=(a=e[0]).connectsAsTarget,x=a.connectsAsSource;var v=!0,E=d[0];for(s=0;s<m.length;s++){if(5270620!=(S=m[s]).temp[0]){v=!1;break}var b=S.source;E=Math.min(E,b.temp[0]-1)}if(v){if(E>d[a.swimlaneIndex]&&(E=d[a.swimlaneIndex]),a.temp[0]=E,null!=x)for(s=0;s<x.length;s++){var S;(S=x[s]).temp[0]=5270620,-1==(b=S.target).temp[0]&&(e.push(b),b.temp[0]=-2)}e.shift()}else{var T=e.shift();if(e.push(a),T==a&&1==e.length)break}}},mxSwimlaneModel.prototype.maxChainDfs=function(e,i,s,a,l){if(null!=i){var d=mxCellPath.create(i.cell);if(null==a[d]){a[d]=i;var c=i.swimlaneIndex;(null==this.ranksPerGroup[c]||this.ranksPerGroup[c]<l)&&(this.ranksPerGroup[c]=l);for(var f=i.connectsAsSource.slice(),m=0;m<f.length;m++){var x=f[m],v=x.target;i.swimlaneIndex<v.swimlaneIndex?this.maxChainDfs(i,v,x,mxUtils.clone(a,null,!0),0):i.swimlaneIndex==v.swimlaneIndex&&this.maxChainDfs(i,v,x,mxUtils.clone(a,null,!0),l+1)}}}},mxSwimlaneModel.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var i=0;i<this.maxRank+1;i++)e[i]=[],this.ranks[i]=e[i];var s=null;if(null!=this.roots){var a=this.roots;for(s=[],i=0;i<a.length;i++){var d=this.vertexMapper.get(a[i]);s[i]=d}}this.visit(function(c,f,m,x,v){if(0==v&&f.maxRank<0&&f.minRank<0&&(e[f.temp[0]].push(f),f.maxRank=f.temp[0],f.minRank=f.temp[0],f.temp[0]=e[f.maxRank].length-1),null!=c&&null!=m&&c.maxRank-f.maxRank>1){m.maxRank=c.maxRank,m.minRank=f.maxRank,m.temp=[],m.x=[],m.y=[];for(var S=m.minRank+1;S<m.maxRank;S++)e[S].push(m),m.setGeneralPurposeVariable(S,e[S].length-1)}},s,!1,null)},mxSwimlaneModel.prototype.visit=function(e,i,s,a){if(null!=i){for(var l=0;l<i.length;l++){var d=i[l];null!=d&&(null==a&&(a=new Object),s?(d.hashCode=[],d.hashCode[0]=this.dfsCount,d.hashCode[1]=l,this.extendedDfs(null,d,null,e,a,d.hashCode,l,0)):this.dfs(null,d,null,e,a,0))}this.dfsCount++}},mxSwimlaneModel.prototype.dfs=function(e,i,s,a,l,d){if(null!=i){var c=i.id;if(null==l[c]){l[c]=i,a(e,i,s,d,0);for(var f=i.connectsAsSource.slice(),m=0;m<f.length;m++){var x=f[m];this.dfs(i,x.target,x,a,l,d+1)}}else a(e,i,s,d,1)}},mxSwimlaneModel.prototype.extendedDfs=function(e,i,s,a,l,d,c,f){if(null!=i){if(null!=e&&(null==i.hashCode||i.hashCode[0]!=e.hashCode[0])){var m=e.hashCode.length+1;i.hashCode=e.hashCode.slice(),i.hashCode[m-1]=c}var x=i.id;if(null==l[x]){l[x]=i,a(e,i,s,f,0);for(var v=i.connectsAsSource.slice(),E=i.connectsAsTarget.slice(),S=0;S<v.length;S++)i.swimlaneIndex<=(T=(b=v[S]).target).swimlaneIndex&&this.extendedDfs(i,T,b,a,l,i.hashCode,S,f+1);for(S=0;S<E.length;S++){var b,T;i.swimlaneIndex<(T=(b=E[S]).source).swimlaneIndex&&this.extendedDfs(i,T,b,a,l,i.hashCode,S,f+1)}}else a(e,i,s,f,1)}},__mxOutput.mxSwimlaneModel=void 0!==mxSwimlaneModel?mxSwimlaneModel:void 0,mxHierarchicalLayoutStage.prototype.execute=function(e){},__mxOutput.mxHierarchicalLayoutStage=void 0!==mxHierarchicalLayoutStage?mxHierarchicalLayoutStage:void 0,mxMedianHybridCrossingReduction.prototype=new mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype.constructor=mxMedianHybridCrossingReduction,mxMedianHybridCrossingReduction.prototype.layout=null,mxMedianHybridCrossingReduction.prototype.maxIterations=24,mxMedianHybridCrossingReduction.prototype.nestedBestRanks=null,mxMedianHybridCrossingReduction.prototype.currentBestCrossings=0,mxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement=0,mxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations=2,mxMedianHybridCrossingReduction.prototype.execute=function(e){var i=this.layout.getModel();this.nestedBestRanks=[];for(var s=0;s<i.ranks.length;s++)this.nestedBestRanks[s]=i.ranks[s].slice();var a=0,l=this.calculateCrossings(i);for(s=0;s<this.maxIterations&&a<this.maxNoImprovementIterations;s++){this.weightedMedian(s,i),this.transpose(s,i);var d=this.calculateCrossings(i);if(d<l){l=d,a=0;for(var c=0;c<this.nestedBestRanks.length;c++)for(var f=i.ranks[c],m=0;m<f.length;m++)this.nestedBestRanks[c][(x=f[m]).getGeneralPurposeVariable(c)]=x}else for(a++,c=0;c<this.nestedBestRanks.length;c++)for(f=i.ranks[c],m=0;m<f.length;m++){var x;(x=f[m]).setGeneralPurposeVariable(c,m)}if(0==l)break}var v=[],E=[];for(s=0;s<i.maxRank+1;s++)E[s]=[],v[s]=E[s];for(s=0;s<this.nestedBestRanks.length;s++)for(c=0;c<this.nestedBestRanks[s].length;c++)E[s].push(this.nestedBestRanks[s][c]);i.ranks=v},mxMedianHybridCrossingReduction.prototype.calculateCrossings=function(e){for(var i=e.ranks.length,s=0,a=1;a<i;a++)s+=this.calculateRankCrossing(a,e);return s},mxMedianHybridCrossingReduction.prototype.calculateRankCrossing=function(e,i){for(var s=0,a=i.ranks[e],l=i.ranks[e-1],d=[],c=0;c<a.length;c++){for(var f=a[c],m=f.getGeneralPurposeVariable(e),x=f.getPreviousLayerConnectedCells(e),v=[],E=0;E<x.length;E++){var b=x[E].getGeneralPurposeVariable(e-1);v.push(b)}v.sort(function(P,F){return P-F}),d[m]=v}var T=[];for(c=0;c<d.length;c++)T=T.concat(d[c]);for(var D=1;D<l.length;)D<<=1;var I=2*D-1;D-=1;var O=[];for(c=0;c<I;++c)O[c]=0;for(c=0;c<T.length;c++){var k=T[c]+D;for(++O[k];k>0;)k%2&&(s+=O[k+1]),++O[k=k-1>>1]}return s},mxMedianHybridCrossingReduction.prototype.transpose=function(e,i){for(var s=!0,a=0;s&&a++<10;){var d=e%2==1&&a%2==1;s=!1;for(var c=0;c<i.ranks.length;c++){for(var f=i.ranks[c],m=[],x=0;x<f.length;x++){var v=f[x],E=v.getGeneralPurposeVariable(c);E<0&&(E=x),m[E]=v}var S=null,b=null,T=null,D=null,I=null,O=null,N=null,k=null,P=null,F=null;for(x=0;x<f.length-1;x++){if(0==x){S=(P=m[x]).getNextLayerConnectedCells(c),b=P.getPreviousLayerConnectedCells(c),I=[],O=[];for(var V=0;V<S.length;V++)I[V]=S[V].getGeneralPurposeVariable(c+1);for(V=0;V<b.length;V++)O[V]=b[V].getGeneralPurposeVariable(c-1)}else S=T,b=D,I=N,O=k,P=F;for(T=(F=m[x+1]).getNextLayerConnectedCells(c),D=F.getPreviousLayerConnectedCells(c),N=[],k=[],V=0;V<T.length;V++)N[V]=T[V].getGeneralPurposeVariable(c+1);for(V=0;V<D.length;V++)k[V]=D[V].getGeneralPurposeVariable(c-1);var Y=0,j=0;for(V=0;V<I.length;V++)for(var X=0;X<N.length;X++)I[V]>N[X]&&Y++,I[V]<N[X]&&j++;for(V=0;V<O.length;V++)for(X=0;X<k.length;X++)O[V]>k[X]&&Y++,O[V]<k[X]&&j++;if(j<Y||j==Y&&d){var Z=P.getGeneralPurposeVariable(c);P.setGeneralPurposeVariable(c,F.getGeneralPurposeVariable(c)),F.setGeneralPurposeVariable(c,Z),T=S,D=b,N=I,k=O,F=P,d||(s=!0)}}}}},mxMedianHybridCrossingReduction.prototype.weightedMedian=function(e,i){var s=e%2==0;if(s)for(var a=i.maxRank-1;a>=0;a--)this.medianRank(a,s);else for(a=1;a<i.maxRank;a++)this.medianRank(a,s)},mxMedianHybridCrossingReduction.prototype.medianRank=function(e,i){for(var s=this.nestedBestRanks[e].length,a=[],l=[],d=0;d<s;d++){var m,x,c=this.nestedBestRanks[e][d],f=new MedianCellSorter;f.cell=c,x=i?e+1:e-1,null!=(m=i?c.getNextLayerConnectedCells(e):c.getPreviousLayerConnectedCells(e))&&0!=m.length?(f.medianValue=this.medianValue(m,x),a.push(f)):l[c.getGeneralPurposeVariable(e)]=!0}for(a.sort(MedianCellSorter.prototype.compare),d=0;d<s;d++)null==l[d]&&(c=a.shift().cell).setGeneralPurposeVariable(e,d)},mxMedianHybridCrossingReduction.prototype.medianValue=function(e,i){for(var s=[],a=0,l=0;l<e.length;l++)s[a++]=e[l].getGeneralPurposeVariable(i);if(s.sort(function(x,v){return x-v}),a%2==1)return s[Math.floor(a/2)];if(2==a)return(s[0]+s[1])/2;var c=a/2,f=s[c-1]-s[0],m=s[a-1]-s[c];return(s[c-1]*m+s[c]*f)/(f+m)},MedianCellSorter.prototype.medianValue=0,MedianCellSorter.prototype.cell=!1,MedianCellSorter.prototype.compare=function(e,i){return null!=e&&null!=i?i.medianValue>e.medianValue?-1:i.medianValue<e.medianValue?1:0:0},__mxOutput.mxMedianHybridCrossingReduction=void 0!==mxMedianHybridCrossingReduction?mxMedianHybridCrossingReduction:void 0,mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage,mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover,mxMinimumCycleRemover.prototype.layout=null,mxMinimumCycleRemover.prototype.execute=function(e){for(var i=this.layout.getModel(),s=new Object,a=i.vertexMapper.getValues(),l=new Object,d=0;d<a.length;d++)l[a[d].id]=a[d];var c=null;if(null!=i.roots){var f=i.roots;for(c=[],d=0;d<f.length;d++)c[d]=i.vertexMapper.get(f[d])}i.visit(function(x,v,E,S,b){v.isAncestor(x)&&(E.invert(),mxUtils.remove(E,x.connectsAsSource),x.connectsAsTarget.push(E),mxUtils.remove(E,v.connectsAsTarget),v.connectsAsSource.push(E)),s[v.id]=v,delete l[v.id]},c,!0,null);var m=mxUtils.clone(s,null,!0);i.visit(function(x,v,E,S,b){v.isAncestor(x)&&(E.invert(),mxUtils.remove(E,x.connectsAsSource),v.connectsAsSource.push(E),x.connectsAsTarget.push(E),mxUtils.remove(E,v.connectsAsTarget)),s[v.id]=v,delete l[v.id]},l,!0,m)},__mxOutput.mxMinimumCycleRemover=void 0!==mxMinimumCycleRemover?mxMinimumCycleRemover:void 0,mxCoordinateAssignment.prototype=new mxHierarchicalLayoutStage,mxCoordinateAssignment.prototype.constructor=mxCoordinateAssignment,mxCoordinateAssignment.prototype.layout=null,mxCoordinateAssignment.prototype.intraCellSpacing=30,mxCoordinateAssignment.prototype.interRankCellSpacing=100,mxCoordinateAssignment.prototype.parallelEdgeSpacing=10,mxCoordinateAssignment.prototype.maxIterations=8,mxCoordinateAssignment.prototype.prefHozEdgeSep=5,mxCoordinateAssignment.prototype.prefVertEdgeOff=2,mxCoordinateAssignment.prototype.minEdgeJetty=12,mxCoordinateAssignment.prototype.channelBuffer=4,mxCoordinateAssignment.prototype.jettyPositions=null,mxCoordinateAssignment.prototype.orientation=mxConstants.DIRECTION_NORTH,mxCoordinateAssignment.prototype.initialX=null,mxCoordinateAssignment.prototype.limitX=null,mxCoordinateAssignment.prototype.currentXDelta=null,mxCoordinateAssignment.prototype.widestRank=null,mxCoordinateAssignment.prototype.rankTopY=null,mxCoordinateAssignment.prototype.rankBottomY=null,mxCoordinateAssignment.prototype.widestRankValue=null,mxCoordinateAssignment.prototype.rankWidths=null,mxCoordinateAssignment.prototype.rankY=null,mxCoordinateAssignment.prototype.fineTuning=!0,mxCoordinateAssignment.prototype.nextLayerConnectedCache=null,mxCoordinateAssignment.prototype.previousLayerConnectedCache=null,mxCoordinateAssignment.prototype.groupPadding=10,mxCoordinateAssignment.prototype.printStatus=function(){var e=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var i=0;i<e.ranks.length;i++){mxLog.write("Rank ",i," : ");for(var s=e.ranks[i],a=0;a<s.length;a++)mxLog.write(s[a].getGeneralPurposeVariable(i),"  ");mxLog.writeln()}mxLog.writeln("====================================")},mxCoordinateAssignment.prototype.execute=function(e){this.jettyPositions=Object();var i=this.layout.getModel();this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),i),this.fineTuning&&this.minNode(i);var s=1e8;if(this.fineTuning)for(var a=0;a<this.maxIterations;a++){if(0!=a&&(this.medianPos(a,i),this.minNode(i)),this.currentXDelta<s){for(var l=0;l<i.ranks.length;l++)for(var d=i.ranks[l],c=0;c<d.length;c++)(f=d[c]).setX(l,f.getGeneralPurposeVariable(l));s=this.currentXDelta}else for(l=0;l<i.ranks.length;l++)for(d=i.ranks[l],c=0;c<d.length;c++){var f;(f=d[c]).setGeneralPurposeVariable(l,f.getX(l))}this.minPath(this.layout.getGraph(),i),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),i)},mxCoordinateAssignment.prototype.minNode=function(e){for(var i=[],s=new mxDictionary,a=[],l=0;l<=e.maxRank;l++){a[l]=e.ranks[l];for(var d=0;d<a[l].length;d++){var c=a[l][d],f=new WeightedCellSorter(c,l);f.rankIndex=d,f.visited=!0,i.push(f),s.put(c,f)}}for(var m=10*i.length,x=0;i.length>0&&x<=m;){var E=i.shift(),S=E.cell,b=E.weightedValue,T=parseInt(E.rankIndex),D=S.getNextLayerConnectedCells(b),I=S.getPreviousLayerConnectedCells(b),O=D.length,N=I.length,k=this.medianXValue(D,b+1),P=this.medianXValue(I,b-1),F=O+N,V=S.getGeneralPurposeVariable(b),Y=V;F>0&&(Y=(k*O+P*N)/F);var j=!1;if(Y<V-1)if(0==T)S.setGeneralPurposeVariable(b,Y),j=!0;else{var X=a[b][T-1],Z=X.getGeneralPurposeVariable(b);(Z=Z+X.width/2+this.intraCellSpacing+S.width/2)<Y?(S.setGeneralPurposeVariable(b,Y),j=!0):Z<S.getGeneralPurposeVariable(b)-1&&(S.setGeneralPurposeVariable(b,Z),j=!0)}else if(Y>V+1)if(T==a[b].length-1)S.setGeneralPurposeVariable(b,Y),j=!0;else{var ee=a[b][T+1],K=ee.getGeneralPurposeVariable(b);(K=K-ee.width/2-this.intraCellSpacing-S.width/2)>Y?(S.setGeneralPurposeVariable(b,Y),j=!0):K>S.getGeneralPurposeVariable(b)+1&&(S.setGeneralPurposeVariable(b,K),j=!0)}if(j){for(l=0;l<D.length;l++)null!=(B=s.get(D[l]))&&0==B.visited&&(B.visited=!0,i.push(B));for(l=0;l<I.length;l++){var B;null!=(B=s.get(I[l]))&&0==B.visited&&(B.visited=!0,i.push(B))}}E.visited=!1,x++}},mxCoordinateAssignment.prototype.medianPos=function(e,i){if(e%2==0)for(var a=i.maxRank;a>0;a--)this.rankMedianPosition(a-1,i,a);else for(a=0;a<i.maxRank-1;a++)this.rankMedianPosition(a+1,i,a)},mxCoordinateAssignment.prototype.rankMedianPosition=function(e,i,s){for(var a=i.ranks[e],l=[],d=new Object,c=0;c<a.length;c++){var f=a[c];l[c]=new WeightedCellSorter,l[c].cell=f,l[c].rankIndex=c,d[f.id]=l[c];var m=null;m=s<e?f.getPreviousLayerConnectedCells(e):f.getNextLayerConnectedCells(e),l[c].weightedValue=this.calculatedWeightedValue(f,m)}for(l.sort(WeightedCellSorter.prototype.compare),c=0;c<l.length;c++){var v=l[c].cell,E=(m=null,0);null!=(m=s<e?v.getPreviousLayerConnectedCells(e).slice():v.getNextLayerConnectedCells(e).slice())&&(E=m.length>0?this.medianXValue(m,s):v.getGeneralPurposeVariable(e));for(var S=0,b=-1e8,T=l[c].rankIndex-1;T>=0;)if(null!=(D=d[a[T].id])){var I=D.cell;D.visited?(b=I.getGeneralPurposeVariable(e)+I.width/2+this.intraCellSpacing+S+v.width/2,T=-1):(S+=I.width+this.intraCellSpacing,T--)}var O=0,N=1e8;for(T=l[c].rankIndex+1;T<l.length;){var D;if(null!=(D=d[a[T].id])){var k=D.cell;D.visited?(N=k.getGeneralPurposeVariable(e)-k.width/2-this.intraCellSpacing-O-v.width/2,T=l.length):(O+=k.width+this.intraCellSpacing,T++)}}E>=b&&E<=N?v.setGeneralPurposeVariable(e,E):E<b?(v.setGeneralPurposeVariable(e,b),this.currentXDelta+=b-E):E>N&&(v.setGeneralPurposeVariable(e,N),this.currentXDelta+=E-N),l[c].visited=!0}},mxCoordinateAssignment.prototype.calculatedWeightedValue=function(e,i){for(var s=0,a=0;a<i.length;a++){var l=i[a];e.isVertex()&&l.isVertex()?s++:e.isEdge()&&l.isEdge()?s+=8:s+=2}return s},mxCoordinateAssignment.prototype.medianXValue=function(e,i){if(0==e.length)return 0;for(var s=[],a=0;a<e.length;a++)s[a]=e[a].getGeneralPurposeVariable(i);if(s.sort(function(f,m){return f-m}),e.length%2==1)return s[Math.floor(e.length/2)];var l=e.length/2;return(s[l-1]+s[l])/2},mxCoordinateAssignment.prototype.initialCoords=function(e,i){this.calculateWidestRank(e,i);for(var s=this.widestRank;s>=0;s--)s<i.maxRank&&this.rankCoordinates(s,e,i);for(s=this.widestRank+1;s<=i.maxRank;s++)s>0&&this.rankCoordinates(s,e,i)},mxCoordinateAssignment.prototype.rankCoordinates=function(e,i,s){for(var a=s.ranks[e],l=0,d=this.initialX+(this.widestRankValue-this.rankWidths[e])/2,c=!1,f=0;f<a.length;f++){var m=a[f];if(m.isVertex()){var x=this.layout.getVertexBounds(m.cell);null!=x?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(m.width=x.width,m.height=x.height):(m.width=x.height,m.height=x.width):c=!0,l=Math.max(l,m.height)}else if(m.isEdge()){var v=1;null!=m.edges?v=m.edges.length:mxLog.warn("edge.edges is null"),m.width=(v-1)*this.parallelEdgeSpacing}m.setX(e,d+=m.width/2),m.setGeneralPurposeVariable(e,d),d+=m.width/2,d+=this.intraCellSpacing}1==c&&mxLog.warn("At least one cell has no bounds")},mxCoordinateAssignment.prototype.calculateWidestRank=function(e,i){var s=-this.interRankCellSpacing,a=0;this.rankWidths=[],this.rankY=[];for(var l=i.maxRank;l>=0;l--){for(var d=0,c=i.ranks[l],f=this.initialX,m=!1,x=0;x<c.length;x++){var v=c[x];if(v.isVertex()){var E=this.layout.getVertexBounds(v.cell);null!=E?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(v.width=E.width,v.height=E.height):(v.width=E.height,v.height=E.width):m=!0,d=Math.max(d,v.height)}else if(v.isEdge()){var S=1;null!=v.edges?S=v.edges.length:mxLog.warn("edge.edges is null"),v.width=(S-1)*this.parallelEdgeSpacing}v.setX(l,f+=v.width/2),v.setGeneralPurposeVariable(l,f),f+=v.width/2,(f+=this.intraCellSpacing)>this.widestRankValue&&(this.widestRankValue=f,this.widestRank=l),this.rankWidths[l]=f}1==m&&mxLog.warn("At least one cell has no bounds"),this.rankY[l]=s;var b=d/2+a/2+this.interRankCellSpacing;for(a=d,this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_WEST?s+=b:s-=b,x=0;x<c.length;x++)c[x].setY(l,s)}},mxCoordinateAssignment.prototype.minPath=function(e,i){for(var s=i.edgeMapper.getValues(),a=0;a<s.length;a++){var l=s[a];if(!(l.maxRank-l.minRank-1<1)){for(var d=l.getGeneralPurposeVariable(l.minRank+1),c=!0,f=0,m=l.minRank+2;m<l.maxRank;m++){var x=l.getGeneralPurposeVariable(m);d!=x?(c=!1,d=x):f++}if(!c){var v=0,E=0,S=[],b=[],T=l.getGeneralPurposeVariable(l.minRank+1);for(m=l.minRank+1;m<l.maxRank-1;m++)T==(D=l.getX(m+1))||this.repositionValid(i,l,m+1,T)?(S[m-l.minRank-1]=T,v++):(S[m-l.minRank-1]=D,T=D);for(T=l.getX(m),m=l.maxRank-1;m>l.minRank+1;m--){var D;T==(D=l.getX(m-1))||this.repositionValid(i,l,m-1,T)?(b[m-l.minRank-2]=T,E++):(b[m-l.minRank-2]=l.getX(m-1),T=D)}if(E>f||v>f)if(E>=v)for(m=l.maxRank-2;m>l.minRank;m--)l.setX(m,b[m-l.minRank-1]);else if(v>E)for(m=l.minRank+2;m<l.maxRank;m++)l.setX(m,S[m-l.minRank-2])}}}},mxCoordinateAssignment.prototype.repositionValid=function(e,i,s,a){for(var l=e.ranks[s],d=-1,c=0;c<l.length;c++)if(i==l[c]){d=c;break}if(d<0)return!1;var f=i.getGeneralPurposeVariable(s);if(a<f){if(0==d)return!0;var m=l[d-1],x=m.getGeneralPurposeVariable(s);return(x=x+m.width/2+this.intraCellSpacing+i.width/2)<=a}if(a>f){if(d==l.length-1)return!0;var v=l[d+1],E=v.getGeneralPurposeVariable(s);return(E=E-v.width/2-this.intraCellSpacing-i.width/2)>=a}return!0},mxCoordinateAssignment.prototype.setCellLocations=function(e,i){this.rankTopY=[],this.rankBottomY=[];for(var s=0;s<i.ranks.length;s++)this.rankTopY[s]=Number.MAX_VALUE,this.rankBottomY[s]=-Number.MAX_VALUE;var a=i.vertexMapper.getValues();for(s=0;s<a.length;s++)this.setVertexLocation(a[s]);(this.layout.edgeStyle==mxHierarchicalEdgeStyle.ORTHOGONAL||this.layout.edgeStyle==mxHierarchicalEdgeStyle.POLYLINE||this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE)&&this.localEdgeProcessing(i);var l=i.edgeMapper.getValues();for(s=0;s<l.length;s++)this.setEdgePosition(l[s])},mxCoordinateAssignment.prototype.localEdgeProcessing=function(e){for(var i=0;i<e.ranks.length;i++)for(var s=e.ranks[i],a=0;a<s.length;a++){var l=s[a];if(l.isVertex())for(var d=l.getPreviousLayerConnectedCells(i),c=i-1,f=0;f<2;f++){if(c>-1&&c<e.ranks.length&&null!=d&&d.length>0){for(var m=[],x=0;x<d.length;x++){var v=new WeightedCellSorter(d[x],d[x].getX(c));m.push(v)}m.sort(WeightedCellSorter.prototype.compare);var E=l.x[0]-l.width/2,S=E+l.width,b=0,D=[];for(x=0;x<m.length;x++){var O,I=m[x].cell;if(I.isVertex()){O=0==f?l.connectsAsSource:l.connectsAsTarget;for(var N=0;N<O.length;N++)(O[N].source==I||O[N].target==I)&&(b+=O[N].edges.length,D.push(O[N]))}else b+=I.edges.length,D.push(I)}l.width>(b+1)*this.prefHozEdgeSep+2*this.prefHozEdgeSep&&(E+=this.prefHozEdgeSep,S-=this.prefHozEdgeSep);var F=(S-E)/b,V=E+F/2,Y=this.minEdgeJetty-this.prefVertEdgeOff,j=0;for(x=0;x<D.length;x++){var X=D[x].edges.length,Z=this.jettyPositions[D[x].ids[0]];null==Z&&(this.jettyPositions[D[x].ids[0]]=Z=[]),x<b/2?Y+=this.prefVertEdgeOff:x>b/2&&(Y-=this.prefVertEdgeOff);for(var Q=0;Q<X;Q++)Z[4*Q+2*f]=V,V+=F,Z[4*Q+2*f+1]=Y;j=Math.max(j,Y)}}d=l.getNextLayerConnectedCells(i),c=i+1}}},mxCoordinateAssignment.prototype.setEdgePosition=function(e){var i=0;if(101207!=e.temp[0]){var s=e.maxRank,a=e.minRank;s==a&&(s=e.source.maxRank,a=e.target.minRank);for(var l=0,d=this.jettyPositions[e.ids[0]],c=e.isReversed?e.target.cell:e.source.cell,f=this.layout.graph,m=this.orientation==mxConstants.DIRECTION_EAST||this.orientation==mxConstants.DIRECTION_SOUTH,x=0;x<e.edges.length;x++){var v=e.edges[x],E=this.layout.getVisibleTerminal(v,!0),S=[],b=e.isReversed;if(E!=c&&(b=!b),null!=d){var D=b?m?this.rankBottomY[a]:this.rankTopY[a]:m?this.rankTopY[s]:this.rankBottomY[s],I=d[4*l+1+(T=b?2:0)];b!=m&&(I=-I),D+=I;var O=d[4*l+T],N=f.model.getTerminal(v,!0);this.layout.isPort(N)&&f.model.getParent(N)==E&&(O=null!=(k=f.view.getState(N))?k.x:E.geometry.x+e.source.width*N.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(S.push(new mxPoint(O,D)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&S.push(new mxPoint(O,D+I))):(S.push(new mxPoint(D,O)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&S.push(new mxPoint(D+I,O)))}var P=e.x.length-1,F=-1,V=-1,Y=e.maxRank-1;b&&(P=0,F=e.x.length,V=1,Y=e.minRank+1);for(var j=P;e.maxRank!=e.minRank&&j!=F;j+=V){var X=e.x[j]+i,Z=(this.rankTopY[Y]+this.rankBottomY[Y+1])/2,Q=(this.rankTopY[Y-1]+this.rankBottomY[Y])/2;if(b){var ee=Z;Z=Q,Q=ee}this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(S.push(new mxPoint(X,Z)),S.push(new mxPoint(X,Q))):(S.push(new mxPoint(Z,X)),S.push(new mxPoint(Q,X))),this.limitX=Math.max(this.limitX,X),Y+=V}if(null!=d){var T;I=d[4*l+3-(T=b?2:0)],b!=m&&(I=-I),D=(b?m?this.rankTopY[s]:this.rankBottomY[s]:m?this.rankBottomY[a]:this.rankTopY[a])-I,O=d[4*l+2-T];var k,oe=f.model.getTerminal(v,!1),B=this.layout.getVisibleTerminal(v,!1);this.layout.isPort(oe)&&f.model.getParent(oe)==B&&(O=null!=(k=f.view.getState(oe))?k.x:B.geometry.x+e.target.width*oe.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&S.push(new mxPoint(O,D-I)),S.push(new mxPoint(O,D))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&S.push(new mxPoint(D-I,O)),S.push(new mxPoint(D,O)))}e.isReversed&&this.processReversedEdge(e,v),this.layout.setEdgePoints(v,S),i=0==i?this.parallelEdgeSpacing:i>0?-i:-i+this.parallelEdgeSpacing,l++}e.temp[0]=101207}},mxCoordinateAssignment.prototype.setVertexLocation=function(e){var i=e.cell,s=e.x[0]-e.width/2,a=e.y[0]-e.height/2;this.rankTopY[e.minRank]=Math.min(this.rankTopY[e.minRank],a),this.rankBottomY[e.minRank]=Math.max(this.rankBottomY[e.minRank],a+e.height),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?this.layout.setVertexLocation(i,s,a):this.layout.setVertexLocation(i,a,s),this.limitX=Math.max(this.limitX,s+e.width)},mxCoordinateAssignment.prototype.processReversedEdge=function(e,i){},__mxOutput.mxCoordinateAssignment=void 0!==mxCoordinateAssignment?mxCoordinateAssignment:void 0,mxSwimlaneOrdering.prototype=new mxHierarchicalLayoutStage,mxSwimlaneOrdering.prototype.constructor=mxSwimlaneOrdering,mxSwimlaneOrdering.prototype.layout=null,mxSwimlaneOrdering.prototype.execute=function(e){var i=this.layout.getModel(),s=new Object,a=mxUtils.clone(i.vertexMapper,null,!0),l=null;if(null!=i.roots){var d=i.roots;l=[];for(var c=0;c<d.length;c++)l[c]=i.vertexMapper.get(d[c])}i.visit(function(f,m,x,v,E){var S=null!=f&&f.swimlaneIndex==m.swimlaneIndex&&m.isAncestor(f),b=null!=f&&null!=x&&f.swimlaneIndex<m.swimlaneIndex&&x.source==m;S?(x.invert(),mxUtils.remove(x,f.connectsAsSource),m.connectsAsSource.push(x),f.connectsAsTarget.push(x),mxUtils.remove(x,m.connectsAsTarget)):b&&(x.invert(),mxUtils.remove(x,f.connectsAsTarget),m.connectsAsTarget.push(x),f.connectsAsSource.push(x),mxUtils.remove(x,m.connectsAsSource));var T=mxCellPath.create(m.cell);s[T]=m,delete a[T]},l,!0,null)},__mxOutput.mxSwimlaneOrdering=void 0!==mxSwimlaneOrdering?mxSwimlaneOrdering:void 0;var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};function mxSwimlaneLayout(e,i,s){mxGraphLayout.call(this,e),this.orientation=null!=i?i:mxConstants.DIRECTION_NORTH,this.deterministic=null==s||s}function mxGraphModel(e){this.currentEdit=this.createUndoableEdit(),null!=e?this.setRoot(e):this.clear()}function mxRootChange(e,i){this.model=e,this.root=i,this.previous=i}function mxChildChange(e,i,s,a){this.model=e,this.parent=i,this.previous=i,this.child=s,this.index=a,this.previousIndex=a}function mxTerminalChange(e,i,s,a){this.model=e,this.cell=i,this.terminal=s,this.previous=s,this.source=a}function mxValueChange(e,i,s){this.model=e,this.cell=i,this.value=s,this.previous=s}function mxStyleChange(e,i,s){this.model=e,this.cell=i,this.style=s,this.previous=s}function mxGeometryChange(e,i,s){this.model=e,this.cell=i,this.geometry=s,this.previous=s}function mxCollapseChange(e,i,s){this.model=e,this.cell=i,this.collapsed=s,this.previous=s}function mxVisibleChange(e,i,s){this.model=e,this.cell=i,this.visible=s,this.previous=s}function mxCellAttributeChange(e,i,s){this.cell=e,this.attribute=i,this.value=s,this.previous=s}function mxCell(e,i,s){this.value=e,this.setGeometry(i),this.setStyle(s),null!=this.onInit&&this.onInit()}function mxGeometry(e,i,s,a){mxRectangle.call(this,e,i,s,a)}mxHierarchicalLayout.prototype=new mxGraphLayout,mxHierarchicalLayout.prototype.constructor=mxHierarchicalLayout,mxHierarchicalLayout.prototype.roots=null,mxHierarchicalLayout.prototype.resizeParent=!1,mxHierarchicalLayout.prototype.maintainParentLocation=!1,mxHierarchicalLayout.prototype.moveParent=!1,mxHierarchicalLayout.prototype.parentBorder=0,mxHierarchicalLayout.prototype.intraCellSpacing=30,mxHierarchicalLayout.prototype.interRankCellSpacing=100,mxHierarchicalLayout.prototype.interHierarchySpacing=60,mxHierarchicalLayout.prototype.parallelEdgeSpacing=10,mxHierarchicalLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxHierarchicalLayout.prototype.fineTuning=!0,mxHierarchicalLayout.prototype.tightenToSource=!0,mxHierarchicalLayout.prototype.disableEdgeStyle=!0,mxHierarchicalLayout.prototype.traverseAncestors=!0,mxHierarchicalLayout.prototype.model=null,mxHierarchicalLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxHierarchicalLayout.prototype.getModel=function(){return this.model},mxHierarchicalLayout.prototype.execute=function(e,i){this.parent=e;var s=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,null!=i&&!(i instanceof Array)&&(i=[i]),null!=i||null!=e){if(this.parentX=null,this.parentY=null,e!=this.root&&null!=s.isVertex(e)&&this.maintainParentLocation&&null!=(a=this.graph.getCellGeometry(e))&&(this.parentX=a.x,this.parentY=a.y),null!=i){for(var l=[],d=0;d<i.length;d++)(null==e||s.isAncestor(e,i[d]))&&s.isVertex(i[d])&&l.push(i[d]);this.roots=l}s.beginUpdate();try{var a;this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(a=this.graph.getCellGeometry(e))&&((a=a.clone()).x=this.parentX,a.y=this.parentY,s.setGeometry(e,a))}finally{s.endUpdate()}}},mxHierarchicalLayout.prototype.findRoots=function(e,i){var s=[];if(null!=e&&null!=i){var a=this.graph.model,l=null,d=-1e5;for(var c in i){var f=i[c];if(a.isVertex(f)&&this.graph.isCellVisible(f)){for(var m=this.getEdges(f),x=0,v=0,E=0;E<m.length;E++)this.getVisibleTerminal(m[E],!0)==f?x++:v++;0==v&&x>0&&s.push(f);var b=x-v;b>d&&(d=b,l=f)}}0==s.length&&null!=l&&s.push(l)}return s},mxHierarchicalLayout.prototype.getEdges=function(e){var i=this.edgesCache.get(e);if(null!=i)return i;for(var s=this.graph.model,a=[],l=this.graph.isCellCollapsed(e),d=s.getChildCount(e),c=0;c<d;c++){var f=s.getChildAt(e,c);(this.isPort(f)||l||!this.graph.isCellVisible(f))&&(a=a.concat(s.getEdges(f,!0,!0)))}a=a.concat(s.getEdges(e,!0,!0));var m=[];for(c=0;c<a.length;c++){var x=this.getVisibleTerminal(a[c],!0),v=this.getVisibleTerminal(a[c],!1);(x==v||x!=v&&(v==e&&(null==this.parent||this.isAncestor(this.parent,x,this.traverseAncestors))||x==e&&(null==this.parent||this.isAncestor(this.parent,v,this.traverseAncestors))))&&m.push(a[c])}return this.edgesCache.put(e,m),m},mxHierarchicalLayout.prototype.getVisibleTerminal=function(e,i){var s=this.edgesTargetTermCache;i&&(s=this.edgeSourceTermCache);var a=s.get(e);if(null!=a)return a;var l=this.graph.view.getState(e),d=null!=l?l.getVisibleTerminal(i):this.graph.view.getVisibleTerminal(e,i);return null==d&&(d=null!=l?l.getVisibleTerminal(i):this.graph.view.getVisibleTerminal(e,i)),null!=d&&(this.isPort(d)&&(d=this.graph.model.getParent(d)),s.put(e,d)),d},mxHierarchicalLayout.prototype.run=function(e){var i=[],s=[];if(null==this.roots&&null!=e){var a=Object();this.filterDescendants(e,a),this.roots=[];var l=!0;for(var d in a)if(null!=a[d]){l=!1;break}for(;!l;){for(var c=this.findRoots(e,a),f=0;f<c.length;f++){var m=Object();i.push(m),this.traverse(c[f],!0,null,s,m,i,a)}for(f=0;f<c.length;f++)this.roots.push(c[f]);for(var d in l=!0,a)if(null!=a[d]){l=!1;break}}}else for(f=0;f<this.roots.length;f++)m=Object(),i.push(m),this.traverse(this.roots[f],!0,null,s,m,i,null);var x=0;for(f=0;f<i.length;f++){m=i[f];var v=[];for(var d in m)v.push(m[d]);this.model=new mxGraphHierarchyModel(this,v,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),x=this.placementStage(x,e)}},mxHierarchicalLayout.prototype.filterDescendants=function(e,i){var s=this.graph.model;if(s.isVertex(e)&&e!=this.parent&&this.graph.isCellVisible(e)&&(i[mxObjectIdentity.get(e)]=e),this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var a=s.getChildCount(e),l=0;l<a;l++){var d=s.getChildAt(e,l);this.isPort(d)||this.filterDescendants(d,i)}},mxHierarchicalLayout.prototype.isPort=function(e){return null!=e&&null!=e.geometry&&e.geometry.relative},mxHierarchicalLayout.prototype.getEdgesBetween=function(e,i,s){s=null!=s&&s;for(var a=this.getEdges(e),l=[],d=0;d<a.length;d++){var c=this.getVisibleTerminal(a[d],!0),f=this.getVisibleTerminal(a[d],!1);(c==e&&f==i||!s&&c==i&&f==e)&&l.push(a[d])}return l},mxHierarchicalLayout.prototype.traverse=function(e,i,s,a,l,d,c){if(null!=e&&null!=a){var f=mxObjectIdentity.get(e);if(null!=a[f]||null!=c&&null==c[f]){if(null==l[f])for(v=0;v<d.length;v++){var I=d[v];if(null!=I[f]){for(var O in I)l[O]=I[O];return d.splice(v,1),l}}}else{null==l[f]&&(l[f]=e),null==a[f]&&(a[f]=e),null!==c&&delete c[f];for(var m=this.getEdges(e),x=[],v=0;v<m.length;v++)x[v]=this.getVisibleTerminal(m[v],!0)==e;for(v=0;v<m.length;v++)if(!i||x[v]){for(var E=this.getVisibleTerminal(m[v],!x[v]),S=1,b=0;b<m.length;b++)if(b!=v){var T=x[b];this.getVisibleTerminal(m[b],!T)==E&&(T?S++:S--)}S>=0&&(l=this.traverse(E,i,m[v],a,l,d,c))}}}return l},mxHierarchicalLayout.prototype.cycleStage=function(e){new mxMinimumCycleRemover(this).execute(e)},mxHierarchicalLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxHierarchicalLayout.prototype.crossingStage=function(e){new mxMedianHybridCrossingReduction(this).execute(e)},mxHierarchicalLayout.prototype.placementStage=function(e,i){var s=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return s.fineTuning=this.fineTuning,s.execute(i),s.limitX+this.interHierarchySpacing},__mxOutput.mxHierarchicalLayout=void 0!==mxHierarchicalLayout?mxHierarchicalLayout:void 0,mxSwimlaneLayout.prototype=new mxGraphLayout,mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout,mxSwimlaneLayout.prototype.roots=null,mxSwimlaneLayout.prototype.swimlanes=null,mxSwimlaneLayout.prototype.dummyVertexWidth=50,mxSwimlaneLayout.prototype.resizeParent=!1,mxSwimlaneLayout.prototype.maintainParentLocation=!1,mxSwimlaneLayout.prototype.moveParent=!1,mxSwimlaneLayout.prototype.parentBorder=30,mxSwimlaneLayout.prototype.intraCellSpacing=30,mxSwimlaneLayout.prototype.interRankCellSpacing=100,mxSwimlaneLayout.prototype.interHierarchySpacing=60,mxSwimlaneLayout.prototype.parallelEdgeSpacing=10,mxSwimlaneLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxSwimlaneLayout.prototype.fineTuning=!0,mxSwimlaneLayout.prototype.tightenToSource=!0,mxSwimlaneLayout.prototype.disableEdgeStyle=!0,mxSwimlaneLayout.prototype.traverseAncestors=!0,mxSwimlaneLayout.prototype.model=null,mxSwimlaneLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxSwimlaneLayout.prototype.getModel=function(){return this.model},mxSwimlaneLayout.prototype.execute=function(e,i){this.parent=e;var s=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,!(null==i||i.length<1)){null==e&&(e=s.getParent(i[0])),this.parentX=null,this.parentY=null,e!=this.root&&null!=s.isVertex(e)&&this.maintainParentLocation&&null!=(a=this.graph.getCellGeometry(e))&&(this.parentX=a.x,this.parentY=a.y),this.swimlanes=i;for(var l=[],d=0;d<i.length;d++){var c=this.graph.getChildCells(i[d]);if(null==c||0==c.length){var f=this.graph.insertVertex(i[d],null,null,0,0,this.dummyVertexWidth,0);l.push(f)}}s.beginUpdate();try{var a;this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(a=this.graph.getCellGeometry(e))&&((a=a.clone()).x=this.parentX,a.y=this.parentY,s.setGeometry(e,a)),this.graph.removeCells(l)}finally{s.endUpdate()}}},mxSwimlaneLayout.prototype.updateGroupBounds=function(){var e=[],i=this.model;for(var s in i.edgeMapper)for(var a=i.edgeMapper[s],l=0;l<a.edges.length;l++)e.push(a.edges[l]);var d=this.graph.getBoundingBoxFromGeometry(e,!0),c=[];for(l=0;l<this.swimlanes.length;l++)if(null!=(m=this.graph.getCellGeometry(f=this.swimlanes[l]))){var x=this.graph.getChildCells(f),v=this.graph.isSwimlane(f)?this.graph.getStartSize(f):new mxRectangle,E=this.graph.getBoundingBoxFromGeometry(x);c[l]=E;var S=E.y+m.y-v.height-this.parentBorder,b=E.y+m.y+E.height;if(null==d)d=new mxRectangle(0,S,0,b-S);else{d.y=Math.min(d.y,S);var T=Math.max(d.y+d.height,b);d.height=T-d.y}}for(l=0;l<this.swimlanes.length;l++){var f,m;if(null!=(m=this.graph.getCellGeometry(f=this.swimlanes[l]))){x=this.graph.getChildCells(f),v=this.graph.isSwimlane(f)?this.graph.getStartSize(f):new mxRectangle;var D=m.clone(),O=v.width+(0==l?this.parentBorder:this.interRankCellSpacing/2),N=c[l].x-O,k=d.y-this.parentBorder;D.x+=N,D.y=k,D.width=c[l].width+O+this.interRankCellSpacing/2,D.height=d.height+v.height+2*this.parentBorder,this.graph.model.setGeometry(f,D),this.graph.moveCells(x,-N,m.y-k)}}},mxSwimlaneLayout.prototype.findRoots=function(e,i){var s=[];if(null!=e&&null!=i){var a=this.graph.model,l=null,d=-1e5;for(var c in i){var f=i[c];if(null!=f&&a.isVertex(f)&&this.graph.isCellVisible(f)&&a.isAncestor(e,f)){for(var m=this.getEdges(f),x=0,v=0,E=0;E<m.length;E++){var S=this.getVisibleTerminal(m[E],!0);if(S==f){var b=this.getVisibleTerminal(m[E],!1);a.isAncestor(e,b)&&x++}else a.isAncestor(e,S)&&v++}0==v&&x>0&&s.push(f);var T=x-v;T>d&&(d=T,l=f)}}0==s.length&&null!=l&&s.push(l)}return s},mxSwimlaneLayout.prototype.getEdges=function(e){var i=this.edgesCache.get(e);if(null!=i)return i;for(var s=this.graph.model,a=[],l=this.graph.isCellCollapsed(e),d=s.getChildCount(e),c=0;c<d;c++){var f=s.getChildAt(e,c);(this.isPort(f)||l||!this.graph.isCellVisible(f))&&(a=a.concat(s.getEdges(f,!0,!0)))}a=a.concat(s.getEdges(e,!0,!0));var m=[];for(c=0;c<a.length;c++){var x=this.getVisibleTerminal(a[c],!0),v=this.getVisibleTerminal(a[c],!1);(x==v||x!=v&&(v==e&&(null==this.parent||this.graph.isValidAncestor(x,this.parent,this.traverseAncestors))||x==e&&(null==this.parent||this.graph.isValidAncestor(v,this.parent,this.traverseAncestors))))&&m.push(a[c])}return this.edgesCache.put(e,m),m},mxSwimlaneLayout.prototype.getVisibleTerminal=function(e,i){var s=this.edgesTargetTermCache;i&&(s=this.edgeSourceTermCache);var a=s.get(e);if(null!=a)return a;var l=this.graph.view.getState(e),d=null!=l?l.getVisibleTerminal(i):this.graph.view.getVisibleTerminal(e,i);return null==d&&(d=null!=l?l.getVisibleTerminal(i):this.graph.view.getVisibleTerminal(e,i)),null!=d&&(this.isPort(d)&&(d=this.graph.model.getParent(d)),s.put(e,d)),d},mxSwimlaneLayout.prototype.run=function(e){var i=[],s=Object();if(null!=this.swimlanes&&this.swimlanes.length>0&&null!=e){for(var a=Object(),l=0;l<this.swimlanes.length;l++)this.filterDescendants(this.swimlanes[l],a);this.roots=[];var d=!0;for(var c in a)if(null!=a[c]){d=!1;break}for(var f=0;!d&&f<this.swimlanes.length;){var m=this.findRoots(this.swimlanes[f],a);if(0!=m.length){for(l=0;l<m.length;l++){var x=Object();i.push(x),this.traverse(m[l],!0,null,s,x,i,a,f)}for(l=0;l<m.length;l++)this.roots.push(m[l]);for(var c in d=!0,a)if(null!=a[c]){d=!1;break}}else f++}}else for(l=0;l<this.roots.length;l++)x=Object(),i.push(x),this.traverse(this.roots[l],!0,null,s,x,i,null);var v=[];for(var c in s)v.push(s[c]);this.model=new mxSwimlaneModel(this,v,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),this.placementStage(0,e)},mxSwimlaneLayout.prototype.filterDescendants=function(e,i){var s=this.graph.model;if(s.isVertex(e)&&e!=this.parent&&s.getParent(e)!=this.parent&&this.graph.isCellVisible(e)&&(i[mxObjectIdentity.get(e)]=e),this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var a=s.getChildCount(e),l=0;l<a;l++){var d=s.getChildAt(e,l);this.isPort(d)||this.filterDescendants(d,i)}},mxSwimlaneLayout.prototype.isPort=function(e){return!!e.geometry.relative},mxSwimlaneLayout.prototype.getEdgesBetween=function(e,i,s){s=null!=s&&s;for(var a=this.getEdges(e),l=[],d=0;d<a.length;d++){var c=this.getVisibleTerminal(a[d],!0),f=this.getVisibleTerminal(a[d],!1);(c==e&&f==i||!s&&c==i&&f==e)&&l.push(a[d])}return l},mxSwimlaneLayout.prototype.traverse=function(e,i,s,a,l,d,c,f){if(null!=e&&null!=a){var m=mxObjectIdentity.get(e);if(null!=a[m]||null!=c&&null==c[m]){if(null==l[m])for(E=0;E<d.length;E++){var D=d[E];if(null!=D[m]){for(var I in D)l[I]=D[I];return d.splice(E,1),l}}}else{null==l[m]&&(l[m]=e),null==a[m]&&(a[m]=e),null!==c&&delete c[m];for(var x=this.getEdges(e),v=this.graph.model,E=0;E<x.length;E++){var S=this.getVisibleTerminal(x[E],!0),b=S==e;b&&(S=this.getVisibleTerminal(x[E],!1));var T=0;for(T=0;T<this.swimlanes.length&&!v.isAncestor(this.swimlanes[T],S);T++);T>=this.swimlanes.length||(T>f||(!i||b)&&T==f)&&(l=this.traverse(S,i,x[E],a,l,d,c,T))}}}return l},mxSwimlaneLayout.prototype.cycleStage=function(e){new mxSwimlaneOrdering(this).execute(e)},mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxSwimlaneLayout.prototype.crossingStage=function(e){new mxMedianHybridCrossingReduction(this).execute(e)},mxSwimlaneLayout.prototype.placementStage=function(e,i){var s=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return s.fineTuning=this.fineTuning,s.execute(i),s.limitX+this.interHierarchySpacing},__mxOutput.mxSwimlaneLayout=void 0!==mxSwimlaneLayout?mxSwimlaneLayout:void 0,mxGraphModel.prototype=new mxEventSource,mxGraphModel.prototype.constructor=mxGraphModel,mxGraphModel.prototype.root=null,mxGraphModel.prototype.cells=null,mxGraphModel.prototype.maintainEdgeParent=!0,mxGraphModel.prototype.ignoreRelativeEdgeParent=!0,mxGraphModel.prototype.createIds=!0,mxGraphModel.prototype.prefix="",mxGraphModel.prototype.postfix="",mxGraphModel.prototype.nextId=0,mxGraphModel.prototype.currentEdit=null,mxGraphModel.prototype.updateLevel=0,mxGraphModel.prototype.endingUpdate=!1,mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())},mxGraphModel.prototype.isCreateIds=function(){return this.createIds},mxGraphModel.prototype.setCreateIds=function(e){this.createIds=e},mxGraphModel.prototype.createRoot=function(){var e=new mxCell;return e.insert(new mxCell),e},mxGraphModel.prototype.getCell=function(e){return null!=this.cells?this.cells[e]:null},mxGraphModel.prototype.filterCells=function(e,i){var s=null;if(null!=e){s=[];for(var a=0;a<e.length;a++)i(e[a])&&s.push(e[a])}return s},mxGraphModel.prototype.getDescendants=function(e){return this.filterDescendants(null,e)},mxGraphModel.prototype.filterDescendants=function(e,i){var s=[];i=i||this.getRoot(),(null==e||e(i))&&s.push(i);for(var a=this.getChildCount(i),l=0;l<a;l++){var d=this.getChildAt(i,l);s=s.concat(this.filterDescendants(e,d))}return s},mxGraphModel.prototype.getRoot=function(e){var i=e||this.root;if(null!=e)for(;null!=e;)i=e,e=this.getParent(e);return i},mxGraphModel.prototype.setRoot=function(e){return this.execute(new mxRootChange(this,e)),e},mxGraphModel.prototype.rootChanged=function(e){var i=this.root;return this.root=e,this.nextId=0,this.cells=null,this.cellAdded(e),i},mxGraphModel.prototype.isRoot=function(e){return null!=e&&this.root==e},mxGraphModel.prototype.isLayer=function(e){return this.isRoot(this.getParent(e))},mxGraphModel.prototype.isAncestor=function(e,i){for(;null!=i&&i!=e;)i=this.getParent(i);return i==e},mxGraphModel.prototype.contains=function(e){return this.isAncestor(this.root,e)},mxGraphModel.prototype.getParent=function(e){return null!=e?e.getParent():null},mxGraphModel.prototype.add=function(e,i,s){if(i!=e&&null!=e&&null!=i){null==s&&(s=this.getChildCount(e));var a=e!=this.getParent(i);this.execute(new mxChildChange(this,e,i,s)),this.maintainEdgeParent&&a&&this.updateEdgeParents(i)}return i},mxGraphModel.prototype.cellAdded=function(e){if(null!=e){if(null==e.getId()&&this.createIds&&e.setId(this.createId(e)),null!=e.getId()){var i=this.getCell(e.getId());if(i!=e){for(;null!=i;)e.setId(this.createId(e)),i=this.getCell(e.getId());null==this.cells&&(this.cells=new Object),this.cells[e.getId()]=e}}mxUtils.isNumeric(e.getId())&&(this.nextId=Math.max(this.nextId,e.getId()));for(var s=this.getChildCount(e),a=0;a<s;a++)this.cellAdded(this.getChildAt(e,a))}},mxGraphModel.prototype.createId=function(e){var i=this.nextId;return this.nextId++,this.prefix+i+this.postfix},mxGraphModel.prototype.updateEdgeParents=function(e,i){i=i||this.getRoot(e);for(var s=this.getChildCount(e),a=0;a<s;a++){var l=this.getChildAt(e,a);this.updateEdgeParents(l,i)}var d=this.getEdgeCount(e),c=[];for(a=0;a<d;a++)c.push(this.getEdgeAt(e,a));for(a=0;a<c.length;a++){var f=c[a];this.isAncestor(i,f)&&this.updateEdgeParent(f,i)}},mxGraphModel.prototype.updateEdgeParent=function(e,i){for(var s=this.getTerminal(e,!0),a=this.getTerminal(e,!1),l=null;null!=s&&!this.isEdge(s)&&null!=s.geometry&&s.geometry.relative;)s=this.getParent(s);for(;null!=a&&this.ignoreRelativeEdgeParent&&!this.isEdge(a)&&null!=a.geometry&&a.geometry.relative;)a=this.getParent(a);if(this.isAncestor(i,s)&&this.isAncestor(i,a)&&null!=(l=s==a?this.getParent(s):this.getNearestCommonAncestor(s,a))&&(this.getParent(l)!=this.root||this.isAncestor(l,e))&&this.getParent(e)!=l){var d=this.getGeometry(e);if(null!=d){var c=this.getOrigin(this.getParent(e)),f=this.getOrigin(l),m=f.x-c.x,x=f.y-c.y;(d=d.clone()).translate(-m,-x),this.setGeometry(e,d)}this.add(l,e,this.getChildCount(l))}},mxGraphModel.prototype.getOrigin=function(e){var i=null;if(null!=e){if(i=this.getOrigin(this.getParent(e)),!this.isEdge(e)){var s=this.getGeometry(e);null!=s&&(i.x+=s.x,i.y+=s.y)}}else i=new mxPoint;return i},mxGraphModel.prototype.getNearestCommonAncestor=function(e,i){if(null!=e&&null!=i){var s=mxCellPath.create(i);if(null!=s&&s.length>0){var a=e,l=mxCellPath.create(a);if(s.length<l.length){a=i;var d=l;l=s,s=d}for(;null!=a;){var c=this.getParent(a);if(0==s.indexOf(l+mxCellPath.PATH_SEPARATOR)&&null!=c)return a;l=mxCellPath.getParentPath(l),a=c}}}return null},mxGraphModel.prototype.remove=function(e){return e==this.root?this.setRoot(null):null!=this.getParent(e)&&this.execute(new mxChildChange(this,null,e)),e},mxGraphModel.prototype.cellRemoved=function(e){if(null!=e&&null!=this.cells){for(var s=this.getChildCount(e)-1;s>=0;s--)this.cellRemoved(this.getChildAt(e,s));null!=this.cells&&null!=e.getId()&&delete this.cells[e.getId()]}},mxGraphModel.prototype.parentForCellChanged=function(e,i,s){var a=this.getParent(e);if(null!=i)(i!=a||a.getIndex(e)!=s)&&i.insert(e,s);else if(null!=a){var l=a.getIndex(e);a.remove(l)}var d=this.contains(i),c=this.contains(a);return d&&!c?this.cellAdded(e):c&&!d&&this.cellRemoved(e),a},mxGraphModel.prototype.getChildCount=function(e){return null!=e?e.getChildCount():0},mxGraphModel.prototype.getChildAt=function(e,i){return null!=e?e.getChildAt(i):null},mxGraphModel.prototype.getChildren=function(e){return null!=e?e.children:null},mxGraphModel.prototype.getChildVertices=function(e){return this.getChildCells(e,!0,!1)},mxGraphModel.prototype.getChildEdges=function(e){return this.getChildCells(e,!1,!0)},mxGraphModel.prototype.getChildCells=function(e,i,s){i=null!=i&&i,s=null!=s&&s;for(var a=this.getChildCount(e),l=[],d=0;d<a;d++){var c=this.getChildAt(e,d);(!s&&!i||s&&this.isEdge(c)||i&&this.isVertex(c))&&l.push(c)}return l},mxGraphModel.prototype.getTerminal=function(e,i){return null!=e?e.getTerminal(i):null},mxGraphModel.prototype.setTerminal=function(e,i,s){var a=i!=this.getTerminal(e,s);return this.execute(new mxTerminalChange(this,e,i,s)),this.maintainEdgeParent&&a&&this.updateEdgeParent(e,this.getRoot()),i},mxGraphModel.prototype.setTerminals=function(e,i,s){this.beginUpdate();try{this.setTerminal(e,i,!0),this.setTerminal(e,s,!1)}finally{this.endUpdate()}},mxGraphModel.prototype.terminalForCellChanged=function(e,i,s){var a=this.getTerminal(e,s);return null!=i?i.insertEdge(e,s):null!=a&&a.removeEdge(e,s),a},mxGraphModel.prototype.getEdgeCount=function(e){return null!=e?e.getEdgeCount():0},mxGraphModel.prototype.getEdgeAt=function(e,i){return null!=e?e.getEdgeAt(i):null},mxGraphModel.prototype.getDirectedEdgeCount=function(e,i,s){for(var a=0,l=this.getEdgeCount(e),d=0;d<l;d++){var c=this.getEdgeAt(e,d);c!=s&&this.getTerminal(c,i)==e&&a++}return a},mxGraphModel.prototype.getConnections=function(e){return this.getEdges(e,!0,!0,!1)},mxGraphModel.prototype.getIncomingEdges=function(e){return this.getEdges(e,!0,!1,!1)},mxGraphModel.prototype.getOutgoingEdges=function(e){return this.getEdges(e,!1,!0,!1)},mxGraphModel.prototype.getEdges=function(e,i,s,a){i=null==i||i,s=null==s||s,a=null==a||a;for(var l=this.getEdgeCount(e),d=[],c=0;c<l;c++){var f=this.getEdgeAt(e,c),m=this.getTerminal(f,!0),x=this.getTerminal(f,!1);(a&&m==x||m!=x&&(i&&x==e||s&&m==e))&&d.push(f)}return d},mxGraphModel.prototype.getEdgesBetween=function(e,i,s){s=null!=s&&s;var a=this.getEdgeCount(e),l=this.getEdgeCount(i),d=e,c=a;l<a&&(c=l,d=i);for(var f=[],m=0;m<c;m++){var x=this.getEdgeAt(d,m),v=this.getTerminal(x,!0),E=this.getTerminal(x,!1);(v==e&&E==i||!s&&E==e&&v==i)&&f.push(x)}return f},mxGraphModel.prototype.getOpposites=function(e,i,s,a){s=null==s||s,a=null==a||a;var l=[];if(null!=e)for(var d=0;d<e.length;d++){var c=this.getTerminal(e[d],!0),f=this.getTerminal(e[d],!1);c==i&&null!=f&&f!=i&&a?l.push(f):f==i&&null!=c&&c!=i&&s&&l.push(c)}return l},mxGraphModel.prototype.getTopmostCells=function(e){for(var i=new mxDictionary,s=[],a=0;a<e.length;a++)i.put(e[a],!0);for(a=0;a<e.length;a++){for(var l=e[a],d=!0,c=this.getParent(l);null!=c;){if(i.get(c)){d=!1;break}c=this.getParent(c)}d&&s.push(l)}return s},mxGraphModel.prototype.isVertex=function(e){return null!=e&&e.isVertex()},mxGraphModel.prototype.isEdge=function(e){return null!=e&&e.isEdge()},mxGraphModel.prototype.isConnectable=function(e){return null!=e&&e.isConnectable()},mxGraphModel.prototype.getValue=function(e){return null!=e?e.getValue():null},mxGraphModel.prototype.setValue=function(e,i){return this.execute(new mxValueChange(this,e,i)),i},mxGraphModel.prototype.valueForCellChanged=function(e,i){return e.valueChanged(i)},mxGraphModel.prototype.getGeometry=function(e){return null!=e?e.getGeometry():null},mxGraphModel.prototype.setGeometry=function(e,i){return i!=this.getGeometry(e)&&this.execute(new mxGeometryChange(this,e,i)),i},mxGraphModel.prototype.geometryForCellChanged=function(e,i){var s=this.getGeometry(e);return e.setGeometry(i),s},mxGraphModel.prototype.getStyle=function(e){return null!=e?e.getStyle():null},mxGraphModel.prototype.setStyle=function(e,i){return i!=this.getStyle(e)&&this.execute(new mxStyleChange(this,e,i)),i},mxGraphModel.prototype.styleForCellChanged=function(e,i){var s=this.getStyle(e);return e.setStyle(i),s},mxGraphModel.prototype.isCollapsed=function(e){return null!=e&&e.isCollapsed()},mxGraphModel.prototype.setCollapsed=function(e,i){return i!=this.isCollapsed(e)&&this.execute(new mxCollapseChange(this,e,i)),i},mxGraphModel.prototype.collapsedStateForCellChanged=function(e,i){var s=this.isCollapsed(e);return e.setCollapsed(i),s},mxGraphModel.prototype.isVisible=function(e){return null!=e&&e.isVisible()},mxGraphModel.prototype.setVisible=function(e,i){return i!=this.isVisible(e)&&this.execute(new mxVisibleChange(this,e,i)),i},mxGraphModel.prototype.visibleStateForCellChanged=function(e,i){var s=this.isVisible(e);return e.setVisible(i),s},mxGraphModel.prototype.execute=function(e){e.execute(),this.beginUpdate(),this.currentEdit.add(e),this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",e)),this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",e)),this.endUpdate()},mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE)),1==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.START_EDIT))},mxGraphModel.prototype.endUpdate=function(){if(this.updateLevel--,0==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.END_EDIT)),!this.endingUpdate){this.endingUpdate=0==this.updateLevel,this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit));var e=this.currentEdit;this.currentEdit=this.createUndoableEdit(),e.notify(),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e))}}finally{this.endingUpdate=!1}}},mxGraphModel.prototype.createUndoableEdit=function(e){var i=new mxUndoableEdit(this,null==e||e);return i.notify=function(){i.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",i,"changes",i.changes)),i.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",i,"changes",i.changes))},i},mxGraphModel.prototype.mergeChildren=function(e,i,s){s=null==s||s,this.beginUpdate();try{var a=new Object;for(var l in this.mergeChildrenImpl(e,i,s,a),a){var d=a[l],c=this.getTerminal(d,!0);null!=c&&(c=a[mxCellPath.create(c)],this.setTerminal(d,c,!0)),null!=(c=this.getTerminal(d,!1))&&(c=a[mxCellPath.create(c)],this.setTerminal(d,c,!1))}}finally{this.endUpdate()}},mxGraphModel.prototype.mergeChildrenImpl=function(e,i,s,a){this.beginUpdate();try{for(var l=e.getChildCount(),d=0;d<l;d++){var c=e.getChildAt(d);if("function"==typeof c.getId){var f=c.getId(),m=null==f||this.isEdge(c)&&s?null:this.getCell(f);if(null==m){var x=c.clone();x.setId(f),x.setTerminal(c.getTerminal(!0),!0),x.setTerminal(c.getTerminal(!1),!1),m=i.insert(x),this.cellAdded(m)}a[mxCellPath.create(c)]=m,this.mergeChildrenImpl(c,m,s,a)}}}finally{this.endUpdate()}},mxGraphModel.prototype.getParents=function(e){var i=[];if(null!=e)for(var s=new mxDictionary,a=0;a<e.length;a++){var l=this.getParent(e[a]);null!=l&&!s.get(l)&&(s.put(l,!0),i.push(l))}return i},mxGraphModel.prototype.cloneCell=function(e,i){return null!=e?this.cloneCells([e],i)[0]:null},mxGraphModel.prototype.cloneCells=function(e,i,s){i=null==i||i,s=null!=s?s:new Object;for(var a=[],l=0;l<e.length;l++)a.push(null!=e[l]?this.cloneCellImpl(e[l],s,i):null);for(l=0;l<a.length;l++)null!=a[l]&&this.restoreClone(a[l],e[l],s);return a},mxGraphModel.prototype.cloneCellImpl=function(e,i,s){var a=mxObjectIdentity.get(e),l=i[a];if(null==l&&(l=this.cellCloned(e),i[a]=l,s))for(var d=this.getChildCount(e),c=0;c<d;c++){var f=this.cloneCellImpl(this.getChildAt(e,c),i,!0);l.insert(f)}return l},mxGraphModel.prototype.cellCloned=function(e){return e.clone()},mxGraphModel.prototype.restoreClone=function(e,i,s){var a=this.getTerminal(i,!0);null!=a&&null!=(l=s[mxObjectIdentity.get(a)])&&l.insertEdge(e,!0);var l,d=this.getTerminal(i,!1);null!=d&&null!=(l=s[mxObjectIdentity.get(d)])&&l.insertEdge(e,!1);for(var c=this.getChildCount(e),f=0;f<c;f++)this.restoreClone(this.getChildAt(e,f),this.getChildAt(i,f),s)},mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)},mxChildChange.prototype.execute=function(){if(null!=this.child){var e=this.model.getParent(this.child),i=null!=e?e.getIndex(this.child):0;null==this.previous&&this.connect(this.child,!1),e=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),null!=this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=e,this.index=this.previousIndex,this.previousIndex=i}},mxChildChange.prototype.connect=function(e,i){i=null==i||i;var s=e.getTerminal(!0),a=e.getTerminal(!1);null!=s&&this.model.terminalForCellChanged(e,i?s:null,!0),null!=a&&this.model.terminalForCellChanged(e,i?a:null,!1),e.setTerminal(s,!0),e.setTerminal(a,!1);for(var l=this.model.getChildCount(e),d=0;d<l;d++)this.connect(this.model.getChildAt(e,d),i)},mxTerminalChange.prototype.execute=function(){null!=this.cell&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))},mxValueChange.prototype.execute=function(){null!=this.cell&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))},mxStyleChange.prototype.execute=function(){null!=this.cell&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))},mxGeometryChange.prototype.execute=function(){null!=this.cell&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))},mxCollapseChange.prototype.execute=function(){null!=this.cell&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))},mxVisibleChange.prototype.execute=function(){null!=this.cell&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))},mxCellAttributeChange.prototype.execute=function(){if(null!=this.cell){var e=this.cell.getAttribute(this.attribute);null==this.previous?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=e}},__mxOutput.mxGraphModel=void 0!==mxGraphModel?mxGraphModel:void 0,mxCell.prototype.id=null,mxCell.prototype.value=null,mxCell.prototype.geometry=null,mxCell.prototype.style=null,mxCell.prototype.vertex=!1,mxCell.prototype.edge=!1,mxCell.prototype.connectable=!0,mxCell.prototype.visible=!0,mxCell.prototype.collapsed=!1,mxCell.prototype.parent=null,mxCell.prototype.source=null,mxCell.prototype.target=null,mxCell.prototype.children=null,mxCell.prototype.edges=null,mxCell.prototype.mxTransient=["id","value","parent","source","target","children","edges"],mxCell.prototype.getId=function(){return this.id},mxCell.prototype.setId=function(e){this.id=e},mxCell.prototype.getValue=function(){return this.value},mxCell.prototype.setValue=function(e){this.value=e},mxCell.prototype.valueChanged=function(e){var i=this.getValue();return this.setValue(e),i},mxCell.prototype.getGeometry=function(){return this.geometry},mxCell.prototype.setGeometry=function(e){this.geometry=e},mxCell.prototype.getStyle=function(){return this.style},mxCell.prototype.setStyle=function(e){this.style=e},mxCell.prototype.isVertex=function(){return 0!=this.vertex},mxCell.prototype.setVertex=function(e){this.vertex=e},mxCell.prototype.isEdge=function(){return 0!=this.edge},mxCell.prototype.setEdge=function(e){this.edge=e},mxCell.prototype.isConnectable=function(){return 0!=this.connectable},mxCell.prototype.setConnectable=function(e){this.connectable=e},mxCell.prototype.isVisible=function(){return 0!=this.visible},mxCell.prototype.setVisible=function(e){this.visible=e},mxCell.prototype.isCollapsed=function(){return 0!=this.collapsed},mxCell.prototype.setCollapsed=function(e){this.collapsed=e},mxCell.prototype.getParent=function(){return this.parent},mxCell.prototype.setParent=function(e){this.parent=e},mxCell.prototype.getTerminal=function(e){return e?this.source:this.target},mxCell.prototype.setTerminal=function(e,i){return i?this.source=e:this.target=e,e},mxCell.prototype.getChildCount=function(){return null==this.children?0:this.children.length},mxCell.prototype.getIndex=function(e){return mxUtils.indexOf(this.children,e)},mxCell.prototype.getChildAt=function(e){return null==this.children?null:this.children[e]},mxCell.prototype.insert=function(e,i){return null!=e&&(null==i&&(i=this.getChildCount(),e.getParent()==this&&i--),e.removeFromParent(),e.setParent(this),null==this.children?(this.children=[],this.children.push(e)):this.children.splice(i,0,e)),e},mxCell.prototype.remove=function(e){var i=null;return null!=this.children&&e>=0&&null!=(i=this.getChildAt(e))&&(this.children.splice(e,1),i.setParent(null)),i},mxCell.prototype.removeFromParent=function(){if(null!=this.parent){var e=this.parent.getIndex(this);this.parent.remove(e)}},mxCell.prototype.getEdgeCount=function(){return null==this.edges?0:this.edges.length},mxCell.prototype.getEdgeIndex=function(e){return mxUtils.indexOf(this.edges,e)},mxCell.prototype.getEdgeAt=function(e){return null==this.edges?null:this.edges[e]},mxCell.prototype.insertEdge=function(e,i){return null!=e&&(e.removeFromTerminal(i),e.setTerminal(this,i),(null==this.edges||e.getTerminal(!i)!=this||mxUtils.indexOf(this.edges,e)<0)&&(null==this.edges&&(this.edges=[]),this.edges.push(e))),e},mxCell.prototype.removeEdge=function(e,i){if(null!=e){if(e.getTerminal(!i)!=this&&null!=this.edges){var s=this.getEdgeIndex(e);s>=0&&this.edges.splice(s,1)}e.setTerminal(null,i)}return e},mxCell.prototype.removeFromTerminal=function(e){var i=this.getTerminal(e);null!=i&&i.removeEdge(this,e)},mxCell.prototype.hasAttribute=function(e){var i=this.getValue();return null!=i&&i.nodeType==mxConstants.NODETYPE_ELEMENT&&i.hasAttribute?i.hasAttribute(e):null!=i.getAttribute(e)},mxCell.prototype.getAttribute=function(e,i){var s=this.getValue(),a=null!=s&&s.nodeType==mxConstants.NODETYPE_ELEMENT?s.getAttribute(e):null;return null!=a?a:i},mxCell.prototype.setAttribute=function(e,i){var s=this.getValue();null!=s&&s.nodeType==mxConstants.NODETYPE_ELEMENT&&s.setAttribute(e,i)},mxCell.prototype.clone=function(){var e=mxUtils.clone(this,this.mxTransient);return e.setValue(this.cloneValue()),e},mxCell.prototype.cloneValue=function(){var e=this.getValue();return null!=e&&("function"==typeof e.clone?e=e.clone():isNaN(e.nodeType)||(e=e.cloneNode(!0))),e},__mxOutput.mxCell=void 0!==mxCell?mxCell:void 0,mxGeometry.prototype=new mxRectangle,mxGeometry.prototype.constructor=mxGeometry,mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=!0,mxGeometry.prototype.alternateBounds=null,mxGeometry.prototype.sourcePoint=null,mxGeometry.prototype.targetPoint=null,mxGeometry.prototype.points=null,mxGeometry.prototype.offset=null,mxGeometry.prototype.relative=!1,mxGeometry.prototype.swap=function(){if(null!=this.alternateBounds){var e=new mxRectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=e}},mxGeometry.prototype.getTerminalPoint=function(e){return e?this.sourcePoint:this.targetPoint},mxGeometry.prototype.setTerminalPoint=function(e,i){return i?this.sourcePoint=e:this.targetPoint=e,e},mxGeometry.prototype.rotate=function(e,i){var s=mxUtils.toRadians(e),a=Math.cos(s),l=Math.sin(s);if(!this.relative){var d=new mxPoint(this.getCenterX(),this.getCenterY()),c=mxUtils.getRotatedPoint(d,a,l,i);this.x=Math.round(c.x-this.width/2),this.y=Math.round(c.y-this.height/2)}if(null!=this.sourcePoint&&(c=mxUtils.getRotatedPoint(this.sourcePoint,a,l,i),this.sourcePoint.x=Math.round(c.x),this.sourcePoint.y=Math.round(c.y)),null!=this.targetPoint&&(c=mxUtils.getRotatedPoint(this.targetPoint,a,l,i),this.targetPoint.x=Math.round(c.x),this.targetPoint.y=Math.round(c.y)),null!=this.points)for(var f=0;f<this.points.length;f++)null!=this.points[f]&&(c=mxUtils.getRotatedPoint(this.points[f],a,l,i),this.points[f].x=Math.round(c.x),this.points[f].y=Math.round(c.y))},mxGeometry.prototype.translate=function(e,i){if(e=parseFloat(e),i=parseFloat(i),this.relative||(this.x=parseFloat(this.x)+e,this.y=parseFloat(this.y)+i),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+i),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+e,this.targetPoint.y=parseFloat(this.targetPoint.y)+i),this.TRANSLATE_CONTROL_POINTS&&null!=this.points)for(var s=0;s<this.points.length;s++)null!=this.points[s]&&(this.points[s].x=parseFloat(this.points[s].x)+e,this.points[s].y=parseFloat(this.points[s].y)+i)},mxGeometry.prototype.scale=function(e,i,s){if(e=parseFloat(e),i=parseFloat(i),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*i),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*e,this.targetPoint.y=parseFloat(this.targetPoint.y)*i),null!=this.points)for(var a=0;a<this.points.length;a++)null!=this.points[a]&&(this.points[a].x=parseFloat(this.points[a].x)*e,this.points[a].y=parseFloat(this.points[a].y)*i);this.relative||(this.x=parseFloat(this.x)*e,this.y=parseFloat(this.y)*i,s&&(i=e=Math.min(e,i)),this.width=parseFloat(this.width)*e,this.height=parseFloat(this.height)*i)},mxGeometry.prototype.equals=function(e){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==e.relative&&(null==this.sourcePoint&&null==e.sourcePoint||null!=this.sourcePoint&&this.sourcePoint.equals(e.sourcePoint))&&(null==this.targetPoint&&null==e.targetPoint||null!=this.targetPoint&&this.targetPoint.equals(e.targetPoint))&&(null==this.points&&null==e.points||null!=this.points&&mxUtils.equalPoints(this.points,e.points))&&(null==this.alternateBounds&&null==e.alternateBounds||null!=this.alternateBounds&&this.alternateBounds.equals(e.alternateBounds))&&(null==this.offset&&null==e.offset||null!=this.offset&&this.offset.equals(e.offset))},__mxOutput.mxGeometry=void 0!==mxGeometry?mxGeometry:void 0;var mxCellPath={PATH_SEPARATOR:".",create:function(e){var i="";if(null!=e)for(var s=e.getParent();null!=s;)i=s.getIndex(e)+mxCellPath.PATH_SEPARATOR+i,s=(e=s).getParent();var l=i.length;return l>1&&(i=i.substring(0,l-1)),i},getParentPath:function(e){if(null!=e){var i=e.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(i>=0)return e.substring(0,i);if(e.length>0)return""}return null},resolve:function(e,i){var s=e;if(null!=i)for(var a=i.split(mxCellPath.PATH_SEPARATOR),l=0;l<a.length;l++)s=s.getChildAt(parseInt(a[l]));return s},compare:function(e,i){for(var s=Math.min(e.length,i.length),a=0,l=0;l<s;l++)if(e[l]!=i[l]){a=0==e[l].length||0==i[l].length?e[l]==i[l]?0:e[l]>i[l]?1:-1:(d=parseInt(e[l]))==(c=parseInt(i[l]))?0:d>c?1:-1;break}var d,c;return 0==a&&(d=e.length)!=(c=i.length)&&(a=d>c?1:-1),a}};__mxOutput.mxCellPath=void 0!==mxCellPath?mxCellPath:void 0;var mxPerimeter={RectanglePerimeter:function(e,i,s,a){var l=e.getCenterX(),d=e.getCenterY(),m=Math.atan2(s.y-d,s.x-l),x=new mxPoint(0,0),v=Math.PI,S=Math.PI/2-m,b=Math.atan2(e.height,e.width);return m<-v+b||m>v-b?(x.x=e.x,x.y=d-e.width*Math.tan(m)/2):m<-b?(x.y=e.y,x.x=l-e.height*Math.tan(S)/2):m<b?(x.x=e.x+e.width,x.y=d+e.width*Math.tan(m)/2):(x.y=e.y+e.height,x.x=l+e.height*Math.tan(S)/2),a&&(s.x>=e.x&&s.x<=e.x+e.width?x.x=s.x:s.y>=e.y&&s.y<=e.y+e.height&&(x.y=s.y),s.x<e.x?x.x=e.x:s.x>e.x+e.width&&(x.x=e.x+e.width),s.y<e.y?x.y=e.y:s.y>e.y+e.height&&(x.y=e.y+e.height)),x},EllipsePerimeter:function(e,i,s,a){var l=e.x,d=e.y,c=e.width/2,f=e.height/2,m=l+c,x=d+f,v=s.x,E=s.y,S=parseInt(v-m),b=parseInt(E-x);if(0==S&&0!=b)return new mxPoint(m,x+f*b/Math.abs(b));if(0==S&&0==b)return new mxPoint(v,E);if(a){if(E>=d&&E<=d+e.height){var T=E-x,D=Math.sqrt(c*c*(1-T*T/(f*f)))||0;return v<=l&&(D=-D),new mxPoint(m+D,E)}if(v>=l&&v<=l+e.width)return D=v-m,T=Math.sqrt(f*f*(1-D*D/(c*c)))||0,E<=d&&(T=-T),new mxPoint(v,x+T)}var I=b/S,O=x-I*m,N=c*c*I*I+f*f,k=-2*m*N,F=Math.sqrt(k*k-4*N*(c*c*I*I*m*m+f*f*m*m-c*c*f*f)),V=(-k+F)/(2*N),Y=(-k-F)/(2*N),j=I*V+O,X=I*Y+O,ee=0,K=0;return Math.sqrt(Math.pow(V-v,2)+Math.pow(j-E,2))<Math.sqrt(Math.pow(Y-v,2)+Math.pow(X-E,2))?(ee=V,K=j):(ee=Y,K=X),new mxPoint(ee,K)},RhombusPerimeter:function(e,i,s,a){var l=e.x,d=e.y,c=e.width,f=e.height,m=l+c/2,x=d+f/2,v=s.x,E=s.y;if(m==v)return new mxPoint(m,x>E?d:d+f);if(x==E)return new mxPoint(m>v?l:l+c,x);var S=m,b=x;return a&&(v>=l&&v<=l+c?S=v:E>=d&&E<=d+f&&(b=E)),mxUtils.intersection(v,E,S,b,m,E<x?d:d+f,v<m?l:l+c,x)},TrianglePerimeter:function(e,i,s,a){var l=null!=i?i.style[mxConstants.STYLE_DIRECTION]:null,d=l==mxConstants.DIRECTION_NORTH||l==mxConstants.DIRECTION_SOUTH,c=e.x,f=e.y,m=e.width,x=e.height,v=c+m/2,E=f+x/2,S=new mxPoint(c,f),b=new mxPoint(c+m,E),T=new mxPoint(c,f+x);l==mxConstants.DIRECTION_NORTH?(S=T,b=new mxPoint(v,f),T=new mxPoint(c+m,f+x)):l==mxConstants.DIRECTION_SOUTH?(b=new mxPoint(v,f+x),T=new mxPoint(c+m,f)):l==mxConstants.DIRECTION_WEST&&(S=new mxPoint(c+m,f),b=new mxPoint(c,E),T=new mxPoint(c+m,f+x));var D=s.x-v,I=s.y-E,O=d?Math.atan2(D,I):Math.atan2(I,D),N=d?Math.atan2(m,x):Math.atan2(x,m),P=null;if(l==mxConstants.DIRECTION_NORTH||l==mxConstants.DIRECTION_WEST?O>-N&&O<N:O<-Math.PI+N||O>Math.PI-N)P=a&&(d&&s.x>=S.x&&s.x<=T.x||!d&&s.y>=S.y&&s.y<=T.y)?d?new mxPoint(s.x,S.y):new mxPoint(S.x,s.y):l==mxConstants.DIRECTION_NORTH?new mxPoint(c+m/2+x*Math.tan(O)/2,f+x):l==mxConstants.DIRECTION_SOUTH?new mxPoint(c+m/2-x*Math.tan(O)/2,f):l==mxConstants.DIRECTION_WEST?new mxPoint(c+m,f+x/2+m*Math.tan(O)/2):new mxPoint(c,f+x/2-m*Math.tan(O)/2);else{if(a){var F=new mxPoint(v,E);s.y>=f&&s.y<=f+x?(F.x=d?v:l==mxConstants.DIRECTION_WEST?c+m:c,F.y=s.y):s.x>=c&&s.x<=c+m&&(F.x=s.x,F.y=d?l==mxConstants.DIRECTION_NORTH?f+x:f:E),D=s.x-F.x,I=s.y-F.y,v=F.x,E=F.y}P=d&&s.x<=c+m/2||!d&&s.y<=f+x/2?mxUtils.intersection(s.x,s.y,v,E,S.x,S.y,b.x,b.y):mxUtils.intersection(s.x,s.y,v,E,b.x,b.y,T.x,T.y)}return null==P&&(P=new mxPoint(v,E)),P},HexagonPerimeter:function(e,i,s,a){var l=e.x,d=e.y,c=e.width,f=e.height,m=e.getCenterX(),x=e.getCenterY(),v=s.x,E=s.y,T=-Math.atan2(E-x,v-m),D=Math.PI,I=Math.PI/2,O=new mxPoint(m,x),N=null!=i?mxUtils.getValue(i.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,k=N==mxConstants.DIRECTION_NORTH||N==mxConstants.DIRECTION_SOUTH,P=new mxPoint,F=new mxPoint;if((v<l&&E<d||v<l&&E>d+f||v>l+c&&E<d||v>l+c&&E>d+f)&&(a=!1),a){if(k){if(v==m){if(E<=d)return new mxPoint(m,d);if(E>=d+f)return new mxPoint(m,d+f)}else if(v<l){if(E==d+f/4)return new mxPoint(l,d+f/4);if(E==d+3*f/4)return new mxPoint(l,d+3*f/4)}else if(v>l+c){if(E==d+f/4)return new mxPoint(l+c,d+f/4);if(E==d+3*f/4)return new mxPoint(l+c,d+3*f/4)}else if(v==l){if(E<x)return new mxPoint(l,d+f/4);if(E>x)return new mxPoint(l,d+3*f/4)}else if(v==l+c){if(E<x)return new mxPoint(l+c,d+f/4);if(E>x)return new mxPoint(l+c,d+3*f/4)}if(E==d)return new mxPoint(m,d);if(E==d+f)return new mxPoint(m,d+f);v<m?E>d+f/4&&E<d+3*f/4?(P=new mxPoint(l,d),F=new mxPoint(l,d+f)):E<d+f/4?(P=new mxPoint(l-Math.floor(.5*c),d+Math.floor(.5*f)),F=new mxPoint(l+c,d-Math.floor(.25*f))):E>d+3*f/4&&(P=new mxPoint(l-Math.floor(.5*c),d+Math.floor(.5*f)),F=new mxPoint(l+c,d+Math.floor(1.25*f))):v>m&&(E>d+f/4&&E<d+3*f/4?(P=new mxPoint(l+c,d),F=new mxPoint(l+c,d+f)):E<d+f/4?(P=new mxPoint(l,d-Math.floor(.25*f)),F=new mxPoint(l+Math.floor(1.5*c),d+Math.floor(.5*f))):E>d+3*f/4&&(P=new mxPoint(l+Math.floor(1.5*c),d+Math.floor(.5*f)),F=new mxPoint(l,d+Math.floor(1.25*f))))}else{if(E==x){if(v<=l)return new mxPoint(l,d+f/2);if(v>=l+c)return new mxPoint(l+c,d+f/2)}else if(E<d){if(v==l+c/4)return new mxPoint(l+c/4,d);if(v==l+3*c/4)return new mxPoint(l+3*c/4,d)}else if(E>d+f){if(v==l+c/4)return new mxPoint(l+c/4,d+f);if(v==l+3*c/4)return new mxPoint(l+3*c/4,d+f)}else if(E==d){if(v<m)return new mxPoint(l+c/4,d);if(v>m)return new mxPoint(l+3*c/4,d)}else if(E==d+f){if(v<m)return new mxPoint(l+c/4,d+f);if(E>x)return new mxPoint(l+3*c/4,d+f)}if(v==l)return new mxPoint(l,x);if(v==l+c)return new mxPoint(l+c,x);E<x?v>l+c/4&&v<l+3*c/4?(P=new mxPoint(l,d),F=new mxPoint(l+c,d)):v<l+c/4?(P=new mxPoint(l-Math.floor(.25*c),d+f),F=new mxPoint(l+Math.floor(.5*c),d-Math.floor(.5*f))):v>l+3*c/4&&(P=new mxPoint(l+Math.floor(.5*c),d-Math.floor(.5*f)),F=new mxPoint(l+Math.floor(1.25*c),d+f)):E>x&&(v>l+c/4&&v<l+3*c/4?(P=new mxPoint(l,d+f),F=new mxPoint(l+c,d+f)):v<l+c/4?(P=new mxPoint(l-Math.floor(.25*c),d),F=new mxPoint(l+Math.floor(.5*c),d+Math.floor(1.5*f))):v>l+3*c/4&&(P=new mxPoint(l+Math.floor(.5*c),d+Math.floor(1.5*f)),F=new mxPoint(l+Math.floor(1.25*c),d)))}var V=m,Y=x;v>=l&&v<=l+c?(V=v,Y=E<x?d+f:d):E>=d&&E<=d+f&&(Y=E,V=v<m?l+c:l),O=mxUtils.intersection(V,Y,s.x,s.y,P.x,P.y,F.x,F.y)}else{if(k){if(T==(j=Math.atan2(f/4,c/2)))return new mxPoint(l+c,d+Math.floor(.25*f));if(T==I)return new mxPoint(l+Math.floor(.5*c),d);if(T==D-j)return new mxPoint(l,d+Math.floor(.25*f));if(T==-j)return new mxPoint(l+c,d+Math.floor(.75*f));if(T==-I)return new mxPoint(l+Math.floor(.5*c),d+f);if(T==-D+j)return new mxPoint(l,d+Math.floor(.75*f));T<j&&T>-j?(P=new mxPoint(l+c,d),F=new mxPoint(l+c,d+f)):T>j&&T<I?(P=new mxPoint(l,d-Math.floor(.25*f)),F=new mxPoint(l+Math.floor(1.5*c),d+Math.floor(.5*f))):T>I&&T<D-j?(P=new mxPoint(l-Math.floor(.5*c),d+Math.floor(.5*f)),F=new mxPoint(l+c,d-Math.floor(.25*f))):T>D-j&&T<=D||T<-D+j&&T>=-D?(P=new mxPoint(l,d),F=new mxPoint(l,d+f)):T<-j&&T>-I?(P=new mxPoint(l+Math.floor(1.5*c),d+Math.floor(.5*f)),F=new mxPoint(l,d+Math.floor(1.25*f))):T<-I&&T>-D+j&&(P=new mxPoint(l-Math.floor(.5*c),d+Math.floor(.5*f)),F=new mxPoint(l+c,d+Math.floor(1.25*f)))}else{var j;if(T==(j=Math.atan2(f/2,c/4)))return new mxPoint(l+Math.floor(.75*c),d);if(T==D-j)return new mxPoint(l+Math.floor(.25*c),d);if(T==D||T==-D)return new mxPoint(l,d+Math.floor(.5*f));if(0==T)return new mxPoint(l+c,d+Math.floor(.5*f));if(T==-j)return new mxPoint(l+Math.floor(.75*c),d+f);if(T==-D+j)return new mxPoint(l+Math.floor(.25*c),d+f);T>0&&T<j?(P=new mxPoint(l+Math.floor(.5*c),d-Math.floor(.5*f)),F=new mxPoint(l+Math.floor(1.25*c),d+f)):T>j&&T<D-j?(P=new mxPoint(l,d),F=new mxPoint(l+c,d)):T>D-j&&T<D?(P=new mxPoint(l-Math.floor(.25*c),d+f),F=new mxPoint(l+Math.floor(.5*c),d-Math.floor(.5*f))):T<0&&T>-j?(P=new mxPoint(l+Math.floor(.5*c),d+Math.floor(1.5*f)),F=new mxPoint(l+Math.floor(1.25*c),d)):T<-j&&T>-D+j?(P=new mxPoint(l,d+f),F=new mxPoint(l+c,d+f)):T<-D+j&&T>-D&&(P=new mxPoint(l-Math.floor(.25*c),d),F=new mxPoint(l+Math.floor(.5*c),d+Math.floor(1.5*f)))}O=mxUtils.intersection(m,x,s.x,s.y,P.x,P.y,F.x,F.y)}return null==O?new mxPoint(m,x):O}};function mxPrintPreview(e,i,s,a,l,d,c,f,m){this.graph=e,this.scale=null!=i?i:1/e.pageScale,this.border=null!=a?a:0,this.pageFormat=mxRectangle.fromRectangle(null!=s?s:e.pageFormat),this.title=null!=f?f:"Printer-friendly version",this.x0=null!=l?l:0,this.y0=null!=d?d:0,this.borderColor=c,this.pageSelector=null==m||m}function mxStylesheet(){this.styles=new Object,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}function mxCellState(e,i,s){this.view=e,this.cell=i,this.style=null!=s?s:{},this.origin=new mxPoint,this.absoluteOffset=new mxPoint}function mxGraphSelectionModel(e){this.graph=e,this.cells=[]}function mxSelectionChange(e,i,s){this.selectionModel=e,this.added=null!=i?i.slice():null,this.removed=null!=s?s.slice():null}function mxCellEditor(e){this.graph=e,this.zoomHandler=mxUtils.bind(this,function(){this.graph.isEditing()&&this.resize()}),this.graph.view.addListener(mxEvent.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.zoomHandler),this.changeHandler=mxUtils.bind(this,function(i){null!=this.editingCell&&null==this.graph.getView().getState(this.editingCell)&&this.stopEditing(!0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}function mxCellRenderer(){}__mxOutput.mxPerimeter=void 0!==mxPerimeter?mxPerimeter:void 0,mxPrintPreview.prototype.graph=null,mxPrintPreview.prototype.pageFormat=null,mxPrintPreview.prototype.scale=null,mxPrintPreview.prototype.border=0,mxPrintPreview.prototype.marginTop=0,mxPrintPreview.prototype.marginBottom=0,mxPrintPreview.prototype.x0=0,mxPrintPreview.prototype.y0=0,mxPrintPreview.prototype.autoOrigin=!0,mxPrintPreview.prototype.printOverlays=!1,mxPrintPreview.prototype.printControls=!1,mxPrintPreview.prototype.printBackgroundImage=!1,mxPrintPreview.prototype.backgroundColor="#ffffff",mxPrintPreview.prototype.borderColor=null,mxPrintPreview.prototype.title=null,mxPrintPreview.prototype.pageSelector=null,mxPrintPreview.prototype.wnd=null,mxPrintPreview.prototype.targetWindow=null,mxPrintPreview.prototype.pageCount=0,mxPrintPreview.prototype.clipping=!0,mxPrintPreview.prototype.getWindow=function(){return this.wnd},mxPrintPreview.prototype.getDoctype=function(){var e="";return 5==document.documentMode?e='<meta http-equiv="X-UA-Compatible" content="IE=5">':8==document.documentMode?e='<meta http-equiv="X-UA-Compatible" content="IE=8">':document.documentMode>8&&(e='\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--\x3e'),e},mxPrintPreview.prototype.appendGraph=function(e,i,s,a,l,d){this.graph=e,this.scale=null!=i?i:1/e.pageScale,this.x0=s,this.y0=a,this.open(null,null,l,d)},mxPrintPreview.prototype.open=function(e,i,s,a){var l=this.graph.cellRenderer.initializeOverlay,d=null;try{this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(Q,ee){ee.init(Q.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(Q,ee,K,oe){ee.dialect=Q.view.graph.dialect,ee.init(Q.view.getDrawPane())}),this.wnd=null!=i?i:this.wnd;var c=!1;null==this.wnd&&(c=!0,this.wnd=window.open());var f=this.wnd.document;if(c){var m=this.getDoctype();null!=m&&m.length>0&&f.writeln(m),mxClient.IS_VML?f.writeln('<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">'):("CSS1Compat"===document.compatMode&&f.writeln("<!DOCTYPE html>"),f.writeln("<html>")),f.writeln("<head>"),this.writeHead(f,e),f.writeln("</head>"),f.writeln('<body class="mxPage">')}var x=this.graph.getGraphBounds().clone(),v=this.graph.getView().getScale(),E=v/this.scale,S=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=S.x*this.scale,this.y0-=S.y*this.scale,x.width+=x.x,x.height+=x.y,x.x=0,x.y=0,this.border=0);var b=this.pageFormat.width-2*this.border,T=this.pageFormat.height-2*this.border;this.pageFormat.height+=this.marginTop+this.marginBottom,x.width/=E,x.height/=E;var D=Math.max(1,Math.ceil((x.width+this.x0)/b)),I=Math.max(1,Math.ceil((x.height+this.y0)/T));this.pageCount=D*I;var O=mxUtils.bind(this,function(){if(this.pageSelector&&(I>1||D>1)){var Q=this.createPageSelector(I,D);if(f.body.appendChild(Q),mxClient.IS_IE&&null==f.documentMode||5==f.documentMode||8==f.documentMode||7==f.documentMode){Q.style.position="absolute";var ee=function(){Q.style.top=(f.body.scrollTop||f.documentElement.scrollTop)+10+"px"};mxEvent.addListener(this.wnd,"scroll",function(K){ee()}),mxEvent.addListener(this.wnd,"resize",function(K){ee()})}}}),N=mxUtils.bind(this,function(Q,ee){if(null!=this.borderColor&&(Q.style.borderColor=this.borderColor,Q.style.borderStyle="solid",Q.style.borderWidth="1px"),Q.style.background=this.backgroundColor,(s||ee)&&(Q.style.pageBreakAfter="always"),c&&(mxClient.IS_IE||document.documentMode>=11||mxClient.IS_EDGE))f.writeln(Q.outerHTML),Q.parentNode.removeChild(Q);else if(mxClient.IS_IE||document.documentMode>=11||mxClient.IS_EDGE){var K=f.createElement("div");K.innerHTML=Q.outerHTML,K=K.getElementsByTagName("div")[0],f.body.appendChild(K),Q.parentNode.removeChild(Q)}else Q.parentNode.removeChild(Q),f.body.appendChild(Q);(s||ee)&&this.addPageBreak(f)}),k=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if(null!=k)for(var P=0;P<k.length;P++)N(k[P],!0);var F=this.getAppendices(this.pageFormat.width,this.pageFormat.height);for(P=0;P<I;P++)for(var V=P*T/this.scale-this.y0/this.scale+(x.y-S.y*v)/v,Y=0;Y<D;Y++){if(null==this.wnd)return null;var j=Y*b/this.scale-this.x0/this.scale+(x.x-S.x*v)/v,X=P*D+Y+1,Z=new mxRectangle(j,V,b,T);(d=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,mxUtils.bind(this,function(ee){this.addGraphFragment(-j,-V,this.scale,X,ee,Z),this.printBackgroundImage&&this.insertBackgroundImage(ee,-j,-V)}),X)).setAttribute("id","mxPage-"+X),N(d,null!=F||P<I-1||Y<D-1)}if(null!=F)for(P=0;P<F.length;P++)N(F[P],P<F.length-1);c&&!a&&(this.closeDocument(),O()),this.wnd.focus()}catch(Q){null!=d&&null!=d.parentNode&&d.parentNode.removeChild(d)}finally{this.graph.cellRenderer.initializeOverlay=l}return this.wnd},mxPrintPreview.prototype.addPageBreak=function(e){var i=e.createElement("hr");i.className="mxPageBreak",e.body.appendChild(i)},mxPrintPreview.prototype.closeDocument=function(){try{if(null!=this.wnd&&null!=this.wnd.document){var e=this.wnd.document;this.writePostfix(e),e.writeln("</body>"),e.writeln("</html>"),e.close(),mxEvent.release(e.body)}}catch(i){}},mxPrintPreview.prototype.writeHead=function(e,i){null!=this.title&&e.writeln("<title>"+this.title+"</title>"),mxClient.IS_VML&&e.writeln('<style type="text/css">v\\:*{behavior:url(#default#VML)}o\\:*{behavior:url(#default#VML)}</style>'),mxClient.link("stylesheet",mxClient.basePath+"/css/common.css",e),e.writeln('<style type="text/css">'),e.writeln("@media print {"),e.writeln("  * { -webkit-print-color-adjust: exact; }"),e.writeln("  table.mxPageSelector { display: none; }"),e.writeln("  hr.mxPageBreak { display: none; }"),e.writeln("}"),e.writeln("@media screen {"),e.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),e.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),e.writeln("  body.mxPage { background: gray; }"),e.writeln("}"),null!=i&&e.writeln(i),e.writeln("</style>")},mxPrintPreview.prototype.writePostfix=function(e){},mxPrintPreview.prototype.createPageSelector=function(e,i){var s=this.wnd.document,a=s.createElement("table");a.className="mxPageSelector",a.setAttribute("border","0");for(var l=s.createElement("tbody"),d=0;d<e;d++){for(var c=s.createElement("tr"),f=0;f<i;f++){var m=d*i+f+1,x=s.createElement("td"),v=s.createElement("a");v.setAttribute("href","#mxPage-"+m),!mxClient.IS_NS||mxClient.IS_SF||mxClient.IS_GC||v.setAttribute("onclick","var page = document.getElementById('mxPage-"+m+"');page.scrollIntoView(true);event.preventDefault();"),mxUtils.write(v,m,s),x.appendChild(v),c.appendChild(x)}l.appendChild(c)}return a.appendChild(l),a},mxPrintPreview.prototype.renderPage=function(e,i,s,a,l,d){var c=this.wnd.document,f=document.createElement("div"),m=null;try{if(0!=s||0!=a){f.style.position="relative",f.style.width=e+"px",f.style.height=i+"px",f.style.pageBreakInside="avoid",(x=document.createElement("div")).style.position="relative",x.style.top=this.border+"px",x.style.left=this.border+"px",x.style.width=e-2*this.border+"px",x.style.height=i-2*this.border+"px",x.style.overflow="hidden";var v=document.createElement("div");v.style.position="relative",v.style.marginLeft=s+"px",v.style.marginTop=a+"px",8==c.documentMode&&(x.style.position="absolute",v.style.position="absolute"),10==c.documentMode&&(v.style.width="100%",v.style.height="100%"),x.appendChild(v),f.appendChild(x),document.body.appendChild(f),m=v}else{var x;f.style.width=e+"px",f.style.height=i+"px",f.style.overflow="hidden",f.style.pageBreakInside="avoid",8==c.documentMode&&(f.style.position="relative"),(x=document.createElement("div")).style.width=e-2*this.border+"px",x.style.height=i-2*this.border+"px",x.style.overflow="hidden",!mxClient.IS_IE||null!=c.documentMode&&5!=c.documentMode&&8!=c.documentMode&&7!=c.documentMode?(x.style.top=this.border+"px",x.style.left=this.border+"px"):(x.style.marginTop=this.border+"px",x.style.marginLeft=this.border+"px"),this.graph.dialect==mxConstants.DIALECT_VML&&(x.style.position="absolute"),f.appendChild(x),document.body.appendChild(f),m=x}}catch(E){throw f.parentNode.removeChild(f),f=null,E}return l(m),f},mxPrintPreview.prototype.getRoot=function(){var e=this.graph.view.currentRoot;return null==e&&(e=this.graph.getModel().getRoot()),e},mxPrintPreview.prototype.useCssTransforms=function(){return!mxClient.NO_FO&&!mxClient.IS_SF},mxPrintPreview.prototype.addGraphFragment=function(e,i,s,a,l,d){var c=this.graph.getView(),f=this.graph.container;this.graph.container=l;var m=c.getCanvas(),x=c.getBackgroundPane(),v=c.getDrawPane(),E=c.getOverlayPane(),S=s;if(this.graph.dialect==mxConstants.DIALECT_SVG){if(c.createSvg(),this.useCssTransforms()){var b=c.getDrawPane().parentNode;b.getAttribute("transform"),b.setAttribute("transformOrigin","0 0"),b.setAttribute("transform","scale("+s+","+s+")translate("+e+","+i+")"),s=1,e=0,i=0}}else this.graph.dialect==mxConstants.DIALECT_VML?c.createVml():c.createHtml();var D=c.isEventsEnabled();c.setEventsEnabled(!1);var I=this.graph.isEnabled();this.graph.setEnabled(!1);var O=c.getTranslate();c.translate=new mxPoint(e,i);var N=this.graph.cellRenderer.redraw,k=c.states,P=c.scale;if(this.clipping){var F=new mxRectangle((d.x+O.x)*P,(d.y+O.y)*P,d.width*P/S,d.height*P/S);this.graph.cellRenderer.redraw=function(ee,K,oe){if(null!=ee){var B=k.get(ee.cell);if(null!=B){var he=c.getBoundingBox(B,!1);if(null!=he&&he.width>0&&he.height>0&&!mxUtils.intersects(F,he))return}}N.apply(this,arguments)}}var V=null;try{var Y=[this.getRoot()];V=new mxTemporaryCellStates(c,s,Y,null,mxUtils.bind(this,function(ee){return this.getLinkForCellState(ee)}))}finally{if(mxClient.IS_IE)c.overlayPane.innerHTML="",c.canvas.style.overflow="hidden",c.canvas.style.position="relative",c.canvas.style.top=this.marginTop+"px",c.canvas.style.width=d.width+"px",c.canvas.style.height=d.height+"px";else for(var j=l.firstChild;null!=j;){var X=j.nextSibling,Z=j.nodeName.toLowerCase();"svg"==Z?(j.style.overflow="hidden",j.style.position="relative",j.style.top=this.marginTop+"px",j.setAttribute("width",d.width),j.setAttribute("height",d.height),j.style.width="",j.style.height=""):"default"!=j.style.cursor&&"div"!=Z&&j.parentNode.removeChild(j),j=X}if(this.printBackgroundImage){var Q=l.getElementsByTagName("svg");Q.length>0&&(Q[0].style.position="absolute")}c.overlayPane.parentNode.removeChild(c.overlayPane),this.graph.setEnabled(I),this.graph.container=f,this.graph.cellRenderer.redraw=N,c.canvas=m,c.backgroundPane=x,c.drawPane=v,c.overlayPane=E,c.translate=O,V.destroy(),c.setEventsEnabled(D)}},mxPrintPreview.prototype.getLinkForCellState=function(e){return this.graph.getLinkForCell(e.cell)},mxPrintPreview.prototype.insertBackgroundImage=function(e,i,s){var a=this.graph.backgroundImage;if(null!=a){var l=document.createElement("img");l.style.position="absolute",l.style.marginLeft=Math.round(i*this.scale)+"px",l.style.marginTop=Math.round(s*this.scale)+"px",l.setAttribute("width",Math.round(this.scale*a.width)),l.setAttribute("height",Math.round(this.scale*a.height)),l.src=a.src,e.insertBefore(l,e.firstChild)}},mxPrintPreview.prototype.getCoverPages=function(){return null},mxPrintPreview.prototype.getAppendices=function(){return null},mxPrintPreview.prototype.print=function(e){var i=this.open(e);null!=i&&i.print()},mxPrintPreview.prototype.close=function(){null!=this.wnd&&(this.wnd.close(),this.wnd=null)},__mxOutput.mxPrintPreview=void 0!==mxPrintPreview?mxPrintPreview:void 0,mxStylesheet.prototype.createDefaultVertexStyle=function(){var e=new Object;return e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_RECTANGLE,e[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,e[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,e[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,e[mxConstants.STYLE_FILLCOLOR]="#C3D9FF",e[mxConstants.STYLE_STROKECOLOR]="#6482B9",e[mxConstants.STYLE_FONTCOLOR]="#774400",e},mxStylesheet.prototype.createDefaultEdgeStyle=function(){var e=new Object;return e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_CONNECTOR,e[mxConstants.STYLE_ENDARROW]=mxConstants.ARROW_CLASSIC,e[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,e[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,e[mxConstants.STYLE_STROKECOLOR]="#6482B9",e[mxConstants.STYLE_FONTCOLOR]="#446299",e},mxStylesheet.prototype.putDefaultVertexStyle=function(e){this.putCellStyle("defaultVertex",e)},mxStylesheet.prototype.putDefaultEdgeStyle=function(e){this.putCellStyle("defaultEdge",e)},mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex},mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge},mxStylesheet.prototype.putCellStyle=function(e,i){this.styles[e]=i},mxStylesheet.prototype.getCellStyle=function(e,i){var s=i;if(null!=e&&e.length>0){var a=e.split(";");s=null!=s&&";"!=e.charAt(0)?mxUtils.clone(s):new Object;for(var l=0;l<a.length;l++){var d=a[l],c=d.indexOf("=");if(c>=0){var f=d.substring(0,c),m=d.substring(c+1);m==mxConstants.NONE?delete s[f]:s[f]=mxUtils.isNumeric(m)?parseFloat(m):m}else{var x=this.styles[d];if(null!=x)for(var f in x)s[f]=x[f]}}}return s},__mxOutput.mxStylesheet=void 0!==mxStylesheet?mxStylesheet:void 0,mxCellState.prototype=new mxRectangle,mxCellState.prototype.constructor=mxCellState,mxCellState.prototype.view=null,mxCellState.prototype.cell=null,mxCellState.prototype.style=null,mxCellState.prototype.invalidStyle=!1,mxCellState.prototype.invalid=!0,mxCellState.prototype.origin=null,mxCellState.prototype.absolutePoints=null,mxCellState.prototype.absoluteOffset=null,mxCellState.prototype.visibleSourceState=null,mxCellState.prototype.visibleTargetState=null,mxCellState.prototype.terminalDistance=0,mxCellState.prototype.length=0,mxCellState.prototype.segments=null,mxCellState.prototype.shape=null,mxCellState.prototype.text=null,mxCellState.prototype.unscaledWidth=null,mxCellState.prototype.unscaledHeight=null,mxCellState.prototype.getPerimeterBounds=function(e,i){if(e=e||0,i=null!=i?i:new mxRectangle(this.x,this.y,this.width,this.height),null!=this.shape&&null!=this.shape.stencil&&"fixed"==this.shape.stencil.aspect){var s=this.shape.stencil.computeAspect(this.style,i.x,i.y,i.width,i.height);i.x=s.x,i.y=s.y,i.width=this.shape.stencil.w0*s.width,i.height=this.shape.stencil.h0*s.height}return 0!=e&&i.grow(e),i},mxCellState.prototype.setAbsoluteTerminalPoint=function(e,i){i?(null==this.absolutePoints&&(this.absolutePoints=[]),0==this.absolutePoints.length?this.absolutePoints.push(e):this.absolutePoints[0]=e):null==this.absolutePoints?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(e)):1==this.absolutePoints.length?this.absolutePoints.push(e):this.absolutePoints[this.absolutePoints.length-1]=e},mxCellState.prototype.setCursor=function(e){null!=this.shape&&this.shape.setCursor(e),null!=this.text&&this.text.setCursor(e)},mxCellState.prototype.getVisibleTerminal=function(e){var i=this.getVisibleTerminalState(e);return null!=i?i.cell:null},mxCellState.prototype.getVisibleTerminalState=function(e){return e?this.visibleSourceState:this.visibleTargetState},mxCellState.prototype.setVisibleTerminalState=function(e,i){i?this.visibleSourceState=e:this.visibleTargetState=e},mxCellState.prototype.getCellBounds=function(){return this.cellBounds},mxCellState.prototype.getPaintBounds=function(){return this.paintBounds},mxCellState.prototype.updateCachedBounds=function(){var e=this.view.translate,i=this.view.scale;this.cellBounds=new mxRectangle(this.x/i-e.x,this.y/i-e.y,this.width/i,this.height/i),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),null!=this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()},mxCellState.prototype.setState=function(e){this.view=e.view,this.cell=e.cell,this.style=e.style,this.absolutePoints=e.absolutePoints,this.origin=e.origin,this.absoluteOffset=e.absoluteOffset,this.boundingBox=e.boundingBox,this.terminalDistance=e.terminalDistance,this.segments=e.segments,this.length=e.length,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.unscaledWidth=e.unscaledWidth,this.unscaledHeight=e.unscaledHeight},mxCellState.prototype.clone=function(){var e=new mxCellState(this.view,this.cell,this.style);if(null!=this.absolutePoints){e.absolutePoints=[];for(var i=0;i<this.absolutePoints.length;i++)e.absolutePoints[i]=this.absolutePoints[i].clone()}return null!=this.origin&&(e.origin=this.origin.clone()),null!=this.absoluteOffset&&(e.absoluteOffset=this.absoluteOffset.clone()),null!=this.boundingBox&&(e.boundingBox=this.boundingBox.clone()),e.terminalDistance=this.terminalDistance,e.segments=this.segments,e.length=this.length,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.unscaledWidth=this.unscaledWidth,e.unscaledHeight=this.unscaledHeight,e},mxCellState.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)},__mxOutput.mxCellState=void 0!==mxCellState?mxCellState:void 0,mxGraphSelectionModel.prototype=new mxEventSource,mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel,mxGraphSelectionModel.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphSelectionModel.prototype.updatingSelectionResource="none"!=mxClient.language?"updatingSelection":"",mxGraphSelectionModel.prototype.graph=null,mxGraphSelectionModel.prototype.singleSelection=!1,mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection},mxGraphSelectionModel.prototype.setSingleSelection=function(e){this.singleSelection=e},mxGraphSelectionModel.prototype.isSelected=function(e){return null!=e&&mxUtils.indexOf(this.cells,e)>=0},mxGraphSelectionModel.prototype.isEmpty=function(){return 0==this.cells.length},mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)},mxGraphSelectionModel.prototype.setCell=function(e){null!=e&&this.setCells([e])},mxGraphSelectionModel.prototype.setCells=function(e){if(null!=e){this.singleSelection&&(e=[this.getFirstSelectableCell(e)]);for(var i=[],s=0;s<e.length;s++)this.graph.isCellSelectable(e[s])&&i.push(e[s]);this.changeSelection(i,this.cells)}},mxGraphSelectionModel.prototype.getFirstSelectableCell=function(e){if(null!=e)for(var i=0;i<e.length;i++)if(this.graph.isCellSelectable(e[i]))return e[i];return null},mxGraphSelectionModel.prototype.addCell=function(e){null!=e&&this.addCells([e])},mxGraphSelectionModel.prototype.addCells=function(e){if(null!=e){var i=null;this.singleSelection&&(i=this.cells,e=[this.getFirstSelectableCell(e)]);for(var s=[],a=0;a<e.length;a++)!this.isSelected(e[a])&&this.graph.isCellSelectable(e[a])&&s.push(e[a]);this.changeSelection(s,i)}},mxGraphSelectionModel.prototype.removeCell=function(e){null!=e&&this.removeCells([e])},mxGraphSelectionModel.prototype.removeCells=function(e){if(null!=e){for(var i=[],s=0;s<e.length;s++)this.isSelected(e[s])&&i.push(e[s]);this.changeSelection(null,i)}},mxGraphSelectionModel.prototype.changeSelection=function(e,i){if(null!=e&&e.length>0&&null!=e[0]||null!=i&&i.length>0&&null!=i[0]){var s=new mxSelectionChange(this,e,i);s.execute();var a=new mxUndoableEdit(this,!1);a.add(s),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",a))}},mxGraphSelectionModel.prototype.cellAdded=function(e){null!=e&&!this.isSelected(e)&&this.cells.push(e)},mxGraphSelectionModel.prototype.cellRemoved=function(e){if(null!=e){var i=mxUtils.indexOf(this.cells,e);i>=0&&this.cells.splice(i,1)}},mxSelectionChange.prototype.execute=function(){var e=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,null!=this.removed)for(var i=0;i<this.removed.length;i++)this.selectionModel.cellRemoved(this.removed[i]);if(null!=this.added)for(i=0;i<this.added.length;i++)this.selectionModel.cellAdded(this.added[i]);var s=this.added;this.added=this.removed,this.removed=s,window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",e),this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))},__mxOutput.mxGraphSelectionModel=void 0!==mxGraphSelectionModel?mxGraphSelectionModel:void 0,mxCellEditor.prototype.graph=null,mxCellEditor.prototype.textarea=null,mxCellEditor.prototype.editingCell=null,mxCellEditor.prototype.trigger=null,mxCellEditor.prototype.modified=!1,mxCellEditor.prototype.autoSize=!0,mxCellEditor.prototype.selectText=!0,mxCellEditor.prototype.emptyLabelText=mxClient.IS_FF?"<br>":"",mxCellEditor.prototype.escapeCancelsEditing=!0,mxCellEditor.prototype.textNode="",mxCellEditor.prototype.zIndex=5,mxCellEditor.prototype.minResize=new mxRectangle(0,20),mxCellEditor.prototype.wordWrapPadding=mxClient.IS_QUIRKS?2:mxClient.IS_IE11?0:1,mxCellEditor.prototype.blurEnabled=!1,mxCellEditor.prototype.initialValue=null,mxCellEditor.prototype.align=null,mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.textarea.style.position=this.isLegacyEditor()?"absolute":"relative",this.installListeners(this.textarea)},mxCellEditor.prototype.applyValue=function(e,i){this.graph.labelChanged(e.cell,i,this.trigger)},mxCellEditor.prototype.setAlign=function(e){null!=this.textarea&&(this.textarea.style.textAlign=e),this.align=e,this.resize()},mxCellEditor.prototype.getInitialValue=function(e,i){var s=mxUtils.htmlEntities(this.graph.getEditingValue(e.cell,i),!1);return!mxClient.IS_QUIRKS&&8!=document.documentMode&&9!=document.documentMode&&10!=document.documentMode&&(s=mxUtils.replaceTrailingNewlines(s,"<div><br></div>")),s.replace(/\n/g,"<br>")},mxCellEditor.prototype.getCurrentValue=function(e){return mxUtils.extractTextWithWhitespace(this.textarea.childNodes)},mxCellEditor.prototype.isCancelEditingKeyEvent=function(e){return this.escapeCancelsEditing||mxEvent.isShiftDown(e)||mxEvent.isControlDown(e)||mxEvent.isMetaDown(e)},mxCellEditor.prototype.installListeners=function(e){mxEvent.addListener(e,"dragstart",mxUtils.bind(this,function(d){this.graph.stopEditing(!1),mxEvent.consume(d)})),mxEvent.addListener(e,"blur",mxUtils.bind(this,function(d){this.blurEnabled&&this.focusLost(d)})),mxEvent.addListener(e,"keydown",mxUtils.bind(this,function(d){mxEvent.isConsumed(d)||(this.isStopEditingEvent(d)?(this.graph.stopEditing(!1),mxEvent.consume(d)):27==d.keyCode&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(d)),mxEvent.consume(d)))}));var i=mxUtils.bind(this,function(d){null!=this.editingCell&&this.clearOnChange&&e.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||8!=d.keyCode&&46!=d.keyCode)&&(this.clearOnChange=!1,e.innerHTML="")});mxEvent.addListener(e,"keypress",i),mxEvent.addListener(e,"paste",i);var s=mxUtils.bind(this,function(d){null!=this.editingCell&&(0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0):this.clearOnChange=!1)});mxEvent.addListener(e,mxClient.IS_IE11||mxClient.IS_IE?"keyup":"input",s),mxEvent.addListener(e,"cut",s),mxEvent.addListener(e,"paste",s);var a=mxClient.IS_IE11||mxClient.IS_IE?"keydown":"input",l=mxUtils.bind(this,function(d){null!=this.editingCell&&this.autoSize&&!mxEvent.isConsumed(d)&&(null!=this.resizeThread&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent.addListener(e,a,l),mxEvent.addListener(window,"resize",l),document.documentMode>=9?(mxEvent.addListener(e,"DOMNodeRemoved",l),mxEvent.addListener(e,"DOMNodeInserted",l)):(mxEvent.addListener(e,"cut",l),mxEvent.addListener(e,"paste",l))},mxCellEditor.prototype.isStopEditingEvent=function(e){return 113==e.keyCode||this.graph.isEnterStopsCellEditing()&&13==e.keyCode&&!mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)},mxCellEditor.prototype.isEventSource=function(e){return mxEvent.getSource(e)==this.textarea},mxCellEditor.prototype.resize=function(){var e=this.graph.getView().getState(this.editingCell);if(null==e)this.stopEditing(!0);else if(null!=this.textarea){var i=this.graph.getModel().isEdge(e.cell),s=this.graph.getView().scale,a=null;if(this.autoSize&&"fill"!=e.style[mxConstants.STYLE_OVERFLOW]){var l=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);if(null==(a=null!=e.text&&null==this.align?e.text.margin:null)&&(a=mxUtils.getAlignmentAsPoint(this.align||mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),i){if(this.bounds=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y,0,0),null!=l){var d=(parseFloat(l)+2)*s;this.bounds.width=d,this.bounds.x+=a.x*d}}else{var c=mxRectangle.fromRectangle(e),f=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),m=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(c=null!=e.shape&&f==mxConstants.ALIGN_CENTER&&m==mxConstants.ALIGN_MIDDLE?e.shape.getLabelBounds(c):c,null!=l&&(c.width=parseFloat(l)*s),!e.view.graph.cellRenderer.legacySpacing||"width"!=e.style[mxConstants.STYLE_OVERFLOW]){var x=parseInt(e.style[mxConstants.STYLE_SPACING]||2)*s,v=(parseInt(e.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*s+x,E=(parseInt(e.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*s+x,S=(parseInt(e.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*s+x,b=(parseInt(e.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*s+x;f=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),m=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),c=new mxRectangle(c.x+b,c.y+v,c.width-(f==mxConstants.ALIGN_CENTER&&null==l?b+E:0),c.height-(m==mxConstants.ALIGN_MIDDLE?v+S:0))}this.bounds=new mxRectangle(c.x+e.absoluteOffset.x,c.y+e.absoluteOffset.y,c.width,c.height)}this.graph.isWrapping(e.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal",d=Math.round(this.bounds.width/(document,s))+this.wordWrapPadding,"relative"!=this.textarea.style.position?(this.textarea.style.width=d+"px",this.textarea.scrollWidth>d&&(this.textarea.style.width=this.textarea.scrollWidth+"px")):this.textarea.style.maxWidth=d+"px"):(this.textarea.style.whiteSpace="nowrap",this.textarea.style.width=""),8==document.documentMode&&(this.textarea.style.zoom="1",this.textarea.style.height="auto");var T=this.textarea.scrollWidth,D=this.textarea.scrollHeight;8==document.documentMode?(this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-a.x*(this.bounds.width-(T+1)*s)+T*(s-1)*0+2*(a.x+.5))/s))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-a.y*(this.bounds.height-(D+.5)*s)+D*(s-1)*0+1*Math.abs(a.y+.5))/s))+"px",this.textarea.style.width=Math.round(T*s)+"px",this.textarea.style.height=Math.round(D*s)+"px"):mxClient.IS_QUIRKS?(this.textarea.style.left=Math.max(0,Math.ceil(this.bounds.x-a.x*(this.bounds.width-(T+1)*s)+T*(s-1)*0+2*(a.x+.5)))+"px",this.textarea.style.top=Math.max(0,Math.ceil(this.bounds.y-a.y*(this.bounds.height-(D+.5)*s)+D*(s-1)*0+1*Math.abs(a.y+.5)))+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-a.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-a.y*(this.bounds.height-4)+(-1==a.y?3:0))+1)+"px")}else this.bounds=this.getEditorBounds(e),this.textarea.style.width=Math.round(this.bounds.width/s)+"px",this.textarea.style.height=Math.round(this.bounds.height/s)+"px",8==document.documentMode||mxClient.IS_QUIRKS?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(e.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=Math.round(this.bounds.width/s)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap","fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=""));mxClient.IS_VML?this.textarea.style.zoom=s:(mxUtils.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+s+","+s+")"+(null==a?"":" translate("+100*a.x+"%,"+100*a.y+"%)")))}},mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())},mxCellEditor.prototype.getBackgroundColor=function(e){return null},mxCellEditor.prototype.isLegacyEditor=function(){if(mxClient.IS_VML)return!0;var e=!1;if(mxClient.IS_SVG){var i=this.graph.view.getDrawPane().ownerSVGElement;if(null!=i){var s=mxUtils.getCurrentStyle(i);null!=s&&(e="absolute"==s.position)}}return!e},mxCellEditor.prototype.startEditing=function(e,i){this.stopEditing(!0),this.align=null,null==this.textarea&&this.init(),null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.hideTooltip();var s=this.graph.getView().getState(e);if(null!=s){this.graph.getView();var l=mxUtils.getValue(s.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),d=mxUtils.getValue(s.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),c=mxUtils.getValue(s.style,mxConstants.STYLE_FONTCOLOR,"black"),f=mxUtils.getValue(s.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),m=(mxUtils.getValue(s.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,x=(mxUtils.getValue(s.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,v=[];(mxUtils.getValue(s.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&v.push("underline"),(mxUtils.getValue(s.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&v.push("line-through"),this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(l*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(s),this.textarea.style.textDecoration=v.join(" "),this.textarea.style.fontWeight=m?"bold":"normal",this.textarea.style.fontStyle=x?"italic":"",this.textarea.style.fontSize=Math.round(l)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=d,this.textarea.style.textAlign=f,this.textarea.style.outline="none",this.textarea.style.color=c;var E=this.textDirection=mxUtils.getValue(s.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION);E==mxConstants.TEXT_DIRECTION_AUTO&&null!=s&&null!=s.text&&s.text.dialect!=mxConstants.DIALECT_STRICTHTML&&!mxUtils.isNode(s.text.value)&&(E=s.text.getAutoDirection()),E==mxConstants.TEXT_DIRECTION_LTR||E==mxConstants.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",E):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(s,i)||"",this.initialValue=this.textarea.innerHTML,0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=e,this.trigger=i,this.textNode=null,null!=s.text&&this.isHideLabel(s)&&(this.textNode=s.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(s.cell)||"fill"!=s.style[mxConstants.STYLE_OVERFLOW])&&window.setTimeout(mxUtils.bind(this,function(){this.resize()}),0),this.resize();try{this.textarea.focus(),this.isSelectText()&&this.textarea.innerHTML.length>0&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch(S){}}},mxCellEditor.prototype.isSelectText=function(){return this.selectText},mxCellEditor.prototype.clearSelection=function(){var e=null;window.getSelection?e=window.getSelection():document.selection&&(e=document.selection),null!=e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())},mxCellEditor.prototype.stopEditing=function(e){if(e=e||!1,null!=this.editingCell){null!=this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null);var i=e?null:this.graph.view.getState(this.editingCell),s=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.trigger=null,this.bounds=null,this.textarea.blur(),this.clearSelection(),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),null!=i&&(this.textarea.innerHTML!=s||null!=this.align)){this.prepareTextarea();var a=this.getCurrentValue(i);this.graph.getModel().beginUpdate();try{null!=a&&this.applyValue(i,a),null!=this.align&&this.graph.setCellStyles(mxConstants.STYLE_ALIGN,this.align,[i.cell])}finally{this.graph.getModel().endUpdate()}}mxEvent.release(this.textarea),this.textarea=null,this.align=null}},mxCellEditor.prototype.prepareTextarea=function(){null!=this.textarea.lastChild&&"BR"==this.textarea.lastChild.nodeName&&this.textarea.removeChild(this.textarea.lastChild)},mxCellEditor.prototype.isHideLabel=function(e){return!0},mxCellEditor.prototype.getMinimumSize=function(e){var i=this.graph.getView().scale;return new mxRectangle(0,0,null==e.text?30:e.text.size*i+20,"left"==this.textarea.style.textAlign?120:40)},mxCellEditor.prototype.getEditorBounds=function(e){var i=this.graph.getModel().isEdge(e.cell),s=this.graph.getView().scale,a=this.getMinimumSize(e),l=a.width,d=a.height,c=null;if(!i&&e.view.graph.cellRenderer.legacySpacing&&"fill"==e.style[mxConstants.STYLE_OVERFLOW])c=e.shape.getLabelBounds(mxRectangle.fromRectangle(e));else{var f=parseInt(e.style[mxConstants.STYLE_SPACING]||0)*s,m=(parseInt(e.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*s+f,x=(parseInt(e.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*s+f,v=(parseInt(e.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*s+f,E=(parseInt(e.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*s+f;c=new mxRectangle(e.x,e.y,Math.max(l,e.width-E-x),Math.max(d,e.height-m-v));var S=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),b=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(c=null!=e.shape&&S==mxConstants.ALIGN_CENTER&&b==mxConstants.ALIGN_MIDDLE?e.shape.getLabelBounds(c):c,i?(c.x=e.absoluteOffset.x,c.y=e.absoluteOffset.y,null!=e.text&&null!=e.text.boundingBox&&(e.text.boundingBox.x>0&&(c.x=e.text.boundingBox.x),e.text.boundingBox.y>0&&(c.y=e.text.boundingBox.y))):null!=e.text&&null!=e.text.boundingBox&&(c.x=Math.min(c.x,e.text.boundingBox.x),c.y=Math.min(c.y,e.text.boundingBox.y)),c.x+=E,c.y+=m,null!=e.text&&null!=e.text.boundingBox&&(i?(c.width=Math.max(l,e.text.boundingBox.width),c.height=Math.max(d,e.text.boundingBox.height)):(c.width=Math.max(c.width,e.text.boundingBox.width),c.height=Math.max(c.height,e.text.boundingBox.height))),this.graph.getModel().isVertex(e.cell)){var T=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);T==mxConstants.ALIGN_LEFT?c.x-=e.width:T==mxConstants.ALIGN_RIGHT&&(c.x+=e.width);var D=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);D==mxConstants.ALIGN_TOP?c.y-=e.height:D==mxConstants.ALIGN_BOTTOM&&(c.y+=e.height)}}return new mxRectangle(Math.round(c.x),Math.round(c.y),Math.round(c.width),Math.round(c.height))},mxCellEditor.prototype.getEmptyLabelText=function(e){return this.emptyLabelText},mxCellEditor.prototype.getEditingCell=function(){return this.editingCell},mxCellEditor.prototype.destroy=function(){null!=this.textarea&&(mxEvent.release(this.textarea),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)},__mxOutput.mxCellEditor=void 0!==mxCellEditor?mxCellEditor:void 0,mxCellRenderer.defaultShapes=new Object,mxCellRenderer.prototype.defaultEdgeShape=mxConnector,mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape,mxCellRenderer.prototype.defaultTextShape=mxText,mxCellRenderer.prototype.legacyControlPosition=!0,mxCellRenderer.prototype.legacySpacing=!0,mxCellRenderer.prototype.antiAlias=!0,mxCellRenderer.prototype.minSvgStrokeWidth=1,mxCellRenderer.prototype.forceControlClickHandler=!1,mxCellRenderer.registerShape=function(e,i){mxCellRenderer.defaultShapes[e]=i},mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel),mxCellRenderer.prototype.initializeShape=function(e){e.shape.dialect=e.view.graph.dialect,this.configureShape(e),e.shape.init(e.view.getDrawPane())},mxCellRenderer.prototype.createShape=function(e){var i=null;if(null!=e.style){var s=mxStencilRegistry.getStencil(e.style[mxConstants.STYLE_SHAPE]);i=null!=s?new mxShape(s):new(this.getShapeConstructor(e))}return i},mxCellRenderer.prototype.createIndicatorShape=function(e){e.shape.indicatorShape=this.getShape(e.view.graph.getIndicatorShape(e))},mxCellRenderer.prototype.getShape=function(e){return null!=e?mxCellRenderer.defaultShapes[e]:null},mxCellRenderer.prototype.getShapeConstructor=function(e){var i=this.getShape(e.style[mxConstants.STYLE_SHAPE]);return null==i&&(i=e.view.graph.getModel().isEdge(e.cell)?this.defaultEdgeShape:this.defaultVertexShape),i},mxCellRenderer.prototype.configureShape=function(e){e.shape.apply(e),e.shape.image=e.view.graph.getImage(e),e.shape.indicatorColor=e.view.graph.getIndicatorColor(e),e.shape.indicatorStrokeColor=e.style[mxConstants.STYLE_INDICATOR_STROKECOLOR],e.shape.indicatorGradientColor=e.view.graph.getIndicatorGradientColor(e),e.shape.indicatorDirection=e.style[mxConstants.STYLE_INDICATOR_DIRECTION],e.shape.indicatorImage=e.view.graph.getIndicatorImage(e),this.postConfigureShape(e)},mxCellRenderer.prototype.postConfigureShape=function(e){null!=e.shape&&(this.resolveColor(e,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(e,"indicatorColor",mxConstants.STYLE_FILLCOLOR),this.resolveColor(e,"gradient",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(e,"stroke",mxConstants.STYLE_STROKECOLOR),this.resolveColor(e,"fill",mxConstants.STYLE_FILLCOLOR))},mxCellRenderer.prototype.checkPlaceholderStyles=function(e){if(null!=e.style)for(var i=["inherit","swimlane","indicated"],s=[mxConstants.STYLE_FILLCOLOR,mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.STYLE_FONTCOLOR],a=0;a<s.length;a++)if(mxUtils.indexOf(i,e.style[s[a]])>=0)return!0;return!1},mxCellRenderer.prototype.resolveColor=function(e,i,s){var a=s==mxConstants.STYLE_FONTCOLOR?e.text:e.shape;if(null!=a){var l=e.view.graph,d=a[i],c=null;if("inherit"==d?c=l.model.getParent(e.cell):"swimlane"==d?(a[i]=s==mxConstants.STYLE_STROKECOLOR||s==mxConstants.STYLE_FONTCOLOR?"#000000":"#ffffff",c=null!=l.model.getTerminal(e.cell,!1)?l.model.getTerminal(e.cell,!1):e.cell,c=l.getSwimlane(c),s=l.swimlaneIndicatorColorAttribute):"indicated"==d&&null!=e.shape?a[i]=e.shape.indicatorColor:s!=mxConstants.STYLE_FILLCOLOR&&d==mxConstants.STYLE_FILLCOLOR&&null!=e.shape?a[i]=e.style[mxConstants.STYLE_FILLCOLOR]:s!=mxConstants.STYLE_STROKECOLOR&&d==mxConstants.STYLE_STROKECOLOR&&null!=e.shape&&(a[i]=e.style[mxConstants.STYLE_STROKECOLOR]),null!=c){var f=l.getView().getState(c);if(a[i]=null,null!=f){var m=s==mxConstants.STYLE_FONTCOLOR?f.text:f.shape;a[i]=null!=m&&"indicatorColor"!=i?m[i]:f.style[s]}}}},mxCellRenderer.prototype.getLabelValue=function(e){return e.view.graph.getLabel(e.cell)},mxCellRenderer.prototype.createLabel=function(e,i){var s=e.view.graph;if(s.getModel().isEdge(e.cell),e.style[mxConstants.STYLE_FONTSIZE]>0||null==e.style[mxConstants.STYLE_FONTSIZE]){var l=s.isHtmlLabel(e.cell)||null!=i&&mxUtils.isNode(i);e.text=new this.defaultTextShape(i,new mxRectangle,e.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,s.getVerticalAlign(e),e.style[mxConstants.STYLE_FONTCOLOR],e.style[mxConstants.STYLE_FONTFAMILY],e.style[mxConstants.STYLE_FONTSIZE],e.style[mxConstants.STYLE_FONTSTYLE],e.style[mxConstants.STYLE_SPACING],e.style[mxConstants.STYLE_SPACING_TOP],e.style[mxConstants.STYLE_SPACING_RIGHT],e.style[mxConstants.STYLE_SPACING_BOTTOM],e.style[mxConstants.STYLE_SPACING_LEFT],e.style[mxConstants.STYLE_HORIZONTAL],e.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],e.style[mxConstants.STYLE_LABEL_BORDERCOLOR],s.isWrapping(e.cell)&&s.isHtmlLabel(e.cell),s.isLabelClipped(e.cell),e.style[mxConstants.STYLE_OVERFLOW],e.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)),e.text.opacity=mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_OPACITY,100),e.text.dialect=l?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect,e.text.style=e.style,e.text.state=e,this.initializeLabel(e,e.text);var d=!1,c=function(f){var m=e;if(mxClient.IS_TOUCH||d){var x=mxEvent.getClientX(f),v=mxEvent.getClientY(f),E=mxUtils.convertPoint(s.container,x,v);m=s.view.getState(s.getCellAt(E.x,E.y))}return m};mxEvent.addGestureListeners(e.text.node,mxUtils.bind(this,function(f){this.isLabelEvent(e,f)&&(s.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(f,e)),d=s.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(f).nodeName)}),mxUtils.bind(this,function(f){this.isLabelEvent(e,f)&&s.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(f,c(f)))}),mxUtils.bind(this,function(f){this.isLabelEvent(e,f)&&(s.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(f,c(f))),d=!1)})),s.nativeDblClickEnabled&&mxEvent.addListener(e.text.node,"dblclick",mxUtils.bind(this,function(f){this.isLabelEvent(e,f)&&(s.dblClick(f,e.cell),mxEvent.consume(f))}))}},mxCellRenderer.prototype.initializeLabel=function(e,i){i.init(mxClient.IS_SVG&&mxClient.NO_FO&&i.dialect!=mxConstants.DIALECT_SVG?e.view.graph.container:e.view.getDrawPane())},mxCellRenderer.prototype.createCellOverlays=function(e){var s=e.view.graph.getCellOverlays(e.cell),a=null;if(null!=s){a=new mxDictionary;for(var l=0;l<s.length;l++){var d=null!=e.overlays?e.overlays.remove(s[l]):null;if(null==d){var c=new mxImageShape(new mxRectangle,s[l].image.src);c.dialect=e.view.graph.dialect,c.preserveImageAspect=!1,c.overlay=s[l],this.initializeOverlay(e,c),this.installCellOverlayListeners(e,s[l],c),null!=s[l].cursor&&(c.node.style.cursor=s[l].cursor),a.put(s[l],c)}else a.put(s[l],d)}}null!=e.overlays&&e.overlays.visit(function(f,m){m.destroy()}),e.overlays=a},mxCellRenderer.prototype.initializeOverlay=function(e,i){i.init(e.view.getOverlayPane())},mxCellRenderer.prototype.installCellOverlayListeners=function(e,i,s){var a=e.view.graph;mxEvent.addListener(s.node,"click",function(l){a.isEditing()&&a.stopEditing(!a.isInvokesStopCellEditing()),i.fireEvent(new mxEventObject(mxEvent.CLICK,"event",l,"cell",e.cell))}),mxEvent.addGestureListeners(s.node,function(l){mxEvent.consume(l)},function(l){a.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(l,e))}),mxClient.IS_TOUCH&&mxEvent.addListener(s.node,"touchend",function(l){i.fireEvent(new mxEventObject(mxEvent.CLICK,"event",l,"cell",e.cell))})},mxCellRenderer.prototype.createControl=function(e){var i=e.view.graph,s=i.getFoldingImage(e);if(i.foldingEnabled&&null!=s){if(null==e.control){var a=new mxRectangle(0,0,s.width,s.height);e.control=new mxImageShape(a,s.src),e.control.preserveImageAspect=!1,e.control.dialect=i.dialect,this.initControl(e,e.control,!0,this.createControlClickHandler(e))}}else null!=e.control&&(e.control.destroy(),e.control=null)},mxCellRenderer.prototype.createControlClickHandler=function(e){var i=e.view.graph;return mxUtils.bind(this,function(s){if(this.forceControlClickHandler||i.isEnabled()){var a=!i.isCellCollapsed(e.cell);i.foldCells(a,!1,[e.cell],null,s),mxEvent.consume(s)}})},mxCellRenderer.prototype.initControl=function(e,i,s,a){var l=e.view.graph;l.isHtmlLabel(e.cell)&&mxClient.NO_FO&&l.dialect==mxConstants.DIALECT_SVG?(i.dialect=mxConstants.DIALECT_PREFERHTML,i.init(l.container),i.node.style.zIndex=1):i.init(e.view.getOverlayPane());var c=i.innerNode||i.node;if(null!=a&&!mxClient.IS_IOS&&(l.isEnabled()&&(c.style.cursor="pointer"),mxEvent.addListener(c,"click",a)),s){var f=null;mxEvent.addGestureListeners(c,function(m){f=new mxPoint(mxEvent.getClientX(m),mxEvent.getClientY(m)),l.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(m,e)),mxEvent.consume(m)},function(m){l.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(m,e))},function(m){l.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(m,e)),mxEvent.consume(m)}),null!=a&&mxClient.IS_IOS&&c.addEventListener("touchend",function(m){if(null!=f){var x=l.tolerance;Math.abs(f.x-mxEvent.getClientX(m))<x&&Math.abs(f.y-mxEvent.getClientY(m))<x&&(a.call(a,m),mxEvent.consume(m))}},!0)}return c},mxCellRenderer.prototype.isShapeEvent=function(e,i){return!0},mxCellRenderer.prototype.isLabelEvent=function(e,i){return!0},mxCellRenderer.prototype.installListeners=function(e){var i=e.view.graph,s=function(a){var l=e;if(i.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(a).nodeName||mxClient.IS_TOUCH){var d=mxEvent.getClientX(a),c=mxEvent.getClientY(a),f=mxUtils.convertPoint(i.container,d,c);l=i.view.getState(i.getCellAt(f.x,f.y))}return l};mxEvent.addGestureListeners(e.shape.node,mxUtils.bind(this,function(a){this.isShapeEvent(e,a)&&i.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(a,e))}),mxUtils.bind(this,function(a){this.isShapeEvent(e,a)&&i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a,s(a)))}),mxUtils.bind(this,function(a){this.isShapeEvent(e,a)&&i.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a,s(a)))})),i.nativeDblClickEnabled&&mxEvent.addListener(e.shape.node,"dblclick",mxUtils.bind(this,function(a){this.isShapeEvent(e,a)&&(i.dblClick(a,e.cell),mxEvent.consume(a))}))},mxCellRenderer.prototype.redrawLabel=function(e,i){var s=e.view.graph,a=this.getLabelValue(e),l=s.isWrapping(e.cell),d=s.isLabelClipped(e.cell),f=e.view.graph.isHtmlLabel(e.cell)||null!=a&&mxUtils.isNode(a)?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect,m=e.style[mxConstants.STYLE_OVERFLOW]||"visible";if(null!=e.text&&(e.text.wrap!=l||e.text.clipped!=d||e.text.overflow!=m||e.text.dialect!=f)&&(e.text.destroy(),e.text=null),null==e.text&&null!=a&&(mxUtils.isNode(a)||a.length>0)?this.createLabel(e,a):null!=e.text&&(null==a||0==a.length)&&(e.text.destroy(),e.text=null),null!=e.text){i&&(null!=e.text.lastValue&&this.isTextShapeInvalid(e,e.text)&&(e.text.lastValue=null),e.text.resetStyles(),e.text.apply(e),e.text.valign=s.getVerticalAlign(e));var x=this.getLabelBounds(e),v=this.getTextScale(e);if(this.resolveColor(e,"color",mxConstants.STYLE_FONTCOLOR),i||e.text.value!=a||e.text.isWrapping!=l||e.text.overflow!=m||e.text.isClipping!=d||e.text.scale!=v||e.text.dialect!=f||null==e.text.bounds||!e.text.bounds.equals(x)){e.text.dialect=f,e.text.value=a,e.text.bounds=x,e.text.scale=v,e.text.wrap=l,e.text.clipped=d,e.text.overflow=m;var E=e.text.node.style.visibility;this.redrawLabelShape(e.text),e.text.node.style.visibility=E}}},mxCellRenderer.prototype.isTextShapeInvalid=function(e,i){function s(a,l,d){return"spacingTop"==l||"spacingRight"==l||"spacingBottom"==l||"spacingLeft"==l?parseFloat(i[a])-parseFloat(i.spacing)!=(e.style[l]||d):i[a]!=(e.style[l]||d)}return s("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||s("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||s("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||s("color",mxConstants.STYLE_FONTCOLOR,"black")||s("align",mxConstants.STYLE_ALIGN,"")||s("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||s("spacing",mxConstants.STYLE_SPACING,2)||s("spacingTop",mxConstants.STYLE_SPACING_TOP,0)||s("spacingRight",mxConstants.STYLE_SPACING_RIGHT,0)||s("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,0)||s("spacingLeft",mxConstants.STYLE_SPACING_LEFT,0)||s("horizontal",mxConstants.STYLE_HORIZONTAL,!0)||s("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||s("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||s("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||s("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)},mxCellRenderer.prototype.redrawLabelShape=function(e){e.redraw()},mxCellRenderer.prototype.getTextScale=function(e){return e.view.scale},mxCellRenderer.prototype.getLabelBounds=function(e){var i=e.view.graph,s=e.view.scale,a=i.getModel().isEdge(e.cell),l=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y);if(a){var d=e.text.getSpacing();l.x+=d.x*s,l.y+=d.y*s;var c=i.getCellGeometry(e.cell);null!=c&&(l.width=Math.max(0,c.width*s),l.height=Math.max(0,c.height*s))}else{if(e.text.isPaintBoundsInverted()){var f=l.x;l.x=l.y,l.y=f}l.x+=e.x,l.y+=e.y,l.width=Math.max(1,e.width),l.height=Math.max(1,e.height)}if(e.text.isPaintBoundsInverted()){var m=(e.width-e.height)/2;l.x+=m,l.y-=m,f=l.width,l.width=l.height,l.height=f}if(null!=e.shape){var x=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),v=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);x==mxConstants.ALIGN_CENTER&&v==mxConstants.ALIGN_MIDDLE&&(l=e.shape.getLabelBounds(l))}var E=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);return null!=E&&(l.width=parseFloat(E)*s),a||this.rotateLabelBounds(e,l),l},mxCellRenderer.prototype.rotateLabelBounds=function(e,i){if(i.y-=e.text.margin.y*i.height,i.x-=e.text.margin.x*i.width,!this.legacySpacing||"fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&"width"!=e.style[mxConstants.STYLE_OVERFLOW]){var s=e.view.scale,a=e.text.getSpacing();i.x+=a.x*s,i.y+=a.y*s;var l=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),d=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),c=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);i.width=Math.max(0,i.width-(l==mxConstants.ALIGN_CENTER&&null==c?e.text.spacingLeft*s+e.text.spacingRight*s:0)),i.height=Math.max(0,i.height-(d==mxConstants.ALIGN_MIDDLE?e.text.spacingTop*s+e.text.spacingBottom*s:0))}var f=e.text.getTextRotation();if(0!=f&&null!=e&&e.view.graph.model.isVertex(e.cell)){var m=e.getCenterX(),x=e.getCenterY();if(i.x!=m||i.y!=x){var v=f*(Math.PI/180),E=mxUtils.getRotatedPoint(new mxPoint(i.x,i.y),Math.cos(v),Math.sin(v),new mxPoint(m,x));i.x=E.x,i.y=E.y}}},mxCellRenderer.prototype.redrawCellOverlays=function(e,i){if(this.createCellOverlays(e),null!=e.overlays){var s=mxUtils.mod(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0),90),a=mxUtils.toRadians(s),l=Math.cos(a),d=Math.sin(a);e.overlays.visit(function(c,f){var m=f.overlay.getBounds(e);if(!e.view.graph.getModel().isEdge(e.cell)&&null!=e.shape&&0!=s){var x=m.getCenterX(),v=m.getCenterY(),E=mxUtils.getRotatedPoint(new mxPoint(x,v),l,d,new mxPoint(e.getCenterX(),e.getCenterY()));x=E.x,v=E.y,m.x=Math.round(x-m.width/2),m.y=Math.round(v-m.height/2)}(i||null==f.bounds||f.scale!=e.view.scale||!f.bounds.equals(m))&&(f.bounds=m,f.scale=e.view.scale,f.redraw())})}},mxCellRenderer.prototype.redrawControl=function(e,i){var s=e.view.graph.getFoldingImage(e);if(null!=e.control&&null!=s){var a=this.getControlBounds(e,s.width,s.height),l=this.legacyControlPosition?mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0):e.shape.getTextRotation(),d=e.view.scale;(i||e.control.scale!=d||!e.control.bounds.equals(a)||e.control.rotation!=l)&&(e.control.rotation=l,e.control.bounds=a,e.control.scale=d,e.control.redraw())}},mxCellRenderer.prototype.getControlBounds=function(e,i,s){if(null!=e.control){var a=e.view.scale,l=e.getCenterX(),d=e.getCenterY();if(!e.view.graph.getModel().isEdge(e.cell)&&(l=e.x+i*a,d=e.y+s*a,null!=e.shape)){var c=e.shape.getShapeRotation();if(this.legacyControlPosition)c=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0);else if(e.shape.isPaintBoundsInverted()){var f=(e.width-e.height)/2;l+=f,d-=f}if(0!=c){var m=mxUtils.toRadians(c),x=Math.cos(m),v=Math.sin(m),E=mxUtils.getRotatedPoint(new mxPoint(l,d),x,v,new mxPoint(e.getCenterX(),e.getCenterY()));l=E.x,d=E.y}}return e.view.graph.getModel().isEdge(e.cell),new mxRectangle(Math.round(l-i/2*a),Math.round(d-s/2*a),Math.round(i*a),Math.round(s*a))}return null},mxCellRenderer.prototype.insertStateAfter=function(e,i,s){for(var a=this.getShapesForState(e),l=0;l<a.length;l++)if(null!=a[l]&&null!=a[l].node){var d=a[l].node.parentNode!=e.view.getDrawPane()&&a[l].node.parentNode!=e.view.getOverlayPane(),c=d?s:i;if(null!=c&&c.nextSibling!=a[l].node)null==c.nextSibling?c.parentNode.appendChild(a[l].node):c.parentNode.insertBefore(a[l].node,c.nextSibling);else if(null==c)if(a[l].node.parentNode==e.view.graph.container){for(var f=e.view.canvas;null!=f&&f.parentNode!=e.view.graph.container;)f=f.parentNode;null!=f&&null!=f.nextSibling?f.nextSibling!=a[l].node&&a[l].node.parentNode.insertBefore(a[l].node,f.nextSibling):a[l].node.parentNode.appendChild(a[l].node)}else null!=a[l].node.parentNode&&null!=a[l].node.parentNode.firstChild&&a[l].node.parentNode.firstChild!=a[l].node&&a[l].node.parentNode.insertBefore(a[l].node,a[l].node.parentNode.firstChild);d?s=a[l].node:i=a[l].node}return[i,s]},mxCellRenderer.prototype.getShapesForState=function(e){return[e.shape,e.text,e.control]},mxCellRenderer.prototype.redraw=function(e,i,s){var a=this.redrawShape(e,i,s);null!=e.shape&&(null==s||s)&&(this.redrawLabel(e,a),this.redrawCellOverlays(e,a),this.redrawControl(e,a))},mxCellRenderer.prototype.redrawShape=function(e,i,s){var a=e.view.graph.model,l=!1;return null!=e.shape&&null!=e.shape.style&&null!=e.style&&e.shape.style[mxConstants.STYLE_SHAPE]!=e.style[mxConstants.STYLE_SHAPE]&&(e.shape.destroy(),e.shape=null),null==e.shape&&null!=e.view.graph.container&&e.cell!=e.view.currentRoot&&(a.isVertex(e.cell)||a.isEdge(e.cell))?(e.shape=this.createShape(e),null!=e.shape&&(e.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,e.shape.antiAlias=this.antiAlias,this.createIndicatorShape(e),this.initializeShape(e),this.createCellOverlays(e),this.installListeners(e),e.view.graph.selectionCellsHandler.updateHandler(e))):!i&&null!=e.shape&&(!mxUtils.equalEntries(e.shape.style,e.style)||this.checkPlaceholderStyles(e))&&(e.shape.resetStyles(),this.configureShape(e),e.view.graph.selectionCellsHandler.updateHandler(e),i=!0),null!=e.shape&&e.shape.indicatorShape!=this.getShape(e.view.graph.getIndicatorShape(e))&&(null!=e.shape.indicator&&(e.shape.indicator.destroy(),e.shape.indicator=null),this.createIndicatorShape(e),null!=e.shape.indicatorShape&&(e.shape.indicator=new e.shape.indicatorShape,e.shape.indicator.dialect=e.shape.dialect,e.shape.indicator.init(e.node),i=!0)),null!=e.shape&&(this.createControl(e),(i||this.isShapeInvalid(e,e.shape))&&(null!=e.absolutePoints?(e.shape.points=e.absolutePoints.slice(),e.shape.bounds=null):(e.shape.points=null,e.shape.bounds=new mxRectangle(e.x,e.y,e.width,e.height)),e.shape.scale=e.view.scale,null==s||s?this.doRedrawShape(e):e.shape.updateBoundingBox(),l=!0)),l},mxCellRenderer.prototype.doRedrawShape=function(e){e.shape.redraw()},mxCellRenderer.prototype.isShapeInvalid=function(e,i){return null==i.bounds||i.scale!=e.view.scale||null==e.absolutePoints&&!i.bounds.equals(e)||null!=e.absolutePoints&&!mxUtils.equalPoints(i.points,e.absolutePoints)},mxCellRenderer.prototype.destroy=function(e){null!=e.shape&&(null!=e.text&&(e.text.destroy(),e.text=null),null!=e.overlays&&(e.overlays.visit(function(i,s){s.destroy()}),e.overlays=null),null!=e.control&&(e.control.destroy(),e.control=null),e.shape.destroy(),e.shape=null)},__mxOutput.mxCellRenderer=void 0!==mxCellRenderer?mxCellRenderer:void 0;var mxEdgeStyle={EntityRelation:function(e,i,s,a,l){var d=e.view,c=d.graph,f=mxUtils.getValue(e.style,mxConstants.STYLE_SEGMENT,mxConstants.ENTITY_SEGMENT)*d.scale,m=e.absolutePoints,x=m[0],v=m[m.length-1],E=!1;if(null!=i){var S=c.getCellGeometry(i.cell);S.relative?E=S.x<=.5:null!=s&&(E=(null!=v?v.x:s.x+s.width)<(null!=x?x.x:i.x))}if(null!=x)(i=new mxCellState).x=x.x,i.y=x.y;else{if(null==i)return;(b=mxUtils.getPortConstraints(i,e,!0,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&b!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(E=b==mxConstants.DIRECTION_MASK_WEST)}var T=!0;if(null!=s){var D=c.getCellGeometry(s.cell);D.relative?T=D.x<=.5:null!=i&&(T=(null!=x?x.x:i.x+i.width)<(null!=v?v.x:s.x))}if(null!=v)(s=new mxCellState).x=v.x,s.y=v.y;else if(null!=s){var b;(b=mxUtils.getPortConstraints(s,e,!1,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&b!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(T=b==mxConstants.DIRECTION_MASK_WEST)}if(null!=i&&null!=s){var I=E?i.x:i.x+i.width,O=d.getRoutingCenterY(i),N=T?s.x:s.x+s.width,k=d.getRoutingCenterY(s),P=f,F=E?-P:P,V=new mxPoint(I+F,O),Y=new mxPoint(N+(F=T?-P:P),k);if(E==T){var j=E?Math.min(I,N)-f:Math.max(I,N)+f;l.push(new mxPoint(j,O)),l.push(new mxPoint(j,k))}else if(V.x<Y.x==E){var X=O+(k-O)/2;l.push(V),l.push(new mxPoint(V.x,X)),l.push(new mxPoint(Y.x,X)),l.push(Y)}else l.push(V),l.push(Y)}},Loop:function(e,i,s,a,l){var d=e.absolutePoints;if(null==d[0]||null==d[d.length-1]){if(null!=i){var v=e.view,E=v.graph;null!=(x=null!=a&&a.length>0?a[0]:null)&&(x=v.transformControlPoint(e,x),mxUtils.contains(i,x.x,x.y)&&(x=null));var S=0,b=0,T=0,D=0,I=mxUtils.getValue(e.style,mxConstants.STYLE_SEGMENT,E.gridSize)*v.scale,O=mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_WEST);O==mxConstants.DIRECTION_NORTH||O==mxConstants.DIRECTION_SOUTH?(S=v.getRoutingCenterX(i),b=I):(T=v.getRoutingCenterY(i),D=I),null==x||x.x<i.x||x.x>i.x+i.width?null!=x?(S=x.x,D=Math.max(Math.abs(T-x.y),D)):O==mxConstants.DIRECTION_NORTH?T=i.y-2*b:O==mxConstants.DIRECTION_SOUTH?T=i.y+i.height+2*b:S=O==mxConstants.DIRECTION_EAST?i.x-2*D:i.x+i.width+2*D:null!=x&&(S=v.getRoutingCenterX(i),b=Math.max(Math.abs(S-x.x),D),T=x.y,D=0),l.push(new mxPoint(S-b,T-D)),l.push(new mxPoint(S+b,T+D))}}else if(null!=a&&a.length>0)for(var m=0;m<a.length;m++){var x;x=e.view.transformControlPoint(e,x=a[m]),l.push(new mxPoint(x.x,x.y))}},ElbowConnector:function(e,i,s,a,l){var d=null!=a&&a.length>0?a[0]:null,c=!1,f=!1;if(null!=i&&null!=s)if(null!=d){var m=Math.min(i.x,s.x),x=Math.max(i.x+i.width,s.x+s.width),v=Math.min(i.y,s.y),E=Math.max(i.y+i.height,s.y+s.height);c=(d=e.view.transformControlPoint(e,d)).y<v||d.y>E,f=d.x<m||d.x>x}else(c=(m=Math.max(i.x,s.x))==(x=Math.min(i.x+i.width,s.x+s.width)))||(f=(v=Math.max(i.y,s.y))==(E=Math.min(i.y+i.height,s.y+s.height)));f||!c&&e.style[mxConstants.STYLE_ELBOW]!=mxConstants.ELBOW_VERTICAL?mxEdgeStyle.SideToSide(e,i,s,a,l):mxEdgeStyle.TopToBottom(e,i,s,a,l)},SideToSide:function(e,i,s,a,l){var d=e.view,c=null!=a&&a.length>0?a[0]:null,f=e.absolutePoints,m=f[0],x=f[f.length-1];if(null!=c&&(c=d.transformControlPoint(e,c)),null!=m&&((i=new mxCellState).x=m.x,i.y=m.y),null!=x&&((s=new mxCellState).x=x.x,s.y=x.y),null!=i&&null!=s){var v=Math.max(i.x,s.x),E=Math.min(i.x+i.width,s.x+s.width),S=null!=c?c.x:Math.round(E+(v-E)/2),b=d.getRoutingCenterY(i),T=d.getRoutingCenterY(s);if(null!=c&&(c.y>=i.y&&c.y<=i.y+i.height&&(b=c.y),c.y>=s.y&&c.y<=s.y+s.height&&(T=c.y)),!mxUtils.contains(s,S,b)&&!mxUtils.contains(i,S,b)&&l.push(new mxPoint(S,b)),!mxUtils.contains(s,S,T)&&!mxUtils.contains(i,S,T)&&l.push(new mxPoint(S,T)),1==l.length)if(null!=c)!mxUtils.contains(s,S,c.y)&&!mxUtils.contains(i,S,c.y)&&l.push(new mxPoint(S,c.y));else{var D=Math.max(i.y,s.y),I=Math.min(i.y+i.height,s.y+s.height);l.push(new mxPoint(S,D+(I-D)/2))}}},TopToBottom:function(e,i,s,a,l){var d=e.view,c=null!=a&&a.length>0?a[0]:null,f=e.absolutePoints,m=f[0],x=f[f.length-1];if(null!=c&&(c=d.transformControlPoint(e,c)),null!=m&&((i=new mxCellState).x=m.x,i.y=m.y),null!=x&&((s=new mxCellState).x=x.x,s.y=x.y),null!=i&&null!=s){var v=Math.max(i.y,s.y),E=Math.min(i.y+i.height,s.y+s.height),S=d.getRoutingCenterX(i);null!=c&&c.x>=i.x&&c.x<=i.x+i.width&&(S=c.x);var b=null!=c?c.y:Math.round(E+(v-E)/2);if(!mxUtils.contains(s,S,b)&&!mxUtils.contains(i,S,b)&&l.push(new mxPoint(S,b)),S=null!=c&&c.x>=s.x&&c.x<=s.x+s.width?c.x:d.getRoutingCenterX(s),!mxUtils.contains(s,S,b)&&!mxUtils.contains(i,S,b)&&l.push(new mxPoint(S,b)),1==l.length)if(null!=c&&1==l.length)!mxUtils.contains(s,c.x,b)&&!mxUtils.contains(i,c.x,b)&&l.push(new mxPoint(c.x,b));else{var T=Math.max(i.x,s.x),D=Math.min(i.x+i.width,s.x+s.width);l.push(new mxPoint(T+(D-T)/2,b))}}},SegmentConnector:function(e,i,s,a,l){var d=mxEdgeStyle.scalePointArray(e.absolutePoints,e.view.scale),c=mxEdgeStyle.scaleCellState(i,e.view.scale),f=mxEdgeStyle.scaleCellState(s,e.view.scale),x=l.length>0?l[0]:null,v=!0,E=null;function S(ee){return ee.x=Math.round(ee.x*e.view.scale*10)/10,ee.y=Math.round(ee.y*e.view.scale*10)/10,(null==x||Math.abs(x.x-ee.x)>=1||Math.abs(x.y-ee.y)>=Math.max(1,e.view.scale))&&(l.push(ee),x=ee),x}var b=d[0];null==b&&null!=c?b=new mxPoint(e.view.getRoutingCenterX(c),e.view.getRoutingCenterY(c)):null!=b&&(b=b.clone());var T=d.length-1;if(null!=a&&a.length>0){for(var D=[],I=0;I<a.length;I++){var O=e.view.transformControlPoint(e,a[I],!0);null!=O&&D.push(O)}if(0==D.length)return;null!=b&&null!=D[0]&&(Math.abs(D[0].x-b.x)<1&&(D[0].x=b.x),Math.abs(D[0].y-b.y)<1&&(D[0].y=b.y));var N=d[T];null!=N&&null!=D[D.length-1]&&(Math.abs(D[D.length-1].x-N.x)<1&&(D[D.length-1].x=N.x),Math.abs(D[D.length-1].y-N.y)<1&&(D[D.length-1].y=N.y));var k=c,P=d[0],F=!1,V=!1,Y=E=D[0];for(null!=P&&(k=null),I=0;I<2;I++){var j=null!=P&&P.x==Y.x,X=null!=P&&P.y==Y.y,Z=null!=k&&Y.y>=k.y&&Y.y<=k.y+k.height,Q=null!=k&&Y.x>=k.x&&Y.x<=k.x+k.width;if(F=X||null==P&&Z,V=j||null==P&&Q,0!=I||!(F&&V||j&&X)){if(null!=P&&!X&&!j&&(Z||Q)){v=!Z;break}if(V||F){v=F,1==I&&(v=D.length%2==0?F:V);break}}k=f,null!=(P=d[T])&&(k=null),Y=D[D.length-1],j&&X&&(D=D.slice(1))}for(v&&(null!=d[0]&&d[0].y!=E.y||null==d[0]&&null!=c&&(E.y<c.y||E.y>c.y+c.height))?S(new mxPoint(b.x,E.y)):!v&&(null!=d[0]&&d[0].x!=E.x||null==d[0]&&null!=c&&(E.x<c.x||E.x>c.x+c.width))&&S(new mxPoint(E.x,b.y)),v?b.y=E.y:b.x=E.x,I=0;I<D.length;I++)E=D[I],(v=!v)?b.y=E.y:b.x=E.x,S(b.clone())}else E=b,v=!0;if(null==(b=d[T])&&null!=f&&(b=new mxPoint(e.view.getRoutingCenterX(f),e.view.getRoutingCenterY(f))),null!=b&&null!=E&&(v&&(null!=d[T]&&d[T].y!=E.y||null==d[T]&&null!=f&&(E.y<f.y||E.y>f.y+f.height))?S(new mxPoint(b.x,E.y)):!v&&(null!=d[T]&&d[T].x!=E.x||null==d[T]&&null!=f&&(E.x<f.x||E.x>f.x+f.width))&&S(new mxPoint(E.x,b.y))),null==d[0]&&null!=c)for(;l.length>1&&null!=l[1]&&mxUtils.contains(c,l[1].x,l[1].y);)l.splice(1,1);if(null==d[T]&&null!=f)for(;l.length>1&&null!=l[l.length-1]&&mxUtils.contains(f,l[l.length-1].x,l[l.length-1].y);)l.splice(l.length-1,1);null!=N&&null!=l[l.length-1]&&Math.abs(N.x-l[l.length-1].x)<=1&&Math.abs(N.y-l[l.length-1].y)<=1&&(l.splice(l.length-1,1),null!=l[l.length-1]&&(Math.abs(l[l.length-1].x-N.x)<1&&(l[l.length-1].x=N.x),Math.abs(l[l.length-1].y-N.y)<1&&(l[l.length-1].y=N.y)))},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(e,i){var s=mxUtils.getValue(e.style,i?mxConstants.STYLE_SOURCE_JETTY_SIZE:mxConstants.STYLE_TARGET_JETTY_SIZE,mxUtils.getValue(e.style,mxConstants.STYLE_JETTY_SIZE,mxEdgeStyle.orthBuffer));if("auto"==s)if(mxUtils.getValue(e.style,i?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE){var l=mxUtils.getNumber(e.style,i?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE);s=Math.max(2,Math.ceil((l+mxEdgeStyle.orthBuffer)/mxEdgeStyle.orthBuffer))*mxEdgeStyle.orthBuffer}else s=2*mxEdgeStyle.orthBuffer;return s},scalePointArray:function(e,i){var s=[];if(null!=e)for(var a=0;a<e.length;a++)if(null!=e[a]){var l=new mxPoint(Math.round(e[a].x/i*10)/10,Math.round(e[a].y/i*10)/10);s[a]=l}else s[a]=null;else s=null;return s},scaleCellState:function(e,i){var s=null;return null!=e?(s=e.clone()).setRect(Math.round(e.x/i*10)/10,Math.round(e.y/i*10)/10,Math.round(e.width/i*10)/10,Math.round(e.height/i*10)/10):s=null,s},OrthConnector:function(e,i,s,a,l){var d=e.view.graph,c=null!=x&&d.getModel().isEdge(x.cell),f=null!=v&&d.getModel().isEdge(v.cell),m=mxEdgeStyle.scalePointArray(e.absolutePoints,e.view.scale),x=mxEdgeStyle.scaleCellState(i,e.view.scale),v=mxEdgeStyle.scaleCellState(s,e.view.scale),E=m[0],S=m[m.length-1],b=null!=x?x.x:E.x,T=null!=x?x.y:E.y,D=null!=x?x.width:0,I=null!=x?x.height:0,O=null!=v?v.x:S.x,N=null!=v?v.y:S.y,k=null!=v?v.width:0,P=null!=v?v.height:0,F=mxEdgeStyle.getJettySize(e,!0),V=mxEdgeStyle.getJettySize(e,!1);null!=x&&v==x&&(F=V=Math.max(F,V));var Y=V+F,j=!1;if(null!=E&&null!=S&&(j=(_e=S.x-E.x)*_e+(rt=S.y-E.y)*rt<Y*Y),j||mxEdgeStyle.orthPointsFallback&&null!=a&&a.length>0||c||f)mxEdgeStyle.SegmentConnector(e,i,s,a,l);else{var Q,X=[mxConstants.DIRECTION_MASK_ALL,mxConstants.DIRECTION_MASK_ALL],Z=0;null!=x&&(X[0]=mxUtils.getPortConstraints(x,e,!0,mxConstants.DIRECTION_MASK_ALL),0!=(Z=mxUtils.getValue(x.style,mxConstants.STYLE_ROTATION,0)))&&(b=(Q=mxUtils.getBoundingBox(new mxRectangle(b,T,D,I),Z)).x,T=Q.y,D=Q.width,I=Q.height),null!=v&&(X[1]=mxUtils.getPortConstraints(v,e,!1,mxConstants.DIRECTION_MASK_ALL),0!=(Z=mxUtils.getValue(v.style,mxConstants.STYLE_ROTATION,0)))&&(O=(Q=mxUtils.getBoundingBox(new mxRectangle(O,N,k,P),Z)).x,N=Q.y,k=Q.width,P=Q.height);for(var ee=[0,0],K=[[b,T,D,I],[O,N,k,P]],oe=[F,V],B=0;B<2;B++)mxEdgeStyle.limits[B][1]=K[B][0]-oe[B],mxEdgeStyle.limits[B][2]=K[B][1]-oe[B],mxEdgeStyle.limits[B][4]=K[B][0]+K[B][2]+oe[B],mxEdgeStyle.limits[B][8]=K[B][1]+K[B][3]+oe[B];var _e,rt=K[0][1]+K[0][3]/2-(K[1][1]+K[1][3]/2),st=0;(_e=K[0][0]+K[0][2]/2-(K[1][0]+K[1][2]/2))<0?st=rt<0?2:1:rt<=0&&(st=3,0==_e&&(st=2));var Pe=null;null!=x&&(Pe=E);var et=[[.5,.5],[.5,.5]];for(B=0;B<2;B++)null!=Pe&&(et[B][0]=(Pe.x-K[B][0])/K[B][2],Math.abs(Pe.x-K[B][0])<=1?ee[B]=mxConstants.DIRECTION_MASK_WEST:Math.abs(Pe.x-K[B][0]-K[B][2])<=1&&(ee[B]=mxConstants.DIRECTION_MASK_EAST),et[B][1]=(Pe.y-K[B][1])/K[B][3],Math.abs(Pe.y-K[B][1])<=1?ee[B]=mxConstants.DIRECTION_MASK_NORTH:Math.abs(Pe.y-K[B][1]-K[B][3])<=1&&(ee[B]=mxConstants.DIRECTION_MASK_SOUTH)),Pe=null,null!=v&&(Pe=S);var Sn=K[0][1]-(K[1][1]+K[1][3]),jt=K[0][0]-(K[1][0]+K[1][2]),gt=K[1][1]-(K[0][1]+K[0][3]),xt=K[1][0]-(K[0][0]+K[0][2]);mxEdgeStyle.vertexSeperations[1]=Math.max(jt-Y,0),mxEdgeStyle.vertexSeperations[2]=Math.max(Sn-Y,0),mxEdgeStyle.vertexSeperations[4]=Math.max(gt-Y,0),mxEdgeStyle.vertexSeperations[3]=Math.max(xt-Y,0);var De=[],Ne=[],We=[];Ne[0]=jt>=xt?mxConstants.DIRECTION_MASK_WEST:mxConstants.DIRECTION_MASK_EAST,We[0]=Sn>=gt?mxConstants.DIRECTION_MASK_NORTH:mxConstants.DIRECTION_MASK_SOUTH,Ne[1]=mxUtils.reversePortConstraints(Ne[0]),We[1]=mxUtils.reversePortConstraints(We[0]);var _n=jt>=xt?jt:xt,Kt=Sn>=gt?Sn:gt,He=[[0,0],[0,0]],an=!1;for(B=0;B<2;B++)0==ee[B]&&(0==(Ne[B]&X[B])&&(Ne[B]=mxUtils.reversePortConstraints(Ne[B])),0==(We[B]&X[B])&&(We[B]=mxUtils.reversePortConstraints(We[B])),He[B][0]=We[B],He[B][1]=Ne[B]);for(Kt>0&&_n>0&&((Ne[0]&X[0])>0&&(We[1]&X[1])>0?(He[0][0]=Ne[0],He[0][1]=We[0],He[1][0]=We[1],He[1][1]=Ne[1],an=!0):(We[0]&X[0])>0&&(Ne[1]&X[1])>0&&(He[0][0]=We[0],He[0][1]=Ne[0],He[1][0]=Ne[1],He[1][1]=We[1],an=!0)),Kt>0&&!an&&(He[0][0]=We[0],He[0][1]=Ne[0],He[1][0]=We[1],He[1][1]=Ne[1],an=!0),_n>0&&!an&&(He[0][0]=Ne[0],He[0][1]=We[0],He[1][0]=Ne[1],He[1][1]=We[1],an=!0),B=0;B<2;B++)0==ee[B]&&(0==(He[B][0]&X[B])&&(He[B][0]=He[B][1]),De[B]=He[B][0]&X[B],De[B]|=(He[B][1]&X[B])<<8,De[B]|=(He[1-B][B]&X[B])<<16,De[B]|=(He[1-B][1-B]&X[B])<<24,0==(15&De[B])&&(De[B]=De[B]<<8),0==(3840&De[B])&&(De[B]=15&De[B]|De[B]>>8),0==(983040&De[B])&&(De[B]=65535&De[B]|(251658240&De[B])>>8),ee[B]=15&De[B],(X[B]==mxConstants.DIRECTION_MASK_WEST||X[B]==mxConstants.DIRECTION_MASK_NORTH||X[B]==mxConstants.DIRECTION_MASK_EAST||X[B]==mxConstants.DIRECTION_MASK_SOUTH)&&(ee[B]=X[B]));var jn=ee[0]==mxConstants.DIRECTION_MASK_EAST?3:ee[0],Yt=ee[1]==mxConstants.DIRECTION_MASK_EAST?3:ee[1];(jn-=st)<1&&(jn+=4),(Yt-=st)<1&&(Yt+=4);var zt=mxEdgeStyle.routePatterns[jn-1][Yt-1];switch(mxEdgeStyle.wayPoints1[0][0]=K[0][0],mxEdgeStyle.wayPoints1[0][1]=K[0][1],ee[0]){case mxConstants.DIRECTION_MASK_WEST:mxEdgeStyle.wayPoints1[0][0]-=F,mxEdgeStyle.wayPoints1[0][1]+=et[0][1]*K[0][3];break;case mxConstants.DIRECTION_MASK_SOUTH:mxEdgeStyle.wayPoints1[0][0]+=et[0][0]*K[0][2],mxEdgeStyle.wayPoints1[0][1]+=K[0][3]+F;break;case mxConstants.DIRECTION_MASK_EAST:mxEdgeStyle.wayPoints1[0][0]+=K[0][2]+F,mxEdgeStyle.wayPoints1[0][1]+=et[0][1]*K[0][3];break;case mxConstants.DIRECTION_MASK_NORTH:mxEdgeStyle.wayPoints1[0][0]+=et[0][0]*K[0][2],mxEdgeStyle.wayPoints1[0][1]-=F}var tt=0,ji=(ee[0]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))>0?0:1,Ho=ji,wn=0;for(B=0;B<zt.length;B++){var gr=15&zt[B],oi=gr==mxConstants.DIRECTION_MASK_EAST?3:gr;(oi+=st)>4&&(oi-=4);var Si=mxEdgeStyle.dirVectors[oi-1];(wn=oi%2>0?0:1)!=ji&&(tt++,mxEdgeStyle.wayPoints1[tt][0]=mxEdgeStyle.wayPoints1[tt-1][0],mxEdgeStyle.wayPoints1[tt][1]=mxEdgeStyle.wayPoints1[tt-1][1]);var Vo=(zt[B]&mxEdgeStyle.SOURCE_MASK)>0,Yn=(zt[B]&mxEdgeStyle.SIDE_MASK)>>5;(Yn<<=st)>15&&(Yn>>=4);var Cs=(zt[B]&mxEdgeStyle.CENTER_MASK)>0;if((Vo||(zt[B]&mxEdgeStyle.TARGET_MASK)>0)&&Yn<9){var _i,ai=Vo?0:1;if(_i=Cs&&0==wn?K[ai][0]+et[ai][0]*K[ai][2]:Cs?K[ai][1]+et[ai][1]*K[ai][3]:mxEdgeStyle.limits[ai][Yn],0==wn){var Fo=(_i-mxEdgeStyle.wayPoints1[tt][0])*Si[0];Fo>0&&(mxEdgeStyle.wayPoints1[tt][0]+=Si[0]*Fo)}else{var Go=(_i-mxEdgeStyle.wayPoints1[tt][1])*Si[1];Go>0&&(mxEdgeStyle.wayPoints1[tt][1]+=Si[1]*Go)}}else Cs&&(mxEdgeStyle.wayPoints1[tt][0]+=Si[0]*Math.abs(mxEdgeStyle.vertexSeperations[oi]/2),mxEdgeStyle.wayPoints1[tt][1]+=Si[1]*Math.abs(mxEdgeStyle.vertexSeperations[oi]/2));tt>0&&mxEdgeStyle.wayPoints1[tt][wn]==mxEdgeStyle.wayPoints1[tt-1][wn]?tt--:ji=wn}for(B=0;B<=tt&&(B!=tt||(((ee[1]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))>0?0:1)==Ho?0:1)==(tt+1)%2);B++)l.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[B][0]*e.view.scale*10)/10,Math.round(mxEdgeStyle.wayPoints1[B][1]*e.view.scale*10)/10));for(var bn=1;bn<l.length;)null==l[bn-1]||null==l[bn]||l[bn-1].x!=l[bn].x||l[bn-1].y!=l[bn].y?bn++:l.splice(bn,1)}},getRoutePattern:function(e,i,s,a){var l=e[0]==mxConstants.DIRECTION_MASK_EAST?3:e[0],d=e[1]==mxConstants.DIRECTION_MASK_EAST?3:e[1];(l-=i)<1&&(l+=4),(d-=i)<1&&(d+=4);var c=routePatterns[l-1][d-1];return(0==s||0==a)&&null!=inlineRoutePatterns[l-1][d-1]&&(c=inlineRoutePatterns[l-1][d-1]),c}};__mxOutput.mxEdgeStyle=void 0!==mxEdgeStyle?mxEdgeStyle:void 0;var mxStyleRegistry={values:[],putValue:function(e,i){mxStyleRegistry.values[e]=i},getValue:function(e){return mxStyleRegistry.values[e]},getName:function(e){for(var i in mxStyleRegistry.values)if(mxStyleRegistry.values[i]==e)return i;return null}};function mxGraphView(e){this.graph=e,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}function mxCurrentRootChange(e,i){if(this.view=e,this.root=i,this.previous=i,this.isUp=null==i,!this.isUp)for(var s=this.view.currentRoot,a=this.view.graph.getModel();null!=s;){if(s==i){this.isUp=!0;break}s=a.getParent(s)}}function mxGraph(e,i,s,a){this.mouseListeners=null,this.renderHint=s,this.dialect=mxClient.IS_SVG?mxConstants.DIALECT_SVG:s==mxConstants.RENDERING_HINT_EXACT&&mxClient.IS_VML?mxConstants.DIALECT_VML:s==mxConstants.RENDERING_HINT_FASTEST?mxConstants.DIALECT_STRICTHTML:s==mxConstants.RENDERING_HINT_FASTER?mxConstants.DIALECT_PREFERHTML:mxConstants.DIALECT_MIXEDHTML,this.model=null!=i?i:new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(null!=a?a:this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=mxUtils.bind(this,function(l,d){this.graphModelChanged(d.getProperty("edit").changes)}),this.model.addListener(mxEvent.CHANGE,this.graphModelChangeListener),this.createHandlers(),null!=e&&this.init(e),this.view.revalidate()}function mxCellOverlay(e,i,s,a,l,d){this.image=e,this.tooltip=i,this.align=null!=s?s:this.align,this.verticalAlign=null!=a?a:this.verticalAlign,this.offset=null!=l?l:new mxPoint,this.cursor=null!=d?d:"help"}function mxOutline(e,i){this.source=e,null!=i&&this.init(i)}function mxMultiplicity(e,i,s,a,l,d,c,f,m,x){this.source=e,this.type=i,this.attr=s,this.value=a,this.min=null!=l?l:0,this.max=null!=d?d:"n",this.validNeighbors=c,this.countError=mxResources.get(f)||f,this.typeError=mxResources.get(m)||m,this.validNeighborsAllowed=null==x||x}function mxLayoutManager(e){this.undoHandler=mxUtils.bind(this,function(i,s){this.isEnabled()&&this.beforeUndo(s.getProperty("edit"))}),this.moveHandler=mxUtils.bind(this,function(i,s){this.isEnabled()&&this.cellsMoved(s.getProperty("cells"),s.getProperty("event"))}),this.resizeHandler=mxUtils.bind(this,function(i,s){this.isEnabled()&&this.cellsResized(s.getProperty("cells"),s.getProperty("bounds"),s.getProperty("previous"))}),this.setGraph(e)}function mxSwimlaneManager(e,i,s,a){this.horizontal=null==i||i,this.addEnabled=null==s||s,this.resizeEnabled=null==a||a,this.addHandler=mxUtils.bind(this,function(l,d){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(d.getProperty("cells"))}),this.resizeHandler=mxUtils.bind(this,function(l,d){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(d.getProperty("cells"))}),this.setGraph(e)}function mxTemporaryCellStates(e,i,s,a,l){i=null!=i?i:1,this.view=e,this.oldValidateCellState=e.validateCellState,this.oldBounds=e.getGraphBounds(),this.oldStates=e.getStates(),this.oldScale=e.getScale(),this.oldDoRedrawShape=e.graph.cellRenderer.doRedrawShape;var d=this;if(null!=l&&(e.graph.cellRenderer.doRedrawShape=function(x){var v=x.shape.paint;x.shape.paint=function(E){var S=l(x);null!=S&&E.setLink(S),v.apply(this,arguments),null!=S&&E.setLink(null)},d.oldDoRedrawShape.apply(e.graph.cellRenderer,arguments),x.shape.paint=v}),e.validateCellState=function(x,v){return null==x||null==a||a(x)?d.oldValidateCellState.apply(e,arguments):null},e.setStates(new mxDictionary),e.setScale(i),null!=s){e.resetValidationState();for(var c=null,f=0;f<s.length;f++){var m=e.getBoundingBox(e.validateCellState(e.validateCell(s[f])));null==c?c=m:c.add(m)}e.setGraphBounds(c||new mxRectangle)}}function mxCellStatePreview(e){this.deltas=new mxDictionary,this.graph=e}function mxConnectionConstraint(e,i,s,a,l){this.point=e,this.perimeter=null==i||i,this.name=s,this.dx=a||0,this.dy=l||0}function mxGraphHandler(e){this.graph=e,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.suspended||(this.updatePreview(),this.updateHint())}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(i,s){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler),this.refreshHandler=mxUtils.bind(this,function(i,s){this.refreshThread&&window.clearTimeout(this.refreshThread),this.refreshThread=window.setTimeout(mxUtils.bind(this,function(){if(this.refreshThread=null,null!=this.first&&!this.suspended){var a=this.currentDx,l=this.currentDy;this.currentDx=0,this.currentDy=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),null!=this.pBounds||this.livePreviewUsed?(this.currentDx=a,this.currentDy=l,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1,!0),this.updatePreview())):this.reset()}}),0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.addListener(mxEvent.REFRESH,this.refreshHandler),this.keyHandler=mxUtils.bind(this,function(i){if(null!=this.graph.container&&"hidden"!=this.graph.container.style.visibility&&null!=this.first&&!this.suspended){var s=this.graph.isCloneEvent(i)&&this.graph.isCellsCloneable()&&this.isCloneEnabled();s!=this.cloning&&(this.cloning=s,this.checkPreview(),this.updatePreview())}}),mxEvent.addListener(document,"keydown",this.keyHandler),mxEvent.addListener(document,"keyup",this.keyHandler)}function mxPanningHandler(e){null!=e&&(this.graph=e,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(i,s){var a=s.getProperty("eventName"),l=s.getProperty("event");a==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(l)&&(this.start(l),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",l)),l.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(i,s){if(this.isPinchEnabled()){var a=s.getProperty("event");mxEvent.isConsumed(a)||"gesturestart"!=a.type?"gestureend"==a.type&&null!=this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,!this.active&&null!=this.mouseDownEvent&&(this.start(this.mouseDownEvent),this.mouseDownEvent=null)),null!=this.initialScale&&this.zoomGraph(a)}}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.reset()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener))}function mxPopupMenuHandler(e,i){null!=e&&(this.graph=e,this.factoryMethod=i,this.graph.addMouseListener(this),this.gestureHandler=mxUtils.bind(this,function(s,a){this.inTolerance=!1}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.init())}function mxCellMarker(e,i,s,a){mxEventSource.call(this),null!=e&&(this.graph=e,this.validColor=null!=i?i:mxConstants.DEFAULT_VALID_COLOR,this.invalidColor=null!=s?s:mxConstants.DEFAULT_INVALID_COLOR,this.hotspot=null!=a?a:mxConstants.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(e))}function mxSelectionCellsHandler(e){mxEventSource.call(this),this.graph=e,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=mxUtils.bind(this,function(i,s){this.isEnabled()&&this.refresh()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent.UP,this.refreshHandler)}function mxConnectionHandler(e,i){mxEventSource.call(this),null!=e&&(this.graph=e,this.factoryMethod=i,this.init(),this.escapeHandler=mxUtils.bind(this,function(s,a){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxConstraintHandler(e){this.graph=e,this.resetHandler=mxUtils.bind(this,function(i,s){null!=this.currentFocus&&null==this.graph.view.getState(this.currentFocus.cell)?this.reset():this.redraw()}),this.graph.model.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE,this.resetHandler),this.graph.addListener(mxEvent.ROOT,this.resetHandler)}function mxRubberband(e){null!=e&&(this.graph=e,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils.bind(this,function(i,s){var a=s.getProperty("eventName"),l=s.getProperty("event");if(a==mxEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(l)){var d=mxUtils.getOffset(this.graph.container),c=mxUtils.getScrollOrigin(this.graph.container);c.x-=d.x,c.y-=d.y,this.start(l.getX()+c.x,l.getY()+c.y),l.consume(!1)}}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.gestureHandler=mxUtils.bind(this,function(i,s){null!=this.first&&this.reset()}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxHandle(e,i,s,a){this.graph=e.view.graph,this.state=e,this.cursor=null!=i?i:this.cursor,this.image=null!=s?s:this.image,this.shape=null!=a?a:null,this.init()}function mxVertexHandler(e){null!=e&&(this.state=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(i,s){this.livePreview&&null!=this.index&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxEdgeHandler(e){null!=e&&null!=e.shape&&(this.state=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(i,s){var a=null!=this.index;this.reset(),a&&this.graph.cellRenderer.redraw(this.state,!1,e.view.isRendering())}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxElbowEdgeHandler(e){mxEdgeHandler.call(this,e)}function mxEdgeSegmentHandler(e){mxEdgeHandler.call(this,e)}function mxKeyHandler(e,i){null!=e&&(this.graph=e,this.target=i||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils.bind(this,function(s){this.keyDown(s)}),mxEvent.addListener(this.target,"keydown",this.keydownHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxTooltipHandler(e,i){null!=e&&(this.graph=e,this.delay=i||500,this.graph.addMouseListener(this))}function mxCellTracker(e,i,s){mxCellMarker.call(this,e,i),this.graph.addMouseListener(this),null!=s&&(this.getCell=s),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxCellHighlight(e,i,s,a){null!=e&&(this.graph=e,this.highlightColor=null!=i?i:mxConstants.DEFAULT_VALID_COLOR,this.strokeWidth=null!=s?s:mxConstants.HIGHLIGHT_STROKEWIDTH,this.dashed=null!=a&&a,this.opacity=mxConstants.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils.bind(this,function(){if(null!=this.state){var l=this.graph.view.getState(this.state.cell);null==l?this.hide():(this.state=l,this.repaint())}}),this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler),this.resetHandler=mxUtils.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent.UP,this.resetHandler))}function mxDefaultKeyHandler(e){if(null!=e){this.editor=e,this.handler=new mxKeyHandler(e.graph);var i=this.handler.escape;this.handler.escape=function(s){i.apply(this,arguments),e.hideProperties(),e.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",s))}}}function mxDefaultPopupMenu(e){this.config=e}function mxDefaultToolbar(e,i){this.editor=i,null!=e&&null!=i&&this.init(e)}function mxEditor(e){this.actions=[],this.addActions(),null!=document.body&&(this.cycleAttributeValues=[],this.popupHandler=new mxDefaultPopupMenu,this.undoManager=new mxUndoManager,this.graph=this.createGraph(),this.toolbar=this.createToolbar(),this.keyHandler=new mxDefaultKeyHandler(this),this.configure(e),this.graph.swimlaneIndicatorColorAttribute=this.cycleAttributeName,null!=this.onInit&&this.onInit(),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter),__mxOutput.mxStyleRegistry=void 0!==mxStyleRegistry?mxStyleRegistry:void 0,mxGraphView.prototype=new mxEventSource,mxGraphView.prototype.constructor=mxGraphView,mxGraphView.prototype.EMPTY_POINT=new mxPoint,mxGraphView.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphView.prototype.updatingDocumentResource="none"!=mxClient.language?"updatingDocument":"",mxGraphView.prototype.allowEval=!1,mxGraphView.prototype.captureDocumentGesture=!0,mxGraphView.prototype.optimizeVmlReflows=!0,mxGraphView.prototype.rendering=!0,mxGraphView.prototype.graph=null,mxGraphView.prototype.currentRoot=null,mxGraphView.prototype.graphBounds=null,mxGraphView.prototype.scale=1,mxGraphView.prototype.translate=null,mxGraphView.prototype.states=null,mxGraphView.prototype.updateStyle=!1,mxGraphView.prototype.lastNode=null,mxGraphView.prototype.lastHtmlNode=null,mxGraphView.prototype.lastForegroundNode=null,mxGraphView.prototype.lastForegroundHtmlNode=null,mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds},mxGraphView.prototype.setGraphBounds=function(e){this.graphBounds=e},mxGraphView.prototype.getBounds=function(e){var i=null;if(null!=e&&e.length>0)for(var s=this.graph.getModel(),a=0;a<e.length;a++)if(s.isVertex(e[a])||s.isEdge(e[a])){var l=this.getState(e[a]);null!=l&&(null==i?i=mxRectangle.fromRectangle(l):i.add(l))}return i},mxGraphView.prototype.setCurrentRoot=function(e){if(this.currentRoot!=e){var i=new mxCurrentRootChange(this,e);i.execute();var s=new mxUndoableEdit(this,!0);s.add(i),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",s)),this.graph.sizeDidChange()}return e},mxGraphView.prototype.scaleAndTranslate=function(e,i,s){var a=this.scale,l=new mxPoint(this.translate.x,this.translate.y);(this.scale!=e||this.translate.x!=i||this.translate.y!=s)&&(this.scale=e,this.translate.x=i,this.translate.y=s,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,"scale",e,"previousScale",a,"translate",this.translate,"previousTranslate",l))},mxGraphView.prototype.getScale=function(){return this.scale},mxGraphView.prototype.setScale=function(e){var i=this.scale;this.scale!=e&&(this.scale=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE,"scale",e,"previousScale",i))},mxGraphView.prototype.getTranslate=function(){return this.translate},mxGraphView.prototype.setTranslate=function(e,i){var s=new mxPoint(this.translate.x,this.translate.y);(this.translate.x!=e||this.translate.y!=i)&&(this.translate.x=e,this.translate.y=i,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.TRANSLATE,"translate",this.translate,"previousTranslate",s))},mxGraphView.prototype.viewStateChanged=function(){this.revalidate(),this.graph.sizeDidChange()},mxGraphView.prototype.refresh=function(){null!=this.currentRoot&&this.clear(),this.revalidate()},mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()},mxGraphView.prototype.clear=function(e,i,s){var a=this.graph.getModel();if(e=e||a.getRoot(),i=null!=i&&i,s=null==s||s,this.removeState(e),s&&(i||e!=this.currentRoot))for(var l=a.getChildCount(e),d=0;d<l;d++)this.clear(a.getChildAt(e,d),i);else this.invalidate(e)},mxGraphView.prototype.invalidate=function(e,i,s){var a=this.graph.getModel();e=e||a.getRoot(),i=null==i||i,s=null==s||s;var l=this.getState(e);if(null!=l&&(l.invalid=!0),!e.invalidating){if(e.invalidating=!0,i)for(var d=a.getChildCount(e),c=0;c<d;c++){var f=a.getChildAt(e,c);this.invalidate(f,i,s)}if(s){var m=a.getEdgeCount(e);for(c=0;c<m;c++)this.invalidate(a.getEdgeAt(e,c),i,s)}delete e.invalidating}},mxGraphView.prototype.validate=function(e){var i=mxLog.enter("mxGraphView.validate");window.status=mxResources.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var s=null;this.optimizeVmlReflows&&null!=this.canvas&&null==this.textDiv&&(8==document.documentMode&&!mxClient.IS_EM||mxClient.IS_QUIRKS)&&(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),s=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv));var a=this.getBoundingBox(this.validateCellState(this.validateCell(e||(null!=this.currentRoot?this.currentRoot:this.graph.getModel().getRoot()))));this.setGraphBounds(null!=a?a:this.getEmptyBounds()),this.validateBackground(),null!=s&&(this.canvas.style.display=s,this.textDiv.parentNode.removeChild(this.textDiv),null!=this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",i)},mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)},mxGraphView.prototype.getBoundingBox=function(e,i){i=null==i||i;var s=null;if(null!=e&&(null!=e.shape&&null!=e.shape.boundingBox&&(s=e.shape.boundingBox.clone()),null!=e.text&&null!=e.text.boundingBox&&(null!=s?s.add(e.text.boundingBox):s=e.text.boundingBox.clone()),i))for(var a=this.graph.getModel(),l=a.getChildCount(e.cell),d=0;d<l;d++){var c=this.getBoundingBox(this.getState(a.getChildAt(e.cell,d)));null!=c&&(null==s?s=c:s.add(c))}return s},mxGraphView.prototype.createBackgroundPageShape=function(e){return new mxRectangleShape(e,"white","black")},mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()},mxGraphView.prototype.validateBackgroundImage=function(){var e=this.graph.getBackgroundImage();if(null!=e){if(null==this.backgroundImage||this.backgroundImage.image!=e.src){null!=this.backgroundImage&&this.backgroundImage.destroy();var i=new mxRectangle(0,0,1,1);this.backgroundImage=new mxImageShape(i,e.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),8==document.documentMode&&!mxClient.IS_EM&&mxEvent.addGestureListeners(this.backgroundImage.node,mxUtils.bind(this,function(s){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(s))}),mxUtils.bind(this,function(s){this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(s))}),mxUtils.bind(this,function(s){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(s))}))}this.redrawBackgroundImage(this.backgroundImage,e)}else null!=this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)},mxGraphView.prototype.validateBackgroundPage=function(){if(this.graph.pageVisible){var e=this.getBackgroundPageBounds();null==this.backgroundPageShape?(this.backgroundPageShape=this.createBackgroundPageShape(e),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(i){this.graph.dblClick(i)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(i){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(i))}),mxUtils.bind(this,function(i){null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent.isConsumed(i)&&this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(i))}),mxUtils.bind(this,function(i){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(i))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=e,this.backgroundPageShape.redraw())}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)},mxGraphView.prototype.getBackgroundPageBounds=function(){var e=this.graph.pageFormat,i=this.scale*this.graph.pageScale;return new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,e.width*i,e.height*i)},mxGraphView.prototype.redrawBackgroundImage=function(e,i){e.scale=this.scale,e.bounds.x=this.scale*this.translate.x,e.bounds.y=this.scale*this.translate.y,e.bounds.width=this.scale*i.width,e.bounds.height=this.scale*i.height,e.redraw()},mxGraphView.prototype.validateCell=function(e,i){if(i=null==i||i,null!=e)if(i=i&&this.graph.isCellVisible(e),null==this.getState(e,i)||i)for(var a=this.graph.getModel(),l=a.getChildCount(e),d=0;d<l;d++)this.validateCell(a.getChildAt(e,d),i&&(!this.isCellCollapsed(e)||e==this.currentRoot));else this.removeState(e);return e},mxGraphView.prototype.validateCellState=function(e,i){i=null==i||i;var s=null;if(null!=e&&null!=(s=this.getState(e))){var a=this.graph.getModel();if(s.invalid&&(s.invalid=!1,(null==s.style||s.invalidStyle)&&(s.style=this.graph.getCellStyle(s.cell),s.invalidStyle=!1),e!=this.currentRoot&&this.validateCellState(a.getParent(e),!1),s.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!0),!1),!0),s.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!1),!1),!1),this.updateCellState(s),e!=this.currentRoot&&!s.invalid&&(this.graph.cellRenderer.redraw(s,!1,this.isRendering()),s.updateCachedBounds())),i&&!s.invalid){null!=s.shape&&this.stateValidated(s);for(var l=a.getChildCount(e),d=0;d<l;d++)this.validateCellState(a.getChildAt(e,d))}}return s},mxGraphView.prototype.updateCellState=function(e){if(e.absoluteOffset.x=0,e.absoluteOffset.y=0,e.origin.x=0,e.origin.y=0,e.length=0,e.cell!=this.currentRoot){var i=this.graph.getModel(),s=this.getState(i.getParent(e.cell));null!=s&&s.cell!=this.currentRoot&&(e.origin.x+=s.origin.x,e.origin.y+=s.origin.y);var a=this.graph.getChildOffsetForCell(e.cell);null!=a&&(e.origin.x+=a.x,e.origin.y+=a.y);var l=this.graph.getCellGeometry(e.cell);if(null!=l){if(!i.isEdge(e.cell))if(a=null!=l.offset?l.offset:this.EMPTY_POINT,l.relative&&null!=s)if(i.isEdge(s.cell)){var d=this.getPoint(s,l);null!=d&&(e.origin.x+=d.x/this.scale-s.origin.x-this.translate.x,e.origin.y+=d.y/this.scale-s.origin.y-this.translate.y)}else e.origin.x+=l.x*s.unscaledWidth+a.x,e.origin.y+=l.y*s.unscaledHeight+a.y;else e.absoluteOffset.x=this.scale*a.x,e.absoluteOffset.y=this.scale*a.y,e.origin.x+=l.x,e.origin.y+=l.y;e.x=this.scale*(this.translate.x+e.origin.x),e.y=this.scale*(this.translate.y+e.origin.y),e.width=this.scale*l.width,e.unscaledWidth=l.width,e.height=this.scale*l.height,e.unscaledHeight=l.height,i.isVertex(e.cell)&&this.updateVertexState(e,l),i.isEdge(e.cell)&&this.updateEdgeState(e,l)}}e.updateCachedBounds()},mxGraphView.prototype.isCellCollapsed=function(e){return this.graph.isCellCollapsed(e)},mxGraphView.prototype.updateVertexState=function(e,i){var s=this.graph.getModel(),a=this.getState(s.getParent(e.cell));if(i.relative&&null!=a&&!s.isEdge(a.cell)){var l=mxUtils.toRadians(a.style[mxConstants.STYLE_ROTATION]||"0");if(0!=l){var d=Math.cos(l),c=Math.sin(l),f=new mxPoint(e.getCenterX(),e.getCenterY()),m=new mxPoint(a.getCenterX(),a.getCenterY()),x=mxUtils.getRotatedPoint(f,d,c,m);e.x=x.x-e.width/2,e.y=x.y-e.height/2}}this.updateVertexLabelOffset(e)},mxGraphView.prototype.updateEdgeState=function(e,i){var s=e.getVisibleTerminalState(!0),a=e.getVisibleTerminalState(!1);if(null!=this.graph.model.getTerminal(e.cell,!0)&&null==s||null==s&&null==i.getTerminalPoint(!0)||null!=this.graph.model.getTerminal(e.cell,!1)&&null==a||null==a&&null==i.getTerminalPoint(!1))this.clear(e.cell,!0);else{this.updateFixedTerminalPoints(e,s,a),this.updatePoints(e,i.points,s,a),this.updateFloatingTerminalPoints(e,s,a);var l=e.absolutePoints;e.cell!=this.currentRoot&&(null==l||l.length<2||null==l[0]||null==l[l.length-1])?this.clear(e.cell,!0):(this.updateEdgeBounds(e),this.updateEdgeLabelOffset(e))}},mxGraphView.prototype.updateVertexLabelOffset=function(e){var i=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);if(i==mxConstants.ALIGN_LEFT)null!=(s=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null))?s*=this.scale:s=e.width,e.absoluteOffset.x-=s;else if(i==mxConstants.ALIGN_RIGHT)e.absoluteOffset.x+=e.width;else if(i==mxConstants.ALIGN_CENTER){var s;if(null!=(s=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null))){var a=mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),l=0;a==mxConstants.ALIGN_CENTER?l=.5:a==mxConstants.ALIGN_RIGHT&&(l=1),0!=l&&(e.absoluteOffset.x-=(s*this.scale-e.width)*l)}}var d=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);d==mxConstants.ALIGN_TOP?e.absoluteOffset.y-=e.height:d==mxConstants.ALIGN_BOTTOM&&(e.absoluteOffset.y+=e.height)},mxGraphView.prototype.resetValidationState=function(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null},mxGraphView.prototype.stateValidated=function(e){var i=this.graph.getModel().isEdge(e.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(e.cell)&&this.graph.keepEdgesInBackground,l=this.graph.cellRenderer.insertStateAfter(e,i&&this.lastForegroundNode||this.lastNode,i&&this.lastForegroundHtmlNode||this.lastHtmlNode);i?(this.lastForegroundHtmlNode=l[1],this.lastForegroundNode=l[0]):(this.lastHtmlNode=l[1],this.lastNode=l[0])},mxGraphView.prototype.updateFixedTerminalPoints=function(e,i,s){this.updateFixedTerminalPoint(e,i,!0,this.graph.getConnectionConstraint(e,i,!0)),this.updateFixedTerminalPoint(e,s,!1,this.graph.getConnectionConstraint(e,s,!1))},mxGraphView.prototype.updateFixedTerminalPoint=function(e,i,s,a){e.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(e,i,s,a),s)},mxGraphView.prototype.getFixedTerminalPoint=function(e,i,s,a){var l=null;if(null!=a&&(l=this.graph.getConnectionPoint(i,a,!1)),null==l&&null==i){var d=this.scale,c=this.translate,f=e.origin;null!=(l=this.graph.getCellGeometry(e.cell).getTerminalPoint(s))&&(l=new mxPoint(d*(c.x+l.x+f.x),d*(c.y+l.y+f.y)))}return l},mxGraphView.prototype.updateBoundsFromStencil=function(e){var i=null;if(null!=e&&null!=e.shape&&null!=e.shape.stencil&&"fixed"==e.shape.stencil.aspect){i=mxRectangle.fromRectangle(e);var s=e.shape.stencil.computeAspect(e.style,e.x,e.y,e.width,e.height);e.setRect(s.x,s.y,e.shape.stencil.w0*s.width,e.shape.stencil.h0*s.height)}return i},mxGraphView.prototype.updatePoints=function(e,i,s,a){if(null!=e){var l=[];l.push(e.absolutePoints[0]);var d=this.getEdgeStyle(e,i,s,a);if(null!=d){var c=this.getTerminalPort(e,s,!0),f=this.getTerminalPort(e,a,!1),m=this.updateBoundsFromStencil(c),x=this.updateBoundsFromStencil(f);d(e,c,f,i,l),null!=m&&c.setRect(m.x,m.y,m.width,m.height),null!=x&&f.setRect(x.x,x.y,x.width,x.height)}else if(null!=i)for(var v=0;v<i.length;v++)if(null!=i[v]){var E=mxUtils.clone(i[v]);l.push(this.transformControlPoint(e,E))}var S=e.absolutePoints;l.push(S[S.length-1]),e.absolutePoints=l}},mxGraphView.prototype.transformControlPoint=function(e,i,s){if(null!=e&&null!=i){var a=e.origin,l=s?1:this.scale;return new mxPoint(l*(i.x+this.translate.x+a.x),l*(i.y+this.translate.y+a.y))}return null},mxGraphView.prototype.isLoopStyleEnabled=function(e,i,s,a){var l=this.graph.getConnectionConstraint(e,s,!0),d=this.graph.getConnectionConstraint(e,a,!1);return!(!(null==i||i.length<2)||mxUtils.getValue(e.style,mxConstants.STYLE_ORTHOGONAL_LOOP,!1)&&(null!=l&&null!=l.point||null!=d&&null!=d.point))&&null!=s&&s==a},mxGraphView.prototype.getEdgeStyle=function(e,i,s,a){var l=this.isLoopStyleEnabled(e,i,s,a)?mxUtils.getValue(e.style,mxConstants.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils.getValue(e.style,mxConstants.STYLE_NOEDGESTYLE,!1)?null:e.style[mxConstants.STYLE_EDGE];if("string"==typeof l){var d=mxStyleRegistry.getValue(l);null==d&&this.isAllowEval()&&(d=mxUtils.eval(l)),l=d}return"function"==typeof l?l:null},mxGraphView.prototype.updateFloatingTerminalPoints=function(e,i,s){var a=e.absolutePoints,l=a[0];null==a[a.length-1]&&null!=s&&this.updateFloatingTerminalPoint(e,s,i,!1),null==l&&null!=i&&this.updateFloatingTerminalPoint(e,i,s,!0)},mxGraphView.prototype.updateFloatingTerminalPoint=function(e,i,s,a){e.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(e,i,s,a),a)},mxGraphView.prototype.getFloatingTerminalPoint=function(e,i,s,a){i=this.getTerminalPort(e,i,a);var l=this.getNextPoint(e,s,a),d=this.graph.isOrthogonal(e),c=mxUtils.toRadians(Number(i.style[mxConstants.STYLE_ROTATION]||"0")),f=new mxPoint(i.getCenterX(),i.getCenterY());if(0!=c){var m=Math.cos(-c),x=Math.sin(-c);l=mxUtils.getRotatedPoint(l,m,x,f)}var v=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0);v+=parseFloat(e.style[a?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0);var E=this.getPerimeterPoint(i,l,0==c&&d,v);return 0!=c&&(m=Math.cos(c),x=Math.sin(c),E=mxUtils.getRotatedPoint(E,m,x,f)),E},mxGraphView.prototype.getTerminalPort=function(e,i,s){var l=mxUtils.getValue(e.style,s?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT);if(null!=l){var d=this.getState(this.graph.getModel().getCell(l));null!=d&&(i=d)}return i},mxGraphView.prototype.getPerimeterPoint=function(e,i,s,a){var l=null;if(null!=e){var d=this.getPerimeterFunction(e);if(null!=d&&null!=i){var c=this.getPerimeterBounds(e,a);if(c.width>0||c.height>0){l=new mxPoint(i.x,i.y);var f=!1,m=!1;this.graph.model.isVertex(e.cell)&&(f=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPH,0),m=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPV,0),null!=e.shape&&null!=e.shape.stencil&&(f=1==mxUtils.getValue(e.style,"stencilFlipH",0)||f,m=1==mxUtils.getValue(e.style,"stencilFlipV",0)||m),f&&(l.x=2*c.getCenterX()-l.x),m&&(l.y=2*c.getCenterY()-l.y)),null!=(l=d(c,e,l,s))&&(f&&(l.x=2*c.getCenterX()-l.x),m&&(l.y=2*c.getCenterY()-l.y))}}null==l&&(l=this.getPoint(e))}return l},mxGraphView.prototype.getRoutingCenterX=function(e){var i=null!=e.style&&parseFloat(e.style[mxConstants.STYLE_ROUTING_CENTER_X])||0;return e.getCenterX()+i*e.width},mxGraphView.prototype.getRoutingCenterY=function(e){var i=null!=e.style&&parseFloat(e.style[mxConstants.STYLE_ROUTING_CENTER_Y])||0;return e.getCenterY()+i*e.height},mxGraphView.prototype.getPerimeterBounds=function(e,i){return i=null!=i?i:0,null!=e&&(i+=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),e.getPerimeterBounds(i*this.scale)},mxGraphView.prototype.getPerimeterFunction=function(e){var i=e.style[mxConstants.STYLE_PERIMETER];if("string"==typeof i){var s=mxStyleRegistry.getValue(i);null==s&&this.isAllowEval()&&(s=mxUtils.eval(i)),i=s}return"function"==typeof i?i:null},mxGraphView.prototype.getNextPoint=function(e,i,s){var a=e.absolutePoints,l=null;if(null!=a&&a.length>=2){var d=a.length;l=a[s?Math.min(1,d-1):Math.max(0,d-2)]}return null==l&&null!=i&&(l=new mxPoint(i.getCenterX(),i.getCenterY())),l},mxGraphView.prototype.getVisibleTerminal=function(e,i){for(var s=this.graph.getModel(),a=s.getTerminal(e,i),l=a;null!=a&&a!=this.currentRoot;)(!this.graph.isCellVisible(l)||this.isCellCollapsed(a))&&(l=a),a=s.getParent(a);return null!=l&&(!s.contains(l)||s.getParent(l)==s.getRoot()||l==this.currentRoot)&&(l=null),l},mxGraphView.prototype.updateEdgeBounds=function(e){var i=e.absolutePoints,s=i[0],a=i[i.length-1];if(s.x!=a.x||s.y!=a.y){var l=a.x-s.x,d=a.y-s.y;e.terminalDistance=Math.sqrt(l*l+d*d)}else e.terminalDistance=0;var c=0,f=[],m=s;if(null!=m){for(var x=m.x,v=m.y,E=x,S=v,b=1;b<i.length;b++){var T=i[b];if(null!=T){l=m.x-T.x,d=m.y-T.y;var D=Math.sqrt(l*l+d*d);f.push(D),c+=D,m=T,x=Math.min(m.x,x),v=Math.min(m.y,v),E=Math.max(m.x,E),S=Math.max(m.y,S)}}e.length=c,e.segments=f,e.x=x,e.y=v,e.width=Math.max(1,E-x),e.height=Math.max(1,S-v)}},mxGraphView.prototype.getPoint=function(e,i){var s=e.getCenterX(),a=e.getCenterY();if(null==e.segments||null!=i&&!i.relative)null!=i&&null!=(I=i.offset)&&(s+=I.x,a+=I.y);else{for(var d=e.absolutePoints.length,c=Math.round((.5+(null!=i?i.x/2:0))*e.length),f=e.segments[0],m=0,x=1;c>=Math.round(m+f)&&x<d-1;)m+=f,f=e.segments[x++];var v=0==f?0:(c-m)/f,E=e.absolutePoints[x-1],S=e.absolutePoints[x];if(null!=E&&null!=S){var I,b=0,T=0,D=0;null!=i&&(b=i.y,null!=(I=i.offset)&&(T=I.x,D=I.y));var O=S.x-E.x,N=S.y-E.y;s=E.x+O*v+((0==f?0:N/f)*b+T)*this.scale,a=E.y+N*v-((0==f?0:O/f)*b-D)*this.scale}}return new mxPoint(s,a)},mxGraphView.prototype.getRelativePoint=function(e,i,s){var l=this.graph.getModel().getGeometry(e.cell);if(null!=l){var d=e.absolutePoints.length;if(l.relative&&d>1){for(var c=e.length,f=e.segments,m=e.absolutePoints[0],x=e.absolutePoints[1],v=mxUtils.ptSegDistSq(m.x,m.y,x.x,x.y,i,s),E=0,S=0,b=0,T=2;T<d;T++){S+=f[T-2];var D=mxUtils.ptSegDistSq(m.x,m.y,(x=e.absolutePoints[T]).x,x.y,i,s);D<=v&&(v=D,E=T-1,b=S),m=x}var I=f[E],k=(x=e.absolutePoints[E+1]).x,P=x.y,F=i,V=s,Y=(m=e.absolutePoints[E]).x-k,j=m.y-P,Z=(F=Y-(F-=k))*Y+(V=j-(V-=P))*j,Q=Math.sqrt(Z<=0?0:Z*Z/(Y*Y+j*j));Q>I&&(Q=I);var ee=Math.sqrt(mxUtils.ptSegDistSq(m.x,m.y,x.x,x.y,i,s));return-1==mxUtils.relativeCcw(m.x,m.y,x.x,x.y,i,s)&&(ee=-ee),new mxPoint((c/2-b-Q)/c*-2,ee/this.scale)}}return new mxPoint},mxGraphView.prototype.updateEdgeLabelOffset=function(e){var i=e.absolutePoints;if(e.absoluteOffset.x=e.getCenterX(),e.absoluteOffset.y=e.getCenterY(),null!=i&&i.length>0&&null!=e.segments){var s=this.graph.getCellGeometry(e.cell);if(s.relative){var a=this.getPoint(e,s);null!=a&&(e.absoluteOffset=a)}else{var l=i[0],d=i[i.length-1];if(null!=l&&null!=d){var m=0,x=0,v=s.offset;null!=v&&(m=v.x,x=v.y);var S=l.y+(d.y-l.y)/2+x*this.scale;e.absoluteOffset.x=l.x+(d.x-l.x)/2+m*this.scale,e.absoluteOffset.y=S}}}},mxGraphView.prototype.getState=function(e,i){i=i||!1;var s=null;return null!=e&&(s=this.states.get(e),i&&(null==s||this.updateStyle)&&this.graph.isCellVisible(e)&&(null==s?(s=this.createState(e),this.states.put(e,s)):s.style=this.graph.getCellStyle(e))),s},mxGraphView.prototype.isRendering=function(){return this.rendering},mxGraphView.prototype.setRendering=function(e){this.rendering=e},mxGraphView.prototype.isAllowEval=function(){return this.allowEval},mxGraphView.prototype.setAllowEval=function(e){this.allowEval=e},mxGraphView.prototype.getStates=function(){return this.states},mxGraphView.prototype.setStates=function(e){this.states=e},mxGraphView.prototype.getCellStates=function(e){if(null==e)return this.states;for(var i=[],s=0;s<e.length;s++){var a=this.getState(e[s]);null!=a&&i.push(a)}return i},mxGraphView.prototype.removeState=function(e){var i=null;return null!=e&&null!=(i=this.states.remove(e))&&(this.graph.cellRenderer.destroy(i),i.invalid=!0,i.destroy()),i},mxGraphView.prototype.createState=function(e){return new mxCellState(this,e,this.graph.getCellStyle(e))},mxGraphView.prototype.getCanvas=function(){return this.canvas},mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane},mxGraphView.prototype.getDrawPane=function(){return this.drawPane},mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane},mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane},mxGraphView.prototype.isContainerEvent=function(e){var i=mxEvent.getSource(e);return i==this.graph.container||i.parentNode==this.backgroundPane||null!=i.parentNode&&i.parentNode.parentNode==this.backgroundPane||i==this.canvas.parentNode||i==this.canvas||i==this.backgroundPane||i==this.drawPane||i==this.overlayPane||i==this.decoratorPane},mxGraphView.prototype.isScrollEvent=function(e){var i=mxUtils.getOffset(this.graph.container),s=new mxPoint(e.clientX-i.x,e.clientY-i.y),a=this.graph.container.offsetWidth,l=this.graph.container.clientWidth;if(a>l&&s.x>l+2&&s.x<=a)return!0;var d=this.graph.container.offsetHeight,c=this.graph.container.clientHeight;return d>c&&s.y>c+2&&s.y<=d},mxGraphView.prototype.init=function(){this.installListeners();var e=this.graph;e.dialect==mxConstants.DIALECT_SVG?this.createSvg():e.dialect==mxConstants.DIALECT_VML?this.createVml():this.createHtml()},mxGraphView.prototype.installListeners=function(){var e=this.graph,i=e.container;if(null!=i){mxClient.IS_TOUCH&&(mxEvent.addListener(i,"gesturestart",mxUtils.bind(this,function(l){e.fireGestureEvent(l),mxEvent.consume(l)})),mxEvent.addListener(i,"gesturechange",mxUtils.bind(this,function(l){e.fireGestureEvent(l),mxEvent.consume(l)})),mxEvent.addListener(i,"gestureend",mxUtils.bind(this,function(l){e.fireGestureEvent(l),mxEvent.consume(l)})));var s=null;mxEvent.addGestureListeners(i,mxUtils.bind(this,function(l){this.isContainerEvent(l)&&(!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_GC&&!mxClient.IS_OP&&!mxClient.IS_SF||!this.isScrollEvent(l))&&(e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(l)),s=l.pointerId)}),mxUtils.bind(this,function(l){this.isContainerEvent(l)&&(null==s||l.pointerId==s)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(l))}),mxUtils.bind(this,function(l){this.isContainerEvent(l)&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(l)),s=null})),mxEvent.addListener(i,"dblclick",mxUtils.bind(this,function(l){this.isContainerEvent(l)&&e.dblClick(l)})),e.addMouseListener({mouseDown:function(l,d){e.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils.bind(this,function(l){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(l)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&!mxEvent.isConsumed(l)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(l,function(l){var d=null;if(mxClient.IS_TOUCH){var c=mxEvent.getClientX(l),f=mxEvent.getClientY(l),m=mxUtils.convertPoint(i,c,f);d=e.view.getState(e.getCellAt(m.x,m.y))}return d}(l)))}),this.endHandler=mxUtils.bind(this,function(l){this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(l)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(l))}),mxEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler)}},mxGraphView.prototype.createHtml=function(){var e=this.graph.container;if(null!=e&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas),this.updateContainerStyle(e),mxClient.IS_QUIRKS)){var i=mxUtils.bind(this,function(s){var a=this.getGraphBounds();this.updateHtmlCanvasSize(a.x+a.width+this.graph.border,a.y+a.height+this.graph.border)});mxEvent.addListener(window,"resize",i)}},mxGraphView.prototype.updateHtmlCanvasSize=function(e,i){if(null!=this.graph.container){var a=this.graph.container.offsetHeight;this.canvas.style.width=this.graph.container.offsetWidth<e?e+"px":"100%",this.canvas.style.height=a<i?i+"px":"100%"}},mxGraphView.prototype.createHtmlPane=function(e,i){var s=document.createElement("DIV");return null!=e&&null!=i?(s.style.position="absolute",s.style.left="0px",s.style.top="0px",s.style.width=e,s.style.height=i):s.style.position="relative",s},mxGraphView.prototype.createVml=function(){var e=this.graph.container;if(null!=e){var i=e.offsetWidth,s=e.offsetHeight;this.canvas=this.createVmlPane(i,s),this.canvas.style.overflow="hidden",this.backgroundPane=this.createVmlPane(i,s),this.drawPane=this.createVmlPane(i,s),this.overlayPane=this.createVmlPane(i,s),this.decoratorPane=this.createVmlPane(i,s),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas)}},mxGraphView.prototype.createVmlPane=function(e,i){var s=document.createElement(mxClient.VML_PREFIX+":group");return s.style.position="absolute",s.style.left="0px",s.style.top="0px",s.style.width=e+"px",s.style.height=i+"px",s.setAttribute("coordsize",e+","+i),s.setAttribute("coordorigin","0,0"),s},mxGraphView.prototype.createSvg=function(){var e=this.graph.container;this.canvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var i=document.createElementNS(mxConstants.NS_SVG,"svg");i.style.left="0px",i.style.top="0px",i.style.width="100%",i.style.height="100%",i.style.display="block",i.appendChild(this.canvas),(mxClient.IS_IE||mxClient.IS_IE11)&&(i.style.overflow="hidden"),null!=e&&(e.appendChild(i),this.updateContainerStyle(e))},mxGraphView.prototype.updateContainerStyle=function(e){var i=mxUtils.getCurrentStyle(e);null!=i&&"static"==i.position&&(e.style.position="relative"),mxClient.IS_POINTER&&(e.style.touchAction="none")},mxGraphView.prototype.destroy=function(){var e=null!=this.canvas?this.canvas.ownerSVGElement:null;null==e&&(e=this.canvas),null!=e&&null!=e.parentNode&&(this.clear(this.currentRoot,!0),mxEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent.release(this.graph.container),e.parentNode.removeChild(e),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)},mxCurrentRootChange.prototype.execute=function(){var e=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=e;var i=this.view.graph.getTranslateForRoot(this.view.currentRoot);null!=i&&(this.view.translate=new mxPoint(-i.x,-i.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh(),this.view.fireEvent(new mxEventObject(this.isUp?mxEvent.UP:mxEvent.DOWN,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp},__mxOutput.mxGraphView=void 0!==mxGraphView?mxGraphView:void 0,mxLoadResources?mxResources.add(mxClient.basePath+"/resources/graph"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/graph"),mxGraph.prototype=new mxEventSource,mxGraph.prototype.constructor=mxGraph,mxGraph.prototype.mouseListeners=null,mxGraph.prototype.isMouseDown=!1,mxGraph.prototype.model=null,mxGraph.prototype.view=null,mxGraph.prototype.stylesheet=null,mxGraph.prototype.selectionModel=null,mxGraph.prototype.cellEditor=null,mxGraph.prototype.cellRenderer=null,mxGraph.prototype.multiplicities=null,mxGraph.prototype.renderHint=null,mxGraph.prototype.dialect=null,mxGraph.prototype.gridSize=10,mxGraph.prototype.gridEnabled=!0,mxGraph.prototype.portsEnabled=!0,mxGraph.prototype.nativeDblClickEnabled=!0,mxGraph.prototype.doubleTapEnabled=!0,mxGraph.prototype.doubleTapTimeout=500,mxGraph.prototype.doubleTapTolerance=25,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchTime=0,mxGraph.prototype.tapAndHoldEnabled=!0,mxGraph.prototype.tapAndHoldDelay=500,mxGraph.prototype.tapAndHoldInProgress=!1,mxGraph.prototype.tapAndHoldValid=!1,mxGraph.prototype.initialTouchX=0,mxGraph.prototype.initialTouchY=0,mxGraph.prototype.tolerance=4,mxGraph.prototype.defaultOverlap=.5,mxGraph.prototype.defaultParent=null,mxGraph.prototype.alternateEdgeStyle=null,mxGraph.prototype.backgroundImage=null,mxGraph.prototype.pageVisible=!1,mxGraph.prototype.pageBreaksVisible=!1,mxGraph.prototype.pageBreakColor="gray",mxGraph.prototype.pageBreakDashed=!0,mxGraph.prototype.minPageBreakDist=20,mxGraph.prototype.preferPageSize=!1,mxGraph.prototype.pageFormat=mxConstants.PAGE_FORMAT_A4_PORTRAIT,mxGraph.prototype.pageScale=1.5,mxGraph.prototype.enabled=!0,mxGraph.prototype.escapeEnabled=!0,mxGraph.prototype.invokesStopCellEditing=!0,mxGraph.prototype.enterStopsCellEditing=!1,mxGraph.prototype.useScrollbarsForPanning=!0,mxGraph.prototype.exportEnabled=!0,mxGraph.prototype.importEnabled=!0,mxGraph.prototype.cellsLocked=!1,mxGraph.prototype.cellsCloneable=!0,mxGraph.prototype.foldingEnabled=!0,mxGraph.prototype.cellsEditable=!0,mxGraph.prototype.cellsDeletable=!0,mxGraph.prototype.cellsMovable=!0,mxGraph.prototype.edgeLabelsMovable=!0,mxGraph.prototype.vertexLabelsMovable=!1,mxGraph.prototype.dropEnabled=!1,mxGraph.prototype.splitEnabled=!0,mxGraph.prototype.cellsResizable=!0,mxGraph.prototype.cellsBendable=!0,mxGraph.prototype.cellsSelectable=!0,mxGraph.prototype.cellsDisconnectable=!0,mxGraph.prototype.autoSizeCells=!1,mxGraph.prototype.autoSizeCellsOnAdd=!1,mxGraph.prototype.autoScroll=!0,mxGraph.prototype.ignoreScrollbars=!1,mxGraph.prototype.translateToScrollPosition=!1,mxGraph.prototype.timerAutoScroll=!1,mxGraph.prototype.allowAutoPanning=!1,mxGraph.prototype.autoExtend=!0,mxGraph.prototype.maximumGraphBounds=null,mxGraph.prototype.minimumGraphSize=null,mxGraph.prototype.minimumContainerSize=null,mxGraph.prototype.maximumContainerSize=null,mxGraph.prototype.resizeContainer=!1,mxGraph.prototype.border=0,mxGraph.prototype.keepEdgesInForeground=!1,mxGraph.prototype.keepEdgesInBackground=!1,mxGraph.prototype.allowNegativeCoordinates=!0,mxGraph.prototype.constrainChildren=!0,mxGraph.prototype.constrainRelativeChildren=!1,mxGraph.prototype.extendParents=!0,mxGraph.prototype.extendParentsOnAdd=!0,mxGraph.prototype.extendParentsOnMove=!1,mxGraph.prototype.recursiveResize=!1,mxGraph.prototype.collapseToPreferredSize=!0,mxGraph.prototype.zoomFactor=1.2,mxGraph.prototype.keepSelectionVisibleOnZoom=!1,mxGraph.prototype.centerZoom=!0,mxGraph.prototype.resetViewOnRootChange=!0,mxGraph.prototype.resetEdgesOnResize=!1,mxGraph.prototype.resetEdgesOnMove=!1,mxGraph.prototype.resetEdgesOnConnect=!0,mxGraph.prototype.allowLoops=!1,mxGraph.prototype.defaultLoopStyle=mxEdgeStyle.Loop,mxGraph.prototype.multigraph=!0,mxGraph.prototype.connectableEdges=!1,mxGraph.prototype.allowDanglingEdges=!0,mxGraph.prototype.cloneInvalidEdges=!1,mxGraph.prototype.disconnectOnMove=!0,mxGraph.prototype.labelsVisible=!0,mxGraph.prototype.htmlLabels=!1,mxGraph.prototype.swimlaneSelectionEnabled=!0,mxGraph.prototype.swimlaneNesting=!0,mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants.STYLE_FILLCOLOR,mxGraph.prototype.imageBundles=null,mxGraph.prototype.minFitScale=.1,mxGraph.prototype.maxFitScale=8,mxGraph.prototype.panDx=0,mxGraph.prototype.panDy=0,mxGraph.prototype.collapsedImage=new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9),mxGraph.prototype.expandedImage=new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9),mxGraph.prototype.warningImage=new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16),mxGraph.prototype.alreadyConnectedResource="none"!=mxClient.language?"alreadyConnected":"",mxGraph.prototype.containsValidationErrorsResource="none"!=mxClient.language?"containsValidationErrors":"",mxGraph.prototype.collapseExpandResource="none"!=mxClient.language?"collapse-expand":"",mxGraph.prototype.init=function(e){this.container=e,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent.addListener(e,"mouseleave",mxUtils.bind(this,function(i){null!=this.tooltipHandler&&null!=this.tooltipHandler.div&&this.tooltipHandler.div!=i.relatedTarget&&this.tooltipHandler.hide()})),mxClient.IS_IE&&(mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})),mxEvent.addListener(e,"selectstart",mxUtils.bind(this,function(i){return this.isEditing()||!this.isMouseDown&&!mxEvent.isShiftDown(i)}))),8==document.documentMode&&e.insertAdjacentHTML("beforeend","<"+mxClient.VML_PREFIX+':group style="DISPLAY: none;"></'+mxClient.VML_PREFIX+":group>")},mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()},mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)},mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)},mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)},mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)},mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)},mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)},mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)},mxGraph.prototype.createStylesheet=function(){return new mxStylesheet},mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)},mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer},mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)},mxGraph.prototype.getModel=function(){return this.model},mxGraph.prototype.getView=function(){return this.view},mxGraph.prototype.getStylesheet=function(){return this.stylesheet},mxGraph.prototype.setStylesheet=function(e){this.stylesheet=e},mxGraph.prototype.getSelectionModel=function(){return this.selectionModel},mxGraph.prototype.setSelectionModel=function(e){this.selectionModel=e},mxGraph.prototype.getSelectionCellsForChanges=function(e,i){for(var s=new mxDictionary,a=[],l=mxUtils.bind(this,function(m){if(!s.get(m)&&this.model.contains(m))if(this.model.isEdge(m)||this.model.isVertex(m))s.put(m,!0),a.push(m);else for(var x=this.model.getChildCount(m),v=0;v<x;v++)l(this.model.getChildAt(m,v))}),d=0;d<e.length;d++){var c=e[d];if(c.constructor!=mxRootChange&&(null==i||!i(c))){var f=null;c instanceof mxChildChange?f=c.child:null!=c.cell&&c.cell instanceof mxCell&&(f=c.cell),null!=f&&l(f)}}return a},mxGraph.prototype.graphModelChanged=function(e){for(var i=0;i<e.length;i++)this.processChange(e[i]);this.updateSelection(),this.view.validate(),this.sizeDidChange()},mxGraph.prototype.updateSelection=function(){for(var e=this.getSelectionCells(),i=[],s=0;s<e.length;s++)if(this.model.contains(e[s])&&this.isCellVisible(e[s]))for(var a=this.model.getParent(e[s]);null!=a&&a!=this.view.currentRoot;){if(this.isCellCollapsed(a)||!this.isCellVisible(a)){i.push(e[s]);break}a=this.model.getParent(a)}else i.push(e[s]);this.removeSelectionCells(i)},mxGraph.prototype.processChange=function(e){if(e instanceof mxRootChange)this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(e.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject(mxEvent.ROOT));else if(e instanceof mxChildChange){var i=this.model.getParent(e.child);this.view.invalidate(e.child,!0,!0),(!this.model.contains(i)||this.isCellCollapsed(i))&&(this.view.invalidate(e.child,!0,!0),this.removeStateForCell(e.child),this.view.currentRoot==e.child&&this.home()),i!=e.previous&&(null!=i&&this.view.invalidate(i,!1,!1),null!=e.previous&&this.view.invalidate(e.previous,!1,!1))}else if(e instanceof mxTerminalChange||e instanceof mxGeometryChange)(e instanceof mxTerminalChange||null==e.previous&&null!=e.geometry||null!=e.previous&&!e.previous.equals(e.geometry))&&this.view.invalidate(e.cell);else if(e instanceof mxValueChange)this.view.invalidate(e.cell,!1,!1);else if(e instanceof mxStyleChange){this.view.invalidate(e.cell,!0,!0);var s=this.view.getState(e.cell);null!=s&&(s.invalidStyle=!0)}else null!=e.cell&&e.cell instanceof mxCell&&this.removeStateForCell(e.cell)},mxGraph.prototype.removeStateForCell=function(e){for(var i=this.model.getChildCount(e),s=0;s<i;s++)this.removeStateForCell(this.model.getChildAt(e,s));this.view.invalidate(e,!1,!0),this.view.removeState(e)},mxGraph.prototype.addCellOverlay=function(e,i){null==e.overlays&&(e.overlays=[]),e.overlays.push(i);var s=this.view.getState(e);return null!=s&&this.cellRenderer.redraw(s),this.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,"cell",e,"overlay",i)),i},mxGraph.prototype.getCellOverlays=function(e){return e.overlays},mxGraph.prototype.removeCellOverlay=function(e,i){if(null==i)this.removeCellOverlays(e);else{var s=mxUtils.indexOf(e.overlays,i);if(s>=0){e.overlays.splice(s,1),0==e.overlays.length&&(e.overlays=null);var a=this.view.getState(e);null!=a&&this.cellRenderer.redraw(a),this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",e,"overlay",i))}else i=null}return i},mxGraph.prototype.removeCellOverlays=function(e){var i=e.overlays;if(null!=i){e.overlays=null;var s=this.view.getState(e);null!=s&&this.cellRenderer.redraw(s);for(var a=0;a<i.length;a++)this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",e,"overlay",i[a]))}return i},mxGraph.prototype.clearCellOverlays=function(e){e=null!=e?e:this.model.getRoot(),this.removeCellOverlays(e);for(var i=this.model.getChildCount(e),s=0;s<i;s++){var a=this.model.getChildAt(e,s);this.clearCellOverlays(a)}},mxGraph.prototype.setCellWarning=function(e,i,s,a){if(null!=i&&i.length>0){var l=new mxCellOverlay(s=null!=s?s:this.warningImage,"<font color=red>"+i+"</font>");return a&&l.addListener(mxEvent.CLICK,mxUtils.bind(this,function(d,c){this.isEnabled()&&this.setSelectionCell(e)})),this.addCellOverlay(e,l)}return this.removeCellOverlays(e),null},mxGraph.prototype.startEditing=function(e){this.startEditingAtCell(null,e)},mxGraph.prototype.startEditingAtCell=function(e,i){(null==i||!mxEvent.isMultiTouchEvent(i))&&(null==e&&null!=(e=this.getSelectionCell())&&!this.isCellEditable(e)&&(e=null),null!=e&&(this.fireEvent(new mxEventObject(mxEvent.START_EDITING,"cell",e,"event",i)),this.cellEditor.startEditing(e,i),this.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,"cell",e,"event",i))))},mxGraph.prototype.getEditingValue=function(e,i){return this.convertValueToString(e)},mxGraph.prototype.stopEditing=function(e){this.cellEditor.stopEditing(e),this.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED,"cancel",e))},mxGraph.prototype.labelChanged=function(e,i,s){this.model.beginUpdate();try{var a=e.value;this.cellLabelChanged(e,i,this.isAutoSizeCell(e)),this.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,"cell",e,"value",i,"old",a,"event",s))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellLabelChanged=function(e,i,s){this.model.beginUpdate();try{this.model.setValue(e,i),s&&this.cellSizeUpdated(e,!1)}finally{this.model.endUpdate()}},mxGraph.prototype.escape=function(e){this.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",e))},mxGraph.prototype.click=function(e){var i=e.getEvent(),s=e.getCell(),a=new mxEventObject(mxEvent.CLICK,"event",i,"cell",s);if(e.isConsumed()&&a.consume(),this.fireEvent(a),this.isEnabled()&&!mxEvent.isConsumed(i)&&!a.isConsumed()){if(null!=s){if(this.isTransparentClickEvent(i)){var l=!1,d=this.getCellAt(e.graphX,e.graphY,null,null,null,mxUtils.bind(this,function(v){var E=this.isCellSelected(v.cell);return!(l=l||E)||E||v.cell!=s&&this.model.isAncestor(v.cell,s)}));null!=d&&(s=d)}}else if(this.isSwimlaneSelectionEnabled()&&!(null==(s=this.getSwimlaneAt(e.getGraphX(),e.getGraphY()))||this.isToggleEvent(i)&&mxEvent.isAltDown(i))){for(var c=s,f=[];null!=c;){c=this.model.getParent(c);var m=this.view.getState(c);this.isSwimlane(c)&&null!=m&&f.push(c)}if(f.length>0){(f=f.reverse()).splice(0,0,s),f.push(s);for(var x=0;x<f.length-1;x++)this.isCellSelected(f[x])&&(s=f[this.isToggleEvent(i)?x:x+1])}}null!=s?this.selectCellForEvent(s,i):this.isToggleEvent(i)||this.clearSelection()}},mxGraph.prototype.isSiblingSelected=function(e){for(var i=this.model,s=i.getParent(e),a=i.getChildCount(s),l=0;l<a;l++){var d=i.getChildAt(s,l);if(e!=d&&this.isCellSelected(d))return!0}return!1},mxGraph.prototype.dblClick=function(e,i){var s=new mxEventObject(mxEvent.DOUBLE_CLICK,"event",e,"cell",i);this.fireEvent(s),this.isEnabled()&&!mxEvent.isConsumed(e)&&!s.isConsumed()&&null!=i&&this.isCellEditable(i)&&!this.isEditing(i)&&(this.startEditingAtCell(i,e),mxEvent.consume(e))},mxGraph.prototype.tapAndHold=function(e){var i=e.getEvent(),s=new mxEventObject(mxEvent.TAP_AND_HOLD,"event",i,"cell",e.getCell());if(this.fireEvent(s),s.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent.isConsumed(i)&&!s.isConsumed()&&this.connectionHandler.isEnabled()){var a=this.view.getState(this.connectionHandler.marker.getCell(e));null!=a&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=a,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(e),this.connectionHandler.previous=a,this.connectionHandler.fireEvent(new mxEventObject(mxEvent.START,"state",this.connectionHandler.previous)))}},mxGraph.prototype.scrollPointToVisible=function(e,i,s,a){if(this.timerAutoScroll||!this.ignoreScrollbars&&!mxUtils.hasScrollbars(this.container))this.allowAutoPanning&&!this.panningHandler.isActive()&&(null==this.panningManager&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(e+this.panDx,i+this.panDy));else{var l=this.container;if(a=null!=a?a:20,e>=l.scrollLeft&&i>=l.scrollTop&&e<=l.scrollLeft+l.clientWidth&&i<=l.scrollTop+l.clientHeight){var d=l.scrollLeft+l.clientWidth-e;if(d<a){var c=l.scrollLeft;if(l.scrollLeft+=a-d,s&&c==l.scrollLeft){if(this.dialect==mxConstants.DIALECT_SVG)this.view.getDrawPane().ownerSVGElement.style.width=(m=this.container.scrollWidth+a-d)+"px";else{var m=Math.max(l.clientWidth,l.scrollWidth)+a-d;this.view.getCanvas().style.width=m+"px"}l.scrollLeft+=a-d}}else(d=e-l.scrollLeft)<a&&(l.scrollLeft-=a-d);var v=l.scrollTop+l.clientHeight-i;if(v<a){if(c=l.scrollTop,l.scrollTop+=a-v,c==l.scrollTop&&s){if(this.dialect==mxConstants.DIALECT_SVG)this.view.getDrawPane().ownerSVGElement.style.height=(E=this.container.scrollHeight+a-v)+"px";else{var E=Math.max(l.clientHeight,l.scrollHeight)+a-v;this.view.getCanvas().style.height=E+"px"}l.scrollTop+=a-v}}else(v=i-l.scrollTop)<a&&(l.scrollTop-=a-v)}}},mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)},mxGraph.prototype.getBorderSizes=function(){var e=mxUtils.getCurrentStyle(this.container);return new mxRectangle(mxUtils.parseCssNumber(e.paddingLeft)+("none"!=e.borderLeftStyle?mxUtils.parseCssNumber(e.borderLeftWidth):0),mxUtils.parseCssNumber(e.paddingTop)+("none"!=e.borderTopStyle?mxUtils.parseCssNumber(e.borderTopWidth):0),mxUtils.parseCssNumber(e.paddingRight)+("none"!=e.borderRightStyle?mxUtils.parseCssNumber(e.borderRightWidth):0),mxUtils.parseCssNumber(e.paddingBottom)+("none"!=e.borderBottomStyle?mxUtils.parseCssNumber(e.borderBottomWidth):0))},mxGraph.prototype.getPreferredPageSize=function(e,i,s){var l=this.view.translate,d=this.pageFormat,c=this.pageScale,f=new mxRectangle(0,0,Math.ceil(d.width*c),Math.ceil(d.height*c)),m=this.pageBreaksVisible?Math.ceil(i/f.width):1,x=this.pageBreaksVisible?Math.ceil(s/f.height):1;return new mxRectangle(0,0,m*f.width+2+l.x,x*f.height+2+l.y)},mxGraph.prototype.fit=function(e,i,s,a,l,d,c){if(null!=this.container){e=null!=e?e:this.getBorder(),i=null!=i&&i,s=null!=s?s:0,a=null==a||a,l=null!=l&&l,d=null!=d&&d;var f=this.getBorderSizes(),m=this.container.offsetWidth-f.x-f.width-1,x=null!=c?c:this.container.offsetHeight-f.y-f.height-1,v=this.view.getGraphBounds();if(v.width>0&&v.height>0){i&&null!=v.x&&null!=v.y&&((v=v.clone()).width+=v.x,v.height+=v.y,v.x=0,v.y=0);var E=this.view.scale,S=v.width/E,b=v.height/E;null!=this.backgroundImage&&(S=Math.max(S,this.backgroundImage.width-v.x/E),b=Math.max(b,this.backgroundImage.height-v.y/E));var T=(i?e:2*e)+s+1;m-=T,x-=T;var D=l?x/b:d?m/S:Math.min(m/S,x/b);if(null!=this.minFitScale&&(D=Math.max(D,this.minFitScale)),null!=this.maxFitScale&&(D=Math.min(D,this.maxFitScale)),!a)return D;if(i)this.view.scale!=D&&this.view.setScale(D);else if(mxUtils.hasScrollbars(this.container)){this.view.setScale(D);var N=this.getGraphBounds();null!=N.x&&(this.container.scrollLeft=N.x),null!=N.y&&(this.container.scrollTop=N.y)}else{var I=null!=v.x?Math.floor(this.view.translate.x-v.x/E+e/D+s/2):e,O=null!=v.y?Math.floor(this.view.translate.y-v.y/E+e/D+s/2):e;this.view.scaleAndTranslate(D,I,O)}}}return this.view.scale},mxGraph.prototype.sizeDidChange=function(){var e=this.getGraphBounds();if(null!=this.container){var i=this.getBorder(),s=Math.max(0,e.x)+e.width+2*i,a=Math.max(0,e.y)+e.height+2*i;if(null!=this.minimumContainerSize&&(s=Math.max(s,this.minimumContainerSize.width),a=Math.max(a,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(s,a),this.preferPageSize||!mxClient.IS_IE&&this.pageVisible){var l=this.getPreferredPageSize(e,Math.max(1,s),Math.max(1,a));null!=l&&(s=l.width*this.view.scale,a=l.height*this.view.scale)}if(null!=this.minimumGraphSize&&(s=Math.max(s,this.minimumGraphSize.width*this.view.scale),a=Math.max(a,this.minimumGraphSize.height*this.view.scale)),s=Math.ceil(s),a=Math.ceil(a),this.dialect==mxConstants.DIALECT_SVG){var d=this.view.getDrawPane().ownerSVGElement;null!=d&&(d.style.minWidth=Math.max(1,s)+"px",d.style.minHeight=Math.max(1,a)+"px",d.style.width="100%",d.style.height="100%")}else mxClient.IS_QUIRKS?this.view.updateHtmlCanvasSize(Math.max(1,s),Math.max(1,a)):(this.view.canvas.style.minWidth=Math.max(1,s)+"px",this.view.canvas.style.minHeight=Math.max(1,a)+"px");this.updatePageBreaks(this.pageBreaksVisible,s,a)}this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",e))},mxGraph.prototype.doResizeContainer=function(e,i){null!=this.maximumContainerSize&&(e=Math.min(this.maximumContainerSize.width,e),i=Math.min(this.maximumContainerSize.height,i)),this.container.style.width=Math.ceil(e)+"px",this.container.style.height=Math.ceil(i)+"px"},mxGraph.prototype.updatePageBreaks=function(e,i,s){var a=this.view.scale,l=this.view.translate,d=this.pageFormat,c=a*this.pageScale,f=new mxRectangle(0,0,d.width*c,d.height*c),m=mxRectangle.fromRectangle(this.getGraphBounds());m.width=Math.max(1,m.width),m.height=Math.max(1,m.height),f.x=Math.floor((m.x-l.x*a)/f.width)*f.width+l.x*a,f.y=Math.floor((m.y-l.y*a)/f.height)*f.height+l.y*a,m.width=Math.ceil((m.width+(m.x-f.x))/f.width)*f.width,m.height=Math.ceil((m.height+(m.y-f.y))/f.height)*f.height;var x=(e=e&&Math.min(f.width,f.height)>this.minPageBreakDist)?Math.ceil(m.height/f.height)+1:0,v=e?Math.ceil(m.width/f.width)+1:0,E=(v-1)*f.width,S=(x-1)*f.height;null==this.horizontalPageBreaks&&x>0&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&v>0&&(this.verticalPageBreaks=[]);var b=mxUtils.bind(this,function(T){if(null!=T){for(var D=T==this.horizontalPageBreaks?x:v,I=0;I<=D;I++){var O=T==this.horizontalPageBreaks?[new mxPoint(Math.round(f.x),Math.round(f.y+I*f.height)),new mxPoint(Math.round(f.x+E),Math.round(f.y+I*f.height))]:[new mxPoint(Math.round(f.x+I*f.width),Math.round(f.y)),new mxPoint(Math.round(f.x+I*f.width),Math.round(f.y+S))];if(null!=T[I])T[I].points=O,T[I].redraw();else{var N=new mxPolyline(O,this.pageBreakColor);N.dialect=this.dialect,N.pointerEvents=!1,N.isDashed=this.pageBreakDashed,N.init(this.view.backgroundPane),N.redraw(),T[I]=N}}for(I=D;I<T.length;I++)T[I].destroy();T.splice(D,T.length-D)}});b(this.horizontalPageBreaks),b(this.verticalPageBreaks)},mxGraph.prototype.getCurrentCellStyle=function(e,i){var s=i?null:this.view.getState(e);return null!=s?s.style:this.getCellStyle(e)},mxGraph.prototype.getCellStyle=function(e){var i=this.model.getStyle(e),s=null;return s=this.model.isEdge(e)?this.stylesheet.getDefaultEdgeStyle():this.stylesheet.getDefaultVertexStyle(),null!=i&&(s=this.postProcessCellStyle(this.stylesheet.getCellStyle(i,s))),null==s&&(s=new Object),s},mxGraph.prototype.postProcessCellStyle=function(e){if(null!=e){var i=e[mxConstants.STYLE_IMAGE],s=this.getImageFromBundles(i);if(null!=s?e[mxConstants.STYLE_IMAGE]=s:s=i,null!=s&&"data:image/"==s.substring(0,11)){if("data:image/svg+xml,<"==s.substring(0,20))s=s.substring(0,19)+encodeURIComponent(s.substring(19));else if("data:image/svg+xml,%3C"!=s.substring(0,22)){var a=s.indexOf(",");a>0&&";base64,"!=s.substring(a-7,a+1)&&(s=s.substring(0,a)+";base64,"+s.substring(a+1))}e[mxConstants.STYLE_IMAGE]=s}}return e},mxGraph.prototype.setCellStyle=function(e,i){if(null!=(i=i||this.getSelectionCells())){this.model.beginUpdate();try{for(var s=0;s<i.length;s++)this.model.setStyle(i[s],e)}finally{this.model.endUpdate()}}},mxGraph.prototype.toggleCellStyle=function(e,i,s){return s=s||this.getSelectionCell(),this.toggleCellStyles(e,i,[s])},mxGraph.prototype.toggleCellStyles=function(e,i,s){i=null!=i&&i;var a=null;if(null!=(s=s||this.getSelectionCells())&&s.length>0){var l=this.getCurrentCellStyle(s[0]);a=mxUtils.getValue(l,e,i)?0:1,this.setCellStyles(e,a,s)}return a},mxGraph.prototype.setCellStyles=function(e,i,s){s=s||this.getSelectionCells(),mxUtils.setCellStyles(this.model,s,e,i)},mxGraph.prototype.toggleCellStyleFlags=function(e,i,s){this.setCellStyleFlags(e,i,null,s)},mxGraph.prototype.setCellStyleFlags=function(e,i,s,a){if(null!=(a=a||this.getSelectionCells())&&a.length>0){if(null==s){var l=this.getCurrentCellStyle(a[0]);s=(parseInt(l[e]||0)&i)!=i}mxUtils.setCellStyleFlags(this.model,a,e,i,s)}},mxGraph.prototype.alignCells=function(e,i,s){if(null==i&&(i=this.getSelectionCells()),null!=i&&i.length>1){if(null==s)for(var a=0;a<i.length;a++)if(null!=(l=this.view.getState(i[a]))&&!this.model.isEdge(i[a]))if(null==s){if(e==mxConstants.ALIGN_CENTER){s=l.x+l.width/2;break}if(e==mxConstants.ALIGN_RIGHT)s=l.x+l.width;else if(e==mxConstants.ALIGN_TOP)s=l.y;else{if(e==mxConstants.ALIGN_MIDDLE){s=l.y+l.height/2;break}s=e==mxConstants.ALIGN_BOTTOM?l.y+l.height:l.x}}else s=e==mxConstants.ALIGN_RIGHT?Math.max(s,l.x+l.width):e==mxConstants.ALIGN_TOP?Math.min(s,l.y):e==mxConstants.ALIGN_BOTTOM?Math.max(s,l.y+l.height):Math.min(s,l.x);if(null!=s){var d=this.view.scale;this.model.beginUpdate();try{for(a=0;a<i.length;a++){var l;if(null!=(l=this.view.getState(i[a]))){var c=this.getCellGeometry(i[a]);null!=c&&!this.model.isEdge(i[a])&&(c=c.clone(),e==mxConstants.ALIGN_CENTER?c.x+=(s-l.x-l.width/2)/d:e==mxConstants.ALIGN_RIGHT?c.x+=(s-l.x-l.width)/d:e==mxConstants.ALIGN_TOP?c.y+=(s-l.y)/d:e==mxConstants.ALIGN_MIDDLE?c.y+=(s-l.y-l.height/2)/d:e==mxConstants.ALIGN_BOTTOM?c.y+=(s-l.y-l.height)/d:c.x+=(s-l.x)/d,this.resizeCell(i[a],c))}}this.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,"align",e,"cells",i))}finally{this.model.endUpdate()}}}return i},mxGraph.prototype.flipEdge=function(e){if(null!=e&&null!=this.alternateEdgeStyle){this.model.beginUpdate();try{var i=this.model.getStyle(e);this.model.setStyle(e,null==i||0==i.length?this.alternateEdgeStyle:null),this.resetEdge(e),this.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE,"edge",e))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.addImageBundle=function(e){this.imageBundles.push(e)},mxGraph.prototype.removeImageBundle=function(e){for(var i=[],s=0;s<this.imageBundles.length;s++)this.imageBundles[s]!=e&&i.push(this.imageBundles[s]);this.imageBundles=i},mxGraph.prototype.getImageFromBundles=function(e){if(null!=e)for(var i=0;i<this.imageBundles.length;i++){var s=this.imageBundles[i].getImage(e);if(null!=s)return s}return null},mxGraph.prototype.orderCells=function(e,i){null==i&&(i=mxUtils.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(i,e),this.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,"back",e,"cells",i))}finally{this.model.endUpdate()}return i},mxGraph.prototype.cellsOrdered=function(e,i){if(null!=e){this.model.beginUpdate();try{for(var s=0;s<e.length;s++){var a=this.model.getParent(e[s]);this.model.add(a,e[s],i?s:this.model.getChildCount(a)-1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,"back",i,"cells",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.groupCells=function(e,i,s){null==s&&(s=mxUtils.sortCells(this.getSelectionCells(),!0)),s=this.getCellsForGroup(s),null==e&&(e=this.createGroupCell(s));var a=this.getBoundsForGroup(e,s,i);if(s.length>1&&null!=a){var l=this.model.getParent(e);null==l&&(l=this.model.getParent(s[0])),this.model.beginUpdate();try{null==this.getCellGeometry(e)&&this.model.setGeometry(e,new mxGeometry);var d=this.model.getChildCount(l);this.cellsAdded([e],l,d,null,null,!1,!1,!1),d=this.model.getChildCount(e),this.cellsAdded(s,e,d,null,null,!1,!1,!1),this.cellsMoved(s,-a.x,-a.y,!1,!1,!1),this.cellsResized([e],[a],!1),this.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,"group",e,"border",i,"cells",s))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.getCellsForGroup=function(e){var i=[];if(null!=e&&e.length>0){var s=this.model.getParent(e[0]);i.push(e[0]);for(var a=1;a<e.length;a++)this.model.getParent(e[a])==s&&i.push(e[a])}return i},mxGraph.prototype.getBoundsForGroup=function(e,i,s){var a=this.getBoundingBoxFromGeometry(i,!0);if(null!=a){if(this.isSwimlane(e)){var l=this.getStartSize(e);a.x-=l.width,a.y-=l.height,a.width+=l.width,a.height+=l.height}null!=s&&(a.x-=s,a.y-=s,a.width+=2*s,a.height+=2*s)}return a},mxGraph.prototype.createGroupCell=function(e){var i=new mxCell("");return i.setVertex(!0),i.setConnectable(!1),i},mxGraph.prototype.ungroupCells=function(e){var i=[];if(null==e&&(e=this.getCellsForUngroup()),null!=e&&e.length>0){this.model.beginUpdate();try{for(var s=0;s<e.length;s++){var a=this.model.getChildren(e[s]);if(null!=a&&a.length>0){a=a.slice();var l=this.model.getParent(e[s]),d=this.model.getChildCount(l);this.cellsAdded(a,l,d,null,null,!0),i=i.concat(a);for(var c=0;c<a.length;c++){var f=this.view.getState(a[c]),m=this.getCellGeometry(a[c]);null!=f&&null!=m&&m.relative&&((m=m.clone()).x=f.origin.x,m.y=f.origin.y,m.relative=!1,this.model.setGeometry(a[c],m))}}}this.removeCellsAfterUngroup(e),this.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS,"cells",e))}finally{this.model.endUpdate()}}return i},mxGraph.prototype.getCellsForUngroup=function(){for(var e=this.getSelectionCells(),i=[],s=0;s<e.length;s++)this.model.isVertex(e[s])&&this.model.getChildCount(e[s])>0&&i.push(e[s]);return i},mxGraph.prototype.removeCellsAfterUngroup=function(e){this.cellsRemoved(this.addAllEdges(e))},mxGraph.prototype.removeCellsFromParent=function(e){null==e&&(e=this.getSelectionCells()),this.model.beginUpdate();try{var i=this.getDefaultParent(),s=this.model.getChildCount(i);this.cellsAdded(e,i,s,null,null,!0),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT,"cells",e))}finally{this.model.endUpdate()}return e},mxGraph.prototype.updateGroupBounds=function(e,i,s,a,l,d,c){null==e&&(e=this.getSelectionCells()),i=null!=i?i:0,s=null!=s&&s,a=null!=a?a:0,l=null!=l?l:0,d=null!=d?d:0,c=null!=c?c:0,this.model.beginUpdate();try{for(var f=e.length-1;f>=0;f--){var m=this.getCellGeometry(e[f]);if(null!=m){var x=this.getChildCells(e[f]);if(null!=x&&x.length>0){var v=this.getBoundingBoxFromGeometry(x,!0);if(null!=v&&v.width>0&&v.height>0){var E=this.isSwimlane(e[f])?this.getActualStartSize(e[f],!0):new mxRectangle;m=m.clone(),s&&(m.x=Math.round(m.x+v.x-i-E.x-c),m.y=Math.round(m.y+v.y-i-E.y-a)),m.width=Math.round(v.width+2*i+E.x+c+l+E.width),m.height=Math.round(v.height+2*i+E.y+a+d+E.height),this.model.setGeometry(e[f],m),this.moveCells(x,i+E.x-v.x+c,i+E.y-v.y+a)}}}}}finally{this.model.endUpdate()}return e},mxGraph.prototype.getBoundingBox=function(e){var i=null;if(null!=e&&e.length>0)for(var s=0;s<e.length;s++)if(this.model.isVertex(e[s])||this.model.isEdge(e[s])){var a=this.view.getBoundingBox(this.view.getState(e[s]),!0);null!=a&&(null==i?i=mxRectangle.fromRectangle(a):i.add(a))}return i},mxGraph.prototype.cloneCell=function(e,i,s,a){return this.cloneCells([e],i,s,a)[0]},mxGraph.prototype.cloneCells=function(e,i,s,a){i=null==i||i;var l=null;if(null!=e){for(var d=new mxDictionary,c=[],f=0;f<e.length;f++)d.put(e[f],!0),c.push(e[f]);if(c.length>0){var m=this.view.scale,x=this.view.translate;for(l=this.model.cloneCells(e,!0,s),f=0;f<e.length;f++)if(!i&&this.model.isEdge(l[f])&&null!=this.getEdgeValidationError(l[f],this.model.getTerminal(l[f],!0),this.model.getTerminal(l[f],!1)))l[f]=null;else{var v=this.model.getGeometry(l[f]);if(null!=v){var E=this.view.getState(e[f]),S=this.view.getState(this.model.getParent(e[f]));if(null!=E&&null!=S){var b=a?0:S.origin.x,T=a?0:S.origin.y;if(this.model.isEdge(l[f])){var D=E.absolutePoints;if(null!=D){for(var I=this.model.getTerminal(e[f],!0);null!=I&&!d.get(I);)I=this.model.getParent(I);null==I&&null!=D[0]&&v.setTerminalPoint(new mxPoint(D[0].x/m-x.x,D[0].y/m-x.y),!0);for(var O=this.model.getTerminal(e[f],!1);null!=O&&!d.get(O);)O=this.model.getParent(O);var N=D.length-1;null==O&&null!=D[N]&&v.setTerminalPoint(new mxPoint(D[N].x/m-x.x,D[N].y/m-x.y),!1);var k=v.points;if(null!=k)for(var P=0;P<k.length;P++)k[P].x+=b,k[P].y+=T}}else v.translate(b,T)}}}}else l=[]}return l},mxGraph.prototype.insertVertex=function(e,i,s,a,l,d,c,f,m){var x=this.createVertex(e,i,s,a,l,d,c,f,m);return this.addCell(x,e)},mxGraph.prototype.createVertex=function(e,i,s,a,l,d,c,f,m){var x=new mxGeometry(a,l,d,c);x.relative=null!=m&&m;var v=new mxCell(s,x,f);return v.setId(i),v.setVertex(!0),v.setConnectable(!0),v},mxGraph.prototype.insertEdge=function(e,i,s,a,l,d){var c=this.createEdge(e,i,s,a,l,d);return this.addEdge(c,e,a,l)},mxGraph.prototype.createEdge=function(e,i,s,a,l,d){var c=new mxCell(s,new mxGeometry,d);return c.setId(i),c.setEdge(!0),c.geometry.relative=!0,c},mxGraph.prototype.addEdge=function(e,i,s,a,l){return this.addCell(e,i,l,s,a)},mxGraph.prototype.addCell=function(e,i,s,a,l){return this.addCells([e],i,s,a,l)[0]},mxGraph.prototype.addCells=function(e,i,s,a,l,d){null==i&&(i=this.getDefaultParent()),null==s&&(s=this.model.getChildCount(i)),this.model.beginUpdate();try{this.cellsAdded(e,i,s,a,l,null!=d&&d,!0),this.fireEvent(new mxEventObject(mxEvent.ADD_CELLS,"cells",e,"parent",i,"index",s,"source",a,"target",l))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsAdded=function(e,i,s,a,l,d,c,f){if(null!=e&&null!=i&&null!=s){this.model.beginUpdate();try{for(var m=d?this.view.getState(i):null,x=null!=m?m.origin:null,v=new mxPoint(0,0),E=0;E<e.length;E++)if(null==e[E])s--;else{var S=this.model.getParent(e[E]);if(null!=x&&e[E]!=i&&i!=S){var b=this.view.getState(S),T=null!=b?b.origin:v,D=this.model.getGeometry(e[E]);if(null!=D){var I=T.x-x.x,O=T.y-x.y;(D=D.clone()).translate(I,O),!D.relative&&this.model.isVertex(e[E])&&!this.isAllowNegativeCoordinates()&&(D.x=Math.max(0,D.x),D.y=Math.max(0,D.y)),this.model.setGeometry(e[E],D)}}i==S&&s+E>this.model.getChildCount(i)&&s--,this.model.add(i,e[E],s+E),this.autoSizeCellsOnAdd&&this.autoSizeCell(e[E],!0),(null==f||f)&&this.isExtendParentsOnAdd(e[E])&&this.isExtendParent(e[E])&&this.extendParent(e[E]),(null==c||c)&&this.constrainChild(e[E]),null!=a&&this.cellConnected(e[E],a,!0),null!=l&&this.cellConnected(e[E],l,!1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",e,"parent",i,"index",s,"source",a,"target",l,"absolute",d))}finally{this.model.endUpdate()}}},mxGraph.prototype.autoSizeCell=function(e,i){if(i=null==i||i)for(var s=this.model.getChildCount(e),a=0;a<s;a++)this.autoSizeCell(this.model.getChildAt(e,a));this.getModel().isVertex(e)&&this.isAutoSizeCell(e)&&this.updateCellSize(e)},mxGraph.prototype.removeCells=function(e,i){if(i=null==i||i,null==e&&(e=this.getDeletableCells(this.getSelectionCells())),i)e=this.getDeletableCells(this.addAllEdges(e));else{e=e.slice();for(var s=this.getDeletableCells(this.getAllEdges(e)),a=new mxDictionary,l=0;l<e.length;l++)a.put(e[l],!0);for(l=0;l<s.length;l++)null==this.view.getState(s[l])&&!a.get(s[l])&&(a.put(s[l],!0),e.push(s[l]))}this.model.beginUpdate();try{this.cellsRemoved(e),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS,"cells",e,"includeEdges",i))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsRemoved=function(e){if(null!=e&&e.length>0){var i=this.view.scale,s=this.view.translate;this.model.beginUpdate();try{for(var a=new mxDictionary,l=0;l<e.length;l++)a.put(e[l],!0);for(l=0;l<e.length;l++){for(var d=this.getAllEdges([e[l]]),c=mxUtils.bind(this,function(x,v){var E=this.model.getGeometry(x);if(null!=E){for(var S=this.model.getTerminal(x,v),b=!1,T=S;null!=T;){if(e[l]==T){b=!0;break}T=this.model.getParent(T)}if(b){E=E.clone();var D=this.view.getState(x);if(null!=D&&null!=D.absolutePoints){var I=D.absolutePoints,O=v?0:I.length-1;E.setTerminalPoint(new mxPoint(I[O].x/i-s.x-D.origin.x,I[O].y/i-s.y-D.origin.y),v)}else{var N=this.view.getState(S);null!=N&&E.setTerminalPoint(new mxPoint(N.getCenterX()/i-s.x,N.getCenterY()/i-s.y),v)}this.model.setGeometry(x,E),this.model.setTerminal(x,null,v)}}}),f=0;f<d.length;f++)a.get(d[f])||(a.put(d[f],!0),c(d[f],!0),c(d[f],!1));this.model.remove(e[l])}this.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED,"cells",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.splitEdge=function(e,i,s,a,l,d,c,f){a=a||0,l=l||0,f=null!=f?f:this.model.getParent(e);var m=this.model.getTerminal(e,!0);this.model.beginUpdate();try{if(null==s){s=this.cloneCell(e);var x=this.view.getState(e),v=this.getCellGeometry(s);if(null!=v&&null!=v.points&&null!=x){var E=this.view.translate,S=this.view.scale,b=mxUtils.findNearestSegment(x,(a+E.x)*S,(l+E.y)*S);v.points=v.points.slice(0,b),null!=(v=this.getCellGeometry(e))&&null!=v.points&&((v=v.clone()).points=v.points.slice(b),this.model.setGeometry(e,v))}}this.cellsMoved(i,a,l,!1,!1),this.cellsAdded(i,f,this.model.getChildCount(f),null,null,!0),this.cellsAdded([s],f,this.model.getChildCount(f),m,i[0],!1),this.cellConnected(e,i[0],!0),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",e,"cells",i,"newEdge",s,"dx",a,"dy",l))}finally{this.model.endUpdate()}return s},mxGraph.prototype.toggleCells=function(e,i,s){null==i&&(i=this.getSelectionCells()),s&&(i=this.addAllEdges(i)),this.model.beginUpdate();try{this.cellsToggled(i,e),this.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,"show",e,"cells",i,"includeEdges",s))}finally{this.model.endUpdate()}return i},mxGraph.prototype.cellsToggled=function(e,i){if(null!=e&&e.length>0){this.model.beginUpdate();try{for(var s=0;s<e.length;s++)this.model.setVisible(e[s],i)}finally{this.model.endUpdate()}}},mxGraph.prototype.foldCells=function(e,i,s,a,l){i=null!=i&&i,null==s&&(s=this.getFoldableCells(this.getSelectionCells(),e)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(s,e,i,a),this.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"collapse",e,"recurse",i,"cells",s))}finally{this.model.endUpdate()}return s},mxGraph.prototype.cellsFolded=function(e,i,s,a){if(null!=e&&e.length>0){this.model.beginUpdate();try{for(var l=0;l<e.length;l++)if((!a||this.isCellFoldable(e[l],i))&&i!=this.isCellCollapsed(e[l])){if(this.model.setCollapsed(e[l],i),this.swapBounds(e[l],i),this.isExtendParent(e[l])&&this.extendParent(e[l]),s){var d=this.model.getChildren(e[l]);this.cellsFolded(d,i,s)}this.constrainChild(e[l])}this.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,"cells",e,"collapse",i,"recurse",s))}finally{this.model.endUpdate()}}},mxGraph.prototype.swapBounds=function(e,i){if(null!=e){var s=this.model.getGeometry(e);null!=s&&(s=s.clone(),this.updateAlternateBounds(e,s,i),s.swap(),this.model.setGeometry(e,s))}},mxGraph.prototype.updateAlternateBounds=function(e,i,s){if(null!=e&&null!=i){var a=this.getCurrentCellStyle(e);if(null==i.alternateBounds){var l=i;if(this.collapseToPreferredSize){var d=this.getPreferredSizeForCell(e);if(null!=d){l=d;var c=mxUtils.getValue(a,mxConstants.STYLE_STARTSIZE);c>0&&(l.height=Math.max(l.height,c))}}i.alternateBounds=new mxRectangle(0,0,l.width,l.height)}if(null!=i.alternateBounds){i.alternateBounds.x=i.x,i.alternateBounds.y=i.y;var f=mxUtils.toRadians(a[mxConstants.STYLE_ROTATION]||0);if(0!=f){var m=i.alternateBounds.getCenterX()-i.getCenterX(),x=i.alternateBounds.getCenterY()-i.getCenterY(),v=Math.cos(f),E=Math.sin(f),b=E*m+v*x;i.alternateBounds.x+=v*m-E*x-m,i.alternateBounds.y+=b-x}}}},mxGraph.prototype.addAllEdges=function(e){var i=e.slice();return mxUtils.removeDuplicates(i.concat(this.getAllEdges(e)))},mxGraph.prototype.getAllEdges=function(e){var i=[];if(null!=e)for(var s=0;s<e.length;s++){for(var a=this.model.getEdgeCount(e[s]),l=0;l<a;l++)i.push(this.model.getEdgeAt(e[s],l));var d=this.model.getChildren(e[s]);i=i.concat(this.getAllEdges(d))}return i},mxGraph.prototype.updateCellSize=function(e,i){i=null!=i&&i,this.model.beginUpdate();try{this.cellSizeUpdated(e,i),this.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,"cell",e,"ignoreChildren",i))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellSizeUpdated=function(e,i){if(null!=e){this.model.beginUpdate();try{var s=this.getPreferredSizeForCell(e),a=this.model.getGeometry(e);if(null!=s&&null!=a){var l=this.isCellCollapsed(e);if(a=a.clone(),this.isSwimlane(e)){var d=this.getCellStyle(e),c=this.model.getStyle(e);null==c&&(c=""),mxUtils.getValue(d,mxConstants.STYLE_HORIZONTAL,!0)?(c=mxUtils.setStyle(c,mxConstants.STYLE_STARTSIZE,s.height+8),l&&(a.height=s.height+8),a.width=s.width):(c=mxUtils.setStyle(c,mxConstants.STYLE_STARTSIZE,s.width+8),l&&(a.width=s.width+8),a.height=s.height),this.model.setStyle(e,c)}else{var f=this.view.createState(e),m=f.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER;m==mxConstants.ALIGN_RIGHT?a.x+=a.width-s.width:m==mxConstants.ALIGN_CENTER&&(a.x+=Math.round((a.width-s.width)/2));var x=this.getVerticalAlign(f);x==mxConstants.ALIGN_BOTTOM?a.y+=a.height-s.height:x==mxConstants.ALIGN_MIDDLE&&(a.y+=Math.round((a.height-s.height)/2)),a.width=s.width,a.height=s.height}if(!i&&!l){var v=this.view.getBounds(this.model.getChildren(e));if(null!=v){var E=this.view.translate,S=this.view.scale,T=(v.y+v.height)/S-a.y-E.y;a.width=Math.max(a.width,(v.x+v.width)/S-a.x-E.x),a.height=Math.max(a.height,T)}}this.cellsResized([e],[a],!1)}}finally{this.model.endUpdate()}}},mxGraph.prototype.getPreferredSizeForCell=function(e,i){var s=null;if(null!=e){var a=this.view.createState(e),l=a.style;if(!this.model.isEdge(e)){var d=l[mxConstants.STYLE_FONTSIZE]||mxConstants.DEFAULT_FONTSIZE,c=0,f=0;(null!=this.getImage(a)||null!=l[mxConstants.STYLE_IMAGE])&&l[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_LABEL&&(l[mxConstants.STYLE_VERTICAL_ALIGN]==mxConstants.ALIGN_MIDDLE&&(c+=parseFloat(l[mxConstants.STYLE_IMAGE_WIDTH])||mxLabel.prototype.imageSize),l[mxConstants.STYLE_ALIGN]!=mxConstants.ALIGN_CENTER&&(f+=parseFloat(l[mxConstants.STYLE_IMAGE_HEIGHT])||mxLabel.prototype.imageSize)),c+=2*(l[mxConstants.STYLE_SPACING]||0),c+=l[mxConstants.STYLE_SPACING_LEFT]||0,c+=l[mxConstants.STYLE_SPACING_RIGHT]||0,f+=2*(l[mxConstants.STYLE_SPACING]||0),f+=l[mxConstants.STYLE_SPACING_TOP]||0,f+=l[mxConstants.STYLE_SPACING_BOTTOM]||0;var m=this.getFoldingImage(a);null!=m&&(c+=m.width+8);var x=this.cellRenderer.getLabelValue(a);if(null!=x&&x.length>0){this.isHtmlLabel(a.cell)||(x=mxUtils.htmlEntities(x,!1)),x=x.replace(/\n/g,"<br>");var v=mxUtils.getSizeForString(x,d,l[mxConstants.STYLE_FONTFAMILY],i,l[mxConstants.STYLE_FONTSTYLE]),E=v.width+c,S=v.height+f;if(!mxUtils.getValue(l,mxConstants.STYLE_HORIZONTAL,!0)){var b=S;S=E,E=b}this.gridEnabled&&(E=this.snap(E+this.gridSize/2),S=this.snap(S+this.gridSize/2)),s=new mxRectangle(0,0,E,S)}else{var T=4*this.gridSize;s=new mxRectangle(0,0,T,T)}}}return s},mxGraph.prototype.resizeCell=function(e,i,s){return this.resizeCells([e],[i],s)[0]},mxGraph.prototype.resizeCells=function(e,i,s){s=null!=s?s:this.isRecursiveResize(),this.model.beginUpdate();try{var a=this.cellsResized(e,i,s);this.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,"cells",e,"bounds",i,"previous",a))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsResized=function(e,i,s){s=null!=s&&s;var a=[];if(null!=e&&null!=i&&e.length==i.length){this.model.beginUpdate();try{for(var l=0;l<e.length;l++)a.push(this.cellResized(e[l],i[l],!1,s)),this.isExtendParent(e[l])&&this.extendParent(e[l]),this.constrainChild(e[l]);this.resetEdgesOnResize&&this.resetEdges(e),this.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,"cells",e,"bounds",i,"previous",a))}finally{this.model.endUpdate()}}return a},mxGraph.prototype.cellResized=function(e,i,s,a){var l=this.model.getGeometry(e);if(null!=l&&(l.x!=i.x||l.y!=i.y||l.width!=i.width||l.height!=i.height)){var d=l.clone();if(!s&&d.relative){var c=d.offset;null!=c&&(c.x+=i.x-d.x,c.y+=i.y-d.y)}else d.x=i.x,d.y=i.y;d.width=i.width,d.height=i.height,!d.relative&&this.model.isVertex(e)&&!this.isAllowNegativeCoordinates()&&(d.x=Math.max(0,d.x),d.y=Math.max(0,d.y)),this.model.beginUpdate();try{a&&this.resizeChildCells(e,d),this.model.setGeometry(e,d),this.constrainChildCells(e)}finally{this.model.endUpdate()}}return l},mxGraph.prototype.resizeChildCells=function(e,i){for(var s=this.model.getGeometry(e),a=0!=s.width?i.width/s.width:1,l=0!=s.height?i.height/s.height:1,d=this.model.getChildCount(e),c=0;c<d;c++)this.scaleCell(this.model.getChildAt(e,c),a,l,!0)},mxGraph.prototype.constrainChildCells=function(e){for(var i=this.model.getChildCount(e),s=0;s<i;s++)this.constrainChild(this.model.getChildAt(e,s))},mxGraph.prototype.scaleCell=function(e,i,s,a){var l=this.model.getGeometry(e);if(null!=l){var d=this.getCurrentCellStyle(e),c=(l=l.clone()).x,f=l.y,m=l.width,x=l.height;l.scale(i,s,"fixed"==d[mxConstants.STYLE_ASPECT]),"1"==d[mxConstants.STYLE_RESIZE_WIDTH]?l.width=m*i:"0"==d[mxConstants.STYLE_RESIZE_WIDTH]&&(l.width=m),"1"==d[mxConstants.STYLE_RESIZE_HEIGHT]?l.height=x*s:"0"==d[mxConstants.STYLE_RESIZE_HEIGHT]&&(l.height=x),this.isCellMovable(e)||(l.x=c,l.y=f),this.isCellResizable(e)||(l.width=m,l.height=x),this.model.isVertex(e)?this.cellResized(e,l,!0,a):this.model.setGeometry(e,l)}},mxGraph.prototype.extendParent=function(e){if(null!=e){var i=this.model.getParent(e),s=this.getCellGeometry(i);if(null!=i&&null!=s&&!this.isCellCollapsed(i)){var a=this.getCellGeometry(e);null!=a&&!a.relative&&(s.width<a.x+a.width||s.height<a.y+a.height)&&((s=s.clone()).width=Math.max(s.width,a.x+a.width),s.height=Math.max(s.height,a.y+a.height),this.cellsResized([i],[s],!1))}}},mxGraph.prototype.importCells=function(e,i,s,a,l,d){return this.moveCells(e,i,s,!0,a,l,d)},mxGraph.prototype.moveCells=function(e,i,s,a,l,d,c){if(i=null!=i?i:0,s=null!=s?s:0,a=null!=a&&a,null!=e&&(0!=i||0!=s||a||null!=l)){var f=e=this.model.getTopmostCells(e);this.model.beginUpdate();try{for(var m=new mxDictionary,x=0;x<e.length;x++)m.put(e[x],!0);var v=mxUtils.bind(this,function(I){for(;null!=I;){if(m.get(I))return!0;I=this.model.getParent(I)}return!1}),E=[];for(x=0;x<e.length;x++){var S=this.getCellGeometry(e[x]),b=this.model.getParent(e[x]);(null==S||!S.relative||!this.model.isEdge(b)||!v(this.model.getTerminal(b,!0))&&!v(this.model.getTerminal(b,!1)))&&E.push(e[x])}e=E,a&&(e=this.cloneCells(e,this.isCloneInvalidEdges(),c),null==l&&(l=this.getDefaultParent()));var T=this.isAllowNegativeCoordinates();if(null!=l&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(e,i,s,!a&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),null==l,this.isExtendParentsOnMove()&&null==l),this.setAllowNegativeCoordinates(T),null!=l){var D=this.model.getChildCount(l);if(this.cellsAdded(e,l,D,null,null,!0),a)for(x=0;x<e.length;x++)S=this.getCellGeometry(e[x]),b=this.model.getParent(f[x]),null!=S&&S.relative&&this.model.isEdge(b)&&this.model.contains(b)&&this.model.add(b,e[x])}this.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",e,"dx",i,"dy",s,"clone",a,"target",l,"event",d))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.cellsMoved=function(e,i,s,a,l,d){if(null!=e&&(0!=i||0!=s)){d=null!=d&&d,this.model.beginUpdate();try{a&&this.disconnectGraph(e);for(var c=0;c<e.length;c++)this.translateCell(e[c],i,s),d&&this.isExtendParent(e[c])?this.extendParent(e[c]):l&&this.constrainChild(e[c]);this.resetEdgesOnMove&&this.resetEdges(e),this.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,"cells",e,"dx",i,"dy",s,"disconnect",a))}finally{this.model.endUpdate()}}},mxGraph.prototype.translateCell=function(e,i,s){var a=this.model.getGeometry(e);if(null!=a){if(i=parseFloat(i),s=parseFloat(s),(a=a.clone()).translate(i,s),!a.relative&&this.model.isVertex(e)&&!this.isAllowNegativeCoordinates()&&(a.x=Math.max(0,parseFloat(a.x)),a.y=Math.max(0,parseFloat(a.y))),a.relative&&!this.model.isEdge(e)){var l=this.model.getParent(e),d=0;if(this.model.isVertex(l)){var c=this.getCurrentCellStyle(l);d=mxUtils.getValue(c,mxConstants.STYLE_ROTATION,0)}if(0!=d){var f=mxUtils.toRadians(-d),m=Math.cos(f),x=Math.sin(f),v=mxUtils.getRotatedPoint(new mxPoint(i,s),m,x,new mxPoint(0,0));i=v.x,s=v.y}null==a.offset?a.offset=new mxPoint(i,s):(a.offset.x=parseFloat(a.offset.x)+i,a.offset.y=parseFloat(a.offset.y)+s)}this.model.setGeometry(e,a)}},mxGraph.prototype.getCellContainmentArea=function(e){if(null!=e&&!this.model.isEdge(e)){var i=this.model.getParent(e);if(null!=i&&i!=this.getDefaultParent()){var s=this.model.getGeometry(i);if(null!=s){var a=0,l=0,d=s.width,c=s.height;if(this.isSwimlane(i)){var f=this.getStartSize(i),m=this.getCurrentCellStyle(i),x=mxUtils.getValue(m,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),v=1==mxUtils.getValue(m,mxConstants.STYLE_FLIPH,0),E=1==mxUtils.getValue(m,mxConstants.STYLE_FLIPV,0);if(x==mxConstants.DIRECTION_SOUTH||x==mxConstants.DIRECTION_NORTH){var S=f.width;f.width=f.height,f.height=S}(x==mxConstants.DIRECTION_EAST&&!E||x==mxConstants.DIRECTION_NORTH&&!v||x==mxConstants.DIRECTION_WEST&&E||x==mxConstants.DIRECTION_SOUTH&&v)&&(a=f.width,l=f.height),d-=f.width,c-=f.height}return new mxRectangle(a,l,d,c)}}}return null},mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds},mxGraph.prototype.constrainChild=function(e,i){if(i=null==i||i,null!=e){var s=this.getCellGeometry(e);if(null!=s&&(this.isConstrainRelativeChildren()||!s.relative)){var a=this.model.getParent(e),d=(this.getCellGeometry(a),this.getMaximumGraphBounds());if(null!=d){var c=this.getBoundingBoxFromGeometry([a],!1);null!=c&&((d=mxRectangle.fromRectangle(d)).x-=c.x,d.y-=c.y)}if(this.isConstrainChild(e)){var f=this.getCellContainmentArea(e);if(null!=f){var m=this.getOverlap(e);m>0&&((f=mxRectangle.fromRectangle(f)).x-=f.width*m,f.y-=f.height*m,f.width+=2*f.width*m,f.height+=2*f.height*m),null==d?d=f:(d=mxRectangle.fromRectangle(d)).intersect(f)}}if(null!=d){var x=[e];if(!this.isCellCollapsed(e))for(var v=this.model.getDescendants(e),E=0;E<v.length;E++)this.isCellVisible(v[E])&&x.push(v[E]);var S=this.getBoundingBoxFromGeometry(x,!1);if(null!=S){var b=0;(s=s.clone()).width>d.width&&(s.width-=b=s.width-d.width),S.x+S.width>d.x+d.width&&(b-=S.x+S.width-d.x-d.width-b);var T=0;s.height>d.height&&(s.height-=T=s.height-d.height),S.y+S.height>d.y+d.height&&(T-=S.y+S.height-d.y-d.height-T),S.x<d.x&&(b-=S.x-d.x),S.y<d.y&&(T-=S.y-d.y),(0!=b||0!=T)&&(s.relative?(null==s.offset&&(s.offset=new mxPoint),s.offset.x+=b,s.offset.y+=T):(s.x+=b,s.y+=T)),this.model.setGeometry(e,s)}}}}},mxGraph.prototype.resetEdges=function(e){if(null!=e){for(var i=new mxDictionary,s=0;s<e.length;s++)i.put(e[s],!0);this.model.beginUpdate();try{for(s=0;s<e.length;s++){var a=this.model.getEdges(e[s]);if(null!=a)for(var l=0;l<a.length;l++){var d=this.view.getState(a[l]),c=null!=d?d.getVisibleTerminal(!0):this.view.getVisibleTerminal(a[l],!0),f=null!=d?d.getVisibleTerminal(!1):this.view.getVisibleTerminal(a[l],!1);(!i.get(c)||!i.get(f))&&this.resetEdge(a[l])}this.resetEdges(this.model.getChildren(e[s]))}}finally{this.model.endUpdate()}}},mxGraph.prototype.resetEdge=function(e){var i=this.model.getGeometry(e);return null!=i&&null!=i.points&&i.points.length>0&&((i=i.clone()).points=[],this.model.setGeometry(e,i)),e},mxGraph.prototype.getOutlineConstraint=function(e,i,s){if(null!=i.shape){var a=this.view.getPerimeterBounds(i),l=i.style[mxConstants.STYLE_DIRECTION];if(l==mxConstants.DIRECTION_NORTH||l==mxConstants.DIRECTION_SOUTH){a.x+=a.width/2-a.height/2,a.y+=a.height/2-a.width/2;var d=a.width;a.width=a.height,a.height=d}var c=mxUtils.toRadians(i.shape.getShapeRotation());if(0!=c){var f=Math.cos(-c),m=Math.sin(-c),x=new mxPoint(a.getCenterX(),a.getCenterY());e=mxUtils.getRotatedPoint(e,f,m,x)}var v=1,E=1,S=0,b=0;if(this.getModel().isVertex(i.cell)){var T=i.style[mxConstants.STYLE_FLIPH],D=i.style[mxConstants.STYLE_FLIPV];null!=i.shape&&null!=i.shape.stencil&&(T=1==mxUtils.getValue(i.style,"stencilFlipH",0)||T,D=1==mxUtils.getValue(i.style,"stencilFlipV",0)||D),(l==mxConstants.DIRECTION_NORTH||l==mxConstants.DIRECTION_SOUTH)&&(d=T,T=D,D=d),T&&(v=-1,S=-a.width),D&&(E=-1,b=-a.height)}return e=new mxPoint((e.x-a.x)*v-S+a.x,(e.y-a.y)*E-b+a.y),new mxConnectionConstraint(new mxPoint(0==a.width?0:Math.round(1e3*(e.x-a.x)/a.width)/1e3,0==a.height?0:Math.round(1e3*(e.y-a.y)/a.height)/1e3),!1)}return null},mxGraph.prototype.getAllConnectionConstraints=function(e,i){return null!=e&&null!=e.shape&&null!=e.shape.stencil?e.shape.stencil.constraints:null},mxGraph.prototype.getConnectionConstraint=function(e,i,s){var a=null,l=e.style[s?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X];if(null!=l){var d=e.style[s?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y];null!=d&&(a=new mxPoint(parseFloat(l),parseFloat(d)))}var c=!1,f=0,m=0;return null!=a&&(c=mxUtils.getValue(e.style,s?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,!0),f=parseFloat(e.style[s?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX]),m=parseFloat(e.style[s?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY]),f=isFinite(f)?f:0,m=isFinite(m)?m:0),new mxConnectionConstraint(a,c,null,f,m)},mxGraph.prototype.setConnectionConstraint=function(e,i,s,a){if(null!=a){this.model.beginUpdate();try{null==a||null==a.point?(this.setCellStyles(s?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,null,[e]),this.setCellStyles(s?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,null,[e]),this.setCellStyles(s?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,null,[e]),this.setCellStyles(s?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,null,[e]),this.setCellStyles(s?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[e])):null!=a.point&&(this.setCellStyles(s?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,a.point.x,[e]),this.setCellStyles(s?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,a.point.y,[e]),this.setCellStyles(s?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,a.dx,[e]),this.setCellStyles(s?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,a.dy,[e]),this.setCellStyles(s?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,a.perimeter?null:"0",[e]))}finally{this.model.endUpdate()}}},mxGraph.prototype.getConnectionPoint=function(e,i,s){s=null==s||s;var a=null;if(null!=e&&null!=i.point){var l=this.view.getPerimeterBounds(e),d=new mxPoint(l.getCenterX(),l.getCenterY()),c=e.style[mxConstants.STYLE_DIRECTION],f=0;null!=c&&1==mxUtils.getValue(e.style,mxConstants.STYLE_ANCHOR_POINT_DIRECTION,1)&&(c==mxConstants.DIRECTION_NORTH?f+=270:c==mxConstants.DIRECTION_WEST?f+=180:c==mxConstants.DIRECTION_SOUTH&&(f+=90),(c==mxConstants.DIRECTION_NORTH||c==mxConstants.DIRECTION_SOUTH)&&l.rotate90());var m=this.view.scale;a=new mxPoint(l.x+i.point.x*l.width+i.dx*m,l.y+i.point.y*l.height+i.dy*m);var x=e.style[mxConstants.STYLE_ROTATION]||0;if(i.perimeter){if(0!=f){var v=0,E=0;90==f?E=1:180==f?v=-1:270==f&&(E=-1),a=mxUtils.getRotatedPoint(a,v,E,d)}a=this.view.getPerimeterPoint(e,a,!1)}else if(x+=f,this.getModel().isVertex(e.cell)){var S=1==e.style[mxConstants.STYLE_FLIPH],b=1==e.style[mxConstants.STYLE_FLIPV];if(null!=e.shape&&null!=e.shape.stencil&&(S=1==mxUtils.getValue(e.style,"stencilFlipH",0)||S,b=1==mxUtils.getValue(e.style,"stencilFlipV",0)||b),c==mxConstants.DIRECTION_NORTH||c==mxConstants.DIRECTION_SOUTH){var T=S;S=b,b=T}S&&(a.x=2*l.getCenterX()-a.x),b&&(a.y=2*l.getCenterY()-a.y)}if(0!=x&&null!=a){var D=mxUtils.toRadians(x);v=Math.cos(D),E=Math.sin(D),a=mxUtils.getRotatedPoint(a,v,E,d)}}return s&&null!=a&&(a.x=Math.round(a.x),a.y=Math.round(a.y)),a},mxGraph.prototype.connectCell=function(e,i,s,a){this.model.beginUpdate();try{var l=this.model.getTerminal(e,s);this.cellConnected(e,i,s,a),this.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,"edge",e,"terminal",i,"source",s,"previous",l))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellConnected=function(e,i,s,a){if(null!=e){this.model.beginUpdate();try{var l=this.model.getTerminal(e,s);if(this.setConnectionConstraint(e,i,s,a),this.isPortsEnabled()){var d=null;this.isPort(i)&&(d=i.getId(),i=this.getTerminalForPort(i,s)),this.setCellStyles(s?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,d,[e])}this.model.setTerminal(e,i,s),this.resetEdgesOnConnect&&this.resetEdge(e),this.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,"edge",e,"terminal",i,"source",s,"previous",l))}finally{this.model.endUpdate()}}},mxGraph.prototype.disconnectGraph=function(e){if(null!=e){this.model.beginUpdate();try{for(var i=this.view.scale,s=this.view.translate,a=new mxDictionary,l=0;l<e.length;l++)a.put(e[l],!0);for(l=0;l<e.length;l++)if(this.model.isEdge(e[l])){var d=this.model.getGeometry(e[l]);if(null!=d){var c=this.view.getState(e[l]),f=this.view.getState(this.model.getParent(e[l]));if(null!=c&&null!=f){d=d.clone();var m=-f.origin.x,x=-f.origin.y,v=c.absolutePoints,E=this.model.getTerminal(e[l],!0);if(null!=E&&this.isCellDisconnectable(e[l],E,!0)){for(;null!=E&&!a.get(E);)E=this.model.getParent(E);null==E&&(d.setTerminalPoint(new mxPoint(v[0].x/i-s.x+m,v[0].y/i-s.y+x),!0),this.model.setTerminal(e[l],null,!0))}var S=this.model.getTerminal(e[l],!1);if(null!=S&&this.isCellDisconnectable(e[l],S,!1)){for(;null!=S&&!a.get(S);)S=this.model.getParent(S);if(null==S){var b=v.length-1;d.setTerminalPoint(new mxPoint(v[b].x/i-s.x+m,v[b].y/i-s.y+x),!1),this.model.setTerminal(e[l],null,!1)}}this.model.setGeometry(e[l],d)}}}}finally{this.model.endUpdate()}}},mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot},mxGraph.prototype.getTranslateForRoot=function(e){return null},mxGraph.prototype.isPort=function(e){return!1},mxGraph.prototype.getTerminalForPort=function(e,i){return this.model.getParent(e)},mxGraph.prototype.getChildOffsetForCell=function(e){return null},mxGraph.prototype.enterGroup=function(e){null!=(e=e||this.getSelectionCell())&&this.isValidRoot(e)&&(this.view.setCurrentRoot(e),this.clearSelection())},mxGraph.prototype.exitGroup=function(){var e=this.model.getRoot(),i=this.getCurrentRoot();if(null!=i){for(var s=this.model.getParent(i);s!=e&&!this.isValidRoot(s)&&this.model.getParent(s)!=e;)s=this.model.getParent(s);s==e||this.model.getParent(s)==e?this.view.setCurrentRoot(null):this.view.setCurrentRoot(s),null!=this.view.getState(i)&&this.setSelectionCell(i)}},mxGraph.prototype.home=function(){var e=this.getCurrentRoot();null!=e&&(this.view.setCurrentRoot(null),null!=this.view.getState(e)&&this.setSelectionCell(e))},mxGraph.prototype.isValidRoot=function(e){return null!=e},mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()},mxGraph.prototype.getCellBounds=function(e,i,s){var a=[e];i&&(a=a.concat(this.model.getEdges(e)));var l=this.view.getBounds(a);if(s)for(var d=this.model.getChildCount(e),c=0;c<d;c++){var f=this.getCellBounds(this.model.getChildAt(e,c),i,!0);null!=l?l.add(f):l=f}return l},mxGraph.prototype.getBoundingBoxFromGeometry=function(e,i){i=null!=i&&i;var s=null;if(null!=e)for(var a=0;a<e.length;a++)if(i||this.model.isVertex(e[a])){var l=this.getCellGeometry(e[a]);if(null!=l){var d=null;if(this.model.isEdge(e[a])){var c=function(b){null!=b&&(null==m?m=new mxRectangle(b.x,b.y,0,0):m.add(new mxRectangle(b.x,b.y,0,0)))};null==this.model.getTerminal(e[a],!0)&&c(l.getTerminalPoint(!0)),null==this.model.getTerminal(e[a],!1)&&c(l.getTerminalPoint(!1));var f=l.points;if(null!=f&&f.length>0)for(var m=new mxRectangle(f[0].x,f[0].y,0,0),x=1;x<f.length;x++)c(f[x]);d=m}else{var v=this.model.getParent(e[a]);l.relative?this.model.isVertex(v)&&v!=this.view.currentRoot&&null!=(m=this.getBoundingBoxFromGeometry([v],!1))&&(d=new mxRectangle(l.x*m.width,l.y*m.height,l.width,l.height),mxUtils.indexOf(e,v)>=0&&(d.x+=m.x,d.y+=m.y)):(d=mxRectangle.fromRectangle(l),this.model.isVertex(v)&&mxUtils.indexOf(e,v)>=0&&null!=(m=this.getBoundingBoxFromGeometry([v],!1))&&(d.x+=m.x,d.y+=m.y)),null!=d&&null!=l.offset&&(d.x+=l.offset.x,d.y+=l.offset.y);var E=this.getCurrentCellStyle(e[a]);if(null!=d){var S=mxUtils.getValue(E,mxConstants.STYLE_ROTATION,0);0!=S&&(d=mxUtils.getBoundingBox(d,S))}}null!=d&&(null==s?s=mxRectangle.fromRectangle(d):s.add(d))}}return s},mxGraph.prototype.refresh=function(e){this.view.clear(e,null==e),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject(mxEvent.REFRESH))},mxGraph.prototype.snap=function(e){return this.gridEnabled&&(e=Math.round(e/this.gridSize)*this.gridSize),e},mxGraph.prototype.snapDelta=function(e,i,s,a,l){var d=this.view.translate,c=this.view.scale;if(!s&&this.gridEnabled){var f=this.gridSize*c*.5;if(!a){var m=i.x-(this.snap(i.x/c-d.x)+d.x)*c;e.x=Math.abs(e.x-m)<f?0:this.snap(e.x/c)*c-m}if(!l){var x=i.y-(this.snap(i.y/c-d.y)+d.y)*c;e.y=Math.abs(e.y-x)<f?0:this.snap(e.y/c)*c-x}}else f=.5*c,a||(m=i.x-(Math.round(i.x/c-d.x)+d.x)*c,e.x=Math.abs(e.x-m)<f?0:Math.round(e.x/c)*c-m),l||(x=i.y-(Math.round(i.y/c-d.y)+d.y)*c,e.y=Math.abs(e.y-x)<f?0:Math.round(e.y/c)*c-x);return e},mxGraph.prototype.panGraph=function(e,i){if(this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container))this.container.scrollLeft=-e,this.container.scrollTop=-i;else{var s=this.view.getCanvas();if(this.dialect==mxConstants.DIALECT_SVG)if(0==e&&0==i){if(mxClient.IS_IE?s.setAttribute("transform","translate("+e+","+i+")"):s.removeAttribute("transform"),null!=this.shiftPreview1){for(var a=this.shiftPreview1.firstChild;null!=a;){var l=a.nextSibling;this.container.appendChild(a),a=l}for(null!=this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(s.parentNode),a=this.shiftPreview2.firstChild;null!=a;)l=a.nextSibling,this.container.appendChild(a),a=l;null!=this.shiftPreview2.parentNode&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(s.setAttribute("transform","translate("+e+","+i+")"),null==this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";var d=this.shiftPreview1;for(a=this.container.firstChild;null!=a;)l=a.nextSibling,a!=s.parentNode?d.appendChild(a):d=this.shiftPreview2,a=l;null!=this.shiftPreview1.firstChild&&this.container.insertBefore(this.shiftPreview1,s.parentNode),null!=this.shiftPreview2.firstChild&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=e+"px",this.shiftPreview1.style.top=i+"px",this.shiftPreview2.style.left=e+"px",this.shiftPreview2.style.top=i+"px"}else s.style.left=e+"px",s.style.top=i+"px";this.panDx=e,this.panDy=i,this.fireEvent(new mxEventObject(mxEvent.PAN))}},mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)},mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)},mxGraph.prototype.zoomActual=function(){1==this.view.scale?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))},mxGraph.prototype.zoomTo=function(e,i){this.zoom(e/this.view.scale,i)},mxGraph.prototype.center=function(e,i,s,a){e=null==e||e,i=null==i||i,s=null!=s?s:.5,a=null!=a?a:.5;var l=mxUtils.hasScrollbars(this.container),d=2*this.getBorder(),c=this.container.clientWidth-d,f=this.container.clientHeight-d,m=this.getGraphBounds(),x=this.view.translate,v=this.view.scale,E=e?c-m.width:0,S=i?f-m.height:0;if(l){m.x-=x.x,m.y-=x.y;var b=this.container.scrollWidth,T=this.container.scrollHeight;b>c&&(E=0),T>f&&(S=0),this.view.setTranslate(Math.floor(E/2-m.x),Math.floor(S/2-m.y)),this.container.scrollLeft=(b-c)/2,this.container.scrollTop=(T-f)/2}else this.view.setTranslate(e?Math.floor(x.x-m.x*v+E*s/v):x.x,i?Math.floor(x.y-m.y*v+S*a/v):x.y)},mxGraph.prototype.zoom=function(e,i){i=null!=i?i:this.centerZoom;var s=Math.round(this.view.scale*e*100)/100,a=this.view.getState(this.getSelectionCell());if(e=s/this.view.scale,this.keepSelectionVisibleOnZoom&&null!=a){var l=new mxRectangle(a.x*e,a.y*e,a.width*e,a.height*e);this.view.scale=s,this.scrollRectToVisible(l)||(this.view.revalidate(),this.view.setScale(s))}else{var d=mxUtils.hasScrollbars(this.container);if(i&&!d){var m,c=this.container.offsetWidth,f=this.container.offsetHeight;e>1?(c*=-(m=(e-1)/(2*s)),f*=-m):(c*=m=(1/e-1)/(2*this.view.scale),f*=m),this.view.scaleAndTranslate(s,this.view.translate.x+c,this.view.translate.y+f)}else{var x=this.view.translate.x,v=this.view.translate.y,E=this.container.scrollLeft,S=this.container.scrollTop;this.view.setScale(s),d&&(c=0,f=0,i&&(c=this.container.offsetWidth*(e-1)/2,f=this.container.offsetHeight*(e-1)/2),this.container.scrollLeft=(this.view.translate.x-x)*this.view.scale+Math.round(E*e+c),this.container.scrollTop=(this.view.translate.y-v)*this.view.scale+Math.round(S*e+f))}}},mxGraph.prototype.zoomToRect=function(e){var a=this.container.clientWidth/e.width/(this.container.clientHeight/e.height);e.x=Math.max(0,e.x),e.y=Math.max(0,e.y);var l=Math.min(this.container.scrollWidth,e.x+e.width),d=Math.min(this.container.scrollHeight,e.y+e.height);if(e.width=l-e.x,e.height=d-e.y,a<1){var c=e.height/a,f=(c-e.height)/2;e.height=c;var m=Math.min(e.y,f);e.y=e.y-m,d=Math.min(this.container.scrollHeight,e.y+e.height),e.height=d-e.y}else{var x=e.width*a,v=(x-e.width)/2;e.width=x;var E=Math.min(e.x,v);e.x=e.x-E,l=Math.min(this.container.scrollWidth,e.x+e.width),e.width=l-e.x}var S=this.container.clientWidth/e.width,b=this.view.scale*S;mxUtils.hasScrollbars(this.container)?(this.view.setScale(b),this.container.scrollLeft=Math.round(e.x*S),this.container.scrollTop=Math.round(e.y*S)):this.view.scaleAndTranslate(b,this.view.translate.x-e.x/this.view.scale,this.view.translate.y-e.y/this.view.scale)},mxGraph.prototype.scrollCellToVisible=function(e,i){var s=-this.view.translate.x,a=-this.view.translate.y,l=this.view.getState(e);if(null!=l){var d=new mxRectangle(s+l.x,a+l.y,l.width,l.height);if(i&&null!=this.container){var c=this.container.clientWidth,f=this.container.clientHeight;d.x=d.getCenterX()-c/2,d.width=c,d.y=d.getCenterY()-f/2,d.height=f}var m=new mxPoint(this.view.translate.x,this.view.translate.y);if(this.scrollRectToVisible(d)){var x=new mxPoint(this.view.translate.x,this.view.translate.y);this.view.translate.x=m.x,this.view.translate.y=m.y,this.view.setTranslate(x.x,x.y)}}},mxGraph.prototype.scrollRectToVisible=function(e){var i=!1;if(null!=e){var s=this.container.offsetWidth,a=this.container.offsetHeight,l=Math.min(s,e.width),d=Math.min(a,e.height);if(mxUtils.hasScrollbars(this.container)){var c=this.container;e.x+=this.view.translate.x,e.y+=this.view.translate.y;var f=c.scrollLeft-e.x,m=Math.max(f-c.scrollLeft,0);f>0?c.scrollLeft-=f+2:(f=e.x+l-c.scrollLeft-c.clientWidth)>0&&(c.scrollLeft+=f+2);var x=c.scrollTop-e.y,v=Math.max(0,x-c.scrollTop);x>0?c.scrollTop-=x+2:(x=e.y+d-c.scrollTop-c.clientHeight)>0&&(c.scrollTop+=x+2),!this.useScrollbarsForPanning&&(0!=m||0!=v)&&this.view.setTranslate(m,v)}else{var E=-this.view.translate.x,S=-this.view.translate.y,b=this.view.scale;e.x+l>E+s&&(this.view.translate.x-=(e.x+l-s-E)/b,i=!0),e.y+d>S+a&&(this.view.translate.y-=(e.y+d-a-S)/b,i=!0),e.x<E&&(this.view.translate.x+=(E-e.x)/b,i=!0),e.y<S&&(this.view.translate.y+=(S-e.y)/b,i=!0),i&&(this.view.refresh(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.refresh())}}return i},mxGraph.prototype.getCellGeometry=function(e){return this.model.getGeometry(e)},mxGraph.prototype.isCellVisible=function(e){return this.model.isVisible(e)},mxGraph.prototype.isCellCollapsed=function(e){return this.model.isCollapsed(e)},mxGraph.prototype.isCellConnectable=function(e){return this.model.isConnectable(e)},mxGraph.prototype.isOrthogonal=function(e){var i=e.style[mxConstants.STYLE_ORTHOGONAL];if(null!=i)return i;var s=this.view.getEdgeStyle(e);return s==mxEdgeStyle.SegmentConnector||s==mxEdgeStyle.ElbowConnector||s==mxEdgeStyle.SideToSide||s==mxEdgeStyle.TopToBottom||s==mxEdgeStyle.EntityRelation||s==mxEdgeStyle.OrthConnector},mxGraph.prototype.isLoop=function(e){var i=e.getVisibleTerminalState(!0),s=e.getVisibleTerminalState(!1);return null!=i&&i==s},mxGraph.prototype.isCloneEvent=function(e){return mxEvent.isControlDown(e)},mxGraph.prototype.isTransparentClickEvent=function(e){return!1},mxGraph.prototype.isToggleEvent=function(e){return mxClient.IS_MAC?mxEvent.isMetaDown(e):mxEvent.isControlDown(e)},mxGraph.prototype.isGridEnabledEvent=function(e){return null!=e&&!mxEvent.isAltDown(e)},mxGraph.prototype.isConstrainedEvent=function(e){return mxEvent.isShiftDown(e)},mxGraph.prototype.isIgnoreTerminalEvent=function(e){return!1},mxGraph.prototype.validationAlert=function(e){mxUtils.alert(e)},mxGraph.prototype.isEdgeValid=function(e,i,s){return null==this.getEdgeValidationError(e,i,s)},mxGraph.prototype.getEdgeValidationError=function(e,i,s){if(null!=e&&!this.isAllowDanglingEdges()&&(null==i||null==s))return"";if(null!=e&&null==this.model.getTerminal(e,!0)&&null==this.model.getTerminal(e,!1))return null;if(!this.allowLoops&&i==s&&null!=i||!this.isValidConnection(i,s))return"";if(null!=i&&null!=s){var a="";if(!this.multigraph){var l=this.model.getEdgesBetween(i,s,!0);(l.length>1||1==l.length&&l[0]!=e)&&(a+=(mxResources.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+"\n")}var d=this.model.getDirectedEdgeCount(i,!0,e),c=this.model.getDirectedEdgeCount(s,!1,e);if(null!=this.multiplicities)for(var f=0;f<this.multiplicities.length;f++){var m;null!=(m=this.multiplicities[f].check(this,e,i,s,d,c))&&(a+=m)}return null!=(m=this.validateEdge(e,i,s))&&(a+=m),a.length>0?a:null}return this.allowDanglingEdges?null:""},mxGraph.prototype.validateEdge=function(e,i,s){return null},mxGraph.prototype.validateGraph=function(e,i){e=null!=e?e:this.model.getRoot(),i=null!=i?i:new Object;for(var s=!0,a=this.model.getChildCount(e),l=0;l<a;l++){var d=this.model.getChildAt(e,l),c=i;this.isValidRoot(d)&&(c=new Object);var f=this.validateGraph(d,c);this.setCellWarning(d,null!=f?f.replace(/\n/g,"<br>"):null),s=s&&null==f}var m="";this.isCellCollapsed(e)&&!s&&(m+=(mxResources.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+"\n"),this.model.isEdge(e)?m+=this.getEdgeValidationError(e,this.model.getTerminal(e,!0),this.model.getTerminal(e,!1))||"":m+=this.getCellValidationError(e)||"";var x=this.validateCell(e,i);return null!=x&&(m+=x),null==this.model.getParent(e)&&this.view.validate(),m.length>0||!s?m:null},mxGraph.prototype.getCellValidationError=function(e){var i=this.model.getDirectedEdgeCount(e,!0),s=this.model.getDirectedEdgeCount(e,!1),a=this.model.getValue(e),l="";if(null!=this.multiplicities)for(var d=0;d<this.multiplicities.length;d++){var c=this.multiplicities[d];(c.source&&mxUtils.isNode(a,c.type,c.attr,c.value)&&(i>c.max||i<c.min)||!c.source&&mxUtils.isNode(a,c.type,c.attr,c.value)&&(s>c.max||s<c.min))&&(l+=c.countError+"\n")}return l.length>0?l:null},mxGraph.prototype.validateCell=function(e,i){return null},mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage},mxGraph.prototype.setBackgroundImage=function(e){this.backgroundImage=e},mxGraph.prototype.getFoldingImage=function(e){if(null!=e&&this.foldingEnabled&&!this.getModel().isEdge(e.cell)){var i=this.isCellCollapsed(e.cell);if(this.isCellFoldable(e.cell,!i))return i?this.collapsedImage:this.expandedImage}return null},mxGraph.prototype.convertValueToString=function(e){var i=this.model.getValue(e);if(null!=i){if(mxUtils.isNode(i))return i.nodeName;if("function"==typeof i.toString)return i.toString()}return""},mxGraph.prototype.getLabel=function(e){var i="";if(this.labelsVisible&&null!=e){var s=this.getCurrentCellStyle(e);mxUtils.getValue(s,mxConstants.STYLE_NOLABEL,!1)||(i=this.convertValueToString(e))}return i},mxGraph.prototype.isHtmlLabel=function(e){return this.isHtmlLabels()},mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels},mxGraph.prototype.setHtmlLabels=function(e){this.htmlLabels=e},mxGraph.prototype.isWrapping=function(e){return"wrap"==this.getCurrentCellStyle(e)[mxConstants.STYLE_WHITE_SPACE]},mxGraph.prototype.isLabelClipped=function(e){return"hidden"==this.getCurrentCellStyle(e)[mxConstants.STYLE_OVERFLOW]},mxGraph.prototype.getTooltip=function(e,i,s,a){var l=null;if(null!=e){if(null!=e.control&&(i==e.control.node||i.parentNode==e.control.node)&&(l=mxUtils.htmlEntities(mxResources.get(l=this.collapseExpandResource)||l).replace(/\\n/g,"<br>")),null==l&&null!=e.overlays&&e.overlays.visit(function(c,f){null==l&&(i==f.node||i.parentNode==f.node)&&(l=f.overlay.toString())}),null==l){var d=this.selectionCellsHandler.getHandler(e.cell);null!=d&&"function"==typeof d.getTooltipForNode&&(l=d.getTooltipForNode(i))}null==l&&(l=this.getTooltipForCell(e.cell))}return l},mxGraph.prototype.getTooltipForCell=function(e){return null!=e&&null!=e.getTooltip?e.getTooltip():this.convertValueToString(e)},mxGraph.prototype.getLinkForCell=function(e){return null},mxGraph.prototype.getCursorForMouseEvent=function(e){return this.getCursorForCell(e.getCell())},mxGraph.prototype.getCursorForCell=function(e){return null},mxGraph.prototype.getStartSize=function(e,i){var s=new mxRectangle,a=this.getCurrentCellStyle(e,i),l=parseInt(mxUtils.getValue(a,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));return mxUtils.getValue(a,mxConstants.STYLE_HORIZONTAL,!0)?s.height=l:s.width=l,s},mxGraph.prototype.getSwimlaneDirection=function(e){var i=mxUtils.getValue(e,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),s=1==mxUtils.getValue(e,mxConstants.STYLE_FLIPH,0),a=1==mxUtils.getValue(e,mxConstants.STYLE_FLIPV,0),d=mxUtils.getValue(e,mxConstants.STYLE_HORIZONTAL,!0)?0:3;i==mxConstants.DIRECTION_NORTH?d--:i==mxConstants.DIRECTION_WEST?d+=2:i==mxConstants.DIRECTION_SOUTH&&(d+=1);var c=mxUtils.mod(d,2);return s&&1==c&&(d+=2),a&&0==c&&(d+=2),[mxConstants.DIRECTION_NORTH,mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST][mxUtils.mod(d,4)]},mxGraph.prototype.getActualStartSize=function(e,i){var s=new mxRectangle;if(this.isSwimlane(e,i)){var a=this.getCurrentCellStyle(e,i),l=parseInt(mxUtils.getValue(a,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),d=this.getSwimlaneDirection(a);d==mxConstants.DIRECTION_NORTH?s.y=l:d==mxConstants.DIRECTION_WEST?s.x=l:d==mxConstants.DIRECTION_SOUTH?s.height=l:s.width=l}return s},mxGraph.prototype.getImage=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_IMAGE]:null},mxGraph.prototype.isTransparentState=function(e){var i=!1;if(null!=e){var s=mxUtils.getValue(e.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),a=mxUtils.getValue(e.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);i=s==mxConstants.NONE&&a==mxConstants.NONE&&null==this.getImage(e)}return i},mxGraph.prototype.getVerticalAlign=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_VERTICAL_ALIGN]||mxConstants.ALIGN_MIDDLE:null},mxGraph.prototype.getIndicatorColor=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_COLOR]:null},mxGraph.prototype.getIndicatorGradientColor=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR]:null},mxGraph.prototype.getIndicatorShape=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_SHAPE]:null},mxGraph.prototype.getIndicatorImage=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_IMAGE]:null},mxGraph.prototype.getBorder=function(){return this.border},mxGraph.prototype.setBorder=function(e){this.border=e},mxGraph.prototype.isSwimlane=function(e,i){return null!=e&&this.model.getParent(e)!=this.model.getRoot()&&!this.model.isEdge(e)&&this.getCurrentCellStyle(e,i)[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_SWIMLANE},mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer},mxGraph.prototype.setResizeContainer=function(e){this.resizeContainer=e},mxGraph.prototype.isEnabled=function(){return this.enabled},mxGraph.prototype.setEnabled=function(e){this.enabled=e},mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled},mxGraph.prototype.setEscapeEnabled=function(e){this.escapeEnabled=e},mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing},mxGraph.prototype.setInvokesStopCellEditing=function(e){this.invokesStopCellEditing=e},mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing},mxGraph.prototype.setEnterStopsCellEditing=function(e){this.enterStopsCellEditing=e},mxGraph.prototype.isCellLocked=function(e){var i=this.model.getGeometry(e);return this.isCellsLocked()||null!=i&&this.model.isVertex(e)&&i.relative},mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked},mxGraph.prototype.setCellsLocked=function(e){this.cellsLocked=e},mxGraph.prototype.getCloneableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(i){return this.isCellCloneable(i)}))},mxGraph.prototype.isCellCloneable=function(e){var i=this.getCurrentCellStyle(e);return this.isCellsCloneable()&&0!=i[mxConstants.STYLE_CLONEABLE]},mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable},mxGraph.prototype.setCellsCloneable=function(e){this.cellsCloneable=e},mxGraph.prototype.getExportableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(i){return this.canExportCell(i)}))},mxGraph.prototype.canExportCell=function(e){return this.exportEnabled},mxGraph.prototype.getImportableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(i){return this.canImportCell(i)}))},mxGraph.prototype.canImportCell=function(e){return this.importEnabled},mxGraph.prototype.isCellSelectable=function(e){return this.isCellsSelectable()},mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable},mxGraph.prototype.setCellsSelectable=function(e){this.cellsSelectable=e},mxGraph.prototype.getDeletableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(i){return this.isCellDeletable(i)}))},mxGraph.prototype.isCellDeletable=function(e){var i=this.getCurrentCellStyle(e);return this.isCellsDeletable()&&0!=i[mxConstants.STYLE_DELETABLE]},mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable},mxGraph.prototype.setCellsDeletable=function(e){this.cellsDeletable=e},mxGraph.prototype.isLabelMovable=function(e){return!this.isCellLocked(e)&&(this.model.isEdge(e)&&this.edgeLabelsMovable||this.model.isVertex(e)&&this.vertexLabelsMovable)},mxGraph.prototype.isCellRotatable=function(e){return 0!=this.getCurrentCellStyle(e)[mxConstants.STYLE_ROTATABLE]},mxGraph.prototype.getMovableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(i){return this.isCellMovable(i)}))},mxGraph.prototype.isCellMovable=function(e){var i=this.getCurrentCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&0!=i[mxConstants.STYLE_MOVABLE]},mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable},mxGraph.prototype.setCellsMovable=function(e){this.cellsMovable=e},mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled},mxGraph.prototype.setGridEnabled=function(e){this.gridEnabled=e},mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled},mxGraph.prototype.setPortsEnabled=function(e){this.portsEnabled=e},mxGraph.prototype.getGridSize=function(){return this.gridSize},mxGraph.prototype.setGridSize=function(e){this.gridSize=e},mxGraph.prototype.getTolerance=function(){return this.tolerance},mxGraph.prototype.setTolerance=function(e){this.tolerance=e},mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable},mxGraph.prototype.setVertexLabelsMovable=function(e){this.vertexLabelsMovable=e},mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable},mxGraph.prototype.setEdgeLabelsMovable=function(e){this.edgeLabelsMovable=e},mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting},mxGraph.prototype.setSwimlaneNesting=function(e){this.swimlaneNesting=e},mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled},mxGraph.prototype.setSwimlaneSelectionEnabled=function(e){this.swimlaneSelectionEnabled=e},mxGraph.prototype.isMultigraph=function(){return this.multigraph},mxGraph.prototype.setMultigraph=function(e){this.multigraph=e},mxGraph.prototype.isAllowLoops=function(){return this.allowLoops},mxGraph.prototype.setAllowDanglingEdges=function(e){this.allowDanglingEdges=e},mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges},mxGraph.prototype.setConnectableEdges=function(e){this.connectableEdges=e},mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges},mxGraph.prototype.setCloneInvalidEdges=function(e){this.cloneInvalidEdges=e},mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges},mxGraph.prototype.setAllowLoops=function(e){this.allowLoops=e},mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove},mxGraph.prototype.setDisconnectOnMove=function(e){this.disconnectOnMove=e},mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled},mxGraph.prototype.setDropEnabled=function(e){this.dropEnabled=e},mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled},mxGraph.prototype.setSplitEnabled=function(e){this.splitEnabled=e},mxGraph.prototype.isCellResizable=function(e){var i=this.getCurrentCellStyle(e);return this.isCellsResizable()&&!this.isCellLocked(e)&&"0"!=mxUtils.getValue(i,mxConstants.STYLE_RESIZABLE,"1")},mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable},mxGraph.prototype.setCellsResizable=function(e){this.cellsResizable=e},mxGraph.prototype.isTerminalPointMovable=function(e,i){return!0},mxGraph.prototype.isCellBendable=function(e){var i=this.getCurrentCellStyle(e);return this.isCellsBendable()&&!this.isCellLocked(e)&&0!=i[mxConstants.STYLE_BENDABLE]},mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable},mxGraph.prototype.setCellsBendable=function(e){this.cellsBendable=e},mxGraph.prototype.isCellEditable=function(e){var i=this.getCurrentCellStyle(e);return this.isCellsEditable()&&!this.isCellLocked(e)&&0!=i[mxConstants.STYLE_EDITABLE]},mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable},mxGraph.prototype.setCellsEditable=function(e){this.cellsEditable=e},mxGraph.prototype.isCellDisconnectable=function(e,i,s){return this.isCellsDisconnectable()&&!this.isCellLocked(e)},mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable},mxGraph.prototype.setCellsDisconnectable=function(e){this.cellsDisconnectable=e},mxGraph.prototype.isValidSource=function(e){return null==e&&this.allowDanglingEdges||null!=e&&(!this.model.isEdge(e)||this.connectableEdges)&&this.isCellConnectable(e)},mxGraph.prototype.isValidTarget=function(e){return this.isValidSource(e)},mxGraph.prototype.isValidConnection=function(e,i){return this.isValidSource(e)&&this.isValidTarget(i)},mxGraph.prototype.setConnectable=function(e){this.connectionHandler.setEnabled(e)},mxGraph.prototype.isConnectable=function(){return this.connectionHandler.isEnabled()},mxGraph.prototype.setTooltips=function(e){this.tooltipHandler.setEnabled(e)},mxGraph.prototype.setPanning=function(e){this.panningHandler.panningEnabled=e},mxGraph.prototype.isEditing=function(e){if(null!=this.cellEditor){var i=this.cellEditor.getEditingCell();return null==e?null!=i:e==i}return!1},mxGraph.prototype.isAutoSizeCell=function(e){var i=this.getCurrentCellStyle(e);return this.isAutoSizeCells()||1==i[mxConstants.STYLE_AUTOSIZE]},mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells},mxGraph.prototype.setAutoSizeCells=function(e){this.autoSizeCells=e},mxGraph.prototype.isExtendParent=function(e){return!this.getModel().isEdge(e)&&this.isExtendParents()},mxGraph.prototype.isExtendParents=function(){return this.extendParents},mxGraph.prototype.setExtendParents=function(e){this.extendParents=e},mxGraph.prototype.isExtendParentsOnAdd=function(e){return this.extendParentsOnAdd},mxGraph.prototype.setExtendParentsOnAdd=function(e){this.extendParentsOnAdd=e},mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove},mxGraph.prototype.setExtendParentsOnMove=function(e){this.extendParentsOnMove=e},mxGraph.prototype.isRecursiveResize=function(e){return this.recursiveResize},mxGraph.prototype.setRecursiveResize=function(e){this.recursiveResize=e},mxGraph.prototype.isConstrainChild=function(e){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(e))},mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren},mxGraph.prototype.setConstrainChildren=function(e){this.constrainChildren=e},mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren},mxGraph.prototype.setConstrainRelativeChildren=function(e){this.constrainRelativeChildren=e},mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates},mxGraph.prototype.setAllowNegativeCoordinates=function(e){this.allowNegativeCoordinates=e},mxGraph.prototype.getOverlap=function(e){return this.isAllowOverlapParent(e)?this.defaultOverlap:0},mxGraph.prototype.isAllowOverlapParent=function(e){return!1},mxGraph.prototype.getFoldableCells=function(e,i){return this.model.filterCells(e,mxUtils.bind(this,function(s){return this.isCellFoldable(s,i)}))},mxGraph.prototype.isCellFoldable=function(e,i){var s=this.getCurrentCellStyle(e);return this.model.getChildCount(e)>0&&0!=s[mxConstants.STYLE_FOLDABLE]},mxGraph.prototype.isValidDropTarget=function(e,i,s){return null!=e&&(this.isSplitEnabled()&&this.isSplitTarget(e,i,s)||!this.model.isEdge(e)&&(this.isSwimlane(e)||this.model.getChildCount(e)>0&&!this.isCellCollapsed(e)))},mxGraph.prototype.isSplitTarget=function(e,i,s){if(this.model.isEdge(e)&&null!=i&&1==i.length&&this.isCellConnectable(i[0])&&null==this.getEdgeValidationError(e,this.model.getTerminal(e,!0),i[0])){var a=this.model.getTerminal(e,!0),l=this.model.getTerminal(e,!1);return!this.model.isAncestor(i[0],a)&&!this.model.isAncestor(i[0],l)}return!1},mxGraph.prototype.getDropTarget=function(e,i,s,a){if(!this.isSwimlaneNesting())for(var l=0;l<e.length;l++)if(this.isSwimlane(e[l]))return null;var d=mxUtils.convertPoint(this.container,mxEvent.getClientX(i),mxEvent.getClientY(i));d.x-=this.panDx,d.y-=this.panDy;var c=this.getSwimlaneAt(d.x,d.y);if(null==s)s=c;else if(null!=c){for(var f=this.model.getParent(c);null!=f&&this.isSwimlane(f)&&f!=s;)f=this.model.getParent(f);f==s&&(s=c)}for(;null!=s&&!this.isValidDropTarget(s,e,i)&&!this.model.isLayer(s);)s=this.model.getParent(s);if(null==a||!a)for(var m=s;null!=m&&mxUtils.indexOf(e,m)<0;)m=this.model.getParent(m);return this.model.isLayer(s)||null!=m?null:s},mxGraph.prototype.getDefaultParent=function(){var e=this.getCurrentRoot();if(null==e&&null==(e=this.defaultParent)){var i=this.model.getRoot();e=this.model.getChildAt(i,0)}return e},mxGraph.prototype.setDefaultParent=function(e){this.defaultParent=e},mxGraph.prototype.getSwimlane=function(e){for(;null!=e&&!this.isSwimlane(e);)e=this.model.getParent(e);return e},mxGraph.prototype.getSwimlaneAt=function(e,i,s){if(null==s&&null==(s=this.getCurrentRoot())&&(s=this.model.getRoot()),null!=s)for(var a=this.model.getChildCount(s),l=0;l<a;l++){var d=this.model.getChildAt(s,l);if(null!=d){var c=this.getSwimlaneAt(e,i,d);if(null!=c)return c;if(this.isCellVisible(d)&&this.isSwimlane(d)){var f=this.view.getState(d);if(this.intersects(f,e,i))return d}}}return null},mxGraph.prototype.getCellAt=function(e,i,s,a,l,d){if(a=null==a||a,l=null==l||l,null==s&&null==(s=this.getCurrentRoot())&&(s=this.getModel().getRoot()),null!=s)for(var f=this.model.getChildCount(s)-1;f>=0;f--){var m=this.model.getChildAt(s,f),x=this.getCellAt(e,i,m,a,l,d);if(null!=x)return x;if(this.isCellVisible(m)&&(l&&this.model.isEdge(m)||a&&this.model.isVertex(m))){var v=this.view.getState(m);if(null!=v&&(null==d||!d(v,e,i))&&this.intersects(v,e,i))return m}}return null},mxGraph.prototype.intersects=function(e,i,s){if(null!=e){var a=e.absolutePoints;if(null!=a)for(var l=this.tolerance*this.tolerance,d=a[0],c=1;c<a.length;c++){var f=a[c];if(mxUtils.ptSegDistSq(d.x,d.y,f.x,f.y,i,s)<=l)return!0;d=f}else{var x=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0);if(0!=x){var v=Math.cos(-x),E=Math.sin(-x),S=new mxPoint(e.getCenterX(),e.getCenterY());i=(d=mxUtils.getRotatedPoint(new mxPoint(i,s),v,E,S)).x,s=d.y}if(mxUtils.contains(e,i,s))return!0}}return!1},mxGraph.prototype.hitsSwimlaneContent=function(e,i,s){var a=this.getView().getState(e),l=this.getStartSize(e);if(null!=a){var d=this.getView().getScale();if(i-=a.x,s-=a.y,l.width>0&&i>0&&i>l.width*d)return!0;if(l.height>0&&s>0&&s>l.height*d)return!0}return!1},mxGraph.prototype.getChildVertices=function(e){return this.getChildCells(e,!0,!1)},mxGraph.prototype.getChildEdges=function(e){return this.getChildCells(e,!1,!0)},mxGraph.prototype.getChildCells=function(e,i,s){e=null!=e?e:this.getDefaultParent();for(var a=this.model.getChildCells(e,i=null!=i&&i,s=null!=s&&s),l=[],d=0;d<a.length;d++)this.isCellVisible(a[d])&&l.push(a[d]);return l},mxGraph.prototype.getConnections=function(e,i){return this.getEdges(e,i,!0,!0,!1)},mxGraph.prototype.getIncomingEdges=function(e,i){return this.getEdges(e,i,!0,!1,!1)},mxGraph.prototype.getOutgoingEdges=function(e,i){return this.getEdges(e,i,!1,!0,!1)},mxGraph.prototype.getEdges=function(e,i,s,a,l,d){s=null==s||s,a=null==a||a,l=null==l||l,d=null!=d&&d;for(var c=[],f=this.isCellCollapsed(e),m=this.model.getChildCount(e),x=0;x<m;x++){var v=this.model.getChildAt(e,x);(f||!this.isCellVisible(v))&&(c=c.concat(this.model.getEdges(v,s,a)))}c=c.concat(this.model.getEdges(e,s,a));var E=[];for(x=0;x<c.length;x++){var S=this.view.getState(c[x]),b=null!=S?S.getVisibleTerminal(!0):this.view.getVisibleTerminal(c[x],!0),T=null!=S?S.getVisibleTerminal(!1):this.view.getVisibleTerminal(c[x],!1);(l&&b==T||b!=T&&(s&&T==e&&(null==i||this.isValidAncestor(b,i,d))||a&&b==e&&(null==i||this.isValidAncestor(T,i,d))))&&E.push(c[x])}return E},mxGraph.prototype.isValidAncestor=function(e,i,s){return s?this.model.isAncestor(i,e):this.model.getParent(e)==i},mxGraph.prototype.getOpposites=function(e,i,s,a){s=null==s||s,a=null==a||a;var l=[],d=new mxDictionary;if(null!=e)for(var c=0;c<e.length;c++){var f=this.view.getState(e[c]),m=null!=f?f.getVisibleTerminal(!0):this.view.getVisibleTerminal(e[c],!0),x=null!=f?f.getVisibleTerminal(!1):this.view.getVisibleTerminal(e[c],!1);m==i&&null!=x&&x!=i&&a?d.get(x)||(d.put(x,!0),l.push(x)):x==i&&null!=m&&m!=i&&s&&(d.get(m)||(d.put(m,!0),l.push(m)))}return l},mxGraph.prototype.getEdgesBetween=function(e,i,s){s=null!=s&&s;for(var a=this.getEdges(e),l=[],d=0;d<a.length;d++){var c=this.view.getState(a[d]),f=null!=c?c.getVisibleTerminal(!0):this.view.getVisibleTerminal(a[d],!0),m=null!=c?c.getVisibleTerminal(!1):this.view.getVisibleTerminal(a[d],!1);(f==e&&m==i||!s&&f==i&&m==e)&&l.push(a[d])}return l},mxGraph.prototype.getPointForEvent=function(e,i){var s=mxUtils.convertPoint(this.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),a=this.view.scale,l=this.view.translate,d=0!=i?this.gridSize/2:0;return s.x=this.snap(s.x/a-l.x-d),s.y=this.snap(s.y/a-l.y-d),s},mxGraph.prototype.getCells=function(e,i,s,a,l,d,c,f,m){if(d=null!=d?d:[],s>0||a>0||null!=c){var x=this.getModel(),v=e+s,E=i+a;if(null==l&&null==(l=this.getCurrentRoot())&&(l=x.getRoot()),null!=l)for(var S=x.getChildCount(l),b=0;b<S;b++){var T=x.getChildAt(l,b),D=this.view.getState(T);if(null!=D&&this.isCellVisible(T)&&(null==f||!f(D))){var I=mxUtils.getValue(D.style,mxConstants.STYLE_ROTATION)||0,O=D;0!=I&&(O=mxUtils.getBoundingBox(O,I));var N=null!=c&&x.isVertex(T)&&mxUtils.intersects(c,O)||null==c&&(x.isEdge(T)||x.isVertex(T))&&O.x>=e&&O.y+O.height<=E&&O.y>=i&&O.x+O.width<=v;N&&d.push(T),(!N||m)&&this.getCells(e,i,s,a,T,d,c,f,m)}}}return d},mxGraph.prototype.getCellsBeyond=function(e,i,s,a,l){var d=[];if((a||l)&&(null==s&&(s=this.getDefaultParent()),null!=s))for(var c=this.model.getChildCount(s),f=0;f<c;f++){var m=this.model.getChildAt(s,f),x=this.view.getState(m);this.isCellVisible(m)&&null!=x&&(!a||x.x>=e)&&(!l||x.y>=i)&&d.push(m)}return d},mxGraph.prototype.findTreeRoots=function(e,i,s){i=null!=i&&i,s=null!=s&&s;var a=[];if(null!=e){for(var l=this.getModel(),d=l.getChildCount(e),c=null,f=0,m=0;m<d;m++){var x=l.getChildAt(e,m);if(this.model.isVertex(x)&&this.isCellVisible(x)){for(var v=this.getConnections(x,i?e:null),E=0,S=0,b=0;b<v.length;b++)this.view.getVisibleTerminal(v[b],!0)==x?E++:S++;(s&&0==E&&S>0||!s&&0==S&&E>0)&&a.push(x);var D=s?S-E:E-S;D>f&&(f=D,c=x)}}0==a.length&&null!=c&&a.push(c)}return a},mxGraph.prototype.traverse=function(e,i,s,a,l,d){if(null!=s&&null!=e&&(i=null==i||i,d=null!=d&&d,!(l=l||new mxDictionary).get(e))){l.put(e,!0);var c=s(e,a);if(null==c||c){var f=this.model.getEdgeCount(e);if(f>0)for(var m=0;m<f;m++){var x=this.model.getEdgeAt(e,m),v=this.model.getTerminal(x,!0)==e;if(!i||!d==v){var E=this.model.getTerminal(x,!v);this.traverse(E,i,s,x,l,d)}}}}},mxGraph.prototype.isCellSelected=function(e){return this.getSelectionModel().isSelected(e)},mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()},mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()},mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length},mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]},mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()},mxGraph.prototype.setSelectionCell=function(e){this.getSelectionModel().setCell(e)},mxGraph.prototype.setSelectionCells=function(e){this.getSelectionModel().setCells(e)},mxGraph.prototype.addSelectionCell=function(e){this.getSelectionModel().addCell(e)},mxGraph.prototype.addSelectionCells=function(e){this.getSelectionModel().addCells(e)},mxGraph.prototype.removeSelectionCell=function(e){this.getSelectionModel().removeCell(e)},mxGraph.prototype.removeSelectionCells=function(e){this.getSelectionModel().removeCells(e)},mxGraph.prototype.selectRegion=function(e,i){var s=this.getCells(e.x,e.y,e.width,e.height);return this.selectCellsForEvent(s,i),s},mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)},mxGraph.prototype.selectPreviousCell=function(){this.selectCell()},mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)},mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)},mxGraph.prototype.selectCell=function(e,i,s){var a=this.selectionModel,l=a.cells.length>0?a.cells[0]:null;a.cells.length>1&&a.clear();var d=null!=l?this.model.getParent(l):this.getDefaultParent(),c=this.model.getChildCount(d);if(null==l&&c>0){var f=this.model.getChildAt(d,0);this.setSelectionCell(f)}else if(null!=l&&!i||null==this.view.getState(d)||null==this.model.getGeometry(d)){if(null!=l&&s)this.model.getChildCount(l)>0&&(f=this.model.getChildAt(l,0),this.setSelectionCell(f));else if(c>0){var x=d.getIndex(l);e?(x++,f=this.model.getChildAt(d,x%c),this.setSelectionCell(f)):(x--,f=this.model.getChildAt(d,x<0?c-1:x),this.setSelectionCell(f))}}else this.getCurrentRoot()!=d&&this.setSelectionCell(d)},mxGraph.prototype.selectAll=function(e,i){e=e||this.getDefaultParent();var s=i?this.model.filterDescendants(mxUtils.bind(this,function(a){return a!=e&&null!=this.view.getState(a)}),e):this.model.getChildren(e);null!=s&&this.setSelectionCells(s)},mxGraph.prototype.selectVertices=function(e,i){this.selectCells(!0,!1,e,i)},mxGraph.prototype.selectEdges=function(e){this.selectCells(!1,!0,e)},mxGraph.prototype.selectCells=function(e,i,s,a){s=s||this.getDefaultParent();var l=mxUtils.bind(this,function(c){return null!=this.view.getState(c)&&((a||0==this.model.getChildCount(c))&&this.model.isVertex(c)&&e&&!this.model.isEdge(this.model.getParent(c))||this.model.isEdge(c)&&i)}),d=this.model.filterDescendants(l,s);null!=d&&this.setSelectionCells(d)},mxGraph.prototype.selectCellForEvent=function(e,i){var s=this.isCellSelected(e);this.isToggleEvent(i)?s?this.removeSelectionCell(e):this.addSelectionCell(e):(!s||1!=this.getSelectionCount())&&this.setSelectionCell(e)},mxGraph.prototype.selectCellsForEvent=function(e,i){this.isToggleEvent(i)?this.addSelectionCells(e):this.setSelectionCells(e)},mxGraph.prototype.createHandler=function(e){var i=null;if(null!=e)if(this.model.isEdge(e.cell)){var s=e.getVisibleTerminalState(!0),a=e.getVisibleTerminalState(!1),l=this.getCellGeometry(e.cell),d=this.view.getEdgeStyle(e,null!=l?l.points:null,s,a);i=this.createEdgeHandler(e,d)}else i=this.createVertexHandler(e);return i},mxGraph.prototype.createVertexHandler=function(e){return new mxVertexHandler(e)},mxGraph.prototype.createEdgeHandler=function(e,i){return i==mxEdgeStyle.Loop||i==mxEdgeStyle.ElbowConnector||i==mxEdgeStyle.SideToSide||i==mxEdgeStyle.TopToBottom?this.createElbowEdgeHandler(e):i==mxEdgeStyle.SegmentConnector||i==mxEdgeStyle.OrthConnector?this.createEdgeSegmentHandler(e):new mxEdgeHandler(e)},mxGraph.prototype.createEdgeSegmentHandler=function(e){return new mxEdgeSegmentHandler(e)},mxGraph.prototype.createElbowEdgeHandler=function(e){return new mxElbowEdgeHandler(e)},mxGraph.prototype.addMouseListener=function(e){null==this.mouseListeners&&(this.mouseListeners=[]),this.mouseListeners.push(e)},mxGraph.prototype.removeMouseListener=function(e){if(null!=this.mouseListeners)for(var i=0;i<this.mouseListeners.length;i++)if(this.mouseListeners[i]==e){this.mouseListeners.splice(i,1);break}},mxGraph.prototype.updateMouseEvent=function(e,i){if(null==e.graphX||null==e.graphY){var s=mxUtils.convertPoint(this.container,e.getX(),e.getY());e.graphX=s.x-this.panDx,e.graphY=s.y-this.panDy,null==e.getCell()&&this.isMouseDown&&i==mxEvent.MOUSE_MOVE&&(e.state=this.view.getState(this.getCellAt(s.x,s.y,null,null,null,function(a){return null==a.shape||a.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||"1"==mxUtils.getValue(a.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=a.shape.fill&&a.shape.fill!=mxConstants.NONE})))}return e},mxGraph.prototype.getStateForTouchEvent=function(e){var i=mxEvent.getClientX(e),s=mxEvent.getClientY(e),a=mxUtils.convertPoint(this.container,i,s);return this.view.getState(this.getCellAt(a.x,a.y))},mxGraph.prototype.isEventIgnored=function(e,i,s){var a=mxEvent.isMouseEvent(i.getEvent()),l=!1;return i.getEvent()==this.lastEvent?l=!0:this.lastEvent=i.getEvent(),null!=this.eventSource&&e!=mxEvent.MOUSE_MOVE?(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.eventSource=null):mxClient.IS_GC||null==this.eventSource||i.getSource()==this.eventSource?mxClient.IS_TOUCH&&e==mxEvent.MOUSE_DOWN&&!a&&!mxEvent.isPenEvent(i.getEvent())&&(this.eventSource=i.getSource(),this.mouseMoveRedirect=mxUtils.bind(this,function(d){this.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(d,this.getStateForTouchEvent(d)))}),this.mouseUpRedirect=mxUtils.bind(this,function(d){this.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(d,this.getStateForTouchEvent(d)))}),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)):l=!0,this.isSyntheticEventIgnored(e,i,s)&&(l=!0),!mxEvent.isPopupTrigger(this.lastEvent)&&e!=mxEvent.MOUSE_MOVE&&2==this.lastEvent.detail||(e==mxEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:e!=mxEvent.MOUSE_DOWN||this.isMouseDown?!l&&((!mxClient.IS_FF||e!=mxEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=a||e==mxEvent.MOUSE_DOWN&&this.isMouseDown||e==mxEvent.MOUSE_UP&&!this.isMouseDown)&&(l=!0):(this.isMouseDown=!0,this.isMouseTrigger=a),!l&&e==mxEvent.MOUSE_DOWN&&(this.lastMouseX=i.getX(),this.lastMouseY=i.getY()),l)},mxGraph.prototype.isSyntheticEventIgnored=function(e,i,s){var a=!1,l=mxEvent.isMouseEvent(i.getEvent());return this.ignoreMouseEvents&&l&&e!=mxEvent.MOUSE_MOVE?(this.ignoreMouseEvents=e!=mxEvent.MOUSE_UP,a=!0):mxClient.IS_FF&&!l&&e==mxEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),a},mxGraph.prototype.isEventSourceIgnored=function(e,i){var s=i.getSource(),a=null!=s.nodeName?s.nodeName.toLowerCase():"",l=!mxEvent.isMouseEvent(i.getEvent())||mxEvent.isLeftMouseButton(i.getEvent());return e==mxEvent.MOUSE_DOWN&&l&&("select"==a||"option"==a||"input"==a&&"checkbox"!=s.type&&"radio"!=s.type&&"button"!=s.type&&"submit"!=s.type&&"file"!=s.type)},mxGraph.prototype.getEventState=function(e){return e},mxGraph.prototype.fireMouseEvent=function(e,i,s){if(this.isEventSourceIgnored(e,i))null!=this.tooltipHandler&&this.tooltipHandler.hide();else{if(null==s&&(s=this),i=this.updateMouseEvent(i,e),!this.nativeDblClickEnabled&&!mxEvent.isPopupTrigger(i.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&(mxEvent.isTouchEvent(i.getEvent())||mxEvent.isPenEvent(i.getEvent()))){var a=(new Date).getTime();if(!mxClient.IS_QUIRKS&&e==mxEvent.MOUSE_DOWN||mxClient.IS_QUIRKS&&e==mxEvent.MOUSE_UP&&!this.fireDoubleClick)if(null!=this.lastTouchEvent&&this.lastTouchEvent!=i.getEvent()&&a-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-i.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-i.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter++;var l=!1;if(e==mxEvent.MOUSE_UP){if(i.getCell()==this.lastTouchCell&&null!=this.lastTouchCell){this.lastTouchTime=0;var d=this.lastTouchCell;this.lastTouchCell=null,mxClient.IS_QUIRKS&&i.getSource().fireEvent("ondblclick"),this.dblClick(i.getEvent(),d),l=!0}}else this.fireDoubleClick=!0,this.lastTouchTime=0;if(!mxClient.IS_QUIRKS||l)return void mxEvent.consume(i.getEvent())}else(null==this.lastTouchEvent||this.lastTouchEvent!=i.getEvent())&&(this.lastTouchCell=i.getCell(),this.lastTouchX=i.getX(),this.lastTouchY=i.getY(),this.lastTouchTime=a,this.lastTouchEvent=i.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||e==mxEvent.MOUSE_UP)&&this.fireDoubleClick)return this.fireDoubleClick=!1,d=this.lastTouchCell,this.lastTouchCell=null,this.isMouseDown=!1,void((null!=d||(mxEvent.isTouchEvent(i.getEvent())||mxEvent.isPenEvent(i.getEvent()))&&(mxClient.IS_GC||mxClient.IS_SF))&&Math.abs(this.lastTouchX-i.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-i.getY())<this.doubleTapTolerance?this.dblClick(i.getEvent(),d):mxEvent.consume(i.getEvent()))}if(!this.isEventIgnored(e,i,s)){if(i.state=this.getEventState(i.getState()),this.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT,"eventName",e,"event",i)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||mxClient.IS_IE&&mxClient.IS_SVG||i.getEvent().target!=this.container){if(e==mxEvent.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent.isMultiTouchEvent(i.getEvent))this.scrollPointToVisible(i.getGraphX(),i.getGraphY(),this.autoExtend);else if(e==mxEvent.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(0!=this.container.scrollLeft||0!=this.container.scrollTop)){var f=this.view.scale,m=this.view.translate;this.view.setTranslate(m.x-this.container.scrollLeft/f,m.y-this.container.scrollTop/f),this.container.scrollLeft=0,this.container.scrollTop=0}if(null!=this.mouseListeners){var x=[s,i];i.getEvent().preventDefault||(i.getEvent().returnValue=!0);for(var v=0;v<this.mouseListeners.length;v++){var E=this.mouseListeners[v];e==mxEvent.MOUSE_DOWN?E.mouseDown.apply(E,x):e==mxEvent.MOUSE_MOVE?E.mouseMove.apply(E,x):e==mxEvent.MOUSE_UP&&E.mouseUp.apply(E,x)}}e==mxEvent.MOUSE_UP&&this.click(i)}(mxEvent.isTouchEvent(i.getEvent())||mxEvent.isPenEvent(i.getEvent()))&&e==mxEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress?(this.tapAndHoldInProgress=!0,this.initialTouchX=i.getGraphX(),this.initialTouchY=i.getGraphY(),this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils.bind(this,function(){this.tapAndHoldValid&&this.tapAndHold(i),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1}),this.tapAndHoldDelay),this.tapAndHoldValid=!0):e==mxEvent.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-i.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-i.getGraphY())<this.tolerance),e==mxEvent.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(i.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(e,i,s)}}},mxGraph.prototype.consumeMouseEvent=function(e,i,s){e==mxEvent.MOUSE_DOWN&&mxEvent.isTouchEvent(i.getEvent())&&i.consume(!1)},mxGraph.prototype.fireGestureEvent=function(e,i){this.lastTouchTime=0,this.fireEvent(new mxEventObject(mxEvent.GESTURE,"event",e,"cell",i))},mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tooltipHandler&&this.tooltipHandler.destroy(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.destroy(),null!=this.panningHandler&&this.panningHandler.destroy(),null!=this.popupMenuHandler&&this.popupMenuHandler.destroy(),null!=this.connectionHandler&&this.connectionHandler.destroy(),null!=this.graphHandler&&this.graphHandler.destroy(),null!=this.cellEditor&&this.cellEditor.destroy(),null!=this.view&&this.view.destroy(),null!=this.model&&null!=this.graphModelChangeListener&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)},__mxOutput.mxGraph=void 0!==mxGraph?mxGraph:void 0,mxCellOverlay.prototype=new mxEventSource,mxCellOverlay.prototype.constructor=mxCellOverlay,mxCellOverlay.prototype.image=null,mxCellOverlay.prototype.tooltip=null,mxCellOverlay.prototype.align=mxConstants.ALIGN_RIGHT,mxCellOverlay.prototype.verticalAlign=mxConstants.ALIGN_BOTTOM,mxCellOverlay.prototype.offset=null,mxCellOverlay.prototype.cursor=null,mxCellOverlay.prototype.defaultOverlap=.5,mxCellOverlay.prototype.getBounds=function(e){var i=e.view.graph.getModel().isEdge(e.cell),s=e.view.scale,a=null,l=this.image.width,d=this.image.height;if(i){var c=e.absolutePoints;if(c.length%2==1)a=c[Math.floor(c.length/2)];else{var f=c.length/2,m=c[f-1],x=c[f];a=new mxPoint(m.x+(x.x-m.x)/2,m.y+(x.y-m.y)/2)}}else(a=new mxPoint).x=this.align==mxConstants.ALIGN_LEFT?e.x:this.align==mxConstants.ALIGN_CENTER?e.x+e.width/2:e.x+e.width,a.y=this.verticalAlign==mxConstants.ALIGN_TOP?e.y:this.verticalAlign==mxConstants.ALIGN_MIDDLE?e.y+e.height/2:e.y+e.height;return new mxRectangle(Math.round(a.x-(l*this.defaultOverlap-this.offset.x)*s),Math.round(a.y-(d*this.defaultOverlap-this.offset.y)*s),l*s,d*s)},mxCellOverlay.prototype.toString=function(){return this.tooltip},__mxOutput.mxCellOverlay=void 0!==mxCellOverlay?mxCellOverlay:void 0,mxOutline.prototype.source=null,mxOutline.prototype.outline=null,mxOutline.prototype.graphRenderHint=mxConstants.RENDERING_HINT_FASTER,mxOutline.prototype.enabled=!0,mxOutline.prototype.showViewport=!0,mxOutline.prototype.border=10,mxOutline.prototype.sizerSize=8,mxOutline.prototype.labelsVisible=!1,mxOutline.prototype.updateOnPan=!1,mxOutline.prototype.sizerImage=null,mxOutline.prototype.minScale=1e-4,mxOutline.prototype.suspended=!1,mxOutline.prototype.forceVmlHandles=8==document.documentMode,mxOutline.prototype.createGraph=function(e){var i=new mxGraph(e,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet());return i.foldingEnabled=!1,i.autoScroll=!1,i},mxOutline.prototype.init=function(e){this.outline=this.createGraph(e);var i=this.outline.graphModelChanged;if(this.outline.graphModelChanged=mxUtils.bind(this,function(d){!this.suspended&&null!=this.outline&&i.apply(this.outline,arguments)}),mxClient.IS_SVG){var s=this.outline.getView().getCanvas().parentNode;s.setAttribute("shape-rendering","optimizeSpeed"),s.setAttribute("image-rendering","optimizeSpeed")}this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=mxUtils.bind(this,function(d,c){!this.suspended&&!this.active&&this.update()}),this.source.getModel().addListener(mxEvent.CHANGE,this.updateHandler),this.outline.addMouseListener(this);var a=this.source.getView();a.addListener(mxEvent.SCALE,this.updateHandler),a.addListener(mxEvent.TRANSLATE,this.updateHandler),a.addListener(mxEvent.SCALE_AND_TRANSLATE,this.updateHandler),a.addListener(mxEvent.DOWN,this.updateHandler),a.addListener(mxEvent.UP,this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=mxUtils.bind(this,function(d){this.updateOnPan&&this.updateHandler.apply(this,arguments)}),this.source.addListener(mxEvent.PAN,this.panHandler),this.refreshHandler=mxUtils.bind(this,function(d){this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()}),this.source.addListener(mxEvent.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants.OUTLINE_COLOR,mxConstants.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.forceVmlHandles&&(this.selectionBorder.isHtmlAllowed=function(){return!1}),this.selectionBorder.init(this.outline.getView().getOverlayPane());var l=mxUtils.bind(this,function(d){var c=mxEvent.getSource(d),f=mxUtils.bind(this,function(x){this.outline.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(x))}),m=mxUtils.bind(this,function(x){mxEvent.removeGestureListeners(c,null,f,m),this.outline.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(x))});mxEvent.addGestureListeners(c,null,f,m),this.outline.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(d))});mxEvent.addGestureListeners(this.selectionBorder.node,l),this.sizer=this.createSizer(),this.forceVmlHandles&&(this.sizer.isHtmlAllowed=function(){return!1}),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent.addGestureListeners(this.sizer.node,l),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)},mxOutline.prototype.isEnabled=function(){return this.enabled},mxOutline.prototype.setEnabled=function(e){this.enabled=e},mxOutline.prototype.setZoomEnabled=function(e){this.sizer.node.style.visibility=e?"visible":"hidden"},mxOutline.prototype.refresh=function(){this.update(!0)},mxOutline.prototype.createSizer=function(){var e;return null!=this.sizerImage?((e=new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src)).dialect=this.outline.dialect,e):((e=new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants.OUTLINE_HANDLE_FILLCOLOR,mxConstants.OUTLINE_HANDLE_STROKECOLOR)).dialect=this.outline.dialect,e)},mxOutline.prototype.getSourceContainerSize=function(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)},mxOutline.prototype.getOutlineOffset=function(e){return null},mxOutline.prototype.getSourceGraphBounds=function(){return this.source.getGraphBounds()},mxOutline.prototype.update=function(e){if(null!=this.source&&null!=this.source.container&&null!=this.outline&&null!=this.outline.container){var i=this.source.view.scale,s=this.getSourceGraphBounds(),a=new mxRectangle(s.x/i+this.source.panDx,s.y/i+this.source.panDy,s.width/i,s.height/i),l=new mxRectangle(0,0,this.source.container.clientWidth/i,this.source.container.clientHeight/i),d=a.clone();d.add(l);var c=this.getSourceContainerSize(),f=Math.max(c.width/i,d.width),m=Math.max(c.height/i,d.height),x=Math.max(0,this.outline.container.clientWidth-this.border),v=Math.max(0,this.outline.container.clientHeight-this.border),E=Math.min(x/f,v/m),S=isNaN(E)?this.minScale:Math.max(this.minScale,E);if(S>0){this.outline.getView().scale!=S&&(this.outline.getView().scale=S,e=!0);var b=this.outline.getView();b.currentRoot!=this.source.getView().currentRoot&&b.setCurrentRoot(this.source.getView().currentRoot);var T=this.source.view.translate,D=T.x+this.source.panDx,I=T.y+this.source.panDy,O=this.getOutlineOffset(S);null!=O&&(D+=O.x,I+=O.y),a.x<0&&(D-=a.x),a.y<0&&(I-=a.y),(b.translate.x!=D||b.translate.y!=I)&&(b.translate.x=D,b.translate.y=I,e=!0);var N=b.translate,k=(S=this.source.getView().scale)/b.scale,P=1/b.scale,F=this.source.container;this.bounds=new mxRectangle((N.x-T.x-this.source.panDx)/P,(N.y-T.y-this.source.panDy)/P,F.clientWidth/k,F.clientHeight/k),this.bounds.x+=this.source.container.scrollLeft*b.scale/S,this.bounds.y+=this.source.container.scrollTop*b.scale/S,((V=this.selectionBorder.bounds).x!=this.bounds.x||V.y!=this.bounds.y||V.width!=this.bounds.width||V.height!=this.bounds.height)&&(this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw());var V,Y=new mxRectangle(this.bounds.x+this.bounds.width-(V=this.sizer.bounds).width/2,this.bounds.y+this.bounds.height-V.height/2,V.width,V.height);(V.x!=Y.x||V.y!=Y.y||V.width!=Y.width||V.height!=Y.height)&&(this.sizer.bounds=Y,"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw()),e&&this.outline.view.revalidate()}}},mxOutline.prototype.mouseDown=function(e,i){if(this.enabled&&this.showViewport){var s=mxEvent.isMouseEvent(i.getEvent())?0:this.source.tolerance,a=this.source.allowHandleBoundsCheck&&(mxClient.IS_IE||s>0)?new mxRectangle(i.getGraphX()-s,i.getGraphY()-s,2*s,2*s):null;this.zoom=i.isSource(this.sizer)||null!=a&&mxUtils.intersects(shape.bounds,a),this.startX=i.getX(),this.startY=i.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):(this.dx0=0,this.dy0=0)}i.consume()},mxOutline.prototype.mouseMove=function(e,i){if(this.active){this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display;var s=this.getTranslateForEvent(i),a=s.x,l=s.y,d=null;if(this.zoom){var f=this.source.container;l=a/(f.clientWidth/f.clientHeight),d=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+a),Math.max(1,this.bounds.height+l)),this.selectionBorder.bounds=d,this.selectionBorder.redraw()}else{var c=this.outline.getView().scale;d=new mxRectangle(this.bounds.x+a,this.bounds.y+l,this.bounds.width,this.bounds.height),this.selectionBorder.bounds=d,this.selectionBorder.redraw(),a/=c,a*=this.source.getView().scale,l/=c,l*=this.source.getView().scale,this.source.panGraph(-a-this.dx0,-l-this.dy0)}var x=this.sizer.bounds;this.sizer.bounds=new mxRectangle(d.x+d.width-x.width/2,d.y+d.height-x.height/2,x.width,x.height),"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw(),i.consume()}},mxOutline.prototype.getTranslateForEvent=function(e){return new mxPoint(e.getX()-this.startX,e.getY()-this.startY)},mxOutline.prototype.mouseUp=function(e,i){if(this.active){var s=this.getTranslateForEvent(i),a=s.x,l=s.y;if(Math.abs(a)>0||Math.abs(l)>0){if(this.zoom){var c=this.selectionBorder.bounds.width,f=this.source.getView().scale;this.source.zoomTo(Math.max(this.minScale,f-a*f/c),!1)}else if(!this.source.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.source.container)){this.source.panGraph(0,0),a/=this.outline.getView().scale,l/=this.outline.getView().scale;var d=this.source.getView().translate;this.source.getView().setTranslate(d.x-a,d.y-l)}this.update(),i.consume()}this.index=null,this.active=!1}},mxOutline.prototype.destroy=function(){null!=this.source&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent.removeListener(this.source.container,"scroll",this.updateHandler),this.source=null),null!=this.outline&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),null!=this.sizer&&(this.sizer.destroy(),this.sizer=null)},__mxOutput.mxOutline=void 0!==mxOutline?mxOutline:void 0,mxMultiplicity.prototype.type=null,mxMultiplicity.prototype.attr=null,mxMultiplicity.prototype.value=null,mxMultiplicity.prototype.source=null,mxMultiplicity.prototype.min=null,mxMultiplicity.prototype.max=null,mxMultiplicity.prototype.validNeighbors=null,mxMultiplicity.prototype.validNeighborsAllowed=!0,mxMultiplicity.prototype.countError=null,mxMultiplicity.prototype.typeError=null,mxMultiplicity.prototype.check=function(e,i,s,a,l,d){var c="";return(this.source&&this.checkTerminal(e,s,i)||!this.source&&this.checkTerminal(e,a,i))&&(null!=this.countError&&(this.source&&(0==this.max||l>=this.max)||!this.source&&(0==this.max||d>=this.max))&&(c+=this.countError+"\n"),null!=this.validNeighbors&&null!=this.typeError&&this.validNeighbors.length>0)&&(this.checkNeighbors(e,i,s,a)||(c+=this.typeError+"\n")),c.length>0?c:null},mxMultiplicity.prototype.checkNeighbors=function(e,i,s,a){for(var l=e.model.getValue(s),d=e.model.getValue(a),c=!this.validNeighborsAllowed,f=this.validNeighbors,m=0;m<f.length;m++){if(this.source&&this.checkType(e,d,f[m])){c=this.validNeighborsAllowed;break}if(!this.source&&this.checkType(e,l,f[m])){c=this.validNeighborsAllowed;break}}return c},mxMultiplicity.prototype.checkTerminal=function(e,i,s){var a=e.model.getValue(i);return this.checkType(e,a,this.type,this.attr,this.value)},mxMultiplicity.prototype.checkType=function(e,i,s,a,l){return null!=i&&(isNaN(i.nodeType)?i==s:mxUtils.isNode(i,s,a,l))},__mxOutput.mxMultiplicity=void 0!==mxMultiplicity?mxMultiplicity:void 0,mxLayoutManager.prototype=new mxEventSource,mxLayoutManager.prototype.constructor=mxLayoutManager,mxLayoutManager.prototype.graph=null,mxLayoutManager.prototype.bubbling=!0,mxLayoutManager.prototype.enabled=!0,mxLayoutManager.prototype.undoHandler=null,mxLayoutManager.prototype.moveHandler=null,mxLayoutManager.prototype.resizeHandler=null,mxLayoutManager.prototype.isEnabled=function(){return this.enabled},mxLayoutManager.prototype.setEnabled=function(e){this.enabled=e},mxLayoutManager.prototype.isBubbling=function(){return this.bubbling},mxLayoutManager.prototype.setBubbling=function(e){this.bubbling=e},mxLayoutManager.prototype.getGraph=function(){return this.graph},mxLayoutManager.prototype.setGraph=function(e){null!=this.graph&&(this.graph.getModel().removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler),this.graph.removeListener(this.resizeHandler)),this.graph=e,null!=this.graph&&(this.graph.getModel().addListener(mxEvent.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent.MOVE_CELLS,this.moveHandler),this.graph.addListener(mxEvent.RESIZE_CELLS,this.resizeHandler))},mxLayoutManager.prototype.hasLayout=function(e){return this.getLayout(e,mxEvent.LAYOUT_CELLS)},mxLayoutManager.prototype.getLayout=function(e,i){return null},mxLayoutManager.prototype.beforeUndo=function(e){this.executeLayoutForCells(this.getCellsForChanges(e.changes))},mxLayoutManager.prototype.cellsMoved=function(e,i){if(null!=e&&null!=i)for(var s=mxUtils.convertPoint(this.getGraph().container,mxEvent.getClientX(i),mxEvent.getClientY(i)),a=this.getGraph().getModel(),l=0;l<e.length;l++){var d=this.getLayout(a.getParent(e[l]),mxEvent.MOVE_CELLS);null!=d&&d.moveCell(e[l],s.x,s.y)}},mxLayoutManager.prototype.cellsResized=function(e,i,s){if(null!=e&&null!=i)for(var a=this.getGraph().getModel(),l=0;l<e.length;l++){var d=this.getLayout(a.getParent(e[l]),mxEvent.RESIZE_CELLS);null!=d&&d.resizeCell(e[l],i[l],s[l])}},mxLayoutManager.prototype.getCellsForChanges=function(e){for(var i=[],s=0;s<e.length;s++){var a=e[s];if(a instanceof mxRootChange)return[];i=i.concat(this.getCellsForChange(a))}return i},mxLayoutManager.prototype.getCellsForChange=function(e){return e instanceof mxChildChange?this.addCellsWithLayout(e.child,this.addCellsWithLayout(e.previous)):e instanceof mxTerminalChange||e instanceof mxGeometryChange||e instanceof mxVisibleChange||e instanceof mxStyleChange?this.addCellsWithLayout(e.cell):[]},mxLayoutManager.prototype.addCellsWithLayout=function(e,i){return this.addDescendantsWithLayout(e,this.addAncestorsWithLayout(e,i))},mxLayoutManager.prototype.addAncestorsWithLayout=function(e,i){if(i=null!=i?i:[],null!=e&&(null!=this.hasLayout(e)&&i.push(e),this.isBubbling())){var a=this.getGraph().getModel();this.addAncestorsWithLayout(a.getParent(e),i)}return i},mxLayoutManager.prototype.addDescendantsWithLayout=function(e,i){if(i=null!=i?i:[],null!=e&&this.hasLayout(e))for(var s=this.getGraph().getModel(),a=0;a<s.getChildCount(e);a++){var l=s.getChildAt(e,a);this.hasLayout(l)&&(i.push(l),this.addDescendantsWithLayout(l,i))}return i},mxLayoutManager.prototype.executeLayoutForCells=function(e){var i=mxUtils.sortCells(e,!1);this.layoutCells(i,!0),this.layoutCells(i.reverse(),!1)},mxLayoutManager.prototype.layoutCells=function(e,i){if(e.length>0){var s=this.getGraph().getModel();s.beginUpdate();try{for(var a=null,l=0;l<e.length;l++)e[l]!=s.getRoot()&&e[l]!=a&&(this.executeLayout(e[l],i),a=e[l]);this.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS,"cells",e))}finally{s.endUpdate()}}},mxLayoutManager.prototype.executeLayout=function(e,i){var s=this.getLayout(e,i?mxEvent.BEGIN_UPDATE:mxEvent.END_UPDATE);null!=s&&s.execute(e)},mxLayoutManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxLayoutManager=void 0!==mxLayoutManager?mxLayoutManager:void 0,mxSwimlaneManager.prototype=new mxEventSource,mxSwimlaneManager.prototype.constructor=mxSwimlaneManager,mxSwimlaneManager.prototype.graph=null,mxSwimlaneManager.prototype.enabled=!0,mxSwimlaneManager.prototype.horizontal=!0,mxSwimlaneManager.prototype.addEnabled=!0,mxSwimlaneManager.prototype.resizeEnabled=!0,mxSwimlaneManager.prototype.addHandler=null,mxSwimlaneManager.prototype.resizeHandler=null,mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled},mxSwimlaneManager.prototype.setEnabled=function(e){this.enabled=e},mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal},mxSwimlaneManager.prototype.setHorizontal=function(e){this.horizontal=e},mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled},mxSwimlaneManager.prototype.setAddEnabled=function(e){this.addEnabled=e},mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled},mxSwimlaneManager.prototype.setResizeEnabled=function(e){this.resizeEnabled=e},mxSwimlaneManager.prototype.getGraph=function(){return this.graph},mxSwimlaneManager.prototype.setGraph=function(e){null!=this.graph&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=e,null!=this.graph&&(this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler))},mxSwimlaneManager.prototype.isSwimlaneIgnored=function(e){return!this.getGraph().isSwimlane(e)},mxSwimlaneManager.prototype.isCellHorizontal=function(e){if(this.graph.isSwimlane(e)){var i=this.graph.getCellStyle(e);return 1==mxUtils.getValue(i,mxConstants.STYLE_HORIZONTAL,1)}return!this.isHorizontal()},mxSwimlaneManager.prototype.cellsAdded=function(e){if(null!=e){var i=this.getGraph().getModel();i.beginUpdate();try{for(var s=0;s<e.length;s++)this.isSwimlaneIgnored(e[s])||this.swimlaneAdded(e[s])}finally{i.endUpdate()}}},mxSwimlaneManager.prototype.swimlaneAdded=function(e){for(var i=this.getGraph().getModel(),s=i.getParent(e),a=i.getChildCount(s),l=null,d=0;d<a;d++){var c=i.getChildAt(s,d);if(c!=e&&!this.isSwimlaneIgnored(c)&&null!=(l=i.getGeometry(c)))break}if(null!=l){var f=null!=s?this.isCellHorizontal(s):this.horizontal;this.resizeSwimlane(e,l.width,l.height,f)}},mxSwimlaneManager.prototype.cellsResized=function(e){if(null!=e){var i=this.getGraph().getModel();i.beginUpdate();try{for(var s=0;s<e.length;s++)if(!this.isSwimlaneIgnored(e[s])){var a=i.getGeometry(e[s]);if(null!=a){for(var l=new mxRectangle(0,0,a.width,a.height),d=e[s],c=d;null!=c;){d=c,c=i.getParent(c);var f=this.graph.isSwimlane(c)?this.graph.getStartSize(c):new mxRectangle;l.width+=f.width,l.height+=f.height}var m=null!=c?this.isCellHorizontal(c):this.horizontal;this.resizeSwimlane(d,l.width,l.height,m)}}}finally{i.endUpdate()}}},mxSwimlaneManager.prototype.resizeSwimlane=function(e,i,s,a){var l=this.getGraph().getModel();l.beginUpdate();try{var d=this.isCellHorizontal(e);if(!this.isSwimlaneIgnored(e)){var c=l.getGeometry(e);null!=c&&(a&&c.height!=s||!a&&c.width!=i)&&(c=c.clone(),a?c.height=s:c.width=i,l.setGeometry(e,c))}var f=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle;i-=f.width,s-=f.height;for(var m=l.getChildCount(e),x=0;x<m;x++){var v=l.getChildAt(e,x);this.resizeSwimlane(v,i,s,d)}}finally{l.endUpdate()}},mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxSwimlaneManager=void 0!==mxSwimlaneManager?mxSwimlaneManager:void 0,mxTemporaryCellStates.prototype.view=null,mxTemporaryCellStates.prototype.oldStates=null,mxTemporaryCellStates.prototype.oldBounds=null,mxTemporaryCellStates.prototype.oldScale=null,mxTemporaryCellStates.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape},__mxOutput.mxTemporaryCellStates=void 0!==mxTemporaryCellStates?mxTemporaryCellStates:void 0,mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(e,i,s,a,l){a=null==a||a,l=null==l||l;var d=this.deltas.get(e.cell);return null==d?(d={point:new mxPoint(i,s),state:e},this.deltas.put(e.cell,d),this.count++):a?(d.point.x+=i,d.point.y+=s):(d.point.x=i,d.point.y=s),l&&this.addEdges(e),d.point},mxCellStatePreview.prototype.show=function(e){this.deltas.visit(mxUtils.bind(this,function(i,s){this.translateState(s.state,s.point.x,s.point.y)})),this.deltas.visit(mxUtils.bind(this,function(i,s){this.revalidateState(s.state,s.point.x,s.point.y,e)}))},mxCellStatePreview.prototype.translateState=function(e,i,s){if(null!=e){var a=this.graph.getModel();if(a.isVertex(e.cell)){e.view.updateCellState(e);var l=a.getGeometry(e.cell);(0!=i||0!=s)&&null!=l&&(!l.relative||null!=this.deltas.get(e.cell))&&(e.x+=i,e.y+=s)}for(var d=a.getChildCount(e.cell),c=0;c<d;c++)this.translateState(e.view.getState(a.getChildAt(e.cell,c)),i,s)}},mxCellStatePreview.prototype.revalidateState=function(e,i,s,a){if(null!=e){var l=this.graph.getModel();l.isEdge(e.cell)&&e.view.updateCellState(e);var d=this.graph.getCellGeometry(e.cell),c=e.view.getState(l.getParent(e.cell));(0!=i||0!=s)&&null!=d&&d.relative&&l.isVertex(e.cell)&&(null==c||l.isVertex(c.cell)||null!=this.deltas.get(e.cell))&&(e.x+=i,e.y+=s),this.graph.cellRenderer.redraw(e),null!=a&&a(e);for(var f=l.getChildCount(e.cell),m=0;m<f;m++)this.revalidateState(this.graph.view.getState(l.getChildAt(e.cell,m)),i,s,a)}},mxCellStatePreview.prototype.addEdges=function(e){for(var i=this.graph.getModel(),s=i.getEdgeCount(e.cell),a=0;a<s;a++){var l=e.view.getState(i.getEdgeAt(e.cell,a));null!=l&&this.moveState(l,0,0)}},__mxOutput.mxCellStatePreview=void 0!==mxCellStatePreview?mxCellStatePreview:void 0,mxConnectionConstraint.prototype.point=null,mxConnectionConstraint.prototype.perimeter=null,mxConnectionConstraint.prototype.name=null,mxConnectionConstraint.prototype.dx=null,mxConnectionConstraint.prototype.dy=null,__mxOutput.mxConnectionConstraint=void 0!==mxConnectionConstraint?mxConnectionConstraint:void 0,mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=mxClient.IS_IE?20:50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.handlesVisible=!0,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.removeEmptyParents=!1,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.maxLivePreview=0,mxGraphHandler.prototype.allowLivePreview=mxClient.IS_SVG,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(e){this.enabled=e},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(e){this.cloneEnabled=e},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(e){this.moveEnabled=e},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(e){this.selectEnabled=e},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(e){this.removeCellsFromParent=e},mxGraphHandler.prototype.isPropagateSelectionCell=function(e,i,s){var a=this.graph.model.getParent(e);if(i){var l=this.graph.model.isEdge(e)?null:this.graph.getCellGeometry(e);return!this.graph.isSiblingSelected(e)&&(null!=l&&l.relative||!this.graph.isSwimlane(a))}return(!this.graph.isToggleEvent(s.getEvent())||!this.graph.isSiblingSelected(e)&&!this.graph.isCellSelected(e)&&!this.graph.isSwimlane(a)||this.graph.isCellSelected(a))&&(this.graph.isToggleEvent(s.getEvent())||!this.graph.isCellSelected(a))},mxGraphHandler.prototype.getInitialCellForEvent=function(e){var i=e.getState();if(!(this.graph.isToggleEvent(e.getEvent())&&mxEvent.isAltDown(e.getEvent())||null==i||this.graph.isCellSelected(i.cell)))for(var s=this.graph.model,a=this.graph.view.getState(s.getParent(i.cell));null!=a&&!this.graph.isCellSelected(a.cell)&&(s.isVertex(a.cell)||s.isEdge(a.cell))&&this.isPropagateSelectionCell(i.cell,!0,e);)i=a,a=this.graph.view.getState(this.graph.getModel().getParent(i.cell));return null!=i?i.cell:null},mxGraphHandler.prototype.isDelayedSelection=function(e,i){if(!this.graph.isToggleEvent(i.getEvent())||!mxEvent.isAltDown(i.getEvent()))for(;null!=e;){if(this.graph.selectionCellsHandler.isHandled(e))return this.graph.cellEditor.getEditingCell()!=e;e=this.graph.model.getParent(e)}return this.graph.isToggleEvent(i.getEvent())&&!mxEvent.isAltDown(i.getEvent())},mxGraphHandler.prototype.selectDelayed=function(e){if(!this.graph.popupMenuHandler.isPopupTrigger(e)){var i=e.getCell();null==i&&(i=this.cell),this.selectCellForEvent(i,e)}},mxGraphHandler.prototype.selectCellForEvent=function(e,i){var s=this.graph.view.getState(e);if(null!=s)if(i.isSource(s.control))this.graph.selectCellForEvent(e,i.getEvent());else{if(!this.graph.isToggleEvent(i.getEvent())||!mxEvent.isAltDown(i.getEvent()))for(var a=this.graph.getModel(),l=a.getParent(e);null!=this.graph.view.getState(l)&&(a.isVertex(l)||a.isEdge(l))&&this.isPropagateSelectionCell(e,!1,i);)l=a.getParent(e=l);this.graph.selectCellForEvent(e,i.getEvent())}return e},mxGraphHandler.prototype.consumeMouseEvent=function(e,i){i.consume()},mxGraphHandler.prototype.mouseDown=function(e,i){if(!i.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null!=i.getState()&&!mxEvent.isMultiTouchEvent(i.getEvent())){var s=this.getInitialCellForEvent(i);if(this.delayedSelection=this.isDelayedSelection(s,i),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(s,i.getEvent()),this.isMoveEnabled()){var a=this.graph.model,l=a.getGeometry(s);this.graph.isCellMovable(s)&&(!a.isEdge(s)||this.graph.getSelectionCount()>1||null!=l.points&&l.points.length>0||null==a.getTerminal(s,!0)||null==a.getTerminal(s,!1)||this.graph.allowDanglingEdges||this.graph.isCloneEvent(i.getEvent())&&this.graph.isCellsCloneable())?this.start(s,i.getX(),i.getY()):this.delayedSelection&&(this.cell=s),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent.MOUSE_DOWN,i)}}},mxGraphHandler.prototype.getGuideStates=function(){var e=this.graph.getDefaultParent(),i=this.graph.getModel(),s=mxUtils.bind(this,function(a){return null!=this.graph.view.getState(a)&&i.isVertex(a)&&null!=i.getGeometry(a)&&!i.getGeometry(a).relative});return this.graph.view.getCellStates(i.filterDescendants(s,e))},mxGraphHandler.prototype.getCells=function(e){return!this.delayedSelection&&this.graph.isCellMovable(e)?[e]:this.graph.getMovableCells(this.graph.getSelectionCells())},mxGraphHandler.prototype.getPreviewBounds=function(e){var i=this.getBoundingBox(e);return null!=i&&(i.width=Math.max(0,i.width-1),i.height=Math.max(0,i.height-1),i.width<this.minimumSize?(i.x-=(this.minimumSize-i.width)/2,i.width=this.minimumSize):(i.x=Math.round(i.x),i.width=Math.ceil(i.width)),i.height<this.minimumSize?(i.y-=(this.minimumSize-i.height)/2,i.height=this.minimumSize):(i.y=Math.round(i.y),i.height=Math.ceil(i.height))),i},mxGraphHandler.prototype.getBoundingBox=function(e){var i=null;if(null!=e&&e.length>0)for(var s=this.graph.getModel(),a=0;a<e.length;a++)if(s.isVertex(e[a])||s.isEdge(e[a])){var l=this.graph.view.getState(e[a]);if(null!=l){var d=l;s.isVertex(e[a])&&null!=l.shape&&null!=l.shape.boundingBox&&(d=l.shape.boundingBox),null==i?i=mxRectangle.fromRectangle(d):i.add(d)}}return i},mxGraphHandler.prototype.createPreviewShape=function(e){var i=new mxRectangleShape(e,null,this.previewColor);return i.isDashed=!0,this.htmlPreview?(i.dialect=mxConstants.DIALECT_STRICTHTML,i.init(this.graph.container)):(i.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,i.init(this.graph.getView().getOverlayPane()),i.pointerEvents=!1,mxClient.IS_IOS&&(i.getSvgScreenOffset=function(){return 0})),i},mxGraphHandler.prototype.start=function(e,i,s,a){this.cell=e,this.first=mxUtils.convertPoint(this.graph.container,i,s),this.cells=null!=a?a:this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary,this.cloning=!1,this.cellCount=0;for(var l=0;l<this.cells.length;l++)this.cellCount+=this.addStates(this.cells[l],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide(this.graph,this.getGuideStates());var d=this.graph.model.getParent(e),c=this.graph.model.getChildCount(d)<2,f=new mxDictionary,m=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell);for(l=0;l<m.length;l++){var x=this.graph.view.getState(m[l]);null!=x&&!f.get(x)&&f.put(x,!0)}this.guide.isStateIgnored=mxUtils.bind(this,function(v){var E=this.graph.model.getParent(v.cell);return null!=v.cell&&(!this.cloning&&this.isCellMoving(v.cell)||v.cell!=(this.target||d)&&!c&&!f.get(v)&&(null==this.target||this.graph.model.getChildCount(this.target)>=2)&&E!=(this.target||d))})}},mxGraphHandler.prototype.addStates=function(e,i){var s=this.graph.view.getState(e),a=0;if(null!=s&&null==i.get(e)){i.put(e,s),a++;for(var l=this.graph.model.getChildCount(e),d=0;d<l;d++)a+=this.addStates(this.graph.model.getChildAt(e,d),i)}return a},mxGraphHandler.prototype.isCellMoving=function(e){return null!=this.allCells.get(e)},mxGraphHandler.prototype.useGuidesForEvent=function(e){return null==this.guide||this.guide.isEnabledForEvent(e.getEvent())&&!this.graph.isConstrainedEvent(e.getEvent())},mxGraphHandler.prototype.snap=function(e){var i=this.scaleGrid?this.graph.view.scale:1;return e.x=this.graph.snap(e.x/i)*i,e.y=this.graph.snap(e.y/i)*i,e},mxGraphHandler.prototype.getDelta=function(e){var i=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY());return new mxPoint(i.x-this.first.x-this.graph.panDx,i.y-this.first.y-this.graph.panDy)},mxGraphHandler.prototype.updateHint=function(e){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(e){return Math.round(100*e)/100},mxGraphHandler.prototype.isValidDropTarget=function(e,i){return this.graph.model.getParent(this.cell)!=e},mxGraphHandler.prototype.checkPreview=function(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?(!this.cloning||!this.livePreviewActive)&&(this.livePreviewActive=!0,this.livePreviewUsed=!0):!this.livePreviewUsed&&null==this.shape&&(this.shape=this.createPreviewShape(this.bounds))},mxGraphHandler.prototype.mouseMove=function(e,i){var s=this.graph;if(i.isConsumed()||!s.isMouseDown||null==this.cell||null==this.first||null==this.bounds||this.suspended){if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!i.isConsumed()&&(null!=i.getState()||null!=i.sourceState)&&!s.isMouseDown){var T=s.getCursorForMouseEvent(i);null==T&&s.isEnabled()&&s.isCellMovable(i.getCell())&&(T=s.getModel().isEdge(i.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX),null!=T&&null!=i.sourceState&&i.sourceState.setCursor(T)}}else{if(mxEvent.isMultiTouchEvent(i.getEvent()))return void this.reset();var a=this.getDelta(i),l=s.tolerance;if(null!=this.shape||this.livePreviewActive||Math.abs(a.x)>l||Math.abs(a.y)>l){null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3));var d=s.isCloneEvent(i.getEvent())&&s.isCellsCloneable()&&this.isCloneEnabled(),c=s.isGridEnabledEvent(i.getEvent()),f=i.getCell(),m=!0,x=null;this.cloning=d,s.isDropEnabled()&&this.highlightEnabled&&(x=s.getDropTarget(this.cells,i.getEvent(),f,d));var v=s.getView().getState(x),E=!1;if(null!=v&&(d||this.isValidDropTarget(x,i)))this.target!=x&&(this.target=x,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),E=!0;else if(this.target=null,this.connectOnDrop&&null!=f&&1==this.cells.length&&s.getModel().isVertex(f)&&s.isCellConnectable(f)&&null!=(v=s.getView().getState(f))){var S=s.getEdgeValidationError(null,this.cell,f);this.setHighlightColor(null==S?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR),E=!0}null!=v&&E?this.highlight.highlight(v):this.highlight.hide(),null!=this.guide&&this.useGuidesForEvent(i)?(a=this.guide.move(this.bounds,a,c,d),m=!1):a=this.graph.snapDelta(a,this.bounds,!c,!1,!1),null!=this.guide&&m&&this.guide.hide(),s.isConstrainedEvent(i.getEvent())&&(Math.abs(a.x)>Math.abs(a.y)?a.y=0:a.x=0),this.checkPreview(),(this.currentDx!=a.x||this.currentDy!=a.y)&&(this.currentDx=a.x,this.currentDy=a.y,this.updatePreview())}this.updateHint(i),this.consumeMouseEvent(mxEvent.MOUSE_MOVE,i),mxEvent.consume(i.getEvent())}},mxGraphHandler.prototype.updatePreview=function(e){this.livePreviewUsed&&!e?null!=this.cells&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&null!=this.pBounds&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.updateLivePreview=function(e,i){if(!this.suspended){var s=[];if(null!=this.allCells&&this.allCells.visit(mxUtils.bind(this,function(T,D){var I=this.graph.view.getState(D.cell);if(I!=D&&(D.destroy(),null!=I?this.allCells.put(D.cell,I):this.allCells.remove(D.cell),D=I),null!=D){var O=D.clone();s.push([D,O]),null!=D.shape&&(null==D.shape.originalPointerEvents&&(D.shape.originalPointerEvents=D.shape.pointerEvents),D.shape.pointerEvents=!1,null!=D.text&&(null==D.text.originalPointerEvents&&(D.text.originalPointerEvents=D.text.pointerEvents),D.text.pointerEvents=!1)),this.graph.model.isVertex(D.cell)&&(D.x+=e,D.y+=i,this.cloning?null!=D.text&&(D.text.updateBoundingBox(),null!=D.text.boundingBox&&(D.text.boundingBox.x+=e,D.text.boundingBox.y+=i),null!=D.text.unrotatedBoundingBox&&(D.text.unrotatedBoundingBox.x+=e,D.text.unrotatedBoundingBox.y+=i)):(D.view.graph.cellRenderer.redraw(D,!0),D.view.invalidate(D.cell),D.invalid=!1,null!=D.control&&null!=D.control.node&&(D.control.node.style.visibility="hidden")))}})),0==s.length)this.reset();else{for(var a=this.graph.view.scale,l=0;l<s.length;l++){var d=s[l][0];if(this.graph.model.isEdge(d.cell)){var c=this.graph.getCellGeometry(d.cell),f=[];if(null!=c&&null!=c.points)for(var m=0;m<c.points.length;m++)null!=c.points[m]&&f.push(new mxPoint(c.points[m].x+e/a,c.points[m].y+i/a));var x=d.visibleSourceState,v=d.visibleTargetState,E=s[l][1].absolutePoints;if(null!=x&&this.isCellMoving(x.cell))d.view.updateFixedTerminalPoint(d,x,!0,this.graph.getConnectionConstraint(d,x,!0));else{var S=E[0];d.setAbsoluteTerminalPoint(new mxPoint(S.x+e,S.y+i),!0),x=null}if(null!=v&&this.isCellMoving(v.cell))d.view.updateFixedTerminalPoint(d,v,!1,this.graph.getConnectionConstraint(d,v,!1));else{var b=E[E.length-1];d.setAbsoluteTerminalPoint(new mxPoint(b.x+e,b.y+i),!1),v=null}d.view.updatePoints(d,f,x,v),d.view.updateFloatingTerminalPoints(d,x,v),d.view.updateEdgeLabelOffset(d),d.invalid=!1,this.cloning||d.view.graph.cellRenderer.redraw(d,!0)}}this.graph.view.validate(),this.redrawHandles(s),this.resetPreviewStates(s)}}},mxGraphHandler.prototype.redrawHandles=function(e){for(var i=0;i<e.length;i++){var s=this.graph.selectionCellsHandler.getHandler(e[i][0].cell);null!=s&&s.redraw(!0)}},mxGraphHandler.prototype.resetPreviewStates=function(e){for(var i=0;i<e.length;i++)e[i][0].setState(e[i][1])},mxGraphHandler.prototype.suspend=function(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),null!=this.shape&&(this.shape.node.style.visibility="hidden"),null!=this.guide&&this.guide.setVisible(!1),this.suspended=!0)},mxGraphHandler.prototype.resume=function(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),null!=this.shape&&(this.shape.node.style.visibility="visible"),null!=this.guide&&this.guide.setVisible(!0))},mxGraphHandler.prototype.resetLivePreview=function(){null!=this.allCells&&(this.allCells.visit(mxUtils.bind(this,function(e,i){null!=i.shape&&null!=i.shape.originalPointerEvents&&(i.shape.pointerEvents=i.shape.originalPointerEvents,i.shape.originalPointerEvents=null,i.shape.bounds=null,null!=i.text&&(i.text.pointerEvents=i.text.originalPointerEvents,i.text.originalPointerEvents=null)),null!=i.control&&null!=i.control.node&&"hidden"==i.control.node.style.visibility&&(i.control.node.style.visibility=""),this.cloning||null!=i.text&&i.text.updateBoundingBox(),i.view.invalidate(i.cell)})),this.graph.view.validate())},mxGraphHandler.prototype.setHandlesVisibleForCells=function(e,i,s){if(s||this.handlesVisible!=i){this.handlesVisible=i;for(var a=0;a<e.length;a++){var l=this.graph.selectionCellsHandler.getHandler(e[a]);null!=l&&(l.setHandlesVisible(i),i&&l.redraw())}}},mxGraphHandler.prototype.setHighlightColor=function(e){null!=this.highlight&&this.highlight.setHighlightColor(e)},mxGraphHandler.prototype.mouseUp=function(e,i){if(!i.isConsumed())if(this.livePreviewUsed&&this.resetLivePreview(),null==this.cell||null==this.first||null==this.shape&&!this.livePreviewUsed||null==this.currentDx||null==this.currentDy)this.isSelectEnabled()&&this.delayedSelection&&null!=this.cell&&this.selectDelayed(i);else{var s=this.graph,a=i.getCell();if(this.connectOnDrop&&null==this.target&&null!=a&&s.getModel().isVertex(a)&&s.isCellConnectable(a)&&s.isEdgeValid(null,this.cell,a))s.connectionHandler.connect(this.cell,a,i.getEvent());else{var l=s.isCloneEvent(i.getEvent())&&s.isCellsCloneable()&&this.isCloneEnabled(),d=s.getView().scale,c=this.roundLength(this.currentDx/d),f=this.roundLength(this.currentDy/d),m=this.target;s.isSplitEnabled()&&s.isSplitTarget(m,this.cells,i.getEvent())?s.splitEdge(m,this.cells,null,c,f,i.getGraphX(),i.getGraphY()):this.moveCells(this.cells,c,f,l,this.target,i.getEvent())}}this.cellWasClicked&&this.consumeMouseEvent(mxEvent.MOUSE_UP,i),this.reset()},mxGraphHandler.prototype.reset=function(){this.livePreviewUsed&&(this.resetLivePreview(),this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!0)),this.destroyShapes(),this.removeHint(),this.delayedSelection=!1,this.livePreviewActive=null,this.livePreviewUsed=null,this.cellWasClicked=!1,this.suspended=null,this.currentDx=null,this.currentDy=null,this.cellCount=null,this.cloning=!1,this.allCells=null,this.pBounds=null,this.guides=null,this.target=null,this.first=null,this.cells=null,this.cell=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(e,i,s){if(this.graph.getModel().isVertex(e)){var a=this.graph.getView().getState(e);if(null!=a){var l=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(s),mxEvent.getClientY(s)),d=mxUtils.toRadians(mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION)||0);if(0!=d){var c=Math.cos(-d),f=Math.sin(-d),m=new mxPoint(a.getCenterX(),a.getCenterY());l=mxUtils.getRotatedPoint(l,c,f,m)}return!mxUtils.contains(a,l.x,l.y)}}return!1},mxGraphHandler.prototype.moveCells=function(e,i,s,a,l,d){a&&(e=this.graph.getCloneableCells(e));var c=this.graph.getModel().getParent(this.cell);null==l&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(c,e,d)&&(l=this.graph.getDefaultParent()),a=a&&!this.graph.isCellLocked(l||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{var f=[];if(!a&&null!=l&&this.removeEmptyParents){for(var m=new mxDictionary,x=0;x<e.length;x++)m.put(e[x],!0);for(x=0;x<e.length;x++){var v=this.graph.model.getParent(e[x]);null!=v&&!m.get(v)&&(m.put(v,!0),f.push(v))}}e=this.graph.moveCells(e,i,s,a,l,d);var E=[];for(x=0;x<f.length;x++)this.shouldRemoveParent(f[x])&&E.push(f[x]);this.graph.removeCells(E,!1)}finally{this.graph.getModel().endUpdate()}a&&this.graph.setSelectionCells(e),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(e[0])},mxGraphHandler.prototype.shouldRemoveParent=function(e){var i=this.graph.view.getState(e);return null!=i&&(this.graph.model.isEdge(i.cell)||this.graph.model.isVertex(i.cell))&&this.graph.isCellDeletable(i.cell)&&0==this.graph.model.getChildCount(i.cell)&&this.graph.isTransparentState(i)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.refreshHandler&&(this.graph.getModel().removeListener(this.refreshHandler),this.graph.removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent.removeListener(document,"keydown",this.keyHandler),mxEvent.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()},__mxOutput.mxGraphHandler=void 0!==mxGraphHandler?mxGraphHandler:void 0;mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(e){this.panningEnabled=e},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(e){this.pinchEnabled=e},mxPanningHandler.prototype.isPanningTrigger=function(e){var i=e.getEvent();return this.useLeftButtonForPanning&&null==e.getState()&&mxEvent.isLeftMouseButton(i)||mxEvent.isControlDown(i)&&mxEvent.isShiftDown(i)||this.usePopupTrigger&&mxEvent.isPopupTrigger(i)},mxPanningHandler.prototype.isForcePanningEvent=function(e){return this.ignoreCell||mxEvent.isMultiTouchEvent(e.getEvent())},mxPanningHandler.prototype.mouseDown=function(e,i){this.mouseDownEvent=i,!i.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(i)&&(this.start(i),this.consumePanningTrigger(i))},mxPanningHandler.prototype.start=function(e){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=e.getX(),this.startY=e.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(e){e.consume()},mxPanningHandler.prototype.mouseMove=function(e,i){if(this.dx=i.getX()-this.startX,this.dy=i.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",i));else if(this.panningTrigger){var s=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!s&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",i))}(this.active||this.panningTrigger)&&i.consume()},mxPanningHandler.prototype.mouseUp=function(e,i){if(this.active){if(null!=this.dx&&null!=this.dy){if(!this.graph.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.graph.container)){var s=this.graph.getView().scale,a=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(a.x+this.dx/s,a.y+this.dy/s)}i.consume()}this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",i))}this.reset()},mxPanningHandler.prototype.zoomGraph=function(e){var i=Math.round(this.initialScale*e.scale*100)/100;null!=this.minScale&&(i=Math.max(this.minScale,i)),null!=this.maxScale&&(i=Math.min(this.maxScale,i)),this.graph.view.scale!=i&&(this.graph.zoomTo(i),mxEvent.consume(e))},mxPanningHandler.prototype.reset=function(){this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null},mxPanningHandler.prototype.panGraph=function(e,i){this.graph.getView().setTranslate(e,i)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)},__mxOutput.mxPanningHandler=void 0!==mxPanningHandler?mxPanningHandler:void 0,mxPopupMenuHandler.prototype=new mxPopupMenu,mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler,mxPopupMenuHandler.prototype.graph=null,mxPopupMenuHandler.prototype.selectOnPopup=!0,mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0,mxPopupMenuHandler.prototype.triggerX=null,mxPopupMenuHandler.prototype.triggerY=null,mxPopupMenuHandler.prototype.screenX=null,mxPopupMenuHandler.prototype.screenY=null,mxPopupMenuHandler.prototype.init=function(){mxPopupMenu.prototype.init.apply(this),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(e){this.graph.tooltipHandler.hide()}))},mxPopupMenuHandler.prototype.isSelectOnPopup=function(e){return this.selectOnPopup},mxPopupMenuHandler.prototype.mouseDown=function(e,i){this.isEnabled()&&!mxEvent.isMultiTouchEvent(i.getEvent())&&(this.hideMenu(),this.triggerX=i.getGraphX(),this.triggerY=i.getGraphY(),this.screenX=mxEvent.getMainEvent(i.getEvent()).screenX,this.screenY=mxEvent.getMainEvent(i.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(i),this.inTolerance=!0)},mxPopupMenuHandler.prototype.mouseMove=function(e,i){this.inTolerance&&null!=this.screenX&&null!=this.screenY&&(Math.abs(mxEvent.getMainEvent(i.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent.getMainEvent(i.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxPopupMenuHandler.prototype.mouseUp=function(e,i){if(this.popupTrigger&&this.inTolerance&&null!=this.triggerX&&null!=this.triggerY){var s=this.getCellForPopupEvent(i);this.graph.isEnabled()&&this.isSelectOnPopup(i)&&null!=s&&!this.graph.isCellSelected(s)?this.graph.setSelectionCell(s):this.clearSelectionOnBackground&&null==s&&this.graph.clearSelection(),this.graph.tooltipHandler.hide();var a=mxUtils.getScrollOrigin();this.popup(i.getX()+a.x+1,i.getY()+a.y+1,s,i.getEvent()),i.consume()}this.popupTrigger=!1,this.inTolerance=!1},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(e){return e.getCell()},mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu.prototype.destroy.apply(this)},__mxOutput.mxPopupMenuHandler=void 0!==mxPopupMenuHandler?mxPopupMenuHandler:void 0,mxUtils.extend(mxCellMarker,mxEventSource),mxCellMarker.prototype.graph=null,mxCellMarker.prototype.enabled=!0,mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT,mxCellMarker.prototype.hotspotEnabled=!1,mxCellMarker.prototype.validColor=null,mxCellMarker.prototype.invalidColor=null,mxCellMarker.prototype.currentColor=null,mxCellMarker.prototype.validState=null,mxCellMarker.prototype.markedState=null,mxCellMarker.prototype.setEnabled=function(e){this.enabled=e},mxCellMarker.prototype.isEnabled=function(){return this.enabled},mxCellMarker.prototype.setHotspot=function(e){this.hotspot=e},mxCellMarker.prototype.getHotspot=function(){return this.hotspot},mxCellMarker.prototype.setHotspotEnabled=function(e){this.hotspotEnabled=e},mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled},mxCellMarker.prototype.hasValidState=function(){return null!=this.validState},mxCellMarker.prototype.getValidState=function(){return this.validState},mxCellMarker.prototype.getMarkedState=function(){return this.markedState},mxCellMarker.prototype.reset=function(){this.validState=null,null!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.process=function(e){var i=null;return this.isEnabled()&&(i=this.getState(e),this.setCurrentState(i,e)),i},mxCellMarker.prototype.setCurrentState=function(e,i,s){var a=null!=e&&this.isValidState(e);s=null!=s?s:this.getMarkerColor(i.getEvent(),e,a),this.validState=a?e:null,(e!=this.markedState||s!=this.currentColor)&&(this.currentColor=s,null!=e&&null!=this.currentColor?(this.markedState=e,this.mark()):null!=this.markedState&&(this.markedState=null,this.unmark()))},mxCellMarker.prototype.markCell=function(e,i){var s=this.graph.getView().getState(e);null!=s&&(this.currentColor=null!=i?i:this.validColor,this.markedState=s,this.mark())},mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))},mxCellMarker.prototype.unmark=function(){this.mark()},mxCellMarker.prototype.isValidState=function(e){return!0},mxCellMarker.prototype.getMarkerColor=function(e,i,s){return s?this.validColor:this.invalidColor},mxCellMarker.prototype.getState=function(e){var i=this.graph.getView(),s=this.getCell(e),a=this.getStateToMark(i.getState(s));return null!=a&&this.intersects(a,e)?a:null},mxCellMarker.prototype.getCell=function(e){return e.getCell()},mxCellMarker.prototype.getStateToMark=function(e){return e},mxCellMarker.prototype.intersects=function(e,i){return!this.hotspotEnabled||mxUtils.intersectsHotspot(e,i.getGraphX(),i.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE)},mxCellMarker.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()},__mxOutput.mxCellMarker=void 0!==mxCellMarker?mxCellMarker:void 0,mxUtils.extend(mxSelectionCellsHandler,mxEventSource),mxSelectionCellsHandler.prototype.graph=null,mxSelectionCellsHandler.prototype.enabled=!0,mxSelectionCellsHandler.prototype.refreshHandler=null,mxSelectionCellsHandler.prototype.maxHandlers=100,mxSelectionCellsHandler.prototype.handlers=null,mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled},mxSelectionCellsHandler.prototype.setEnabled=function(e){this.enabled=e},mxSelectionCellsHandler.prototype.getHandler=function(e){return this.handlers.get(e)},mxSelectionCellsHandler.prototype.isHandled=function(e){return null!=this.getHandler(e)},mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(e,i){i.reset.apply(i)})},mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){return this.graph.getSelectionCells()},mxSelectionCellsHandler.prototype.refresh=function(){var e=this.handlers;this.handlers=new mxDictionary;for(var i=mxUtils.sortCells(this.getHandledSelectionCells(),!1),s=0;s<i.length;s++)null!=(a=this.graph.view.getState(i[s]))&&(null!=(l=e.remove(i[s]))&&(l.state!=a?(l.destroy(),l=null):this.isHandlerActive(l)||(null!=l.refresh&&l.refresh(),l.redraw())),null!=l&&this.handlers.put(i[s],l));for(e.visit(mxUtils.bind(this,function(d,c){this.fireEvent(new mxEventObject(mxEvent.REMOVE,"state",c.state)),c.destroy()})),s=0;s<i.length;s++){var a,l;null!=(a=this.graph.view.getState(i[s]))&&(null==(l=this.handlers.get(i[s]))?(l=this.graph.createHandler(a),this.fireEvent(new mxEventObject(mxEvent.ADD,"state",a)),this.handlers.put(i[s],l)):l.updateParentHighlight())}},mxSelectionCellsHandler.prototype.isHandlerActive=function(e){return null!=e.index},mxSelectionCellsHandler.prototype.updateHandler=function(e){var i=this.handlers.remove(e.cell);if(null!=i){var s=i.index,a=i.startX,l=i.startY;i.destroy(),null!=(i=this.graph.createHandler(e))&&(this.handlers.put(e.cell,i),null!=s&&null!=a&&null!=l&&i.start(a,l,s))}},mxSelectionCellsHandler.prototype.mouseDown=function(e,i){if(this.graph.isEnabled()&&this.isEnabled()){var s=[e,i];this.handlers.visit(function(a,l){l.mouseDown.apply(l,s)})}},mxSelectionCellsHandler.prototype.mouseMove=function(e,i){if(this.graph.isEnabled()&&this.isEnabled()){var s=[e,i];this.handlers.visit(function(a,l){l.mouseMove.apply(l,s)})}},mxSelectionCellsHandler.prototype.mouseUp=function(e,i){if(this.graph.isEnabled()&&this.isEnabled()){var s=[e,i];this.handlers.visit(function(a,l){l.mouseUp.apply(l,s)})}},mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.refreshHandler&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)},__mxOutput.mxSelectionCellsHandler=void 0!==mxSelectionCellsHandler?mxSelectionCellsHandler:void 0,mxUtils.extend(mxConnectionHandler,mxEventSource),mxConnectionHandler.prototype.graph=null,mxConnectionHandler.prototype.factoryMethod=!0,mxConnectionHandler.prototype.moveIconFront=!1,mxConnectionHandler.prototype.moveIconBack=!1,mxConnectionHandler.prototype.connectImage=null,mxConnectionHandler.prototype.targetConnectImage=!1,mxConnectionHandler.prototype.enabled=!0,mxConnectionHandler.prototype.select=!0,mxConnectionHandler.prototype.createTarget=!1,mxConnectionHandler.prototype.marker=null,mxConnectionHandler.prototype.constraintHandler=null,mxConnectionHandler.prototype.error=null,mxConnectionHandler.prototype.waypointsEnabled=!1,mxConnectionHandler.prototype.ignoreMouseDown=!1,mxConnectionHandler.prototype.first=null,mxConnectionHandler.prototype.connectIconOffset=new mxPoint(0,mxConstants.TOOLTIP_VERTICAL_OFFSET),mxConnectionHandler.prototype.edgeState=null,mxConnectionHandler.prototype.changeHandler=null,mxConnectionHandler.prototype.drillHandler=null,mxConnectionHandler.prototype.mouseDownCounter=0,mxConnectionHandler.prototype.movePreviewAway=mxClient.IS_VML,mxConnectionHandler.prototype.outlineConnect=!1,mxConnectionHandler.prototype.livePreview=!1,mxConnectionHandler.prototype.cursor=null,mxConnectionHandler.prototype.insertBeforeSource=!1,mxConnectionHandler.prototype.isEnabled=function(){return this.enabled},mxConnectionHandler.prototype.setEnabled=function(e){this.enabled=e},mxConnectionHandler.prototype.isInsertBefore=function(e,i,s,a,l){return this.insertBeforeSource&&i!=s},mxConnectionHandler.prototype.isCreateTarget=function(e){return this.createTarget},mxConnectionHandler.prototype.setCreateTarget=function(e){this.createTarget=e},mxConnectionHandler.prototype.createShape=function(){var e=this.livePreview&&null!=this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants.INVALID_COLOR);return e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.scale=this.graph.view.scale,e.pointerEvents=!1,e.isDashed=!0,e.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(e.node,this.graph,null),e},mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils.bind(this,function(e){null!=this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),null!=this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):null!=this.previous&&null==this.graph.view.getState(this.previous.cell)&&this.reset()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils.bind(this,function(e){this.reset()}),this.graph.addListener(mxEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent.UP,this.drillHandler)},mxConnectionHandler.prototype.isConnectableCell=function(e){return!0},mxConnectionHandler.prototype.createMarker=function(){var e=new mxCellMarker(this.graph);return e.hotspotEnabled=!0,e.getCell=mxUtils.bind(this,function(i){var s=mxCellMarker.prototype.getCell.apply(e,arguments);if(this.error=null,null==s&&null!=this.currentPoint&&(s=this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y)),null!=s&&!this.graph.isCellConnectable(s)){var a=this.graph.getModel().getParent(s);this.graph.getModel().isVertex(a)&&this.graph.isCellConnectable(a)&&(s=a)}return(this.graph.isSwimlane(s)&&null!=this.currentPoint&&this.graph.hitsSwimlaneContent(s,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(s))&&(s=null),null!=s?this.isConnecting()?null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,s),null!=this.error&&0==this.error.length&&(s=null,this.isCreateTarget(i.getEvent())&&(this.error=null))):this.isValidSource(s,i)||(s=null):this.isConnecting()&&!this.isCreateTarget(i.getEvent())&&!this.graph.allowDanglingEdges&&(this.error=""),s}),e.isValidState=mxUtils.bind(this,function(i){return this.isConnecting()?null==this.error:mxCellMarker.prototype.isValidState.apply(e,arguments)}),e.getMarkerColor=mxUtils.bind(this,function(i,s,a){return null==this.connectImage||this.isConnecting()?mxCellMarker.prototype.getMarkerColor.apply(e,arguments):null}),e.intersects=mxUtils.bind(this,function(i,s){return!(null==this.connectImage&&!this.isConnecting())||mxCellMarker.prototype.intersects.apply(e,arguments)}),e},mxConnectionHandler.prototype.start=function(e,i,s,a){this.previous=e,this.first=new mxPoint(i,s),this.edgeState=null!=a?a:this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=e,this.marker.mark(),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous))},mxConnectionHandler.prototype.isConnecting=function(){return null!=this.first&&null!=this.shape},mxConnectionHandler.prototype.isValidSource=function(e,i){return this.graph.isValidSource(e)},mxConnectionHandler.prototype.isValidTarget=function(e){return!0},mxConnectionHandler.prototype.validateConnection=function(e,i){return this.isValidTarget(i)?this.graph.getEdgeValidationError(null,e,i):""},mxConnectionHandler.prototype.getConnectImage=function(e){return this.connectImage},mxConnectionHandler.prototype.isMoveIconToFrontForState=function(e){return null!=e.text&&e.text.node.parentNode==this.graph.container||this.moveIconFront},mxConnectionHandler.prototype.createIcons=function(e){var i=this.getConnectImage(e);if(null!=i&&null!=e){this.iconState=e;var s=[],l=new mxImageShape(new mxRectangle(0,0,i.width,i.height),i.src,null,null,0);l.preserveImageAspect=!1,this.isMoveIconToFrontForState(e)?(l.dialect=mxConstants.DIALECT_STRICTHTML,l.init(this.graph.container)):(l.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,l.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&null!=l.node.previousSibling&&l.node.parentNode.insertBefore(l.node,l.node.parentNode.firstChild)),l.node.style.cursor=mxConstants.CURSOR_CONNECT;var d=mxUtils.bind(this,function(){return null!=this.currentState?this.currentState:e}),c=mxUtils.bind(this,function(f){mxEvent.isConsumed(f)||(this.icon=l,this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(f,d())))});return mxEvent.redirectMouseEvents(l.node,this.graph,d,c),s.push(l),this.redrawIcons(s,this.iconState),s}return null},mxConnectionHandler.prototype.redrawIcons=function(e,i){if(null!=e&&null!=e[0]&&null!=i){var s=this.getIconPosition(e[0],i);e[0].bounds.x=s.x,e[0].bounds.y=s.y,e[0].redraw()}},mxConnectionHandler.prototype.getIconPosition=function(e,i){var s=this.graph.getView().scale,a=i.getCenterX(),l=i.getCenterY();if(this.graph.isSwimlane(i.cell)){var d=this.graph.getStartSize(i.cell);a=0!=d.width?i.x+d.width*s/2:a,l=0!=d.height?i.y+d.height*s/2:l;var c=mxUtils.toRadians(mxUtils.getValue(i.style,mxConstants.STYLE_ROTATION)||0);if(0!=c){var f=Math.cos(c),m=Math.sin(c),x=new mxPoint(i.getCenterX(),i.getCenterY()),v=mxUtils.getRotatedPoint(new mxPoint(a,l),f,m,x);a=v.x,l=v.y}}return new mxPoint(a-e.bounds.width/2,l-e.bounds.height/2)},mxConnectionHandler.prototype.destroyIcons=function(){if(null!=this.icons){for(var e=0;e<this.icons.length;e++)this.icons[e].destroy();this.icons=null,this.icon=null,this.selectedIcon=null,this.iconState=null}},mxConnectionHandler.prototype.isStartEvent=function(e){return null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint||null!=this.previous&&null==this.error&&(null==this.icons||null!=this.icons&&null!=this.icon)},mxConnectionHandler.prototype.mouseDown=function(e,i){if(this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!i.isConsumed()&&!this.isConnecting()&&this.isStartEvent(i)){if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(i.getGraphX(),i.getGraphY()),this.edgeState=this.createEdgeState(i),this.mouseDownCounter=1,this.waypointsEnabled&&null==this.shape&&(this.waypoints=null,this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState)),null==this.previous&&null!=this.edgeState){var s=this.graph.getPointForEvent(i.getEvent());this.edgeState.cell.geometry.setTerminalPoint(s,!0)}this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous)),i.consume()}this.selectedIcon=this.icon,this.icon=null},mxConnectionHandler.prototype.isImmediateConnectSource=function(e){return!this.graph.isCellMovable(e.cell)},mxConnectionHandler.prototype.createEdgeState=function(e){return null},mxConnectionHandler.prototype.isOutlineConnectEvent=function(e){var i=mxUtils.getOffset(this.graph.container),s=e.getEvent(),a=mxEvent.getClientX(s),l=mxEvent.getClientY(s),d=document.documentElement,c=(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0),f=(window.pageYOffset||d.scrollTop)-(d.clientTop||0),m=this.currentPoint.x-this.graph.container.scrollLeft+i.x-c,x=this.currentPoint.y-this.graph.container.scrollTop+i.y-f;return this.outlineConnect&&!mxEvent.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(e.getEvent())&&null!=e.getState()||this.marker.highlight.isHighlightAt(a,l)||(m!=a||x!=l)&&null==e.getState()&&this.marker.highlight.isHighlightAt(m,x))},mxConnectionHandler.prototype.updateCurrentState=function(e,i){if(this.constraintHandler.update(e,null==this.first,!1,null==this.first||e.isSource(this.marker.highlight.shape)?null:i),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint)null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),null==this.error&&(this.currentState=this.constraintHandler.currentFocus),(null!=this.error||null!=this.currentState&&!this.isCellEnabled(this.currentState.cell))&&this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(e.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(e),this.currentState=this.marker.getValidState()),null!=this.currentState&&!this.isCellEnabled(this.currentState.cell)&&(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null);var s=this.isOutlineConnectEvent(e);if(null!=this.currentState&&s){e.isSource(this.marker.highlight.shape)&&(i=new mxPoint(e.getGraphX(),e.getGraphY()));var a=this.graph.getOutlineConstraint(i,this.currentState,e);this.constraintHandler.setFocus(e,this.currentState,!1),this.constraintHandler.currentConstraint=a,this.constraintHandler.currentPoint=i}if(this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var l=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=mxConstants.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/l/l,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.graph.isCellConnectable(e.getCell())&&this.marker.getValidState()!=e.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/l/l,this.marker.highlight.repaint())}}},mxConnectionHandler.prototype.isCellEnabled=function(e){return!0},mxConnectionHandler.prototype.convertWaypoint=function(e){var i=this.graph.getView().getScale(),s=this.graph.getView().getTranslate();e.x=e.x/i-s.x,e.y=e.y/i-s.y},mxConnectionHandler.prototype.snapToPreview=function(e,i){if(!mxEvent.isAltDown(e.getEvent())&&null!=this.previous){var s=this.graph.gridSize*this.graph.view.scale/2,a=null!=this.sourceConstraint?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(a.x-e.getGraphX())<s&&(i.x=a.x),Math.abs(a.y-e.getGraphY())<s&&(i.y=a.y)}},mxConnectionHandler.prototype.mouseMove=function(e,i){if(i.isConsumed()||!this.ignoreMouseDown&&null==this.first&&this.graph.isMouseDown)this.constraintHandler.reset();else{!this.isEnabled()&&null!=this.currentState&&(this.destroyIcons(),this.currentState=null);var s=this.graph.getView(),a=s.scale,l=s.translate,d=new mxPoint(i.getGraphX(),i.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(i.getEvent())&&(d=new mxPoint((this.graph.snap(d.x/a-l.x)+l.x)*a,(this.graph.snap(d.y/a-l.y)+l.y)*a)),this.snapToPreview(i,d),this.currentPoint=d,(null!=this.first||this.isEnabled()&&this.graph.isEnabled())&&(null!=this.shape||null==this.first||Math.abs(i.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(i.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(i,d),null!=this.first){var c=null,f=d;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(c=this.constraintHandler.currentConstraint,f=this.constraintHandler.currentPoint.clone()):null!=this.previous&&!this.graph.isIgnoreTerminalEvent(i.getEvent())&&mxEvent.isShiftDown(i.getEvent())&&(Math.abs(this.previous.getCenterX()-d.x)<Math.abs(this.previous.getCenterY()-d.y)?d.x=this.previous.getCenterX():d.y=this.previous.getCenterY());var m=this.first;if(null!=this.selectedIcon){var x=this.selectedIcon.bounds.width,v=this.selectedIcon.bounds.height;if(null!=this.currentState&&this.targetConnectImage){var E=this.getIconPosition(this.selectedIcon,this.currentState);this.selectedIcon.bounds.x=E.x,this.selectedIcon.bounds.y=E.y}else{var S=new mxRectangle(i.getGraphX()+this.connectIconOffset.x,i.getGraphY()+this.connectIconOffset.y,x,v);this.selectedIcon.bounds=S}this.selectedIcon.redraw()}if(null!=this.edgeState?(this.updateEdgeState(f,c),f=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],m=this.edgeState.absolutePoints[0]):(null!=this.currentState&&null==this.constraintHandler.currentConstraint&&null!=(b=this.getTargetPerimeterPoint(this.currentState,i))&&(f=b),null==this.sourceConstraint&&null!=this.previous&&null!=(b=this.getSourcePerimeterPoint(this.previous,null!=this.waypoints&&this.waypoints.length>0?this.waypoints[0]:f,i))&&(m=b)),null==this.currentState&&this.movePreviewAway){var b=m;if(null!=this.edgeState&&this.edgeState.absolutePoints.length>=2){var D=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2];null!=D&&(b=D)}var I=f.x-b.x,O=f.y-b.y,N=Math.sqrt(I*I+O*O);if(0==N)return;this.originalPoint=f.clone(),f.x-=4*I/N,f.y-=4*O/N}else this.originalPoint=null;if(null==this.shape&&(I=Math.abs(i.getGraphX()-this.first.x),O=Math.abs(i.getGraphY()-this.first.y),(I>this.graph.tolerance||O>this.graph.tolerance)&&(this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(i,d))),null!=this.shape){if(null!=this.edgeState)this.shape.points=this.edgeState.absolutePoints;else{var k=[m];null!=this.waypoints&&(k=k.concat(this.waypoints)),k.push(f),this.shape.points=k}this.drawPreview()}null!=this.cursor&&(this.graph.container.style.cursor=this.cursor),mxEvent.consume(i.getEvent()),i.consume()}else this.isEnabled()&&this.graph.isEnabled()?this.previous!=this.currentState&&null==this.edgeState?(this.destroyIcons(),null!=this.currentState&&null==this.error&&null==this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),null==this.icons&&(this.currentState.setCursor(mxConstants.CURSOR_CONNECT),i.consume())),this.previous=this.currentState):this.previous==this.currentState&&null!=this.currentState&&null==this.icons&&!this.graph.isMouseDown&&i.consume():this.constraintHandler.reset();if(!this.graph.isMouseDown&&null!=this.currentState&&null!=this.icons){for(var P=!1,F=i.getSource(),V=0;V<this.icons.length&&!P;V++)P=F==this.icons[V].node||F.parentNode==this.icons[V].node;P||this.updateIcons(this.currentState,this.icons,i)}}},mxConnectionHandler.prototype.updateEdgeState=function(e,i){null!=this.sourceConstraint&&null!=this.sourceConstraint.point&&(this.edgeState.style[mxConstants.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants.STYLE_EXIT_Y]=this.sourceConstraint.point.y),null!=i&&null!=i.point?(this.edgeState.style[mxConstants.STYLE_ENTRY_X]=i.point.x,this.edgeState.style[mxConstants.STYLE_ENTRY_Y]=i.point.y):(delete this.edgeState.style[mxConstants.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,null!=this.currentState?null:e],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),null!=this.currentState&&(null==i&&(i=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,i));var s=null;if(null!=this.waypoints){s=[];for(var a=0;a<this.waypoints.length;a++){var l=this.waypoints[a].clone();this.convertWaypoint(l),s[a]=l}}this.graph.view.updatePoints(this.edgeState,s,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)},mxConnectionHandler.prototype.getTargetPerimeterPoint=function(e,i){var s=null,a=e.view,l=a.getPerimeterFunction(e);if(null!=l){var d=null!=this.waypoints&&this.waypoints.length>0?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),c=l(a.getPerimeterBounds(e),this.edgeState,d,!1);null!=c&&(s=c)}else s=new mxPoint(e.getCenterX(),e.getCenterY());return s},mxConnectionHandler.prototype.getSourcePerimeterPoint=function(e,i,s){var a=null,l=e.view,d=l.getPerimeterFunction(e),c=new mxPoint(e.getCenterX(),e.getCenterY());if(null!=d){var f=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0),m=-f*(Math.PI/180);0!=f&&(i=mxUtils.getRotatedPoint(new mxPoint(i.x,i.y),Math.cos(m),Math.sin(m),c));var x=d(l.getPerimeterBounds(e),e,i,!1);null!=x&&(0!=f&&(x=mxUtils.getRotatedPoint(new mxPoint(x.x,x.y),Math.cos(-m),Math.sin(-m),c)),a=x)}else a=c;return a},mxConnectionHandler.prototype.updateIcons=function(e,i,s){},mxConnectionHandler.prototype.isStopEvent=function(e){return null!=e.getState()},mxConnectionHandler.prototype.addWaypointForEvent=function(e){var i=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY()),s=Math.abs(i.x-this.first.x),a=Math.abs(i.y-this.first.y);if(null!=this.waypoints||this.mouseDownCounter>1&&(s>this.graph.tolerance||a>this.graph.tolerance)){null==this.waypoints&&(this.waypoints=[]);var d=this.graph.view.scale;i=new mxPoint(this.graph.snap(e.getGraphX()/d)*d,this.graph.snap(e.getGraphY()/d)*d),this.waypoints.push(i)}},mxConnectionHandler.prototype.checkConstraints=function(e,i){return null==e||null==i||null==e.point||null==i.point||!e.point.equals(i.point)||e.dx!=i.dx||e.dy!=i.dy||e.perimeter!=i.perimeter},mxConnectionHandler.prototype.mouseUp=function(e,i){if(!i.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(i))return this.addWaypointForEvent(i),void i.consume();var l=null!=this.previous?this.previous.cell:null,d=null;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(d=this.constraintHandler.currentFocus.cell),null==d&&null!=this.currentState&&(d=this.currentState.cell),null!=this.error||null!=l&&null!=d&&l==d&&!this.checkConstraints(this.sourceConstraint,this.constraintHandler.currentConstraint)?(null!=this.previous&&null!=this.marker.validState&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,i.getEvent()),null!=this.error&&this.error.length>0&&this.graph.validationAlert(this.error)):this.connect(l,d,i.getEvent(),i.getCell()),this.destroyIcons(),i.consume()}null!=this.first&&this.reset()},mxConnectionHandler.prototype.reset=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.cursor&&null!=this.graph.container&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject(mxEvent.RESET))},mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(null==this.error),this.shape.redraw()},mxConnectionHandler.prototype.updatePreview=function(e){this.shape.strokewidth=this.getEdgeWidth(e),this.shape.stroke=this.getEdgeColor(e)},mxConnectionHandler.prototype.getEdgeColor=function(e){return e?mxConstants.VALID_COLOR:mxConstants.INVALID_COLOR},mxConnectionHandler.prototype.getEdgeWidth=function(e){return e?3:1},mxConnectionHandler.prototype.connect=function(e,i,s,a){if(null!=i||this.isCreateTarget(s)||this.graph.allowDanglingEdges){var l=this.graph.getModel(),d=!1,c=null;l.beginUpdate();try{if(null!=e&&null==i&&!this.graph.isIgnoreTerminalEvent(s)&&this.isCreateTarget(s)&&null!=(i=this.createTargetVertex(s,e))){if(a=this.graph.getDropTarget([i],s,a),d=!0,null!=a&&this.graph.getModel().isEdge(a))a=this.graph.getDefaultParent();else{var f=this.graph.getView().getState(a);null!=f&&((m=l.getGeometry(i)).x-=f.origin.x,m.y-=f.origin.y)}this.graph.addCell(i,a)}var x=this.graph.getDefaultParent();null!=e&&null!=i&&l.getParent(e)==l.getParent(i)&&l.getParent(l.getParent(e))!=l.getRoot()&&(x=l.getParent(e),null!=e.geometry&&e.geometry.relative&&null!=i.geometry&&i.geometry.relative&&(x=l.getParent(x)));var v=null,E=null;if(null!=this.edgeState&&(v=this.edgeState.cell.value,E=this.edgeState.cell.style),null!=(c=this.insertEdge(x,null,v,e,i,E))){if(this.graph.setConnectionConstraint(c,e,!0,this.sourceConstraint),this.graph.setConnectionConstraint(c,i,!1,this.constraintHandler.currentConstraint),null!=this.edgeState&&l.setGeometry(c,this.edgeState.cell.geometry),x=l.getParent(e),this.isInsertBefore(c,e,i,s,a)){for(var m=e;null!=m.parent&&null!=m.geometry&&m.geometry.relative&&m.parent!=c.parent;)m=this.graph.model.getParent(m);null!=m&&null!=m.parent&&m.parent==c.parent&&l.add(x,c,m.parent.getIndex(m))}var b=l.getGeometry(c);if(null==b&&((b=new mxGeometry).relative=!0,l.setGeometry(c,b)),null!=this.waypoints&&this.waypoints.length>0){var T=this.graph.view.scale,D=this.graph.view.translate;b.points=[];for(var I=0;I<this.waypoints.length;I++)b.points.push(new mxPoint((O=this.waypoints[I]).x/T-D.x,O.y/T-D.y))}if(null==i){var O,N=this.graph.view.translate;T=this.graph.view.scale,(O=null!=this.originalPoint?new mxPoint(this.originalPoint.x/T-N.x,this.originalPoint.y/T-N.y):new mxPoint(this.currentPoint.x/T-N.x,this.currentPoint.y/T-N.y)).x-=this.graph.panDx/this.graph.view.scale,O.y-=this.graph.panDy/this.graph.view.scale,b.setTerminalPoint(O,!1)}this.fireEvent(new mxEventObject(mxEvent.CONNECT,"cell",c,"terminal",i,"event",s,"target",a,"terminalInserted",d))}}catch(k){mxLog.show(),mxLog.debug(k.message)}finally{l.endUpdate()}this.select&&this.selectCells(c,d?i:null)}},mxConnectionHandler.prototype.selectCells=function(e,i){this.graph.setSelectionCell(e)},mxConnectionHandler.prototype.insertEdge=function(e,i,s,a,l,d){if(null==this.factoryMethod)return this.graph.insertEdge(e,i,s,a,l,d);var c=this.createEdge(s,a,l,d);return this.graph.addEdge(c,e,a,l)},mxConnectionHandler.prototype.createTargetVertex=function(e,i){for(var s=this.graph.getCellGeometry(i);null!=s&&s.relative;)i=this.graph.getModel().getParent(i),s=this.graph.getCellGeometry(i);var a=this.graph.cloneCell(i);if(null!=(s=this.graph.getModel().getGeometry(a))){var l=this.graph.view.translate,d=this.graph.view.scale,c=new mxPoint(this.currentPoint.x/d-l.x,this.currentPoint.y/d-l.y);s.x=Math.round(c.x-s.width/2-this.graph.panDx/d),s.y=Math.round(c.y-s.height/2-this.graph.panDy/d);var f=this.getAlignmentTolerance();if(f>0){var m=this.graph.view.getState(i);if(null!=m){var x=m.x/d-l.x,v=m.y/d-l.y;Math.abs(x-s.x)<=f&&(s.x=Math.round(x)),Math.abs(v-s.y)<=f&&(s.y=Math.round(v))}}}return a},mxConnectionHandler.prototype.getAlignmentTolerance=function(e){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance},mxConnectionHandler.prototype.createEdge=function(e,i,s,a){var l=null;if(null!=this.factoryMethod&&(l=this.factoryMethod(i,s,a)),null==l){(l=new mxCell(e||"")).setEdge(!0),l.setStyle(a);var d=new mxGeometry;d.relative=!0,l.setGeometry(d)}return l},mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),null!=this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)},__mxOutput.mxConnectionHandler=void 0!==mxConnectionHandler?mxConnectionHandler:void 0,mxConstraintHandler.prototype.pointImage=new mxImage(mxClient.imageBasePath+"/point.gif",5,5),mxConstraintHandler.prototype.graph=null,mxConstraintHandler.prototype.enabled=!0,mxConstraintHandler.prototype.highlightColor=mxConstants.DEFAULT_VALID_COLOR,mxConstraintHandler.prototype.isEnabled=function(){return this.enabled},mxConstraintHandler.prototype.setEnabled=function(e){this.enabled=e},mxConstraintHandler.prototype.reset=function(){if(null!=this.focusIcons){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null}null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=null},mxConstraintHandler.prototype.getTolerance=function(e){return this.graph.getTolerance()},mxConstraintHandler.prototype.getImageForConstraint=function(e,i,s){return this.pointImage},mxConstraintHandler.prototype.isEventIgnored=function(e,i){return!1},mxConstraintHandler.prototype.isStateIgnored=function(e,i){return!1},mxConstraintHandler.prototype.destroyIcons=function(){if(null!=this.focusIcons){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null,this.focusPoints=null}},mxConstraintHandler.prototype.destroyFocusHighlight=function(){null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)},mxConstraintHandler.prototype.isKeepFocusEvent=function(e){return mxEvent.isShiftDown(e.getEvent())},mxConstraintHandler.prototype.getCellForEvent=function(e,i){var s=e.getCell();if(null==s&&null!=i&&(e.getGraphX()!=i.x||e.getGraphY()!=i.y)&&(s=this.graph.getCellAt(i.x,i.y)),null!=s&&!this.graph.isCellConnectable(s)){var a=this.graph.getModel().getParent(s);this.graph.getModel().isVertex(a)&&this.graph.isCellConnectable(a)&&(s=a)}return this.graph.isCellLocked(s)?null:s},mxConstraintHandler.prototype.update=function(e,i,s,a){if(this.isEnabled()&&!this.isEventIgnored(e)){null==this.mouseleaveHandler&&null!=this.graph.container&&(this.mouseleaveHandler=mxUtils.bind(this,function(){this.reset()}),mxEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));var l=this.getTolerance(e),f=new mxRectangle((null!=a?a.x:e.getGraphX())-l,(null!=a?a.y:e.getGraphY())-l,2*l,2*l),m=new mxRectangle(e.getGraphX()-l,e.getGraphY()-l,2*l,2*l),x=this.graph.view.getState(this.getCellForEvent(e,a));!this.isKeepFocusEvent(e)&&(null==this.currentFocusArea||null==this.currentFocus||null!=x||!this.graph.getModel().isVertex(this.currentFocus.cell)||!mxUtils.intersects(this.currentFocusArea,m))&&x!=this.currentFocus&&(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(e,x,i)),this.currentConstraint=null,this.currentPoint=null;var v=null;if(null!=this.focusIcons&&null!=this.constraints&&(null==x||this.currentFocus==x))for(var E=m.getCenterX(),S=m.getCenterY(),b=0;b<this.focusIcons.length;b++){var T=E-this.focusIcons[b].bounds.getCenterX(),D=S-this.focusIcons[b].bounds.getCenterY(),I=T*T+D*D;if((this.intersects(this.focusIcons[b],m,i,s)||null!=a&&this.intersects(this.focusIcons[b],f,i,s))&&(null==v||I<v)){if(this.currentConstraint=this.constraints[b],this.currentPoint=this.focusPoints[b],v=I,(I=this.focusIcons[b].bounds.clone()).grow(mxConstants.HIGHLIGHT_SIZE+1),I.width-=1,I.height-=1,null==this.focusHighlight){var O=this.createHighlightShape();O.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,O.pointerEvents=!1,O.init(this.graph.getView().getOverlayPane()),this.focusHighlight=O;var N=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:x});mxEvent.redirectMouseEvents(O.node,this.graph,N)}this.focusHighlight.bounds=I,this.focusHighlight.redraw()}}null==this.currentConstraint&&this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null},mxConstraintHandler.prototype.redraw=function(){if(null!=this.currentFocus&&null!=this.constraints&&null!=this.focusIcons){var e=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=e,this.currentFocusArea=new mxRectangle(e.x,e.y,e.width,e.height);for(var i=0;i<this.constraints.length;i++){var s=this.graph.getConnectionPoint(e,this.constraints[i]),a=this.getImageForConstraint(e,this.constraints[i],s),l=new mxRectangle(Math.round(s.x-a.width/2),Math.round(s.y-a.height/2),a.width,a.height);this.focusIcons[i].bounds=l,this.focusIcons[i].redraw(),this.currentFocusArea.add(this.focusIcons[i].bounds),this.focusPoints[i]=s}}},mxConstraintHandler.prototype.setFocus=function(e,i,s){if(this.constraints=null!=i&&!this.isStateIgnored(i,s)&&this.graph.isCellConnectable(i.cell)?this.isEnabled()&&this.graph.getAllConnectionConstraints(i,s)||[]:null,null!=this.constraints){if(this.currentFocus=i,this.currentFocusArea=new mxRectangle(i.x,i.y,i.width,i.height),null!=this.focusIcons){for(var a=0;a<this.focusIcons.length;a++)this.focusIcons[a].destroy();this.focusIcons=null,this.focusPoints=null}for(this.focusPoints=[],this.focusIcons=[],a=0;a<this.constraints.length;a++){var l=this.graph.getConnectionPoint(i,this.constraints[a]),d=this.getImageForConstraint(i,this.constraints[a],l),c=d.src,m=new mxImageShape(new mxRectangle(Math.round(l.x-d.width/2),Math.round(l.y-d.height/2),d.width,d.height),c);m.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,m.preserveImageAspect=!1,m.init(this.graph.getView().getDecoratorPane()),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(m.node,"dragstart",function(E){return mxEvent.consume(E),!1}),null!=m.node.previousSibling&&m.node.parentNode.insertBefore(m.node,m.node.parentNode.firstChild);var x=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:i});m.redraw(),mxEvent.redirectMouseEvents(m.node,this.graph,x),this.currentFocusArea.add(m.bounds),this.focusIcons.push(m),this.focusPoints.push(l)}this.currentFocusArea.grow(this.getTolerance(e))}else this.destroyIcons(),this.destroyFocusHighlight()},mxConstraintHandler.prototype.createHighlightShape=function(){var e=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants.HIGHLIGHT_STROKEWIDTH);return e.opacity=mxConstants.HIGHLIGHT_OPACITY,e},mxConstraintHandler.prototype.intersects=function(e,i,s,a){return mxUtils.intersects(e.bounds,i)},mxConstraintHandler.prototype.destroy=function(){this.reset(),null!=this.resetHandler&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),null!=this.mouseleaveHandler&&null!=this.graph.container&&(mxEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)},__mxOutput.mxConstraintHandler=void 0!==mxConstraintHandler?mxConstraintHandler:void 0,mxRubberband.prototype.defaultOpacity=20,mxRubberband.prototype.enabled=!0,mxRubberband.prototype.div=null,mxRubberband.prototype.sharedDiv=null,mxRubberband.prototype.currentX=0,mxRubberband.prototype.currentY=0,mxRubberband.prototype.fadeOut=!1,mxRubberband.prototype.isEnabled=function(){return this.enabled},mxRubberband.prototype.setEnabled=function(e){this.enabled=e},mxRubberband.prototype.isForceRubberbandEvent=function(e){return mxEvent.isAltDown(e.getEvent())},mxRubberband.prototype.mouseDown=function(e,i){if(!i.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null==i.getState()&&!mxEvent.isMultiTouchEvent(i.getEvent())){var s=mxUtils.getOffset(this.graph.container),a=mxUtils.getScrollOrigin(this.graph.container);a.x-=s.x,a.y-=s.y,this.start(i.getX()+a.x,i.getY()+a.y),i.consume(!1)}},mxRubberband.prototype.start=function(e,i){this.first=new mxPoint(e,i);var s=this.graph.container;function a(l){var d=new mxMouseEvent(l),c=mxUtils.convertPoint(s,d.getX(),d.getY());return d.graphX=c.x,d.graphY=c.y,d}this.dragHandler=mxUtils.bind(this,function(l){this.mouseMove(this.graph,a(l))}),this.dropHandler=mxUtils.bind(this,function(l){this.mouseUp(this.graph,a(l))}),mxClient.IS_FF&&mxEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)},mxRubberband.prototype.mouseMove=function(e,i){if(!i.isConsumed()&&null!=this.first){var s=mxUtils.getScrollOrigin(this.graph.container),a=mxUtils.getOffset(this.graph.container);s.x-=a.x,s.y-=a.y;var l=i.getX()+s.x,d=i.getY()+s.y,f=this.first.y-d,m=this.graph.tolerance;(null!=this.div||Math.abs(this.first.x-l)>m||Math.abs(f)>m)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(l,d),i.consume())}},mxRubberband.prototype.createShape=function(){null==this.sharedDiv&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var e=this.sharedDiv;return mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&this.fadeOut&&(this.sharedDiv=null),e},mxRubberband.prototype.isActive=function(e,i){return null!=this.div&&"none"!=this.div.style.display},mxRubberband.prototype.mouseUp=function(e,i){var s=this.isActive();this.reset(),s&&(this.execute(i.getEvent()),i.consume())},mxRubberband.prototype.execute=function(e){var i=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(i,e)},mxRubberband.prototype.reset=function(){if(null!=this.div)if(mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&this.fadeOut){var e=this.div;mxUtils.setPrefixedStyle(e.style,"transition","all 0.2s linear"),e.style.pointerEvents="none",e.style.opacity=0,window.setTimeout(function(){e.parentNode.removeChild(e)},200)}else this.div.parentNode.removeChild(this.div);mxEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null},mxRubberband.prototype.update=function(e,i){this.currentX=e,this.currentY=i,this.repaint()},mxRubberband.prototype.repaint=function(){if(null!=this.div){var e=this.currentX-this.graph.panDx,i=this.currentY-this.graph.panDy;this.x=Math.min(this.first.x,e),this.y=Math.min(this.first.y,i),this.width=Math.max(this.first.x,e)-this.x,this.height=Math.max(this.first.y,i)-this.y;var a=mxClient.IS_VML?this.graph.panDy:0;this.div.style.left=this.x+(mxClient.IS_VML?this.graph.panDx:0)+"px",this.div.style.top=this.y+a+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px"}},mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),null!=this.sharedDiv&&(this.sharedDiv=null))},__mxOutput.mxRubberband=void 0!==mxRubberband?mxRubberband:void 0,mxHandle.prototype.cursor="default",mxHandle.prototype.image=null,mxHandle.prototype.ignoreGrid=!1,mxHandle.prototype.getPosition=function(e){},mxHandle.prototype.setPosition=function(e,i,s){},mxHandle.prototype.execute=function(e){},mxHandle.prototype.copyStyle=function(e){this.graph.setCellStyles(e,this.state.style[e],[this.state.cell])},mxHandle.prototype.processEvent=function(e){var i=this.graph.view.scale,s=this.graph.view.translate,a=new mxPoint(e.getGraphX()/i-s.x,e.getGraphY()/i-s.y);null!=this.shape&&null!=this.shape.bounds&&(a.x-=this.shape.bounds.width/i/4,a.y-=this.shape.bounds.height/i/4);var l=-mxUtils.toRadians(this.getRotation()),d=-mxUtils.toRadians(this.getTotalRotation())-l;a=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(a,l),this.ignoreGrid||!this.graph.isGridEnabledEvent(e.getEvent())),d)),this.setPosition(this.state.getPaintBounds(),a,e),this.redraw()},mxHandle.prototype.positionChanged=function(){null!=this.state.text&&this.state.text.apply(this.state),null!=this.state.shape&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)},mxHandle.prototype.getRotation=function(){return null!=this.state.shape?this.state.shape.getRotation():0},mxHandle.prototype.getTotalRotation=function(){return null!=this.state.shape?this.state.shape.getShapeRotation():0},mxHandle.prototype.init=function(){var e=this.isHtmlRequired();null!=this.image?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):null==this.shape&&(this.shape=this.createShape(e)),this.initShape(e)},mxHandle.prototype.createShape=function(e){return new mxRectangleShape(new mxRectangle(0,0,mxConstants.HANDLE_SIZE,mxConstants.HANDLE_SIZE),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxHandle.prototype.initShape=function(e){e&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,null!=this.cursor&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor},mxHandle.prototype.redraw=function(){if(null!=this.shape&&null!=this.state.shape){var e=this.getPosition(this.state.getPaintBounds());if(null!=e){var i=mxUtils.toRadians(this.getTotalRotation());e=this.rotatePoint(this.flipPoint(e),i);var s=this.graph.view.scale,a=this.graph.view.translate;this.shape.bounds.x=Math.floor((e.x+a.x)*s-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((e.y+a.y)*s-this.shape.bounds.height/2),this.shape.redraw()}}},mxHandle.prototype.isHtmlRequired=function(){return null!=this.state.text&&this.state.text.node.parentNode==this.graph.container},mxHandle.prototype.rotatePoint=function(e,i){var s=this.state.getCellBounds(),a=new mxPoint(s.getCenterX(),s.getCenterY()),l=Math.cos(i),d=Math.sin(i);return mxUtils.getRotatedPoint(e,l,d,a)},mxHandle.prototype.flipPoint=function(e){if(null!=this.state.shape){var i=this.state.getCellBounds();this.state.shape.flipH&&(e.x=2*i.x+i.width-e.x),this.state.shape.flipV&&(e.y=2*i.y+i.height-e.y)}return e},mxHandle.prototype.snapPoint=function(e,i){return i||(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e},mxHandle.prototype.setVisible=function(e){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display=e?"":"none")},mxHandle.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()},mxHandle.prototype.destroy=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null)},__mxOutput.mxHandle=void 0!==mxHandle?mxHandle:void 0,mxVertexHandler.prototype.graph=null,mxVertexHandler.prototype.state=null,mxVertexHandler.prototype.singleSizer=!1,mxVertexHandler.prototype.index=null,mxVertexHandler.prototype.allowHandleBoundsCheck=!0,mxVertexHandler.prototype.handleImage=null,mxVertexHandler.prototype.handlesVisible=!0,mxVertexHandler.prototype.tolerance=0,mxVertexHandler.prototype.rotationEnabled=!1,mxVertexHandler.prototype.parentHighlightEnabled=!1,mxVertexHandler.prototype.rotationRaster=!0,mxVertexHandler.prototype.rotationCursor="crosshair",mxVertexHandler.prototype.livePreview=!1,mxVertexHandler.prototype.movePreviewToFront=!1,mxVertexHandler.prototype.manageSizers=!1,mxVertexHandler.prototype.constrainGroupByChildren=!1,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxVertexHandler.prototype.horizontalOffset=0,mxVertexHandler.prototype.verticalOffset=0,mxVertexHandler.prototype.init=function(){if(this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX),mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells){var e=this.graph.isCellResizable(this.state.cell);if(this.sizers=[],e||this.graph.isLabelMovable(this.state.cell)&&this.state.width>=2&&this.state.height>=2){var i=0;e&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",i++)),this.sizers.push(this.createSizer("n-resize",i++)),this.sizers.push(this.createSizer("ne-resize",i++)),this.sizers.push(this.createSizer("w-resize",i++)),this.sizers.push(this.createSizer("e-resize",i++)),this.sizers.push(this.createSizer("sw-resize",i++)),this.sizers.push(this.createSizer("s-resize",i++))),this.sizers.push(this.createSizer("se-resize",i++)));var s=this.graph.model.getGeometry(this.state.cell);null!=s&&!s.relative&&!this.graph.isSwimlane(this.state.cell)&&this.graph.isLabelMovable(this.state.cell)&&(this.labelShape=this.createSizer(mxConstants.CURSOR_LABEL_HANDLE,mxEvent.LABEL_HANDLE,mxConstants.LABEL_HANDLE_SIZE,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,mxEvent.LABEL_HANDLE,null,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent.ROTATION_HANDLE,mxConstants.HANDLE_SIZE+3,mxConstants.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)},mxVertexHandler.prototype.isConstrainedEvent=function(e){return mxEvent.isShiftDown(e.getEvent())||"fixed"==this.state.style[mxConstants.STYLE_ASPECT]},mxVertexHandler.prototype.isCenteredEvent=function(e,i){return!1},mxVertexHandler.prototype.createCustomHandles=function(){return null},mxVertexHandler.prototype.updateMinBounds=function(){var e=this.graph.getChildCells(this.state.cell);if(e.length>0&&(this.minBounds=this.graph.view.getBounds(e),null!=this.minBounds)){var i=this.state.view.scale,s=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=i,this.minBounds.y/=i,this.minBounds.width/=i,this.minBounds.height/=i,this.x0=this.state.x/i-s.x,this.y0=this.state.y/i-s.y}},mxVertexHandler.prototype.getSelectionBounds=function(e){return new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))},mxVertexHandler.prototype.createParentHighlightShape=function(e){return this.createSelectionShape(e)},mxVertexHandler.prototype.createSelectionShape=function(e){var i=new mxRectangleShape(mxRectangle.fromRectangle(e),null,this.getSelectionColor());return i.strokewidth=this.getSelectionStrokeWidth(),i.isDashed=this.isSelectionDashed(),i},mxVertexHandler.prototype.getSelectionColor=function(){return mxConstants.VERTEX_SELECTION_COLOR},mxVertexHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.VERTEX_SELECTION_STROKEWIDTH},mxVertexHandler.prototype.isSelectionDashed=function(){return mxConstants.VERTEX_SELECTION_DASHED},mxVertexHandler.prototype.createSizer=function(e,i,s,a){var l=new mxRectangle(0,0,s=s||mxConstants.HANDLE_SIZE,s),d=this.createSizerShape(l,i,a);return d.isHtmlAllowed()&&null!=this.state.text&&this.state.text.node.parentNode==this.graph.container?(d.bounds.height-=1,d.bounds.width-=1,d.dialect=mxConstants.DIALECT_STRICTHTML,d.init(this.graph.container)):(d.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,d.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(d.node,this.graph,this.state),this.graph.isEnabled()&&d.setCursor(e),this.isSizerVisible(i)||(d.visible=!1),d},mxVertexHandler.prototype.isSizerVisible=function(e){return!0},mxVertexHandler.prototype.createSizerShape=function(e,i,s){if(null!=this.handleImage){var a=new mxImageShape(e=new mxRectangle(e.x,e.y,this.handleImage.width,this.handleImage.height),this.handleImage.src);return a.preserveImageAspect=!1,a}return i==mxEvent.ROTATION_HANDLE?new mxEllipse(e,s||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR):new mxRectangleShape(e,s||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxVertexHandler.prototype.moveSizerTo=function(e,i,s){null!=e&&(e.bounds.x=Math.floor(i-e.bounds.width/2),e.bounds.y=Math.floor(s-e.bounds.height/2),null!=e.node&&"none"!=e.node.style.display&&e.redraw())},mxVertexHandler.prototype.getHandleForEvent=function(e){var i=mxEvent.isMouseEvent(e.getEvent())?1:this.tolerance,s=this.allowHandleBoundsCheck&&(mxClient.IS_IE||i>0)?new mxRectangle(e.getGraphX()-i,e.getGraphY()-i,2*i,2*i):null,a=mxUtils.bind(this,function(d){var c=null!=d&&d.constructor!=mxImageShape&&this.allowHandleBoundsCheck?d.strokewidth+d.svgStrokeTolerance:null,f=null!=c?new mxRectangle(e.getGraphX()-Math.floor(c/2),e.getGraphY()-Math.floor(c/2),c,c):s;return null!=d&&(e.isSource(d)||null!=f&&mxUtils.intersects(d.bounds,f)&&"none"!=d.node.style.display&&"hidden"!=d.node.style.visibility)});if(a(this.rotationShape))return mxEvent.ROTATION_HANDLE;if(a(this.labelShape))return mxEvent.LABEL_HANDLE;if(null!=this.sizers)for(var l=0;l<this.sizers.length;l++)if(a(this.sizers[l]))return l;if(null!=this.customHandles&&this.isCustomHandleEvent(e))for(l=this.customHandles.length-1;l>=0;l--)if(a(this.customHandles[l].shape))return mxEvent.CUSTOM_HANDLE-l;return null},mxVertexHandler.prototype.isCustomHandleEvent=function(e){return!0},mxVertexHandler.prototype.mouseDown=function(e,i){if(!i.isConsumed()&&this.graph.isEnabled()){var s=this.getHandleForEvent(i);null!=s&&(this.start(i.getGraphX(),i.getGraphY(),s),i.consume())}},mxVertexHandler.prototype.isLivePreviewBorder=function(){return null!=this.state.shape&&null==this.state.shape.fill&&null==this.state.shape.stroke},mxVertexHandler.prototype.start=function(e,i,s){if(null!=this.selectionBorder)if(this.livePreviewActive=this.livePreview&&0==this.graph.model.getChildCount(this.state.cell),this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=s,this.startX=e,this.startY=i,this.index<=mxEvent.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else{var a=this.state.view.graph.model,l=a.getParent(this.state.cell);if(this.state.view.currentRoot!=l&&(a.isVertex(l)||a.isEdge(l))&&(this.parentState=this.state.view.graph.view.getState(l)),this.selectionBorder.node.style.display=s==mxEvent.ROTATION_HANDLE?"inline":"none",(!this.livePreviewActive||this.isLivePreviewBorder())&&(this.preview=this.createSelectionShape(this.bounds),mxClient.IS_SVG&&0!=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")||null==this.state.text||this.state.text.node.parentNode!=this.graph.container?(this.preview.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane())):(this.preview.dialect=mxConstants.DIALECT_STRICTHTML,this.preview.init(this.graph.container))),s==mxEvent.ROTATION_HANDLE){var d=this.getRotationHandlePosition(),c=d.x-this.state.getCenterX(),f=d.y-this.state.getCenterY();this.startAngle=0!=c?180*Math.atan(f/c)/Math.PI+90:0,this.startDist=Math.sqrt(c*c+f*f)}if(this.livePreviewActive){this.hideSizers(),s==mxEvent.ROTATION_HANDLE?this.rotationShape.node.style.display="":s==mxEvent.LABEL_HANDLE?this.labelShape.node.style.display="":null!=this.sizers&&null!=this.sizers[s]?this.sizers[s].node.style.display="":s<=mxEvent.CUSTOM_HANDLE&&null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-s].setVisible(!0);var m=this.graph.getEdges(this.state.cell);this.edgeHandlers=[];for(var x=0;x<m.length;x++){var v=this.graph.selectionCellsHandler.getHandler(m[x]);null!=v&&this.edgeHandlers.push(v)}}}},mxVertexHandler.prototype.createGhostPreview=function(){var e=this.graph.cellRenderer.createShape(this.state);return e.init(this.graph.view.getOverlayPane()),e.scale=this.state.view.scale,e.bounds=this.bounds,e.outline=!0,e},mxVertexHandler.prototype.setHandlesVisible=function(e){if(this.handlesVisible=e,null!=this.sizers)for(var i=0;i<this.sizers.length;i++)this.sizers[i].node.style.display=e?"":"none";if(null!=this.customHandles)for(i=0;i<this.customHandles.length;i++)this.customHandles[i].setVisible(e)},mxVertexHandler.prototype.hideSizers=function(){this.setHandlesVisible(!1)},mxVertexHandler.prototype.checkTolerance=function(e){this.inTolerance&&null!=this.startX&&null!=this.startY&&(mxEvent.isMouseEvent(e.getEvent())||Math.abs(e.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(e.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxVertexHandler.prototype.updateHint=function(e){},mxVertexHandler.prototype.removeHint=function(){},mxVertexHandler.prototype.roundAngle=function(e){return Math.round(10*e)/10},mxVertexHandler.prototype.roundLength=function(e){return Math.round(100*e)/100},mxVertexHandler.prototype.mouseMove=function(e,i){i.isConsumed()||null==this.index?!this.graph.isMouseDown&&null!=this.getHandleForEvent(i)&&i.consume(!1):(this.checkTolerance(i),this.inTolerance||(this.index<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(i),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].active=!0,null!=this.ghostPreview?(this.ghostPreview.apply(this.state),this.ghostPreview.strokewidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),null!=this.selectionBounds&&(this.selectionBorder.node.style.display="none")):(this.movePreviewToFront&&this.moveToFront(),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged())):this.index==mxEvent.LABEL_HANDLE?this.moveLabel(i):(this.index==mxEvent.ROTATION_HANDLE?this.rotateVertex(i):this.resizeVertex(i),this.updateHint(i))),i.consume())},mxVertexHandler.prototype.isGhostPreview=function(){return this.state.view.graph.model.getChildCount(this.state.cell)>0},mxVertexHandler.prototype.moveLabel=function(e){var i=new mxPoint(e.getGraphX(),e.getGraphY()),s=this.graph.view.translate,a=this.graph.view.scale;this.graph.isGridEnabledEvent(e.getEvent())&&(i.x=(this.graph.snap(i.x/a-s.x)+s.x)*a,i.y=(this.graph.snap(i.y/a-s.y)+s.y)*a),this.moveSizerTo(this.sizers[null!=this.rotationShape?this.sizers.length-2:this.sizers.length-1],i.x,i.y)},mxVertexHandler.prototype.rotateVertex=function(e){var i=new mxPoint(e.getGraphX(),e.getGraphY()),a=this.state.y+this.state.height/2-i.y;if(this.currentAlpha=0!=(s=this.state.x+this.state.width/2-i.x)?180*Math.atan(a/s)/Math.PI+90:a<0?180:0,s>0&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(e.getEvent())){var s=i.x-this.state.getCenterX(),l=(a=i.y-this.state.getCenterY(),Math.sqrt(s*s+a*a));raster=l-this.startDist<2?15:l-this.startDist<25?5:1,this.currentAlpha=Math.round(this.currentAlpha/raster)*raster}else this.currentAlpha=this.roundAngle(this.currentAlpha);this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()},mxVertexHandler.prototype.resizeVertex=function(e){var i=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),s=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),a=new mxPoint(e.getGraphX(),e.getGraphY()),l=this.graph.view.translate,d=this.graph.view.scale,c=Math.cos(-s),f=Math.sin(-s),E=f*(m=a.x-this.startX)+c*(x=a.y-this.startY);m=c*m-f*x,x=E;var S=this.graph.getCellGeometry(this.state.cell);if(this.unscaledBounds=this.union(S,m/d,x/d,this.index,this.graph.isGridEnabledEvent(e.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(e),this.isCenteredEvent(this.state,e)),!S.relative){var b=this.graph.getMaximumGraphBounds();if(null!=b&&null!=this.parentState&&((b=mxRectangle.fromRectangle(b)).x-=(this.parentState.x-l.x*d)/d,b.y-=(this.parentState.y-l.y*d)/d),this.graph.isConstrainChild(this.state.cell)){var T=this.graph.getCellContainmentArea(this.state.cell);if(null!=T){var D=this.graph.getOverlap(this.state.cell);D>0&&((T=mxRectangle.fromRectangle(T)).x-=T.width*D,T.y-=T.height*D,T.width+=2*T.width*D,T.height+=2*T.height*D),null==b?b=T:(b=mxRectangle.fromRectangle(b)).intersect(T)}}null!=b&&(this.unscaledBounds.x<b.x&&(this.unscaledBounds.width-=b.x-this.unscaledBounds.x,this.unscaledBounds.x=b.x),this.unscaledBounds.y<b.y&&(this.unscaledBounds.height-=b.y-this.unscaledBounds.y,this.unscaledBounds.y=b.y),this.unscaledBounds.x+this.unscaledBounds.width>b.x+b.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-b.x-b.width),this.unscaledBounds.y+this.unscaledBounds.height>b.y+b.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-b.y-b.height))}var I=this.bounds;this.bounds=new mxRectangle((null!=this.parentState?this.parentState.x:l.x*d)+this.unscaledBounds.x*d,(null!=this.parentState?this.parentState.y:l.y*d)+this.unscaledBounds.y*d,this.unscaledBounds.width*d,this.unscaledBounds.height*d),S.relative&&null!=this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),c=Math.cos(s),f=Math.sin(s);var m,x,O=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY()),P=c*(m=O.x-i.x)-f*(x=O.y-i.y)-m,F=f*m+c*x-x,V=this.bounds.x-this.state.x,Y=this.bounds.y-this.state.y,j=c*V-f*Y,X=f*V+c*Y;this.bounds.x+=P,this.bounds.y+=F,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+P/d),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+F/d),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),this.graph.isCellCollapsed(this.state.cell)||0==P&&0==F?(this.childOffsetX=0,this.childOffsetY=0):(this.childOffsetX=this.state.x-this.bounds.x+j,this.childOffsetY=this.state.y-this.bounds.y+X),I.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(e),null!=this.preview?this.drawPreview():this.updateParentHighlight())},mxVertexHandler.prototype.updateLivePreview=function(e){var i=this.graph.view.scale,s=this.graph.view.translate,a=this.state.clone();this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/i-s.x,this.state.y/i-s.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height;var l=this.state.absoluteOffset;l=new mxPoint(l.x,l.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0;var d=this.graph.getCellGeometry(this.state.cell);if(null!=d){var c=d.offset||this.EMPTY_POINT;null!=c&&!d.relative&&(this.state.absoluteOffset.x=this.state.view.scale*c.x,this.state.absoluteOffset.y=this.state.view.scale*c.y),this.state.view.updateVertexLabelOffset(this.state)}this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.movePreviewToFront&&this.moveToFront(),null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="hidden"),this.state.setState(a)},mxVertexHandler.prototype.moveToFront=function(){(null!=this.state.text&&null!=this.state.text.node&&null!=this.state.text.node.nextSibling||null!=this.state.shape&&null!=this.state.shape.node&&null!=this.state.shape.node.nextSibling&&(null==this.state.text||this.state.shape.node.nextSibling!=this.state.text.node))&&(null!=this.state.shape&&null!=this.state.shape.node&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),null!=this.state.text&&null!=this.state.text.node&&this.state.text.node.parentNode.appendChild(this.state.text.node))},mxVertexHandler.prototype.mouseUp=function(e,i){if(null!=this.index&&null!=this.state){var s=new mxPoint(i.getGraphX(),i.getGraphY()),a=this.index;this.index=null,null==this.ghostPreview&&(this.state.view.invalidate(this.state.cell,!1,!1),this.state.view.validate()),this.graph.getModel().beginUpdate();try{if(a<=mxEvent.CUSTOM_HANDLE){if(null!=this.customHandles){var l=this.state.view.graph.getCellStyle(this.state.cell);this.customHandles[mxEvent.CUSTOM_HANDLE-a].active=!1,this.customHandles[mxEvent.CUSTOM_HANDLE-a].execute(i),null!=this.customHandles&&null!=this.customHandles[mxEvent.CUSTOM_HANDLE-a]&&(this.state.style=l,this.customHandles[mxEvent.CUSTOM_HANDLE-a].positionChanged())}}else if(a==mxEvent.ROTATION_HANDLE)if(null!=this.currentAlpha){var d=this.currentAlpha-(this.state.style[mxConstants.STYLE_ROTATION]||0);0!=d&&this.rotateCell(this.state.cell,d)}else this.rotateClick();else{var c=this.graph.isGridEnabledEvent(i.getEvent()),f=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),m=Math.cos(-f),x=Math.sin(-f),v=s.x-this.startX,E=s.y-this.startY,b=x*v+m*E;v=m*v-x*E,E=b;var T=this.graph.view.scale,D=this.isRecursiveResize(this.state,i);this.resizeCell(this.state.cell,this.roundLength(v/T),this.roundLength(E/T),a,c,this.isConstrainedEvent(i),D)}}finally{this.graph.getModel().endUpdate()}i.consume(),this.reset(),this.redrawHandles()}},mxVertexHandler.prototype.isRecursiveResize=function(e,i){return this.graph.isRecursiveResize(this.state)},mxVertexHandler.prototype.rotateClick=function(){},mxVertexHandler.prototype.rotateCell=function(e,i,s){if(0!=i){var a=this.graph.getModel();if(a.isVertex(e)||a.isEdge(e)){if(!a.isEdge(e)){var l=this.graph.getCurrentCellStyle(e);this.graph.setCellStyles(mxConstants.STYLE_ROTATION,(l[mxConstants.STYLE_ROTATION]||0)+i,[e])}var c=this.graph.getCellGeometry(e);if(null!=c){var f=this.graph.getCellGeometry(s);if(null!=f&&!a.isEdge(s)&&((c=c.clone()).rotate(i,new mxPoint(f.width/2,f.height/2)),a.setGeometry(e,c)),a.isVertex(e)&&!c.relative||a.isEdge(e))for(var m=a.getChildCount(e),x=0;x<m;x++)this.rotateCell(a.getChildAt(e,x),i,e)}}}},mxVertexHandler.prototype.reset=function(){if(null!=this.sizers&&null!=this.index&&null!=this.sizers[this.index]&&"none"==this.sizers[this.index].node.style.display&&(this.sizers[this.index].node.style.display=""),this.currentAlpha=null,this.inTolerance=null,this.index=null,null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive&&null!=this.sizers){for(var e=0;e<this.sizers.length;e++)null!=this.sizers[e]&&(this.sizers[e].node.style.display="");null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="")}if(null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].active?(this.customHandles[e].active=!1,this.customHandles[e].reset()):this.customHandles[e].setVisible(!0);null!=this.selectionBorder&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.handlesVisible=!0,this.unscaledBounds=null,this.livePreviewActive=null},mxVertexHandler.prototype.resizeCell=function(e,i,s,a,l,d,c){var f=this.graph.model.getGeometry(e);if(null!=f)if(a==mxEvent.LABEL_HANDLE){var m=-mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),x=Math.cos(m),v=Math.sin(m),E=this.graph.view.scale,S=mxUtils.getRotatedPoint(new mxPoint(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/E),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/E)),x,v);null==(f=f.clone()).offset?f.offset=S:(f.offset.x+=S.x,f.offset.y+=S.y),this.graph.model.setGeometry(e,f)}else null!=this.unscaledBounds&&(E=this.graph.view.scale,(0!=this.childOffsetX||0!=this.childOffsetY)&&this.moveChildren(e,Math.round(this.childOffsetX/E),Math.round(this.childOffsetY/E)),this.graph.resizeCell(e,this.unscaledBounds,c))},mxVertexHandler.prototype.moveChildren=function(e,i,s){for(var a=this.graph.getModel(),l=a.getChildCount(e),d=0;d<l;d++){var c=a.getChildAt(e,d),f=this.graph.getCellGeometry(c);null!=f&&((f=f.clone()).translate(i,s),a.setGeometry(c,f))}},mxVertexHandler.prototype.union=function(e,i,s,a,l,d,c,f,m){if(l=null!=l?l&&this.graph.gridEnabled:this.graph.gridEnabled,this.singleSizer){var x=e.x+e.width+i,v=e.y+e.height+s;l&&(x=this.graph.snap(x/d)*d,v=this.graph.snap(v/d)*d);var E=new mxRectangle(e.x,e.y,0,0);return E.add(new mxRectangle(x,v,0,0)),E}var S=e.width,b=e.height,T=e.x-c.x*d,D=T+S,I=e.y-c.y*d,O=I+b,N=T+S/2,k=I+b/2;a>4?(O+=s,O=l?this.graph.snap(O/d)*d:Math.round(O/d)*d):a<3&&(I+=s,I=l?this.graph.snap(I/d)*d:Math.round(I/d)*d),0==a||3==a||5==a?(T+=i,T=l?this.graph.snap(T/d)*d:Math.round(T/d)*d):(2==a||4==a||7==a)&&(D+=i,D=l?this.graph.snap(D/d)*d:Math.round(D/d)*d);var P=D-T,F=O-I;if(f){var V=this.graph.getCellGeometry(this.state.cell);if(null!=V){var Y=V.width/V.height;1==a||2==a||7==a||6==a?P=F*Y:F=P/Y,0==a&&(T=D-P,I=O-F)}}if(m){var j=N-(T+(P+=P-S)/2),X=k-(I+(F+=F-b)/2);T+=j,I+=X,D+=j,O+=X}P<0&&(T+=P,P=Math.abs(P)),F<0&&(I+=F,F=Math.abs(F));var Z=new mxRectangle(T+c.x*d,I+c.y*d,P,F);return null!=this.minBounds&&(Z.width=Math.max(Z.width,this.minBounds.x*d+this.minBounds.width*d+Math.max(0,this.x0*d-Z.x)),Z.height=Math.max(Z.height,this.minBounds.y*d+this.minBounds.height*d+Math.max(0,this.y0*d-Z.y))),Z},mxVertexHandler.prototype.redraw=function(e){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),e||this.redrawHandles()},mxVertexHandler.prototype.getHandlePadding=function(){var e=new mxPoint(0,0),i=this.tolerance;return null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]&&(this.bounds.width<2*this.sizers[0].bounds.width+2*i||this.bounds.height<2*this.sizers[0].bounds.height+2*i)&&(e.x=this.sizers[0].bounds.width+(i/=2),e.y=this.sizers[0].bounds.height+i),e},mxVertexHandler.prototype.getSizerBounds=function(){return this.bounds},mxVertexHandler.prototype.redrawHandles=function(){var e=this.getSizerBounds(),i=this.tolerance;if(this.horizontalOffset=0,this.verticalOffset=0,null!=this.customHandles)for(var s=0;s<this.customHandles.length;s++){var a=this.customHandles[s].shape.node.style.display;this.customHandles[s].redraw(),this.customHandles[s].shape.node.style.display=a,this.customHandles[s].shape.node.style.visibility=this.handlesVisible&&this.isCustomHandleVisible(this.customHandles[s])?"":"hidden"}if(null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]){if(null==this.index&&this.manageSizers&&this.sizers.length>=8){var l=this.getHandlePadding();this.horizontalOffset=l.x,this.verticalOffset=l.y,(0!=this.horizontalOffset||0!=this.verticalOffset)&&((e=new mxRectangle(e.x,e.y,e.width,e.height)).x-=this.horizontalOffset/2,e.width+=this.horizontalOffset,e.y-=this.verticalOffset/2,e.height+=this.verticalOffset),this.sizers.length>=8&&(e.width<2*this.sizers[0].bounds.width+2*i||e.height<2*this.sizers[0].bounds.height+2*i?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):this.handlesVisible&&(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}var d=e.x+e.width,c=e.y+e.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],d,c);else{var f=e.x+e.width/2,m=e.y+e.height/2;if(this.sizers.length>=8){var x=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],v=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),E=Math.cos(v),S=Math.sin(v),b=Math.round(4*v/Math.PI),T=new mxPoint(e.getCenterX(),e.getCenterY()),D=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),E,S,T);this.moveSizerTo(this.sizers[0],D.x,D.y),this.sizers[0].setCursor(x[mxUtils.mod(0+b,x.length)]),D.x=f,D.y=e.y,D=mxUtils.getRotatedPoint(D,E,S,T),this.moveSizerTo(this.sizers[1],D.x,D.y),this.sizers[1].setCursor(x[mxUtils.mod(1+b,x.length)]),D.x=d,D.y=e.y,D=mxUtils.getRotatedPoint(D,E,S,T),this.moveSizerTo(this.sizers[2],D.x,D.y),this.sizers[2].setCursor(x[mxUtils.mod(2+b,x.length)]),D.x=e.x,D.y=m,D=mxUtils.getRotatedPoint(D,E,S,T),this.moveSizerTo(this.sizers[3],D.x,D.y),this.sizers[3].setCursor(x[mxUtils.mod(7+b,x.length)]),D.x=d,D.y=m,D=mxUtils.getRotatedPoint(D,E,S,T),this.moveSizerTo(this.sizers[4],D.x,D.y),this.sizers[4].setCursor(x[mxUtils.mod(3+b,x.length)]),D.x=e.x,D.y=c,D=mxUtils.getRotatedPoint(D,E,S,T),this.moveSizerTo(this.sizers[5],D.x,D.y),this.sizers[5].setCursor(x[mxUtils.mod(6+b,x.length)]),D.x=f,D.y=c,D=mxUtils.getRotatedPoint(D,E,S,T),this.moveSizerTo(this.sizers[6],D.x,D.y),this.sizers[6].setCursor(x[mxUtils.mod(5+b,x.length)]),D.x=d,D.y=c,D=mxUtils.getRotatedPoint(D,E,S,T),this.moveSizerTo(this.sizers[7],D.x,D.y),this.sizers[7].setCursor(x[mxUtils.mod(4+b,x.length)]),D.x=f+this.state.absoluteOffset.x,D.y=m+this.state.absoluteOffset.y,D=mxUtils.getRotatedPoint(D,E,S,T),this.moveSizerTo(this.sizers[8],D.x,D.y)}else this.state.width>=2&&this.state.height>=2?this.moveSizerTo(this.sizers[0],f+this.state.absoluteOffset.x,m+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y)}}if(null!=this.rotationShape&&(v=mxUtils.toRadians(null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),E=Math.cos(v),S=Math.sin(v),T=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),D=mxUtils.getRotatedPoint(this.getRotationHandlePosition(),E,S,T),null!=this.rotationShape.node&&(this.moveSizerTo(this.rotationShape,D.x,D.y),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()||!this.handlesVisible?"hidden":"")),null!=this.selectionBorder&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.edgeHandlers)for(s=0;s<this.edgeHandlers.length;s++)this.edgeHandlers[s].redraw()},mxVertexHandler.prototype.isCustomHandleVisible=function(e){return!this.graph.isEditing()&&1==this.state.view.graph.getSelectionCount()},mxVertexHandler.prototype.getRotationHandlePosition=function(){return new mxPoint(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)},mxVertexHandler.prototype.isParentHighlightVisible=function(){return!this.graph.isCellSelected(this.graph.model.getParent(this.state.cell))},mxVertexHandler.prototype.updateParentHighlight=function(){if(!this.isDestroyed()){var e=this.isParentHighlightVisible(),i=this.graph.model.getParent(this.state.cell),s=this.graph.view.getState(i);if(null!=this.parentHighlight)if(this.graph.model.isVertex(i)&&e){var a=this.parentHighlight.bounds;null!=s&&(a.x!=s.x||a.y!=s.y||a.width!=s.width||a.height!=s.height)&&(this.parentHighlight.bounds=mxRectangle.fromRectangle(s),this.parentHighlight.redraw())}else null!=s&&s.parentHighlight==this.parentHighlight&&(s.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null;else this.parentHighlightEnabled&&e&&this.graph.model.isVertex(i)&&null!=s&&null==s.parentHighlight&&(this.parentHighlight=this.createParentHighlightShape(s),this.parentHighlight.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(s.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw(),s.parentHighlight=this.parentHighlight)}},mxVertexHandler.prototype.drawPreview=function(){null!=this.preview&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()},mxVertexHandler.prototype.getSelectionBorderBounds=function(){return this.bounds},mxVertexHandler.prototype.isDestroyed=function(){return null==this.selectionBorder},mxVertexHandler.prototype.destroy=function(){if(null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.parentHighlight){var e=this.graph.model.getParent(this.state.cell),i=this.graph.view.getState(e);null!=i&&i.parentHighlight==this.parentHighlight&&(i.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null}if(null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint(),null!=this.sizers){for(var s=0;s<this.sizers.length;s++)this.sizers[s].destroy();this.sizers=null}if(null!=this.customHandles){for(s=0;s<this.customHandles.length;s++)this.customHandles[s].destroy();this.customHandles=null}},__mxOutput.mxVertexHandler=void 0!==mxVertexHandler?mxVertexHandler:void 0,mxEdgeHandler.prototype.graph=null,mxEdgeHandler.prototype.state=null,mxEdgeHandler.prototype.marker=null,mxEdgeHandler.prototype.constraintHandler=null,mxEdgeHandler.prototype.error=null,mxEdgeHandler.prototype.shape=null,mxEdgeHandler.prototype.bends=null,mxEdgeHandler.prototype.labelShape=null,mxEdgeHandler.prototype.cloneEnabled=!0,mxEdgeHandler.prototype.addEnabled=!1,mxEdgeHandler.prototype.removeEnabled=!1,mxEdgeHandler.prototype.dblClickRemoveEnabled=!1,mxEdgeHandler.prototype.mergeRemoveEnabled=!1,mxEdgeHandler.prototype.straightRemoveEnabled=!1,mxEdgeHandler.prototype.virtualBendsEnabled=!1,mxEdgeHandler.prototype.virtualBendOpacity=20,mxEdgeHandler.prototype.parentHighlightEnabled=!1,mxEdgeHandler.prototype.preferHtml=!1,mxEdgeHandler.prototype.allowHandleBoundsCheck=!0,mxEdgeHandler.prototype.snapToTerminals=!1,mxEdgeHandler.prototype.handleImage=null,mxEdgeHandler.prototype.tolerance=0,mxEdgeHandler.prototype.outlineConnect=!1,mxEdgeHandler.prototype.manageLabelHandle=!1,mxEdgeHandler.prototype.init=function(){if(this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=null!=this.state.text&&this.state.text.node.parentNode==this.graph.container,!this.preferHtml){var e=this.state.getVisibleTerminalState(!0);if(null!=e&&(this.preferHtml=null!=e.text&&e.text.node.parentNode==this.graph.container),!this.preferHtml){var i=this.state.getVisibleTerminalState(!1);null!=i&&(this.preferHtml=null!=i.text&&i.text.node.parentNode==this.graph.container)}}(this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells||mxGraphHandler.prototype.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends())),this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.updateParentHighlight(),this.redraw()},mxEdgeHandler.prototype.isParentHighlightVisible=mxVertexHandler.prototype.isParentHighlightVisible,mxEdgeHandler.prototype.updateParentHighlight=mxVertexHandler.prototype.updateParentHighlight,mxEdgeHandler.prototype.createCustomHandles=function(){return null},mxEdgeHandler.prototype.isVirtualBendsEnabled=function(e){return this.virtualBendsEnabled&&(null==this.state.style[mxConstants.STYLE_EDGE]||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.NONE||1==this.state.style[mxConstants.STYLE_NOEDGESTYLE])&&"arrow"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_SHAPE,null)},mxEdgeHandler.prototype.isCellEnabled=function(e){return!0},mxEdgeHandler.prototype.isAddPointEvent=function(e){return mxEvent.isShiftDown(e)},mxEdgeHandler.prototype.isRemovePointEvent=function(e){return mxEvent.isShiftDown(e)},mxEdgeHandler.prototype.getSelectionPoints=function(e){return e.absolutePoints},mxEdgeHandler.prototype.createParentHighlightShape=function(e){var i=new mxRectangleShape(mxRectangle.fromRectangle(e),null,this.getSelectionColor());return i.strokewidth=this.getSelectionStrokeWidth(),i.isDashed=this.isSelectionDashed(),i},mxEdgeHandler.prototype.createSelectionShape=function(e){var i=new this.state.shape.constructor;return i.outline=!0,i.apply(this.state),i.isDashed=this.isSelectionDashed(),i.stroke=this.getSelectionColor(),i.isShadow=!1,i},mxEdgeHandler.prototype.getSelectionColor=function(){return mxConstants.EDGE_SELECTION_COLOR},mxEdgeHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.EDGE_SELECTION_STROKEWIDTH},mxEdgeHandler.prototype.isSelectionDashed=function(){return mxConstants.EDGE_SELECTION_DASHED},mxEdgeHandler.prototype.isConnectableCell=function(e){return!0},mxEdgeHandler.prototype.getCellAt=function(e,i){return this.outlineConnect?null:this.graph.getCellAt(e,i)},mxEdgeHandler.prototype.createMarker=function(){var e=new mxCellMarker(this.graph),i=this;return e.getCell=function(s){var a=mxCellMarker.prototype.getCell.apply(this,arguments);if((a==i.state.cell||null==a)&&null!=i.currentPoint&&(a=i.graph.getCellAt(i.currentPoint.x,i.currentPoint.y)),null!=a&&!this.graph.isCellConnectable(a)){var l=this.graph.getModel().getParent(a);this.graph.getModel().isVertex(l)&&this.graph.isCellConnectable(l)&&(a=l)}var d=i.graph.getModel();return(this.graph.isSwimlane(a)&&null!=i.currentPoint&&this.graph.hitsSwimlaneContent(a,i.currentPoint.x,i.currentPoint.y)||!i.isConnectableCell(a)||a==i.state.cell||null!=a&&!i.graph.connectableEdges&&d.isEdge(a)||d.isAncestor(i.state.cell,a))&&(a=null),this.graph.isCellConnectable(a)||(a=null),a},e.isValidState=function(s){var a=i.graph.getModel(),l=i.graph.view.getTerminalPort(s,i.graph.view.getState(a.getTerminal(i.state.cell,!i.isSource)),!i.isSource),d=null!=l?l.cell:null;return i.error=i.validateConnection(i.isSource?s.cell:d,i.isSource?d:s.cell),null==i.error},e},mxEdgeHandler.prototype.validateConnection=function(e,i){return this.graph.getEdgeValidationError(this.state.cell,e,i)},mxEdgeHandler.prototype.createBends=function(){for(var e=this.state.cell,i=[],s=0;s<this.abspoints.length;s++)if(this.isHandleVisible(s)){var d=0==s||s==this.abspoints.length-1;(d||this.graph.isCellBendable(e))&&mxUtils.bind(this,function(c){var f=this.createHandleShape(c);this.initBend(f,mxUtils.bind(this,mxUtils.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,c)}))),this.isHandleEnabled(s)&&f.setCursor(d?mxConstants.CURSOR_TERMINAL_HANDLE:mxConstants.CURSOR_BEND_HANDLE),i.push(f),d||(this.points.push(new mxPoint(0,0)),f.node.style.visibility="hidden")})(s)}return i},mxEdgeHandler.prototype.createVirtualBends=function(){var s=[];if(this.graph.isCellBendable(this.state.cell))for(var a=1;a<this.abspoints.length;a++)mxUtils.bind(this,function(l){this.initBend(l),l.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE),s.push(l)})(this.createHandleShape());return s},mxEdgeHandler.prototype.isHandleEnabled=function(e){return!0},mxEdgeHandler.prototype.isHandleVisible=function(e){var i=this.state.getVisibleTerminalState(!0),s=this.state.getVisibleTerminalState(!1),a=this.graph.getCellGeometry(this.state.cell);return(null!=a?this.graph.view.getEdgeStyle(this.state,a.points,i,s):null)!=mxEdgeStyle.EntityRelation||0==e||e==this.abspoints.length-1},mxEdgeHandler.prototype.createHandleShape=function(e){if(null!=this.handleImage){var i=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src);return i.preserveImageAspect=!1,i}var s=mxConstants.HANDLE_SIZE;return this.preferHtml&&(s-=1),new mxRectangleShape(new mxRectangle(0,0,s,s),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.createLabelHandleShape=function(){if(null!=this.labelHandleImage){var e=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return e.preserveImageAspect=!1,e}var i=mxConstants.LABEL_HANDLE_SIZE;return new mxRectangleShape(new mxRectangle(0,0,i,i),mxConstants.LABEL_HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.initBend=function(e,i){this.preferHtml?(e.dialect=mxConstants.DIALECT_STRICTHTML,e.init(this.graph.container)):(e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(e.node,this.graph,this.state,null,null,null,i),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(e.node,"dragstart",function(s){return mxEvent.consume(s),!1}),mxClient.IS_TOUCH&&e.node.setAttribute("pointer-events","none")},mxEdgeHandler.prototype.getHandleForEvent=function(e){var i=null;if(null!=this.state){let f=function(m){if(null!=m&&null!=m.node&&"none"!=m.node.style.display&&"hidden"!=m.node.style.visibility&&(e.isSource(m)||null!=a&&mxUtils.intersects(m.bounds,a))){var x=e.getGraphX()-m.bounds.getCenterX(),v=e.getGraphY()-m.bounds.getCenterY(),E=x*x+v*v;if(null==l||E<=l)return l=E,!0}return!1};var s=mxEvent.isMouseEvent(e.getEvent())?1:this.tolerance,a=this.allowHandleBoundsCheck&&(mxClient.IS_IE||s>0)?new mxRectangle(e.getGraphX()-s,e.getGraphY()-s,2*s,2*s):null,l=null;if(null!=this.customHandles&&this.isCustomHandleEvent(e))for(var d=this.customHandles.length-1;d>=0;d--)if(f(this.customHandles[d].shape))return mxEvent.CUSTOM_HANDLE-d;if((e.isSource(this.state.text)||f(this.labelShape))&&(i=mxEvent.LABEL_HANDLE),null!=this.bends)for(d=0;d<this.bends.length;d++)f(this.bends[d])&&(i=d);if(null!=this.virtualBends&&this.isAddVirtualBendEvent(e))for(d=0;d<this.virtualBends.length;d++)f(this.virtualBends[d])&&(i=mxEvent.VIRTUAL_HANDLE-d)}return i},mxEdgeHandler.prototype.isAddVirtualBendEvent=function(e){return!0},mxEdgeHandler.prototype.isCustomHandleEvent=function(e){return!0},mxEdgeHandler.prototype.mouseDown=function(e,i){var s=this.getHandleForEvent(i);if(null!=this.bends&&null!=this.bends[s]){var a=this.bends[s].bounds;this.snapPoint=new mxPoint(a.getCenterX(),a.getCenterY())}this.addEnabled&&null==s&&this.isAddPointEvent(i.getEvent())?(this.addPoint(this.state,i.getEvent()),i.consume()):null!=s&&!i.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(i.getEvent())?this.removePoint(this.state,s):(s!=mxEvent.LABEL_HANDLE||this.graph.isLabelMovable(i.getCell()))&&(s<=mxEvent.VIRTUAL_HANDLE&&mxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE-s].node,100),this.start(i.getX(),i.getY(),s)),i.consume())},mxEdgeHandler.prototype.start=function(e,i,s){if(this.startX=e,this.startY=i,this.isSource=null!=this.bends&&0==s,this.isTarget=null!=this.bends&&s==this.bends.length-1,this.isLabel=s==mxEvent.LABEL_HANDLE,this.isSource||this.isTarget){var a=this.state.cell,l=this.graph.model.getTerminal(a,this.isSource);(null==l&&this.graph.isTerminalPointMovable(a,this.isSource)||null!=l&&this.graph.isCellDisconnectable(a,l,this.isSource))&&(this.index=s)}else this.index=s;if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE&&null!=this.customHandles)for(var d=0;d<this.customHandles.length;d++)d!=mxEvent.CUSTOM_HANDLE-this.index&&this.customHandles[d].setVisible(!1)},mxEdgeHandler.prototype.clonePreviewState=function(e,i){return this.state.clone()},mxEdgeHandler.prototype.getSnapToTerminalTolerance=function(){return this.graph.gridSize*this.graph.view.scale/2},mxEdgeHandler.prototype.updateHint=function(e,i){},mxEdgeHandler.prototype.removeHint=function(){},mxEdgeHandler.prototype.roundLength=function(e){return Math.round(e)},mxEdgeHandler.prototype.isSnapToTerminalsEvent=function(e){return this.snapToTerminals&&!mxEvent.isAltDown(e.getEvent())},mxEdgeHandler.prototype.getPointForEvent=function(e){var i=this.graph.getView(),s=i.scale,a=new mxPoint(this.roundLength(e.getGraphX()/s)*s,this.roundLength(e.getGraphY()/s)*s),l=this.getSnapToTerminalTolerance(),d=!1,c=!1;if(l>0&&this.isSnapToTerminalsEvent(e)){let E=function(b){if(null!=b){var T=b.x;Math.abs(a.x-T)<l&&(a.x=T,d=!0);var D=b.y;Math.abs(a.y-D)<l&&(a.y=D,c=!0)}},S=function(b){null!=b&&E.call(this,new mxPoint(i.getRoutingCenterX(b),i.getRoutingCenterY(b)))};if(S.call(this,this.state.getVisibleTerminalState(!0)),S.call(this,this.state.getVisibleTerminalState(!1)),null!=this.state.absolutePoints)for(var f=0;f<this.state.absolutePoints.length;f++)E.call(this,this.state.absolutePoints[f])}if(this.graph.isGridEnabledEvent(e.getEvent())){var m=i.translate;d||(a.x=(this.graph.snap(a.x/s-m.x)+m.x)*s),c||(a.y=(this.graph.snap(a.y/s-m.y)+m.y)*s)}return a},mxEdgeHandler.prototype.getPreviewTerminalState=function(e){if(this.constraintHandler.update(e,this.isSource,!0,e.isSource(this.marker.highlight.shape)?null:this.currentPoint),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint){null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent");var i=this.graph.getModel(),s=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(i.getTerminal(this.state.cell,!this.isSource)),!this.isSource),a=null!=s?s.cell:null;this.error=this.validateConnection(this.isSource?this.constraintHandler.currentFocus.cell:a,this.isSource?a:this.constraintHandler.currentFocus.cell);var c=null;return null==this.error&&(c=this.constraintHandler.currentFocus),(null!=this.error||null!=c&&!this.isCellEnabled(c.cell))&&this.constraintHandler.reset(),c}if(this.graph.isIgnoreTerminalEvent(e.getEvent()))return this.marker.reset(),null;this.marker.process(e);var f=this.marker.getValidState();return null!=f&&!this.isCellEnabled(f.cell)&&(this.constraintHandler.reset(),this.marker.reset()),this.marker.getValidState()},mxEdgeHandler.prototype.getPreviewPoints=function(e,i){var s=this.graph.getCellGeometry(this.state.cell),a=null!=s.points?s.points.slice():null,l=new mxPoint(e.x,e.y),d=null;if(this.isSource||this.isTarget)this.graph.resetEdgesOnConnect&&(a=null);else if(this.convertPoint(l,!1),null==a)a=[l];else{if(this.index<=mxEvent.VIRTUAL_HANDLE&&a.splice(mxEvent.VIRTUAL_HANDLE-this.index,0,l),!this.isSource&&!this.isTarget){for(var c=0;c<this.bends.length;c++)if(c!=this.index){var f=this.bends[c];null!=f&&mxUtils.contains(f.bounds,e.x,e.y)&&(a.splice(this.index<=mxEvent.VIRTUAL_HANDLE?mxEvent.VIRTUAL_HANDLE-this.index:this.index-1,1),d=a)}if(null==d&&this.straightRemoveEnabled&&(null==i||!mxEvent.isAltDown(i.getEvent()))){let T=function(D,I){D>0&&D<x.length-1&&mxUtils.ptSegDistSq(x[D-1].x,x[D-1].y,x[D+1].x,x[D+1].y,I.x,I.y)<m&&(a.splice(D-1,1),d=a)};var m=this.graph.tolerance*this.graph.tolerance,x=this.state.absolutePoints.slice();x[this.index]=e;var v=this.state.getVisibleTerminalState(!0);null!=v&&(null==(E=this.graph.getConnectionConstraint(this.state,v,!0))||null==this.graph.getConnectionPoint(v,E))&&(x[0]=new mxPoint(v.view.getRoutingCenterX(v),v.view.getRoutingCenterY(v)));var E,S=this.state.getVisibleTerminalState(!1);null!=S&&(null==(E=this.graph.getConnectionConstraint(this.state,S,!1))||null==this.graph.getConnectionPoint(S,E))&&(x[x.length-1]=new mxPoint(S.view.getRoutingCenterX(S),S.view.getRoutingCenterY(S))),T(this.index,e)}}null==d&&this.index>mxEvent.VIRTUAL_HANDLE&&(a[this.index-1]=l)}return null!=d?d:a},mxEdgeHandler.prototype.isOutlineConnectEvent=function(e){var i=mxUtils.getOffset(this.graph.container),s=e.getEvent(),a=mxEvent.getClientX(s),l=mxEvent.getClientY(s),d=document.documentElement,c=(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0),f=(window.pageYOffset||d.scrollTop)-(d.clientTop||0),m=this.currentPoint.x-this.graph.container.scrollLeft+i.x-c,x=this.currentPoint.y-this.graph.container.scrollTop+i.y-f;return this.outlineConnect&&!mxEvent.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(e.getEvent())&&null!=e.getState()||this.marker.highlight.isHighlightAt(a,l)||(m!=a||x!=l)&&null==e.getState()&&this.marker.highlight.isHighlightAt(m,x))},mxEdgeHandler.prototype.updatePreviewState=function(e,i,s,a,l){var d=this.isSource?s:this.state.getVisibleTerminalState(!0),c=this.isTarget?s:this.state.getVisibleTerminalState(!1),f=this.graph.getConnectionConstraint(e,d,!0),m=this.graph.getConnectionConstraint(e,c,!1),x=this.constraintHandler.currentConstraint;if(null==x&&l&&(null!=s?(a.isSource(this.marker.highlight.shape)&&(i=new mxPoint(a.getGraphX(),a.getGraphY())),x=this.graph.getOutlineConstraint(i,s,a),this.constraintHandler.setFocus(a,s,this.isSource),this.constraintHandler.currentConstraint=x,this.constraintHandler.currentPoint=i):x=new mxConnectionConstraint),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var v=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=l?mxConstants.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/v/v,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.graph.isCellConnectable(a.getCell())&&this.marker.getValidState()!=a.getState()?"transparent":mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/v/v,this.marker.highlight.repaint())}this.isSource?f=x:this.isTarget&&(m=x),(this.isSource||this.isTarget)&&(null!=x&&null!=x.point?(e.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X]=x.point.x,e.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]=x.point.y):(delete e.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],delete e.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])),e.setVisibleTerminalState(d,!0),e.setVisibleTerminalState(c,!1),(!this.isSource||null!=d)&&e.view.updateFixedTerminalPoint(e,d,!0,f),(!this.isTarget||null!=c)&&e.view.updateFixedTerminalPoint(e,c,!1,m),(this.isSource||this.isTarget)&&null==s&&(e.setAbsoluteTerminalPoint(i,this.isSource),null==this.marker.getMarkedState()&&(this.error=this.graph.allowDanglingEdges?null:"")),e.view.updatePoints(e,this.points,d,c),e.view.updateFloatingTerminalPoints(e,d,c)},mxEdgeHandler.prototype.mouseMove=function(e,i){if(null!=this.index&&null!=this.marker){if(this.currentPoint=this.getPointForEvent(i),this.error=null,!this.graph.isIgnoreTerminalEvent(i.getEvent())&&mxEvent.isShiftDown(i.getEvent())&&null!=this.snapPoint&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE)null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(i),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged(),null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display="none"));else if(this.isLabel)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,i);var s=this.isSource||this.isTarget?this.getPreviewTerminalState(i):null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint)this.currentPoint=this.constraintHandler.currentPoint.clone();else if(this.outlineConnect){var a=!(!this.isSource&&!this.isTarget)&&this.isOutlineConnectEvent(i);a?s=this.marker.highlight.state:null!=s&&s!=i.getState()&&this.graph.isCellConnectable(i.getCell())&&null!=this.marker.highlight.shape&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),s=null)}null!=s&&!this.isCellEnabled(s.cell)&&(s=null,this.marker.reset());var l=this.clonePreviewState(this.currentPoint,null!=s?s.cell:null);this.updatePreviewState(l,this.currentPoint,s,i,a),this.setPreviewColor(null==this.error?this.marker.validColor:this.marker.invalidColor),this.abspoints=l.absolutePoints,this.active=!0,this.updateHint(i,this.currentPoint)}this.drawPreview(),mxEvent.consume(i.getEvent()),i.consume()}else mxClient.IS_IE&&null!=this.getHandleForEvent(i)&&i.consume(!1)},mxEdgeHandler.prototype.mouseUp=function(e,i){if(null!=this.index&&null!=this.marker){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display="");var s=this.state.cell,a=this.index;if(this.index=null,i.getX()!=this.startX||i.getY()!=this.startY){var l=!this.graph.isIgnoreTerminalEvent(i.getEvent())&&this.graph.isCloneEvent(i.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(null!=this.error)this.error.length>0&&this.graph.validationAlert(this.error);else if(a<=mxEvent.CUSTOM_HANDLE&&a>mxEvent.VIRTUAL_HANDLE){if(null!=this.customHandles){(d=this.graph.getModel()).beginUpdate();try{this.customHandles[mxEvent.CUSTOM_HANDLE-a].execute(i),null!=this.shape&&null!=this.shape.node&&(this.shape.apply(this.state),this.shape.redraw())}finally{d.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var c=null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(c=this.constraintHandler.currentFocus.cell),null==c&&this.marker.hasValidState()&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&"transparent"!=this.marker.highlight.shape.stroke&&"white"!=this.marker.highlight.shape.stroke&&(c=this.marker.validState.cell),null!=c){var d,f=(d=this.graph.getModel()).getParent(s);d.beginUpdate();try{if(l){var m=d.getGeometry(s);l=this.graph.cloneCell(s),d.add(f,l,d.getChildCount(f)),null!=m&&(m=m.clone(),d.setGeometry(l,m));var x=d.getTerminal(s,!this.isSource);this.graph.connectCell(l,x,!this.isSource),s=l}s=this.connect(s,c,this.isSource,l,i)}finally{d.endUpdate()}}else if(this.graph.isAllowDanglingEdges()){var v=this.abspoints[this.isSource?0:this.abspoints.length-1];v.x=this.roundLength(v.x/this.graph.view.scale-this.graph.view.translate.x),v.y=this.roundLength(v.y/this.graph.view.scale-this.graph.view.translate.y);var E=this.graph.getView().getState(this.graph.getModel().getParent(s));null!=E&&(v.x-=E.origin.x,v.y-=E.origin.y),v.x-=this.graph.panDx/this.graph.view.scale,v.y-=this.graph.panDy/this.graph.view.scale,s=this.changeTerminalPoint(s,v,this.isSource,l)}}else this.active?s=this.changePoints(s,this.points,l):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(i.getEvent())&&this.graph.selectCellForEvent(this.state.cell,i.getEvent());null!=this.marker&&(this.reset(),s!=this.state.cell&&this.graph.setSelectionCell(s)),i.consume()}},mxEdgeHandler.prototype.reset=function(){if(this.active&&this.refresh(),this.error=null,this.index=null,this.label=null,this.points=null,this.snapPoint=null,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.active=!1,this.livePreview&&null!=this.sizers)for(var e=0;e<this.sizers.length;e++)null!=this.sizers[e]&&(this.sizers[e].node.style.display="");if(null!=this.marker&&this.marker.reset(),null!=this.constraintHandler&&this.constraintHandler.reset(),null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].reset();this.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()},mxEdgeHandler.prototype.setPreviewColor=function(e){null!=this.shape&&(this.shape.stroke=e)},mxEdgeHandler.prototype.convertPoint=function(e,i){var s=this.graph.getView().getScale(),a=this.graph.getView().getTranslate();i&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/s-a.x),e.y=Math.round(e.y/s-a.y);var l=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell));return null!=l&&(e.x-=l.origin.x,e.y-=l.origin.y),e},mxEdgeHandler.prototype.moveLabel=function(e,i,s){var a=this.graph.getModel(),l=a.getGeometry(e.cell);if(null!=l){var d=this.graph.getView().scale;if((l=l.clone()).relative){var c=this.graph.getView().getRelativePoint(e,i,s);l.x=Math.round(1e4*c.x)/1e4,l.y=Math.round(c.y),l.offset=new mxPoint(0,0),c=this.graph.view.getPoint(e,l),l.offset=new mxPoint(Math.round((i-c.x)/d),Math.round((s-c.y)/d))}else{var f=e.absolutePoints,m=f[0],x=f[f.length-1];if(null!=m&&null!=x){var E=m.y+(x.y-m.y)/2;l.offset=new mxPoint(Math.round((i-(m.x+(x.x-m.x)/2))/d),Math.round((s-E)/d)),l.x=0,l.y=0}}a.setGeometry(e.cell,l)}},mxEdgeHandler.prototype.connect=function(e,i,s,a,l){var d=this.graph.getModel();d.getParent(e),d.beginUpdate();try{var f=this.constraintHandler.currentConstraint;null==f&&(f=new mxConnectionConstraint),this.graph.connectCell(e,i,s,f)}finally{d.endUpdate()}return e},mxEdgeHandler.prototype.changeTerminalPoint=function(e,i,s,a){var l=this.graph.getModel();l.beginUpdate();try{if(a){var d=l.getParent(e),c=l.getTerminal(e,!s);e=this.graph.cloneCell(e),l.add(d,e,l.getChildCount(d)),l.setTerminal(e,c,!s)}var f=l.getGeometry(e);null!=f&&((f=f.clone()).setTerminalPoint(i,s),l.setGeometry(e,f),this.graph.connectCell(e,null,s,new mxConnectionConstraint))}finally{l.endUpdate()}return e},mxEdgeHandler.prototype.changePoints=function(e,i,s){var a=this.graph.getModel();a.beginUpdate();try{if(s){var l=a.getParent(e),d=a.getTerminal(e,!0),c=a.getTerminal(e,!1);e=this.graph.cloneCell(e),a.add(l,e,a.getChildCount(l)),a.setTerminal(e,d,!0),a.setTerminal(e,c,!1)}var f=a.getGeometry(e);null!=f&&((f=f.clone()).points=i,a.setGeometry(e,f))}finally{a.endUpdate()}return e},mxEdgeHandler.prototype.addPoint=function(e,i){var s=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(i),mxEvent.getClientY(i)),a=this.graph.isGridEnabledEvent(i);this.convertPoint(s,a),this.addPointAt(e,s.x,s.y),mxEvent.consume(i)},mxEdgeHandler.prototype.addPointAt=function(e,i,s){var a=this.graph.getCellGeometry(e.cell),l=new mxPoint(i,s);if(null!=a){a=a.clone();var d=this.graph.view.translate,c=this.graph.view.scale,f=new mxPoint(d.x*c,d.y*c),m=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(m)){var x=this.graph.view.getState(m);f=new mxPoint(x.x,x.y)}var v=mxUtils.findNearestSegment(e,l.x*c+f.x,l.y*c+f.y);null==a.points?a.points=[l]:a.points.splice(v,0,l),this.graph.getModel().setGeometry(e.cell,a),this.refresh(),this.redraw()}},mxEdgeHandler.prototype.removePoint=function(e,i){if(i>0&&i<this.abspoints.length-1){var s=this.graph.getCellGeometry(this.state.cell);null!=s&&null!=s.points&&((s=s.clone()).points.splice(i-1,1),this.graph.getModel().setGeometry(e.cell,s),this.refresh(),this.redraw())}},mxEdgeHandler.prototype.getHandleFillColor=function(e){var i=0==e,s=this.state.cell,a=this.graph.getModel().getTerminal(s,i),l=mxConstants.HANDLE_FILLCOLOR;return null!=a&&!this.graph.isCellDisconnectable(s,a,i)||null==a&&!this.graph.isTerminalPointMovable(s,i)?l=mxConstants.LOCKED_HANDLE_FILLCOLOR:null!=a&&this.graph.isCellDisconnectable(s,a,i)&&(l=mxConstants.CONNECT_HANDLE_FILLCOLOR),l},mxEdgeHandler.prototype.redraw=function(e){if(null!=this.state){this.abspoints=this.state.absolutePoints.slice();var i=this.graph.getModel().getGeometry(this.state.cell);if(null!=i){var s=i.points;if(null!=this.bends&&this.bends.length>0&&null!=s){null==this.points&&(this.points=[]);for(var a=1;a<this.bends.length-1;a++)null!=this.bends[a]&&null!=this.abspoints[a]&&(this.points[a-1]=s[a-1])}}this.drawPreview(),e||this.redrawHandles()}},mxEdgeHandler.prototype.redrawHandles=function(){var e=this.state.cell,i=this.labelShape.bounds;this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-i.width/2),Math.round(this.label.y-i.height/2),i.width,i.height);var s=this.graph.getLabel(e);if(this.labelShape.visible=null!=s&&s.length>0&&this.graph.isLabelMovable(e),null!=this.bends&&this.bends.length>0){var a=this.abspoints.length-1,l=this.abspoints[0],c=l.y;i=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(l.x-i.width/2),Math.floor(c-i.height/2),i.width,i.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds);var f=this.abspoints[a],x=f.y,v=this.bends.length-1;i=this.bends[v].bounds,this.bends[v].bounds=new mxRectangle(Math.floor(f.x-i.width/2),Math.floor(x-i.height/2),i.width,i.height),this.bends[v].fill=this.getHandleFillColor(v),this.bends[v].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[v].bounds),this.redrawInnerBends(l,f)}if(null!=this.abspoints&&null!=this.virtualBends&&this.virtualBends.length>0)for(var E=this.abspoints[0],S=0;S<this.virtualBends.length;S++)if(null!=this.virtualBends[S]&&null!=this.abspoints[S+1]){var b=this.abspoints[S+1],D=E.y+(b.y-E.y)/2;(i=this.virtualBends[S]).bounds=new mxRectangle(Math.floor(E.x+(b.x-E.x)/2-i.bounds.width/2),Math.floor(D-i.bounds.height/2),i.bounds.width,i.bounds.height),i.redraw(),mxUtils.setOpacity(i.node,this.virtualBendOpacity),E=b,this.manageLabelHandle&&this.checkLabelHandle(i.bounds)}if(null!=this.labelShape&&this.labelShape.redraw(),null!=this.customHandles)for(S=0;S<this.customHandles.length;S++){var I=this.customHandles[S].shape.node.style.display;this.customHandles[S].redraw(),this.customHandles[S].shape.node.style.display=I,this.customHandles[S].shape.node.style.visibility=this.isCustomHandleVisible(this.customHandles[S])?"":"hidden"}},mxEdgeHandler.prototype.isCustomHandleVisible=function(e){return!this.graph.isEditing()&&1==this.state.view.graph.getSelectionCount()},mxEdgeHandler.prototype.setHandlesVisible=function(e){if(null!=this.bends)for(var i=0;i<this.bends.length;i++)this.bends[i].node.style.display=e?"":"none";if(null!=this.virtualBends)for(i=0;i<this.virtualBends.length;i++)this.virtualBends[i].node.style.display=e?"":"none";if(null!=this.labelShape&&(this.labelShape.node.style.display=e?"":"none"),null!=this.customHandles)for(i=0;i<this.customHandles.length;i++)this.customHandles[i].setVisible(e)},mxEdgeHandler.prototype.redrawInnerBends=function(e,i){for(var s=1;s<this.bends.length-1;s++)if(null!=this.bends[s])if(null!=this.abspoints[s]){var a=this.abspoints[s].x,l=this.abspoints[s].y,d=this.bends[s].bounds;this.bends[s].node.style.visibility="visible",this.bends[s].bounds=new mxRectangle(Math.round(a-d.width/2),Math.round(l-d.height/2),d.width,d.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[s].bounds):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(this.bends[s].bounds,this.labelShape.bounds)&&(w=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,this.bends[s].bounds=new mxRectangle(Math.round(a-w/2),Math.round(l-h/2),w,h)),this.bends[s].redraw()}else this.bends[s].destroy(),this.bends[s]=null},mxEdgeHandler.prototype.checkLabelHandle=function(e){if(null!=this.labelShape){var i=this.labelShape.bounds;mxUtils.intersects(e,i)&&(i.y=e.getCenterY()<i.getCenterY()?e.y+e.height:e.y-i.height)}},mxEdgeHandler.prototype.drawPreview=function(){try{if(this.isLabel){var e=this.labelShape.bounds,i=new mxRectangle(Math.round(this.label.x-e.width/2),Math.round(this.label.y-e.height/2),e.width,e.height);this.labelShape.bounds.equals(i)||(this.labelShape.bounds=i,this.labelShape.redraw())}null!=this.shape&&!mxUtils.equalPoints(this.shape.points,this.abspoints)&&(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.updateParentHighlight()}catch(s){}},mxEdgeHandler.prototype.refresh=function(){null!=this.state&&(this.abspoints=this.getSelectionPoints(this.state),this.points=[],null!=this.bends&&(this.destroyBends(this.bends),this.bends=this.createBends()),null!=this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),null!=this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),null!=this.labelShape&&null!=this.labelShape.node&&null!=this.labelShape.node.parentNode&&this.labelShape.node.parentNode.appendChild(this.labelShape.node))},mxEdgeHandler.prototype.isDestroyed=function(){return null==this.shape},mxEdgeHandler.prototype.destroyBends=function(e){if(null!=e)for(var i=0;i<e.length;i++)null!=e[i]&&e[i].destroy()},mxEdgeHandler.prototype.destroy=function(){if(null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.parentHighlight){var e=this.graph.model.getParent(this.state.cell),i=this.graph.view.getState(e);null!=i&&i.parentHighlight==this.parentHighlight&&(i.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null}null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()},__mxOutput.mxEdgeHandler=void 0!==mxEdgeHandler?mxEdgeHandler:void 0,mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler),mxElbowEdgeHandler.prototype.flipEnabled=!0,mxElbowEdgeHandler.prototype.doubleClickOrientationResource="none"!=mxClient.language?"doubleClickOrientation":"",mxElbowEdgeHandler.prototype.createBends=function(){var e=[],i=this.createHandleShape(0);return this.initBend(i),i.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(i),e.push(this.createVirtualBend(mxUtils.bind(this,function(s){!mxEvent.isConsumed(s)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,s),mxEvent.consume(s))}))),this.points.push(new mxPoint(0,0)),i=this.createHandleShape(2),this.initBend(i),i.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(i),e},mxElbowEdgeHandler.prototype.createVirtualBend=function(e){var i=this.createHandleShape();return this.initBend(i,e),i.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(i.node.style.display="none"),i},mxElbowEdgeHandler.prototype.getCursorForBend=function(){return this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL?"row-resize":"col-resize"},mxElbowEdgeHandler.prototype.getTooltipForNode=function(e){var i=null;return null!=this.bends&&null!=this.bends[1]&&(e==this.bends[1].node||e.parentNode==this.bends[1].node)&&(i=mxResources.get(i=this.doubleClickOrientationResource)||i),i},mxElbowEdgeHandler.prototype.convertPoint=function(e,i){var s=this.graph.getView().getScale(),a=this.graph.getView().getTranslate(),l=this.state.origin;return i&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/s-a.x-l.x),e.y=Math.round(e.y/s-a.y-l.y),e},mxElbowEdgeHandler.prototype.redrawInnerBends=function(e,i){var s=this.graph.getModel().getGeometry(this.state.cell),a=this.state.absolutePoints,l=null;a.length>1?(e=a[1],i=a[a.length-2]):null!=s.points&&s.points.length>0&&(l=a[0]),l=null==l?new mxPoint(e.x+(i.x-e.x)/2,e.y+(i.y-e.y)/2):new mxPoint(this.graph.getView().scale*(l.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(l.y+this.graph.getView().translate.y+this.state.origin.y));var d=this.bends[1].bounds,c=d.width,f=d.height,m=new mxRectangle(Math.round(l.x-c/2),Math.round(l.y-f/2),c,f);this.manageLabelHandle?this.checkLabelHandle(m):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(m,this.labelShape.bounds)&&(c=mxConstants.HANDLE_SIZE+3,f=mxConstants.HANDLE_SIZE+3,m=new mxRectangle(Math.floor(l.x-c/2),Math.floor(l.y-f/2),c,f)),this.bends[1].bounds=m,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)},__mxOutput.mxElbowEdgeHandler=void 0!==mxElbowEdgeHandler?mxElbowEdgeHandler:void 0,mxUtils.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler),mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var e=this.state.absolutePoints;if(null!=e){var i=Math.max(1,this.graph.view.scale);if(2==e.length||3==e.length&&(Math.abs(e[0].x-e[1].x)<i&&Math.abs(e[1].x-e[2].x)<i||Math.abs(e[0].y-e[1].y)<i&&Math.abs(e[1].y-e[2].y)<i)){var s=e[0].x+(e[e.length-1].x-e[0].x)/2,a=e[0].y+(e[e.length-1].y-e[0].y)/2;e=[e[0],new mxPoint(s,a),new mxPoint(s,a),e[e.length-1]]}}return e},mxEdgeSegmentHandler.prototype.getPreviewPoints=function(e){if(this.isSource||this.isTarget)return mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this,arguments);var i=this.getCurrentPoints(),s=this.convertPoint(i[0].clone(),!1);e=this.convertPoint(e.clone(),!1);for(var a=[],l=1;l<i.length;l++){var d=this.convertPoint(i[l].clone(),!1);l==this.index&&(0==Math.round(s.x-d.x)&&(s.x=e.x,d.x=e.x),0==Math.round(s.y-d.y)&&(s.y=e.y,d.y=e.y)),l<i.length-1&&a.push(d),s=d}if(1==a.length){var c=this.state.getVisibleTerminalState(!0),f=this.state.getVisibleTerminalState(!1),m=this.state.view.getScale(),x=this.state.view.getTranslate(),v=a[0].x*m+x.x,E=a[0].y*m+x.y;(null!=c&&mxUtils.contains(c,v,E)||null!=f&&mxUtils.contains(f,v,E))&&(a=[e,e])}return a},mxEdgeSegmentHandler.prototype.updatePreviewState=function(e,i,s,a){if(mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments),!this.isSource&&!this.isTarget){i=this.convertPoint(i.clone(),!1);for(var l=e.absolutePoints,d=l[0],c=l[1],f=[],m=2;m<l.length;m++){var x=l[m];(0!=Math.round(d.x-c.x)||0!=Math.round(c.x-x.x))&&(0!=Math.round(d.y-c.y)||0!=Math.round(c.y-x.y))&&f.push(this.convertPoint(c.clone(),!1)),d=c,c=x}var v=this.state.getVisibleTerminalState(!0),E=this.state.getVisibleTerminalState(!1),S=this.state.absolutePoints;if(0!=f.length||0!=Math.round(l[0].x-l[l.length-1].x)&&0!=Math.round(l[0].y-l[l.length-1].y)){if(5==l.length&&2==f.length&&null!=v&&null!=E&&null!=S&&0==Math.round(S[0].x-S[S.length-1].x)){var b=this.graph.getView(),T=b.getScale(),D=b.getTranslate(),I=b.getRoutingCenterY(v)/T-D.y,O=this.graph.getConnectionConstraint(e,v,!0);null!=O&&null!=(N=this.graph.getConnectionPoint(v,O))&&(this.convertPoint(N,!1),I=N.y);var N,k=b.getRoutingCenterY(E)/T-D.y,P=this.graph.getConnectionConstraint(e,E,!1);P&&null!=(N=this.graph.getConnectionPoint(E,P))&&(this.convertPoint(N,!1),k=N.y),f=[new mxPoint(i.x,I),new mxPoint(i.x,k)]}}else f=[i,i];this.points=f,e.view.updateFixedTerminalPoints(e,v,E),e.view.updatePoints(e,this.points,v,E),e.view.updateFloatingTerminalPoints(e,v,E)}},mxEdgeSegmentHandler.prototype.connect=function(e,i,s,a,l){var d=this.graph.getModel(),f=null;if(null!=(c=d.getGeometry(e))&&null!=c.points&&c.points.length>0){var m=this.abspoints,x=m[0],v=m[1];f=[];for(var E=2;E<m.length;E++){var S=m[E];(0!=Math.round(x.x-v.x)||0!=Math.round(v.x-S.x))&&(0!=Math.round(x.y-v.y)||0!=Math.round(v.y-S.y))&&f.push(this.convertPoint(v.clone(),!1)),x=v,v=S}}d.beginUpdate();try{var c;null!=f&&null!=(c=d.getGeometry(e))&&((c=c.clone()).points=f,d.setGeometry(e,c)),e=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{d.endUpdate()}return e},mxEdgeSegmentHandler.prototype.getTooltipForNode=function(e){return null},mxEdgeSegmentHandler.prototype.start=function(e,i,s){mxEdgeHandler.prototype.start.apply(this,arguments),null!=this.bends&&null!=this.bends[s]&&!this.isSource&&!this.isTarget&&mxUtils.setOpacity(this.bends[s].node,100)},mxEdgeSegmentHandler.prototype.createBends=function(){var e=[],i=this.createHandleShape(0);this.initBend(i),i.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(i);var s=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){null==this.points&&(this.points=[]);for(var a=0;a<s.length-1;a++){i=this.createVirtualBend(),e.push(i);var l=0==Math.round(s[a].x-s[a+1].x);0==Math.round(s[a].y-s[a+1].y)&&a<s.length-2&&(l=0==Math.round(s[a].x-s[a+2].x)),i.setCursor(l?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}return i=this.createHandleShape(s.length),this.initBend(i),i.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(i),e},mxEdgeSegmentHandler.prototype.redraw=function(){this.refresh(),mxEdgeHandler.prototype.redraw.apply(this,arguments)},mxEdgeSegmentHandler.prototype.redrawInnerBends=function(e,i){if(this.graph.isCellBendable(this.state.cell)){var s=this.getCurrentPoints();if(null!=s&&s.length>1){var a=!1;if(4==s.length&&0==Math.round(s[1].x-s[2].x)&&0==Math.round(s[1].y-s[2].y))if(a=!0,0==Math.round(s[0].y-s[s.length-1].y)){var l=s[0].x+(s[s.length-1].x-s[0].x)/2;s[1]=new mxPoint(l,s[1].y),s[2]=new mxPoint(l,s[2].y)}else{var d=s[0].y+(s[s.length-1].y-s[0].y)/2;s[1]=new mxPoint(s[1].x,d),s[2]=new mxPoint(s[2].x,d)}for(var c=0;c<s.length-1;c++)if(null!=this.bends[c+1]){var f=new mxPoint((e=s[c]).x+((i=s[c+1]).x-e.x)/2,e.y+(i.y-e.y)/2),m=this.bends[c+1].bounds;this.bends[c+1].bounds=new mxRectangle(Math.floor(f.x-m.width/2),Math.floor(f.y-m.height/2),m.width,m.height),this.bends[c+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[c+1].bounds)}a&&(mxUtils.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}},__mxOutput.mxEdgeSegmentHandler=void 0!==mxEdgeSegmentHandler?mxEdgeSegmentHandler:void 0,mxKeyHandler.prototype.graph=null,mxKeyHandler.prototype.target=null,mxKeyHandler.prototype.normalKeys=null,mxKeyHandler.prototype.shiftKeys=null,mxKeyHandler.prototype.controlKeys=null,mxKeyHandler.prototype.controlShiftKeys=null,mxKeyHandler.prototype.enabled=!0,mxKeyHandler.prototype.isEnabled=function(){return this.enabled},mxKeyHandler.prototype.setEnabled=function(e){this.enabled=e},mxKeyHandler.prototype.bindKey=function(e,i){this.normalKeys[e]=i},mxKeyHandler.prototype.bindShiftKey=function(e,i){this.shiftKeys[e]=i},mxKeyHandler.prototype.bindControlKey=function(e,i){this.controlKeys[e]=i},mxKeyHandler.prototype.bindControlShiftKey=function(e,i){this.controlShiftKeys[e]=i},mxKeyHandler.prototype.isControlDown=function(e){return mxEvent.isControlDown(e)},mxKeyHandler.prototype.getFunction=function(e){return null==e||mxEvent.isAltDown(e)?null:this.isControlDown(e)?mxEvent.isShiftDown(e)?this.controlShiftKeys[e.keyCode]:this.controlKeys[e.keyCode]:mxEvent.isShiftDown(e)?this.shiftKeys[e.keyCode]:this.normalKeys[e.keyCode]},mxKeyHandler.prototype.isGraphEvent=function(e){var i=mxEvent.getSource(e);return!!(i==this.target||i.parentNode==this.target||null!=this.graph.cellEditor&&this.graph.cellEditor.isEventSource(e))||mxUtils.isAncestorNode(this.graph.container,i)},mxKeyHandler.prototype.keyDown=function(e){if(this.isEnabledForEvent(e))if(27==e.keyCode)this.escape(e);else if(!this.isEventIgnored(e)){var i=this.getFunction(e);null!=i&&(i(e),mxEvent.consume(e))}},mxKeyHandler.prototype.isEnabledForEvent=function(e){return this.graph.isEnabled()&&!mxEvent.isConsumed(e)&&this.isGraphEvent(e)&&this.isEnabled()},mxKeyHandler.prototype.isEventIgnored=function(e){return this.graph.isEditing()},mxKeyHandler.prototype.escape=function(e){this.graph.isEscapeEnabled()&&this.graph.escape(e)},mxKeyHandler.prototype.destroy=function(){null!=this.target&&null!=this.keydownHandler&&(mxEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null},__mxOutput.mxKeyHandler=void 0!==mxKeyHandler?mxKeyHandler:void 0,mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!0,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(e){this.enabled=e},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(e){this.hideOnHover=e},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(e){"A"!=mxEvent.getSource(e).nodeName&&this.hideTooltip()})))},mxTooltipHandler.prototype.getStateForEvent=function(e){return e.getState()},mxTooltipHandler.prototype.mouseDown=function(e,i){this.reset(i,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(e,i){if(i.getX()!=this.lastX||i.getY()!=this.lastY){this.reset(i,!0);var s=this.getStateForEvent(i);(this.isHideOnHover()||s!=this.state||i.getSource()!=this.node&&(!this.stateSource||null!=s&&this.stateSource==(i.isSource(s.shape)||!i.isSource(s.text))))&&this.hideTooltip()}this.lastX=i.getX(),this.lastY=i.getY()},mxTooltipHandler.prototype.mouseUp=function(e,i){this.reset(i,!0),this.hideTooltip()},mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(e,i,s){if((!this.ignoreTouchEvents||mxEvent.isMouseEvent(e.getEvent()))&&(this.resetTimer(),s=null!=s?s:this.getStateForEvent(e),i&&this.isEnabled()&&null!=s&&(null==this.div||"hidden"==this.div.style.visibility))){var a=e.getSource(),l=e.getX(),d=e.getY(),c=e.isSource(s.shape)||e.isSource(s.text);this.thread=window.setTimeout(mxUtils.bind(this,function(){if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var f=this.graph.getTooltip(s,a,l,d);this.show(f,l,d),this.state=s,this.node=a,this.stateSource=c}}),this.delay)}},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden",this.div.innerHTML="")},mxTooltipHandler.prototype.show=function(e,i,s){if(!this.destroyed&&null!=e&&e.length>0){null==this.div&&this.init();var a=mxUtils.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=i+a.x+"px",this.div.style.top=s+mxConstants.TOOLTIP_VERTICAL_OFFSET+a.y+"px",mxUtils.isNode(e)?(this.div.innerHTML="",this.div.appendChild(e)):this.div.innerHTML=e.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils.fit(this.div)}},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)},__mxOutput.mxTooltipHandler=void 0!==mxTooltipHandler?mxTooltipHandler:void 0,mxUtils.extend(mxCellTracker,mxCellMarker),mxCellTracker.prototype.mouseDown=function(e,i){},mxCellTracker.prototype.mouseMove=function(e,i){this.isEnabled()&&this.process(i)},mxCellTracker.prototype.mouseUp=function(e,i){},mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker.prototype.destroy.apply(this))},__mxOutput.mxCellTracker=void 0!==mxCellTracker?mxCellTracker:void 0,mxCellHighlight.prototype.keepOnTop=!1,mxCellHighlight.prototype.graph=null,mxCellHighlight.prototype.state=null,mxCellHighlight.prototype.spacing=2,mxCellHighlight.prototype.resetHandler=null,mxCellHighlight.prototype.setHighlightColor=function(e){this.highlightColor=e,null!=this.shape&&(this.shape.stroke=e)},mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),!this.keepOnTop&&this.shape.node.parentNode.firstChild!=this.shape.node&&this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)},mxCellHighlight.prototype.createShape=function(){var e=this.graph.cellRenderer.createShape(this.state);return e.svgStrokeTolerance=this.graph.tolerance,e.points=this.state.absolutePoints,e.apply(this.state),e.stroke=this.highlightColor,e.opacity=this.opacity,e.isDashed=this.dashed,e.isShadow=!1,e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(e.node,this.graph,this.state),this.graph.dialect!=mxConstants.DIALECT_SVG?e.pointerEvents=!1:e.svgPointerEvents="stroke",e},mxCellHighlight.prototype.getStrokeWidth=function(e){return this.strokeWidth},mxCellHighlight.prototype.repaint=function(){null!=this.state&&null!=this.shape&&(this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),null!=this.state.shape&&this.shape.setCursor(this.state.shape.getCursor()),(mxClient.IS_QUIRKS||8==document.documentMode)&&("transparent"==this.shape.stroke?(this.shape.stroke="white",this.shape.opacity=1):this.shape.opacity=this.opacity),this.shape.redraw())},mxCellHighlight.prototype.hide=function(){this.highlight(null)},mxCellHighlight.prototype.highlight=function(e){this.state!=e&&(null!=this.shape&&(this.shape.destroy(),this.shape=null),this.state=e,null!=this.state&&this.drawHighlight())},mxCellHighlight.prototype.isHighlightAt=function(e,i){var s=!1;if(null!=this.shape&&null!=document.elementFromPoint&&!mxClient.IS_QUIRKS)for(var a=document.elementFromPoint(e,i);null!=a;){if(a==this.shape.node){s=!0;break}a=a.parentNode}return s},mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),null!=this.shape&&(this.shape.destroy(),this.shape=null)},__mxOutput.mxCellHighlight=void 0!==mxCellHighlight?mxCellHighlight:void 0,mxDefaultKeyHandler.prototype.editor=null,mxDefaultKeyHandler.prototype.handler=null,mxDefaultKeyHandler.prototype.bindAction=function(e,i,s){var a=mxUtils.bind(this,function(){this.editor.execute(i)});s?this.handler.bindControlKey(e,a):this.handler.bindKey(e,a)},mxDefaultKeyHandler.prototype.destroy=function(){this.handler.destroy(),this.handler=null},__mxOutput.mxDefaultKeyHandler=void 0!==mxDefaultKeyHandler?mxDefaultKeyHandler:void 0,mxDefaultPopupMenu.prototype.imageBasePath=null,mxDefaultPopupMenu.prototype.config=null,mxDefaultPopupMenu.prototype.createMenu=function(e,i,s,a){if(null!=this.config){var l=this.createConditions(e,s,a);this.addItems(e,i,s,a,l,this.config.firstChild,null)}},mxDefaultPopupMenu.prototype.addItems=function(e,i,s,a,l,d,c){for(var f=!1;null!=d;){if("add"==d.nodeName){var m=d.getAttribute("if");if(null==m||l[m]){var x=d.getAttribute("as");x=mxResources.get(x)||x;var v=mxUtils.eval(mxUtils.getTextContent(d)),E=d.getAttribute("action"),S=d.getAttribute("icon"),b=d.getAttribute("iconCls"),T=d.getAttribute("enabled-if"),D=null==T||l[T];f&&(i.addSeparator(c),f=!1),null!=S&&this.imageBasePath&&(S=this.imageBasePath+S);var I=this.addAction(i,e,x,S,v,E,s,c,b,D);this.addItems(e,i,s,a,l,d.firstChild,I)}}else"separator"==d.nodeName&&(f=!0);d=d.nextSibling}},mxDefaultPopupMenu.prototype.addAction=function(e,i,s,a,l,d,c,f,m,x){return e.addItem(s,a,function(E){"function"==typeof l&&l.call(i,i,c,E),null!=d&&i.execute(d,c,E)},f,m,x)},mxDefaultPopupMenu.prototype.createConditions=function(e,i,s){var a=e.graph.getModel(),l=a.getChildCount(i),d=[];d.nocell=null==i,d.ncells=e.graph.getSelectionCount()>1,d.notRoot=a.getRoot()!=a.getParent(e.graph.getDefaultParent()),d.cell=null!=i;var c=null!=i&&1==e.graph.getSelectionCount();d.nonEmpty=c&&l>0,d.expandable=c&&e.graph.isCellFoldable(i,!1),d.collapsable=c&&e.graph.isCellFoldable(i,!0),d.validRoot=c&&e.graph.isValidRoot(i),d.emptyValidRoot=d.validRoot&&0==l,d.swimlane=c&&e.graph.isSwimlane(i);for(var f=this.config.getElementsByTagName("condition"),m=0;m<f.length;m++){var x=mxUtils.eval(mxUtils.getTextContent(f[m])),v=f[m].getAttribute("name");null!=v&&"function"==typeof x&&(d[v]=x(e,i,s))}return d},__mxOutput.mxDefaultPopupMenu=void 0!==mxDefaultPopupMenu?mxDefaultPopupMenu:void 0,mxDefaultToolbar.prototype.editor=null,mxDefaultToolbar.prototype.toolbar=null,mxDefaultToolbar.prototype.resetHandler=null,mxDefaultToolbar.prototype.spacing=4,mxDefaultToolbar.prototype.connectOnDrop=!1,mxDefaultToolbar.prototype.init=function(e){null!=e&&(this.toolbar=new mxToolbar(e),this.toolbar.addListener(mxEvent.SELECT,mxUtils.bind(this,function(i,s){var a=s.getProperty("function");this.editor.insertFunction=null!=a?mxUtils.bind(this,function(){a.apply(this,arguments),this.toolbar.resetMode()}):null})),this.resetHandler=mxUtils.bind(this,function(){null!=this.toolbar&&this.toolbar.resetMode(!0)}),this.editor.graph.addListener(mxEvent.DOUBLE_CLICK,this.resetHandler),this.editor.addListener(mxEvent.ESCAPE,this.resetHandler))},mxDefaultToolbar.prototype.addItem=function(e,i,s,a){var l=mxUtils.bind(this,function(){null!=s&&s.length>0&&this.editor.execute(s)});return this.toolbar.addItem(e,i,l,a)},mxDefaultToolbar.prototype.addSeparator=function(e){this.toolbar.addSeparator(e=e||mxClient.imageBasePath+"/separator.gif")},mxDefaultToolbar.prototype.addCombo=function(){return this.toolbar.addCombo()},mxDefaultToolbar.prototype.addActionCombo=function(e){return this.toolbar.addActionCombo(e)},mxDefaultToolbar.prototype.addActionOption=function(e,i,s){var a=mxUtils.bind(this,function(){this.editor.execute(s)});this.addOption(e,i,a)},mxDefaultToolbar.prototype.addOption=function(e,i,s){return this.toolbar.addOption(e,i,s)},mxDefaultToolbar.prototype.addMode=function(e,i,s,a,l){var d=mxUtils.bind(this,function(){this.editor.setMode(s),null!=l&&l(this.editor)});return this.toolbar.addSwitchMode(e,i,d,a)},mxDefaultToolbar.prototype.addPrototype=function(e,i,s,a,l,d){var c=mxUtils.bind(this,function(){return"function"==typeof s?s():null!=s?this.editor.graph.cloneCell(s):null}),f=mxUtils.bind(this,function(v,E){"function"==typeof l?l(this.editor,c(),v,E):this.drop(c(),v,E),this.toolbar.resetMode(),mxEvent.consume(v)}),m=this.toolbar.addMode(e,i,f,a,null,d);return this.installDropHandler(m,function(v,E,S){f(E,S)}),m},mxDefaultToolbar.prototype.drop=function(e,i,s){var a=this.editor.graph,l=a.getModel();if(null!=s&&!l.isEdge(s)&&this.connectOnDrop&&a.isCellConnectable(s))this.connect(e,i,s);else{for(;null!=s&&!a.isValidDropTarget(s,[e],i);)s=l.getParent(s);this.insert(e,i,s)}},mxDefaultToolbar.prototype.insert=function(e,i,s){var a=this.editor.graph;if(a.canImportCell(e)){var l=mxEvent.getClientX(i),d=mxEvent.getClientY(i),c=mxUtils.convertPoint(a.container,l,d);return a.isSplitEnabled()&&a.isSplitTarget(s,[e],i)?a.splitEdge(s,[e],null,c.x,c.y):this.editor.addVertex(s,e,c.x,c.y)}return null},mxDefaultToolbar.prototype.connect=function(e,i,s){var a=this.editor.graph,l=a.getModel();if(null!=s&&a.isCellConnectable(e)&&a.isEdgeValid(null,s,e)){var d=null;l.beginUpdate();try{var c=l.getGeometry(s),f=l.getGeometry(e).clone();f.x=c.x+(c.width-f.width)/2,f.y=c.y+(c.height-f.height)/2;var m=this.spacing*a.gridSize,x=20*l.getDirectedEdgeCount(s,!0);this.editor.horizontalFlow?f.x+=(f.width+c.width)/2+m+x:f.y+=(f.height+c.height)/2+m+x,e.setGeometry(f);var v=l.getParent(s);if(a.addCell(e,v),a.constrainChild(e),d=this.editor.createEdge(s,e),null==l.getGeometry(d)){var E=new mxGeometry;E.relative=!0,l.setGeometry(d,E)}a.addEdge(d,v,s,e)}finally{l.endUpdate()}a.setSelectionCells([e,d]),a.scrollCellToVisible(e)}},mxDefaultToolbar.prototype.installDropHandler=function(e,i){var s=document.createElement("img");s.setAttribute("src",e.getAttribute("src"));var a=mxUtils.bind(this,function(l){s.style.width=2*e.offsetWidth+"px",s.style.height=2*e.offsetHeight+"px",mxUtils.makeDraggable(e,this.editor.graph,i,s),mxEvent.removeListener(s,"load",a)});mxClient.IS_IE?a():mxEvent.addListener(s,"load",a)},mxDefaultToolbar.prototype.destroy=function(){null!=this.resetHandler&&(this.editor.graph.removeListener("dblclick",this.resetHandler),this.editor.removeListener("escape",this.resetHandler),this.resetHandler=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null)},__mxOutput.mxDefaultToolbar=void 0!==mxDefaultToolbar?mxDefaultToolbar:void 0,mxLoadResources?mxResources.add(mxClient.basePath+"/resources/editor"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/editor"),mxEditor.prototype=new mxEventSource,mxEditor.prototype.constructor=mxEditor,mxEditor.prototype.askZoomResource="none"!=mxClient.language?"askZoom":"",mxEditor.prototype.lastSavedResource="none"!=mxClient.language?"lastSaved":"",mxEditor.prototype.currentFileResource="none"!=mxClient.language?"currentFile":"",mxEditor.prototype.propertiesResource="none"!=mxClient.language?"properties":"",mxEditor.prototype.tasksResource="none"!=mxClient.language?"tasks":"",mxEditor.prototype.helpResource="none"!=mxClient.language?"help":"",mxEditor.prototype.outlineResource="none"!=mxClient.language?"outline":"",mxEditor.prototype.outline=null,mxEditor.prototype.graph=null,mxEditor.prototype.graphRenderHint=null,mxEditor.prototype.toolbar=null,mxEditor.prototype.status=null,mxEditor.prototype.popupHandler=null,mxEditor.prototype.undoManager=null,mxEditor.prototype.keyHandler=null,mxEditor.prototype.actions=null,mxEditor.prototype.dblClickAction="edit",mxEditor.prototype.swimlaneRequired=!1,mxEditor.prototype.disableContextMenu=!0,mxEditor.prototype.insertFunction=null,mxEditor.prototype.forcedInserting=!1,mxEditor.prototype.templates=null,mxEditor.prototype.defaultEdge=null,mxEditor.prototype.defaultEdgeStyle=null,mxEditor.prototype.defaultGroup=null,mxEditor.prototype.groupBorderSize=null,mxEditor.prototype.filename=null,mxEditor.prototype.linefeed="&#xa;",mxEditor.prototype.postParameterName="xml",mxEditor.prototype.escapePostData=!0,mxEditor.prototype.urlPost=null,mxEditor.prototype.urlImage=null,mxEditor.prototype.horizontalFlow=!1,mxEditor.prototype.layoutDiagram=!1,mxEditor.prototype.swimlaneSpacing=0,mxEditor.prototype.maintainSwimlanes=!1,mxEditor.prototype.layoutSwimlanes=!1,mxEditor.prototype.cycleAttributeValues=null,mxEditor.prototype.cycleAttributeIndex=0,mxEditor.prototype.cycleAttributeName="fillColor",mxEditor.prototype.tasks=null,mxEditor.prototype.tasksWindowImage=null,mxEditor.prototype.tasksTop=20,mxEditor.prototype.help=null,mxEditor.prototype.helpWindowImage=null,mxEditor.prototype.urlHelp=null,mxEditor.prototype.helpWidth=300,mxEditor.prototype.helpHeight=260,mxEditor.prototype.propertiesWidth=240,mxEditor.prototype.propertiesHeight=null,mxEditor.prototype.movePropertiesDialog=!1,mxEditor.prototype.validating=!1,mxEditor.prototype.modified=!1,mxEditor.prototype.isModified=function(){return this.modified},mxEditor.prototype.setModified=function(e){this.modified=e},mxEditor.prototype.addActions=function(){this.addAction("save",function(e){e.save()}),this.addAction("print",function(e){new mxPrintPreview(e.graph,1).open()}),this.addAction("show",function(e){mxUtils.show(e.graph,null,10,10)}),this.addAction("exportImage",function(e){var i=e.getUrlImage();if(null==i||mxClient.IS_LOCAL)e.execute("show");else{var s=mxUtils.getViewXml(e.graph,1),a=mxUtils.getXml(s,"\n");mxUtils.submit(i,e.postParameterName+"="+encodeURIComponent(a),document,"_blank")}}),this.addAction("refresh",function(e){e.graph.refresh()}),this.addAction("cut",function(e){e.graph.isEnabled()&&mxClipboard.cut(e.graph)}),this.addAction("copy",function(e){e.graph.isEnabled()&&mxClipboard.copy(e.graph)}),this.addAction("paste",function(e){e.graph.isEnabled()&&mxClipboard.paste(e.graph)}),this.addAction("delete",function(e){e.graph.isEnabled()&&e.graph.removeCells()}),this.addAction("group",function(e){e.graph.isEnabled()&&e.graph.setSelectionCell(e.groupCells())}),this.addAction("ungroup",function(e){e.graph.isEnabled()&&e.graph.setSelectionCells(e.graph.ungroupCells())}),this.addAction("removeFromParent",function(e){e.graph.isEnabled()&&e.graph.removeCellsFromParent()}),this.addAction("undo",function(e){e.graph.isEnabled()&&e.undo()}),this.addAction("redo",function(e){e.graph.isEnabled()&&e.redo()}),this.addAction("zoomIn",function(e){e.graph.zoomIn()}),this.addAction("zoomOut",function(e){e.graph.zoomOut()}),this.addAction("actualSize",function(e){e.graph.zoomActual()}),this.addAction("fit",function(e){e.graph.fit()}),this.addAction("showProperties",function(e,i){e.showProperties(i)}),this.addAction("selectAll",function(e){e.graph.isEnabled()&&e.graph.selectAll()}),this.addAction("selectNone",function(e){e.graph.isEnabled()&&e.graph.clearSelection()}),this.addAction("selectVertices",function(e){e.graph.isEnabled()&&e.graph.selectVertices()}),this.addAction("selectEdges",function(e){e.graph.isEnabled()&&e.graph.selectEdges()}),this.addAction("edit",function(e,i){e.graph.isEnabled()&&e.graph.isCellEditable(i)&&e.graph.startEditingAtCell(i)}),this.addAction("toBack",function(e,i){e.graph.isEnabled()&&e.graph.orderCells(!0)}),this.addAction("toFront",function(e,i){e.graph.isEnabled()&&e.graph.orderCells(!1)}),this.addAction("enterGroup",function(e,i){e.graph.enterGroup(i)}),this.addAction("exitGroup",function(e){e.graph.exitGroup()}),this.addAction("home",function(e){e.graph.home()}),this.addAction("selectPrevious",function(e){e.graph.isEnabled()&&e.graph.selectPreviousCell()}),this.addAction("selectNext",function(e){e.graph.isEnabled()&&e.graph.selectNextCell()}),this.addAction("selectParent",function(e){e.graph.isEnabled()&&e.graph.selectParentCell()}),this.addAction("selectChild",function(e){e.graph.isEnabled()&&e.graph.selectChildCell()}),this.addAction("collapse",function(e){e.graph.isEnabled()&&e.graph.foldCells(!0)}),this.addAction("collapseAll",function(e){if(e.graph.isEnabled()){var i=e.graph.getChildVertices();e.graph.foldCells(!0,!1,i)}}),this.addAction("expand",function(e){e.graph.isEnabled()&&e.graph.foldCells(!1)}),this.addAction("expandAll",function(e){if(e.graph.isEnabled()){var i=e.graph.getChildVertices();e.graph.foldCells(!1,!1,i)}}),this.addAction("bold",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_BOLD)}),this.addAction("italic",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_ITALIC)}),this.addAction("underline",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_UNDERLINE)}),this.addAction("alignCellsLeft",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_LEFT)}),this.addAction("alignCellsCenter",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_CENTER)}),this.addAction("alignCellsRight",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_RIGHT)}),this.addAction("alignCellsTop",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_TOP)}),this.addAction("alignCellsMiddle",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_MIDDLE)}),this.addAction("alignCellsBottom",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_BOTTOM)}),this.addAction("alignFontLeft",function(e){e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT)}),this.addAction("alignFontCenter",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER)}),this.addAction("alignFontRight",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_RIGHT)}),this.addAction("alignFontTop",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_TOP)}),this.addAction("alignFontMiddle",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE)}),this.addAction("alignFontBottom",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_BOTTOM)}),this.addAction("zoom",function(e){var i=100*e.graph.getView().scale,s=parseFloat(mxUtils.prompt(mxResources.get(e.askZoomResource)||e.askZoomResource,i))/100;isNaN(s)||e.graph.getView().setScale(s)}),this.addAction("toggleTasks",function(e){null!=e.tasks?e.tasks.setVisible(!e.tasks.isVisible()):e.showTasks()}),this.addAction("toggleHelp",function(e){null!=e.help?e.help.setVisible(!e.help.isVisible()):e.showHelp()}),this.addAction("toggleOutline",function(e){null==e.outline?e.showOutline():e.outline.setVisible(!e.outline.isVisible())}),this.addAction("toggleConsole",function(e){mxLog.setVisible(!mxLog.isVisible())})},mxEditor.prototype.configure=function(e){null!=e&&(new mxCodec(e.ownerDocument).decode(e,this),this.resetHistory())},mxEditor.prototype.resetFirstTime=function(){document.cookie="mxgraph=seen; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/"},mxEditor.prototype.resetHistory=function(){this.lastSnapshot=(new Date).getTime(),this.undoManager.clear(),this.ignoredChanges=0,this.setModified(!1)},mxEditor.prototype.addAction=function(e,i){this.actions[e]=i},mxEditor.prototype.execute=function(e,i,s){var a=this.actions[e];if(null!=a)try{var l=arguments;l[0]=this,a.apply(this,l)}catch(d){throw mxUtils.error("Cannot execute "+e+": "+d.message,280,!0),d}else mxUtils.error("Cannot find action "+e,280,!0)},mxEditor.prototype.addTemplate=function(e,i){this.templates[e]=i},mxEditor.prototype.getTemplate=function(e){return this.templates[e]},mxEditor.prototype.createGraph=function(){var e=new mxGraph(null,null,this.graphRenderHint);return e.setTooltips(!0),e.setPanning(!0),this.installDblClickHandler(e),this.installUndoHandler(e),this.installDrillHandler(e),this.installChangeHandler(e),this.installInsertHandler(e),e.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(i,s,a){return this.createPopupMenu(i,s,a)}),e.connectionHandler.factoryMethod=mxUtils.bind(this,function(i,s){return this.createEdge(i,s)}),this.createSwimlaneManager(e),this.createLayoutManager(e),e},mxEditor.prototype.createSwimlaneManager=function(e){var i=new mxSwimlaneManager(e,!1);return i.isHorizontal=mxUtils.bind(this,function(){return this.horizontalFlow}),i.isEnabled=mxUtils.bind(this,function(){return this.maintainSwimlanes}),i},mxEditor.prototype.createLayoutManager=function(e){var i=new mxLayoutManager(e),s=this;return i.getLayout=function(a){var l=null,d=s.graph.getModel();return null!=d.getParent(a)&&(s.layoutSwimlanes&&e.isSwimlane(a)?(null==s.swimlaneLayout&&(s.swimlaneLayout=s.createSwimlaneLayout()),l=s.swimlaneLayout):s.layoutDiagram&&(e.isValidRoot(a)||null==d.getParent(d.getParent(a)))&&(null==s.diagramLayout&&(s.diagramLayout=s.createDiagramLayout()),l=s.diagramLayout)),l},i},mxEditor.prototype.setGraphContainer=function(e){null==this.graph.container&&(this.graph.init(e),this.rubberband=new mxRubberband(this.graph),this.disableContextMenu&&mxEvent.disableContextMenu(e),mxClient.IS_QUIRKS&&new mxDivResizer(e))},mxEditor.prototype.installDblClickHandler=function(e){e.addListener(mxEvent.DOUBLE_CLICK,mxUtils.bind(this,function(i,s){var a=s.getProperty("cell");null!=a&&e.isEnabled()&&null!=this.dblClickAction&&(this.execute(this.dblClickAction,a),s.consume())}))},mxEditor.prototype.installUndoHandler=function(e){var i=mxUtils.bind(this,function(a,l){var d=l.getProperty("edit");this.undoManager.undoableEditHappened(d)});e.getModel().addListener(mxEvent.UNDO,i),e.getView().addListener(mxEvent.UNDO,i);var s=function(a,l){var d=l.getProperty("edit").changes;e.setSelectionCells(e.getSelectionCellsForChanges(d))};this.undoManager.addListener(mxEvent.UNDO,s),this.undoManager.addListener(mxEvent.REDO,s)},mxEditor.prototype.installDrillHandler=function(e){var i=mxUtils.bind(this,function(s){this.fireEvent(new mxEventObject(mxEvent.ROOT))});e.getView().addListener(mxEvent.DOWN,i),e.getView().addListener(mxEvent.UP,i)},mxEditor.prototype.installChangeHandler=function(e){var i=mxUtils.bind(this,function(s,a){this.setModified(!0),1==this.validating&&e.validateGraph();for(var l=a.getProperty("edit").changes,d=0;d<l.length;d++){var c=l[d];if(c instanceof mxRootChange||c instanceof mxValueChange&&c.cell==this.graph.model.root||c instanceof mxCellAttributeChange&&c.cell==this.graph.model.root){this.fireEvent(new mxEventObject(mxEvent.ROOT));break}}});e.getModel().addListener(mxEvent.CHANGE,i)},mxEditor.prototype.installInsertHandler=function(e){var i=this;e.addMouseListener({mouseDown:function(a,l){null!=i.insertFunction&&!l.isPopupTrigger()&&(i.forcedInserting||null==l.getState())&&(i.graph.clearSelection(),i.insertFunction(l.getEvent(),l.getCell()),this.isActive=!0,l.consume())},mouseMove:function(a,l){this.isActive&&l.consume()},mouseUp:function(a,l){this.isActive&&(this.isActive=!1,l.consume())}})},mxEditor.prototype.createDiagramLayout=function(){var e=this.graph.gridSize,i=new mxStackLayout(this.graph,!this.horizontalFlow,this.swimlaneSpacing,2*e,2*e);return i.isVertexIgnored=function(s){return!i.graph.isSwimlane(s)},i},mxEditor.prototype.createSwimlaneLayout=function(){return new mxCompactTreeLayout(this.graph,this.horizontalFlow)},mxEditor.prototype.createToolbar=function(){return new mxDefaultToolbar(null,this)},mxEditor.prototype.setToolbarContainer=function(e){this.toolbar.init(e),mxClient.IS_QUIRKS&&new mxDivResizer(e)},mxEditor.prototype.setStatusContainer=function(e){null==this.status&&(this.status=e,this.addListener(mxEvent.SAVE,mxUtils.bind(this,function(){var i=(new Date).toLocaleString();this.setStatus((mxResources.get(this.lastSavedResource)||this.lastSavedResource)+": "+i)})),this.addListener(mxEvent.OPEN,mxUtils.bind(this,function(){this.setStatus((mxResources.get(this.currentFileResource)||this.currentFileResource)+": "+this.filename)})),mxClient.IS_QUIRKS&&new mxDivResizer(e))},mxEditor.prototype.setStatus=function(e){null!=this.status&&null!=e&&(this.status.innerHTML=e)},mxEditor.prototype.setTitleContainer=function(e){this.addListener(mxEvent.ROOT,mxUtils.bind(this,function(i){e.innerHTML=this.getTitle()})),mxClient.IS_QUIRKS&&new mxDivResizer(e)},mxEditor.prototype.treeLayout=function(e,i){null!=e&&new mxCompactTreeLayout(this.graph,i).execute(e)},mxEditor.prototype.getTitle=function(){for(var e="",i=this.graph,s=i.getCurrentRoot();null!=s&&null!=i.getModel().getParent(i.getModel().getParent(s));)i.isValidRoot(s)&&(e=" > "+i.convertValueToString(s)+e),s=i.getModel().getParent(s);return this.getRootTitle()+e},mxEditor.prototype.getRootTitle=function(){var e=this.graph.getModel().getRoot();return this.graph.convertValueToString(e)},mxEditor.prototype.undo=function(){this.undoManager.undo()},mxEditor.prototype.redo=function(){this.undoManager.redo()},mxEditor.prototype.groupCells=function(){var e=null!=this.groupBorderSize?this.groupBorderSize:this.graph.gridSize;return this.graph.groupCells(this.createGroup(),e)},mxEditor.prototype.createGroup=function(){return this.graph.getModel().cloneCell(this.defaultGroup)},mxEditor.prototype.open=function(e){if(null!=e){var i=mxUtils.load(e).getXml();this.readGraphModel(i.documentElement),this.filename=e,this.fireEvent(new mxEventObject(mxEvent.OPEN,"filename",e))}},mxEditor.prototype.readGraphModel=function(e){new mxCodec(e.ownerDocument).decode(e,this.graph.getModel()),this.resetHistory()},mxEditor.prototype.save=function(e,i){if(null!=(e=e||this.getUrlPost())&&e.length>0){var s=this.writeGraphModel(i);this.postDiagram(e,s),this.setModified(!1)}this.fireEvent(new mxEventObject(mxEvent.SAVE,"url",e))},mxEditor.prototype.postDiagram=function(e,i){this.escapePostData&&(i=encodeURIComponent(i)),mxUtils.post(e,this.postParameterName+"="+i,mxUtils.bind(this,function(s){this.fireEvent(new mxEventObject(mxEvent.POST,"request",s,"url",e,"data",i))}))},mxEditor.prototype.writeGraphModel=function(e){e=null!=e?e:this.linefeed;var s=(new mxCodec).encode(this.graph.getModel());return mxUtils.getXml(s,e)},mxEditor.prototype.getUrlPost=function(){return this.urlPost},mxEditor.prototype.getUrlImage=function(){return this.urlImage},mxEditor.prototype.swapStyles=function(e,i){var s=this.graph.getStylesheet().styles[i];this.graph.getView().getStylesheet().putCellStyle(i,this.graph.getStylesheet().styles[e]),this.graph.getStylesheet().putCellStyle(e,s),this.graph.refresh()},mxEditor.prototype.showProperties=function(e){if(null==(e=e||this.graph.getSelectionCell())&&null==(e=this.graph.getCurrentRoot())&&(e=this.graph.getModel().getRoot()),null!=e){this.graph.stopEditing(!0);var i=mxUtils.getOffset(this.graph.container),s=i.x+10,a=i.y;if(null==this.properties||this.movePropertiesDialog){var l=this.graph.getCellBounds(e);null!=l&&(s+=l.x+Math.min(200,l.width),a+=l.y)}else s=this.properties.getX(),a=this.properties.getY();this.hideProperties();var d=this.createProperties(e);null!=d&&(this.properties=new mxWindow(mxResources.get(this.propertiesResource)||this.propertiesResource,d,s,a,this.propertiesWidth,this.propertiesHeight,!1),this.properties.setVisible(!0))}},mxEditor.prototype.isPropertiesVisible=function(){return null!=this.properties},mxEditor.prototype.createProperties=function(e){var i=this.graph.getModel(),s=i.getValue(e);if(mxUtils.isNode(s)){var a=new mxForm("properties");a.addText("ID",e.getId()).setAttribute("readonly","true");var d=null,c=null,f=null,m=null,x=null;i.isVertex(e)&&null!=(d=i.getGeometry(e))&&(c=a.addText("top",d.y),f=a.addText("left",d.x),m=a.addText("width",d.width),x=a.addText("height",d.height));for(var v=i.getStyle(e),E=a.addText("Style",v||""),S=s.attributes,b=[],T=0;T<S.length;T++)b[T]=a.addTextarea(S[T].nodeName,S[T].value,"label"==S[T].nodeName?4:2);var I=mxUtils.bind(this,function(){this.hideProperties(),i.beginUpdate();try{null!=d&&((d=d.clone()).x=parseFloat(f.value),d.y=parseFloat(c.value),d.width=parseFloat(m.value),d.height=parseFloat(x.value),i.setGeometry(e,d)),i.setStyle(e,E.value.length>0?E.value:null);for(var N=0;N<S.length;N++){var k=new mxCellAttributeChange(e,S[N].nodeName,b[N].value);i.execute(k)}this.graph.isAutoSizeCell(e)&&this.graph.updateCellSize(e)}finally{i.endUpdate()}}),O=mxUtils.bind(this,function(){this.hideProperties()});return a.addButtons(I,O),a.table}return null},mxEditor.prototype.hideProperties=function(){null!=this.properties&&(this.properties.destroy(),this.properties=null)},mxEditor.prototype.showTasks=function(){if(null==this.tasks){var e=document.createElement("div");e.style.padding="4px",e.style.paddingLeft="20px";var i=document.body.clientWidth,s=new mxWindow(mxResources.get(this.tasksResource)||this.tasksResource,e,i-220,this.tasksTop,200);s.setClosable(!0),s.destroyOnClose=!1;var a=mxUtils.bind(this,function(l){mxEvent.release(e),e.innerHTML="",this.createTasks(e)});this.graph.getModel().addListener(mxEvent.CHANGE,a),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,a),this.graph.addListener(mxEvent.ROOT,a),null!=this.tasksWindowImage&&s.setImage(this.tasksWindowImage),this.tasks=s,this.createTasks(e)}this.tasks.setVisible(!0)},mxEditor.prototype.refreshTasks=function(e){null!=this.tasks&&(mxEvent.release(e=this.tasks.content),e.innerHTML="",this.createTasks(e))},mxEditor.prototype.createTasks=function(e){},mxEditor.prototype.showHelp=function(e){if(null==this.help){var i=document.createElement("iframe");i.setAttribute("src",mxResources.get("urlHelp")||this.urlHelp),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("frameBorder","0"),i.style.backgroundColor="white";var s=document.body.clientWidth,a=document.body.clientHeight||document.documentElement.clientHeight,l=new mxWindow(mxResources.get(this.helpResource)||this.helpResource,i,(s-this.helpWidth)/2,(a-this.helpHeight)/3,this.helpWidth,this.helpHeight);if(l.setMaximizable(!0),l.setClosable(!0),l.destroyOnClose=!1,l.setResizable(!0),null!=this.helpWindowImage&&l.setImage(this.helpWindowImage),mxClient.IS_NS){var d=function(c){i.setAttribute("height",l.div.offsetHeight-26+"px")};l.addListener(mxEvent.RESIZE_END,d),l.addListener(mxEvent.MAXIMIZE,d),l.addListener(mxEvent.NORMALIZE,d),l.addListener(mxEvent.SHOW,d)}this.help=l}this.help.setVisible(!0)},mxEditor.prototype.showOutline=function(){if(null==this.outline){var i=document.createElement("div");i.style.overflow="hidden",i.style.position="relative",i.style.width="100%",i.style.height="100%",i.style.background="white",i.style.cursor="move",8==document.documentMode&&(i.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=100)");var s=new mxWindow(mxResources.get(this.outlineResource)||this.outlineResource,i,600,480,200,200,!1),a=new mxOutline(this.graph,i);s.setClosable(!0),s.setResizable(!0),s.destroyOnClose=!1,s.addListener(mxEvent.RESIZE_END,function(){a.update()}),this.outline=s,this.outline.outline=a}this.outline.setVisible(!0),this.outline.outline.update(!0)},mxEditor.prototype.setMode=function(e){"select"==e?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!1)):"connect"==e?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!0)):"pan"==e&&(this.graph.panningHandler.useLeftButtonForPanning=!0,this.graph.setConnectable(!1))},mxEditor.prototype.createPopupMenu=function(e,i,s){this.popupHandler.createMenu(this,e,i,s)},mxEditor.prototype.createEdge=function(e,i){var s=null;if(null!=this.defaultEdge)s=this.graph.getModel().cloneCell(this.defaultEdge);else{(s=new mxCell("")).setEdge(!0);var l=new mxGeometry;l.relative=!0,s.setGeometry(l)}var d=this.getEdgeStyle();return null!=d&&s.setStyle(d),s},mxEditor.prototype.getEdgeStyle=function(){return this.defaultEdgeStyle},mxEditor.prototype.consumeCycleAttribute=function(e){return null!=this.cycleAttributeValues&&this.cycleAttributeValues.length>0&&this.graph.isSwimlane(e)?this.cycleAttributeValues[this.cycleAttributeIndex++%this.cycleAttributeValues.length]:null},mxEditor.prototype.cycleAttribute=function(e){if(null!=this.cycleAttributeName){var i=this.consumeCycleAttribute(e);null!=i&&e.setStyle(e.getStyle()+";"+this.cycleAttributeName+"="+i)}},mxEditor.prototype.addVertex=function(e,i,s,a){for(var l=this.graph.getModel();null!=e&&!this.graph.isValidDropTarget(e);)e=l.getParent(e);e=null!=e?e:this.graph.getSwimlaneAt(s,a);var d=this.graph.getView().scale,c=l.getGeometry(i),f=l.getGeometry(e);if(this.graph.isSwimlane(i)&&!this.graph.swimlaneNesting)e=null;else{if(null==e&&this.swimlaneRequired)return null;if(null!=e&&null!=f){var m=this.graph.getView().getState(e);if(null!=m){if(s-=m.origin.x*d,a-=m.origin.y*d,this.graph.isConstrainedMoving){var x=c.width,v=c.height,E=m.x+m.width;s+x>E&&(s-=s+x-E),a+v>(E=m.y+m.height)&&(a-=a+v-E)}}else null!=f&&(s-=f.x*d,a-=f.y*d)}}(c=c.clone()).x=this.graph.snap(s/d-this.graph.getView().translate.x-this.graph.gridSize/2),c.y=this.graph.snap(a/d-this.graph.getView().translate.y-this.graph.gridSize/2),i.setGeometry(c),null==e&&(e=this.graph.getDefaultParent()),this.cycleAttribute(i),this.fireEvent(new mxEventObject(mxEvent.BEFORE_ADD_VERTEX,"vertex",i,"parent",e)),l.beginUpdate();try{null!=(i=this.graph.addCell(i,e))&&(this.graph.constrainChild(i),this.fireEvent(new mxEventObject(mxEvent.ADD_VERTEX,"vertex",i)))}finally{l.endUpdate()}return null!=i&&(this.graph.setSelectionCell(i),this.graph.scrollCellToVisible(i),this.fireEvent(new mxEventObject(mxEvent.AFTER_ADD_VERTEX,"vertex",i))),i},mxEditor.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tasks&&this.tasks.destroy(),null!=this.outline&&this.outline.destroy(),null!=this.properties&&this.properties.destroy(),null!=this.keyHandler&&this.keyHandler.destroy(),null!=this.rubberband&&this.rubberband.destroy(),null!=this.toolbar&&this.toolbar.destroy(),null!=this.graph&&this.graph.destroy(),this.status=null,this.templates=null)},__mxOutput.mxEditor=void 0!==mxEditor?mxEditor:void 0;var mxCodecRegistry={codecs:[],aliases:[],register:function(e){if(null!=e){var i=e.getName();mxCodecRegistry.codecs[i]=e;var s=mxUtils.getFunctionName(e.template.constructor);s!=i&&mxCodecRegistry.addAlias(s,i)}return e},addAlias:function(e,i){mxCodecRegistry.aliases[e]=i},getCodec:function(e){var i=null;if(null!=e){var s=mxUtils.getFunctionName(e),a=mxCodecRegistry.aliases[s];if(null!=a&&(s=a),null==(i=mxCodecRegistry.codecs[s]))try{i=new mxObjectCodec(new e),mxCodecRegistry.register(i)}catch(l){}}return i}};function mxCodec(e){this.document=e||mxUtils.createXmlDocument(),this.objects=[]}function mxObjectCodec(e,i,s,a){for(var l in this.template=e,this.exclude=null!=i?i:[],this.idrefs=null!=s?s:[],this.mapping=null!=a?a:[],this.reverse=new Object,this.mapping)this.reverse[this.mapping[l]]=l}__mxOutput.mxCodecRegistry=void 0!==mxCodecRegistry?mxCodecRegistry:void 0,mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(e,i){return this.objects[e]=i,i},mxCodec.prototype.getObject=function(e){var i=null;if(null!=e&&null==(i=this.objects[e])&&null==(i=this.lookup(e))){var s=this.getElementById(e);null!=s&&(i=this.decode(s))}return i},mxCodec.prototype.lookup=function(e){return null},mxCodec.prototype.getElementById=function(e){return this.updateElements(),this.elements[e]},mxCodec.prototype.updateElements=function(){null==this.elements&&(this.elements=new Object,null!=this.document.documentElement&&this.addElement(this.document.documentElement))},mxCodec.prototype.addElement=function(e){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var i=e.getAttribute("id");if(null!=i)if(null==this.elements[i])this.elements[i]=e;else if(this.elements[i]!=e)throw new Error(i+": Duplicate ID")}for(e=e.firstChild;null!=e;)this.addElement(e),e=e.nextSibling},mxCodec.prototype.getId=function(e){var i=null;return null!=e&&null==(i=this.reference(e))&&e instanceof mxCell&&null==(i=e.getId())&&0==(i=mxCellPath.create(e)).length&&(i="root"),i},mxCodec.prototype.reference=function(e){return null},mxCodec.prototype.encode=function(e){var i=null;if(null!=e&&null!=e.constructor){var s=mxCodecRegistry.getCodec(e.constructor);null!=s?i=s.encode(this,e):mxUtils.isNode(e)?i=mxUtils.importNode(this.document,e,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(e.constructor))}return i},mxCodec.prototype.decode=function(e,i){this.updateElements();var s=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var a=null;try{a=window[e.nodeName]}catch(d){}var l=mxCodecRegistry.getCodec(a);null!=l?s=l.decode(this,e,i):(s=e.cloneNode(!0)).removeAttribute("as")}return s},mxCodec.prototype.encodeCell=function(e,i,s){if(i.appendChild(this.encode(e)),null==s||s)for(var a=e.getChildCount(),l=0;l<a;l++)this.encodeCell(e.getChildAt(l),i)},mxCodec.prototype.isCellCodec=function(e){return null!=e&&"function"==typeof e.isCellCodec&&e.isCellCodec()},mxCodec.prototype.decodeCell=function(e,i){i=null==i||i;var s=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var a=mxCodecRegistry.getCodec(e.nodeName);if(!this.isCellCodec(a))for(var l=e.firstChild;null!=l&&!this.isCellCodec(a);)a=mxCodecRegistry.getCodec(l.nodeName),l=l.nextSibling;this.isCellCodec(a)||(a=mxCodecRegistry.getCodec(mxCell)),s=a.decode(this,e),i&&this.insertIntoGraph(s)}return s},mxCodec.prototype.insertIntoGraph=function(e){var i=e.parent,s=e.getTerminal(!0),a=e.getTerminal(!1);if(e.setTerminal(null,!1),e.setTerminal(null,!0),e.parent=null,null!=i){if(i==e)throw new Error(i.id+": Self Reference");i.insert(e)}null!=s&&s.insertEdge(e,!0),null!=a&&a.insertEdge(e,!1)},mxCodec.prototype.setAttribute=function(e,i,s){null!=i&&null!=s&&e.setAttribute(i,s)},__mxOutput.mxCodec=void 0!==mxCodec?mxCodec:void 0,mxObjectCodec.allowEval=!1,mxObjectCodec.prototype.template=null,mxObjectCodec.prototype.exclude=null,mxObjectCodec.prototype.idrefs=null,mxObjectCodec.prototype.mapping=null,mxObjectCodec.prototype.reverse=null,mxObjectCodec.prototype.getName=function(){return mxUtils.getFunctionName(this.template.constructor)},mxObjectCodec.prototype.cloneTemplate=function(){return new this.template.constructor},mxObjectCodec.prototype.getFieldName=function(e){if(null!=e){var i=this.reverse[e];null!=i&&(e=i)}return e},mxObjectCodec.prototype.getAttributeName=function(e){if(null!=e){var i=this.mapping[e];null!=i&&(e=i)}return e},mxObjectCodec.prototype.isExcluded=function(e,i,s,a){return i==mxObjectIdentity.FIELD_NAME||mxUtils.indexOf(this.exclude,i)>=0},mxObjectCodec.prototype.isReference=function(e,i,s,a){return mxUtils.indexOf(this.idrefs,i)>=0},mxObjectCodec.prototype.encode=function(e,i){var s=e.document.createElement(this.getName());return i=this.beforeEncode(e,i,s),this.encodeObject(e,i,s),this.afterEncode(e,i,s)},mxObjectCodec.prototype.encodeObject=function(e,i,s){for(var a in e.setAttribute(s,"id",e.getId(i)),i){var l=a,d=i[l];null!=d&&!this.isExcluded(i,l,d,!0)&&(mxUtils.isInteger(l)&&(l=null),this.encodeValue(e,i,l,d,s))}},mxObjectCodec.prototype.encodeValue=function(e,i,s,a,l){if(null!=a){if(this.isReference(i,s,a,!0)){var d=e.getId(a);if(null==d)return void mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+s+"="+a);a=d}(null==s||e.encodeDefaults||this.template[s]!=a)&&(s=this.getAttributeName(s),this.writeAttribute(e,i,s,a,l))}},mxObjectCodec.prototype.writeAttribute=function(e,i,s,a,l){"object"!=typeof a?this.writePrimitiveAttribute(e,i,s,a,l):this.writeComplexAttribute(e,i,s,a,l)},mxObjectCodec.prototype.writePrimitiveAttribute=function(e,i,s,a,l){if(a=this.convertAttributeToXml(e,i,s,a,l),null==s){var d=e.document.createElement("add");"function"==typeof a?d.appendChild(e.document.createTextNode(a)):e.setAttribute(d,"value",a),l.appendChild(d)}else"function"!=typeof a&&e.setAttribute(l,s,a)},mxObjectCodec.prototype.writeComplexAttribute=function(e,i,s,a,l){var d=e.encode(a);null!=d?(null!=s&&d.setAttribute("as",s),l.appendChild(d)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+s+": "+a)},mxObjectCodec.prototype.convertAttributeToXml=function(e,i,s,a){return this.isBooleanAttribute(e,i,s,a)&&(a=1==a?"1":"0"),a},mxObjectCodec.prototype.isBooleanAttribute=function(e,i,s,a){return void 0===a.length&&(1==a||0==a)},mxObjectCodec.prototype.convertAttributeFromXml=function(e,i,s){var a=i.value;return this.isNumericAttribute(e,i,s)&&(a=parseFloat(a),(isNaN(a)||!isFinite(a))&&(a=0)),a},mxObjectCodec.prototype.isNumericAttribute=function(e,i,s){return s.constructor==mxGeometry&&("x"==i.name||"y"==i.name||"width"==i.name||"height"==i.name)||s.constructor==mxPoint&&("x"==i.name||"y"==i.name)||mxUtils.isNumeric(i.value)},mxObjectCodec.prototype.beforeEncode=function(e,i,s){return i},mxObjectCodec.prototype.afterEncode=function(e,i,s){return s},mxObjectCodec.prototype.decode=function(e,i,s){var a=i.getAttribute("id"),l=e.objects[a];return null==l&&(l=s||this.cloneTemplate(),null!=a&&e.putObject(a,l)),i=this.beforeDecode(e,i,l),this.decodeNode(e,i,l),this.afterDecode(e,i,l)},mxObjectCodec.prototype.decodeNode=function(e,i,s){null!=i&&(this.decodeAttributes(e,i,s),this.decodeChildren(e,i,s))},mxObjectCodec.prototype.decodeAttributes=function(e,i,s){var a=i.attributes;if(null!=a)for(var l=0;l<a.length;l++)this.decodeAttribute(e,a[l],s)},mxObjectCodec.prototype.isIgnoredAttribute=function(e,i,s){return"as"==i.nodeName||"id"==i.nodeName},mxObjectCodec.prototype.decodeAttribute=function(e,i,s){if(!this.isIgnoredAttribute(e,i,s)){var a=i.nodeName,l=this.convertAttributeFromXml(e,i,s),d=this.getFieldName(a);if(this.isReference(s,d,l,!1)){var c=e.getObject(l);if(null==c)return void mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+a+"="+l);l=c}this.isExcluded(s,a,l,!1)||(s[a]=l)}},mxObjectCodec.prototype.decodeChildren=function(e,i,s){for(var a=i.firstChild;null!=a;){var l=a.nextSibling;a.nodeType==mxConstants.NODETYPE_ELEMENT&&!this.processInclude(e,a,s)&&this.decodeChild(e,a,s),a=l}},mxObjectCodec.prototype.decodeChild=function(e,i,s){var a=this.getFieldName(i.getAttribute("as"));if(null==a||!this.isExcluded(s,a,i,!1)){var l=this.getFieldTemplate(s,a,i),d=null;"add"==i.nodeName?null==(d=i.getAttribute("value"))&&mxObjectCodec.allowEval&&(d=mxUtils.eval(mxUtils.getTextContent(i))):d=e.decode(i,l);try{this.addObjectValue(s,a,d,l)}catch(c){throw new Error(c.message+" for "+i.nodeName)}}},mxObjectCodec.prototype.getFieldTemplate=function(e,i,s){var a=e[i];return a instanceof Array&&a.length>0&&(a=null),a},mxObjectCodec.prototype.addObjectValue=function(e,i,s,a){null!=s&&s!=a&&(null!=i&&i.length>0?e[i]=s:e.push(s))},mxObjectCodec.prototype.processInclude=function(e,i,s){if("include"==i.nodeName){var a=i.getAttribute("name");if(null!=a)try{var l=mxUtils.load(a).getDocumentElement();null!=l&&e.decode(l,s)}catch(d){}return!0}return!1},mxObjectCodec.prototype.beforeDecode=function(e,i,s){return i},mxObjectCodec.prototype.afterDecode=function(e,i,s){return s},__mxOutput.mxObjectCodec=void 0!==mxObjectCodec?mxObjectCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"]);return e.isCellCodec=function(){return!0},e.isNumericAttribute=function(i,s,a){return"value"!==s.nodeName&&mxObjectCodec.prototype.isNumericAttribute.apply(this,arguments)},e.isExcluded=function(i,s,a,l){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||l&&"value"==s&&a.nodeType==mxConstants.NODETYPE_ELEMENT},e.afterEncode=function(i,s,a){if(null!=s.value&&s.value.nodeType==mxConstants.NODETYPE_ELEMENT){var l=a;(a=mxUtils.importNode(i.document,s.value,!0)).appendChild(l);var d=l.getAttribute("id");a.setAttribute("id",d),l.removeAttribute("id")}return a},e.beforeDecode=function(i,s,a){var l=s.cloneNode(!0),d=this.getName();if(s.nodeName!=d){var c=s.getElementsByTagName(d)[0];null!=c&&c.parentNode==s?(mxUtils.removeWhitespace(c,!0),mxUtils.removeWhitespace(c,!1),c.parentNode.removeChild(c),l=c):l=null,a.value=s.cloneNode(!0);var f=a.value.getAttribute("id");null!=f&&(a.setId(f),a.value.removeAttribute("id"))}else a.setId(s.getAttribute("id"));if(null!=l)for(var m=0;m<this.idrefs.length;m++){var x=this.idrefs[m],v=l.getAttribute(x);if(null!=v){l.removeAttribute(x);var E=i.objects[v]||i.lookup(v);if(null==E){var S=i.getElementById(v);null!=S&&(E=(mxCodecRegistry.codecs[S.nodeName]||this).decode(i,S))}a[x]=E}}return l},e}()),__mxOutput.mxCellCodec="undefined"!=typeof mxCellCodec?mxCellCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxGraphModel);return e.encodeObject=function(i,s,a){var l=i.document.createElement("root");i.encodeCell(s.getRoot(),l),a.appendChild(l)},e.decodeChild=function(i,s,a){"root"==s.nodeName?this.decodeRoot(i,s,a):mxObjectCodec.prototype.decodeChild.apply(this,arguments)},e.decodeRoot=function(i,s,a){for(var l=null,d=s.firstChild;null!=d;){var c=i.decodeCell(d);null!=c&&null==c.getParent()&&(l=c),d=d.nextSibling}null!=l&&a.setRoot(l)},e}()),__mxOutput.mxModelCodec="undefined"!=typeof mxModelCodec?mxModelCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxRootChange,["model","previous","root"]);return e.afterEncode=function(i,s,a){return i.encodeCell(s.root,a),a},e.beforeDecode=function(i,s,a){if(null!=s.firstChild&&s.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var l=(s=s.cloneNode(!0)).firstChild;a.root=i.decodeCell(l,!1);var d=l.nextSibling;for(l.parentNode.removeChild(l),l=d;null!=l;)d=l.nextSibling,i.decodeCell(l),l.parentNode.removeChild(l),l=d}return s},e.afterDecode=function(i,s,a){return a.previous=a.root,a},e}()),__mxOutput.mxRootChangeCodec="undefined"!=typeof mxRootChangeCodec?mxRootChangeCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxChildChange,["model","child","previousIndex"],["parent","previous"]);return e.isReference=function(i,s,a,l){return!("child"!=s||l&&!i.model.contains(i.previous))||mxUtils.indexOf(this.idrefs,s)>=0},e.isExcluded=function(i,s,a,l){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||l&&null!=a&&("previous"==s||"parent"==s)&&!i.model.contains(a)},e.afterEncode=function(i,s,a){return this.isReference(s,"child",s.child,!0)?a.setAttribute("child",i.getId(s.child)):i.encodeCell(s.child,a),a},e.beforeDecode=function(i,s,a){if(null!=s.firstChild&&s.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var l=(s=s.cloneNode(!0)).firstChild;a.child=i.decodeCell(l,!1);var d=l.nextSibling;for(l.parentNode.removeChild(l),l=d;null!=l;){if(d=l.nextSibling,l.nodeType==mxConstants.NODETYPE_ELEMENT){var c=l.getAttribute("id");null==i.lookup(c)&&i.decodeCell(l)}l.parentNode.removeChild(l),l=d}}else{var f=s.getAttribute("child");a.child=i.getObject(f)}return s},e.afterDecode=function(i,s,a){return null!=a.child&&(null!=a.child.parent&&null!=a.previous&&a.child.parent!=a.previous&&(a.previous=a.child.parent),a.child.parent=a.previous,a.previous=a.parent,a.previousIndex=a.index),a},e}()),__mxOutput.mxChildChangeCodec="undefined"!=typeof mxChildChangeCodec?mxChildChangeCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxTerminalChange,["model","previous"],["cell","terminal"]);return e.afterDecode=function(i,s,a){return a.previous=a.terminal,a},e}()),__mxOutput.mxTerminalChangeCodec="undefined"!=typeof mxTerminalChangeCodec?mxTerminalChangeCodec:void 0;var mxGenericChangeCodec=function(e,i){var s=new mxObjectCodec(e,["model","previous"],["cell"]);return s.afterDecode=function(a,l,d){return mxUtils.isNode(d.cell)&&(d.cell=a.decodeCell(d.cell,!1)),d.previous=d[i],d},s};mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value")),__mxOutput.mxGenericChangeCodec=void 0!==mxGenericChangeCodec?mxGenericChangeCodec:void 0,mxCodecRegistry.register(new mxObjectCodec(new mxGraph,["graphListeners","eventListeners","view","container","cellRenderer","editor","selection"])),__mxOutput.mxGraphCodec="undefined"!=typeof mxGraphCodec?mxGraphCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxGraphView);return e.encode=function(i,s){return this.encodeCell(i,s,s.graph.getModel().getRoot())},e.encodeCell=function(i,s,a){var l=s.graph.getModel(),d=s.getState(a),c=l.getParent(a);if(null==c||null!=d){var f=l.getChildCount(a),m=s.graph.getCellGeometry(a),x=null;if(c==l.getRoot()?x="layer":null==c?x="graph":l.isEdge(a)?x="edge":f>0&&null!=m?x="group":l.isVertex(a)&&(x="vertex"),null!=x){var v=i.document.createElement(x);if(null!=s.graph.getLabel(a)&&(v.setAttribute("label",s.graph.getLabel(a)),s.graph.isHtmlLabel(a)&&v.setAttribute("html",!0)),null==c){var S=s.getGraphBounds();null!=S&&(v.setAttribute("x",Math.round(S.x)),v.setAttribute("y",Math.round(S.y)),v.setAttribute("width",Math.round(S.width)),v.setAttribute("height",Math.round(S.height))),v.setAttribute("scale",s.scale)}else if(null!=d&&null!=m){for(var b in d.style){var T=d.style[b];"function"==typeof T&&"object"==typeof T&&(T=mxStyleRegistry.getName(T)),null!=T&&"function"!=typeof T&&"object"!=typeof T&&v.setAttribute(b,T)}var D=d.absolutePoints;if(null!=D&&D.length>0){var I=Math.round(D[0].x)+","+Math.round(D[0].y);for(b=1;b<D.length;b++)I+=" "+Math.round(D[b].x)+","+Math.round(D[b].y);v.setAttribute("points",I)}else v.setAttribute("x",Math.round(d.x)),v.setAttribute("y",Math.round(d.y)),v.setAttribute("width",Math.round(d.width)),v.setAttribute("height",Math.round(d.height));var O=d.absoluteOffset;null!=O&&(0!=O.x&&v.setAttribute("dx",Math.round(O.x)),0!=O.y&&v.setAttribute("dy",Math.round(O.y)))}for(b=0;b<f;b++){var N=this.encodeCell(i,s,l.getChildAt(a,b));null!=N&&v.appendChild(N)}}}return v},e}()),__mxOutput.mxGraphViewCodec="undefined"!=typeof mxGraphViewCodec?mxGraphViewCodec:void 0;var mxStylesheetCodec=mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxStylesheet);return e.encode=function(i,s){var a=i.document.createElement(this.getName());for(var l in s.styles){var d=s.styles[l],c=i.document.createElement("add");if(null!=l){for(var f in c.setAttribute("as",l),d){var m=this.getStringValue(f,d[f]);if(null!=m){var x=i.document.createElement("add");x.setAttribute("value",m),x.setAttribute("as",f),c.appendChild(x)}}c.childNodes.length>0&&a.appendChild(c)}}return a},e.getStringValue=function(i,s){var a=typeof s;return"function"==a?s=mxStyleRegistry.getName(s):"object"==a&&(s=null),s},e.decode=function(i,s,a){var l=a||new this.template.constructor,d=s.getAttribute("id");for(null!=d&&(i.objects[d]=l),s=s.firstChild;null!=s;){if(!this.processInclude(i,s,l)&&"add"==s.nodeName){var c=s.getAttribute("as");if(null!=c){var f=s.getAttribute("extend"),m=null!=f?mxUtils.clone(l.styles[f]):null;null==m&&(null!=f&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+f+" not found to extend"),m=new Object);for(var x=s.firstChild;null!=x;){if(x.nodeType==mxConstants.NODETYPE_ELEMENT){var v=x.getAttribute("as");if("add"==x.nodeName){var E=mxUtils.getTextContent(x),S=null;null!=E&&E.length>0&&mxStylesheetCodec.allowEval?S=mxUtils.eval(E):(S=x.getAttribute("value"),mxUtils.isNumeric(S)&&(S=parseFloat(S))),null!=S&&(m[v]=S)}else"remove"==x.nodeName&&delete m[v]}x=x.nextSibling}l.putCellStyle(c,m)}}s=s.nextSibling}return l},e}());mxStylesheetCodec.allowEval=!0,__mxOutput.mxStylesheetCodec=void 0!==mxStylesheetCodec?mxStylesheetCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultKeyHandler);return e.encode=function(i,s){return null},e.decode=function(i,s,a){if(null!=a)for(s=s.firstChild;null!=s;){if(!this.processInclude(i,s,a)&&"add"==s.nodeName){var d=s.getAttribute("as"),c=s.getAttribute("action"),f=s.getAttribute("control");a.bindAction(d,c,f)}s=s.nextSibling}return a},e}()),__mxOutput.mxDefaultKeyHandlerCodec="undefined"!=typeof mxDefaultKeyHandlerCodec?mxDefaultKeyHandlerCodec:void 0;var mxDefaultToolbarCodec=mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultToolbar);return e.encode=function(i,s){return null},e.decode=function(i,s,a){if(null!=a){var l=a.editor;for(s=s.firstChild;null!=s;){if(s.nodeType==mxConstants.NODETYPE_ELEMENT&&!this.processInclude(i,s,a))if("separator"==s.nodeName)a.addSeparator();else if("br"==s.nodeName)a.toolbar.addBreak();else if("hr"==s.nodeName)a.toolbar.addLine();else if("add"==s.nodeName){var d=s.getAttribute("as");d=mxResources.get(d)||d;var c=s.getAttribute("icon"),f=s.getAttribute("pressedIcon"),m=s.getAttribute("action"),x=s.getAttribute("mode"),v=s.getAttribute("template"),E="0"!=s.getAttribute("toggle"),S=mxUtils.getTextContent(s),b=null;if(null!=m)b=a.addItem(d,c,m,f);else if(null!=x){var T=mxDefaultToolbarCodec.allowEval?mxUtils.eval(S):null;b=a.addMode(d,c,x,f,T)}else if(null!=v||null!=S&&S.length>0){var D=l.templates[v],I=s.getAttribute("style");null!=D&&null!=I&&(D=l.graph.cloneCell(D)).setStyle(I);var O=null;null!=S&&S.length>0&&mxDefaultToolbarCodec.allowEval&&(O=mxUtils.eval(S)),b=a.addPrototype(d,c,D,f,O,E)}else{var N=mxUtils.getChildNodes(s);if(N.length>0)if(null==c){for(var k=a.addActionCombo(d),P=0;P<N.length;P++)if("separator"==(F=N[P]).nodeName)a.addOption(k,"---");else if("add"==F.nodeName){var V=F.getAttribute("as"),Y=F.getAttribute("action");a.addActionOption(k,V,Y)}}else{var j=null,Z=a.addPrototype(d,c,function(){var oe=l.templates[j.value];if(null!=oe){var B=oe.clone(),he=j.options[j.selectedIndex].cellStyle;return null!=he&&B.setStyle(he),B}return mxLog.warn("Template "+oe+" not found"),null},null,null,E);for(j=a.addCombo(),mxEvent.addListener(j,"change",function(){a.toolbar.selectMode(Z,function(oe){var B=mxUtils.convertPoint(l.graph.container,mxEvent.getClientX(oe),mxEvent.getClientY(oe));return l.addVertex(null,T(),B.x,B.y)}),a.toolbar.noReset=!1}),P=0;P<N.length;P++){var F;if("separator"==(F=N[P]).nodeName)a.addOption(j,"---");else if("add"==F.nodeName){V=F.getAttribute("as");var Q=F.getAttribute("template");a.addOption(j,V,Q||v).cellStyle=F.getAttribute("style")}}}}if(null!=b){var K=s.getAttribute("id");null!=K&&K.length>0&&b.setAttribute("id",K)}}s=s.nextSibling}}return a},e}());return mxDefaultToolbarCodec.allowEval=!0,__mxOutput.mxDefaultToolbarCodec=void 0!==mxDefaultToolbarCodec?mxDefaultToolbarCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultPopupMenu);return e.encode=function(i,s){return null},e.decode=function(i,s,a){var l=s.getElementsByTagName("include")[0];return null!=l?this.processInclude(i,l,a):null!=a&&(a.config=s),a},e}()),__mxOutput.mxDefaultPopupMenuCodec="undefined"!=typeof mxDefaultPopupMenuCodec?mxDefaultPopupMenuCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxEditor,["modified","lastSnapshot","ignoredChanges","undoManager","graphContainer","toolbarContainer"]);return e.afterDecode=function(i,s,a){var l=s.getAttribute("defaultEdge");null!=l&&(s.removeAttribute("defaultEdge"),a.defaultEdge=a.templates[l]);var d=s.getAttribute("defaultGroup");return null!=d&&(s.removeAttribute("defaultGroup"),a.defaultGroup=a.templates[d]),a},e.decodeChild=function(i,s,a){if("Array"==s.nodeName){var l=s.getAttribute("as");if("templates"==l)return void this.decodeTemplates(i,s,a)}else if("ui"==s.nodeName)return void this.decodeUi(i,s,a);mxObjectCodec.prototype.decodeChild.apply(this,arguments)},e.decodeUi=function(i,s,a){for(var l=s.firstChild;null!=l;){if("add"==l.nodeName){var d=l.getAttribute("as"),c=l.getAttribute("element"),f=l.getAttribute("style"),m=null;if(null!=c)null!=(m=document.getElementById(c))&&null!=f&&(m.style.cssText+=";"+f);else{var x=parseInt(l.getAttribute("x")),v=parseInt(l.getAttribute("y")),E=l.getAttribute("width"),S=l.getAttribute("height");(m=document.createElement("div")).style.cssText=f,new mxWindow(mxResources.get(d)||d,m,x,v,E,S,!1,!0).setVisible(!0)}"graph"==d?a.setGraphContainer(m):"toolbar"==d?a.setToolbarContainer(m):"title"==d?a.setTitleContainer(m):"status"==d?a.setStatusContainer(m):"map"==d&&a.setMapContainer(m)}else"resource"==l.nodeName?mxResources.add(l.getAttribute("basename")):"stylesheet"==l.nodeName&&mxClient.link("stylesheet",l.getAttribute("name"));l=l.nextSibling}},e.decodeTemplates=function(i,s,a){null==a.templates&&(a.templates=[]);for(var l=mxUtils.getChildNodes(s),d=0;d<l.length;d++){for(var c=l[d].getAttribute("as"),f=l[d].firstChild;null!=f&&1!=f.nodeType;)f=f.nextSibling;null!=f&&(a.templates[c]=i.decodeCell(f))}},e}()),__mxOutput.mxEditorCodec="undefined"!=typeof mxEditorCodec?mxEditorCodec:void 0,__mxOutput}},__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=i)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},108:(e,i,s)=>{"use strict";function a(n){return"function"==typeof n}let l=!1;const d={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else l&&console.log("RxJS: Back to a better error behavior. Thank you. <3");l=n},get useDeprecatedSynchronousErrorHandling(){return l}};function c(n){setTimeout(()=>{throw n},0)}const f={closed:!0,next(n){},error(n){if(d.useDeprecatedSynchronousErrorHandling)throw n;c(n)},complete(){}},m=Array.isArray||(n=>n&&"number"==typeof n.length);function x(n){return null!==n&&"object"==typeof n}const E=(()=>{function n(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return n.prototype=Object.create(Error.prototype),n})();class S{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:r,_ctorUnsubscribe:o,_unsubscribe:u,_subscriptions:p}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof S)r.remove(this);else if(null!==r)for(let g=0;g<r.length;++g)r[g].remove(this);if(a(u)){o&&(this._unsubscribe=void 0);try{u.call(this)}catch(g){t=g instanceof E?b(g.errors):[g]}}if(m(p)){let g=-1,y=p.length;for(;++g<y;){const C=p[g];if(x(C))try{C.unsubscribe()}catch(_){t=t||[],_ instanceof E?t=t.concat(b(_.errors)):t.push(_)}}}if(t)throw new E(t)}add(t){let r=t;if(!t)return S.EMPTY;switch(typeof t){case"function":r=new S(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof S)){const p=r;r=new S,r._subscriptions=[p]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:o}=r;if(null===o)r._parentOrParents=this;else if(o instanceof S){if(o===this)return r;r._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return r;o.push(this)}const u=this._subscriptions;return null===u?this._subscriptions=[r]:u.push(r),r}remove(t){const r=this._subscriptions;if(r){const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}}var n;function b(n){return n.reduce((t,r)=>t.concat(r instanceof E?r.errors:r),[])}S.EMPTY=((n=new S).closed=!0,n);const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class I extends S{constructor(t,r,o){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=f;break;case 1:if(!t){this.destination=f;break}if("object"==typeof t){t instanceof I?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new O(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new O(this,t,r,o)}}[T](){return this}static create(t,r,o){const u=new I(t,r,o);return u.syncErrorThrowable=!1,u}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class O extends I{constructor(t,r,o,u){super(),this._parentSubscriber=t;let p,g=this;a(r)?p=r:r&&(p=r.next,o=r.error,u=r.complete,r!==f&&(g=Object.create(r),a(g.unsubscribe)&&this.add(g.unsubscribe.bind(g)),g.unsubscribe=this.unsubscribe.bind(this))),this._context=g,this._next=p,this._error=o,this._complete=u}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:r}=this;d.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:r}=this,{useDeprecatedSynchronousErrorHandling:o}=d;if(this._error)o&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)o?(r.syncErrorValue=t,r.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),o)throw t;c(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const r=()=>this._complete.call(this._context);d.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,r){try{t.call(this._context,r)}catch(o){if(this.unsubscribe(),d.useDeprecatedSynchronousErrorHandling)throw o;c(o)}}__tryOrSetError(t,r,o){if(!d.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,o)}catch(u){return d.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=u,t.syncErrorThrown=!0,!0):(c(u),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const P="function"==typeof Symbol&&Symbol.observable||"@@observable";function F(n){return n}let j=(()=>{class n{constructor(r){this._isScalar=!1,r&&(this._subscribe=r)}lift(r){const o=new n;return o.source=this,o.operator=r,o}subscribe(r,o,u){const{operator:p}=this,g=function(n,t,r){if(n){if(n instanceof I)return n;if(n[T])return n[T]()}return n||t||r?new I(n,t,r):new I(f)}(r,o,u);if(g.add(p?p.call(g,this.source):this.source||d.useDeprecatedSynchronousErrorHandling&&!g.syncErrorThrowable?this._subscribe(g):this._trySubscribe(g)),d.useDeprecatedSynchronousErrorHandling&&g.syncErrorThrowable&&(g.syncErrorThrowable=!1,g.syncErrorThrown))throw g.syncErrorValue;return g}_trySubscribe(r){try{return this._subscribe(r)}catch(o){d.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=o),function(n){for(;n;){const{closed:t,destination:r,isStopped:o}=n;if(t||o)return!1;n=r&&r instanceof I?r:null}return!0}(r)?r.error(o):console.warn(o)}}forEach(r,o){return new(o=X(o))((u,p)=>{let g;g=this.subscribe(y=>{try{r(y)}catch(C){p(C),g&&g.unsubscribe()}},p,u)})}_subscribe(r){const{source:o}=this;return o&&o.subscribe(r)}[P](){return this}pipe(...r){return 0===r.length?this:function(n){return 0===n.length?F:1===n.length?n[0]:function(r){return n.reduce((o,u)=>u(o),r)}}(r)(this)}toPromise(r){return new(r=X(r))((o,u)=>{let p;this.subscribe(g=>p=g,g=>u(g),()=>o(p))})}}return n.create=t=>new n(t),n})();function X(n){if(n||(n=d.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const Q=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class ee extends S{constructor(t,r){super(),this.subject=t,this.subscriber=r,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,r=t.observers;if(this.subject=null,!r||0===r.length||t.isStopped||t.closed)return;const o=r.indexOf(this.subscriber);-1!==o&&r.splice(o,1)}}class K extends I{constructor(t){super(t),this.destination=t}}let oe=(()=>{class n extends j{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[T](){return new K(this)}lift(r){const o=new B(this,this);return o.operator=r,o}next(r){if(this.closed)throw new Q;if(!this.isStopped){const{observers:o}=this,u=o.length,p=o.slice();for(let g=0;g<u;g++)p[g].next(r)}}error(r){if(this.closed)throw new Q;this.hasError=!0,this.thrownError=r,this.isStopped=!0;const{observers:o}=this,u=o.length,p=o.slice();for(let g=0;g<u;g++)p[g].error(r);this.observers.length=0}complete(){if(this.closed)throw new Q;this.isStopped=!0;const{observers:r}=this,o=r.length,u=r.slice();for(let p=0;p<o;p++)u[p].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(r){if(this.closed)throw new Q;return super._trySubscribe(r)}_subscribe(r){if(this.closed)throw new Q;return this.hasError?(r.error(this.thrownError),S.EMPTY):this.isStopped?(r.complete(),S.EMPTY):(this.observers.push(r),new ee(this,r))}asObservable(){const r=new j;return r.source=this,r}}return n.create=(t,r)=>new B(t,r),n})();class B extends oe{constructor(t,r){super(),this.destination=t,this.source=r}next(t){const{destination:r}=this;r&&r.next&&r.next(t)}error(t){const{destination:r}=this;r&&r.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:r}=this;return r?this.source.subscribe(t):S.EMPTY}}function he(n){return n&&"function"==typeof n.schedule}function Oe(n,t){return function(o){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return o.lift(new Ve(n,t))}}class Ve{constructor(t,r){this.project=t,this.thisArg=r}call(t,r){return r.subscribe(new Re(t,this.project,this.thisArg))}}class Re extends I{constructor(t,r,o){super(t),this.project=r,this.count=0,this.thisArg=o||this}_next(t){let r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(o){return void this.destination.error(o)}this.destination.next(r)}}const _e=n=>t=>{for(let r=0,o=n.length;r<o&&!t.closed;r++)t.next(n[r]);t.complete()},Pe="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",gt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function xt(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const De=n=>{if(n&&"function"==typeof n[P])return(n=>t=>{const r=n[P]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)})(n);if(gt(n))return _e(n);if(xt(n))return(n=>t=>(n.then(r=>{t.closed||(t.next(r),t.complete())},r=>t.error(r)).then(null,c),t))(n);if(n&&"function"==typeof n[Pe])return(n=>t=>{const r=n[Pe]();for(;;){let o;try{o=r.next()}catch(u){return t.error(u),t}if(o.done){t.complete();break}if(t.next(o.value),t.closed)break}return"function"==typeof r.return&&t.add(()=>{r.return&&r.return()}),t})(n);{const r=`You provided ${x(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(r)}};function _n(n,t){return new j(r=>{const o=new S;let u=0;return o.add(t.schedule(function(){u!==n.length?(r.next(n[u++]),r.closed||o.add(this.schedule())):r.complete()})),o})}function Yt(n,t){return t?function(n,t){if(null!=n){if(function(n){return n&&"function"==typeof n[P]}(n))return function(n,t){return new j(r=>{const o=new S;return o.add(t.schedule(()=>{const u=n[P]();o.add(u.subscribe({next(p){o.add(t.schedule(()=>r.next(p)))},error(p){o.add(t.schedule(()=>r.error(p)))},complete(){o.add(t.schedule(()=>r.complete()))}}))})),o})}(n,t);if(xt(n))return function(n,t){return new j(r=>{const o=new S;return o.add(t.schedule(()=>n.then(u=>{o.add(t.schedule(()=>{r.next(u),o.add(t.schedule(()=>r.complete()))}))},u=>{o.add(t.schedule(()=>r.error(u)))}))),o})}(n,t);if(gt(n))return _n(n,t);if(function(n){return n&&"function"==typeof n[Pe]}(n)||"string"==typeof n)return function(n,t){if(!n)throw new Error("Iterable cannot be null");return new j(r=>{const o=new S;let u;return o.add(()=>{u&&"function"==typeof u.return&&u.return()}),o.add(t.schedule(()=>{u=n[Pe](),o.add(t.schedule(function(){if(r.closed)return;let p,g;try{const y=u.next();p=y.value,g=y.done}catch(y){return void r.error(y)}g?r.complete():(r.next(p),this.schedule())}))})),o})}(n,t)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,t):n instanceof j?n:new j(De(n))}class zt extends I{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ji extends I{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function gr(n,t,r=Number.POSITIVE_INFINITY){return"function"==typeof t?o=>o.pipe(gr((u,p)=>Yt(n(u,p)).pipe(Oe((g,y)=>t(u,g,p,y))),r)):("number"==typeof t&&(r=t),o=>o.lift(new oi(n,r)))}class oi{constructor(t,r=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=r}call(t,r){return r.subscribe(new Si(t,this.project,this.concurrent))}}class Si extends ji{constructor(t,r,o=Number.POSITIVE_INFINITY){super(t),this.project=r,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let r;const o=this.index++;try{r=this.project(t,o)}catch(u){return void this.destination.error(u)}this.active++,this._innerSub(r)}_innerSub(t){const r=new zt(this),o=this.destination;o.add(r);const u=function(n,t){if(t.closed)return;if(n instanceof j)return n.subscribe(t);let r;try{r=De(n)(t)}catch(o){t.error(o)}return r}(t,r);u!==r&&o.add(u)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Yn(n,t){return t?_n(n,t):new j(_e(n))}function _i(){return function(t){return t.lift(new ai(t))}}class ai{constructor(t){this.connectable=t}call(t,r){const{connectable:o}=this;o._refCount++;const u=new jl(t,o),p=r.subscribe(u);return u.closed||(u.connection=o.connect()),p}}class jl extends I{constructor(t,r){super(t),this.connectable=r}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const r=t._refCount;if(r<=0)return void(this.connection=null);if(t._refCount=r-1,r>1)return void(this.connection=null);const{connection:o}=this,u=t._connection;this.connection=null,u&&(!o||u===o)&&u.unsubscribe()}}class Fo extends j{constructor(t,r){super(),this.source=t,this.subjectFactory=r,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new S,t.add(this.source.subscribe(new Go(this.getSubject(),this))),t.closed&&(this._connection=null,t=S.EMPTY)),t}refCount(){return _i()(this)}}const Yl=(()=>{const n=Fo.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class Go extends K{constructor(t,r){super(t),this.connectable=r}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const r=t._connection;t._refCount=0,t._subject=null,t._connection=null,r&&r.unsubscribe()}}}function TE(){return new oe}function Ie(n){for(let t in n)if(n[t]===Ie)return t;throw Error("Could not find renamed property on target object.")}function Wl(n,t){for(const r in t)t.hasOwnProperty(r)&&!n.hasOwnProperty(r)&&(n[r]=t[r])}function Ce(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ce).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const r=t.indexOf("\n");return-1===r?t:t.substring(0,r)}function Xl(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const ME=Ie({__forward_ref__:Ie});function ke(n){return n.__forward_ref__=ke,n.toString=function(){return Ce(this())},n}function re(n){return Wc(n)?n():n}function Wc(n){return"function"==typeof n&&n.hasOwnProperty(ME)&&n.__forward_ref__===ke}class Yi extends Error{constructor(t,r){super(function(n,t){return`${n?`NG0${n}: `:""}${t}`}(t,r)),this.code=t}}function xe(n){return"string"==typeof n?n:null==n?"":String(n)}function Rt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():xe(n)}function ko(n,t){const r=t?` in ${t}`:"";throw new Yi("201",`No provider for ${Rt(n)} found${r}`)}function Zt(n,t){null==n&&function(n,t,r,o){throw new Error(`ASSERTION ERROR: ${n}`+(null==o?"":` [Expected=> ${r} ${o} ${t} <=Actual]`))}(t,n,null,"!=")}function be(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ui(n){return Xc(n,Uo)||Xc(n,Kc)}function Xc(n,t){return n.hasOwnProperty(t)?n[t]:null}function $c(n){return n&&(n.hasOwnProperty(Kl)||n.hasOwnProperty(NE))?n[Kl]:null}const Uo=Ie({\u0275prov:Ie}),Kl=Ie({\u0275inj:Ie}),Kc=Ie({ngInjectableDef:Ie}),NE=Ie({ngInjectorDef:Ie});var le=(()=>((le=le||{})[le.Default=0]="Default",le[le.Host=1]="Host",le[le.Self=2]="Self",le[le.SkipSelf=4]="SkipSelf",le[le.Optional=8]="Optional",le))();let ql;function wi(n){const t=ql;return ql=n,t}function qc(n,t,r){const o=ui(n);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&le.Optional?null:void 0!==t?t:void ko(Ce(n),"Injector")}function bi(n){return{toString:n}.toString()}var ln=(()=>((ln=ln||{})[ln.OnPush=0]="OnPush",ln[ln.Default=1]="Default",ln))(),ht=(()=>((ht=ht||{})[ht.Emulated=0]="Emulated",ht[ht.None=2]="None",ht[ht.ShadowDom=3]="ShadowDom",ht))();const VE="undefined"!=typeof globalThis&&globalThis,FE="undefined"!=typeof window&&window,GE="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ae=VE||"undefined"!=typeof global&&global||FE||GE,xr={},Fe=[],Bo=Ie({\u0275cmp:Ie}),Zl=Ie({\u0275dir:Ie}),Ql=Ie({\u0275pipe:Ie}),Zc=Ie({\u0275mod:Ie}),kE=Ie({\u0275loc:Ie}),hi=Ie({\u0275fac:Ie}),Es=Ie({__NG_ELEMENT_ID__:Ie});let UE=0;function yr(n){return bi(()=>{const r={},o={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ln.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Fe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ht.Emulated,id:"c",styles:n.styles||Fe,_:null,setInput:null,schemas:n.schemas||null,tView:null},u=n.directives,p=n.features,g=n.pipes;return o.id+=UE++,o.inputs=tp(n.inputs,r),o.outputs=tp(n.outputs),p&&p.forEach(y=>y(o)),o.directiveDefs=u?()=>("function"==typeof u?u():u).map(Qc):null,o.pipeDefs=g?()=>("function"==typeof g?g():g).map(Jc):null,o})}function Qc(n){return Pt(n)||function(n){return n[Zl]||null}(n)}function Jc(n){return function(n){return n[Ql]||null}(n)}const ep={};function Tn(n){return bi(()=>{const t={type:n.type,bootstrap:n.bootstrap||Fe,declarations:n.declarations||Fe,imports:n.imports||Fe,exports:n.exports||Fe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ep[n.id]=n.type),t})}function tp(n,t){if(null==n)return xr;const r={};for(const o in n)if(n.hasOwnProperty(o)){let u=n[o],p=u;Array.isArray(u)&&(p=u[1],u=u[0]),r[u]=o,t&&(t[u]=p)}return r}const de=yr;function Pt(n){return n[Bo]||null}function un(n,t){const r=n[Zc]||null;if(!r&&!0===t)throw new Error(`Type ${Ce(n)} does not have '\u0275mod' property.`);return r}function zn(n){return Array.isArray(n)&&"object"==typeof n[1]}function Mn(n){return Array.isArray(n)&&!0===n[1]}function tu(n){return 0!=(8&n.flags)}function Wo(n){return 2==(2&n.flags)}function Xo(n){return 1==(1&n.flags)}function In(n){return null!==n.template}function $E(n){return 0!=(512&n[2])}function Ki(n,t){return n.hasOwnProperty(hi)?n[hi]:null}class ip{constructor(t,r,o){this.previousValue=t,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function en(){return rp}function rp(n){return n.type.prototype.ngOnChanges&&(n.setInput=QE),ZE}function ZE(){const n=op(this),t=null==n?void 0:n.current;if(t){const r=n.previous;if(r===xr)n.previous=t;else for(let o in t)r[o]=t[o];n.current=null,this.ngOnChanges(t)}}function QE(n,t,r,o){const u=op(n)||function(n,t){return n[sp]=t}(n,{previous:xr,current:null}),p=u.current||(u.current={}),g=u.previous,y=this.declaredInputs[r],C=g[y];p[y]=new ip(C&&C.currentValue,t,g===xr),n[o]=t}en.ngInherit=!0;const sp="__ngSimpleChanges__";function op(n){return n[sp]||null}let ru;function Ze(n){return!!n.listen}const up={createRenderer:(n,t)=>void 0!==ru?ru:"undefined"!=typeof document?document:void 0};function ot(n){for(;Array.isArray(n);)n=n[0];return n}function $o(n,t){return ot(t[n])}function cn(n,t){return ot(t[n.index])}function ou(n,t){return n.data[t]}function tn(n,t){const r=t[n];return zn(r)?r:r[0]}function hp(n){return 4==(4&n[2])}function au(n){return 128==(128&n[2])}function Di(n,t){return null==t?null:n[t]}function dp(n){n[18]=0}function lu(n,t){n[5]+=t;let r=n,o=n[3];for(;null!==o&&(1===t&&1===r[5]||-1===t&&0===r[5]);)o[5]+=t,r=o,o=o[3]}const ce={lFrame:vp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function cp(){return ce.bindingsEnabled}function $(){return ce.lFrame.lView}function Me(){return ce.lFrame.tView}function dt(){let n=pp();for(;null!==n&&64===n.type;)n=n.parent;return n}function pp(){return ce.lFrame.currentTNode}function Wn(n,t){const r=ce.lFrame;r.currentTNode=n,r.isParent=t}function uu(){return ce.lFrame.isParent}function Ko(){return ce.isInCheckNoChangesMode}function qo(n){ce.isInCheckNoChangesMode=n}function wr(){return ce.lFrame.bindingIndex++}function fS(n,t){const r=ce.lFrame;r.bindingIndex=r.bindingRootIndex=n,du(t)}function du(n){ce.lFrame.currentDirectiveIndex=n}function gp(){return ce.lFrame.currentQueryIndex}function pu(n){ce.lFrame.currentQueryIndex=n}function gS(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function xp(n,t,r){if(r&le.SkipSelf){let u=t,p=n;for(;!(u=u.parent,null!==u||r&le.Host||(u=gS(p),null===u||(p=p[15],10&u.type))););if(null===u)return!1;t=u,n=p}const o=ce.lFrame=yp();return o.currentTNode=t,o.lView=n,!0}function Zo(n){const t=yp(),r=n[1];ce.lFrame=t,t.currentTNode=r.firstChild,t.lView=n,t.tView=r,t.contextLView=n,t.bindingIndex=r.bindingStartIndex,t.inI18n=!1}function yp(){const n=ce.lFrame,t=null===n?null:n.child;return null===t?vp(n):t}function vp(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Cp(){const n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ep=Cp;function Qo(){const n=Cp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ht(){return ce.lFrame.selectedIndex}function Mi(n){ce.lFrame.selectedIndex=n}function Jo(n,t){for(let r=t.directiveStart,o=t.directiveEnd;r<o;r++){const p=n.data[r].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:C,ngAfterViewChecked:_,ngOnDestroy:M}=p;g&&(n.contentHooks||(n.contentHooks=[])).push(-r,g),y&&((n.contentHooks||(n.contentHooks=[])).push(r,y),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(r,y)),C&&(n.viewHooks||(n.viewHooks=[])).push(-r,C),_&&((n.viewHooks||(n.viewHooks=[])).push(r,_),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(r,_)),null!=M&&(n.destroyHooks||(n.destroyHooks=[])).push(r,M)}}function ea(n,t,r){Sp(n,t,3,r)}function ta(n,t,r,o){(3&n[2])===r&&Sp(n,t,r,o)}function fu(n,t){let r=n[2];(3&r)===t&&(r&=2047,r+=1,n[2]=r)}function Sp(n,t,r,o){const p=null!=o?o:-1,g=t.length-1;let y=0;for(let C=void 0!==o?65535&n[18]:0;C<g;C++)if("number"==typeof t[C+1]){if(y=t[C],null!=o&&y>=o)break}else t[C]<0&&(n[18]+=65536),(y<p||-1==p)&&(bS(n,r,t,C),n[18]=(4294901760&n[18])+C+2),C++}function bS(n,t,r,o){const u=r[o]<0,p=r[o+1],y=n[u?-r[o]:r[o]];if(u){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{p.call(y)}finally{}}}else try{p.call(y)}finally{}}class Ts{constructor(t,r,o){this.factory=t,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}function na(n,t,r){const o=Ze(n);let u=0;for(;u<r.length;){const p=r[u];if("number"==typeof p){if(0!==p)break;u++;const g=r[u++],y=r[u++],C=r[u++];o?n.setAttribute(t,y,C,g):t.setAttributeNS(g,y,C)}else{const g=p,y=r[++u];gu(g)?o&&n.setProperty(t,g,y):o?n.setAttribute(t,g,y):t.setAttribute(g,y),u++}}return u}function _p(n){return 3===n||4===n||6===n}function gu(n){return 64===n.charCodeAt(0)}function ia(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let r=-1;for(let o=0;o<t.length;o++){const u=t[o];"number"==typeof u?r=u:0===r||wp(n,r,u,null,-1===r||2===r?t[++o]:null)}}return n}function wp(n,t,r,o,u){let p=0,g=n.length;if(-1===t)g=-1;else for(;p<n.length;){const y=n[p++];if("number"==typeof y){if(y===t){g=-1;break}if(y>t){g=p-1;break}}}for(;p<n.length;){const y=n[p];if("number"==typeof y)break;if(y===r){if(null===o)return void(null!==u&&(n[p+1]=u));if(o===n[p+1])return void(n[p+2]=u)}p++,null!==o&&p++,null!==u&&p++}-1!==g&&(n.splice(g,0,t),p=g+1),n.splice(p++,0,r),null!==o&&n.splice(p++,0,o),null!==u&&n.splice(p++,0,u)}function bp(n){return-1!==n}function br(n){return 32767&n}function Tr(n,t){let r=function(n){return n>>16}(n),o=t;for(;r>0;)o=o[15],r--;return o}let xu=!0;function ra(n){const t=xu;return xu=n,t}let LS=0;function Ms(n,t){const r=vu(n,t);if(-1!==r)return r;const o=t[1];o.firstCreatePass&&(n.injectorIndex=t.length,yu(o.data,n),yu(t,null),yu(o.blueprint,null));const u=sa(n,t),p=n.injectorIndex;if(bp(u)){const g=br(u),y=Tr(u,t),C=y[1].data;for(let _=0;_<8;_++)t[p+_]=y[g+_]|C[g+_]}return t[p+8]=u,p}function yu(n,t){n.push(0,0,0,0,0,0,0,0,t)}function vu(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function sa(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let r=0,o=null,u=t;for(;null!==u;){const p=u[1],g=p.type;if(o=2===g?p.declTNode:1===g?u[6]:null,null===o)return-1;if(r++,u=u[15],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return-1}function oa(n,t,r){!function(n,t,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(Es)&&(o=r[Es]),null==o&&(o=r[Es]=LS++);const u=255&o;t.data[n+(u>>5)]|=1<<u}(n,t,r)}function Mp(n,t,r){if(r&le.Optional)return n;ko(t,"NodeInjector")}function Ip(n,t,r,o){if(r&le.Optional&&void 0===o&&(o=null),0==(r&(le.Self|le.Host))){const u=n[9],p=wi(void 0);try{return u?u.get(t,o,r&le.Optional):qc(t,o,r&le.Optional)}finally{wi(p)}}return Mp(o,t,r)}function Ap(n,t,r,o=le.Default,u){if(null!==n){const p=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Es)?n[Es]:void 0;return"number"==typeof t?t>=0?255&t:PS:t}(r);if("function"==typeof p){if(!xp(t,n,o))return o&le.Host?Mp(u,r,o):Ip(t,r,o,u);try{const g=p(o);if(null!=g||o&le.Optional)return g;ko(r)}finally{Ep()}}else if("number"==typeof p){let g=null,y=vu(n,t),C=-1,_=o&le.Host?t[16][6]:null;for((-1===y||o&le.SkipSelf)&&(C=-1===y?sa(n,t):t[y+8],-1!==C&&Rp(o,!1)?(g=t[1],y=br(C),t=Tr(C,t)):y=-1);-1!==y;){const M=t[1];if(Op(p,y,M.data)){const A=NS(y,t,r,g,o,_);if(A!==Lp)return A}C=t[y+8],-1!==C&&Rp(o,t[1].data[y+8]===_)&&Op(p,y,t)?(g=M,y=br(C),t=Tr(C,t)):y=-1}}}return Ip(t,r,o,u)}const Lp={};function PS(){return new Dr(dt(),$())}function NS(n,t,r,o,u,p){const g=t[1],y=g.data[n+8],M=aa(y,g,r,null==o?Wo(y)&&xu:o!=g&&0!=(3&y.type),u&le.Host&&p===y);return null!==M?Is(t,g,M,y):Lp}function aa(n,t,r,o,u){const p=n.providerIndexes,g=t.data,y=1048575&p,C=n.directiveStart,M=p>>20,L=u?y+M:n.directiveEnd;for(let R=o?y:y+M;R<L;R++){const H=g[R];if(R<C&&r===H||R>=C&&H.type===r)return R}if(u){const R=g[C];if(R&&In(R)&&R.type===r)return C}return null}function Is(n,t,r,o){let u=n[r];const p=t.data;if(function(n){return n instanceof Ts}(u)){const g=u;g.resolving&&function(n,t){throw new Yi("200",`Circular dependency in DI detected for ${n}`)}(Rt(p[r]));const y=ra(g.canSeeViewProviders);g.resolving=!0;const C=g.injectImpl?wi(g.injectImpl):null;xp(n,o,le.Default);try{u=n[r]=g.factory(void 0,p,n,o),t.firstCreatePass&&r>=o.directiveStart&&function(n,t,r){const{ngOnChanges:o,ngOnInit:u,ngDoCheck:p}=t.type.prototype;if(o){const g=rp(t);(r.preOrderHooks||(r.preOrderHooks=[])).push(n,g),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(n,g)}u&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-n,u),p&&((r.preOrderHooks||(r.preOrderHooks=[])).push(n,p),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(n,p))}(r,p[r],t)}finally{null!==C&&wi(C),ra(y),g.resolving=!1,Ep()}}return u}function Op(n,t,r){return!!(r[t+(n>>5)]&1<<n)}function Rp(n,t){return!(n&le.Self||n&le.Host&&t)}class Dr{constructor(t,r){this._tNode=t,this._lView=r}get(t,r){return Ap(this._tNode,this._lView,t,void 0,r)}}function pn(n){return bi(()=>{const t=n.prototype.constructor,r=t[hi]||Cu(t),o=Object.prototype;let u=Object.getPrototypeOf(n.prototype).constructor;for(;u&&u!==o;){const p=u[hi]||Cu(u);if(p&&p!==r)return p;u=Object.getPrototypeOf(u)}return p=>new p})}function Cu(n){return Wc(n)?()=>{const t=Cu(re(n));return t&&t()}:Ki(n)}const Ir="__parameters__";function qi(n,t,r){return bi(()=>{const o=function(n){return function(...r){if(n){const o=n(...r);for(const u in o)this[u]=o[u]}}}(t);function u(...p){if(this instanceof u)return o.apply(this,p),this;const g=new u(...p);return y.annotation=g,y;function y(C,_,M){const A=C.hasOwnProperty(Ir)?C[Ir]:Object.defineProperty(C,Ir,{value:[]})[Ir];for(;A.length<=M;)A.push(null);return(A[M]=A[M]||[]).push(g),C}}return r&&(u.prototype=Object.create(r.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}class Te{constructor(t,r){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=be({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}function fn(n,t){void 0===t&&(t=n);for(let r=0;r<n.length;r++){let o=n[r];Array.isArray(o)?(t===n&&(t=n.slice(0,r)),fn(o,t)):t!==n&&t.push(o)}return t}function $n(n,t){n.forEach(r=>Array.isArray(r)?$n(r,t):t(r))}function ua(n,t,r){t>=n.length?n.push(r):n.splice(t,0,r)}function Zi(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function nn(n,t,r){let o=Lr(n,t);return o>=0?n[1|o]=r:(o=~o,function(n,t,r,o){let u=n.length;if(u==t)n.push(r,o);else if(1===u)n.push(o,n[0]),n[0]=r;else{for(u--,n.push(n[u-1],n[u]);u>t;)n[u]=n[u-2],u--;n[t]=r,n[t+1]=o}}(n,o,t,r)),o}function wu(n,t){const r=Lr(n,t);if(r>=0)return n[1|r]}function Lr(n,t){return function(n,t,r){let o=0,u=n.length>>r;for(;u!==o;){const p=o+(u-o>>1),g=n[p<<r];if(t===g)return p<<r;g>t?u=p:o=p+1}return~(u<<r)}(n,t,1)}const Rs={},Tu="__NG_DI_FLAG__",Or="ngTempTokenPath",$S=/\n/gm,Du="__source",Mu=Ie({provide:String,useValue:Ie});let Ps;function Rr(n){const t=Ps;return Ps=n,t}function qS(n,t=le.Default){if(void 0===Ps)throw new Error("inject() must be called from an injection context");return null===Ps?qc(n,void 0,t):Ps.get(n,t&le.Optional?null:void 0,t)}function fe(n,t=le.Default){return(ql||qS)(re(n),t)}function Qi(n){const t=[];for(let r=0;r<n.length;r++){const o=re(n[r]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let u,p=le.Default;for(let g=0;g<o.length;g++){const y=o[g],C=ZS(y);"number"==typeof C?-1===C?u=y.token:p|=C:u=y}t.push(fe(u,p))}else t.push(fe(o))}return t}function Ns(n,t){return n[Tu]=t,n.prototype[Tu]=t,n}function ZS(n){return n[Tu]}function Gp(n,t,r,o){const u=n[Or];throw t[Du]&&u.unshift(t[Du]),n.message=function(n,t,r,o=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let u=Ce(t);if(Array.isArray(t))u=t.map(Ce).join(" -> ");else if("object"==typeof t){let p=[];for(let g in t)if(t.hasOwnProperty(g)){let y=t[g];p.push(g+":"+("string"==typeof y?JSON.stringify(y):Ce(y)))}u=`{${p.join(", ")}}`}return`${r}${o?"("+o+")":""}[${u}]: ${n.replace($S,"\n  ")}`}("\n"+n.message,u,r,o),n.ngTokenPath=u,n[Or]=null,n}const Hs=Ns(qi("Inject",n=>({token:n})),-1),Kn=Ns(qi("Optional"),8),Ji=Ns(qi("SkipSelf"),4);const of="__ngContext__";function Tt(n,t){n[of]=t}function Vu(n){const t=function(n){return n[of]||null}(n);return t?Array.isArray(t)?t:t.lView:null}function ga(n){return n.ngOriginalError}function Y_(n,...t){n.error(...t)}class tr{constructor(){this._console=console}handleError(t){const r=this._findOriginalError(t),o=this._findContext(t),u=function(n){return n&&n.ngErrorLogger||Y_}(t);u(this._console,"ERROR",t),r&&u(this._console,"ORIGINAL ERROR",r),o&&u(this._console,"ERROR CONTEXT",o)}_findContext(t){return t?function(n){return n.ngDebugContext}(t)||this._findContext(ga(t)):null}_findOriginalError(t){let r=t&&ga(t);for(;r&&ga(r);)r=ga(r);return r||null}}const mf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ae))();function Qn(n){return n instanceof Function?n():n}var sn=(()=>((sn=sn||{})[sn.Important=1]="Important",sn[sn.DashCase=2]="DashCase",sn))();function ku(n,t){return undefined(n,t)}function Bs(n){const t=n[3];return Mn(t)?t[3]:t}function Uu(n){return Cf(n[13])}function Bu(n){return Cf(n[4])}function Cf(n){for(;null!==n&&!Mn(n);)n=n[4];return n}function Vr(n,t,r,o,u){if(null!=o){let p,g=!1;Mn(o)?p=o:zn(o)&&(g=!0,o=o[0]);const y=ot(o);0===n&&null!==r?null==u?Tf(t,r,y):nr(t,r,y,u||null,!0):1===n&&null!==r?nr(t,r,y,u||null,!0):2===n?function(n,t,r){const o=ya(n,t);o&&function(n,t,r,o){Ze(n)?n.removeChild(t,r,o):t.removeChild(r)}(n,o,t,r)}(t,y,g):3===n&&t.destroyNode(y),null!=p&&function(n,t,r,o,u){const p=r[7];p!==ot(r)&&Vr(t,n,o,p,u);for(let y=10;y<r.length;y++){const C=r[y];js(C[1],C,n,t,o,p)}}(t,n,p,r,u)}}function Yu(n,t,r){return Ze(n)?n.createElement(t,r):null===r?n.createElement(t):n.createElementNS(r,t)}function Sf(n,t){const r=n[9],o=r.indexOf(t),u=t[3];1024&t[2]&&(t[2]&=-1025,lu(u,-1)),r.splice(o,1)}function zu(n,t){if(n.length<=10)return;const r=10+t,o=n[r];if(o){const u=o[17];null!==u&&u!==n&&Sf(u,o),t>0&&(n[r-1][4]=o[4]);const p=Zi(n,10+t);!function(n,t){js(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(o[1],o);const g=p[19];null!==g&&g.detachView(p[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function _f(n,t){if(!(256&t[2])){const r=t[11];Ze(r)&&r.destroyNode&&js(n,t,r,3,null,null),function(n){let t=n[13];if(!t)return Wu(n[1],n);for(;t;){let r=null;if(zn(t))r=t[13];else{const o=t[10];o&&(r=o)}if(!r){for(;t&&!t[4]&&t!==n;)zn(t)&&Wu(t[1],t),t=t[3];null===t&&(t=n),zn(t)&&Wu(t[1],t),r=t&&t[4]}t=r}}(t)}}function Wu(n,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(n,t){let r;if(null!=n&&null!=(r=n.destroyHooks))for(let o=0;o<r.length;o+=2){const u=t[r[o]];if(!(u instanceof Ts)){const p=r[o+1];if(Array.isArray(p))for(let g=0;g<p.length;g+=2){const y=u[p[g]],C=p[g+1];try{C.call(y)}finally{}}else try{p.call(u)}finally{}}}}(n,t),function(n,t){const r=n.cleanup,o=t[7];let u=-1;if(null!==r)for(let p=0;p<r.length-1;p+=2)if("string"==typeof r[p]){const g=r[p+1],y="function"==typeof g?g(t):ot(t[g]),C=o[u=r[p+2]],_=r[p+3];"boolean"==typeof _?y.removeEventListener(r[p],C,_):_>=0?o[u=_]():o[u=-_].unsubscribe(),p+=2}else{const g=o[u=r[p+1]];r[p].call(g)}if(null!==o){for(let p=u+1;p<o.length;p++)o[p]();t[7]=null}}(n,t),1===t[1].type&&Ze(t[11])&&t[11].destroy();const r=t[17];if(null!==r&&Mn(t[3])){r!==t[3]&&Sf(r,t);const o=t[19];null!==o&&o.detachView(n)}}}function wf(n,t,r){return function(n,t,r){let o=t;for(;null!==o&&40&o.type;)o=(t=o).parent;if(null===o)return r[0];if(2&o.flags){const u=n.data[o.directiveStart].encapsulation;if(u===ht.None||u===ht.Emulated)return null}return cn(o,r)}(n,t.parent,r)}function nr(n,t,r,o,u){Ze(n)?n.insertBefore(t,r,o,u):t.insertBefore(r,o,u)}function Tf(n,t,r){Ze(n)?n.appendChild(t,r):t.appendChild(r)}function Df(n,t,r,o,u){null!==o?nr(n,t,r,o,u):Tf(n,t,r)}function ya(n,t){return Ze(n)?n.parentNode(t):t.parentNode}let Af=function(n,t,r){return 40&n.type?cn(n,r):null};function va(n,t,r,o){const u=wf(n,o,t),p=t[11],y=function(n,t,r){return Af(n,t,r)}(o.parent||t[6],o,t);if(null!=u)if(Array.isArray(r))for(let C=0;C<r.length;C++)Df(p,u,r[C],y,!1);else Df(p,u,r,y,!1)}function Ca(n,t){if(null!==t){const r=t.type;if(3&r)return cn(t,n);if(4&r)return $u(-1,n[t.index]);if(8&r){const o=t.child;if(null!==o)return Ca(n,o);{const u=n[t.index];return Mn(u)?$u(-1,u):ot(u)}}if(32&r)return ku(t,n)()||ot(n[t.index]);{const o=Of(n,t);return null!==o?Array.isArray(o)?o[0]:Ca(Bs(n[16]),o):Ca(n,t.next)}}return null}function Of(n,t){return null!==t?n[16][6].projection[t.projection]:null}function $u(n,t){const r=10+n+1;if(r<t.length){const o=t[r],u=o[1].firstChild;if(null!==u)return Ca(o,u)}return t[7]}function Ku(n,t,r,o,u,p,g){for(;null!=r;){const y=o[r.index],C=r.type;if(g&&0===t&&(y&&Tt(ot(y),o),r.flags|=4),64!=(64&r.flags))if(8&C)Ku(n,t,r.child,o,u,p,!1),Vr(t,n,u,y,p);else if(32&C){const _=ku(r,o);let M;for(;M=_();)Vr(t,n,u,M,p);Vr(t,n,u,y,p)}else 16&C?Pf(n,t,o,r,u,p):Vr(t,n,u,y,p);r=g?r.projectionNext:r.next}}function js(n,t,r,o,u,p){Ku(r,o,n.firstChild,t,u,p,!1)}function Pf(n,t,r,o,u,p){const g=r[16],C=g[6].projection[o.projection];if(Array.isArray(C))for(let _=0;_<C.length;_++)Vr(t,n,u,C[_],p);else Ku(n,t,C,g[3],u,p,!0)}function Nf(n,t,r){Ze(n)?n.setAttribute(t,"style",r):t.style.cssText=r}function qu(n,t,r){Ze(n)?""===r?n.removeAttribute(t,"class"):n.setAttribute(t,"class",r):t.className=r}function Hf(n,t,r){let o=n.length;for(;;){const u=n.indexOf(t,r);if(-1===u)return u;if(0===u||n.charCodeAt(u-1)<=32){const p=t.length;if(u+p===o||n.charCodeAt(u+p)<=32)return u}r=u+1}}const Vf="ng-template";function gw(n,t,r){let o=0;for(;o<n.length;){let u=n[o++];if(r&&"class"===u){if(u=n[o],-1!==Hf(u.toLowerCase(),t,0))return!0}else if(1===u){for(;o<n.length&&"string"==typeof(u=n[o++]);)if(u.toLowerCase()===t)return!0;return!1}}return!1}function Ff(n){return 4===n.type&&n.value!==Vf}function xw(n,t,r){return t===(4!==n.type||r?n.value:Vf)}function yw(n,t,r){let o=4;const u=n.attrs||[],p=function(n){for(let t=0;t<n.length;t++)if(_p(n[t]))return t;return n.length}(u);let g=!1;for(let y=0;y<t.length;y++){const C=t[y];if("number"!=typeof C){if(!g)if(4&o){if(o=2|1&o,""!==C&&!xw(n,C,r)||""===C&&1===t.length){if(An(o))return!1;g=!0}}else{const _=8&o?C:t[++y];if(8&o&&null!==n.attrs){if(!gw(n.attrs,_,r)){if(An(o))return!1;g=!0}continue}const A=vw(8&o?"class":C,u,Ff(n),r);if(-1===A){if(An(o))return!1;g=!0;continue}if(""!==_){let L;L=A>p?"":u[A+1].toLowerCase();const R=8&o?L:null;if(R&&-1!==Hf(R,_,0)||2&o&&_!==L){if(An(o))return!1;g=!0}}}}else{if(!g&&!An(o)&&!An(C))return!1;if(g&&An(C))continue;g=!1,o=C|1&o}}return An(o)||g}function An(n){return 0==(1&n)}function vw(n,t,r,o){if(null===t)return-1;let u=0;if(o||!r){let p=!1;for(;u<t.length;){const g=t[u];if(g===n)return u;if(3===g||6===g)p=!0;else{if(1===g||2===g){let y=t[++u];for(;"string"==typeof y;)y=t[++u];continue}if(4===g)break;if(0===g){u+=4;continue}}u+=p?1:2}return-1}return function(n,t){let r=n.indexOf(4);if(r>-1)for(r++;r<n.length;){const o=n[r];if("number"==typeof o)return-1;if(o===t)return r;r++}return-1}(t,n)}function Gf(n,t,r=!1){for(let o=0;o<t.length;o++)if(yw(n,t[o],r))return!0;return!1}function kf(n,t){return n?":not("+t.trim()+")":t}function ww(n){let t=n[0],r=1,o=2,u="",p=!1;for(;r<n.length;){let g=n[r];if("string"==typeof g)if(2&o){const y=n[++r];u+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&o?u+="."+g:4&o&&(u+=" "+g);else""!==u&&!An(g)&&(t+=kf(p,u),u=""),o=g,p=p||!An(o);r++}return""!==u&&(t+=kf(p,u)),t}const me={};function Li(n){Uf(Me(),$(),Ht()+n,Ko())}function Uf(n,t,r,o){if(!o)if(3==(3&t[2])){const p=n.preOrderCheckHooks;null!==p&&ea(t,p,r)}else{const p=n.preOrderHooks;null!==p&&ta(t,p,0,r)}Mi(r)}function Ea(n,t){return n<<17|t<<2}function Ln(n){return n>>17&32767}function Zu(n){return 2|n}function ci(n){return(131068&n)>>2}function Qu(n,t){return-131069&n|t<<2}function Ju(n){return 1|n}function Zf(n,t){const r=n.contentQueries;if(null!==r)for(let o=0;o<r.length;o+=2){const u=r[o],p=r[o+1];if(-1!==p){const g=n.data[p];pu(u),g.contentQueries(2,t[p],p)}}}function Ys(n,t,r,o,u,p,g,y,C,_){const M=t.blueprint.slice();return M[0]=u,M[2]=140|o,dp(M),M[3]=M[15]=n,M[8]=r,M[10]=g||n&&n[10],M[11]=y||n&&n[11],M[12]=C||n&&n[12]||null,M[9]=_||n&&n[9]||null,M[6]=p,M[16]=2==t.type?n[16]:M,M}function Fr(n,t,r,o,u){let p=n.data[t];if(null===p)p=function(n,t,r,o,u){const p=pp(),g=uu(),C=n.data[t]=function(n,t,r,o,u,p){return{type:r,index:o,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?p:p&&p.parent,r,t,o,u);return null===n.firstChild&&(n.firstChild=C),null!==p&&(g?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(n,t,r,o,u),ce.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=r,p.value=o,p.attrs=u;const g=function(){const n=ce.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();p.injectorIndex=null===g?-1:g.injectorIndex}return Wn(p,!0),p}function Gr(n,t,r,o){if(0===r)return-1;const u=t.length;for(let p=0;p<r;p++)t.push(o),n.blueprint.push(o),n.data.push(null);return u}function zs(n,t,r){Zo(t);try{const o=n.viewQuery;null!==o&&mh(1,o,r);const u=n.template;null!==u&&Qf(n,t,u,1,r),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Zf(n,t),n.staticViewQueries&&mh(2,n.viewQuery,r);const p=n.components;null!==p&&function(n,t){for(let r=0;r<t.length;r++)ib(n,t[r])}(t,p)}catch(o){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),o}finally{t[2]&=-5,Qo()}}function kr(n,t,r,o){const u=t[2];if(256==(256&u))return;Zo(t);const p=Ko();try{dp(t),function(n){ce.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==r&&Qf(n,t,r,2,o);const g=3==(3&u);if(!p)if(g){const _=n.preOrderCheckHooks;null!==_&&ea(t,_,null)}else{const _=n.preOrderHooks;null!==_&&ta(t,_,0,null),fu(t,0)}if(function(n){for(let t=Uu(n);null!==t;t=Bu(t)){if(!t[2])continue;const r=t[9];for(let o=0;o<r.length;o++){const u=r[o],p=u[3];0==(1024&u[2])&&lu(p,1),u[2]|=1024}}}(t),function(n){for(let t=Uu(n);null!==t;t=Bu(t))for(let r=10;r<t.length;r++){const o=t[r],u=o[1];au(o)&&kr(u,o,u.template,o[8])}}(t),null!==n.contentQueries&&Zf(n,t),!p)if(g){const _=n.contentCheckHooks;null!==_&&ea(t,_)}else{const _=n.contentHooks;null!==_&&ta(t,_,1),fu(t,1)}!function(n,t){const r=n.hostBindingOpCodes;if(null!==r)try{for(let o=0;o<r.length;o++){const u=r[o];if(u<0)Mi(~u);else{const p=u,g=r[++o],y=r[++o];fS(g,p),y(2,t[p])}}}finally{Mi(-1)}}(n,t);const y=n.components;null!==y&&function(n,t){for(let r=0;r<t.length;r++)nb(n,t[r])}(t,y);const C=n.viewQuery;if(null!==C&&mh(2,C,o),!p)if(g){const _=n.viewCheckHooks;null!==_&&ea(t,_)}else{const _=n.viewHooks;null!==_&&ta(t,_,2),fu(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),p||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,lu(t[3],-1))}finally{Qo()}}function Vw(n,t,r,o){const u=t[10],p=!Ko(),g=hp(t);try{p&&!g&&u.begin&&u.begin(),g&&zs(n,t,o),kr(n,t,r,o)}finally{p&&!g&&u.end&&u.end()}}function Qf(n,t,r,o,u){const p=Ht(),g=2&o;try{Mi(-1),g&&t.length>20&&Uf(n,t,20,Ko()),r(o,u)}finally{Mi(p)}}function ah(n,t,r){!cp()||(function(n,t,r,o){const u=r.directiveStart,p=r.directiveEnd;n.firstCreatePass||Ms(r,t),Tt(o,t);const g=r.initialInputs;for(let y=u;y<p;y++){const C=n.data[y],_=In(C);_&&Zw(t,r,C);const M=Is(t,n,y,r);Tt(M,t),null!==g&&Qw(0,y-u,M,C,0,g),_&&(tn(r.index,t)[8]=M)}}(n,t,r,cn(r,t)),128==(128&r.flags)&&function(n,t,r){const o=r.directiveStart,u=r.directiveEnd,g=r.index,y=ce.lFrame.currentDirectiveIndex;try{Mi(g);for(let C=o;C<u;C++){const _=n.data[C],M=t[C];du(C),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&am(_,M)}}finally{Mi(-1),du(y)}}(n,t,r))}function lh(n,t,r=cn){const o=t.localNames;if(null!==o){let u=t.index+1;for(let p=0;p<o.length;p+=2){const g=o[p+1],y=-1===g?r(t,n):n[g];n[u++]=y}}}function em(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=wa(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function wa(n,t,r,o,u,p,g,y,C,_){const M=20+o,A=M+u,L=function(n,t){const r=[];for(let o=0;o<t;o++)r.push(o<n?null:me);return r}(M,A),R="function"==typeof _?_():_;return L[1]={type:n,blueprint:L,template:r,queries:null,viewQuery:y,declTNode:t,data:L.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:C,consts:R,incompleteFirstPass:!1}}function im(n,t,r,o){const u=pm(t);null===r?u.push(o):(u.push(r),n.firstCreatePass&&fm(n).push(o,u.length-1))}function rm(n,t,r){for(let o in n)if(n.hasOwnProperty(o)){const u=n[o];(r=null===r?{}:r).hasOwnProperty(o)?r[o].push(t,u):r[o]=[t,u]}return r}function uh(n,t,r,o){let u=!1;if(cp()){const p=function(n,t,r){const o=n.directiveRegistry;let u=null;if(o)for(let p=0;p<o.length;p++){const g=o[p];Gf(r,g.selectors,!1)&&(u||(u=[]),oa(Ms(r,t),n,g.type),In(g)?(lm(n,r),u.unshift(g)):u.push(g))}return u}(n,t,r),g=null===o?null:{"":-1};if(null!==p){u=!0,um(r,n.data.length,p.length);for(let M=0;M<p.length;M++){const A=p[M];A.providersResolver&&A.providersResolver(A)}let y=!1,C=!1,_=Gr(n,t,p.length,null);for(let M=0;M<p.length;M++){const A=p[M];r.mergedAttrs=ia(r.mergedAttrs,A.hostAttrs),hm(n,r,t,_,A),qw(_,A,g),null!==A.contentQueries&&(r.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(r.flags|=128);const L=A.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(r.index),y=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r.index),C=!0),_++}!function(n,t){const o=t.directiveEnd,u=n.data,p=t.attrs,g=[];let y=null,C=null;for(let _=t.directiveStart;_<o;_++){const M=u[_],A=M.inputs,L=null===p||Ff(t)?null:Jw(A,p);g.push(L),y=rm(A,_,y),C=rm(M.outputs,_,C)}null!==y&&(y.hasOwnProperty("class")&&(t.flags|=16),y.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=g,t.inputs=y,t.outputs=C}(n,r)}g&&function(n,t,r){if(t){const o=n.localNames=[];for(let u=0;u<t.length;u+=2){const p=r[t[u+1]];if(null==p)throw new Yi("301",`Export of name '${t[u+1]}' not found!`);o.push(t[u],p)}}}(r,o,g)}return r.mergedAttrs=ia(r.mergedAttrs,r.attrs),u}function om(n,t,r,o,u,p){const g=p.hostBindings;if(g){let y=n.hostBindingOpCodes;null===y&&(y=n.hostBindingOpCodes=[]);const C=~t.index;(function(n){let t=n.length;for(;t>0;){const r=n[--t];if("number"==typeof r&&r<0)return r}return 0})(y)!=C&&y.push(C),y.push(o,u,g)}}function am(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function lm(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function qw(n,t,r){if(r){if(t.exportAs)for(let o=0;o<t.exportAs.length;o++)r[t.exportAs[o]]=n;In(t)&&(r[""]=n)}}function um(n,t,r){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+r,n.providerIndexes=t}function hm(n,t,r,o,u){n.data[o]=u;const p=u.factory||(u.factory=Ki(u.type)),g=new Ts(p,In(u),null);n.blueprint[o]=g,r[o]=g,om(n,t,0,o,Gr(n,r,u.hostVars,me),u)}function Zw(n,t,r){const o=cn(t,n),u=em(r),p=n[10],g=ba(n,Ys(n,u,null,r.onPush?64:16,o,t,p,p.createRenderer(o,r),null,null));n[t.index]=g}function Qw(n,t,r,o,u,p){const g=p[t];if(null!==g){const y=o.setInput;for(let C=0;C<g.length;){const _=g[C++],M=g[C++],A=g[C++];null!==y?o.setInput(r,A,_,M):r[M]=A}}}function Jw(n,t){let r=null,o=0;for(;o<t.length;){const u=t[o];if(0!==u)if(5!==u){if("number"==typeof u)break;n.hasOwnProperty(u)&&(null===r&&(r=[]),r.push(u,n[u],t[o+1])),o+=2}else o+=2;else o+=4}return r}function dm(n,t,r,o){return new Array(n,!0,!1,t,null,0,o,r,null,null)}function nb(n,t){const r=tn(t,n);if(au(r)){const o=r[1];80&r[2]?kr(o,r,o.template,r[8]):r[5]>0&&dh(r)}}function dh(n){for(let o=Uu(n);null!==o;o=Bu(o))for(let u=10;u<o.length;u++){const p=o[u];if(1024&p[2]){const g=p[1];kr(g,p,g.template,p[8])}else p[5]>0&&dh(p)}const r=n[1].components;if(null!==r)for(let o=0;o<r.length;o++){const u=tn(r[o],n);au(u)&&u[5]>0&&dh(u)}}function ib(n,t){const r=tn(t,n),o=r[1];(function(n,t){for(let r=t.length;r<n.blueprint.length;r++)t.push(n.blueprint[r])})(o,r),zs(o,r,r[8])}function ba(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function ch(n){for(;n;){n[2]|=64;const t=Bs(n);if($E(n)&&!t)return n;n=t}return null}function fh(n,t,r){const o=t[10];o.begin&&o.begin();try{kr(n,t,n.template,r)}catch(u){throw gm(t,u),u}finally{o.end&&o.end()}}function cm(n){!function(n){for(let t=0;t<n.components.length;t++){const r=n.components[t],o=Vu(r),u=o[1];Vw(u,o,u.template,r)}}(n[8])}function mh(n,t,r){pu(0),t(n,r)}const lb=(()=>Promise.resolve(null))();function pm(n){return n[7]||(n[7]=[])}function fm(n){return n.cleanup||(n.cleanup=[])}function gm(n,t){const r=n[9],o=r?r.get(tr,null):null;o&&o.handleError(t)}function xm(n,t,r,o,u){for(let p=0;p<r.length;){const g=r[p++],y=r[p++],C=t[g],_=n.data[g];null!==_.setInput?_.setInput(C,u,o,y):C[y]=u}}function fi(n,t,r){const o=$o(t,n);!function(n,t,r){Ze(n)?n.setValue(t,r):t.textContent=r}(n[11],o,r)}function Ta(n,t,r){let o=r?n.styles:null,u=r?n.classes:null,p=0;if(null!==t)for(let g=0;g<t.length;g++){const y=t[g];"number"==typeof y?p=y:1==p?u=Xl(u,y):2==p&&(o=Xl(o,y+": "+t[++g]+";"))}r?n.styles=o:n.stylesWithoutHost=o,r?n.classes=u:n.classesWithoutHost=u}const Ur=new Te("INJECTOR",-1);class ym{get(t,r=Rs){if(r===Rs){const o=new Error(`NullInjectorError: No provider for ${Ce(t)}!`);throw o.name="NullInjectorError",o}return r}}const Ws=new Te("Set Injector scope."),Xs={},db={};let gh;function vm(){return void 0===gh&&(gh=new ym),gh}function Cm(n,t=null,r=null,o){return new pb(n,r,t||vm(),o)}class pb{constructor(t,r,o,u=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];r&&$n(r,y=>this.processProvider(y,t,r)),$n([t],y=>this.processInjectorType(y,[],p)),this.records.set(Ur,Br(void 0,this));const g=this.records.get(Ws);this.scope=null!=g?g.value:null,this.source=u||("object"==typeof t?null:Ce(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,r=Rs,o=le.Default){this.assertNotDestroyed();const u=Rr(this),p=wi(void 0);try{if(!(o&le.SkipSelf)){let y=this.records.get(t);if(void 0===y){const C=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Te}(t)&&ui(t);y=C&&this.injectableDefInScope(C)?Br(xh(t),Xs):null,this.records.set(t,y)}if(null!=y)return this.hydrate(t,y)}return(o&le.Self?vm():this.parent).get(t,r=o&le.Optional&&r===Rs?null:r)}catch(g){if("NullInjectorError"===g.name){if((g[Or]=g[Or]||[]).unshift(Ce(t)),u)throw g;return Gp(g,t,"R3InjectorError",this.source)}throw g}finally{wi(p),Rr(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((o,u)=>t.push(Ce(u))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,r,o){if(!(t=re(t)))return!1;let u=$c(t);const p=null==u&&t.ngModule||void 0,g=void 0===p?t:p,y=-1!==o.indexOf(g);if(void 0!==p&&(u=$c(p)),null==u)return!1;if(null!=u.imports&&!y){let M;o.push(g);try{$n(u.imports,A=>{this.processInjectorType(A,r,o)&&(void 0===M&&(M=[]),M.push(A))})}finally{}if(void 0!==M)for(let A=0;A<M.length;A++){const{ngModule:L,providers:R}=M[A];$n(R,H=>this.processProvider(H,L,R||Fe))}}this.injectorDefTypes.add(g);const C=Ki(g)||(()=>new g);this.records.set(g,Br(C,Xs));const _=u.providers;if(null!=_&&!y){const M=t;$n(_,A=>this.processProvider(A,M,_))}return void 0!==p&&void 0!==t.providers}processProvider(t,r,o){let u=jr(t=re(t))?t:re(t&&t.provide);const p=function(n,t,r){return Sm(n)?Br(void 0,n.useValue):Br(Em(n),Xs)}(t);if(jr(t)||!0!==t.multi)this.records.get(u);else{let g=this.records.get(u);g||(g=Br(void 0,Xs,!0),g.factory=()=>Qi(g.multi),this.records.set(u,g)),u=t,g.multi.push(t)}this.records.set(u,p)}hydrate(t,r){return r.value===Xs&&(r.value=db,r.value=r.factory()),"object"==typeof r.value&&r.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(r.value)&&this.onDestroy.add(r.value),r.value}injectableDefInScope(t){if(!t.providedIn)return!1;const r=re(t.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function xh(n){const t=ui(n),r=null!==t?t.factory:Ki(n);if(null!==r)return r;if(n instanceof Te)throw new Error(`Token ${Ce(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const t=n.length;if(t>0){const o=function(n,t){const r=[];for(let o=0;o<n;o++)r.push(t);return r}(t,"?");throw new Error(`Can't resolve all parameters for ${Ce(n)}: (${o.join(", ")}).`)}const r=function(n){const t=n&&(n[Uo]||n[Kc]);if(t){const r=function(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),t}return null}(n);return null!==r?()=>r.factory(n):()=>new n}(n);throw new Error("unreachable")}function Em(n,t,r){let o;if(jr(n)){const u=re(n);return Ki(u)||xh(u)}if(Sm(n))o=()=>re(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))o=()=>n.useFactory(...Qi(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))o=()=>fe(re(n.useExisting));else{const u=re(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return Ki(u)||xh(u);o=()=>new u(...Qi(n.deps))}return o}function Br(n,t,r=!1){return{factory:n,value:t,multi:r?[]:void 0}}function Sm(n){return null!==n&&"object"==typeof n&&Mu in n}function jr(n){return"function"==typeof n}const _m=function(n,t,r){return function(n,t=null,r=null,o){const u=Cm(n,t,r,o);return u._resolveInjectorDefTypes(),u}({name:r},t,n,r)};let Be=(()=>{class n{static create(r,o){return Array.isArray(r)?_m(r,o,""):_m(r.providers,r.parent,r.name||"")}}return n.THROW_IF_NOT_FOUND=Rs,n.NULL=new ym,n.\u0275prov=be({token:n,providedIn:"any",factory:()=>fe(Ur)}),n.__NG_ELEMENT_ID__=-1,n})();function Pb(n,t){Jo(Vu(n)[1],dt())}function ze(n){let t=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),r=!0;const o=[n];for(;t;){let u;if(In(n))u=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");u=t.\u0275dir}if(u){if(r){o.push(u);const g=n;g.inputs=_h(n.inputs),g.declaredInputs=_h(n.declaredInputs),g.outputs=_h(n.outputs);const y=u.hostBindings;y&&Fb(n,y);const C=u.viewQuery,_=u.contentQueries;if(C&&Hb(n,C),_&&Vb(n,_),Wl(n.inputs,u.inputs),Wl(n.declaredInputs,u.declaredInputs),Wl(n.outputs,u.outputs),In(u)&&u.data.animation){const M=n.data;M.animation=(M.animation||[]).concat(u.data.animation)}}const p=u.features;if(p)for(let g=0;g<p.length;g++){const y=p[g];y&&y.ngInherit&&y(n),y===ze&&(r=!1)}}t=Object.getPrototypeOf(t)}!function(n){let t=0,r=null;for(let o=n.length-1;o>=0;o--){const u=n[o];u.hostVars=t+=u.hostVars,u.hostAttrs=ia(u.hostAttrs,r=ia(r,u.hostAttrs))}}(o)}function _h(n){return n===xr?{}:n===Fe?[]:n}function Hb(n,t){const r=n.viewQuery;n.viewQuery=r?(o,u)=>{t(o,u),r(o,u)}:t}function Vb(n,t){const r=n.contentQueries;n.contentQueries=r?(o,u,p)=>{t(o,u,p),r(o,u,p)}:t}function Fb(n,t){const r=n.hostBindings;n.hostBindings=r?(o,u)=>{t(o,u),r(o,u)}:t}let Da=null;function Yr(){if(!Da){const n=Ae.Symbol;if(n&&n.iterator)Da=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<t.length;++r){const o=t[r];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Da=o)}}}return Da}function Ks(n){return!!wh(n)&&(Array.isArray(n)||!(n instanceof Map)&&Yr()in n)}function wh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Dt(n,t,r){return!Object.is(n[t],r)&&(n[t]=r,!0)}function bh(n,t,r,o,u,p,g,y){const C=$(),_=Me(),M=n+20,A=_.firstCreatePass?function(n,t,r,o,u,p,g,y,C){const _=t.consts,M=Fr(t,n,4,g||null,Di(_,y));uh(t,r,M,Di(_,C)),Jo(t,M);const A=M.tViews=wa(2,M,o,u,p,t.directiveRegistry,t.pipeRegistry,null,t.schemas,_);return null!==t.queries&&(t.queries.template(t,M),A.queries=t.queries.embeddedTView(M)),M}(M,_,C,t,r,o,u,p,g):_.data[M];Wn(A,!1);const L=C[11].createComment("");va(_,C,L,A),Tt(L,C),ba(C,C[M]=dm(L,C,L,A)),Xo(A)&&ah(_,C,A),null!=g&&lh(C,A,y)}function q(n,t=le.Default){const r=$();return null===r?fe(n,t):Ap(dt(),r,re(n),t)}function xi(n,t,r){const o=$();return Dt(o,wr(),t)&&function(n,t,r,o,u,p,g,y){const C=cn(t,r);let M,_=t.inputs;!y&&null!=_&&(M=_[o])?(xm(n,r,M,o,u),Wo(t)&&function(n,t){const r=tn(t,n);16&r[2]||(r[2]|=64)}(r,t.index)):3&t.type&&(o=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(o),u=null!=g?g(u,t.value||"",o):u,Ze(p)?p.setProperty(C,o,u):gu(o)||(C.setProperty?C.setProperty(o,u):C[o]=u))}(Me(),function(){const n=ce.lFrame;return ou(n.tView,n.selectedIndex)}(),o,n,t,o[11],r,!1),xi}function Ah(n,t,r,o,u){const g=u?"class":"style";xm(n,r,t.inputs[g],g,o)}function vt(n,t,r,o){const u=$(),p=Me(),g=20+n,y=u[11],C=u[g]=Yu(y,t,ce.lFrame.currentNamespace),_=p.firstCreatePass?function(n,t,r,o,u,p,g){const y=t.consts,_=Fr(t,n,2,u,Di(y,p));return uh(t,r,_,Di(y,g)),null!==_.attrs&&Ta(_,_.attrs,!1),null!==_.mergedAttrs&&Ta(_,_.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,_),_}(g,p,u,0,t,r,o):p.data[g];Wn(_,!0);const M=_.mergedAttrs;null!==M&&na(y,C,M);const A=_.classes;null!==A&&qu(y,C,A);const L=_.styles;null!==L&&Nf(y,C,L),64!=(64&_.flags)&&va(p,u,C,_),0===ce.lFrame.elementDepthCount&&Tt(C,u),ce.lFrame.elementDepthCount++,Xo(_)&&(ah(p,u,_),function(n,t,r){if(tu(t)){const u=t.directiveEnd;for(let p=t.directiveStart;p<u;p++){const g=n.data[p];g.contentQueries&&g.contentQueries(1,r[p],p)}}}(p,_,u)),null!==o&&lh(u,_)}function Ct(){let n=dt();uu()?ce.lFrame.isParent=!1:(n=n.parent,Wn(n,!1));const t=n;ce.lFrame.elementDepthCount--;const r=Me();r.firstCreatePass&&(Jo(r,n),tu(n)&&r.queries.elementEnd(n)),null!=t.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(t)&&Ah(r,t,$(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(t)&&Ah(r,t,$(),t.stylesWithoutHost,!1)}function rr(n,t,r,o){vt(n,t,r,o),Ct()}function Aa(n){return!!n&&"function"==typeof n.then}const Lh=function(n){return!!n&&"function"==typeof n.subscribe};function Ft(n,t,r,o){const u=$(),p=Me(),g=dt();return function(n,t,r,o,u,p,g,y){const C=Xo(o),M=n.firstCreatePass&&fm(n),A=t[8],L=pm(t);let R=!0;if(3&o.type||y){const G=cn(o,t),W=y?y(G):G,z=L.length,ie=y?se=>y(ot(se[o.index])):o.index;if(Ze(r)){let se=null;if(!y&&C&&(se=function(n,t,r,o){const u=n.cleanup;if(null!=u)for(let p=0;p<u.length-1;p+=2){const g=u[p];if(g===r&&u[p+1]===o){const y=t[7],C=u[p+2];return y.length>C?y[C]:null}"string"==typeof g&&(p+=2)}return null}(n,t,u,o.index)),null!==se)(se.__ngLastListenerFn__||se).__ngNextListenerFn__=p,se.__ngLastListenerFn__=p,R=!1;else{p=Oh(o,t,A,p,!1);const Ee=r.listen(W,u,p);L.push(p,Ee),M&&M.push(u,ie,z,z+1)}}else p=Oh(o,t,A,p,!0),W.addEventListener(u,p,g),L.push(p),M&&M.push(u,ie,z,g)}else p=Oh(o,t,A,p,!1);const H=o.outputs;let U;if(R&&null!==H&&(U=H[u])){const G=U.length;if(G)for(let W=0;W<G;W+=2){const mt=t[U[W]][U[W+1]].subscribe(p),En=L.length;L.push(p,mt),M&&M.push(u,o.index,En,-(En+1))}}}(p,u,u[11],g,n,t,!!r,o),Ft}function cg(n,t,r,o){try{return!1!==r(o)}catch(u){return gm(n,u),!1}}function Oh(n,t,r,o,u){return function p(g){if(g===Function)return o;const y=2&n.flags?tn(n.index,t):t;0==(32&t[2])&&ch(y);let C=cg(t,0,o,g),_=p.__ngNextListenerFn__;for(;_;)C=cg(t,0,_,g)&&C,_=_.__ngNextListenerFn__;return u&&!1===C&&(g.preventDefault(),g.returnValue=!1),C}}function Sg(n,t,r,o,u){const p=n[r+1],g=null===t;let y=o?Ln(p):ci(p),C=!1;for(;0!==y&&(!1===C||g);){const M=n[y+1];DT(n[y],t)&&(C=!0,n[y+1]=o?Ju(M):Zu(M)),y=o?Ln(M):ci(M)}C&&(n[r+1]=o?Zu(p):Ju(p))}function DT(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Lr(n,t)>=0}function La(n,t){return function(n,t,r,o){const u=$(),p=Me(),g=function(n){const t=ce.lFrame,r=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,r}(2);p.firstUpdatePass&&function(n,t,r,o){const u=n.data;if(null===u[r+1]){const p=u[Ht()],g=function(n,t){return t>=n.expandoStartIndex}(n,r);(function(n,t){return 0!=(n.flags&(t?16:32))})(p,o)&&null===t&&!g&&(t=!1),t=function(n,t,r,o){const u=function(n){const t=ce.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let p=o?t.residualClasses:t.residualStyles;if(null===u)0===(o?t.classBindings:t.styleBindings)&&(r=Zs(r=Ph(null,n,t,r,o),t.attrs,o),p=null);else{const g=t.directiveStylingLast;if(-1===g||n[g]!==u)if(r=Ph(u,n,t,r,o),null===p){let C=function(n,t,r){const o=r?t.classBindings:t.styleBindings;if(0!==ci(o))return n[Ln(o)]}(n,t,o);void 0!==C&&Array.isArray(C)&&(C=Ph(null,n,t,C[1],o),C=Zs(C,t.attrs,o),function(n,t,r,o){n[Ln(r?t.classBindings:t.styleBindings)]=o}(n,t,o,C))}else p=function(n,t,r){let o;const u=t.directiveEnd;for(let p=1+t.directiveStylingLast;p<u;p++)o=Zs(o,n[p].hostAttrs,r);return Zs(o,t.attrs,r)}(n,t,o)}return void 0!==p&&(o?t.residualClasses=p:t.residualStyles=p),r}(u,p,t,o),function(n,t,r,o,u,p){let g=p?t.classBindings:t.styleBindings,y=Ln(g),C=ci(g);n[o]=r;let M,_=!1;if(Array.isArray(r)){const A=r;M=A[1],(null===M||Lr(A,M)>0)&&(_=!0)}else M=r;if(u)if(0!==C){const L=Ln(n[y+1]);n[o+1]=Ea(L,y),0!==L&&(n[L+1]=Qu(n[L+1],o)),n[y+1]=function(n,t){return 131071&n|t<<17}(n[y+1],o)}else n[o+1]=Ea(y,0),0!==y&&(n[y+1]=Qu(n[y+1],o)),y=o;else n[o+1]=Ea(C,0),0===y?y=o:n[C+1]=Qu(n[C+1],o),C=o;_&&(n[o+1]=Zu(n[o+1])),Sg(n,M,o,!0),Sg(n,M,o,!1),function(n,t,r,o,u){const p=u?n.residualClasses:n.residualStyles;null!=p&&"string"==typeof t&&Lr(p,t)>=0&&(r[o+1]=Ju(r[o+1]))}(t,M,n,o,p),g=Ea(y,C),p?t.classBindings=g:t.styleBindings=g}(u,p,t,r,g,o)}}(p,n,g,o),t!==me&&Dt(u,g,t)&&function(n,t,r,o,u,p,g,y){if(!(3&t.type))return;const C=n.data,_=C[y+1];Oa(function(n){return 1==(1&n)}(_)?Pg(C,t,r,u,ci(_),g):void 0)||(Oa(p)||function(n){return 2==(2&n)}(_)&&(p=Pg(C,null,r,u,y,g)),function(n,t,r,o,u){const p=Ze(n);if(t)u?p?n.addClass(r,o):r.classList.add(o):p?n.removeClass(r,o):r.classList.remove(o);else{let g=-1===o.indexOf("-")?void 0:sn.DashCase;if(null==u)p?n.removeStyle(r,o,g):r.style.removeProperty(o);else{const y="string"==typeof u&&u.endsWith("!important");y&&(u=u.slice(0,-10),g|=sn.Important),p?n.setStyle(r,o,u,g):r.style.setProperty(o,u,y?"important":"")}}}(o,g,$o(Ht(),r),u,p))}(p,p.data[Ht()],u,u[11],n,u[g+1]=function(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Ce(function(n){return n instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(t,r),o,g)}(n,t,null,!0),La}function Ph(n,t,r,o,u){let p=null;const g=r.directiveEnd;let y=r.directiveStylingLast;for(-1===y?y=r.directiveStart:y++;y<g&&(p=t[y],o=Zs(o,p.hostAttrs,u),p!==n);)y++;return null!==n&&(r.directiveStylingLast=y),o}function Zs(n,t,r){const o=r?1:2;let u=-1;if(null!==t)for(let p=0;p<t.length;p++){const g=t[p];"number"==typeof g?u=g:u===o&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),nn(n,g,!!r||t[++p]))}return void 0===n?null:n}function Pg(n,t,r,o,u,p){const g=null===t;let y;for(;u>0;){const C=n[u],_=Array.isArray(C),M=_?C[1]:C,A=null===M;let L=r[u+1];L===me&&(L=A?Fe:void 0);let R=A?wu(L,o):M===o?L:void 0;if(_&&!Oa(R)&&(R=wu(C,o)),Oa(R)&&(y=R,g))return y;const H=n[u+1];u=g?Ln(H):ci(H)}if(null!==t){let C=p?t.residualClasses:t.residualStyles;null!=C&&(y=wu(C,o))}return y}function Oa(n){return void 0!==n}function ii(n,t=""){const r=$(),o=Me(),u=n+20,p=o.firstCreatePass?Fr(o,u,1,t,null):o.data[u],g=r[u]=function(n,t){return Ze(n)?n.createText(t):n.createTextNode(t)}(r[11],t);va(o,r,g,p),Wn(p,!1)}function Ra(n){return Nh("",n,""),Ra}function Nh(n,t,r){const o=$(),u=function(n,t,r,o){return Dt(n,wr(),r)?t+xe(r)+o:me}(o,n,t,r);return u!==me&&fi(o,Ht(),u),Nh}const sr=void 0;var l0=["en",[["a","p"],["AM","PM"],sr],[["AM","PM"],sr,sr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sr,"{1} 'at' {0}",sr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let ns={};function nx(n){return n in ns||(ns[n]=Ae.ng&&Ae.ng.common&&Ae.ng.common.locales&&Ae.ng.common.locales[n]),ns[n]}var ne=(()=>((ne=ne||{})[ne.LocaleId=0]="LocaleId",ne[ne.DayPeriodsFormat=1]="DayPeriodsFormat",ne[ne.DayPeriodsStandalone=2]="DayPeriodsStandalone",ne[ne.DaysFormat=3]="DaysFormat",ne[ne.DaysStandalone=4]="DaysStandalone",ne[ne.MonthsFormat=5]="MonthsFormat",ne[ne.MonthsStandalone=6]="MonthsStandalone",ne[ne.Eras=7]="Eras",ne[ne.FirstDayOfWeek=8]="FirstDayOfWeek",ne[ne.WeekendRange=9]="WeekendRange",ne[ne.DateFormat=10]="DateFormat",ne[ne.TimeFormat=11]="TimeFormat",ne[ne.DateTimeFormat=12]="DateTimeFormat",ne[ne.NumberSymbols=13]="NumberSymbols",ne[ne.NumberFormats=14]="NumberFormats",ne[ne.CurrencyCode=15]="CurrencyCode",ne[ne.CurrencySymbol=16]="CurrencySymbol",ne[ne.CurrencyName=17]="CurrencyName",ne[ne.Currencies=18]="Currencies",ne[ne.Directionality=19]="Directionality",ne[ne.PluralCase=20]="PluralCase",ne[ne.ExtraData=21]="ExtraData",ne))();const Pa="en-US";let ix=Pa;function Hh(n){Zt(n,"Expected localeId to be defined"),"string"==typeof n&&(ix=n.toLowerCase().replace(/_/g,"-"))}function Gh(n,t,r,o,u){if(n=re(n),Array.isArray(n))for(let p=0;p<n.length;p++)Gh(n[p],t,r,o,u);else{const p=Me(),g=$();let y=jr(n)?n:re(n.provide),C=Em(n);const _=dt(),M=1048575&_.providerIndexes,A=_.directiveStart,L=_.providerIndexes>>20;if(jr(n)||!n.multi){const R=new Ts(C,u,q),H=Uh(y,t,u?M:M+L,A);-1===H?(oa(Ms(_,g),p,y),kh(p,n,t.length),t.push(y),_.directiveStart++,_.directiveEnd++,u&&(_.providerIndexes+=1048576),r.push(R),g.push(R)):(r[H]=R,g[H]=R)}else{const R=Uh(y,t,M+L,A),H=Uh(y,t,M,M+L),U=R>=0&&r[R],G=H>=0&&r[H];if(u&&!G||!u&&!U){oa(Ms(_,g),p,y);const W=function(n,t,r,o,u){const p=new Ts(n,r,q);return p.multi=[],p.index=t,p.componentProviders=0,Dx(p,u,o&&!r),p}(u?sD:rD,r.length,u,o,C);!u&&G&&(r[H].providerFactory=W),kh(p,n,t.length,0),t.push(y),_.directiveStart++,_.directiveEnd++,u&&(_.providerIndexes+=1048576),r.push(W),g.push(W)}else kh(p,n,R>-1?R:H,Dx(r[u?H:R],C,!u&&o));!u&&o&&G&&r[H].componentProviders++}}}function kh(n,t,r,o){const u=jr(t);if(u||function(n){return!!n.useClass}(t)){const g=(t.useClass||t).prototype.ngOnDestroy;if(g){const y=n.destroyHooks||(n.destroyHooks=[]);if(!u&&t.multi){const C=y.indexOf(r);-1===C?y.push(r,[o,g]):y[C+1].push(o,g)}else y.push(r,g)}}}function Dx(n,t,r){return r&&n.componentProviders++,n.multi.push(t)-1}function Uh(n,t,r,o){for(let u=r;u<o;u++)if(t[u]===n)return u;return-1}function rD(n,t,r,o){return Bh(this.multi,[])}function sD(n,t,r,o){const u=this.multi;let p;if(this.providerFactory){const g=this.providerFactory.componentProviders,y=Is(r,r[1],this.providerFactory.index,o);p=y.slice(0,g),Bh(u,p);for(let C=g;C<y.length;C++)p.push(y[C])}else p=[],Bh(u,p);return p}function Bh(n,t){for(let r=0;r<n.length;r++)t.push((0,n[r])());return t}function $e(n,t=[]){return r=>{r.providersResolver=(o,u)=>function(n,t,r){const o=Me();if(o.firstCreatePass){const u=In(n);Gh(r,o.data,o.blueprint,u,!0),Gh(t,o.data,o.blueprint,u,!1)}}(o,u?u(n):n,t)}}class Mx{}const Ax="ngComponent";class lD{resolveComponentFactory(t){throw function(n){const t=Error(`No component factory found for ${Ce(n)}. Did you add it to @NgModule.entryComponents?`);return t[Ax]=n,t}(t)}}let rs=(()=>{class n{}return n.NULL=new lD,n})();function Ga(...n){}function ss(n,t){return new Et(cn(n,t))}const dD=function(){return ss(dt(),$())};let Et=(()=>{class n{constructor(r){this.nativeElement=r}}return n.__NG_ELEMENT_ID__=dD,n})();function Lx(n){return n instanceof Et?n.nativeElement:n}class ka{}let or=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>pD(),n})();const pD=function(){const n=$(),r=tn(dt().index,n);return function(n){return n[11]}(zn(r)?r:n)};let Yh=(()=>{class n{}return n.\u0275prov=be({token:n,providedIn:"root",factory:()=>null}),n})();class Ua{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ox=new Ua("12.2.9");class Rx{constructor(){}supports(t){return Ks(t)}create(t){return new xD(t)}}const gD=(n,t)=>t;class xD{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||gD}forEachItem(t){let r;for(r=this._itHead;null!==r;r=r._next)t(r)}forEachOperation(t){let r=this._itHead,o=this._removalsHead,u=0,p=null;for(;r||o;){const g=!o||r&&r.currentIndex<Nx(o,u,p)?r:o,y=Nx(g,u,p),C=g.currentIndex;if(g===o)u--,o=o._nextRemoved;else if(r=r._next,null==g.previousIndex)u++;else{p||(p=[]);const _=y-u,M=C-u;if(_!=M){for(let L=0;L<_;L++){const R=L<p.length?p[L]:p[L]=0,H=R+L;M<=H&&H<_&&(p[L]=R+1)}p[g.previousIndex]=M-_}}y!==C&&t(g,y,C)}}forEachPreviousItem(t){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachMovedItem(t){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}forEachIdentityChange(t){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)t(r)}diff(t){if(null==t&&(t=[]),!Ks(t))throw new Error(`Error trying to diff '${Ce(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let u,p,g,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let y=0;y<this.length;y++)p=t[y],g=this._trackByFn(y,p),null!==r&&Object.is(r.trackById,g)?(o&&(r=this._verifyReinsertion(r,p,g,y)),Object.is(r.item,p)||this._addIdentityChange(r,p)):(r=this._mismatch(r,p,g,y),o=!0),r=r._next}else u=0,function(n,t){if(Array.isArray(n))for(let r=0;r<n.length;r++)t(n[r]);else{const r=n[Yr()]();let o;for(;!(o=r.next()).done;)t(o.value)}}(t,y=>{g=this._trackByFn(u,y),null!==r&&Object.is(r.trackById,g)?(o&&(r=this._verifyReinsertion(r,y,g,u)),Object.is(r.item,y)||this._addIdentityChange(r,y)):(r=this._mismatch(r,y,g,u),o=!0),r=r._next,u++}),this.length=u;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,r,o,u){let p;return null===t?p=this._itTail:(p=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._reinsertAfter(t,p,u)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,u))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._moveAfter(t,p,u)):t=this._addAfter(new yD(r,o),p,u),t}_verifyReinsertion(t,r,o,u){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==p?t=this._reinsertAfter(p,t._prev,u):t.currentIndex!=u&&(t.currentIndex=u,this._addToMoves(t,u)),t}_truncate(t){for(;null!==t;){const r=t._next;this._addToRemovals(this._unlink(t)),t=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const u=t._prevRemoved,p=t._nextRemoved;return null===u?this._removalsHead=p:u._nextRemoved=p,null===p?this._removalsTail=u:p._prevRemoved=u,this._insertAfter(t,r,o),this._addToMoves(t,o),t}_moveAfter(t,r,o){return this._unlink(t),this._insertAfter(t,r,o),this._addToMoves(t,o),t}_addAfter(t,r,o){return this._insertAfter(t,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,r,o){const u=null===r?this._itHead:r._next;return t._next=u,t._prev=r,null===u?this._itTail=t:u._prev=t,null===r?this._itHead=t:r._next=t,null===this._linkedRecords&&(this._linkedRecords=new Px),this._linkedRecords.put(t),t.currentIndex=o,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const r=t._prev,o=t._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,t}_addToMoves(t,r){return t.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Px),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,r){return t.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class yD{constructor(t,r){this.item=t,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vD{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}remove(t){const r=t._prevDup,o=t._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class Px{constructor(){this.map=new Map}put(t){const r=t.trackById;let o=this.map.get(r);o||(o=new vD,this.map.set(r,o)),o.add(t)}get(t,r){const u=this.map.get(t);return u?u.get(t,r):null}remove(t){const r=t.trackById;return this.map.get(r).remove(t)&&this.map.delete(r),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nx(n,t,r){const o=n.previousIndex;if(null===o)return o;let u=0;return r&&o<r.length&&(u=r[o]),o+t+u}class Hx{constructor(){}supports(t){return t instanceof Map||wh(t)}create(){return new CD}}class CD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let r;for(r=this._mapHead;null!==r;r=r._next)t(r)}forEachPreviousItem(t){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)t(r)}forEachChangedItem(t){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}diff(t){if(t){if(!(t instanceof Map||wh(t)))throw new Error(`Error trying to diff '${Ce(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(t,(o,u)=>{if(r&&r.key===u)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const p=this._getOrCreateRecordForKey(u,o);r=this._insertBeforeOrAppend(r,p)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,r){if(t){const o=t._prev;return r._next=t,r._prev=o,t._prev=r,o&&(o._next=r),t===this._mapHead&&(this._mapHead=r),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(t,r){if(this._records.has(t)){const u=this._records.get(t);this._maybeAddToChanges(u,r);const p=u._prev,g=u._next;return p&&(p._next=g),g&&(g._prev=p),u._next=null,u._prev=null,u}const o=new ED(t);return this._records.set(t,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,r){Object.is(r,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=r,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,r){t instanceof Map?t.forEach(r):Object.keys(t).forEach(o=>r(t[o],o))}}class ED{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Vx(){return new no([new Rx])}let no=(()=>{class n{constructor(r){this.factories=r}static create(r,o){if(null!=o){const u=o.factories.slice();r=r.concat(u)}return new n(r)}static extend(r){return{provide:n,useFactory:o=>n.create(r,o||Vx()),deps:[[n,new Ji,new Kn]]}}find(r){const o=this.factories.find(u=>u.supports(r));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(n){return n.name||typeof n}(r)}'`)}}return n.\u0275prov=be({token:n,providedIn:"root",factory:Vx}),n})();function Fx(){return new os([new Hx])}let os=(()=>{class n{constructor(r){this.factories=r}static create(r,o){if(o){const u=o.factories.slice();r=r.concat(u)}return new n(r)}static extend(r){return{provide:n,useFactory:o=>n.create(r,o||Fx()),deps:[[n,new Ji,new Kn]]}}find(r){const o=this.factories.find(u=>u.supports(r));if(o)return o;throw new Error(`Cannot find a differ supporting object '${r}'`)}}return n.\u0275prov=be({token:n,providedIn:"root",factory:Fx}),n})();function Ba(n,t,r,o,u=!1){for(;null!==r;){const p=t[r.index];if(null!==p&&o.push(ot(p)),Mn(p))for(let y=10;y<p.length;y++){const C=p[y],_=C[1].firstChild;null!==_&&Ba(C[1],C,_,o)}const g=r.type;if(8&g)Ba(n,t,r.child,o);else if(32&g){const y=ku(r,t);let C;for(;C=y();)o.push(C)}else if(16&g){const y=Of(t,r);if(Array.isArray(y))o.push(...y);else{const C=Bs(t[16]);Ba(C[1],C,y,o,!0)}}r=u?r.projectionNext:r.next}return o}class io{constructor(t,r){this._lView=t,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,r=t[1];return Ba(r,t,r.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Mn(t)){const r=t[8],o=r?r.indexOf(this):-1;o>-1&&(zu(t,o),Zi(r,o))}this._attachedToViewContainer=!1}_f(this._lView[1],this._lView)}onDestroy(t){im(this._lView[1],this._lView,null,t)}markForCheck(){ch(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,t,r){qo(!0);try{fh(n,t,r)}finally{qo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,t){js(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class _D extends io{constructor(t){super(t),this._view=t}detectChanges(){cm(this._view)}checkNoChanges(){!function(n){qo(!0);try{cm(n)}finally{qo(!1)}}(this._view)}get context(){return null}}const ID=[new Hx],LD=new no([new Rx]),OD=new os(ID),PD=function(){return ja(dt(),$())};let yi=(()=>{class n{}return n.__NG_ELEMENT_ID__=PD,n})();const ND=yi,HD=class extends ND{constructor(t,r,o){super(),this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}createEmbeddedView(t){const r=this._declarationTContainer.tViews,o=Ys(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(o[19]=p.createEmbeddedView(r)),zs(r,o,t),new io(o)}};function ja(n,t){return 4&n.type?new HD(t,n,ss(n,t)):null}class ar{}const kD=function(){return Ux(dt(),$())};let ri=(()=>{class n{}return n.__NG_ELEMENT_ID__=kD,n})();const BD=ri,Gx=class extends BD{constructor(t,r,o){super(),this._lContainer=t,this._hostTNode=r,this._hostLView=o}get element(){return ss(this._hostTNode,this._hostLView)}get injector(){return new Dr(this._hostTNode,this._hostLView)}get parentInjector(){const t=sa(this._hostTNode,this._hostLView);if(bp(t)){const r=Tr(t,this._hostLView),o=br(t);return new Dr(r[1].data[o+8],r)}return new Dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const r=kx(this._lContainer);return null!==r&&r[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,r,o){const u=t.createEmbeddedView(r||{});return this.insert(u,o),u}createComponent(t,r,o,u,p){const g=o||this.parentInjector;if(!p&&null==t.ngModule&&g){const C=g.get(ar,null);C&&(p=C)}const y=t.create(g,u,void 0,p);return this.insert(y.hostView,r),y}insert(t,r){const o=t._lView,u=o[1];if(function(n){return Mn(n[3])}(o)){const M=this.indexOf(t);if(-1!==M)this.detach(M);else{const A=o[3],L=new Gx(A,A[6],A[3]);L.detach(L.indexOf(t))}}const p=this._adjustIndex(r),g=this._lContainer;!function(n,t,r,o){const u=10+o,p=r.length;o>0&&(r[u-1][4]=t),o<p-10?(t[4]=r[u],ua(r,10+o,t)):(r.push(t),t[4]=null),t[3]=r;const g=t[17];null!==g&&r!==g&&function(n,t){const r=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===r?n[9]=[t]:r.push(t)}(g,t);const y=t[19];null!==y&&y.insertView(n),t[2]|=128}(u,o,g,p);const y=$u(p,g),C=o[11],_=ya(C,g[7]);return null!==_&&function(n,t,r,o,u,p){o[0]=u,o[6]=t,js(n,o,r,1,u,p)}(u,g[6],C,o,_,y),t.attachToViewContainerRef(),ua(zh(g),p,t),t}move(t,r){return this.insert(t,r)}indexOf(t){const r=kx(this._lContainer);return null!==r?r.indexOf(t):-1}remove(t){const r=this._adjustIndex(t,-1),o=zu(this._lContainer,r);o&&(Zi(zh(this._lContainer),r),_f(o[1],o))}detach(t){const r=this._adjustIndex(t,-1),o=zu(this._lContainer,r);return o&&null!=Zi(zh(this._lContainer),r)?new io(o):null}_adjustIndex(t,r=0){return null==t?this.length+r:t}};function kx(n){return n[8]}function zh(n){return n[8]||(n[8]=[])}function Ux(n,t){let r;const o=t[n.index];if(Mn(o))r=o;else{let u;if(8&n.type)u=ot(o);else{const p=t[11];u=p.createComment("");const g=cn(n,t);nr(p,ya(p,g),u,function(n,t){return Ze(n)?n.nextSibling(t):t.nextSibling}(p,g),!1)}t[n.index]=r=dm(o,t,u,n),ba(t,r)}return new Gx(r,n,t)}const hs={};class ay extends rs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const r=Pt(t);return new uy(r,this.ngModule)}}function ly(n){const t=[];for(let r in n)n.hasOwnProperty(r)&&t.push({propName:n[r],templateName:r});return t}const FM=new Te("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mf});class uy extends Mx{constructor(t,r){super(),this.componentDef=t,this.ngModule=r,this.componentType=t.type,this.selector=function(n){return n.map(ww).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return ly(this.componentDef.inputs)}get outputs(){return ly(this.componentDef.outputs)}create(t,r,o,u){const p=(u=u||this.ngModule)?function(n,t){return{get:(r,o,u)=>{const p=n.get(r,hs,u);return p!==hs||o===hs?p:t.get(r,o,u)}}}(t,u.injector):t,g=p.get(ka,up),y=p.get(Yh,null),C=g.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",M=o?function(n,t,r){if(Ze(n))return n.selectRootElement(t,r===ht.ShadowDom);let o="string"==typeof t?n.querySelector(t):t;return o.textContent="",o}(C,o,this.componentDef.encapsulation):Yu(g.createRenderer(null,this.componentDef),_,function(n){const t=n.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(_)),A=this.componentDef.onPush?576:528,L=function(n,t){return{components:[],scheduler:n||mf,clean:lb,playerHandler:t||null,flags:0}}(),R=wa(0,null,null,1,0,null,null,null,null,null),H=Ys(null,R,L,A,null,null,g,C,y,p);let U,G;Zo(H);try{const W=function(n,t,r,o,u,p){const g=r[1];r[20]=n;const C=Fr(g,20,2,"#host",null),_=C.mergedAttrs=t.hostAttrs;null!==_&&(Ta(C,_,!0),null!==n&&(na(u,n,_),null!==C.classes&&qu(u,n,C.classes),null!==C.styles&&Nf(u,n,C.styles)));const M=o.createRenderer(n,t),A=Ys(r,em(t),null,t.onPush?64:16,r[20],C,o,M,p||null,null);return g.firstCreatePass&&(oa(Ms(C,r),g,t.type),lm(g,C),um(C,r.length,1)),ba(r,A),r[20]=A}(M,this.componentDef,H,g,C);if(M)if(o)na(C,M,["ng-version",Ox.full]);else{const{attrs:z,classes:ie}=function(n){const t=[],r=[];let o=1,u=2;for(;o<n.length;){let p=n[o];if("string"==typeof p)2===u?""!==p&&t.push(p,n[++o]):8===u&&r.push(p);else{if(!An(u))break;u=p}o++}return{attrs:t,classes:r}}(this.componentDef.selectors[0]);z&&na(C,M,z),ie&&ie.length>0&&qu(C,M,ie.join(" "))}if(G=ou(R,20),void 0!==r){const z=G.projection=[];for(let ie=0;ie<this.ngContentSelectors.length;ie++){const se=r[ie];z.push(null!=se?Array.from(se):null)}}U=function(n,t,r,o,u){const p=r[1],g=function(n,t,r){const o=dt();n.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),hm(n,o,t,Gr(n,t,1,null),r));const u=Is(t,n,o.directiveStart,o);Tt(u,t);const p=cn(o,t);return p&&Tt(p,t),u}(p,r,t);if(o.components.push(g),n[8]=g,u&&u.forEach(C=>C(g,t)),t.contentQueries){const C=dt();t.contentQueries(1,g,C.directiveStart)}const y=dt();return!p.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Mi(y.index),om(r[1],y,0,y.directiveStart,y.directiveEnd,t),am(t,g)),g}(W,this.componentDef,H,L,[Pb]),zs(R,H,null)}finally{Qo()}return new UM(this.componentType,U,ss(G,H),H,G)}}class UM extends class{}{constructor(t,r,o,u,p){super(),this.location=o,this._rootLView=u,this._tNode=p,this.instance=r,this.hostView=this.changeDetectorRef=new _D(u),this.componentType=t}get injector(){return new Dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ds=new Map;class YM extends ar{constructor(t,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ay(this);const o=un(t),u=function(n){return n[kE]||null}(t);u&&Hh(u),this._bootstrapComponents=Qn(o.bootstrap),this._r3Injector=Cm(t,r,[{provide:ar,useValue:this},{provide:rs,useValue:this.componentFactoryResolver}],Ce(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,r=Be.THROW_IF_NOT_FOUND,o=le.Default){return t===Be||t===ar||t===Ur?this:this._r3Injector.get(t,r,o)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class sd extends class{}{constructor(t){super(),this.moduleType=t,null!==un(t)&&function(n){const t=new Set;!function r(o){const u=un(o,!0),p=u.id;null!==p&&(function(n,t,r){if(t&&t!==r)throw new Error(`Duplicate module registered for ${n} - ${Ce(t)} vs ${Ce(t.name)}`)}(p,ds.get(p),o),ds.set(p,o));const g=Qn(u.imports);for(const y of g)t.has(y)||(t.add(y),r(y))}(n)}(t)}create(t){return new YM(this.moduleType,t)}}function od(n){return t=>{setTimeout(n,void 0,t)}}const At=class extends oe{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,r,o){var u,p,g;let y=t,C=r||(()=>null),_=o;if(t&&"object"==typeof t){const A=t;y=null===(u=A.next)||void 0===u?void 0:u.bind(A),C=null===(p=A.error)||void 0===p?void 0:p.bind(A),_=null===(g=A.complete)||void 0===g?void 0:g.bind(A)}this.__isAsync&&(C=od(C),y&&(y=od(y)),_&&(_=od(_)));const M=super.subscribe({next:y,error:C,complete:_});return t instanceof S&&t.add(M),M}};function uI(){return this._results[Yr()]()}class $a{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=Yr(),o=$a.prototype;o[r]||(o[r]=uI)}get changes(){return this._changes||(this._changes=new At)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,r){return this._results.reduce(t,r)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,r){const o=this;o.dirty=!1;const u=fn(t);(this._changesDetected=!function(n,t,r){if(n.length!==t.length)return!1;for(let o=0;o<n.length;o++){let u=n[o],p=t[o];if(r&&(u=r(u),p=r(p)),p!==u)return!1}return!0}(o._results,u,r))&&(o._results=u,o.length=u.length,o.last=u[this.length-1],o.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class ad{constructor(t){this.queryList=t,this.matches=null}clone(){return new ad(this.queryList)}setDirty(){this.queryList.setDirty()}}class ld{constructor(t=[]){this.queries=t}createEmbeddedView(t){const r=t.queries;if(null!==r){const o=null!==t.contentQueries?t.contentQueries[0]:r.length,u=[];for(let p=0;p<o;p++){const g=r.getByIndex(p);u.push(this.queries[g.indexInDeclarationView].clone())}return new ld(u)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let r=0;r<this.queries.length;r++)null!==Ey(t,r).matches&&this.queries[r].setDirty()}}class xy{constructor(t,r,o=null){this.predicate=t,this.flags=r,this.read=o}}class ud{constructor(t=[]){this.queries=t}elementStart(t,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(t,r)}elementEnd(t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(t)}embeddedTView(t){let r=null;for(let o=0;o<this.length;o++){const u=null!==r?r.length:0,p=this.getByIndex(o).embeddedTView(t,u);p&&(p.indexInDeclarationView=o,null!==r?r.push(p):r=[p])}return null!==r?new ud(r):null}template(t,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(t,r)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class hd{constructor(t,r=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(t,r){this.isApplyingToNode(r)&&this.matchTNode(t,r)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,r){this.elementStart(t,r)}embeddedTView(t,r){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,r),new hd(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let o=t.parent;for(;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(t,r){const o=this.metadata.predicate;if(Array.isArray(o))for(let u=0;u<o.length;u++){const p=o[u];this.matchTNodeWithReadOption(t,r,cI(r,p)),this.matchTNodeWithReadOption(t,r,aa(r,t,p,!1,!1))}else o===yi?4&r.type&&this.matchTNodeWithReadOption(t,r,-1):this.matchTNodeWithReadOption(t,r,aa(r,t,o,!1,!1))}matchTNodeWithReadOption(t,r,o){if(null!==o){const u=this.metadata.read;if(null!==u)if(u===Et||u===ri||u===yi&&4&r.type)this.addMatch(r.index,-2);else{const p=aa(r,t,u,!1,!1);null!==p&&this.addMatch(r.index,p)}else this.addMatch(r.index,o)}}addMatch(t,r){null===this.matches?this.matches=[t,r]:this.matches.push(t,r)}}function cI(n,t){const r=n.localNames;if(null!==r)for(let o=0;o<r.length;o+=2)if(r[o]===t)return r[o+1];return null}function fI(n,t,r,o){return-1===r?function(n,t){return 11&n.type?ss(n,t):4&n.type?ja(n,t):null}(t,n):-2===r?function(n,t,r){return r===Et?ss(t,n):r===yi?ja(t,n):r===ri?Ux(t,n):void 0}(n,t,o):Is(n,n[1],r,t)}function yy(n,t,r,o){const u=t[19].queries[o];if(null===u.matches){const p=n.data,g=r.matches,y=[];for(let C=0;C<g.length;C+=2){const _=g[C];y.push(_<0?null:fI(t,p[_],g[C+1],r.metadata.read))}u.matches=y}return u.matches}function dd(n,t,r,o){const u=n.queries.getByIndex(r),p=u.matches;if(null!==p){const g=yy(n,t,u,r);for(let y=0;y<p.length;y+=2){const C=p[y];if(C>0)o.push(g[y/2]);else{const _=p[y+1],M=t[-C];for(let A=10;A<M.length;A++){const L=M[A];L[17]===L[3]&&dd(L[1],L,_,o)}if(null!==M[9]){const A=M[9];for(let L=0;L<A.length;L++){const R=A[L];dd(R[1],R,_,o)}}}}}return o}function Ka(n){const t=$(),r=Me(),o=gp();pu(o+1);const u=Ey(r,o);if(n.dirty&&hp(t)===(2==(2&u.metadata.flags))){if(null===u.matches)n.reset([]);else{const p=u.crossesNgTemplate?dd(r,t,o,[]):yy(r,t,u,o);n.reset(p,Lx),n.notifyOnChanges()}return!0}return!1}function qa(n,t,r){const o=Me();o.firstCreatePass&&(function(n,t,r){null===n.queries&&(n.queries=new ud),n.queries.track(new hd(t,r))}(o,new xy(n,t,r),-1),2==(2&t)&&(o.staticViewQueries=!0)),function(n,t,r){const o=new $a(4==(4&r));im(n,t,o,o.destroy),null===t[19]&&(t[19]=new ld),t[19].queries.push(new ad(o))}(o,$(),t)}function Za(){return function(n,t){return n[19].queries[t].queryList}($(),gp())}function Ey(n,t){return n.queries.getByIndex(t)}const el=new Te("Application Initializer");let ps=(()=>{class n{constructor(r){this.appInits=r,this.resolve=Ga,this.reject=Ga,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u})}runInitializers(){if(this.initialized)return;const r=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const p=this.appInits[u]();if(Aa(p))r.push(p);else if(Lh(p)){const g=new Promise((y,C)=>{p.subscribe({complete:y,error:C})});r.push(g)}}Promise.all(r).then(()=>{o()}).catch(u=>{this.reject(u)}),0===r.length&&o(),this.initialized=!0}}return n.\u0275fac=function(r){return new(r||n)(fe(el,8))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const go=new Te("AppId"),WI={provide:go,useFactory:function(){return`${xd()}${xd()}${xd()}`},deps:[]};function xd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Gy=new Te("Platform Initializer"),tl=new Te("Platform ID"),XI=new Te("appBootstrapListener");let yd=(()=>{class n{log(r){console.log(r)}warn(r){console.warn(r)}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const Ni=new Te("LocaleId"),ky=new Te("DefaultCurrencyCode");class KI{constructor(t,r){this.ngModuleFactory=t,this.componentFactories=r}}const vd=function(n){return new sd(n)},qI=vd,ZI=function(n){return Promise.resolve(vd(n))},Uy=function(n){const t=vd(n),o=Qn(un(n).declarations).reduce((u,p)=>{const g=Pt(p);return g&&u.push(new uy(g)),u},[]);return new KI(t,o)},QI=Uy,JI=function(n){return Promise.resolve(Uy(n))};let il=(()=>{class n{constructor(){this.compileModuleSync=qI,this.compileModuleAsync=ZI,this.compileModuleAndAllComponentsSync=QI,this.compileModuleAndAllComponentsAsync=JI}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const nA=(()=>Promise.resolve(0))();function Cd(n){"undefined"==typeof Zone?nA.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class wt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new At(!1),this.onMicrotaskEmpty=new At(!1),this.onStable=new At(!1),this.onError=new At(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!o&&r,u.shouldCoalesceRunChangeDetection=o,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let n=Ae.requestAnimationFrame,t=Ae.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(n){const t=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ae,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Sd(n),n.isCheckStableRunning=!0,Ed(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Sd(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,u,p,g,y)=>{try{return By(n),r.invokeTask(u,p,g,y)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||n.shouldCoalesceRunChangeDetection)&&t(),jy(n)}},onInvoke:(r,o,u,p,g,y,C)=>{try{return By(n),r.invoke(u,p,g,y,C)}finally{n.shouldCoalesceRunChangeDetection&&t(),jy(n)}},onHasTask:(r,o,u,p)=>{r.hasTask(u,p),o===u&&("microTask"==p.change?(n._hasPendingMicrotasks=p.microTask,Sd(n),Ed(n)):"macroTask"==p.change&&(n.hasPendingMacrotasks=p.macroTask))},onHandleError:(r,o,u,p)=>(r.handleError(u,p),n.runOutsideAngular(()=>n.onError.emit(p)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,r,o){return this._inner.run(t,r,o)}runTask(t,r,o,u){const p=this._inner,g=p.scheduleEventTask("NgZoneEvent: "+u,t,rA,Ga,Ga);try{return p.runTask(g,r,o)}finally{p.cancelTask(g)}}runGuarded(t,r,o){return this._inner.runGuarded(t,r,o)}runOutsideAngular(t){return this._outer.run(t)}}const rA={};function Ed(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Sd(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function By(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function jy(n){n._nesting--,Ed(n)}class aA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new At,this.onMicrotaskEmpty=new At,this.onStable=new At,this.onError=new At}run(t,r,o){return t.apply(r,o)}runGuarded(t,r,o){return t.apply(r,o)}runOutsideAngular(t){return t()}runTask(t,r,o,u){return t.apply(r,o)}}let _d=(()=>{class n{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wt.assertNotInAngularZone(),Cd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cd(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,u){let p=-1;o&&o>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==p),r(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:p,updateCb:u})}whenStable(r,o,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,o,u){return[]}}return n.\u0275fac=function(r){return new(r||n)(fe(wt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),Yy=(()=>{class n{constructor(){this._applications=new Map,wd.addToWindow(this)}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return wd.findTestabilityInTree(this,r,o)}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class lA{addToWindow(t){}findTestabilityInTree(t,r,o){return null}}let wd=new lA,zy=!0,Wy=!1;let Fn;const $y=new Te("AllowMultipleToken");function Ky(n,t,r=[]){const o=`Platform: ${t}`,u=new Te(o);return(p=[])=>{let g=qy();if(!g||g.injector.get($y,!1))if(n)n(r.concat(p).concat({provide:u,useValue:!0}));else{const y=r.concat(p).concat({provide:u,useValue:!0},{provide:Ws,useValue:"platform"});!function(n){if(Fn&&!Fn.destroyed&&!Fn.injector.get($y,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Fn=n.get(Zy);const t=n.get(Gy,null);t&&t.forEach(r=>r())}(Be.create({providers:y,name:o}))}return function(n){const t=qy();if(!t)throw new Error("No platform exists!");if(!t.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(u)}}function qy(){return Fn&&!Fn.destroyed?Fn:null}let Zy=(()=>{class n{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){const y=function(n,t){let r;return r="noop"===n?new aA:("zone.js"===n?void 0:n)||new wt({enableLongStackTrace:(Wy=!0,zy),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),r}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),C=[{provide:wt,useValue:y}];return y.run(()=>{const _=Be.create({providers:C,parent:this.injector,name:r.moduleType.name}),M=r.create(_),A=M.injector.get(tr,null);if(!A)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const L=y.onError.subscribe({next:R=>{A.handleError(R)}});M.onDestroy(()=>{bd(this._modules,M),L.unsubscribe()})}),function(n,t,r){try{const o=r();return Aa(o)?o.catch(u=>{throw t.runOutsideAngular(()=>n.handleError(u)),u}):o}catch(o){throw t.runOutsideAngular(()=>n.handleError(o)),o}}(A,y,()=>{const L=M.injector.get(ps);return L.runInitializers(),L.donePromise.then(()=>(Hh(M.injector.get(Ni,Pa)||Pa),this._moduleDoBootstrap(M),M))})})}bootstrapModule(r,o=[]){const u=Qy({},o);return function(n,t,r){const o=new sd(r);return Promise.resolve(o)}(0,0,r).then(p=>this.bootstrapModuleFactory(p,u))}_moduleDoBootstrap(r){const o=r.injector.get(xo);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(u=>o.bootstrap(u));else{if(!r.instance.ngDoBootstrap)throw new Error(`The module ${Ce(r.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);r.instance.ngDoBootstrap(o)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(r){return new(r||n)(fe(Be))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function Qy(n,t){return Array.isArray(t)?t.reduce(Qy,n):Object.assign(Object.assign({},n),t)}let xo=(()=>{class n{constructor(r,o,u,p,g){this._zone=r,this._injector=o,this._exceptionHandler=u,this._componentFactoryResolver=p,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new j(_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{_.next(this._stable),_.complete()})}),C=new j(_=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{wt.assertNotInAngularZone(),Cd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,_.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{wt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{_.next(!1)}))});return()=>{M.unsubscribe(),A.unsubscribe()}});this.isStable=function(...n){let t=Number.POSITIVE_INFINITY,r=null,o=n[n.length-1];return he(o)?(r=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(t=n.pop())):"number"==typeof o&&(t=n.pop()),null===r&&1===n.length&&n[0]instanceof j?n[0]:function(n=Number.POSITIVE_INFINITY){return gr(F,n)}(t)(Yn(n,r))}(y,C.pipe(n=>_i()(function(n,t){return function(o){let u;u="function"==typeof n?n:function(){return n};const p=Object.create(o,Yl);return p.source=o,p.subjectFactory=u,p}}(TE)(n))))}bootstrap(r,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=r instanceof Mx?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(u.componentType);const p=function(n){return n.isBoundToModule}(u)?void 0:this._injector.get(ar),y=u.create(Be.NULL,[],o||u.selector,p),C=y.location.nativeElement,_=y.injector.get(_d,null),M=_&&y.injector.get(Yy);return _&&M&&M.registerApplication(C,_),y.onDestroy(()=>{this.detachView(y.hostView),bd(this.components,y),M&&M.unregisterApplication(C)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;bd(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(XI,[]).concat(this._bootstrapListeners).forEach(u=>u(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(r){return new(r||n)(fe(wt),fe(Be),fe(tr),fe(rs),fe(ps))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function bd(n,t){const r=n.indexOf(t);r>-1&&n.splice(r,1)}const NA=Ky(null,"core",[{provide:tl,useValue:"unknown"},{provide:Zy,deps:[Be]},{provide:Yy,deps:[]},{provide:yd,deps:[]}]),kA=[{provide:xo,useClass:xo,deps:[wt,Be,tr,rs,ps]},{provide:FM,deps:[wt],useFactory:function(n){let t=[];return n.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(r){t.push(r)}}},{provide:ps,useClass:ps,deps:[[new Kn,el]]},{provide:il,useClass:il,deps:[]},WI,{provide:no,useFactory:function(){return LD},deps:[]},{provide:os,useFactory:function(){return OD},deps:[]},{provide:Ni,useFactory:function(n){return Hh(n=n||"undefined"!=typeof $localize&&$localize.locale||Pa),n},deps:[[new Hs(Ni),new Kn,new Ji]]},{provide:ky,useValue:"USD"}];let BA=(()=>{class n{constructor(r){}}return n.\u0275fac=function(r){return new(r||n)(fe(xo))},n.\u0275mod=Tn({type:n}),n.\u0275inj=Qt({providers:kA}),n})(),pl=null;function cr(){return pl}const Lt=new Te("DocumentToken");var at=(()=>((at=at||{})[at.Zero=0]="Zero",at[at.One=1]="One",at[at.Two=2]="Two",at[at.Few=3]="Few",at[at.Many=4]="Many",at[at.Other=5]="Other",at))();const qL=function(n){return function(n){const t=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let r=nx(t);if(r)return r;const o=t.split("-")[0];if(r=nx(o),r)return r;if("en"===o)return l0;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[ne.PluralCase]};class _l{}let bO=(()=>{class n extends _l{constructor(r){super(),this.locale=r}getPluralCategory(r,o){switch(qL(o||this.locale)(r)){case at.Zero:return"zero";case at.One:return"one";case at.Two:return"two";case at.Few:return"few";case at.Many:return"many";default:return"other"}}}return n.\u0275fac=function(r){return new(r||n)(fe(Ni))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function Hv(n,t){t=encodeURIComponent(t);for(const r of n.split(";")){const o=r.indexOf("="),[u,p]=-1==o?[r,""]:[r.slice(0,o),r.slice(o+1)];if(u.trim()===t)return decodeURIComponent(p)}return null}class MO{constructor(t,r,o,u){this.$implicit=t,this.ngForOf=r,this.index=o,this.count=u}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vv=(()=>{class n{constructor(r,o,u){this._viewContainer=r,this._template=o,this._differs=u,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(o){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(n){return n.name||typeof n}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const o=[];r.forEachOperation((u,p,g)=>{if(null==u.previousIndex){const y=this._viewContainer.createEmbeddedView(this._template,new MO(null,this._ngForOf,-1,-1),null===g?void 0:g),C=new Fv(u,y);o.push(C)}else if(null==g)this._viewContainer.remove(null===p?void 0:p);else if(null!==p){const y=this._viewContainer.get(p);this._viewContainer.move(y,g);const C=new Fv(u,y);o.push(C)}});for(let u=0;u<o.length;u++)this._perViewChange(o[u].view,o[u].record);for(let u=0,p=this._viewContainer.length;u<p;u++){const g=this._viewContainer.get(u);g.context.index=u,g.context.count=p,g.context.ngForOf=this._ngForOf}r.forEachIdentityChange(u=>{this._viewContainer.get(u.currentIndex).context.$implicit=u.item})}_perViewChange(r,o){r.context.$implicit=o.item}static ngTemplateContextGuard(r,o){return!0}}return n.\u0275fac=function(r){return new(r||n)(q(ri),q(yi),q(no))},n.\u0275dir=de({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Fv{constructor(t,r){this.record=t,this.view=r}}let iR=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Tn({type:n}),n.\u0275inj=Qt({providers:[{provide:_l,useClass:bO}]}),n})();class Yv{}class Qd extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){pl||(pl=n)}(new Qd)}onAndCancel(t,r,o){return t.addEventListener(r,o,!1),()=>{t.removeEventListener(r,o,!1)}}dispatchEvent(t,r){t.dispatchEvent(r)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,r){return(r=r||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,r){return"window"===r?window:"document"===r?t:"body"===r?t.body:null}getBaseHref(t){const r=(wo=wo||document.querySelector("base"),wo?wo.getAttribute("href"):null);return null==r?null:function(n){wl=wl||document.createElement("a"),wl.setAttribute("href",n);const t=wl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(r)}resetBaseElement(){wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Hv(document.cookie,t)}}let wl,wo=null;const zv=new Te("TRANSITION_ID"),cR=[{provide:el,useFactory:function(n,t,r){return()=>{r.get(ps).donePromise.then(()=>{const o=cr(),u=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let p=0;p<u.length;p++)o.remove(u[p])})}},deps:[zv,Lt,Be],multi:!0}];class Jd{static init(){!function(n){wd=n}(new Jd)}addToWindow(t){Ae.getAngularTestability=(o,u=!0)=>{const p=t.findTestabilityInTree(o,u);if(null==p)throw new Error("Could not find testability for element.");return p},Ae.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ae.getAllAngularRootElements=()=>t.getAllRootElements(),Ae.frameworkStabilizers||(Ae.frameworkStabilizers=[]),Ae.frameworkStabilizers.push(o=>{const u=Ae.getAllAngularTestabilities();let p=u.length,g=!1;const y=function(C){g=g||C,p--,0==p&&o(g)};u.forEach(function(C){C.whenStable(y)})})}findTestabilityInTree(t,r,o){if(null==r)return null;const u=t.getTestability(r);return null!=u?u:o?cr().isShadowRoot(r)?this.findTestabilityInTree(t,r.host,!0):this.findTestabilityInTree(t,r.parentElement,!0):null}}let pR=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const bo=new Te("EventManagerPlugins");let Tl=(()=>{class n{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(u=>u.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,o,u){return this._findPluginFor(o).addEventListener(r,o,u)}addGlobalEventListener(r,o,u){return this._findPluginFor(o).addGlobalEventListener(r,o,u)}getZone(){return this._zone}_findPluginFor(r){const o=this._eventNameToPlugin.get(r);if(o)return o;const u=this._plugins;for(let p=0;p<u.length;p++){const g=u[p];if(g.supports(r))return this._eventNameToPlugin.set(r,g),g}throw new Error(`No event manager plugin found for event ${r}`)}}return n.\u0275fac=function(r){return new(r||n)(fe(bo),fe(wt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class ec{constructor(t){this._doc=t}addGlobalEventListener(t,r,o){const u=cr().getGlobalEventTarget(this._doc,t);if(!u)throw new Error(`Unsupported event target ${u} for event ${r}`);return this.addEventListener(u,r,o)}}let Xv=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(r){const o=new Set;r.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),o.add(u))}),this.onStylesAdded(o)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),To=(()=>{class n extends Xv{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,o,u){r.forEach(p=>{const g=this._doc.createElement("style");g.textContent=p,u.push(o.appendChild(g))})}addHost(r){const o=[];this._addStylesToHost(this._stylesSet,r,o),this._hostNodes.set(r,o)}removeHost(r){const o=this._hostNodes.get(r);o&&o.forEach($v),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((o,u)=>{this._addStylesToHost(r,u,o)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach($v))}}return n.\u0275fac=function(r){return new(r||n)(fe(Lt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();function $v(n){cr().remove(n)}const tc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nc=/%COMP%/g;function Dl(n,t,r){for(let o=0;o<t.length;o++){let u=t[o];Array.isArray(u)?Dl(n,u,r):(u=u.replace(nc,n),r.push(u))}return r}function Zv(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ic=(()=>{class n{constructor(r,o,u){this.eventManager=r,this.sharedStylesHost=o,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new rc(r)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;switch(o.encapsulation){case ht.Emulated:{let u=this.rendererByCompId.get(o.id);return u||(u=new MR(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,u)),u.applyToHost(r),u}case 1:case ht.ShadowDom:return new IR(this.eventManager,this.sharedStylesHost,r,o);default:if(!this.rendererByCompId.has(o.id)){const u=Dl(o.id,o.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(r){return new(r||n)(fe(Tl),fe(To),fe(go))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class rc{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,r){return r?document.createElementNS(tc[r]||r,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,r){t.appendChild(r)}insertBefore(t,r,o){t&&t.insertBefore(r,o)}removeChild(t,r){t&&t.removeChild(r)}selectRootElement(t,r){let o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error(`The selector "${t}" did not match any elements`);return r||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,r,o,u){if(u){r=u+":"+r;const p=tc[u];p?t.setAttributeNS(p,r,o):t.setAttribute(r,o)}else t.setAttribute(r,o)}removeAttribute(t,r,o){if(o){const u=tc[o];u?t.removeAttributeNS(u,r):t.removeAttribute(`${o}:${r}`)}else t.removeAttribute(r)}addClass(t,r){t.classList.add(r)}removeClass(t,r){t.classList.remove(r)}setStyle(t,r,o,u){u&(sn.DashCase|sn.Important)?t.style.setProperty(r,o,u&sn.Important?"important":""):t.style[r]=o}removeStyle(t,r,o){o&sn.DashCase?t.style.removeProperty(r):t.style[r]=""}setProperty(t,r,o){t[r]=o}setValue(t,r){t.nodeValue=r}listen(t,r,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,r,Zv(o)):this.eventManager.addEventListener(t,r,Zv(o))}}class MR extends rc{constructor(t,r,o,u){super(t),this.component=o;const p=Dl(u+"-"+o.id,o.styles,[]);r.addStyles(p),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(nc,n)}(u+"-"+o.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(nc,n)}(u+"-"+o.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,r){const o=super.createElement(t,r);return super.setAttribute(o,this.contentAttr,""),o}}class IR extends rc{constructor(t,r,o,u){super(t),this.sharedStylesHost=r,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const p=Dl(u.id,u.styles,[]);for(let g=0;g<p.length;g++){const y=document.createElement("style");y.textContent=p[g],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,r){return super.appendChild(this.nodeOrShadowRoot(t),r)}insertBefore(t,r,o){return super.insertBefore(this.nodeOrShadowRoot(t),r,o)}removeChild(t,r){return super.removeChild(this.nodeOrShadowRoot(t),r)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let AR=(()=>{class n extends ec{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,u){return r.addEventListener(o,u,!1),()=>this.removeEventListener(r,o,u)}removeEventListener(r,o,u){return r.removeEventListener(o,u)}}return n.\u0275fac=function(r){return new(r||n)(fe(Lt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const eC=["alt","control","meta","shift"],VR={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tC={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},FR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let GR=(()=>{class n extends ec{constructor(r){super(r)}supports(r){return null!=n.parseEventName(r)}addEventListener(r,o,u){const p=n.parseEventName(o),g=n.eventCallback(p.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cr().onAndCancel(r,p.domEventName,g))}static parseEventName(r){const o=r.toLowerCase().split("."),u=o.shift();if(0===o.length||"keydown"!==u&&"keyup"!==u)return null;const p=n._normalizeKey(o.pop());let g="";if(eC.forEach(C=>{const _=o.indexOf(C);_>-1&&(o.splice(_,1),g+=C+".")}),g+=p,0!=o.length||0===p.length)return null;const y={};return y.domEventName=u,y.fullKey=g,y}static getEventFullKey(r){let o="",u=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&tC.hasOwnProperty(t)&&(t=tC[t]))}return VR[t]||t}(r);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),eC.forEach(p=>{p!=u&&FR[p](r)&&(o+=p+".")}),o+=u,o}static eventCallback(r,o,u){return p=>{n.getEventFullKey(p)===r&&u.runGuarded(()=>o(p))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return n.\u0275fac=function(r){return new(r||n)(fe(Lt))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const XR=Ky(NA,"browser",[{provide:tl,useValue:"browser"},{provide:Gy,useValue:function(){Qd.makeCurrent(),Jd.init()},multi:!0},{provide:Lt,useFactory:function(){return function(n){ru=n}(document),document},deps:[]}]),$R=[[],{provide:Ws,useValue:"root"},{provide:tr,useFactory:function(){return new tr},deps:[]},{provide:bo,useClass:AR,multi:!0,deps:[Lt,wt,tl]},{provide:bo,useClass:GR,multi:!0,deps:[Lt]},[],{provide:ic,useClass:ic,deps:[Tl,To,go]},{provide:ka,useExisting:ic},{provide:Xv,useExisting:To},{provide:To,useClass:To,deps:[Lt]},{provide:_d,useClass:_d,deps:[wt]},{provide:Tl,useClass:Tl,deps:[bo,wt]},{provide:Yv,useClass:pR,deps:[]},[]];let KR=(()=>{class n{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:n,providers:[{provide:go,useValue:r.appId},{provide:zv,useExisting:go},cR]}}}return n.\u0275fac=function(r){return new(r||n)(fe(n,12))},n.\u0275mod=Tn({type:n}),n.\u0275inj=Qt({providers:$R,imports:[iR,BA]}),n})();"undefined"!=typeof window&&window;var iP=s(500),rP=s.n(iP);const J=(window.mxLoadResources=!1,window.mxLoadStylesheets=!1,window.mxForceIncludes=!1,window.mxResourceExtension=".txt",rP()({}));function pr(n,t,r,o){var g,u=arguments.length,p=u<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(n,t,r,o);else for(var y=n.length-1;y>=0;y--)(g=n[y])&&(p=(u<3?g(p):u>3?g(t,r,p):g(t,r))||p);return u>3&&p&&Object.defineProperty(t,r,p),p}class hc{constructor(t,r){this.x=t,this.y=r}}function Do(n,t,r){return t.x<=Math.max(n.x,r.x)&&t.x>=Math.min(n.x,r.x)&&t.y<=Math.max(n.y,r.y)&&t.y>=Math.min(n.y,r.y)}function Mo(n,t,r){let o=(t.y-n.y)*(r.x-t.x)-(t.x-n.x)*(r.y-t.y);return 0==o?0:o>0?1:2}function uP(n,t,r,o){let u=Mo(n,t,r),p=Mo(n,t,o),g=Mo(r,o,n),y=Mo(r,o,t);return!!(u!=p&&g!=y||0==u&&Do(n,r,t)||0==p&&Do(n,o,t)||0==g&&Do(r,n,o)||0==y&&Do(r,t,o))}function oC(n){const t=n.getState();return new hc(t.x,t.y)}function aC(n,t){let r;return t.e1&&t.e1!=n?r=t.e1:t.e2&&t.e2!=n&&(r=t.e2),r?[r,r.v1===t?r.v2:r.v1]:[void 0,void 0]}class lC{constructor(t,r){this.native=t,this.g=r}}class cP extends lC{constructor(t,r){super(t,r),this.native=t,this.g=r}getState(){return this.g.graph.view.getState(this.native)}}class uC{constructor(t,r){this.graph=t,this.container=r,this.model=t.getModel(),this.initialize()}initialize(){this.undoManager=new J.mxUndoManager;const t=this.onUndoableEdit.bind(this);this.graph.getModel().addListener(J.mxEvent.UNDO,t),this.graph.getView().addListener(J.mxEvent.UNDO,t),this.root=this.graph.getDefaultParent()}onUndoableEdit(t,r){this.undoManager.undoableEditHappened(r.getProperty("edit"))}}class pP extends cP{constructor(t,r){super(t,r),this.native=t,this.g=r}connect(t){if(this.e1){if(this.e2)throw"unable to connect, vertex already has 2 edges";this.e2=t}else this.e1=t}fullConnected(){return!!this.e1&&!!this.e2}disconnect(t){this.e1===t?this.e1=void 0:this.e2===t&&(this.e2=void 0)}}class fP extends lC{constructor(t,r){super(t,r),this.native=t,this.g=r}split(t,r){this.g.splitEdge(t,r,this)}removeFromGraph(){this.g.remove([this]),[this.v1,this.v2].forEach(t=>t.disconnect(this))}}class Io extends uC{constructor(t,r,o){super(t,o),this.graph=t,this.outline=r,this.container=o,this.vertexes=[],this.edges=[],this.isMouseDown=!1}initialize(){super.initialize(),this.graph.addListener(J.mxEvent.DOUBLE_CLICK,this.onDoubleClick.bind(this)),this.graph.addListener(J.mxEvent.CLICK,this.onClick.bind(this)),this.graph.addMouseListener({mouseDown:this.onMouseDown.bind(this),mouseMove:this.onMouseMove.bind(this),mouseUp:this.onMouseUp.bind(this)}),this.graph.setBackgroundImage(new J.mxImage("./assets/img/image.png",900,900)),this.originPanningTrigger=this.graph.panningHandler.isPanningTrigger,this.graph.panningHandler.isPanningTrigger=this.isPanningTrigger.bind(this),J.mxEvent.addMouseWheelListener(this.onMouseWheel.bind(this))}isPanningTrigger(t){return!this.mouseDownInGraph(t)}moveAll(t){this.graph.moveCells(this.graph.getChildCells(this.root,!0,!0),(t.x-this.lastMousePt.x)/this.graph.view.scale,(t.y-this.lastMousePt.y)/this.graph.view.scale,!1)}getPoint(t){return new J.mxPoint(t.getGraphX(),t.getGraphY())}onMouseWheel(t,r){r?this.graph.zoomIn():this.graph.zoomOut()}onMouseDown(t,r){this.mouseDownInGraph(r)&&(this.isMouseDown=!0,this.lastMousePt=this.getPoint(r),r.consume())}onMouseUp(t,r){if(this.isMouseDown){const o=this.getPoint(r);this.moveAll(o),r.consume()}this.isMouseDown=!1}onMouseMove(t,r){if(!this.isMouseDown)return;const o=this.getPoint(r);this.moveAll(o),this.lastMousePt=o,r.consume()}onDoubleClick(t,r){const o=r.getProperty("cell"),u=r.getProperty("event"),p=J.mxUtils.convertPoint(this.container,J.mxEvent.getClientX(u),J.mxEvent.getClientY(u)),g=p.x/this.graph.view.scale-this.graph.view.translate.x,y=p.y/this.graph.view.scale-this.graph.view.translate.y;o&&o.isEdge()&&o.EDGE.split(g,y),r.consume()}onClick(t,r){}remove(t){this.graph.removeCells(t.map(o=>o.native));for(var r=0;r<t.length;r++)[this.vertexes,this.edges].forEach(o=>{const u=o.indexOf(t[r]);u>=0&&o.splice(u,1)})}addVertex(t,r){return this.doAddVertex(t,r)}doAddVertex(t,r){const o=this.graph.insertVertex(this.root,"","",t,r,5,5,"VERTEX;whiteSpace=wrap;html=1;"),u=new pP(o,this);return u.native.VERTEX=u,this.vertexes.push(u),u}addEdge(t,r){return this.doAddEdge(t,r)}doAddEdge(t,r){const o=this.graph.insertEdge(this.root,null,"",t.native,r.native,"EDGE"),u=new fP(o,this);return u.v1=t,u.v2=r,u.native.EDGE=u,t.connect(u),r.connect(u),this.edges.push(u),u}splitEdge(t,r,o){const u=o.v1,p=o.v2;(u.fullConnected()||p.fullConnected())&&o.removeFromGraph();const g=this.doAddVertex(t,r);return this.doAddEdge(g,u),this.doAddEdge(g,p),g}mouseDownInGraph(t){return!(t.getCell()&&!t.getCell().isEdge())&&function(n,t,r){const o=[];o.push(oC(n));let u=aC(void 0,n);for(;u[0]&&u[1]!==n;)o.push(oC(u[1])),u=aC(u[0],u[1]);return function(n,t,r){if(t<3)return!1;let o=new hc(1e4,r.y),u=0,p=0;do{let g=(p+1)%t;if(uP(n[p],n[g],r,o)){if(0==Mo(n[p],r,n[g]))return Do(n[p],r,n[g]);u++}p=g}while(0!=p);return u%2==1}(o,o.length,new hc(t,r))}(this.vertexes[0],t.getGraphX(),t.getGraphY())}}pr([function(n,t,r){const o=r.value;return r.value=function(...u){this.model.beginUpdate();try{try{return o.apply(this,u)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},r}],Io.prototype,"remove",null),pr([function(n,t,r){const o=r.value;return r.value=function(...u){this.model.beginUpdate();try{try{return o.apply(this,u)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},r}],Io.prototype,"addVertex",null),pr([function(n,t,r){const o=r.value;return r.value=function(...u){this.model.beginUpdate();try{try{return o.apply(this,u)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},r}],Io.prototype,"addEdge",null),pr([function(n,t,r){const o=r.value;return r.value=function(...u){this.model.beginUpdate();try{try{return o.apply(this,u)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},r}],Io.prototype,"splitEdge",null);class Il extends uC{constructor(t,r){super(t,r),this.graph=t,this.container=r}initialize(){super.initialize(),new J.mxCellTracker(this.graph,"#00FF00"),this.graph.addListener(J.mxEvent.CLICK,this.onClick.bind(this)),this.graph.panningHandler.useLeftButtonForPanning=!0,J.mxEvent.addMouseWheelListener(this.onMouseWheel.bind(this)),this.oldGetPreferredSizeForCell=this.graph.getPreferredSizeForCell,this.graph.getPreferredSizeForCell=this.getPreferredSizeForCell.bind(this),this.graph.cellRenderer.getTextScale=function(t){return Math.min(1,t.view.scale)},this.highlight=new J.mxCellHighlight(this.graph,"#00ff00",2),this.graph.getSelectionModel().addListener(J.mxEvent.CHANGE,this.onSelectionChange.bind(this)),this.graph.addMouseListener({mouseDown:this.onMouseDown.bind(this),mouseMove:this.onMouseMove.bind(this),mouseUp:this.onMouseUp.bind(this)})}getPreferredSizeForCell(t){return this.oldGetPreferredSizeForCell.apply(this.graph,arguments)}onMouseDown(t,r){}onMouseUp(t,r){}onMouseMove(t,r){const o=r.getCell();if(this.mouseOverCell!==o){if(this.mouseOverCell&&this.graph.removeCellOverlays(this.mouseOverCell),!o||o.isEdge())return void(this.mouseOverCell=void 0);this.mouseOverCell=o,this.mouseOverCell&&this.addOverlays(this.mouseOverCell,"treeRoot"!==this.mouseOverCell.id)}r.consume()}onMouseWheel(t,r){r?this.graph.zoomIn():this.graph.zoomOut()}onClick(t,r){const o=r.getProperty("cell");o&&this.highlight.highlight(this.graph.view.getState(o,!0))}createPopupMenu(t,r,o){null!=r&&(this.model.isVertex(r)&&t.addItem("Add child","./assets/img/overlays/check.png",this.addChild.bind(this,r)),"treeRoot"!=r.id&&this.model.isVertex(r)&&t.addItem("Delete","./assets/img/delete.gif",this.deleteSubtree.bind(this,r)),t.addSeparator()),t.addItem("Fit","./assets/img/zoom.gif",this.graph.fit.bind(this.graph)),t.addItem("Actual","./assets/img/zoomactual.gif",this.graph.zoomActual.bind(this.graph))}addChild(t){const r=this.graph.insertVertex(this.root,null,"New Gate",0,0,0,0),o=this.model.getGeometry(r),u=this.graph.getPreferredSizeForCell(r);o.width=u.width,o.height=u.height;const p=this.graph.insertEdge(this.root,null,"",t,r);return p.geometry.x=1,p.geometry.y=0,p.geometry.offset=new J.mxPoint(0,-20),this.selectCell(r),r}deleteSubtree(t){var r=[];this.graph.traverse(t,!0,function(o){return r.push(o),!0}),this.graph.removeCells(r)}addOverlays(t,r){var o=new J.mxCellOverlay(new J.mxImage("./assets/img/add.png",15,15),"Add Gate");o.cursor="hand",o.align=J.mxConstants.ALIGN_CENTER,o.addListener(J.mxEvent.CLICK,this.onOverlayAddChild.bind(this,t)),this.graph.addCellOverlay(t,o),r&&((o=new J.mxCellOverlay(new J.mxImage("./assets/img/close.png",15,15),"Delete")).cursor="hand",o.offset=new J.mxPoint(-2,2),o.align=J.mxConstants.ALIGN_RIGHT,o.verticalAlign=J.mxConstants.ALIGN_TOP,o.addListener(J.mxEvent.CLICK,this.onOverlayDelete.bind(this,t)),this.graph.addCellOverlay(t,o))}onOverlayAddChild(t,r,o){this.addChild(t)}onOverlayDelete(t,r,o){this.deleteSubtree(t)}addRoot(){const t=this.graph.insertVertex(this.root,"treeRoot","New Gate",5,5,40,20);this.graph.updateCellSize(t),this.selectCell(t)}selectCell(t){this.graph.setSelectionCell(t)}onSelectionChange(t,r){this.graph.clearCellOverlays(this.root);const o=this.graph.getSelectionCells();if(o)for(var u=0;u<o.length;u++)o[u]&&this.highlight.highlight(this.graph.view.getState(o[u],!0))}}pr([function(n,t,r){const o=r.value;return r.value=function(...u){this.model.beginUpdate();try{try{return o.apply(this,u)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},r}],Il.prototype,"addChild",null),pr([function(n,t,r){const o=r.value;return r.value=function(...u){this.model.beginUpdate();try{try{return o.apply(this,u)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},r}],Il.prototype,"deleteSubtree",null),pr([function(n,t,r){const o=r.value;return r.value=function(...u){this.model.beginUpdate();try{try{return o.apply(this,u)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},r}],Il.prototype,"addRoot",null);let dc=(()=>{class n{constructor(){this.initialize()}initialize(){const r=J.mxGraph.prototype.fireMouseEvent;J.mxGraph.prototype.fireMouseEvent=function(u,p,g){if(null==p.getState()){if(null==p.graphX||null==p.graphY){const C=J.mxUtils.convertPoint(this.container,p.getX(),p.getY());p.graphX=C.x,p.graphY=C.y}const y=this.getCellAt(p.graphX,p.graphY);this.getModel().isEdge(y)&&(p.state=this.view.getState(y),null!=p.state&&null!=p.state.shape&&(this.container.style.cursor=p.state.shape.node.style.cursor))}null==p.state&&(this.container.style.cursor="default"),r.apply(this,[u,p,g])};const o=J.mxGraph.prototype.dblClick;J.mxGraph.prototype.dblClick=function(u,p){if(null==p){const g=J.mxUtils.convertPoint(this.container,J.mxEvent.getClientX(u),J.mxEvent.getClientY(u));p=this.getCellAt(g.x,g.y)}o.call(this,u,p)}}createEditorGraph(r,o){J.mxEvent.disableContextMenu(r);const u=new J.mxGraph(r);u.setAllowDanglingEdges(!1),u.setDisconnectOnMove(!1),u.isCellSelectable=function(C){return!C.isEdge()};const p={};p[J.mxConstants.STYLE_SHAPE]=J.mxConstants.SHAPE_RECTANGLE,p[J.mxConstants.STYLE_OPACITY]=100,p[J.mxConstants.STYLE_FONTCOLOR]="#774400",p[J.mxConstants.STYLE_RESIZABLE]="0",p[J.mxConstants.STYLE_NOLABEL]="1",u.getStylesheet().putCellStyle("VERTEX",p);const g={};g[J.mxConstants.STYLE_ENDSIZE]="0",g[J.mxConstants.STYLE_NOLABEL]="1",g[J.mxConstants.STYLE_MOVABLE]="0",u.getStylesheet().putCellStyle("EDGE",g),u.setTolerance(20),u.centerZoom=!0,u.setPanning(!0),u.panningHandler.useLeftButtonForPanning=!0;const y=new J.mxOutline(u,o);return y.updateOnPan=!0,new Io(u,y,r)}createGateGraph(r){J.mxEvent.disableContextMenu(r);const o=new J.mxGraph(r);o.setAllowDanglingEdges(!1),o.setDisconnectOnMove(!1),o.setCellsMovable(!1),o.setAutoSizeCells(!0),o.isCellSelectable=function(C){return!C.isEdge()},o.setTooltips(!J.mxClient.IS_TOUCH),J.mxConstants.VERTEX_SELECTION_STROKEWIDTH=.1;let u=o.getStylesheet().getDefaultVertexStyle();u[J.mxConstants.STYLE_SHAPE]="label",u[J.mxConstants.STYLE_VERTICAL_ALIGN]=J.mxConstants.ALIGN_MIDDLE,u[J.mxConstants.STYLE_ALIGN]=J.mxConstants.ALIGN_LEFT,u[J.mxConstants.STYLE_SPACING_LEFT]=4,u[J.mxConstants.STYLE_RESIZABLE]="0",u[J.mxConstants.STYLE_GRADIENTCOLOR]="#7d85df",u[J.mxConstants.STYLE_STROKECOLOR]="#5d65df",u[J.mxConstants.STYLE_FILLCOLOR]="#adc5ff",u[J.mxConstants.STYLE_FONTCOLOR]="#1d258f",u[J.mxConstants.STYLE_FONTFAMILY]="Verdana",u[J.mxConstants.STYLE_FONTSIZE]="12",u[J.mxConstants.STYLE_FONTSTYLE]="1",u[J.mxConstants.STYLE_SHADOW]="1",u[J.mxConstants.STYLE_ROUNDED]="1",u[J.mxConstants.STYLE_GLASS]="1",u=o.getStylesheet().getDefaultEdgeStyle(),u[J.mxConstants.STYLE_ROUNDED]=!0,u[J.mxConstants.STYLE_STROKEWIDTH]=3,u[J.mxConstants.STYLE_EXIT_X]=1,u[J.mxConstants.STYLE_EXIT_Y]=.5,u[J.mxConstants.STYLE_EXIT_PERIMETER]=0,u[J.mxConstants.STYLE_ENTRY_X]=0,u[J.mxConstants.STYLE_ENTRY_Y]=.5,u[J.mxConstants.STYLE_ENTRY_PERIMETER]=0,u[J.mxConstants.STYLE_EDGE]=J.mxEdgeStyle.SideToSide,new J.mxKeyHandler(o);const g=new J.mxCompactTreeLayout(o,!0,!1);return g.useBoundingBox=!1,g.edgeRouting=!1,g.levelDistance=60,g.nodeDistance=16,g.isVertexMovable=function(C){return!0},new J.mxLayoutManager(o).getLayout=function(C,_){return C.getChildCount()>0?g:null},o.setTolerance(20),o.centerZoom=!0,o.setPanning(!0),o.panningHandler.useLeftButtonForPanning=!0,new Il(o,r)}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mP=["canvas"];let gP=(()=>{class n{constructor(r,o){this.container=r,this.graphService=o}ngOnInit(){this.graph=this.graphService.createGateGraph(this.graphCanvas.nativeElement),this.graph.addRoot()}}return n.\u0275fac=function(r){return new(r||n)(q(Et),q(dc))},n.\u0275cmp=yr({type:n,selectors:[["app-gates"]],viewQuery:function(r,o){if(1&r&&qa(mP,7),2&r){let u;Ka(u=Za())&&(o.graphCanvas=u.first)}},decls:4,vars:0,consts:[[1,"canvas"],["canvas",""]],template:function(r,o){1&r&&(vt(0,"p"),ii(1,"gates works!"),Ct(),rr(2,"div",0,1))},styles:[""]}),n})();const xP=["canvas"],yP=["outline"];let vP=(()=>{class n{constructor(r,o){this.container=r,this.graphService=o}ngOnInit(){this.graph=this.graphService.createEditorGraph(this.graphCanvas.nativeElement,this.graphOutline.nativeElement);const r=this.graph.addVertex(126,126),o=this.graph.addVertex(126,184),u=this.graph.addVertex(184,184),p=this.graph.addVertex(184,126);this.graph.addEdge(r,o),this.graph.addEdge(o,u),this.graph.addEdge(u,p),this.graph.addEdge(r,p)}}return n.\u0275fac=function(r){return new(r||n)(q(Et),q(dc))},n.\u0275cmp=yr({type:n,selectors:[["app-editor"]],viewQuery:function(r,o){if(1&r&&(qa(xP,7),qa(yP,7)),2&r){let u;Ka(u=Za())&&(o.graphCanvas=u.first),Ka(u=Za())&&(o.graphOutline=u.first)}},decls:6,vars:0,consts:[[1,"canvas"],["canvas",""],[1,"outline"],["outline",""]],template:function(r,o){1&r&&(vt(0,"p"),ii(1,"editor works!"),Ct(),rr(2,"div",0,1),rr(4,"div",2,3))},styles:[".canvas[_ngcontent-%COMP%]{width:900px;height:900px;border:solid 1px red}.outline[_ngcontent-%COMP%]{position:absolute;overflow:hidden;top:36px;right:0px;width:200px;height:140px;background:transparent;border-style:solid;border-color:#000}"]}),n})();class _P{constructor(t,r){this.predicate=t,this.thisArg=r}call(t,r){return r.subscribe(new wP(t,this.predicate,this.thisArg))}}class wP extends I{constructor(t,r,o){super(t),this.predicate=r,this.thisArg=o,this.count=0}_next(t){let r;try{r=this.predicate.call(this.thisArg,t,this.count++)}catch(o){return void this.destination.error(o)}r&&this.destination.next(t)}}class dC{}class cC{}class Ei{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(r=>{const o=r.indexOf(":");if(o>0){const u=r.slice(0,o),p=u.toLowerCase(),g=r.slice(o+1).trim();this.maybeSetNormalizedName(u,p),this.headers.has(p)?this.headers.get(p).push(g):this.headers.set(p,[g])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(r=>{let o=t[r];const u=r.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(u,o),this.maybeSetNormalizedName(r,u))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const r=this.headers.get(t.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,r){return this.clone({name:t,value:r,op:"a"})}set(t,r){return this.clone({name:t,value:r,op:"s"})}delete(t,r){return this.clone({name:t,value:r,op:"d"})}maybeSetNormalizedName(t,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ei?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(r=>{this.headers.set(r,t.headers.get(r)),this.normalizedNames.set(r,t.normalizedNames.get(r))})}clone(t){const r=new Ei;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof Ei?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([t]),r}applyUpdate(t){const r=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(t.name,r);const u=("a"===t.op?this.headers.get(r):void 0)||[];u.push(...o),this.headers.set(r,u);break;case"d":const p=t.value;if(p){let g=this.headers.get(r);if(!g)return;g=g.filter(y=>-1===p.indexOf(y)),0===g.length?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,g)}else this.headers.delete(r),this.normalizedNames.delete(r)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>t(this.normalizedNames.get(r),this.headers.get(r)))}}class bP{encodeKey(t){return pC(t)}encodeValue(t){return pC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const DP=/%(\d[a-f0-9])/gi,MP={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function pC(n){return encodeURIComponent(n).replace(DP,(t,r)=>{var o;return null!==(o=MP[r])&&void 0!==o?o:t})}function fC(n){return`${n}`}class Fi{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new bP,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const r=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(u=>{const p=u.indexOf("="),[g,y]=-1==p?[t.decodeKey(u),""]:[t.decodeKey(u.slice(0,p)),t.decodeValue(u.slice(p+1))],C=r.get(g)||[];C.push(y),r.set(g,C)}),r}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(r=>{const o=t.fromObject[r];this.map.set(r,Array.isArray(o)?o:[o])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const r=this.map.get(t);return r?r[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,r){return this.clone({param:t,value:r,op:"a"})}appendAll(t){const r=[];return Object.keys(t).forEach(o=>{const u=t[o];Array.isArray(u)?u.forEach(p=>{r.push({param:o,value:p,op:"a"})}):r.push({param:o,value:u,op:"a"})}),this.clone(r)}set(t,r){return this.clone({param:t,value:r,op:"s"})}delete(t,r){return this.clone({param:t,value:r,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const r=this.encoder.encodeKey(t);return this.map.get(t).map(o=>r+"="+this.encoder.encodeValue(o)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const r=new Fi({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(t),r}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const r=("a"===t.op?this.map.get(t.param):void 0)||[];r.push(fC(t.value)),this.map.set(t.param,r);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let o=this.map.get(t.param)||[];const u=o.indexOf(fC(t.value));-1!==u&&o.splice(u,1),o.length>0?this.map.set(t.param,o):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class IP{constructor(){this.map=new Map}set(t,r){return this.map.set(t,r),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function mC(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function gC(n){return"undefined"!=typeof Blob&&n instanceof Blob}function xC(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ao{constructor(t,r,o,u){let p;if(this.url=r,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||u?(this.body=void 0!==o?o:null,p=u):p=o,p&&(this.reportProgress=!!p.reportProgress,this.withCredentials=!!p.withCredentials,p.responseType&&(this.responseType=p.responseType),p.headers&&(this.headers=p.headers),p.context&&(this.context=p.context),p.params&&(this.params=p.params)),this.headers||(this.headers=new Ei),this.context||(this.context=new IP),this.params){const g=this.params.toString();if(0===g.length)this.urlWithParams=r;else{const y=r.indexOf("?");this.urlWithParams=r+(-1===y?"?":y<r.length-1?"&":"")+g}}else this.params=new Fi,this.urlWithParams=r}serializeBody(){return null===this.body?null:mC(this.body)||gC(this.body)||xC(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Fi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xC(this.body)?null:gC(this.body)?this.body.type||null:mC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var r;const o=t.method||this.method,u=t.url||this.url,p=t.responseType||this.responseType,g=void 0!==t.body?t.body:this.body,y=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,C=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let _=t.headers||this.headers,M=t.params||this.params;const A=null!==(r=t.context)&&void 0!==r?r:this.context;return void 0!==t.setHeaders&&(_=Object.keys(t.setHeaders).reduce((L,R)=>L.set(R,t.setHeaders[R]),_)),t.setParams&&(M=Object.keys(t.setParams).reduce((L,R)=>L.set(R,t.setParams[R]),M)),new Ao(o,u,g,{params:M,headers:_,context:A,reportProgress:C,responseType:p,withCredentials:y})}}var ut=(()=>((ut=ut||{})[ut.Sent=0]="Sent",ut[ut.UploadProgress=1]="UploadProgress",ut[ut.ResponseHeader=2]="ResponseHeader",ut[ut.DownloadProgress=3]="DownloadProgress",ut[ut.Response=4]="Response",ut[ut.User=5]="User",ut))();class cc{constructor(t,r=200,o="OK"){this.headers=t.headers||new Ei,this.status=void 0!==t.status?t.status:r,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class pc extends cc{constructor(t={}){super(t),this.type=ut.ResponseHeader}clone(t={}){return new pc({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Al extends cc{constructor(t={}){super(t),this.type=ut.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Al({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class yC extends cc{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function fc(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let vC=(()=>{class n{constructor(r){this.handler=r}request(r,o,u={}){let p;if(r instanceof Ao)p=r;else{let C,_;C=u.headers instanceof Ei?u.headers:new Ei(u.headers),u.params&&(_=u.params instanceof Fi?u.params:new Fi({fromObject:u.params})),p=new Ao(r,o,void 0!==u.body?u.body:null,{headers:C,context:u.context,params:_,reportProgress:u.reportProgress,responseType:u.responseType||"json",withCredentials:u.withCredentials})}const g=function(...n){let t=n[n.length-1];return he(t)?(n.pop(),_n(n,t)):Yn(n)}(p).pipe(function(n,t){return gr(n,void 0,1)}(C=>this.handler.handle(C)));if(r instanceof Ao||"events"===u.observe)return g;const y=g.pipe(function(n,t){return function(o){return o.lift(new _P(n,undefined))}}(C=>C instanceof Al));switch(u.observe||"body"){case"body":switch(p.responseType){case"arraybuffer":return y.pipe(Oe(C=>{if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return y.pipe(Oe(C=>{if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return y.pipe(Oe(C=>{if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));case"json":default:return y.pipe(Oe(C=>C.body))}case"response":return y;default:throw new Error(`Unreachable: unhandled observe type ${u.observe}}`)}}delete(r,o={}){return this.request("DELETE",r,o)}get(r,o={}){return this.request("GET",r,o)}head(r,o={}){return this.request("HEAD",r,o)}jsonp(r,o){return this.request("JSONP",r,{params:(new Fi).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,o={}){return this.request("OPTIONS",r,o)}patch(r,o,u={}){return this.request("PATCH",r,fc(u,o))}post(r,o,u={}){return this.request("POST",r,fc(u,o))}put(r,o,u={}){return this.request("PUT",r,fc(u,o))}}return n.\u0275fac=function(r){return new(r||n)(fe(dC))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();class CC{constructor(t,r){this.next=t,this.interceptor=r}handle(t){return this.interceptor.intercept(t,this.next)}}const EC=new Te("HTTP_INTERCEPTORS");let OP=(()=>{class n{intercept(r,o){return o.handle(r)}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const RP=/^\)\]\}',?\n/;let SC=(()=>{class n{constructor(r){this.xhrFactory=r}handle(r){if("JSONP"===r.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new j(o=>{const u=this.xhrFactory.build();if(u.open(r.method,r.urlWithParams),r.withCredentials&&(u.withCredentials=!0),r.headers.forEach((R,H)=>u.setRequestHeader(R,H.join(","))),r.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){const R=r.detectContentTypeHeader();null!==R&&u.setRequestHeader("Content-Type",R)}if(r.responseType){const R=r.responseType.toLowerCase();u.responseType="json"!==R?R:"text"}const p=r.serializeBody();let g=null;const y=()=>{if(null!==g)return g;const R=1223===u.status?204:u.status,H=u.statusText||"OK",U=new Ei(u.getAllResponseHeaders()),G=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(u)||r.url;return g=new pc({headers:U,status:R,statusText:H,url:G}),g},C=()=>{let{headers:R,status:H,statusText:U,url:G}=y(),W=null;204!==H&&(W=void 0===u.response?u.responseText:u.response),0===H&&(H=W?200:0);let z=H>=200&&H<300;if("json"===r.responseType&&"string"==typeof W){const ie=W;W=W.replace(RP,"");try{W=""!==W?JSON.parse(W):null}catch(se){W=ie,z&&(z=!1,W={error:se,text:W})}}z?(o.next(new Al({body:W,headers:R,status:H,statusText:U,url:G||void 0})),o.complete()):o.error(new yC({error:W,headers:R,status:H,statusText:U,url:G||void 0}))},_=R=>{const{url:H}=y(),U=new yC({error:R,status:u.status||0,statusText:u.statusText||"Unknown Error",url:H||void 0});o.error(U)};let M=!1;const A=R=>{M||(o.next(y()),M=!0);let H={type:ut.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(H.total=R.total),"text"===r.responseType&&!!u.responseText&&(H.partialText=u.responseText),o.next(H)},L=R=>{let H={type:ut.UploadProgress,loaded:R.loaded};R.lengthComputable&&(H.total=R.total),o.next(H)};return u.addEventListener("load",C),u.addEventListener("error",_),u.addEventListener("timeout",_),u.addEventListener("abort",_),r.reportProgress&&(u.addEventListener("progress",A),null!==p&&u.upload&&u.upload.addEventListener("progress",L)),u.send(p),o.next({type:ut.Sent}),()=>{u.removeEventListener("error",_),u.removeEventListener("abort",_),u.removeEventListener("load",C),u.removeEventListener("timeout",_),r.reportProgress&&(u.removeEventListener("progress",A),null!==p&&u.upload&&u.upload.removeEventListener("progress",L)),u.readyState!==u.DONE&&u.abort()}})}}return n.\u0275fac=function(r){return new(r||n)(fe(Yv))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})();const mc=new Te("XSRF_COOKIE_NAME"),gc=new Te("XSRF_HEADER_NAME");class _C{}let NP=(()=>{class n{constructor(r,o,u){this.doc=r,this.platform=o,this.cookieName=u,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hv(r,this.cookieName),this.lastCookieString=r),this.lastToken}}return n.\u0275fac=function(r){return new(r||n)(fe(Lt),fe(tl),fe(mc))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),xc=(()=>{class n{constructor(r,o){this.tokenService=r,this.headerName=o}intercept(r,o){const u=r.url.toLowerCase();if("GET"===r.method||"HEAD"===r.method||u.startsWith("http://")||u.startsWith("https://"))return o.handle(r);const p=this.tokenService.getToken();return null!==p&&!r.headers.has(this.headerName)&&(r=r.clone({headers:r.headers.set(this.headerName,p)})),o.handle(r)}}return n.\u0275fac=function(r){return new(r||n)(fe(_C),fe(gc))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),HP=(()=>{class n{constructor(r,o){this.backend=r,this.injector=o,this.chain=null}handle(r){if(null===this.chain){const o=this.injector.get(EC,[]);this.chain=o.reduceRight((u,p)=>new CC(u,p),this.backend)}return this.chain.handle(r)}}return n.\u0275fac=function(r){return new(r||n)(fe(cC),fe(Be))},n.\u0275prov=be({token:n,factory:n.\u0275fac}),n})(),VP=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:xc,useClass:OP}]}}static withOptions(r={}){return{ngModule:n,providers:[r.cookieName?{provide:mc,useValue:r.cookieName}:[],r.headerName?{provide:gc,useValue:r.headerName}:[]]}}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Tn({type:n}),n.\u0275inj=Qt({providers:[xc,{provide:EC,useExisting:xc,multi:!0},{provide:_C,useClass:NP},{provide:mc,useValue:"XSRF-TOKEN"},{provide:gc,useValue:"X-XSRF-TOKEN"}]}),n})(),FP=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Tn({type:n}),n.\u0275inj=Qt({providers:[vC,{provide:dC,useClass:HP},SC,{provide:cC,useExisting:SC}],imports:[[VP.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function Ll(n,t){return new j(r=>{const o=n.length;if(0===o)return void r.complete();const u=new Array(o);let p=0,g=0;for(let y=0;y<o;y++){const C=Yt(n[y]);let _=!1;r.add(C.subscribe({next:M=>{_||(_=!0,g++),u[y]=M},error:M=>r.error(M),complete:()=>{p++,(p===o||!_)&&(g===o&&r.next(t?t.reduce((M,A,L)=>(M[A]=u[L],M),{}):u),r.complete())}}))}})}let wC=(()=>{class n{constructor(r,o){this._renderer=r,this._elementRef=o,this.onChange=u=>{},this.onTouched=()=>{}}setProperty(r,o){this._renderer.setProperty(this._elementRef.nativeElement,r,o)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return n.\u0275fac=function(r){return new(r||n)(q(or),q(Et))},n.\u0275dir=de({type:n}),n})(),mr=(()=>{class n extends wC{}return n.\u0275fac=function(){let t;return function(o){return(t||(t=pn(n)))(o||n)}}(),n.\u0275dir=de({type:n,features:[ze]}),n})();const si=new Te("NgValueAccessor"),UP={provide:si,useExisting:ke(()=>Ol),multi:!0},jP=new Te("CompositionEventMode");let Ol=(()=>{class n extends wC{constructor(r,o,u){super(r,o),this._compositionMode=u,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=cr()?cr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return n.\u0275fac=function(r){return new(r||n)(q(or),q(Et),q(jP,8))},n.\u0275dir=de({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&Ft("input",function(p){return o._handleInput(p.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(p){return o._compositionEnd(p.target.value)})},features:[$e([UP]),ze]}),n})();const Ot=new Te("NgValidators"),ki=new Te("NgAsyncValidators");function NC(n){return null!=n}function HC(n){const t=Aa(n)?Yt(n):n;return Lh(t),t}function VC(n){let t={};return n.forEach(r=>{t=null!=r?Object.assign(Object.assign({},t),r):t}),0===Object.keys(t).length?null:t}function FC(n,t){return t.map(r=>r(n))}function GC(n){return n.map(t=>function(n){return!n.validate}(t)?t:r=>t.validate(r))}function yc(n){return null!=n?function(n){if(!n)return null;const t=n.filter(NC);return 0==t.length?null:function(r){return VC(FC(r,t))}}(GC(n)):null}function vc(n){return null!=n?function(n){if(!n)return null;const t=n.filter(NC);return 0==t.length?null:function(r){return function(...n){if(1===n.length){const t=n[0];if(m(t))return Ll(t,null);if(x(t)&&Object.getPrototypeOf(t)===Object.prototype){const r=Object.keys(t);return Ll(r.map(o=>t[o]),r)}}if("function"==typeof n[n.length-1]){const t=n.pop();return Ll(n=1===n.length&&m(n[0])?n[0]:n,null).pipe(Oe(r=>t(...r)))}return Ll(n,null)}(FC(r,t).map(HC)).pipe(Oe(VC))}}(GC(n)):null}function BC(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Cc(n){return n?Array.isArray(n)?n:[n]:[]}function Rl(n,t){return Array.isArray(n)?n.includes(t):n===t}function zC(n,t){const r=Cc(t);return Cc(n).forEach(u=>{Rl(r,u)||r.push(u)}),r}function WC(n,t){return Cc(t).filter(r=>!Rl(n,r))}let XC=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=yc(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=vc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,o){return!!this.control&&this.control.hasError(r,o)}getError(r,o){return this.control?this.control.getError(r,o):null}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275dir=de({type:n}),n})(),Bt=(()=>{class n extends XC{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=pn(n)))(o||n)}}(),n.\u0275dir=de({type:n,features:[ze]}),n})();class Bi extends XC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let KC=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var r,o,u;return"submitted"===t?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(u=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===u?void 0:u[t])}}{constructor(r){super(r)}}return n.\u0275fac=function(r){return new(r||n)(q(Bi,2))},n.\u0275dir=de({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&La("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[ze]}),n})();function Lo(n,t){(function(n,t){const r=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(BC(r,t.validator)):"function"==typeof r&&n.setValidators([r]);const o=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(BC(o,t.asyncValidator)):"function"==typeof o&&n.setAsyncValidators([o]);const u=()=>n.updateValueAndValidity();Vl(t._rawValidators,u),Vl(t._rawAsyncValidators,u)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(r=>{n._pendingValue=r,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qC(n,t)})}(n,t),function(n,t){const r=(o,u)=>{t.valueAccessor.writeValue(o),u&&t.viewToModelUpdate(o)};n.registerOnChange(r),t._registerOnDestroy(()=>{n._unregisterOnChange(r)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qC(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const r=o=>{t.valueAccessor.setDisabledState(o)};n.registerOnDisabledChange(r),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(r)})}}(n,t)}function Vl(n,t){n.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(t)})}function qC(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Gl(n,t){const r=n.indexOf(t);r>-1&&n.splice(r,1)}const Oo="VALID",kl="INVALID",gs="PENDING",Ro="DISABLED";function Tc(n){return(Mc(n)?n.validators:n)||null}function JC(n){return Array.isArray(n)?yc(n):n||null}function Dc(n,t){return(Mc(t)?t.asyncValidators:n)||null}function eE(n){return Array.isArray(n)?vc(n):n||null}function Mc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ic{constructor(t,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=r,this._composedValidatorFn=JC(this._rawValidators),this._composedAsyncValidatorFn=eE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Oo}get invalid(){return this.status===kl}get pending(){return this.status==gs}get disabled(){return this.status===Ro}get enabled(){return this.status!==Ro}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=JC(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=eE(t)}addValidators(t){this.setValidators(zC(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(zC(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(WC(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(WC(t,this._rawAsyncValidators))}hasValidator(t){return Rl(this._rawValidators,t)}hasAsyncValidator(t){return Rl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=gs,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const r=this._parentMarkedDirty(t.onlySelf);this.status=Ro,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:r})),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){const r=this._parentMarkedDirty(t.onlySelf);this.status=Oo,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:r})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oo||this.status===gs)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ro:Oo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=gs,this._hasOwnPendingAsyncValidator=!0;const r=HC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,r={}){this.errors=t,this._updateControlsErrors(!1!==r.emitEvent)}get(t){return function(n,t,r){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let o=n;return t.forEach(u=>{o=o instanceof Ac?o.controls.hasOwnProperty(u)?o.controls[u]:null:o instanceof rN&&o.at(u)||null}),o}(this,t)}getError(t,r){const o=r?this.get(r):this;return o&&o.errors?o.errors[t]:null}hasError(t,r){return!!this.getError(t,r)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new At,this.statusChanges=new At}_calculateStatus(){return this._allControlsDisabled()?Ro:this.errors?kl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gs)?gs:this._anyControlsHaveStatus(kl)?kl:Oo}_anyControlsHaveStatus(t){return this._anyControls(r=>r.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Mc(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ul extends Ic{constructor(t=null,r,o){super(Tc(r),Dc(o,r)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,r={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(t,r={}){this.setValue(t,r)}reset(t=null,r={}){this._applyFormState(t),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Gl(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Gl(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ac extends Ic{constructor(t,r,o){super(Tc(r),Dc(o,r)),this.controls=t,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,r){return this.controls[t]?this.controls[t]:(this.controls[t]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(t,r,o={}){this.registerControl(t,r),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(t,r,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],r&&this.registerControl(t,r),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,r={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(t,r={}){null!=t&&(Object.keys(t).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(t[o],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(t={},r={}){this._forEachChild((o,u)=>{o.reset(t[u],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(t,r,o)=>(t[o]=r instanceof Ul?r.value:r.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(r,o)=>!!o._syncPendingControls()||r);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(r=>{const o=this.controls[r];o&&t(o,r)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const r of Object.keys(this.controls)){const o=this.controls[r];if(this.contains(r)&&t(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(t,r){let o=t;return this._forEachChild((u,p)=>{o=r(o,u,p)}),o}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((r,o)=>{if(void 0===t[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class rN extends Ic{constructor(t,r,o){super(Tc(r),Dc(o,r)),this.controls=t,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,r={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(t,r,o={}){this.controls.splice(t,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(t,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(t,r,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),r&&(this.controls.splice(t,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,r={}){this._checkAllValuesPresent(t),t.forEach((o,u)=>{this._throwIfControlMissing(u),this.at(u).setValue(o,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(t,r={}){null!=t&&(t.forEach((o,u)=>{this.at(u)&&this.at(u).patchValue(o,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(t=[],r={}){this._forEachChild((o,u)=>{o.reset(t[u],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(t=>t instanceof Ul?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((r,o)=>!!o._syncPendingControls()||r,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((r,o)=>{t(r,o)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(r=>r.enabled&&t(r))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((r,o)=>{if(void 0===t[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const aN={provide:Bi,useExisting:ke(()=>Oc)},iE=(()=>Promise.resolve(null))();let Oc=(()=>{class n extends Bi{constructor(r,o,u,p){super(),this.control=new Ul,this._registered=!1,this.update=new At,this._parent=r,this._setValidators(o),this._setAsyncValidators(u),this.valueAccessor=function(n,t){if(!t)return null;let r,o,u;return Array.isArray(t),t.forEach(p=>{p.constructor===Ol?r=p:function(n){return Object.getPrototypeOf(n.constructor)===mr}(p)?o=p:u=p}),u||o||r||null}(0,p)}ngOnChanges(r){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in r&&this._updateDisabled(r),function(n,t){if(!n.hasOwnProperty("model"))return!1;const r=n.model;return!!r.isFirstChange()||!Object.is(t,r.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Lo(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){iE.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1})})}_updateDisabled(r){const o=r.isDisabled.currentValue,u=""===o||o&&"false"!==o;iE.then(()=>{u&&!this.control.disabled?this.control.disable():!u&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(r){return new(r||n)(q(Bt,9),q(Ot,10),q(ki,10),q(si,10))},n.\u0275dir=de({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[$e([aN]),ze,en]}),n})(),sE=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Tn({type:n}),n.\u0275inj=Qt({}),n})();const yN={provide:si,useExisting:ke(()=>Bl),multi:!0};function dE(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Bl=(()=>{class n extends mr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;const o=this._getOptionId(r);null==o&&this.setProperty("selectedIndex",-1);const u=dE(o,r);this.setProperty("value",u)}registerOnChange(r){this.onChange=o=>{this.value=this._getOptionValue(o),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o),r))return o;return null}_getOptionValue(r){const o=function(n){return n.split(":")[0]}(r);return this._optionMap.has(o)?this._optionMap.get(o):r}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=pn(n)))(o||n)}}(),n.\u0275dir=de({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){1&r&&Ft("change",function(p){return o.onChange(p.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[$e([yN]),ze]}),n})(),cE=(()=>{class n{constructor(r,o,u){this._element=r,this._renderer=o,this._select=u,this._select&&(this.id=this._select._registerOption())}set ngValue(r){null!=this._select&&(this._select._optionMap.set(this.id,r),this._setElementValue(dE(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(r){return new(r||n)(q(Et),q(or),q(Bl,9))},n.\u0275dir=de({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const CN={provide:si,useExisting:ke(()=>Vc),multi:!0};function pE(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Vc=(()=>{class n extends mr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){let o;if(this.value=r,Array.isArray(r)){const u=r.map(p=>this._getOptionId(p));o=(p,g)=>{p._setSelected(u.indexOf(g.toString())>-1)}}else o=(u,p)=>{u._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(r){this.onChange=o=>{const u=[];if(void 0!==o.selectedOptions){const p=o.selectedOptions;for(let g=0;g<p.length;g++){const y=p.item(g),C=this._getOptionValue(y.value);u.push(C)}}else{const p=o.options;for(let g=0;g<p.length;g++){const y=p.item(g);if(y.selected){const C=this._getOptionValue(y.value);u.push(C)}}}this.value=u,r(u)}}_registerOption(r){const o=(this._idCounter++).toString();return this._optionMap.set(o,r),o}_getOptionId(r){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o)._value,r))return o;return null}_getOptionValue(r){const o=function(n){return n.split(":")[0]}(r);return this._optionMap.has(o)?this._optionMap.get(o)._value:r}}return n.\u0275fac=function(){let t;return function(o){return(t||(t=pn(n)))(o||n)}}(),n.\u0275dir=de({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){1&r&&Ft("change",function(p){return o.onChange(p.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[$e([CN]),ze]}),n})(),fE=(()=>{class n{constructor(r,o,u){this._element=r,this._renderer=o,this._select=u,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){null!=this._select&&(this._value=r,this._setElementValue(pE(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(pE(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(r){return new(r||n)(q(Et),q(or),q(Vc,9))},n.\u0275dir=de({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),wE=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Tn({type:n}),n.\u0275inj=Qt({imports:[[sE]]}),n})(),AN=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Tn({type:n}),n.\u0275inj=Qt({imports:[wE]}),n})();function LN(n,t){if(1&n&&(vt(0,"option",5),ii(1),Ct()),2&n){const r=t.$implicit;xi("ngValue",r),Li(1),Ra(r)}}function ON(n,t){if(1&n&&(vt(0,"option",5),ii(1),Ct()),2&n){const r=t.$implicit;xi("ngValue",r),Li(1),Ra(r)}}let RN=(()=>{class n{constructor(r){this.http=r,this.subscription=new S,this._jsonURL="./assets/data/fginfo_3.json",this.gateParameters=[]}ngOnInit(){this.subscription.add(this.getJSON().subscribe(r=>{this.gateData=r;for(const o in r.parameters)this.gateParameters.push(o)}))}ngOnDestroy(){this.subscription.unsubscribe()}getJSON(){return this.http.get(this._jsonURL)}onUpdate(){console.log(`${this.gateName}:${this.xParameter},${this.yParameter}`)}}return n.\u0275fac=function(r){return new(r||n)(q(vC))},n.\u0275cmp=yr({type:n,selectors:[["app-gate"]],decls:17,vars:5,consts:[[1,"gate"],["type","input",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"ngValue"]],template:function(r,o){1&r&&(vt(0,"p"),ii(1,"gate works!"),Ct(),vt(2,"div",0),vt(3,"span"),ii(4,"Name:"),Ct(),vt(5,"input",1),Ft("ngModelChange",function(p){return o.gateName=p}),Ct(),vt(6,"span"),ii(7,"X axis:"),Ct(),vt(8,"select",2),Ft("ngModelChange",function(p){return o.xParameter=p}),bh(9,LN,2,2,"option",3),Ct(),vt(10,"span"),ii(11,"Y axis:"),Ct(),vt(12,"select",2),Ft("ngModelChange",function(p){return o.yParameter=p}),bh(13,ON,2,2,"option",3),Ct(),vt(14,"div"),vt(15,"button",4),Ft("click",function(){return o.onUpdate()}),ii(16,"Update"),Ct(),Ct(),Ct()),2&r&&(Li(5),xi("ngModel",o.gateName),Li(3),xi("ngModel",o.xParameter),Li(1),xi("ngForOf",o.gateParameters),Li(3),xi("ngModel",o.yParameter),Li(1),xi("ngForOf",o.gateParameters))},directives:[Ol,KC,Oc,Bl,Vv,cE,fE],styles:[".gate[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr}.gate[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:8px;margin-left:4px}.gate[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{text-align:right}.gate[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{grid-column:2/2;display:inline-block}.gate[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{float:right}"]}),n})(),PN=(()=>{class n{constructor(){this.title="editor"}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=yr({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"flowgate"],[1,"flowgate-detail"]],template:function(r,o){1&r&&(vt(0,"div",0),rr(1,"app-gates"),vt(2,"div",1),rr(3,"app-editor"),rr(4,"app-gate"),Ct(),Ct())},directives:[gP,vP,RN],styles:[".flowgate[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flowgate-detail[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]}),n})(),NN=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Tn({type:n,bootstrap:[PN]}),n.\u0275inj=Qt({providers:[dc],imports:[[AN,KR,FP]]}),n})();(function(){if(Wy)throw new Error("Cannot enable prod mode after platform setup.");zy=!1})(),XR().bootstrapModule(NN).catch(n=>console.error(n))}},e=>{e(e.s=108)}]);