(self.webpackChunkeditor=self.webpackChunkeditor||[]).push([[179],{255:e=>{function t(r){return Promise.resolve().then(()=>{var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o})}t.keys=()=>[],t.resolve=t,t.id=255,e.exports=t},500:function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,t;t=function(){return function(opts){for(var name in opts)this[name]=opts[name];var __mxOutput={},mxClient={VERSION:"4.2.2",IS_IE:null!=navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0,IS_IE6:null!=navigator.userAgent&&navigator.userAgent.indexOf("MSIE 6")>=0,IS_IE11:null!=navigator.userAgent&&!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:null!=navigator.userAgent&&!!navigator.userAgent.match(/Edge\//),IS_QUIRKS:null!=navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0&&(null==document.documentMode||5==document.documentMode),IS_EM:"spellcheck"in document.createElement("textarea")&&8==document.documentMode,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:null!=navigator.userAgent&&navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_OP:null!=navigator.userAgent&&(navigator.userAgent.indexOf("Opera/")>=0||navigator.userAgent.indexOf("OPR/")>=0),IS_OT:null!=navigator.userAgent&&navigator.userAgent.indexOf("Presto/")>=0&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:/Apple Computer, Inc/.test(navigator.vendor),IS_ANDROID:navigator.appVersion.indexOf("Android")>=0,IS_IOS:/iP(hone|od|ad)/.test(navigator.platform),IS_GC:/Google Inc/.test(navigator.vendor),IS_CHROMEAPP:null!=window.chrome&&null!=chrome.app&&null!=chrome.app.runtime,IS_FF:"undefined"!=typeof InstallTrigger,IS_MT:navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0,IS_VML:"MICROSOFT INTERNET EXPLORER"==navigator.appName.toUpperCase(),IS_SVG:"MICROSOFT INTERNET EXPLORER"!=navigator.appName.toUpperCase(),NO_FO:!document.createElementNS||"[object SVGForeignObjectElement]"!=document.createElementNS("http://www.w3.org/2000/svg","foreignObject")||navigator.userAgent.indexOf("Opera/")>=0,IS_WIN:navigator.appVersion.indexOf("Win")>0,IS_MAC:navigator.appVersion.indexOf("Mac")>0,IS_CHROMEOS:/\bCrOS\b/.test(navigator.appVersion),IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:null!=window.PointerEvent&&!(navigator.appVersion.indexOf("Mac")>0),IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0,defaultBundles:[],isBrowserSupported:function(){return mxClient.IS_VML||mxClient.IS_SVG},link:function(e,t,r,o){if(r=r||document,mxClient.IS_IE6)r.write('<link rel="'+e+'" href="'+t+'" charset="UTF-8" type="text/css"/>');else{var a=r.createElement("link");a.setAttribute("rel",e),a.setAttribute("href",t),a.setAttribute("charset","UTF-8"),a.setAttribute("type","text/css"),o&&a.setAttribute("id",o),r.getElementsByTagName("head")[0].appendChild(a)}},loadResources:function(e,t){var r=mxClient.defaultBundles.length;function o(){0==--r&&e()}for(var a=0;a<mxClient.defaultBundles.length;a++)mxResources.add(mxClient.defaultBundles[a],t,o)},include:function(e){document.write('<script src="'+e+'"><\/script>')}},e;"undefined"==typeof mxLoadResources&&(mxLoadResources=!0),"undefined"==typeof mxForceIncludes&&(mxForceIncludes=!1),"undefined"==typeof mxResourceExtension&&(mxResourceExtension=".txt"),"undefined"==typeof mxLoadStylesheets&&(mxLoadStylesheets=!0),"undefined"!=typeof mxBasePath&&mxBasePath.length>0?("/"==mxBasePath.substring(mxBasePath.length-1)&&(mxBasePath=mxBasePath.substring(0,mxBasePath.length-1)),mxClient.basePath=mxBasePath):mxClient.basePath=".","undefined"!=typeof mxImageBasePath&&mxImageBasePath.length>0?("/"==mxImageBasePath.substring(mxImageBasePath.length-1)&&(mxImageBasePath=mxImageBasePath.substring(0,mxImageBasePath.length-1)),mxClient.imageBasePath=mxImageBasePath):mxClient.imageBasePath=mxClient.basePath+"/images",mxClient.language="undefined"!=typeof mxLanguage&&null!=mxLanguage?mxLanguage:mxClient.IS_IE?navigator.userLanguage:navigator.language,mxClient.defaultLanguage="undefined"!=typeof mxDefaultLanguage&&null!=mxDefaultLanguage?mxDefaultLanguage:"en",mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/common.css"),"undefined"!=typeof mxLanguages&&null!=mxLanguages&&(mxClient.languages=mxLanguages),mxClient.IS_VML&&(mxClient.IS_SVG?mxClient.IS_VML=!1:(null!=document.namespaces&&(8==document.documentMode?(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml","#default#VML"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office","#default#VML")):(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office"))),mxClient.IS_QUIRKS&&document.styleSheets.length>=30?(e=document.createElement("style"),e.type="text/css",e.styleSheet.cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",document.getElementsByTagName("head")[0].appendChild(e)):document.createStyleSheet().cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/explorer.css"))),(mxForceIncludes||null==module.exports)&&(mxClient.include(mxClient.basePath+"/js/util/mxLog.js"),mxClient.include(mxClient.basePath+"/js/util/mxObjectIdentity.js"),mxClient.include(mxClient.basePath+"/js/util/mxDictionary.js"),mxClient.include(mxClient.basePath+"/js/util/mxResources.js"),mxClient.include(mxClient.basePath+"/js/util/mxPoint.js"),mxClient.include(mxClient.basePath+"/js/util/mxRectangle.js"),mxClient.include(mxClient.basePath+"/js/util/mxEffects.js"),mxClient.include(mxClient.basePath+"/js/util/mxUtils.js"),mxClient.include(mxClient.basePath+"/js/util/mxConstants.js"),mxClient.include(mxClient.basePath+"/js/util/mxEventObject.js"),mxClient.include(mxClient.basePath+"/js/util/mxMouseEvent.js"),mxClient.include(mxClient.basePath+"/js/util/mxEventSource.js"),mxClient.include(mxClient.basePath+"/js/util/mxEvent.js"),mxClient.include(mxClient.basePath+"/js/util/mxXmlRequest.js"),mxClient.include(mxClient.basePath+"/js/util/mxClipboard.js"),mxClient.include(mxClient.basePath+"/js/util/mxWindow.js"),mxClient.include(mxClient.basePath+"/js/util/mxForm.js"),mxClient.include(mxClient.basePath+"/js/util/mxImage.js"),mxClient.include(mxClient.basePath+"/js/util/mxDivResizer.js"),mxClient.include(mxClient.basePath+"/js/util/mxDragSource.js"),mxClient.include(mxClient.basePath+"/js/util/mxToolbar.js"),mxClient.include(mxClient.basePath+"/js/util/mxUndoableEdit.js"),mxClient.include(mxClient.basePath+"/js/util/mxUndoManager.js"),mxClient.include(mxClient.basePath+"/js/util/mxUrlConverter.js"),mxClient.include(mxClient.basePath+"/js/util/mxPanningManager.js"),mxClient.include(mxClient.basePath+"/js/util/mxPopupMenu.js"),mxClient.include(mxClient.basePath+"/js/util/mxAutoSaveManager.js"),mxClient.include(mxClient.basePath+"/js/util/mxAnimation.js"),mxClient.include(mxClient.basePath+"/js/util/mxMorphing.js"),mxClient.include(mxClient.basePath+"/js/util/mxImageBundle.js"),mxClient.include(mxClient.basePath+"/js/util/mxImageExport.js"),mxClient.include(mxClient.basePath+"/js/util/mxAbstractCanvas2D.js"),mxClient.include(mxClient.basePath+"/js/util/mxXmlCanvas2D.js"),mxClient.include(mxClient.basePath+"/js/util/mxSvgCanvas2D.js"),mxClient.include(mxClient.basePath+"/js/util/mxVmlCanvas2D.js"),mxClient.include(mxClient.basePath+"/js/util/mxGuide.js"),mxClient.include(mxClient.basePath+"/js/shape/mxShape.js"),mxClient.include(mxClient.basePath+"/js/shape/mxStencil.js"),mxClient.include(mxClient.basePath+"/js/shape/mxStencilRegistry.js"),mxClient.include(mxClient.basePath+"/js/shape/mxMarker.js"),mxClient.include(mxClient.basePath+"/js/shape/mxActor.js"),mxClient.include(mxClient.basePath+"/js/shape/mxCloud.js"),mxClient.include(mxClient.basePath+"/js/shape/mxRectangleShape.js"),mxClient.include(mxClient.basePath+"/js/shape/mxEllipse.js"),mxClient.include(mxClient.basePath+"/js/shape/mxDoubleEllipse.js"),mxClient.include(mxClient.basePath+"/js/shape/mxRhombus.js"),mxClient.include(mxClient.basePath+"/js/shape/mxPolyline.js"),mxClient.include(mxClient.basePath+"/js/shape/mxArrow.js"),mxClient.include(mxClient.basePath+"/js/shape/mxArrowConnector.js"),mxClient.include(mxClient.basePath+"/js/shape/mxText.js"),mxClient.include(mxClient.basePath+"/js/shape/mxTriangle.js"),mxClient.include(mxClient.basePath+"/js/shape/mxHexagon.js"),mxClient.include(mxClient.basePath+"/js/shape/mxLine.js"),mxClient.include(mxClient.basePath+"/js/shape/mxImageShape.js"),mxClient.include(mxClient.basePath+"/js/shape/mxLabel.js"),mxClient.include(mxClient.basePath+"/js/shape/mxCylinder.js"),mxClient.include(mxClient.basePath+"/js/shape/mxConnector.js"),mxClient.include(mxClient.basePath+"/js/shape/mxSwimlane.js"),mxClient.include(mxClient.basePath+"/js/layout/mxGraphLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxStackLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxPartitionLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxCompactTreeLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxRadialTreeLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxFastOrganicLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxCircleLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxParallelEdgeLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxCompositeLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/mxEdgeLabelLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxGraphAbstractHierarchyCell.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxGraphHierarchyNode.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxGraphHierarchyEdge.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxGraphHierarchyModel.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/model/mxSwimlaneModel.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxHierarchicalLayoutStage.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxMedianHybridCrossingReduction.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxMinimumCycleRemover.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxCoordinateAssignment.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/stage/mxSwimlaneOrdering.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/mxHierarchicalLayout.js"),mxClient.include(mxClient.basePath+"/js/layout/hierarchical/mxSwimlaneLayout.js"),mxClient.include(mxClient.basePath+"/js/model/mxGraphModel.js"),mxClient.include(mxClient.basePath+"/js/model/mxCell.js"),mxClient.include(mxClient.basePath+"/js/model/mxGeometry.js"),mxClient.include(mxClient.basePath+"/js/model/mxCellPath.js"),mxClient.include(mxClient.basePath+"/js/view/mxPerimeter.js"),mxClient.include(mxClient.basePath+"/js/view/mxPrintPreview.js"),mxClient.include(mxClient.basePath+"/js/view/mxStylesheet.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellState.js"),mxClient.include(mxClient.basePath+"/js/view/mxGraphSelectionModel.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellEditor.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellRenderer.js"),mxClient.include(mxClient.basePath+"/js/view/mxEdgeStyle.js"),mxClient.include(mxClient.basePath+"/js/view/mxStyleRegistry.js"),mxClient.include(mxClient.basePath+"/js/view/mxGraphView.js"),mxClient.include(mxClient.basePath+"/js/view/mxGraph.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellOverlay.js"),mxClient.include(mxClient.basePath+"/js/view/mxOutline.js"),mxClient.include(mxClient.basePath+"/js/view/mxMultiplicity.js"),mxClient.include(mxClient.basePath+"/js/view/mxLayoutManager.js"),mxClient.include(mxClient.basePath+"/js/view/mxSwimlaneManager.js"),mxClient.include(mxClient.basePath+"/js/view/mxTemporaryCellStates.js"),mxClient.include(mxClient.basePath+"/js/view/mxCellStatePreview.js"),mxClient.include(mxClient.basePath+"/js/view/mxConnectionConstraint.js"),mxClient.include(mxClient.basePath+"/js/handler/mxGraphHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxPanningHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxPopupMenuHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxCellMarker.js"),mxClient.include(mxClient.basePath+"/js/handler/mxSelectionCellsHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxConnectionHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxConstraintHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxRubberband.js"),mxClient.include(mxClient.basePath+"/js/handler/mxHandle.js"),mxClient.include(mxClient.basePath+"/js/handler/mxVertexHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxEdgeHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxElbowEdgeHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxEdgeSegmentHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxKeyHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxTooltipHandler.js"),mxClient.include(mxClient.basePath+"/js/handler/mxCellTracker.js"),mxClient.include(mxClient.basePath+"/js/handler/mxCellHighlight.js"),mxClient.include(mxClient.basePath+"/js/editor/mxDefaultKeyHandler.js"),mxClient.include(mxClient.basePath+"/js/editor/mxDefaultPopupMenu.js"),mxClient.include(mxClient.basePath+"/js/editor/mxDefaultToolbar.js"),mxClient.include(mxClient.basePath+"/js/editor/mxEditor.js"),mxClient.include(mxClient.basePath+"/js/io/mxCodecRegistry.js"),mxClient.include(mxClient.basePath+"/js/io/mxCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxObjectCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxCellCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxModelCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxRootChangeCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxChildChangeCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxTerminalChangeCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxGenericChangeCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxGraphCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxGraphViewCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxStylesheetCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxDefaultKeyHandlerCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxDefaultToolbarCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxDefaultPopupMenuCodec.js"),mxClient.include(mxClient.basePath+"/js/io/mxEditorCodec.js")),__mxOutput.mxClient=void 0!==mxClient?mxClient:void 0;var mxLog={consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){if(null==mxLog.window&&null!=document.body){var e=mxLog.consoleName+" - mxGraph "+mxClient.VERSION,t=document.createElement("table");t.setAttribute("width","100%"),t.setAttribute("height","100%");var r=document.createElement("tbody"),o=document.createElement("tr"),a=document.createElement("td");a.style.verticalAlign="top",mxLog.textarea=document.createElement("textarea"),mxLog.textarea.setAttribute("wrap","off"),mxLog.textarea.setAttribute("readOnly","true"),mxLog.textarea.style.height="100%",mxLog.textarea.style.resize="none",mxLog.textarea.value=mxLog.buffer,mxLog.textarea.style.width=mxClient.IS_NS&&"BackCompat"!=document.compatMode?"99%":"100%",a.appendChild(mxLog.textarea),o.appendChild(a),r.appendChild(o),o=document.createElement("tr"),mxLog.td=document.createElement("td"),mxLog.td.style.verticalAlign="top",mxLog.td.setAttribute("height","30px"),o.appendChild(mxLog.td),r.appendChild(o),t.appendChild(r),mxLog.addButton("Info",function(x){mxLog.info()}),mxLog.addButton("DOM",function(x){var v=mxUtils.getInnerHtml(document.body);mxLog.debug(v)}),mxLog.addButton("Trace",function(x){mxLog.TRACE=!mxLog.TRACE,mxLog.debug(mxLog.TRACE?"Tracing enabled":"Tracing disabled")}),mxLog.addButton("Copy",function(x){try{mxUtils.copy(mxLog.textarea.value)}catch(v){mxUtils.alert(v)}}),mxLog.addButton("Show",function(x){try{mxUtils.popup(mxLog.textarea.value)}catch(v){mxUtils.alert(v)}}),mxLog.addButton("Clear",function(x){mxLog.textarea.value=""});var u=0,c=0;if("number"==typeof window.innerWidth?(u=window.innerHeight,c=window.innerWidth):(u=document.documentElement.clientHeight||document.body.clientHeight,c=document.body.clientWidth),mxLog.window=new mxWindow(e,t,Math.max(0,c-320),Math.max(0,u-210),300,160),mxLog.window.setMaximizable(!0),mxLog.window.setScrollable(!1),mxLog.window.setResizable(!0),mxLog.window.setClosable(!0),mxLog.window.destroyOnClose=!1,(mxClient.IS_NS||mxClient.IS_IE)&&!mxClient.IS_GC&&!mxClient.IS_SF&&"BackCompat"!=document.compatMode||11==document.documentMode){var f=mxLog.window.getElement(),m=function(x,v){mxLog.textarea.style.height=Math.max(0,f.offsetHeight-70)+"px"};mxLog.window.addListener(mxEvent.RESIZE_END,m),mxLog.window.addListener(mxEvent.MAXIMIZE,m),mxLog.window.addListener(mxEvent.NORMALIZE,m),mxLog.textarea.style.height="92px"}}},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(e,t){var r=document.createElement("button");mxUtils.write(r,e),mxEvent.addListener(r,"click",t),mxLog.td.appendChild(r)},isVisible:function(){return null!=mxLog.window&&mxLog.window.isVisible()},show:function(){mxLog.setVisible(!0)},setVisible:function(e){null==mxLog.window&&mxLog.init(),null!=mxLog.window&&mxLog.window.setVisible(e)},enter:function(e){if(mxLog.TRACE)return mxLog.writeln("Entering "+e),(new Date).getTime()},leave:function(e,t){if(mxLog.TRACE){var r=0!=t?" ("+((new Date).getTime()-t)+" ms)":"";mxLog.writeln("Leaving "+e+r)}},debug:function(){mxLog.DEBUG&&mxLog.writeln.apply(this,arguments)},warn:function(){mxLog.WARN&&mxLog.writeln.apply(this,arguments)},write:function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t],t<arguments.length-1&&(e+=" ");null!=mxLog.textarea?(mxLog.textarea.value=mxLog.textarea.value+e,null!=navigator.userAgent&&navigator.userAgent.indexOf("Presto/2.5")>=0&&(mxLog.textarea.style.visibility="hidden",mxLog.textarea.style.visibility="visible"),mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight):mxLog.buffer+=e},writeln:function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t],t<arguments.length-1&&(e+=" ");mxLog.write(e+"\n")}};__mxOutput.mxLog=void 0!==mxLog?mxLog:void 0;var mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(e){if(null!=e){if(null==e[mxObjectIdentity.FIELD_NAME])if("object"==typeof e){var t=mxUtils.getFunctionName(e.constructor);e[mxObjectIdentity.FIELD_NAME]=t+"#"+mxObjectIdentity.counter++}else"function"==typeof e&&(e[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++);return e[mxObjectIdentity.FIELD_NAME]}return null},clear:function(e){("object"==typeof e||"function"==typeof e)&&delete e[mxObjectIdentity.FIELD_NAME]}};function mxDictionary(){this.clear()}__mxOutput.mxObjectIdentity=void 0!==mxObjectIdentity?mxObjectIdentity:void 0,mxDictionary.prototype.map=null,mxDictionary.prototype.clear=function(){this.map={}},mxDictionary.prototype.get=function(e){var t=mxObjectIdentity.get(e);return this.map[t]},mxDictionary.prototype.put=function(e,t){var r=mxObjectIdentity.get(e),o=this.map[r];return this.map[r]=t,o},mxDictionary.prototype.remove=function(e){var t=mxObjectIdentity.get(e),r=this.map[t];return delete this.map[t],r},mxDictionary.prototype.getKeys=function(){var e=[];for(var t in this.map)e.push(t);return e},mxDictionary.prototype.getValues=function(){var e=[];for(var t in this.map)e.push(this.map[t]);return e},mxDictionary.prototype.visit=function(e){for(var t in this.map)e(t,this.map[t])},__mxOutput.mxDictionary=void 0!==mxDictionary?mxDictionary:void 0;var mxResources={resources:{},extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(e){return null==mxClient.languages||mxUtils.indexOf(mxClient.languages,e)>=0},getDefaultBundle:function(e,t){return mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(t)?e+mxResources.extension:null},getSpecialBundle:function(e,t){if(null==mxClient.languages||!this.isLanguageSupported(t)){var r=t.indexOf("-");r>0&&(t=t.substring(0,r))}return mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(t)&&t!=mxClient.defaultLanguage?e+"_"+t+mxResources.extension:null},add:function(e,t,r){if((t=null!=t?t:null!=mxClient.language?mxClient.language.toLowerCase():mxConstants.NONE)!=mxConstants.NONE){var o=mxResources.getDefaultBundle(e,t),a=mxResources.getSpecialBundle(e,t),u=function(){if(null!=a)if(r)mxUtils.get(a,function(m){mxResources.parse(m.getText()),r()},function(){r()});else try{var f=mxUtils.load(a);f.isReady()&&mxResources.parse(f.getText())}catch(m){}else null!=r&&r()};if(null!=o)if(r)mxUtils.get(o,function(f){mxResources.parse(f.getText()),u()},function(){u()});else try{var c=mxUtils.load(o);c.isReady()&&mxResources.parse(c.getText()),u()}catch(f){}else u()}},parse:function(e){if(null!=e)for(var t=e.split("\n"),r=0;r<t.length;r++)if("#"!=t[r].charAt(0)){var o=t[r].indexOf("=");if(o>0){var a=t[r].substring(0,o),u=t[r].length;13==t[r].charCodeAt(u-1)&&u--;var c=t[r].substring(o+1,u);this.resourcesEncoded?(c=c.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources.resources[a]=unescape(c)):mxResources.resources[a]=c}}},get:function(e,t,r){var o=mxResources.resources[e];return null==o&&(o=r),null!=o&&null!=t&&(o=mxResources.replacePlaceholders(o,t)),o},replacePlaceholders:function(e,t){for(var r=[],o=null,a=0;a<e.length;a++){var u=e.charAt(a);"{"==u?o="":null!=o&&"}"==u?((o=parseInt(o)-1)>=0&&o<t.length&&r.push(t[o]),o=null):null!=o?o+=u:r.push(u)}return r.join("")},loadResources:function(e){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,e)})}};function mxPoint(e,t){this.x=null!=e?e:0,this.y=null!=t?t:0}function mxRectangle(e,t,r,o){mxPoint.call(this,e,t),this.width=null!=r?r:0,this.height=null!=o?o:0}__mxOutput.mxResources=void 0!==mxResources?mxResources:void 0,mxPoint.prototype.x=null,mxPoint.prototype.y=null,mxPoint.prototype.equals=function(e){return null!=e&&e.x==this.x&&e.y==this.y},mxPoint.prototype.clone=function(){return mxUtils.clone(this)},__mxOutput.mxPoint=void 0!==mxPoint?mxPoint:void 0,mxRectangle.prototype=new mxPoint,mxRectangle.prototype.constructor=mxRectangle,mxRectangle.prototype.width=null,mxRectangle.prototype.height=null,mxRectangle.prototype.setRect=function(e,t,r,o){this.x=e,this.y=t,this.width=r,this.height=o},mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2},mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2},mxRectangle.prototype.add=function(e){if(null!=e){var t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),o=Math.max(this.x+this.width,e.x+e.width),a=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.y=r,this.width=o-t,this.height=a-r}},mxRectangle.prototype.intersect=function(e){if(null!=e){var t=this.x+this.width,r=e.x+e.width,o=this.y+this.height,a=e.y+e.height;this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.width=Math.min(t,r)-this.x,this.height=Math.min(o,a)-this.y}},mxRectangle.prototype.grow=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)},mxRectangle.prototype.rotate90=function(){var e=(this.width-this.height)/2;this.x+=e,this.y-=e;var t=this.width;this.width=this.height,this.height=t},mxRectangle.prototype.equals=function(e){return null!=e&&e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height},mxRectangle.fromRectangle=function(e){return new mxRectangle(e.x,e.y,e.width,e.height)},__mxOutput.mxRectangle=void 0!==mxRectangle?mxRectangle:void 0;var mxEffects={animateChanges:function(e,t,r){var o=10,a=0,u=function(){for(var f=!1,m=0;m<t.length;m++){var x=t[m];if(x instanceof mxGeometryChange||x instanceof mxTerminalChange||x instanceof mxValueChange||x instanceof mxChildChange||x instanceof mxStyleChange){var v=e.getView().getState(x.cell||x.child,!1);if(null!=v)if(f=!0,x.constructor!=mxGeometryChange||e.model.isEdge(x.cell))mxUtils.setOpacity(v.shape.node,100*a/o);else{var E=e.getView().scale,S=(x.geometry.x-x.previous.x)*E,b=(x.geometry.y-x.previous.y)*E,_=(x.geometry.width-x.previous.width)*E,D=(x.geometry.height-x.previous.height)*E;0==a?(v.x-=S,v.y-=b,v.width-=_,v.height-=D):(v.x+=S/o,v.y+=b/o,v.width+=_/o,v.height+=D/o),e.cellRenderer.redraw(v),mxEffects.cascadeOpacity(e,x.cell,100*a/o)}}}a<o&&f?(a++,window.setTimeout(u,c)):null!=r&&r()},c=30;u()},cascadeOpacity:function(e,t,r){for(var o=e.model.getChildCount(t),a=0;a<o;a++){var u=e.model.getChildAt(t,a),c=e.getView().getState(u);null!=c&&(mxUtils.setOpacity(c.shape.node,r),mxEffects.cascadeOpacity(e,u,r))}var f=e.model.getEdges(t);if(null!=f)for(a=0;a<f.length;a++){var m=e.getView().getState(f[a]);null!=m&&mxUtils.setOpacity(m.shape.node,r)}},fadeOut:function(e,t,r,o,a,u){o=o||40,a=a||30;var c=t||100;if(mxUtils.setOpacity(e,c),u||null==u){var f=function(){c=Math.max(c-o,0),mxUtils.setOpacity(e,c),c>0?window.setTimeout(f,a):(e.style.visibility="hidden",r&&e.parentNode&&e.parentNode.removeChild(e))};window.setTimeout(f,a)}else e.style.visibility="hidden",r&&e.parentNode&&e.parentNode.removeChild(e)}};__mxOutput.mxEffects=void 0!==mxEffects?mxEffects:void 0;var mxUtils={errorResource:"none"!=mxClient.language?"error":"",closeResource:"none"!=mxClient.language?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(e){null!=e.style&&(e.style.cursor="");var t=e.childNodes;if(null!=t)for(var r=t.length,o=0;o<r;o+=1)mxUtils.removeCursors(t[o])},getCurrentStyle:mxClient.IS_IE&&(null==document.documentMode||document.documentMode<9)?function(e){return null!=e?e.currentStyle:null}:function(e){return null!=e?window.getComputedStyle(e,""):null},parseCssNumber:function(e){return"thin"==e?e="2":"medium"==e?e="4":"thick"==e&&(e="6"),e=parseFloat(e),isNaN(e)&&(e=0),e},setPrefixedStyle:function(){var e=null;return mxClient.IS_OT?e="O":mxClient.IS_SF||mxClient.IS_GC?e="Webkit":mxClient.IS_MT?e="Moz":mxClient.IS_IE&&document.documentMode>=9&&document.documentMode<10&&(e="ms"),function(t,r,o){t[r]=o,null!=e&&r.length>0&&(t[r=e+r.substring(0,1).toUpperCase()+r.substring(1)]=o)}}(),hasScrollbars:function(e){var t=mxUtils.getCurrentStyle(e);return null!=t&&("scroll"==t.overflow||"auto"==t.overflow)},bind:function(e,t){return function(){return t.apply(e,arguments)}},eval:function(expr){var result=null;if(expr.indexOf("function")>=0)try{eval("var _mxJavaScriptExpression="+expr),result=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}else try{result=eval(expr)}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}return result},findNode:function(e,t,r){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var o=e.getAttribute(t);if(null!=o&&o==r)return e}for(e=e.firstChild;null!=e;){var a=mxUtils.findNode(e,t,r);if(null!=a)return a;e=e.nextSibling}return null},getFunctionName:function(e){var t=null;if(null!=e)if(null!=e.name)t=e.name;else if(t=mxUtils.trim(e.toString()),/^function\s/.test(t)){var r=(t=mxUtils.ltrim(t.substring(9))).indexOf("(");r>0&&(t=t.substring(0,r))}return t},indexOf:function(e,t){if(null!=e&&null!=t)for(var r=0;r<e.length;r++)if(e[r]==t)return r;return-1},forEach:function(e,t){if(null!=e&&null!=t)for(var r=0;r<e.length;r++)t(e[r]);return e},remove:function(e,t){var r=null;if("object"==typeof t)for(var o=mxUtils.indexOf(t,e);o>=0;)t.splice(o,1),r=e,o=mxUtils.indexOf(t,e);for(var a in t)t[a]==e&&(delete t[a],r=e);return r},isNode:function(e,t,r,o){return!(null==e||isNaN(e.nodeType)||null!=t&&e.nodeName.toLowerCase()!=t.toLowerCase()||null!=r&&e.getAttribute(r)!=o)},isAncestorNode:function(e,t){for(var r=t;null!=r;){if(r==e)return!0;r=r.parentNode}return!1},getChildNodes:function(e,t){t=t||mxConstants.NODETYPE_ELEMENT;for(var r=[],o=e.firstChild;null!=o;)o.nodeType==t&&r.push(o),o=o.nextSibling;return r},importNode:function(e,t,r){return mxClient.IS_IE&&(null==document.documentMode||document.documentMode<10)?mxUtils.importNodeImplementation(e,t,r):e.importNode(t,r)},importNodeImplementation:function(e,t,r){switch(t.nodeType){case 1:var o=e.createElement(t.nodeName);if(t.attributes&&t.attributes.length>0)for(var a=0;a<t.attributes.length;a++)o.setAttribute(t.attributes[a].nodeName,t.getAttribute(t.attributes[a].nodeName));if(r&&t.childNodes&&t.childNodes.length>0)for(a=0;a<t.childNodes.length;a++)o.appendChild(mxUtils.importNodeImplementation(e,t.childNodes[a],r));return o;case 3:case 4:case 8:return e.createTextNode(null!=t.nodeValue?t.nodeValue:t.value)}},createXmlDocument:function(){var e=null;return document.implementation&&document.implementation.createDocument?e=document.implementation.createDocument("","",null):"ActiveXObject"in window&&(e=mxUtils.createMsXmlDocument()),e},createMsXmlDocument:function(){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.validateOnParse=!1,e.resolveExternals=!1,e},parseXml:window.DOMParser?function(e){return(new DOMParser).parseFromString(e,"text/xml")}:function(e){var t=mxUtils.createMsXmlDocument();return t.loadXML(e),t},clearSelection:document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){},removeWhitespace:function(e,t){for(var r=t?e.previousSibling:e.nextSibling;null!=r&&r.nodeType==mxConstants.NODETYPE_TEXT;){var o=t?r.previousSibling:r.nextSibling,a=mxUtils.getTextContent(r);0==mxUtils.trim(a).length&&r.parentNode.removeChild(r),r=o}},htmlEntities:function(e,t){return e=(e=(e=(e=(e=(e=String(e||"")).replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/\'/g,"&#39;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),(null==t||t)&&(e=e.replace(/\n/g,"&#xa;")),e},isVml:function(e){return null!=e&&"urn:schemas-microsoft-com:vml"==e.tagUrn},getXml:function(e,t){var r="";return mxClient.IS_IE||mxClient.IS_IE11?r=mxUtils.getPrettyXml(e,"","",""):null!=window.XMLSerializer?r=(new XMLSerializer).serializeToString(e):null!=e.xml&&(r=e.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")),r.replace(/\n/g,t=t||"&#xa;")},getPrettyXml:function(e,t,r,o,a){var u=[];if(null!=e)if(t=null!=t?t:"  ",r=null!=r?r:"",o=null!=o?o:"\n",null!=e.namespaceURI&&e.namespaceURI!=a&&(a=e.namespaceURI,null==e.getAttribute("xmlns")&&e.setAttribute("xmlns",e.namespaceURI)),e.nodeType==mxConstants.NODETYPE_DOCUMENT)u.push(mxUtils.getPrettyXml(e.documentElement,t,r,o,a));else if(e.nodeType==mxConstants.NODETYPE_DOCUMENT_FRAGMENT){if(null!=(c=e.firstChild))for(;null!=c;)u.push(mxUtils.getPrettyXml(c,t,r,o,a)),c=c.nextSibling}else if(e.nodeType==mxConstants.NODETYPE_COMMENT)(f=mxUtils.getTextContent(e)).length>0&&u.push(r+"\x3c!--"+f+"--\x3e"+o);else if(e.nodeType==mxConstants.NODETYPE_TEXT)(f=mxUtils.trim(mxUtils.getTextContent(e))).length>0&&u.push(r+mxUtils.htmlEntities(f,!1)+o);else if(e.nodeType==mxConstants.NODETYPE_CDATA){var f;(f=mxUtils.getTextContent(e)).length>0&&u.push(r+"<![CDATA["+f+"]]"+o)}else{u.push(r+"<"+e.nodeName);var c,m=e.attributes;if(null!=m)for(var x=0;x<m.length;x++){var v=mxUtils.htmlEntities(m[x].value);u.push(" "+m[x].nodeName+'="'+v+'"')}if(null!=(c=e.firstChild)){for(u.push(">"+o);null!=c;)u.push(mxUtils.getPrettyXml(c,t,r+t,o,a)),c=c.nextSibling;u.push(r+"</"+e.nodeName+">"+o)}else u.push(" />"+o)}return u.join("")},extractTextWithWhitespace:function(e){var t=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"],r=[];return function o(a){if(1!=a.length||"BR"!=a[0].nodeName&&"\n"!=a[0].innerHTML)for(var u=0;u<a.length;u++){var c=a[u];"BR"==c.nodeName||"\n"==c.innerHTML||(1==a.length||0==u)&&"DIV"==c.nodeName&&"<br>"==c.innerHTML.toLowerCase()?r.push("\n"):(3===c.nodeType||4===c.nodeType?c.nodeValue.length>0&&r.push(c.nodeValue):8!==c.nodeType&&c.childNodes.length>0&&o(c.childNodes),u<a.length-1&&mxUtils.indexOf(t,a[u+1].nodeName)>=0&&r.push("\n"))}}(e),r.join("")},replaceTrailingNewlines:function(e,t){for(var r="";e.length>0&&"\n"==e.charAt(e.length-1);)e=e.substring(0,e.length-1),r+=t;return e+r},getTextContent:function(e){return mxClient.IS_IE&&void 0!==e.innerText?e.innerText:null!=e?e[void 0===e.textContent?"text":"textContent"]:""},setTextContent:function(e,t){void 0!==e.innerText?e.innerText=t:e[void 0===e.textContent?"text":"textContent"]=t},getInnerHtml:mxClient.IS_IE?function(e){return null!=e?e.innerHTML:""}:function(e){return null!=e?(new XMLSerializer).serializeToString(e):""},getOuterHtml:mxClient.IS_IE?function(e){if(null!=e){if(null!=e.outerHTML)return e.outerHTML;var t=[];t.push("<"+e.nodeName);var r=e.attributes;if(null!=r)for(var o=0;o<r.length;o++){var a=r[o].value;null!=a&&a.length>0&&(t.push(" "),t.push(r[o].nodeName),t.push('="'),t.push(a),t.push('"'))}return 0==e.innerHTML.length?t.push("/>"):(t.push(">"),t.push(e.innerHTML),t.push("</"+e.nodeName+">")),t.join("")}return""}:function(e){return null!=e?(new XMLSerializer).serializeToString(e):""},write:function(e,t){var o=e.ownerDocument.createTextNode(t);return null!=e&&e.appendChild(o),o},writeln:function(e,t){var o=e.ownerDocument.createTextNode(t);return null!=e&&(e.appendChild(o),e.appendChild(document.createElement("br"))),o},br:function(e,t){t=t||1;for(var r=null,o=0;o<t;o++)null!=e&&(r=e.ownerDocument.createElement("br"),e.appendChild(r));return r},button:function(e,t,r){var o=(r=null!=r?r:document).createElement("button");return mxUtils.write(o,e),mxEvent.addListener(o,"click",function(a){t(a)}),o},para:function(e,t){var r=document.createElement("p");return mxUtils.write(r,t),null!=e&&e.appendChild(r),r},addTransparentBackgroundFilter:function(e){e.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(e,t,r,o,a){return mxUtils.link(e,t,function(){r.execute(o)},a)},linkInvoke:function(e,t,r,o,a,u){return mxUtils.link(e,t,function(){r[o](a)},u)},link:function(e,t,r,o){var a=document.createElement("span");return a.style.color="blue",a.style.textDecoration="underline",a.style.cursor="pointer",null!=o&&(a.style.paddingLeft=o+"px"),mxEvent.addListener(a,"click",r),mxUtils.write(a,t),null!=e&&e.appendChild(a),a},getDocumentSize:function(){var e=document.body,t=document.documentElement;try{return new mxRectangle(0,0,e.clientWidth||t.clientWidth,Math.max(e.clientHeight||0,t.clientHeight))}catch(r){return new mxRectangle}},fit:function(e){var t=mxUtils.getDocumentSize(),r=parseInt(e.offsetLeft),o=parseInt(e.offsetWidth),a=mxUtils.getDocumentScrollOrigin(e.ownerDocument),u=a.x,c=a.y,x=(document,document,u+t.width);r+o>x&&(e.style.left=Math.max(u,x-o)+"px");var v=parseInt(e.offsetTop),E=parseInt(e.offsetHeight),S=c+t.height;v+E>S&&(e.style.top=Math.max(c,S-E)+"px")},load:function(e){var t=new mxXmlRequest(e,null,"GET",!1);return t.send(),t},get:function(e,t,r,o,a,u,c){var f=new mxXmlRequest(e,null,"GET"),m=f.setRequestHeaders;return c&&(f.setRequestHeaders=function(x,v){for(var E in m.apply(this,arguments),c)x.setRequestHeader(E,c[E])}),null!=o&&f.setBinary(o),f.send(t,r,a,u),f},getAll:function(e,t,r){for(var o=e.length,a=[],u=0,c=function(){0==u&&null!=r&&r(),u++},f=0;f<e.length;f++)!function(m,x){mxUtils.get(m,function(v){var E=v.getStatus();E<200||E>299?c():(a[x]=v,0==--o&&t(a))},c)}(e[f],f);0==o&&t(a)},post:function(e,t,r,o){return new mxXmlRequest(e,t).send(r,o)},submit:function(e,t,r,o){return new mxXmlRequest(e,t).simulate(r,o)},loadInto:function(e,t,r){mxClient.IS_IE?t.onreadystatechange=function(){4==t.readyState&&r()}:t.addEventListener("load",r,!1),t.load(e)},getValue:function(e,t,r){var o=null!=e?e[t]:null;return null==o&&(o=r),o},getNumber:function(e,t,r){var o=null!=e?e[t]:null;return null==o&&(o=r||0),Number(o)},getColor:function(e,t,r){var o=null!=e?e[t]:null;return null==o?o=r:o==mxConstants.NONE&&(o=null),o},clone:function(e,t,r){r=null!=r&&r;var o=null;if(null!=e&&"function"==typeof e.constructor)for(var a in o=new e.constructor,e)a!=mxObjectIdentity.FIELD_NAME&&(null==t||mxUtils.indexOf(t,a)<0)&&(o[a]=r||"object"!=typeof e[a]?e[a]:mxUtils.clone(e[a]));return o},equalPoints:function(e,t){if(null==e&&null!=t||null!=e&&null==t||null!=e&&null!=t&&e.length!=t.length)return!1;if(null!=e&&null!=t)for(var r=0;r<e.length;r++)if(null!=e[r]&&null==t[r]||null==e[r]&&null!=t[r]||null!=e[r]&&null!=t[r]&&(e[r].x!=t[r].x||e[r].y!=t[r].y))return!1;return!0},equalEntries:function(e,t){var r=0;if(null==e&&null!=t||null!=e&&null==t||null!=e&&null!=t&&e.length!=t.length)return!1;if(null!=e&&null!=t){for(var o in t)r++;for(var o in e)if(r--,!(mxUtils.isNaN(e[o])&&mxUtils.isNaN(t[o])||e[o]==t[o]))return!1}return 0==r},removeDuplicates:function(e){for(var t=new mxDictionary,r=[],o=0;o<e.length;o++)t.get(e[o])||(r.push(e[o]),t.put(e[o],!0));return r},isNaN:function(e){return"number"==typeof e&&isNaN(e)},extend:function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},toString:function(e){var t="";for(var r in e)try{t+=null==e[r]?r+" = [null]\n":"function"==typeof e[r]?r+" => [Function]\n":"object"==typeof e[r]?r+" => ["+mxUtils.getFunctionName(e[r].constructor)+"]\n":r+" = "+e[r]+"\n"}catch(a){t+=r+"="+a.message}return t},toRadians:function(e){return Math.PI*e/180},toDegree:function(e){return 180*e/Math.PI},arcToCurves:function(e,t,r,o,a,u,c,f,m){if(f-=e,m-=t,0===r||0===o)return we;var x=c,v=a;r=Math.abs(r),o=Math.abs(o);var G,E=-f/2,S=-m/2,b=Math.cos(v*Math.PI/180),_=Math.sin(v*Math.PI/180),D=b*E+_*S,M=-1*_*E+b*S,R=D*D,N=M*M,V=r*r,O=o*o,F=R/V+N/O;if(F>1)r=Math.sqrt(F)*r,o=Math.sqrt(F)*o,G=0;else{var j=1;u===x&&(j=-1),G=j*Math.sqrt((V*O-V*N-O*R)/(V*N+O*R))}var Y=G*r*M/o,W=-1*G*o*D/r,q=b*Y-_*W+f/2,Z=_*Y+b*W+m/2,Q=Math.atan2((M-W)/o,(D-Y)/r)-Math.atan2(0,1),K=Q>=0?Q:2*Math.PI+Q,ie=(Q=Math.atan2((-M-W)/o,(-D-Y)/r)-Math.atan2((M-W)/o,(D-Y)/r))>=0?Q:2*Math.PI+Q;0==x&&ie>0?ie-=2*Math.PI:0!=x&&ie<0&&(ie+=2*Math.PI);for(var U=2*ie/Math.PI,he=Math.ceil(U<0?-1*U:U),je=ie/he,Oe=8/3*Math.sin(je/4)*Math.sin(je/4)/Math.sin(je/2),Me=b*r,Ce=b*o,et=_*r,tt=_*o,Ae=Math.cos(K),qe=Math.sin(K),un=-Oe*(Me*qe+tt*Ae),Lt=-Oe*(et*qe-Ce*Ae),dt=0,ct=0,we=[],Le=0;Le<he;++Le){K+=je,dt=Me*(Ae=Math.cos(K))-tt*(qe=Math.sin(K))+q,ct=et*Ae+Ce*qe+Z;var Ue=-Oe*(Me*qe+tt*Ae),In=-Oe*(et*qe-Ce*Ae),Ht=6*Le;we[Ht]=Number(un+e),we[Ht+1]=Number(Lt+t),we[Ht+2]=Number(dt-Ue+e),we[Ht+3]=Number(ct-In+t),we[Ht+4]=Number(dt+e),we[Ht+5]=Number(ct+t),un=dt+Ue,Lt=ct+In}return we},getBoundingBox:function(e,t,r){var o=null;if(null!=e&&null!=t&&0!=t){var a=mxUtils.toRadians(t),u=Math.cos(a),c=Math.sin(a);r=null!=r?r:new mxPoint(e.x+e.width/2,e.y+e.height/2);var f=new mxPoint(e.x,e.y),m=new mxPoint(e.x+e.width,e.y),x=new mxPoint(m.x,e.y+e.height),v=new mxPoint(e.x,x.y);f=mxUtils.getRotatedPoint(f,u,c,r),m=mxUtils.getRotatedPoint(m,u,c,r),x=mxUtils.getRotatedPoint(x,u,c,r),v=mxUtils.getRotatedPoint(v,u,c,r),(o=new mxRectangle(f.x,f.y,0,0)).add(new mxRectangle(m.x,m.y,0,0)),o.add(new mxRectangle(x.x,x.y,0,0)),o.add(new mxRectangle(v.x,v.y,0,0))}return o},getRotatedPoint:function(e,t,r,o){o=null!=o?o:new mxPoint;var a=e.x-o.x,u=e.y-o.y;return new mxPoint(a*t-u*r+o.x,u*t+a*r+o.y)},getPortConstraints:function(e,t,r,o){var a=mxUtils.getValue(e.style,mxConstants.STYLE_PORT_CONSTRAINT,mxUtils.getValue(t.style,r?mxConstants.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants.STYLE_TARGET_PORT_CONSTRAINT,null));if(null==a)return o;var u=a.toString(),c=mxConstants.DIRECTION_MASK_NONE,m=0;1==mxUtils.getValue(e.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0)&&(m=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0));var x=0;if(m>45?(x=1,m>=135&&(x=2)):m<-45&&(x=3,m<=-135&&(x=2)),u.indexOf(mxConstants.DIRECTION_NORTH)>=0)switch(x){case 0:c|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:c|=mxConstants.DIRECTION_MASK_EAST;break;case 2:c|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:c|=mxConstants.DIRECTION_MASK_WEST}if(u.indexOf(mxConstants.DIRECTION_WEST)>=0)switch(x){case 0:c|=mxConstants.DIRECTION_MASK_WEST;break;case 1:c|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:c|=mxConstants.DIRECTION_MASK_EAST;break;case 3:c|=mxConstants.DIRECTION_MASK_SOUTH}if(u.indexOf(mxConstants.DIRECTION_SOUTH)>=0)switch(x){case 0:c|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:c|=mxConstants.DIRECTION_MASK_WEST;break;case 2:c|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:c|=mxConstants.DIRECTION_MASK_EAST}if(u.indexOf(mxConstants.DIRECTION_EAST)>=0)switch(x){case 0:c|=mxConstants.DIRECTION_MASK_EAST;break;case 1:c|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:c|=mxConstants.DIRECTION_MASK_WEST;break;case 3:c|=mxConstants.DIRECTION_MASK_NORTH}return c},reversePortConstraints:function(e){var t=0;return t=(e&mxConstants.DIRECTION_MASK_WEST)<<3,t|=(e&mxConstants.DIRECTION_MASK_NORTH)<<1,(t|=(e&mxConstants.DIRECTION_MASK_SOUTH)>>1)|(e&mxConstants.DIRECTION_MASK_EAST)>>3},findNearestSegment:function(e,t,r){var o=-1;if(e.absolutePoints.length>0)for(var a=e.absolutePoints[0],u=null,c=1;c<e.absolutePoints.length;c++){var f=e.absolutePoints[c],m=mxUtils.ptSegDistSq(a.x,a.y,f.x,f.y,t,r);(null==u||m<u)&&(u=m,o=c-1),a=f}return o},getDirectedBounds:function(e,t,r,o,a){var u=mxUtils.getValue(r,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST);if(o=null!=o?o:mxUtils.getValue(r,mxConstants.STYLE_FLIPH,!1),a=null!=a?a:mxUtils.getValue(r,mxConstants.STYLE_FLIPV,!1),t.x=Math.round(Math.max(0,Math.min(e.width,t.x))),t.y=Math.round(Math.max(0,Math.min(e.height,t.y))),t.width=Math.round(Math.max(0,Math.min(e.width,t.width))),t.height=Math.round(Math.max(0,Math.min(e.height,t.height))),a&&(u==mxConstants.DIRECTION_SOUTH||u==mxConstants.DIRECTION_NORTH)||o&&(u==mxConstants.DIRECTION_EAST||u==mxConstants.DIRECTION_WEST)){var c=t.x;t.x=t.width,t.width=c}(o&&(u==mxConstants.DIRECTION_SOUTH||u==mxConstants.DIRECTION_NORTH)||a&&(u==mxConstants.DIRECTION_EAST||u==mxConstants.DIRECTION_WEST))&&(c=t.y,t.y=t.height,t.height=c);var f=mxRectangle.fromRectangle(t);return u==mxConstants.DIRECTION_SOUTH?(f.y=t.x,f.x=t.height,f.width=t.y,f.height=t.width):u==mxConstants.DIRECTION_WEST?(f.y=t.height,f.x=t.width,f.width=t.x,f.height=t.y):u==mxConstants.DIRECTION_NORTH&&(f.y=t.width,f.x=t.y,f.width=t.height,f.height=t.x),new mxRectangle(e.x+f.x,e.y+f.y,e.width-f.width-f.x,e.height-f.height-f.y)},getPerimeterPoint:function(e,t,r){for(var o=null,a=0;a<e.length-1;a++){var u=mxUtils.intersection(e[a].x,e[a].y,e[a+1].x,e[a+1].y,t.x,t.y,r.x,r.y);if(null!=u){var c=r.x-u.x,f=r.y-u.y,m={p:u,distSq:f*f+c*c};null!=m&&(null==o||o.distSq>m.distSq)&&(o=m)}}return null!=o?o.p:null},rectangleIntersectsSegment:function(e,t,r){var o=e.y,a=e.x,u=o+e.height,c=a+e.width,f=t.x,m=r.x;if(t.x>r.x&&(f=r.x,m=t.x),m>c&&(m=c),f<a&&(f=a),f>m)return!1;var x=t.y,v=r.y,E=r.x-t.x;if(Math.abs(E)>1e-7){var S=(r.y-t.y)/E,b=t.y-S*t.x;x=S*f+b,v=S*m+b}if(x>v){var _=v;v=x,x=_}return v>u&&(v=u),x<o&&(x=o),!(x>v)},contains:function(e,t,r){return e.x<=t&&e.x+e.width>=t&&e.y<=r&&e.y+e.height>=r},intersects:function(e,t){var r=e.width,o=e.height,a=t.width,u=t.height;if(a<=0||u<=0||r<=0||o<=0)return!1;var c=e.x,f=e.y,m=t.x,x=t.y;return u+=x,r+=c,o+=f,((a+=m)<m||a>c)&&(u<x||u>f)&&(r<c||r>m)&&(o<f||o>x)},intersectsHotspot:function(e,t,r,o,a,u){if(a=null!=a?a:0,u=null!=u?u:0,(o=null!=o?o:1)>0){var c=e.getCenterX(),f=e.getCenterY(),m=e.width,x=e.height,v=mxUtils.getValue(e.style,mxConstants.STYLE_STARTSIZE)*e.view.scale;v>0&&(mxUtils.getValue(e.style,mxConstants.STYLE_HORIZONTAL,!0)?(f=e.y+v/2,x=v):(c=e.x+v/2,m=v)),m=Math.max(a,m*o),x=Math.max(a,x*o),u>0&&(m=Math.min(m,u),x=Math.min(x,u));var E=new mxRectangle(c-m/2,f-x/2,m,x),S=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0);if(0!=S){var b=Math.cos(-S),_=Math.sin(-S),D=(c=new mxPoint(e.getCenterX(),e.getCenterY()),mxUtils.getRotatedPoint(new mxPoint(t,r),b,_,c));t=D.x,r=D.y}return mxUtils.contains(E,t,r)}return!0},getOffset:function(e,t){for(var r=0,o=0,a=!1,u=e,c=document.body,f=document.documentElement;null!=u&&u!=c&&u!=f&&!a;){var m=mxUtils.getCurrentStyle(u);null!=m&&(a=a||"fixed"==m.position),u=u.parentNode}if(!t&&!a){var x=mxUtils.getDocumentScrollOrigin(e.ownerDocument);r+=x.x,o+=x.y}var v=e.getBoundingClientRect();return null!=v&&(r+=v.left,o+=v.top),new mxPoint(r,o)},getDocumentScrollOrigin:function(e){if(mxClient.IS_QUIRKS)return new mxPoint(e.body.scrollLeft,e.body.scrollTop);var t=e.defaultView||e.parentWindow;return new mxPoint(null!=t&&void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,null!=t&&void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)},getScrollOrigin:function(e,t,r){t=null!=t&&t,r=null==r||r;for(var o=null!=e?e.ownerDocument:document,a=o.body,u=o.documentElement,c=new mxPoint,f=!1;null!=e&&e!=a&&e!=u;){!isNaN(e.scrollLeft)&&!isNaN(e.scrollTop)&&(c.x+=e.scrollLeft,c.y+=e.scrollTop);var m=mxUtils.getCurrentStyle(e);null!=m&&(f=f||"fixed"==m.position),e=t?e.parentNode:null}if(!f&&r){var x=mxUtils.getDocumentScrollOrigin(o);c.x+=x.x,c.y+=x.y}return c},convertPoint:function(e,t,r){var o=mxUtils.getScrollOrigin(e,!1),a=mxUtils.getOffset(e);return a.x-=o.x,a.y-=o.y,new mxPoint(t-a.x,r-a.y)},ltrim:function(e,t){return t=t||"\\s",null!=e?e.replace(new RegExp("^["+t+"]+","g"),""):null},rtrim:function(e,t){return t=t||"\\s",null!=e?e.replace(new RegExp("["+t+"]+$","g"),""):null},trim:function(e,t){return mxUtils.ltrim(mxUtils.rtrim(e,t),t)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)&&("string"!=typeof e||e.toLowerCase().indexOf("0x")<0)},isInteger:function(e){return String(parseInt(e))===String(e)},mod:function(e,t){return(e%t+t)%t},intersection:function(e,t,r,o,a,u,c,f){var m=(f-u)*(r-e)-(c-a)*(o-t),E=((c-a)*(t-u)-(f-u)*(e-a))/m,S=((r-e)*(t-u)-(o-t)*(e-a))/m;return E>=0&&E<=1&&S>=0&&S<=1?new mxPoint(e+E*(r-e),t+E*(o-t)):null},ptSegDistSq:function(e,t,r,o,a,u){var f,c=(a-=e)*(r-=e)+(u-=t)*(o-=t);f=c<=0||(c=(a=r-a)*r+(u=o-u)*o)<=0?0:c*c/(r*r+o*o);var m=a*a+u*u-f;return m<0&&(m=0),m},ptLineDist:function(e,t,r,o,a,u){return Math.abs((o-t)*a-(r-e)*u+r*t-o*e)/Math.sqrt((o-t)*(o-t)+(r-e)*(r-e))},relativeCcw:function(e,t,r,o,a,u){var c=(a-=e)*(o-=t)-(u-=t)*(r-=e);return 0==c&&(c=a*r+u*o)>0&&(c=(a-=r)*r+(u-=o)*o)<0&&(c=0),c<0?-1:c>0?1:0},animateChanges:function(e,t){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(e,t,r){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(e,t,r,o,a,u){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(e,t){mxUtils.isVml(e)?e.style.filter=t>=100?"":"alpha(opacity="+t/5+")":mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?e.style.filter=t>=100?"":"alpha(opacity="+t+")":e.style.opacity=t/100},createImage:function(e){var t=null;return mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?((t=document.createElement(mxClient.VML_PREFIX+":image")).setAttribute("src",e),t.style.borderStyle="none"):((t=document.createElement("img")).setAttribute("src",e),t.setAttribute("border","0")),t},sortCells:function(e,t){t=null==t||t;var r=new mxDictionary;return e.sort(function(o,a){var u=r.get(o);null==u&&(u=mxCellPath.create(o).split(mxCellPath.PATH_SEPARATOR),r.put(o,u));var c=r.get(a);null==c&&(c=mxCellPath.create(a).split(mxCellPath.PATH_SEPARATOR),r.put(a,c));var f=mxCellPath.compare(u,c);return 0==f?0:f>0==t?1:-1}),e},getStylename:function(e){if(null!=e){var r=e.split(";")[0];if(r.indexOf("=")<0)return r}return""},getStylenames:function(e){var t=[];if(null!=e)for(var r=e.split(";"),o=0;o<r.length;o++)r[o].indexOf("=")<0&&t.push(r[o]);return t},indexOfStylename:function(e,t){if(null!=e&&null!=t)for(var r=e.split(";"),o=0,a=0;a<r.length;a++){if(r[a]==t)return o;o+=r[a].length+1}return-1},addStylename:function(e,t){return mxUtils.indexOfStylename(e,t)<0&&(null==e?e="":e.length>0&&";"!=e.charAt(e.length-1)&&(e+=";"),e+=t),e},removeStylename:function(e,t){var r=[];if(null!=e)for(var o=e.split(";"),a=0;a<o.length;a++)o[a]!=t&&r.push(o[a]);return r.join(";")},removeAllStylenames:function(e){var t=[];if(null!=e)for(var r=e.split(";"),o=0;o<r.length;o++)r[o].indexOf("=")>=0&&t.push(r[o]);return t.join(";")},setCellStyles:function(e,t,r,o){if(null!=t&&t.length>0){e.beginUpdate();try{for(var a=0;a<t.length;a++)if(null!=t[a]){var u=mxUtils.setStyle(e.getStyle(t[a]),r,o);e.setStyle(t[a],u)}}finally{e.endUpdate()}}},setStyle:function(e,t,r){var o=null!=r&&(void 0===r.length||r.length>0);if(null==e||0==e.length)o&&(e=t+"="+r+";");else if(e.substring(0,t.length+1)==t+"="){var a=e.indexOf(";");e=o?t+"="+r+(a<0?";":e.substring(a)):a<0||a==e.length-1?"":e.substring(a+1)}else{var u=e.indexOf(";"+t+"=");if(u<0){if(o){var c=";"==e.charAt(e.length-1)?"":";";e=e+c+t+"="+r+";"}}else a=e.indexOf(";",u+1),e=o?e.substring(0,u+1)+t+"="+r+(a<0?";":e.substring(a)):e.substring(0,u)+(a<0?";":e.substring(a))}return e},setCellStyleFlags:function(e,t,r,o,a){if(null!=t&&t.length>0){e.beginUpdate();try{for(var u=0;u<t.length;u++)if(null!=t[u]){var c=mxUtils.setStyleFlag(e.getStyle(t[u]),r,o,a);e.setStyle(t[u],c)}}finally{e.endUpdate()}}},setStyleFlag:function(e,t,r,o){if(null==e||0==e.length)e=o||null==o?t+"="+r:t+"=0";else{var a=e.indexOf(t+"=");if(a<0){var u=";"==e.charAt(e.length-1)?"":";";e=o||null==o?e+u+t+"="+r:e+u+t+"=0"}else{var c=e.indexOf(";",a),f="";f=c<0?e.substring(a+t.length+1):e.substring(a+t.length+1,c),f=null==o?parseInt(f)^r:o?parseInt(f)|r:parseInt(f)&~r,e=e.substring(0,a)+t+"="+f+(c>=0?e.substring(c):"")}}return e},getAlignmentAsPoint:function(e,t){var r=-.5,o=-.5;return e==mxConstants.ALIGN_LEFT?r=0:e==mxConstants.ALIGN_RIGHT&&(r=-1),t==mxConstants.ALIGN_TOP?o=0:t==mxConstants.ALIGN_BOTTOM&&(o=-1),new mxPoint(r,o)},getSizeForString:function(e,t,r,o,a){t=null!=t?t:mxConstants.DEFAULT_FONTSIZE,r=null!=r?r:mxConstants.DEFAULT_FONTFAMILY;var u=document.createElement("div");if(u.style.fontFamily=r,u.style.fontSize=Math.round(t)+"px",u.style.lineHeight=Math.round(t*mxConstants.LINE_HEIGHT)+"px",null!=a){(a&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(u.style.fontWeight="bold"),(a&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(u.style.fontStyle="italic");var c=[];(a&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&c.push("underline"),(a&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&c.push("line-through"),c.length>0&&(u.style.textDecoration=c.join(" "))}u.style.position="absolute",u.style.visibility="hidden",u.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",u.style.zoom="1",null!=o?(u.style.width=o+"px",u.style.whiteSpace="normal"):u.style.whiteSpace="nowrap",u.innerHTML=e,document.body.appendChild(u);var f=new mxRectangle(0,0,u.offsetWidth,u.offsetHeight);return document.body.removeChild(u),f},getViewXml:function(e,t,r,o,a){o=null!=o?o:0,a=null!=a?a:0,t=null!=t?t:1,null==r&&(r=[e.getModel().getRoot()]);var c=e.getView(),f=null,m=c.isEventsEnabled();c.setEventsEnabled(!1);var x=c.drawPane,v=c.overlayPane;e.dialect==mxConstants.DIALECT_SVG?(c.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),c.canvas.appendChild(c.drawPane),c.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),c.canvas.appendChild(c.overlayPane)):(c.drawPane=c.drawPane.cloneNode(!1),c.canvas.appendChild(c.drawPane),c.overlayPane=c.overlayPane.cloneNode(!1),c.canvas.appendChild(c.overlayPane));var E=c.getTranslate();c.translate=new mxPoint(o,a);var S=new mxTemporaryCellStates(e.getView(),t,r);try{f=(new mxCodec).encode(e.getView())}finally{S.destroy(),c.translate=E,c.canvas.removeChild(c.drawPane),c.canvas.removeChild(c.overlayPane),c.drawPane=x,c.overlayPane=v,c.setEventsEnabled(m)}return f},getScaleForPageCount:function(e,t,r,o){if(e<1)return 1;var a=(r=null!=r?r:mxConstants.PAGE_FORMAT_A4_PORTRAIT).width-2*(o=null!=o?o:0),u=r.height-2*o,c=t.getGraphBounds().clone(),f=t.getView().getScale();c.width/=f,c.height/=f;var m=c.width,b=m/c.height/(a/u),_=Math.sqrt(e),D=Math.sqrt(b),M=_*D,R=_/D;if(M<1&&R>e){var N=R/e;R=e,M/=N}R<1&&M>e&&(N=M/e,M=e,R/=N);for(var V=Math.ceil(M)*Math.ceil(R),O=0;V>e;){var F=Math.floor(M)/M,G=Math.floor(R)/R;if(1==F&&(F=Math.floor(M-1)/M),1==G&&(G=Math.floor(R-1)/R),N=1,M*=N=F>G?F:G,R*=N,V=Math.ceil(M)*Math.ceil(R),++O>10)break}return a*M/m*.99999},show:function(e,t,r,o,a,u){r=null!=r?r:0,o=null!=o?o:0,null==t?t=window.open().document:t.open(),9==document.documentMode&&t.writeln('\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]--\x3e');var f=e.getGraphBounds(),m=Math.ceil(r-f.x),x=Math.ceil(o-f.y);if(null==a&&(a=Math.ceil(f.width+r)+Math.ceil(Math.ceil(f.x)-f.x)),null==u&&(u=Math.ceil(f.height+o)+Math.ceil(Math.ceil(f.y)-f.y)),mxClient.IS_IE||11==document.documentMode){for(var v="<html><head>",E=document.getElementsByTagName("base"),S=0;S<E.length;S++)v+=E[S].outerHTML;for(v+="<style>",S=0;S<document.styleSheets.length;S++)try{v+=document.styleSheets[S].cssText}catch(F){}v+='</style></head><body style="margin:0px;">',v+='<div style="position:absolute;overflow:hidden;width:'+a+"px;height:"+u+'px;"><div style="position:relative;left:'+m+"px;top:"+x+'px;">',v+=e.container.innerHTML,t.writeln(v+="</div></div></body><html>"),t.close()}else{for(t.writeln("<html><head>"),E=document.getElementsByTagName("base"),S=0;S<E.length;S++)t.writeln(mxUtils.getOuterHtml(E[S]));var b=document.getElementsByTagName("link");for(S=0;S<b.length;S++)t.writeln(mxUtils.getOuterHtml(b[S]));var _=document.getElementsByTagName("style");for(S=0;S<_.length;S++)t.writeln(mxUtils.getOuterHtml(_[S]));t.writeln('</head><body style="margin:0px;"></body></html>'),t.close();var D=t.createElement("div");D.position="absolute",D.overflow="hidden",D.style.width=a+"px",D.style.height=u+"px";var M=t.createElement("div");M.style.position="absolute",M.style.left=m+"px",M.style.top=x+"px";for(var R=e.container.firstChild,N=null;null!=R;){var V=R.cloneNode(!0);R==e.view.drawPane.ownerSVGElement?(D.appendChild(V),N=V):M.appendChild(V),R=R.nextSibling}t.body.appendChild(D),null!=M.firstChild&&t.body.appendChild(M),null!=N&&(N.style.minWidth="",N.style.minHeight="",N.firstChild.setAttribute("transform","translate("+m+","+x+")"))}return mxUtils.removeCursors(t.body),t},printScreen:function(e){var t=window.open();e.getGraphBounds(),mxUtils.show(e,t.document);var o=function(){t.focus(),t.print(),t.close()};mxClient.IS_GC?t.setTimeout(o,500):o()},popup:function(e,t){if(t){var r=document.createElement("div");r.style.overflow="scroll",r.style.width="636px",r.style.height="460px",(o=document.createElement("pre")).innerHTML=mxUtils.htmlEntities(e,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),r.appendChild(o),(c=new mxWindow("Popup Window",r,document.body.clientWidth/2-320,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)/2-240,640,480,!1,!0)).setClosable(!0),c.setVisible(!0)}else if(mxClient.IS_NS)(c=window.open()).document.writeln("<pre>"+mxUtils.htmlEntities(e)+"</pre"),c.document.close();else{var c,o;(o=(c=window.open()).document.createElement("pre")).innerHTML=mxUtils.htmlEntities(e,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),c.document.body.appendChild(o)}},alert:function(e){alert(e)},prompt:function(e,t){return prompt(e,null!=t?t:"")},confirm:function(e){return confirm(e)},error:function(e,t,r,o){var a=document.createElement("div");a.style.padding="20px";var u=document.createElement("img");u.setAttribute("src",o||mxUtils.errorImage),u.setAttribute("valign","bottom"),u.style.verticalAlign="middle",a.appendChild(u),a.appendChild(document.createTextNode("\xa0")),a.appendChild(document.createTextNode("\xa0")),a.appendChild(document.createTextNode("\xa0")),mxUtils.write(a,e);var c=document.body.clientWidth,f=document.body.clientHeight||document.documentElement.clientHeight,m=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,a,(c-t)/2,f/4,t,null,!1,!0);if(r){mxUtils.br(a);var x=document.createElement("p"),v=document.createElement("button");mxClient.IS_IE?v.style.cssText="float:right":v.setAttribute("style","float:right"),mxEvent.addListener(v,"click",function(E){m.destroy()}),mxUtils.write(v,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource),x.appendChild(v),a.appendChild(x),mxUtils.br(a),m.setClosable(!0)}return m.setVisible(!0),m},makeDraggable:function(e,t,r,o,a,u,c,f,m,x){var v=new mxDragSource(e,r);return v.dragOffset=new mxPoint(null!=a?a:0,null!=u?u:mxConstants.TOOLTIP_VERTICAL_OFFSET),v.autoscroll=c,v.setGuidesEnabled(!1),null!=m&&(v.highlightDropTargets=m),null!=x&&(v.getDropTarget=x),v.getGraphForEvent=function(E){return"function"==typeof t?t(E):t},null!=o&&(v.createDragElement=function(){return o.cloneNode(!0)},f&&(v.createPreviewElement=function(E){var S=o.cloneNode(!0),b=parseInt(S.style.width),_=parseInt(S.style.height);return S.style.width=Math.round(b*E.view.scale)+"px",S.style.height=Math.round(_*E.view.scale)+"px",S})),v}};__mxOutput.mxUtils=void 0!==mxUtils?mxUtils:void 0;var mxConstants={DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_VML:"vml",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,827,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,827),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_SOURCE_PORT_CONSTRAINT:"sourcePortConstraint",STYLE_TARGET_PORT_CONSTRAINT:"targetPortConstraint",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_DX:"exitDx",STYLE_EXIT_DY:"exitDy",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_DX:"entryDx",STYLE_ENTRY_DY:"entryDy",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_FIX_DASH:"fixDash",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_ABSOLUTE_ARCSIZE:"absoluteArcSize",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ANCHOR_POINT_DIRECTION:"anchorPointDirection",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BACKGROUND_OUTLINE:"backgroundOutline",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,FONT_STRIKETHROUGH:8,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};function mxEventObject(e){this.name=e,this.properties=[];for(var t=1;t<arguments.length;t+=2)null!=arguments[t+1]&&(this.properties[arguments[t]]=arguments[t+1])}function mxMouseEvent(e,t){this.evt=e,this.state=t,this.sourceState=t}function mxEventSource(e){this.setEventSource(e)}__mxOutput.mxConstants=void 0!==mxConstants?mxConstants:void 0,mxEventObject.prototype.name=null,mxEventObject.prototype.properties=null,mxEventObject.prototype.consumed=!1,mxEventObject.prototype.getName=function(){return this.name},mxEventObject.prototype.getProperties=function(){return this.properties},mxEventObject.prototype.getProperty=function(e){return this.properties[e]},mxEventObject.prototype.isConsumed=function(){return this.consumed},mxEventObject.prototype.consume=function(){this.consumed=!0},__mxOutput.mxEventObject=void 0!==mxEventObject?mxEventObject:void 0,mxMouseEvent.prototype.consumed=!1,mxMouseEvent.prototype.evt=null,mxMouseEvent.prototype.graphX=null,mxMouseEvent.prototype.graphY=null,mxMouseEvent.prototype.state=null,mxMouseEvent.prototype.sourceState=null,mxMouseEvent.prototype.getEvent=function(){return this.evt},mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)},mxMouseEvent.prototype.isSource=function(e){return null!=e&&mxUtils.isAncestorNode(e.node,this.getSource())},mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())},mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())},mxMouseEvent.prototype.getGraphX=function(){return this.graphX},mxMouseEvent.prototype.getGraphY=function(){return this.graphY},mxMouseEvent.prototype.getState=function(){return this.state},mxMouseEvent.prototype.getCell=function(){var e=this.getState();return null!=e?e.cell:null},mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())},mxMouseEvent.prototype.isConsumed=function(){return this.consumed},mxMouseEvent.prototype.consume=function(e){(e=null!=e?e:null!=this.evt.touches||mxEvent.isMouseEvent(this.evt))&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0},__mxOutput.mxMouseEvent=void 0!==mxMouseEvent?mxMouseEvent:void 0,mxEventSource.prototype.eventListeners=null,mxEventSource.prototype.eventsEnabled=!0,mxEventSource.prototype.eventSource=null,mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled},mxEventSource.prototype.setEventsEnabled=function(e){this.eventsEnabled=e},mxEventSource.prototype.getEventSource=function(){return this.eventSource},mxEventSource.prototype.setEventSource=function(e){this.eventSource=e},mxEventSource.prototype.addListener=function(e,t){null==this.eventListeners&&(this.eventListeners=[]),this.eventListeners.push(e),this.eventListeners.push(t)},mxEventSource.prototype.removeListener=function(e){if(null!=this.eventListeners)for(var t=0;t<this.eventListeners.length;)this.eventListeners[t+1]==e?this.eventListeners.splice(t,2):t+=2},mxEventSource.prototype.fireEvent=function(e,t){if(null!=this.eventListeners&&this.isEventsEnabled()){null==e&&(e=new mxEventObject),null==t&&(t=this.getEventSource()),null==t&&(t=this);for(var r=[t,e],o=0;o<this.eventListeners.length;o+=2){var a=this.eventListeners[o];(null==a||a==e.getName())&&this.eventListeners[o+1].apply(this,r)}}},__mxOutput.mxEventSource=void 0!==mxEventSource?mxEventSource:void 0;var mxEvent={addListener:function(){var e=function(t,r,o){null==t.mxListenerList&&(t.mxListenerList=[]),t.mxListenerList.push({name:r,f:o})};return window.addEventListener?function(t,r,o){t.addEventListener(r,o,!1),e(t,r,o)}:function(t,r,o){t.attachEvent("on"+r,o),e(t,r,o)}}(),removeListener:function(){var e=function(t,r,o){if(null!=t.mxListenerList){for(var a=t.mxListenerList.length,u=0;u<a;u++)if(t.mxListenerList[u].f==o){t.mxListenerList.splice(u,1);break}0==t.mxListenerList.length&&(t.mxListenerList=null)}};return window.removeEventListener?function(t,r,o){t.removeEventListener(r,o,!1),e(t,0,o)}:function(t,r,o){t.detachEvent("on"+r,o),e(t,0,o)}}(),removeAllListeners:function(e){var t=e.mxListenerList;if(null!=t)for(;t.length>0;){var r=t[0];mxEvent.removeListener(e,r.name,r.f)}},addGestureListeners:function(e,t,r,o){null!=t&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",t),null!=r&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",r),null!=o&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",o),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=t&&mxEvent.addListener(e,"touchstart",t),null!=r&&mxEvent.addListener(e,"touchmove",r),null!=o&&mxEvent.addListener(e,"touchend",o))},removeGestureListeners:function(e,t,r,o){null!=t&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",t),null!=r&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",r),null!=o&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",o),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=t&&mxEvent.removeListener(e,"touchstart",t),null!=r&&mxEvent.removeListener(e,"touchmove",r),null!=o&&mxEvent.removeListener(e,"touchend",o))},redirectMouseEvents:function(e,t,r,o,a,u,c){var f=function(m){return"function"==typeof r?r(m):r};mxEvent.addGestureListeners(e,function(m){null!=o?o(m):mxEvent.isConsumed(m)||t.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(m,f(m)))},function(m){null!=a?a(m):mxEvent.isConsumed(m)||t.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(m,f(m)))},function(m){null!=u?u(m):mxEvent.isConsumed(m)||t.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(m,f(m)))}),mxEvent.addListener(e,"dblclick",function(m){if(null!=c)c(m);else if(!mxEvent.isConsumed(m)){var x=f(m);t.dblClick(m,null!=x?x.cell:null)}})},release:function(e){try{if(null!=e){mxEvent.removeAllListeners(e);var t=e.childNodes;if(null!=t)for(var r=t.length,o=0;o<r;o+=1)mxEvent.release(t[o])}}catch(a){}},addMouseWheelListener:function(e,t){if(null!=e){if(t=null!=t?t:window,mxClient.IS_SF&&!mxClient.IS_TOUCH){var o=1;mxEvent.addListener(t,"gesturestart",function(f){mxEvent.consume(f),o=1}),mxEvent.addListener(t,"gesturechange",function(f){mxEvent.consume(f);var m=o-f.scale;Math.abs(m)>.2&&(e(f,m<0,!0),o=f.scale)}),mxEvent.addListener(t,"gestureend",function(f){mxEvent.consume(f)})}else{var a=[],u=0,c=0;mxEvent.addGestureListeners(t,mxUtils.bind(this,function(f){!mxEvent.isMouseEvent(f)&&null!=f.pointerId&&a.push(f)}),mxUtils.bind(this,function(f){if(!mxEvent.isMouseEvent(f)&&2==a.length){for(var m=0;m<a.length;m++)if(f.pointerId==a[m].pointerId){a[m]=f;break}var x=Math.abs(a[0].clientX-a[1].clientX),v=Math.abs(a[0].clientY-a[1].clientY),E=Math.abs(x-u),S=Math.abs(v-c);(E>mxEvent.PINCH_THRESHOLD||S>mxEvent.PINCH_THRESHOLD)&&(e(a[0],E>S?x>u:v>c,!0,a[0].clientX+(a[1].clientX-a[0].clientX)/2,a[0].clientY+(a[1].clientY-a[0].clientY)/2),u=x,c=v)}}),mxUtils.bind(this,function(f){a=[],u=0,c=0}))}mxEvent.addListener(t,"wheel",function(f){null==f&&(f=window.event),f.ctrlKey&&f.preventDefault(),(Math.abs(f.deltaX)>.5||Math.abs(f.deltaY)>.5)&&e(f,0==f.deltaY?-f.deltaX>0:-f.deltaY>0)})}},disableContextMenu:function(e){mxEvent.addListener(e,"contextmenu",function(t){return t.preventDefault&&t.preventDefault(),!1})},getSource:function(e){return null!=e.srcElement?e.srcElement:e.target},isConsumed:function(e){return null!=e.isConsumed&&e.isConsumed},isTouchEvent:function(e){return null!=e.pointerType?"touch"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH:null!=e.mozInputSource?5==e.mozInputSource:0==e.type.indexOf("touch")},isPenEvent:function(e){return null!=e.pointerType?"pen"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_PEN:null!=e.mozInputSource?2==e.mozInputSource:0==e.type.indexOf("pen")},isMultiTouchEvent:function(e){return null!=e.type&&0==e.type.indexOf("touch")&&null!=e.touches&&e.touches.length>1},isMouseEvent:function(e){return null!=e.pointerType?"mouse"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE:null!=e.mozInputSource?1==e.mozInputSource:0==e.type.indexOf("mouse")},isLeftMouseButton:function(e){return!("buttons"in e)||"mousedown"!=e.type&&"mousemove"!=e.type?"which"in e?1===e.which:1===e.button:1==e.buttons},isMiddleMouseButton:function(e){return"which"in e?2===e.which:4===e.button},isRightMouseButton:function(e){return"which"in e?3===e.which:2===e.button},isPopupTrigger:function(e){return mxEvent.isRightMouseButton(e)||mxClient.IS_MAC&&mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)&&!mxEvent.isMetaDown(e)&&!mxEvent.isAltDown(e)},isShiftDown:function(e){return null!=e&&e.shiftKey},isAltDown:function(e){return null!=e&&e.altKey},isControlDown:function(e){return null!=e&&e.ctrlKey},isMetaDown:function(e){return null!=e&&e.metaKey},getMainEvent:function(e){return"touchstart"!=e.type&&"touchmove"!=e.type||null==e.touches||null==e.touches[0]?"touchend"==e.type&&null!=e.changedTouches&&null!=e.changedTouches[0]&&(e=e.changedTouches[0]):e=e.touches[0],e},getClientX:function(e){return mxEvent.getMainEvent(e).clientX},getClientY:function(e){return mxEvent.getMainEvent(e).clientY},consume:function(e,t,r){r=null==r||r,(t=null==t||t)&&(e.preventDefault?(r&&e.stopPropagation(),e.preventDefault()):r&&(e.cancelBubble=!0)),e.isConsumed=!0,e.preventDefault||(e.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset",PINCH_THRESHOLD:10};function mxXmlRequest(e,t,r,o,a,u){this.url=e,this.params=t,this.method=r||"POST",this.async=null==o||o,this.username=a,this.password=u}__mxOutput.mxEvent=void 0!==mxEvent?mxEvent:void 0,mxXmlRequest.prototype.url=null,mxXmlRequest.prototype.params=null,mxXmlRequest.prototype.method=null,mxXmlRequest.prototype.async=null,mxXmlRequest.prototype.binary=!1,mxXmlRequest.prototype.withCredentials=!1,mxXmlRequest.prototype.username=null,mxXmlRequest.prototype.password=null,mxXmlRequest.prototype.request=null,mxXmlRequest.prototype.decodeSimulateValues=!1,mxXmlRequest.prototype.isBinary=function(){return this.binary},mxXmlRequest.prototype.setBinary=function(e){this.binary=e},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.isReady=function(){return 4==this.request.readyState},mxXmlRequest.prototype.getDocumentElement=function(){var e=this.getXml();return null!=e?e.documentElement:null},mxXmlRequest.prototype.getXml=function(){var e=this.request.responseXML;return(document.documentMode>=9||null==e||null==e.documentElement)&&(e=mxUtils.parseXml(this.request.responseText)),e},mxXmlRequest.prototype.getStatus=function(){return null!=this.request?this.request.status:null},mxXmlRequest.prototype.create=window.XMLHttpRequest?function(){var e=new XMLHttpRequest;return this.isBinary()&&e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e}:"undefined"!=typeof ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:void 0,mxXmlRequest.prototype.send=function(e,t,r,o){this.request=this.create(),null!=this.request&&(null!=e&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&(e(this),this.request.onreadystatechange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),!mxClient.IS_QUIRKS&&(null==document.documentMode||document.documentMode>9)&&window.XMLHttpRequest&&null!=r&&null!=o&&(this.request.timeout=r,this.request.ontimeout=o),this.request.send(this.params))},mxXmlRequest.prototype.setRequestHeaders=function(e,t){null!=t&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},mxXmlRequest.prototype.simulate=function(e,t){var r=null;(e=e||document)==document&&(r=window.onbeforeunload,window.onbeforeunload=null);var o=e.createElement("form");o.setAttribute("method",this.method),o.setAttribute("action",this.url),null!=t&&o.setAttribute("target",t),o.style.display="none",o.style.visibility="hidden";for(var a=this.params.indexOf("&")>0?this.params.split("&"):this.params.split(),u=0;u<a.length;u++){var c=a[u].indexOf("=");if(c>0){var f=a[u].substring(0,c),m=a[u].substring(c+1);this.decodeSimulateValues&&(m=decodeURIComponent(m));var x=e.createElement("textarea");x.setAttribute("wrap","off"),x.setAttribute("name",f),mxUtils.write(x,m),o.appendChild(x)}}e.body.appendChild(o),o.submit(),null!=o.parentNode&&o.parentNode.removeChild(o),null!=r&&(window.onbeforeunload=r)},__mxOutput.mxXmlRequest=void 0!==mxXmlRequest?mxXmlRequest:void 0;var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(e){mxClipboard.cells=e},getCells:function(){return mxClipboard.cells},isEmpty:function(){return null==mxClipboard.getCells()},cut:function(e,t){return t=mxClipboard.copy(e,t),mxClipboard.insertCount=0,mxClipboard.removeCells(e,t),t},removeCells:function(e,t){e.removeCells(t)},copy:function(e,t){t=t||e.getSelectionCells();var r=e.getExportableCells(e.model.getTopmostCells(t));return mxClipboard.insertCount=1,mxClipboard.setCells(e.cloneCells(r)),r},paste:function(e){var t=null;if(!mxClipboard.isEmpty()){t=e.getImportableCells(mxClipboard.getCells());var r=mxClipboard.insertCount*mxClipboard.STEPSIZE,o=e.getDefaultParent();t=e.importCells(t,r,r,o),mxClipboard.insertCount++,e.setSelectionCells(t)}return t}};function mxWindow(e,t,r,o,a,u,c,f,m,x){null!=t&&(c=null==c||c,this.content=t,this.init(r,o,a,u,x),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(c),this.setTitle(e),(null==f||f)&&this.installMoveHandler(),null!=m&&null!=m.parentNode?m.parentNode.replaceChild(this.div,m):document.body.appendChild(this.div))}function mxForm(e){this.table=document.createElement("table"),this.table.className=e,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}function mxImage(e,t,r){this.src=e,this.width=t,this.height=r}function mxDivResizer(e,t){if("div"==e.nodeName.toLowerCase()){null==t&&(t=window),this.div=e;var r=mxUtils.getCurrentStyle(e);null!=r&&(this.resizeWidth="auto"==r.width,this.resizeHeight="auto"==r.height),mxEvent.addListener(t,"resize",mxUtils.bind(this,function(o){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize()}}function mxDragSource(e,t){this.element=e,this.dropHandler=t,mxEvent.addGestureListeners(e,mxUtils.bind(this,function(r){this.mouseDown(r)})),mxEvent.addListener(e,"dragstart",function(r){mxEvent.consume(r)}),this.eventConsumer=function(r,o){var a=o.getProperty("eventName"),u=o.getProperty("event");a!=mxEvent.MOUSE_DOWN&&u.consume()}}function mxToolbar(e){this.container=e}function mxUndoableEdit(e,t){this.source=e,this.changes=[],this.significant=null==t||t}function mxUndoManager(e){this.size=null!=e?e:100,this.clear()}__mxOutput.mxClipboard=void 0!==mxClipboard?mxClipboard:void 0,mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=8==document.documentMode||7==document.documentMode?6:2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(e,t,r,o,a){a=null!=a?a:"mxWindow",this.div=document.createElement("div"),this.div.className=a,this.div.style.left=e+"px",this.div.style.top=t+"px",this.table=document.createElement("table"),this.table.className=a,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),null!=r&&(mxClient.IS_QUIRKS||(this.div.style.width=r+"px"),this.table.style.width=r+"px"),null!=o&&(mxClient.IS_QUIRKS||(this.div.style.height=o+"px"),this.table.style.height=o+"px");var u=document.createElement("tbody"),c=document.createElement("tr");this.title=document.createElement("td"),this.title.className=a+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),c.appendChild(this.title),u.appendChild(c),c=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=a+"Pane",7==document.documentMode&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=a+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),(mxClient.IS_QUIRKS||"DIV"!=this.content.nodeName.toUpperCase())&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),c.appendChild(this.td),u.appendChild(c),this.table.appendChild(u),this.div.appendChild(this.table);var f=mxUtils.bind(this,function(m){this.activate()});mxEvent.addGestureListeners(this.title,f),mxEvent.addGestureListeners(this.table,f),this.hide()},mxWindow.prototype.setTitle=function(e){for(var t=this.title.firstChild;null!=t;){var r=t.nextSibling;t.nodeType==mxConstants.NODETYPE_TEXT&&t.parentNode.removeChild(t),t=r}mxUtils.write(this.title,e||""),this.title.appendChild(this.buttons)},mxWindow.prototype.setScrollable=function(e){(null==navigator.userAgent||navigator.userAgent.indexOf("Presto/2.5")<0)&&(this.contentWrapper.style.overflow=e?"auto":"hidden")},mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var e=mxUtils.getCurrentStyle(this.getElement()),t=null!=e?e.zIndex:3;if(mxWindow.activeWindow){var r=mxWindow.activeWindow.getElement();null!=r&&null!=r.style&&(r.style.zIndex=t)}var o=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(t)+1,mxWindow.activeWindow=this,this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",o))}},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize&&"none"!=this.resize.style.display},mxWindow.prototype.setResizable=function(e){if(e)if(null==this.resize){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize";var t=null,r=null,o=null,a=null,u=mxUtils.bind(this,function(m){this.activate(),t=mxEvent.getClientX(m),r=mxEvent.getClientY(m),o=this.div.offsetWidth,a=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,c,f),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",m)),mxEvent.consume(m)}),c=mxUtils.bind(this,function(m){if(null!=t&&null!=r){var x=mxEvent.getClientX(m)-t,v=mxEvent.getClientY(m)-r;this.setSize(o+x,a+v),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",m)),mxEvent.consume(m)}}),f=mxUtils.bind(this,function(m){null!=t&&null!=r&&(t=null,r=null,mxEvent.removeGestureListeners(document,null,c,f),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",m)),mxEvent.consume(m))});mxEvent.addGestureListeners(this.resize,u,c,f),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(e,t){e=Math.max(this.minimumSize.width,e),t=Math.max(this.minimumSize.height,t),mxClient.IS_QUIRKS||(this.div.style.width=e+"px",this.div.style.height=t+"px"),this.table.style.width=e+"px",this.table.style.height=t+"px",mxClient.IS_QUIRKS||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")},mxWindow.prototype.setMinimizable=function(e){this.minimize.style.display=e?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginLeft="2px",this.minimize.style.display="none",this.buttons.appendChild(this.minimize);var e=!1,t=null,r=null,o=mxUtils.bind(this,function(a){if(this.activate(),e)e=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=t,mxClient.IS_QUIRKS||(this.div.style.height=r),this.table.style.height=r,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",a));else{e=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",t=this.maximize.style.display,this.maximize.style.display="none",r=this.table.style.height;var u=this.getMinimumSize();u.height>0&&(mxClient.IS_QUIRKS||(this.div.style.height=u.height+"px"),this.table.style.height=u.height+"px"),u.width>0&&(mxClient.IS_QUIRKS||(this.div.style.width=u.width+"px"),this.table.style.width=u.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",a))}mxEvent.consume(a)});mxEvent.addGestureListeners(this.minimize,o)},mxWindow.prototype.setMaximizable=function(e){this.maximize.style.display=e?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var e=!1,t=null,r=null,o=null,a=null,u=null,c=mxUtils.bind(this,function(f){if(this.activate(),"none"!=this.maximize.style.display){if(e)e=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimize.style.display=u,this.div.style.left=t+"px",this.div.style.top=r+"px",mxClient.IS_QUIRKS||(this.div.style.height=o,this.div.style.width=a,("auto"==mxUtils.getCurrentStyle(this.contentWrapper).overflow||null!=this.resize)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")),this.table.style.height=o,this.table.style.width=a,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",f));else{e=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",u=this.minimize.style.display,this.minimize.style.display="none",t=parseInt(this.div.style.left),r=parseInt(this.div.style.top),o=this.table.style.height,a=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";var m=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);mxClient.IS_QUIRKS||(this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=m-2+"px"),this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=m-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden"),mxClient.IS_QUIRKS||("auto"==mxUtils.getCurrentStyle(this.contentWrapper).overflow||null!=this.resize)&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",f))}mxEvent.consume(f)}});mxEvent.addGestureListeners(this.maximize,c),mxEvent.addListener(this.title,"dblclick",c)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(e){var t=mxEvent.getClientX(e),r=mxEvent.getClientY(e),o=this.getX(),a=this.getY(),u=mxUtils.bind(this,function(f){var m=mxEvent.getClientX(f)-t,x=mxEvent.getClientY(f)-r;this.setLocation(o+m,a+x),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",f)),mxEvent.consume(f)}),c=mxUtils.bind(this,function(f){mxEvent.removeGestureListeners(document,null,u,c),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",f)),mxEvent.consume(f)});mxEvent.addGestureListeners(document,null,u,c),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",e)),mxEvent.consume(e)})),mxClient.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(e,t){this.div.style.left=e+"px",this.div.style.top=t+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(e){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",e)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(e)}))},mxWindow.prototype.setImage=function(e){this.image=document.createElement("img"),this.image.setAttribute("src",e),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(e){this.closeImg.style.display=e?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div&&"none"!=this.div.style.display},mxWindow.prototype.setVisible=function(e){null!=this.div&&this.isVisible()!=e&&(e?this.show():this.hide())},mxWindow.prototype.show=function(){this.div.style.display="",this.activate();var e=mxUtils.getCurrentStyle(this.contentWrapper);!mxClient.IS_QUIRKS&&("auto"==e.overflow||null!=this.resize)&&"none"!=this.contentWrapper.style.display&&(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null},__mxOutput.mxWindow=void 0!==mxWindow?mxWindow:void 0,mxForm.prototype.table=null,mxForm.prototype.body=!1,mxForm.prototype.getTable=function(){return this.table},mxForm.prototype.addButtons=function(e,t){var r=document.createElement("tr"),o=document.createElement("td");r.appendChild(o),o=document.createElement("td");var a=document.createElement("button");mxUtils.write(a,mxResources.get("ok")||"OK"),o.appendChild(a),mxEvent.addListener(a,"click",function(){e()}),a=document.createElement("button"),mxUtils.write(a,mxResources.get("cancel")||"Cancel"),o.appendChild(a),mxEvent.addListener(a,"click",function(){t()}),r.appendChild(o),this.body.appendChild(r)},mxForm.prototype.addText=function(e,t,r){var o=document.createElement("input");return o.setAttribute("type",r||"text"),o.value=t,this.addField(e,o)},mxForm.prototype.addCheckbox=function(e,t){var r=document.createElement("input");return r.setAttribute("type","checkbox"),this.addField(e,r),t&&(r.checked=!0),r},mxForm.prototype.addTextarea=function(e,t,r){var o=document.createElement("textarea");return mxClient.IS_NS&&r--,o.setAttribute("rows",r||2),o.value=t,this.addField(e,o)},mxForm.prototype.addCombo=function(e,t,r){var o=document.createElement("select");return null!=r&&o.setAttribute("size",r),t&&o.setAttribute("multiple","true"),this.addField(e,o)},mxForm.prototype.addOption=function(e,t,r,o){var a=document.createElement("option");mxUtils.writeln(a,t),a.setAttribute("value",r),o&&a.setAttribute("selected",o),e.appendChild(a)},mxForm.prototype.addField=function(e,t){var r=document.createElement("tr"),o=document.createElement("td");return mxUtils.write(o,e),r.appendChild(o),(o=document.createElement("td")).appendChild(t),r.appendChild(o),this.body.appendChild(r),t},__mxOutput.mxForm=void 0!==mxForm?mxForm:void 0,mxImage.prototype.src=null,mxImage.prototype.width=null,mxImage.prototype.height=null,__mxOutput.mxImage=void 0!==mxImage?mxImage:void 0,mxDivResizer.prototype.resizeWidth=!0,mxDivResizer.prototype.resizeHeight=!0,mxDivResizer.prototype.handlingResize=!1,mxDivResizer.prototype.resize=function(){var e=this.getDocumentWidth(),t=this.getDocumentHeight(),r=parseInt(this.div.style.left),o=parseInt(this.div.style.right),a=parseInt(this.div.style.top),u=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(r)&&!isNaN(o)&&r>=0&&o>=0&&e-o-r>0&&(this.div.style.width=e-o-r+"px"),this.resizeHeight&&!isNaN(a)&&!isNaN(u)&&a>=0&&u>=0&&t-a-u>0&&(this.div.style.height=t-a-u+"px")},mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth},mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight},__mxOutput.mxDivResizer=void 0!==mxDivResizer?mxDivResizer:void 0,mxDragSource.prototype.element=null,mxDragSource.prototype.dropHandler=null,mxDragSource.prototype.dragOffset=null,mxDragSource.prototype.dragElement=null,mxDragSource.prototype.previewElement=null,mxDragSource.prototype.previewOffset=null,mxDragSource.prototype.enabled=!0,mxDragSource.prototype.currentGraph=null,mxDragSource.prototype.currentDropTarget=null,mxDragSource.prototype.currentPoint=null,mxDragSource.prototype.currentGuide=null,mxDragSource.prototype.currentHighlight=null,mxDragSource.prototype.autoscroll=!0,mxDragSource.prototype.guidesEnabled=!0,mxDragSource.prototype.gridEnabled=!0,mxDragSource.prototype.highlightDropTargets=!0,mxDragSource.prototype.dragElementZIndex=100,mxDragSource.prototype.dragElementOpacity=70,mxDragSource.prototype.checkEventSource=!0,mxDragSource.prototype.isEnabled=function(){return this.enabled},mxDragSource.prototype.setEnabled=function(e){this.enabled=e},mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled},mxDragSource.prototype.setGuidesEnabled=function(e){this.guidesEnabled=e},mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled},mxDragSource.prototype.setGridEnabled=function(e){this.gridEnabled=e},mxDragSource.prototype.getGraphForEvent=function(e){return null},mxDragSource.prototype.getDropTarget=function(e,t,r,o){return e.getCellAt(t,r)},mxDragSource.prototype.createDragElement=function(e){return this.element.cloneNode(!0)},mxDragSource.prototype.createPreviewElement=function(e){return null},mxDragSource.prototype.isActive=function(){return null!=this.mouseMoveHandler},mxDragSource.prototype.reset=function(){null!=this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()},mxDragSource.prototype.mouseDown=function(e){this.enabled&&!mxEvent.isConsumed(e)&&null==this.mouseMoveHandler&&(this.startDrag(e),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(e)&&(this.eventSource=mxEvent.getSource(e),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))},mxDragSource.prototype.startDrag=function(e){this.dragElement=this.createDragElement(e),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")},mxDragSource.prototype.stopDrag=function(){this.removeDragElement()},mxDragSource.prototype.removeDragElement=function(){null!=this.dragElement&&(null!=this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)},mxDragSource.prototype.getElementForEvent=function(e){return mxEvent.isTouchEvent(e)||mxEvent.isPenEvent(e)?document.elementFromPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)):mxEvent.getSource(e)},mxDragSource.prototype.graphContainsEvent=function(e,t){var r=mxEvent.getClientX(t),o=mxEvent.getClientY(t),a=mxUtils.getOffset(e.container),u=mxUtils.getScrollOrigin(),c=this.getElementForEvent(t);if(this.checkEventSource)for(;null!=c&&c!=e.container;)c=c.parentNode;return null!=c&&r>=a.x-u.x&&o>=a.y-u.y&&r<=a.x-u.x+e.container.offsetWidth&&o<=a.y-u.y+e.container.offsetHeight},mxDragSource.prototype.mouseMove=function(e){var t=this.getGraphForEvent(e);if(null!=t&&!this.graphContainsEvent(t,e)&&(t=null),t!=this.currentGraph&&(null!=this.currentGraph&&this.dragExit(this.currentGraph,e),this.currentGraph=t,null!=this.currentGraph&&this.dragEnter(this.currentGraph,e)),null!=this.currentGraph&&this.dragOver(this.currentGraph,e),null==this.dragElement||null!=this.previewElement&&"visible"==this.previewElement.style.visibility)null!=this.dragElement&&(this.dragElement.style.visibility="hidden");else{var r=mxEvent.getClientX(e),o=mxEvent.getClientY(e);null==this.dragElement.parentNode&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",null!=this.dragOffset&&(r+=this.dragOffset.x,o+=this.dragOffset.y);var a=mxUtils.getDocumentScrollOrigin(document);this.dragElement.style.left=r+a.x+"px",this.dragElement.style.top=o+a.y+"px"}mxEvent.consume(e)},mxDragSource.prototype.mouseUp=function(e){if(null!=this.currentGraph){if(null!=this.currentPoint&&(null==this.previewElement||"hidden"!=this.previewElement.style.visibility)){var t=this.currentGraph.view.scale,r=this.currentGraph.view.translate;this.drop(this.currentGraph,e,this.currentDropTarget,this.currentPoint.x/t-r.x,this.currentPoint.y/t-r.y)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),mxEvent.consume(e)},mxDragSource.prototype.removeListeners=function(){null!=this.eventSource&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null},mxDragSource.prototype.dragEnter=function(e,t){e.isMouseDown=!0,e.isMouseTrigger=mxEvent.isMouseEvent(t),this.previewElement=this.createPreviewElement(e),null!=this.previewElement&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&null!=this.previewElement&&(this.currentGuide=new mxGuide(e,e.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(e,mxConstants.DROP_TARGET_COLOR)),e.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)},mxDragSource.prototype.dragExit=function(e,t){this.currentDropTarget=null,this.currentPoint=null,e.isMouseDown=!1,e.removeListener(this.eventConsumer),null!=this.previewElement&&(null!=this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),null!=this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),null!=this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)},mxDragSource.prototype.dragOver=function(e,t){var r=mxUtils.getOffset(e.container),o=mxUtils.getScrollOrigin(e.container),a=mxEvent.getClientX(t)-r.x+o.x-e.panDx,u=mxEvent.getClientY(t)-r.y+o.y-e.panDy;if(e.autoScroll&&(null==this.autoscroll||this.autoscroll)&&e.scrollPointToVisible(a,u,e.autoExtend),null!=this.currentHighlight&&e.isDropEnabled()){this.currentDropTarget=this.getDropTarget(e,a,u,t);var c=e.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(c)}if(null!=this.previewElement){null==this.previewElement.parentNode&&(e.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");var f=this.isGridEnabled()&&e.isGridEnabledEvent(t),m=!0;if(null!=this.currentGuide&&this.currentGuide.isEnabledForEvent(t)){var E=new mxRectangle(0,0,parseInt(this.previewElement.style.width),parseInt(this.previewElement.style.height)),S=new mxPoint(a,u);m=!1,a=(S=this.currentGuide.move(E,S,f,!0)).x,u=S.y}else if(f){var b=e.view.scale,_=e.view.translate,D=e.gridSize/2;a=(e.snap(a/b-_.x-D)+_.x)*b,u=(e.snap(u/b-_.y-D)+_.y)*b}null!=this.currentGuide&&m&&this.currentGuide.hide(),null!=this.previewOffset&&(a+=this.previewOffset.x,u+=this.previewOffset.y),this.previewElement.style.left=Math.round(a)+"px",this.previewElement.style.top=Math.round(u)+"px",this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(a,u)},mxDragSource.prototype.drop=function(e,t,r,o,a){this.dropHandler.apply(this,arguments),"hidden"!=e.container.style.visibility&&e.container.focus()},__mxOutput.mxDragSource=void 0!==mxDragSource?mxDragSource:void 0,mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(e,t,r,o,a,u){var c=document.createElement(null!=t?"img":"button"),f=a||(null!=u?"mxToolbarMode":"mxToolbarItem");c.className=f,c.setAttribute("src",t),null!=e&&(null!=t?c.setAttribute("title",e):mxUtils.write(c,e)),this.container.appendChild(c),null!=r&&(mxEvent.addListener(c,"click",r),mxClient.IS_TOUCH&&mxEvent.addListener(c,"touchend",r));var m=mxUtils.bind(this,function(x){null!=o?c.setAttribute("src",t):c.style.backgroundColor=""});return mxEvent.addGestureListeners(c,mxUtils.bind(this,function(x){if(null!=o?c.setAttribute("src",o):c.style.backgroundColor="gray",null!=u){null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init());var v=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),v!=c){this.currentImg=c,this.menu.factoryMethod=u;var E=new mxPoint(c.offsetLeft,c.offsetTop+c.offsetHeight);this.menu.popup(E.x,E.y,null,x),this.menu.isMenuShowing()&&(c.className=f+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),c.className=f,this.currentImg=null})}}}),null,m),mxEvent.addListener(c,"mouseout",m),c},mxToolbar.prototype.addCombo=function(e){var t=document.createElement("div");t.style.display="inline",t.className="mxToolbarComboContainer";var r=document.createElement("select");return r.className=e||"mxToolbarCombo",t.appendChild(r),this.container.appendChild(t),r},mxToolbar.prototype.addActionCombo=function(e,t){var r=document.createElement("select");return r.className=t||"mxToolbarCombo",this.addOption(r,e,null),mxEvent.addListener(r,"change",function(o){var a=r.options[r.selectedIndex];r.selectedIndex=0,null!=a.funct&&a.funct(o)}),this.container.appendChild(r),r},mxToolbar.prototype.addOption=function(e,t,r){var o=document.createElement("option");return mxUtils.writeln(o,t),"function"==typeof r?o.funct=r:o.setAttribute("value",r),e.appendChild(o),o},mxToolbar.prototype.addSwitchMode=function(e,t,r,o,a){var u=document.createElement("img");return u.initialClassName=a||"mxToolbarMode",u.className=u.initialClassName,u.setAttribute("src",t),u.altIcon=o,null!=e&&u.setAttribute("title",e),mxEvent.addListener(u,"click",mxUtils.bind(this,function(c){var f;null!=(f=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",f)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=u),this.selectedMode=u,null!=(f=u.altIcon)?(u.altIcon=u.getAttribute("src"),u.setAttribute("src",f)):u.className=u.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),r()})),this.container.appendChild(u),null==this.defaultMode&&(this.defaultMode=u,this.selectMode(u),r()),u},mxToolbar.prototype.addMode=function(e,t,r,o,a,u){u=null==u||u;var c=document.createElement(null!=t?"img":"button");return c.initialClassName=a||"mxToolbarMode",c.className=c.initialClassName,c.setAttribute("src",t),c.altIcon=o,null!=e&&c.setAttribute("title",e),this.enabled&&u&&(mxEvent.addListener(c,"click",mxUtils.bind(this,function(f){this.selectMode(c,r),this.noReset=!1})),mxEvent.addListener(c,"dblclick",mxUtils.bind(this,function(f){this.selectMode(c,r),this.noReset=!0})),null==this.defaultMode&&(this.defaultMode=c,this.defaultFunction=r,this.selectMode(c,r))),this.container.appendChild(c),c},mxToolbar.prototype.selectMode=function(e,t){var r;this.selectedMode!=e&&(null!=this.selectedMode&&(null!=(r=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",r)):this.selectedMode.className=this.selectedMode.initialClassName),this.selectedMode=e,null!=(r=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",r)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",t)))},mxToolbar.prototype.resetMode=function(e){(e||!this.noReset)&&this.selectedMode!=this.defaultMode&&this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(e){return this.addItem(null,e,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var e=document.createElement("hr");e.style.marginRight="6px",e.setAttribute("size","1"),this.container.appendChild(e)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,null!=this.menu&&this.menu.destroy()},__mxOutput.mxToolbar=void 0!==mxToolbar?mxToolbar:void 0,mxUndoableEdit.prototype.source=null,mxUndoableEdit.prototype.changes=null,mxUndoableEdit.prototype.significant=null,mxUndoableEdit.prototype.undone=!1,mxUndoableEdit.prototype.redone=!1,mxUndoableEdit.prototype.isEmpty=function(){return 0==this.changes.length},mxUndoableEdit.prototype.isSignificant=function(){return this.significant},mxUndoableEdit.prototype.add=function(e){this.changes.push(e)},mxUndoableEdit.prototype.notify=function(){},mxUndoableEdit.prototype.die=function(){},mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length-1;t>=0;t--){var r=this.changes[t];null!=r.execute?r.execute():null!=r.undo&&r.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",r))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var e=this.changes.length,t=0;t<e;t++){var r=this.changes[t];null!=r.execute?r.execute():null!=r.redo&&r.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",r))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},__mxOutput.mxUndoableEdit=void 0!==mxUndoableEdit?mxUndoableEdit:void 0,mxUndoManager.prototype=new mxEventSource,mxUndoManager.prototype.constructor=mxUndoManager,mxUndoManager.prototype.size=null,mxUndoManager.prototype.history=null,mxUndoManager.prototype.indexOfNextAdd=0,mxUndoManager.prototype.isEmpty=function(){return 0==this.history.length},mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject(mxEvent.CLEAR))},mxUndoManager.prototype.canUndo=function(){return this.indexOfNextAdd>0},mxUndoManager.prototype.undo=function(){for(;this.indexOfNextAdd>0;){var e=this.history[--this.indexOfNextAdd];if(e.undo(),e.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e));break}}},mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length},mxUndoManager.prototype.redo=function(){for(var e=this.history.length;this.indexOfNextAdd<e;){var t=this.history[this.indexOfNextAdd++];if(t.redo(),t.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",t));break}}},mxUndoManager.prototype.undoableEditHappened=function(e){this.trim(),this.size>0&&this.size==this.history.length&&this.history.shift(),this.history.push(e),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",e))},mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var e=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),t=0;t<e.length;t++)e[t].die()},__mxOutput.mxUndoManager=void 0!==mxUndoManager?mxUndoManager:void 0;var mxUrlConverter=function(){};function mxPanningManager(e){this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:function(r,o){},mouseMove:function(r,o){},mouseUp:mxUtils.bind(this,function(r,o){this.active&&this.stop()})},e.addMouseListener(this.mouseListener),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.stop()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener);var t=mxUtils.bind(this,function(){return this.scrollbars=mxUtils.hasScrollbars(e.container),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,window.setInterval(mxUtils.bind(this,function(){if(this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars){var r=-e.container.scrollLeft-Math.ceil(this.dx),o=-e.container.scrollTop-Math.ceil(this.dy);e.panGraph(r,o),e.panDx=this.scrollLeft-e.container.scrollLeft,e.panDy=this.scrollTop-e.container.scrollTop,e.fireEvent(new mxEventObject(mxEvent.PAN))}else e.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=e.view.translate.x,this.t0y=e.view.translate.y,this.active=!0},this.panTo=function(r,o,a,u){this.active||this.start(),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,u=null!=u?u:0;var c=e.container;this.dx=r+(a=null!=a?a:0)-c.scrollLeft-c.clientWidth,this.dx=this.dx<0&&Math.abs(this.dx)<this.border?this.border+this.dx:this.handleMouseOut?Math.max(this.dx,0):0,0==this.dx&&(this.dx=r-c.scrollLeft,this.dx=this.dx>0&&this.dx<this.border?this.dx-this.border:this.handleMouseOut?Math.min(0,this.dx):0),this.dy=o+u-c.scrollTop-c.clientHeight,this.dy=this.dy<0&&Math.abs(this.dy)<this.border?this.border+this.dy:this.handleMouseOut?Math.max(this.dy,0):0,0==this.dy&&(this.dy=o-c.scrollTop,this.dy=this.dy>0&&this.dy<this.border?this.dy-this.border:this.handleMouseOut?Math.min(0,this.dy):0),0!=this.dx||0!=this.dy?(this.dx*=this.damper,this.dy*=this.damper,null==this.thread&&(this.thread=t())):null!=this.thread&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){if(this.active)if(this.active=!1,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars)e.panDx=0,e.panDy=0,e.fireEvent(new mxEventObject(mxEvent.PAN));else{var r=e.panDx,o=e.panDy;(0!=r||0!=o)&&(e.panGraph(0,0),e.view.setTranslate(this.t0x+r/e.view.scale,this.t0y+o/e.view.scale))}},this.destroy=function(){e.removeMouseListener(this.mouseListener),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)}}function mxPopupMenu(e){this.factoryMethod=e,null!=e&&this.init()}function mxAutoSaveManager(e){this.changeHandler=mxUtils.bind(this,function(t,r){this.isEnabled()&&this.graphModelChanged(r.getProperty("edit").changes)}),this.setGraph(e)}function mxAnimation(e){this.delay=null!=e?e:20}function mxMorphing(e,t,r,o){mxAnimation.call(this,o),this.graph=e,this.steps=null!=t?t:6,this.ease=null!=r?r:1.5}function mxImageBundle(e){this.images=[],this.alt=null!=e&&e}function mxImageExport(){}function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}function mxXmlCanvas2D(e){mxAbstractCanvas2D.call(this),this.root=e,this.writeDefaults()}function mxSvgCanvas2D(e,t){mxAbstractCanvas2D.call(this),this.root=e,this.gradients=[],this.defs=null,this.styleEnabled=null!=t&&t;var r=null;if(e.ownerDocument!=document){for(var o=e;null!=o&&"svg"!=o.nodeName;)o=o.parentNode;r=o}null!=r&&(r.getElementsByTagName("defs").length>0&&(this.defs=r.getElementsByTagName("defs")[0]),null==this.defs&&(this.defs=this.createElement("defs"),null!=r.firstChild?r.insertBefore(this.defs,r.firstChild):r.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle()))}mxUrlConverter.prototype.enabled=!0,mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var e=this.baseUrl.lastIndexOf("/");e>0&&(this.baseUrl=this.baseUrl.substring(0,e+1))},mxUrlConverter.prototype.isEnabled=function(){return this.enabled},mxUrlConverter.prototype.setEnabled=function(e){this.enabled=e},mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl},mxUrlConverter.prototype.setBaseUrl=function(e){this.baseUrl=e},mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(e){this.baseDomain=e},mxUrlConverter.prototype.isRelativeUrl=function(e){return null!=e&&"//"!=e.substring(0,2)&&"http://"!=e.substring(0,7)&&"https://"!=e.substring(0,8)&&"data:image"!=e.substring(0,10)&&"file://"!=e.substring(0,7)},mxUrlConverter.prototype.convert=function(e){return this.isEnabled()&&this.isRelativeUrl(e)&&(null==this.getBaseUrl()&&this.updateBaseUrl(),e="/"==e.charAt(0)?this.getBaseDomain()+e:this.getBaseUrl()+e),e},__mxOutput.mxUrlConverter=void 0!==mxUrlConverter?mxUrlConverter:void 0,mxPanningManager.prototype.damper=1/6,mxPanningManager.prototype.delay=10,mxPanningManager.prototype.handleMouseOut=!0,mxPanningManager.prototype.border=0,__mxOutput.mxPanningManager=void 0!==mxPanningManager?mxPanningManager:void 0,mxPopupMenu.prototype=new mxEventSource,mxPopupMenu.prototype.constructor=mxPopupMenu,mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif",mxPopupMenu.prototype.zIndex=10006,mxPopupMenu.prototype.factoryMethod=null,mxPopupMenu.prototype.useLeftButtonForPopup=!1,mxPopupMenu.prototype.enabled=!0,mxPopupMenu.prototype.itemCount=0,mxPopupMenu.prototype.autoExpand=!1,mxPopupMenu.prototype.smartSeparators=!1,mxPopupMenu.prototype.labels=!0,mxPopupMenu.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent.disableContextMenu(this.div)},mxPopupMenu.prototype.isEnabled=function(){return this.enabled},mxPopupMenu.prototype.setEnabled=function(e){this.enabled=e},mxPopupMenu.prototype.isPopupTrigger=function(e){return e.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(e.getEvent())},mxPopupMenu.prototype.addItem=function(e,t,r,o,a,u,c,f){o=o||this,this.itemCount++,o.willAddSeparator&&(o.containsItems&&this.addSeparator(o,!0),o.willAddSeparator=!1),o.containsItems=!0;var m=document.createElement("tr");m.className="mxPopupMenuItem";var x=document.createElement("td");if(x.className="mxPopupMenuIcon",null!=t){var v=document.createElement("img");v.src=t,x.appendChild(v)}else if(null!=a){var E=document.createElement("div");E.className=a,x.appendChild(E)}if(m.appendChild(x),this.labels){var S=document.createElement("td");S.className="mxPopupMenuItem"+(null==u||u?"":" mxDisabled"),mxUtils.write(S,e),S.align="left",m.appendChild(S);var b=document.createElement("td");b.className="mxPopupMenuItem"+(null==u||u?"":" mxDisabled"),b.style.paddingRight="6px",b.style.textAlign="right",m.appendChild(b),null==o.div&&this.createSubmenu(o)}if(o.tbody.appendChild(m),0!=c&&0!=u){var _=null;mxEvent.addGestureListeners(m,mxUtils.bind(this,function(D){this.eventReceiver=m,o.activeRow!=m&&o.activeRow!=o&&(null!=o.activeRow&&null!=o.activeRow.div.parentNode&&this.hideSubmenu(o),null!=m.div&&(this.showSubmenu(o,m),o.activeRow=m)),null!=document.selection&&(mxClient.IS_QUIRKS||8==document.documentMode)&&(_=document.selection.createRange()),mxEvent.consume(D)}),mxUtils.bind(this,function(D){o.activeRow!=m&&o.activeRow!=o&&(null!=o.activeRow&&null!=o.activeRow.div.parentNode&&this.hideSubmenu(o),this.autoExpand&&null!=m.div&&(this.showSubmenu(o,m),o.activeRow=m)),f||(m.className="mxPopupMenuItemHover")}),mxUtils.bind(this,function(D){if(this.eventReceiver==m){if(o.activeRow!=m&&this.hideMenu(),null!=_){try{_.select()}catch(M){}_=null}null!=r&&r(D)}this.eventReceiver=null,mxEvent.consume(D)})),f||mxEvent.addListener(m,"mouseout",mxUtils.bind(this,function(D){m.className="mxPopupMenuItem"}))}return m},mxPopupMenu.prototype.addCheckmark=function(e,t){var r=e.firstChild.nextSibling;r.style.backgroundImage="url('"+t+"')",r.style.backgroundRepeat="no-repeat",r.style.backgroundPosition="2px 50%"},mxPopupMenu.prototype.createSubmenu=function(e){e.table=document.createElement("table"),e.table.className="mxPopupMenu",e.tbody=document.createElement("tbody"),e.table.appendChild(e.tbody),e.div=document.createElement("div"),e.div.className="mxPopupMenu",e.div.style.position="absolute",e.div.style.display="inline",e.div.style.zIndex=this.zIndex,e.div.appendChild(e.table);var t=document.createElement("img");t.setAttribute("src",this.submenuImage),td=e.firstChild.nextSibling.nextSibling,td.appendChild(t)},mxPopupMenu.prototype.showSubmenu=function(e,t){if(null!=t.div){t.div.style.left=e.div.offsetLeft+t.offsetLeft+t.offsetWidth-1+"px",t.div.style.top=e.div.offsetTop+t.offsetTop+"px",document.body.appendChild(t.div);var r=parseInt(t.div.offsetLeft),o=parseInt(t.div.offsetWidth),a=mxUtils.getDocumentScrollOrigin(document),u=document.body,c=document.documentElement;r+o>a.x+(u.clientWidth||c.clientWidth)&&(t.div.style.left=Math.max(0,e.div.offsetLeft-o+(mxClient.IS_IE?6:-6))+"px"),mxUtils.fit(t.div)}},mxPopupMenu.prototype.addSeparator=function(e,t){if(e=e||this,this.smartSeparators&&!t)e.willAddSeparator=!0;else if(null!=e.tbody){e.willAddSeparator=!1;var r=document.createElement("tr"),o=document.createElement("td");o.className="mxPopupMenuIcon",o.style.padding="0 0 0 0px",r.appendChild(o);var a=document.createElement("td");a.style.padding="0 0 0 0px",a.setAttribute("colSpan","2");var u=document.createElement("hr");u.setAttribute("size","1"),a.appendChild(u),r.appendChild(a),e.tbody.appendChild(r)}},mxPopupMenu.prototype.popup=function(e,t,r,o){if(null!=this.div&&null!=this.tbody&&null!=this.factoryMethod){for(this.div.style.left=e+"px",this.div.style.top=t+"px";null!=this.tbody.firstChild;)mxEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,r,o),this.itemCount>0&&(this.showMenu(),this.fireEvent(new mxEventObject(mxEvent.SHOW)))}},mxPopupMenu.prototype.isMenuShowing=function(){return null!=this.div&&this.div.parentNode==document.body},mxPopupMenu.prototype.showMenu=function(){document.documentMode>=9&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)},mxPopupMenu.prototype.hideMenu=function(){null!=this.div&&(null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject(mxEvent.HIDE)))},mxPopupMenu.prototype.hideSubmenu=function(e){null!=e.activeRow&&(this.hideSubmenu(e.activeRow),null!=e.activeRow.div.parentNode&&e.activeRow.div.parentNode.removeChild(e.activeRow.div),e.activeRow=null)},mxPopupMenu.prototype.destroy=function(){null!=this.div&&(mxEvent.release(this.div),null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.div=null)},__mxOutput.mxPopupMenu=void 0!==mxPopupMenu?mxPopupMenu:void 0,mxAutoSaveManager.prototype=new mxEventSource,mxAutoSaveManager.prototype.constructor=mxAutoSaveManager,mxAutoSaveManager.prototype.graph=null,mxAutoSaveManager.prototype.autoSaveDelay=10,mxAutoSaveManager.prototype.autoSaveThrottle=2,mxAutoSaveManager.prototype.autoSaveThreshold=5,mxAutoSaveManager.prototype.ignoredChanges=0,mxAutoSaveManager.prototype.lastSnapshot=0,mxAutoSaveManager.prototype.enabled=!0,mxAutoSaveManager.prototype.changeHandler=null,mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled},mxAutoSaveManager.prototype.setEnabled=function(e){this.enabled=e},mxAutoSaveManager.prototype.setGraph=function(e){null!=this.graph&&this.graph.getModel().removeListener(this.changeHandler),this.graph=e,null!=this.graph&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)},mxAutoSaveManager.prototype.save=function(){},mxAutoSaveManager.prototype.graphModelChanged=function(e){var r=((new Date).getTime()-this.lastSnapshot)/1e3;r>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&r>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++},mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=(new Date).getTime(),this.ignoredChanges=0},mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxAutoSaveManager=void 0!==mxAutoSaveManager?mxAutoSaveManager:void 0,mxAnimation.prototype=new mxEventSource,mxAnimation.prototype.constructor=mxAnimation,mxAnimation.prototype.delay=null,mxAnimation.prototype.thread=null,mxAnimation.prototype.isRunning=function(){return null!=this.thread},mxAnimation.prototype.startAnimation=function(){null==this.thread&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))},mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))},mxAnimation.prototype.stopAnimation=function(){null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))},__mxOutput.mxAnimation=void 0!==mxAnimation?mxAnimation:void 0,mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){mxAnimation.prototype.updateAnimation.apply(this,arguments);var e=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var t=0;t<this.cells.length;t++)this.animateCell(this.cells[t],e,!1);else this.animateCell(this.graph.getModel().getRoot(),e,!0);this.show(e),(e.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(e){e.show()},mxMorphing.prototype.animateCell=function(e,t,r){var o=this.graph.getView().getState(e),a=null;if(null!=o&&(a=this.getDelta(o),this.graph.getModel().isVertex(e)&&(0!=a.x||0!=a.y))){var u=this.graph.view.getTranslate(),c=this.graph.view.getScale();a.x+=u.x*c,a.y+=u.y*c,t.moveState(o,-a.x/this.ease,-a.y/this.ease)}if(r&&!this.stopRecursion(o,a))for(var f=this.graph.getModel().getChildCount(e),m=0;m<f;m++)this.animateCell(this.graph.getModel().getChildAt(e,m),t,r)},mxMorphing.prototype.stopRecursion=function(e,t){return null!=t&&(0!=t.x||0!=t.y)},mxMorphing.prototype.getDelta=function(e){var t=this.getOriginForCell(e.cell),r=this.graph.getView().getTranslate(),o=this.graph.getView().getScale();return new mxPoint((t.x-(e.x/o-r.x))*o,(t.y-(e.y/o-r.y))*o)},mxMorphing.prototype.getOriginForCell=function(e){var t=null;if(null!=e){var r=this.graph.getModel().getParent(e),o=this.graph.getCellGeometry(e);if(t=this.getOriginForCell(r),null!=o)if(o.relative){var a=this.graph.getCellGeometry(r);null!=a&&(t.x+=o.x*a.width,t.y+=o.y*a.height)}else t.x+=o.x,t.y+=o.y}if(null==t){var u=this.graph.view.getTranslate();t=new mxPoint(-u.x,-u.y)}return t},__mxOutput.mxMorphing=void 0!==mxMorphing?mxMorphing:void 0,mxImageBundle.prototype.images=null,mxImageBundle.prototype.alt=null,mxImageBundle.prototype.putImage=function(e,t,r){this.images[e]={value:t,fallback:r}},mxImageBundle.prototype.getImage=function(e){var t=null;if(null!=e){var r=this.images[e];null!=r&&(t=this.alt?r.fallback:r.value)}return t},__mxOutput.mxImageBundle=void 0!==mxImageBundle?mxImageBundle:void 0,mxImageExport.prototype.includeOverlays=!1,mxImageExport.prototype.drawState=function(e,t){null!=e&&(this.visitStatesRecursive(e,t,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays&&this.visitStatesRecursive(e,t,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)})))},mxImageExport.prototype.visitStatesRecursive=function(e,t,r){if(null!=e){r(e,t);for(var o=e.view.graph,a=o.model.getChildCount(e.cell),u=0;u<a;u++){var c=o.view.getState(o.model.getChildAt(e.cell,u));this.visitStatesRecursive(c,t,r)}}},mxImageExport.prototype.getLinkForCellState=function(e,t){return null},mxImageExport.prototype.drawCellState=function(e,t){var r=this.getLinkForCellState(e,t);null!=r&&t.setLink(r),this.drawShape(e,t),this.drawText(e,t),null!=r&&t.setLink(null)},mxImageExport.prototype.drawShape=function(e,t){e.shape instanceof mxShape&&e.shape.checkBounds()&&(t.save(),e.shape.beforePaint(t),e.shape.paint(t),e.shape.afterPaint(t),t.restore())},mxImageExport.prototype.drawText=function(e,t){null!=e.text&&e.text.checkBounds()&&(t.save(),e.text.beforePaint(t),e.text.paint(t),e.text.afterPaint(t),t.restore())},mxImageExport.prototype.drawOverlays=function(e,t){null!=e.overlays&&e.overlays.visit(function(r,o){o instanceof mxShape&&o.paint(t)})},__mxOutput.mxImageExport=void 0!==mxImageExport?mxImageExport:void 0,mxAbstractCanvas2D.prototype.state=null,mxAbstractCanvas2D.prototype.states=null,mxAbstractCanvas2D.prototype.path=null,mxAbstractCanvas2D.prototype.rotateHtml=!0,mxAbstractCanvas2D.prototype.lastX=0,mxAbstractCanvas2D.prototype.lastY=0,mxAbstractCanvas2D.prototype.moveOp="M",mxAbstractCanvas2D.prototype.lineOp="L",mxAbstractCanvas2D.prototype.quadOp="Q",mxAbstractCanvas2D.prototype.curveOp="C",mxAbstractCanvas2D.prototype.closeOp="Z",mxAbstractCanvas2D.prototype.pointerEvents=!1,mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter},mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]},mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}},mxAbstractCanvas2D.prototype.format=function(e){return Math.round(parseFloat(e))},mxAbstractCanvas2D.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),arguments.length>2))for(var e=this.state,t=2;t<arguments.length;t+=2)this.lastX=arguments[t-1],this.lastY=arguments[t],this.path.push(this.format((this.lastX+e.dx)*e.scale)),this.path.push(this.format((this.lastY+e.dy)*e.scale))},mxAbstractCanvas2D.prototype.rotatePoint=function(e,t,r,o,a){var u=r*(Math.PI/180);return mxUtils.getRotatedPoint(new mxPoint(e,t),Math.cos(u),Math.sin(u),new mxPoint(o,a))},mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)},mxAbstractCanvas2D.prototype.restore=function(){this.states.length>0&&(this.state=this.states.pop())},mxAbstractCanvas2D.prototype.setLink=function(e){},mxAbstractCanvas2D.prototype.scale=function(e){this.state.scale*=e,this.state.strokeWidth*=e},mxAbstractCanvas2D.prototype.translate=function(e,t){this.state.dx+=e,this.state.dy+=t},mxAbstractCanvas2D.prototype.rotate=function(e,t,r,o,a){},mxAbstractCanvas2D.prototype.setAlpha=function(e){this.state.alpha=e},mxAbstractCanvas2D.prototype.setFillAlpha=function(e){this.state.fillAlpha=e},mxAbstractCanvas2D.prototype.setStrokeAlpha=function(e){this.state.strokeAlpha=e},mxAbstractCanvas2D.prototype.setFillColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fillColor=e,this.state.gradientColor=null},mxAbstractCanvas2D.prototype.setGradient=function(e,t,r,o,a,u,c,f,m){var x=this.state;x.fillColor=e,x.gradientFillAlpha=null!=f?f:1,x.gradientColor=t,x.gradientAlpha=null!=m?m:1,x.gradientDirection=c},mxAbstractCanvas2D.prototype.setStrokeColor=function(e){e==mxConstants.NONE&&(e=null),this.state.strokeColor=e},mxAbstractCanvas2D.prototype.setStrokeWidth=function(e){this.state.strokeWidth=e},mxAbstractCanvas2D.prototype.setDashed=function(e,t){this.state.dashed=e,this.state.fixDash=t},mxAbstractCanvas2D.prototype.setDashPattern=function(e){this.state.dashPattern=e},mxAbstractCanvas2D.prototype.setLineCap=function(e){this.state.lineCap=e},mxAbstractCanvas2D.prototype.setLineJoin=function(e){this.state.lineJoin=e},mxAbstractCanvas2D.prototype.setMiterLimit=function(e){this.state.miterLimit=e},mxAbstractCanvas2D.prototype.setFontColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontColor=e},mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontBackgroundColor=e},mxAbstractCanvas2D.prototype.setFontBorderColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontBorderColor=e},mxAbstractCanvas2D.prototype.setFontSize=function(e){this.state.fontSize=parseFloat(e)},mxAbstractCanvas2D.prototype.setFontFamily=function(e){this.state.fontFamily=e},mxAbstractCanvas2D.prototype.setFontStyle=function(e){null==e&&(e=0),this.state.fontStyle=e},mxAbstractCanvas2D.prototype.setShadow=function(e){this.state.shadow=e},mxAbstractCanvas2D.prototype.setShadowColor=function(e){e==mxConstants.NONE&&(e=null),this.state.shadowColor=e},mxAbstractCanvas2D.prototype.setShadowAlpha=function(e){this.state.shadowAlpha=e},mxAbstractCanvas2D.prototype.setShadowOffset=function(e,t){this.state.shadowDx=e,this.state.shadowDy=t},mxAbstractCanvas2D.prototype.begin=function(){this.lastX=0,this.lastY=0,this.path=[]},mxAbstractCanvas2D.prototype.moveTo=function(e,t){this.addOp(this.moveOp,e,t)},mxAbstractCanvas2D.prototype.lineTo=function(e,t){this.addOp(this.lineOp,e,t)},mxAbstractCanvas2D.prototype.quadTo=function(e,t,r,o){this.addOp(this.quadOp,e,t,r,o)},mxAbstractCanvas2D.prototype.curveTo=function(e,t,r,o,a,u){this.addOp(this.curveOp,e,t,r,o,a,u)},mxAbstractCanvas2D.prototype.arcTo=function(e,t,r,o,a,u,c){var f=mxUtils.arcToCurves(this.lastX,this.lastY,e,t,r,o,a,u,c);if(null!=f)for(var m=0;m<f.length;m+=6)this.curveTo(f[m],f[m+1],f[m+2],f[m+3],f[m+4],f[m+5])},mxAbstractCanvas2D.prototype.close=function(e,t,r,o,a,u){this.addOp(this.closeOp)},mxAbstractCanvas2D.prototype.end=function(){},__mxOutput.mxAbstractCanvas2D=void 0!==mxAbstractCanvas2D?mxAbstractCanvas2D:void 0,mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D),mxXmlCanvas2D.prototype.textEnabled=!0,mxXmlCanvas2D.prototype.compressed=!0,mxXmlCanvas2D.prototype.writeDefaults=function(){var e;(e=this.createElement("fontfamily")).setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(e),(e=this.createElement("fontsize")).setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(e),(e=this.createElement("shadowcolor")).setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(e),(e=this.createElement("shadowalpha")).setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(e),(e=this.createElement("shadowoffset")).setAttribute("dx",mxConstants.SHADOW_OFFSET_X),e.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(e)},mxXmlCanvas2D.prototype.format=function(e){return parseFloat(parseFloat(e).toFixed(2))},mxXmlCanvas2D.prototype.createElement=function(e){return this.root.ownerDocument.createElement(e)},mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))},mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))},mxXmlCanvas2D.prototype.scale=function(e){var t=this.createElement("scale");t.setAttribute("scale",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.translate=function(e,t){var r=this.createElement("translate");r.setAttribute("dx",this.format(e)),r.setAttribute("dy",this.format(t)),this.root.appendChild(r)},mxXmlCanvas2D.prototype.rotate=function(e,t,r,o,a){var u=this.createElement("rotate");(0!=e||t||r)&&(u.setAttribute("theta",this.format(e)),u.setAttribute("flipH",t?"1":"0"),u.setAttribute("flipV",r?"1":"0"),u.setAttribute("cx",this.format(o)),u.setAttribute("cy",this.format(a)),this.root.appendChild(u))},mxXmlCanvas2D.prototype.setAlpha=function(e){if(this.compressed){if(this.state.alpha==e)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var t=this.createElement("alpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFillAlpha=function(e){if(this.compressed){if(this.state.fillAlpha==e)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var t=this.createElement("fillalpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setStrokeAlpha=function(e){if(this.compressed){if(this.state.strokeAlpha==e)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var t=this.createElement("strokealpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFillColor=function(e){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fillColor==e)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var t=this.createElement("fillcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setGradient=function(e,t,r,o,a,u,c,f,m){if(null!=e&&null!=t){mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments);var x=this.createElement("gradient");x.setAttribute("c1",e),x.setAttribute("c2",t),x.setAttribute("x",this.format(r)),x.setAttribute("y",this.format(o)),x.setAttribute("w",this.format(a)),x.setAttribute("h",this.format(u)),null!=c&&x.setAttribute("direction",c),null!=f&&x.setAttribute("alpha1",f),null!=m&&x.setAttribute("alpha2",m),this.root.appendChild(x)}},mxXmlCanvas2D.prototype.setStrokeColor=function(e){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.strokeColor==e)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var t=this.createElement("strokecolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setStrokeWidth=function(e){if(this.compressed){if(this.state.strokeWidth==e)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var t=this.createElement("strokewidth");t.setAttribute("width",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setDashed=function(e,t){if(this.compressed){if(this.state.dashed==e)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var r=this.createElement("dashed");r.setAttribute("dashed",e?"1":"0"),null!=t&&r.setAttribute("fixDash",t?"1":"0"),this.root.appendChild(r)},mxXmlCanvas2D.prototype.setDashPattern=function(e){if(this.compressed){if(this.state.dashPattern==e)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var t=this.createElement("dashpattern");t.setAttribute("pattern",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setLineCap=function(e){if(this.compressed){if(this.state.lineCap==e)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var t=this.createElement("linecap");t.setAttribute("cap",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setLineJoin=function(e){if(this.compressed){if(this.state.lineJoin==e)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var t=this.createElement("linejoin");t.setAttribute("join",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setMiterLimit=function(e){if(this.compressed){if(this.state.miterLimit==e)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var t=this.createElement("miterlimit");t.setAttribute("limit",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFontColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontColor==e)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var t=this.createElement("fontcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontBackgroundColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontBackgroundColor==e)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var t=this.createElement("fontbackgroundcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontBorderColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontBorderColor==e)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var t=this.createElement("fontbordercolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontSize=function(e){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==e)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var t=this.createElement("fontsize");t.setAttribute("size",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontFamily=function(e){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==e)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var t=this.createElement("fontfamily");t.setAttribute("family",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontStyle=function(e){if(this.textEnabled){if(null==e&&(e=0),this.compressed){if(this.state.fontStyle==e)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var t=this.createElement("fontstyle");t.setAttribute("style",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setShadow=function(e){if(this.compressed){if(this.state.shadow==e)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var t=this.createElement("shadow");t.setAttribute("enabled",e?"1":"0"),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowColor=function(e){if(this.compressed){if(e==mxConstants.NONE&&(e=null),this.state.shadowColor==e)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var t=this.createElement("shadowcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowAlpha=function(e){if(this.compressed){if(this.state.shadowAlpha==e)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var t=this.createElement("shadowalpha");t.setAttribute("alpha",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowOffset=function(e,t){if(this.compressed){if(this.state.shadowDx==e&&this.state.shadowDy==t)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var r=this.createElement("shadowoffset");r.setAttribute("dx",e),r.setAttribute("dy",t),this.root.appendChild(r)},mxXmlCanvas2D.prototype.rect=function(e,t,r,o){var a=this.createElement("rect");a.setAttribute("x",this.format(e)),a.setAttribute("y",this.format(t)),a.setAttribute("w",this.format(r)),a.setAttribute("h",this.format(o)),this.root.appendChild(a)},mxXmlCanvas2D.prototype.roundrect=function(e,t,r,o,a,u){var c=this.createElement("roundrect");c.setAttribute("x",this.format(e)),c.setAttribute("y",this.format(t)),c.setAttribute("w",this.format(r)),c.setAttribute("h",this.format(o)),c.setAttribute("dx",this.format(a)),c.setAttribute("dy",this.format(u)),this.root.appendChild(c)},mxXmlCanvas2D.prototype.ellipse=function(e,t,r,o){var a=this.createElement("ellipse");a.setAttribute("x",this.format(e)),a.setAttribute("y",this.format(t)),a.setAttribute("w",this.format(r)),a.setAttribute("h",this.format(o)),this.root.appendChild(a)},mxXmlCanvas2D.prototype.image=function(e,t,r,o,a,u,c,f){a=this.converter.convert(a);var m=this.createElement("image");m.setAttribute("x",this.format(e)),m.setAttribute("y",this.format(t)),m.setAttribute("w",this.format(r)),m.setAttribute("h",this.format(o)),m.setAttribute("src",a),m.setAttribute("aspect",u?"1":"0"),m.setAttribute("flipH",c?"1":"0"),m.setAttribute("flipV",f?"1":"0"),this.root.appendChild(m)},mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastX=0,this.lastY=0},mxXmlCanvas2D.prototype.moveTo=function(e,t){var r=this.createElement("move");r.setAttribute("x",this.format(e)),r.setAttribute("y",this.format(t)),this.root.appendChild(r),this.lastX=e,this.lastY=t},mxXmlCanvas2D.prototype.lineTo=function(e,t){var r=this.createElement("line");r.setAttribute("x",this.format(e)),r.setAttribute("y",this.format(t)),this.root.appendChild(r),this.lastX=e,this.lastY=t},mxXmlCanvas2D.prototype.quadTo=function(e,t,r,o){var a=this.createElement("quad");a.setAttribute("x1",this.format(e)),a.setAttribute("y1",this.format(t)),a.setAttribute("x2",this.format(r)),a.setAttribute("y2",this.format(o)),this.root.appendChild(a),this.lastX=r,this.lastY=o},mxXmlCanvas2D.prototype.curveTo=function(e,t,r,o,a,u){var c=this.createElement("curve");c.setAttribute("x1",this.format(e)),c.setAttribute("y1",this.format(t)),c.setAttribute("x2",this.format(r)),c.setAttribute("y2",this.format(o)),c.setAttribute("x3",this.format(a)),c.setAttribute("y3",this.format(u)),this.root.appendChild(c),this.lastX=a,this.lastY=u},mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))},mxXmlCanvas2D.prototype.text=function(e,t,r,o,a,u,c,f,m,x,v,E,S){if(this.textEnabled&&null!=a){mxUtils.isNode(a)&&(a=mxUtils.getOuterHtml(a));var b=this.createElement("text");b.setAttribute("x",this.format(e)),b.setAttribute("y",this.format(t)),b.setAttribute("w",this.format(r)),b.setAttribute("h",this.format(o)),b.setAttribute("str",a),null!=u&&b.setAttribute("align",u),null!=c&&b.setAttribute("valign",c),b.setAttribute("wrap",f?"1":"0"),null==m&&(m=""),b.setAttribute("format",m),null!=x&&b.setAttribute("overflow",x),null!=v&&b.setAttribute("clip",v?"1":"0"),null!=E&&b.setAttribute("rotation",E),null!=S&&b.setAttribute("dir",S),this.root.appendChild(b)}},mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))},mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))},mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))},__mxOutput.mxXmlCanvas2D=void 0!==mxXmlCanvas2D?mxXmlCanvas2D:void 0,mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D),function(){if(mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&"function"==typeof DOMParser&&"function"==typeof XMLSerializer,mxSvgCanvas2D.prototype.useDomParser)try{var e=(new DOMParser).parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=null!=e}catch(t){mxSvgCanvas2D.prototype.useDomParser=!1}mxSvgCanvas2D.prototype.useAbsoluteIds=!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&document.getElementsByTagName("base").length>0}(),mxSvgCanvas2D.prototype.node=null,mxSvgCanvas2D.prototype.matchHtmlAlignment=!0,mxSvgCanvas2D.prototype.textEnabled=!0,mxSvgCanvas2D.prototype.foEnabled=!0,mxSvgCanvas2D.prototype.foAltText="[Object]",mxSvgCanvas2D.prototype.foOffset=0,mxSvgCanvas2D.prototype.textOffset=0,mxSvgCanvas2D.prototype.imageOffset=0,mxSvgCanvas2D.prototype.strokeTolerance=0,mxSvgCanvas2D.prototype.minStrokeWidth=1,mxSvgCanvas2D.prototype.refCount=0,mxSvgCanvas2D.prototype.lineHeightCorrection=1,mxSvgCanvas2D.prototype.pointerEventsValue="all",mxSvgCanvas2D.prototype.fontMetricsPadding=10,mxSvgCanvas2D.prototype.cacheOffsetSize=!0,mxSvgCanvas2D.prototype.format=function(e){return parseFloat(parseFloat(e).toFixed(2))},mxSvgCanvas2D.prototype.getBaseUrl=function(){var e=window.location.href,t=e.lastIndexOf("#");return t>0&&(e=e.substring(0,t)),e},mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[]},mxSvgCanvas2D.prototype.createStyle=function(e){var t=this.createElement("style");return t.setAttribute("type","text/css"),mxUtils.write(t,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),t},mxSvgCanvas2D.prototype.createElement=function(e,t){if(null!=this.root.ownerDocument.createElementNS)return this.root.ownerDocument.createElementNS(t||mxConstants.NS_SVG,e);var r=this.root.ownerDocument.createElement(e);return null!=t&&r.setAttribute("xmlns",t),r},mxSvgCanvas2D.prototype.getAlternateText=function(e,t,r,o,a,u,c,f,m,x,v,E,S){return null!=u?this.foAltText:null},mxSvgCanvas2D.prototype.createAlternateContent=function(e,t,r,o,a,u,c,f,m,x,v,E,S){var b=this.getAlternateText(e,t,r,o,a,u,c,f,m,x,v,E,S),_=this.state;if(null!=b&&_.fontSize>0){var D=f==mxConstants.ALIGN_TOP?1:f==mxConstants.ALIGN_BOTTOM?0:.3,M=c==mxConstants.ALIGN_RIGHT?"end":c==mxConstants.ALIGN_LEFT?"start":"middle",R=this.createElement("text");R.setAttribute("x",Math.round(t+_.dx)),R.setAttribute("y",Math.round(r+_.dy+D*_.fontSize)),R.setAttribute("fill",_.fontColor||"black"),R.setAttribute("font-family",_.fontFamily),R.setAttribute("font-size",Math.round(_.fontSize)+"px"),"start"!=M&&R.setAttribute("text-anchor",M),(_.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&R.setAttribute("font-weight","bold"),(_.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&R.setAttribute("font-style","italic");var N=[];return(_.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&N.push("underline"),(_.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&N.push("line-through"),N.length>0&&R.setAttribute("text-decoration",N.join(" ")),mxUtils.write(R,b),R}return null},mxSvgCanvas2D.prototype.createGradientId=function(e,t,r,o,a){"#"==e.charAt(0)&&(e=e.substring(1)),"#"==t.charAt(0)&&(t=t.substring(1)),e=e.toLowerCase()+"-"+r,t=t.toLowerCase()+"-"+o;var u=null;if(null==a||a==mxConstants.DIRECTION_SOUTH)u="s";else if(a==mxConstants.DIRECTION_EAST)u="e";else{var c=e;e=t,t=c,a==mxConstants.DIRECTION_NORTH?u="s":a==mxConstants.DIRECTION_WEST&&(u="e")}return"mx-gradient-"+e+"-"+t+"-"+u},mxSvgCanvas2D.prototype.getSvgGradient=function(e,t,r,o,a){var u=this.createGradientId(e,t,r,o,a),c=this.gradients[u];if(null==c){var f=this.root.ownerSVGElement,m=0,x=u+"-"+m;if(null!=f)for(c=f.ownerDocument.getElementById(x);null!=c&&c.ownerSVGElement!=f;)x=u+"-"+m++,c=f.ownerDocument.getElementById(x);else x="id"+ ++this.refCount;null==c&&((c=this.createSvgGradient(e,t,r,o,a)).setAttribute("id",x),null!=this.defs?this.defs.appendChild(c):f.appendChild(c)),this.gradients[u]=c}return c.getAttribute("id")},mxSvgCanvas2D.prototype.createSvgGradient=function(e,t,r,o,a){var u=this.createElement("linearGradient");u.setAttribute("x1","0%"),u.setAttribute("y1","0%"),u.setAttribute("x2","0%"),u.setAttribute("y2","0%"),null==a||a==mxConstants.DIRECTION_SOUTH?u.setAttribute("y2","100%"):a==mxConstants.DIRECTION_EAST?u.setAttribute("x2","100%"):a==mxConstants.DIRECTION_NORTH?u.setAttribute("y1","100%"):a==mxConstants.DIRECTION_WEST&&u.setAttribute("x1","100%");var c=r<1?";stop-opacity:"+r:"",f=this.createElement("stop");return f.setAttribute("offset","0%"),f.setAttribute("style","stop-color:"+e+c),u.appendChild(f),c=o<1?";stop-opacity:"+o:"",(f=this.createElement("stop")).setAttribute("offset","100%"),f.setAttribute("style","stop-color:"+t+c),u.appendChild(f),u},mxSvgCanvas2D.prototype.addNode=function(e,t){var r=this.node,o=this.state;if(null!=r){if("path"==r.nodeName){if(!(null!=this.path&&this.path.length>0))return;r.setAttribute("d",this.path.join(" "))}e&&null!=o.fillColor?this.updateFill():this.styleEnabled||(r.setAttribute("fill","ellipse"==r.nodeName&&mxClient.IS_FF?"transparent":"none"),e=!1),t&&null!=o.strokeColor?this.updateStroke():this.styleEnabled||r.setAttribute("stroke","none"),null!=o.transform&&o.transform.length>0&&r.setAttribute("transform",o.transform),o.shadow&&this.root.appendChild(this.createShadow(r)),this.strokeTolerance>0&&!e&&this.root.appendChild(this.createTolerance(r)),this.pointerEvents?r.setAttribute("pointer-events",this.pointerEventsValue):!this.pointerEvents&&null==this.originalRoot&&r.setAttribute("pointer-events","none"),("rect"!=r.nodeName&&"path"!=r.nodeName&&"ellipse"!=r.nodeName||"none"!=r.getAttribute("fill")&&"transparent"!=r.getAttribute("fill")||"none"!=r.getAttribute("stroke")||"none"!=r.getAttribute("pointer-events"))&&this.root.appendChild(r),this.node=null}},mxSvgCanvas2D.prototype.updateFill=function(){var e=this.state;if((e.alpha<1||e.fillAlpha<1)&&this.node.setAttribute("fill-opacity",e.alpha*e.fillAlpha),null!=e.fillColor)if(null!=e.gradientColor){var t=this.getSvgGradient(String(e.fillColor),String(e.gradientColor),e.gradientFillAlpha,e.gradientAlpha,e.gradientDirection);if(this.root.ownerDocument==document&&this.useAbsoluteIds){var r=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+r+"#"+t+")")}else this.node.setAttribute("fill","url(#"+t+")")}else this.node.setAttribute("fill",String(e.fillColor).toLowerCase())},mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))},mxSvgCanvas2D.prototype.updateStroke=function(){var e=this.state;this.node.setAttribute("stroke",String(e.strokeColor).toLowerCase()),(e.alpha<1||e.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",e.alpha*e.strokeAlpha);var t=this.getCurrentStrokeWidth();1!=t&&this.node.setAttribute("stroke-width",t),"path"==this.node.nodeName&&this.updateStrokeAttributes(),e.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((e.fixDash?1:e.strokeWidth)*e.scale))},mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var e=this.state;if(null!=e.lineJoin&&"miter"!=e.lineJoin&&this.node.setAttribute("stroke-linejoin",e.lineJoin),null!=e.lineCap){var t=e.lineCap;"flat"==t&&(t="butt"),"butt"!=t&&this.node.setAttribute("stroke-linecap",t)}null!=e.miterLimit&&(!this.styleEnabled||10!=e.miterLimit)&&this.node.setAttribute("stroke-miterlimit",e.miterLimit)},mxSvgCanvas2D.prototype.createDashPattern=function(e){var t=[];if("string"==typeof this.state.dashPattern){var r=this.state.dashPattern.split(" ");if(r.length>0)for(var o=0;o<r.length;o++)t[o]=Number(r[o])*e}return t.join(" ")},mxSvgCanvas2D.prototype.createTolerance=function(e){var t=e.cloneNode(!0),r=parseFloat(t.getAttribute("stroke-width")||1)+this.strokeTolerance;return t.setAttribute("pointer-events","stroke"),t.setAttribute("visibility","hidden"),t.removeAttribute("stroke-dasharray"),t.setAttribute("stroke-width",r),t.setAttribute("fill","none"),t.setAttribute("stroke",mxClient.IS_OT?"none":"white"),t},mxSvgCanvas2D.prototype.createShadow=function(e){var t=e.cloneNode(!0),r=this.state;return"none"!=t.getAttribute("fill")&&(!mxClient.IS_FF||"transparent"!=t.getAttribute("fill"))&&t.setAttribute("fill",r.shadowColor),"none"!=t.getAttribute("stroke")&&t.setAttribute("stroke",r.shadowColor),t.setAttribute("transform","translate("+this.format(r.shadowDx*r.scale)+","+this.format(r.shadowDy*r.scale)+")"+(r.transform||"")),t.setAttribute("opacity",r.shadowAlpha),t},mxSvgCanvas2D.prototype.setLink=function(e){if(null==e)this.root=this.originalRoot;else{this.originalRoot=this.root;var t=this.createElement("a");null==t.setAttributeNS||this.root.ownerDocument!=document&&null==document.documentMode?t.setAttribute("xlink:href",e):t.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",e),this.root.appendChild(t),this.root=t}},mxSvgCanvas2D.prototype.rotate=function(e,t,r,o,a){if(0!=e||t||r){var u=this.state;if(o+=u.dx,a+=u.dy,o*=u.scale,a*=u.scale,u.transform=u.transform||"",t&&r)e+=180;else if(t!=r){var c=t?o:0,f=t?-1:1,m=r?a:0,x=r?-1:1;u.transform+="translate("+this.format(c)+","+this.format(m)+")scale("+this.format(f)+","+this.format(x)+")translate("+this.format(-c)+","+this.format(-m)+")"}(t?!r:r)&&(e*=-1),0!=e&&(u.transform+="rotate("+this.format(e)+","+this.format(o)+","+this.format(a)+")"),u.rotation=u.rotation+e,u.rotationCx=o,u.rotationCy=a}},mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")},mxSvgCanvas2D.prototype.rect=function(e,t,r,o){var a=this.state,u=this.createElement("rect");u.setAttribute("x",this.format((e+a.dx)*a.scale)),u.setAttribute("y",this.format((t+a.dy)*a.scale)),u.setAttribute("width",this.format(r*a.scale)),u.setAttribute("height",this.format(o*a.scale)),this.node=u},mxSvgCanvas2D.prototype.roundrect=function(e,t,r,o,a,u){this.rect(e,t,r,o),a>0&&this.node.setAttribute("rx",this.format(a*this.state.scale)),u>0&&this.node.setAttribute("ry",this.format(u*this.state.scale))},mxSvgCanvas2D.prototype.ellipse=function(e,t,r,o){var a=this.state,u=this.createElement("ellipse");u.setAttribute("cx",this.format((e+r/2+a.dx)*a.scale)),u.setAttribute("cy",this.format((t+o/2+a.dy)*a.scale)),u.setAttribute("rx",r/2*a.scale),u.setAttribute("ry",o/2*a.scale),this.node=u},mxSvgCanvas2D.prototype.image=function(e,t,r,o,a,u,c,f){a=this.converter.convert(a),u=null==u||u,c=null!=c&&c,f=null!=f&&f;var m=this.state;e+=m.dx,t+=m.dy;var x=this.createElement("image");x.setAttribute("x",this.format(e*m.scale)+this.imageOffset),x.setAttribute("y",this.format(t*m.scale)+this.imageOffset),x.setAttribute("width",this.format(r*m.scale)),x.setAttribute("height",this.format(o*m.scale)),null==x.setAttributeNS?x.setAttribute("xlink:href",a):x.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",a),u||x.setAttribute("preserveAspectRatio","none"),(m.alpha<1||m.fillAlpha<1)&&x.setAttribute("opacity",m.alpha*m.fillAlpha);var v=this.state.transform||"";if(c||f){var E=1,S=1,b=0,_=0;c&&(E=-1,b=-r-2*e),f&&(S=-1,_=-o-2*t),v+="scale("+E+","+S+")translate("+b*m.scale+","+_*m.scale+")"}v.length>0&&x.setAttribute("transform",v),this.pointerEvents||x.setAttribute("pointer-events","none"),this.root.appendChild(x)},mxSvgCanvas2D.prototype.convertHtml=function(e){if(this.useDomParser){var t=(new DOMParser).parseFromString(e,"text/html");null!=t&&("<body"==(e=(new XMLSerializer).serializeToString(t.body)).substring(0,5)&&(e=e.substring(e.indexOf(">",5)+1)),"</body>"==e.substring(e.length-7,e.length)&&(e=e.substring(0,e.length-7)))}else{if(null!=document.implementation&&null!=document.implementation.createDocument){var r=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),o=r.createElement("body");r.documentElement.appendChild(o);var a=document.createElement("div");a.innerHTML=e;for(var u=a.firstChild;null!=u;){var c=u.nextSibling;o.appendChild(r.adoptNode(u)),u=c}return o.innerHTML}var f=document.createElement("textarea");f.innerHTML=e.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=f.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return e},mxSvgCanvas2D.prototype.createDiv=function(e){var t=e;if(mxUtils.isNode(t)||(t="<div><div>"+this.convertHtml(t)+"</div></div>"),mxClient.IS_IE||mxClient.IS_IE11||!document.createElementNS)return mxUtils.isNode(t)&&(t="<div><div>"+mxUtils.getXml(t)+"</div></div>"),mxUtils.parseXml(t='<div xmlns="http://www.w3.org/1999/xhtml">'+t+"</div>").documentElement;var r=document.createElementNS("http://www.w3.org/1999/xhtml","div");if(mxUtils.isNode(t)){var o=document.createElement("div"),a=o.cloneNode(!1);this.root.ownerDocument!=document?o.appendChild(t.cloneNode(!0)):o.appendChild(t),a.appendChild(o),r.appendChild(a)}else r.innerHTML=t;return r},mxSvgCanvas2D.prototype.updateText=function(e,t,r,o,a,u,c,f,m,x,v){null!=v&&null!=v.firstChild&&null!=v.firstChild.firstChild&&this.updateTextNodes(e,t,r,o,a,u,c,f,m,x,v.firstChild)},mxSvgCanvas2D.prototype.addForeignObject=function(e,t,r,o,a,u,c,f,m,x,v,E,S,b,_){var D=this.createElement("g"),M=this.createElement("foreignObject");if(M.setAttribute("style","overflow: visible; text-align: left;"),M.setAttribute("pointer-events","none"),b.ownerDocument!=document&&(b=mxUtils.importNodeImplementation(M.ownerDocument,b,!0)),M.appendChild(b),D.appendChild(M),this.updateTextNodes(e,t,r,o,u,c,f,x,v,E,D),this.root.ownerDocument!=document){var R=this.createAlternateContent(M,e,t,r,o,a,u,c,f,m,x,v,E);if(null!=R){M.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var N=this.createElement("switch");N.appendChild(M),N.appendChild(R),D.appendChild(N)}}_.appendChild(D)},mxSvgCanvas2D.prototype.updateTextNodes=function(e,t,r,o,a,u,c,f,m,x,v){var E=this.state.scale;mxSvgCanvas2D.createCss(r+2,o,a,u,c,f,m,null!=this.state.fontBackgroundColor?this.state.fontBackgroundColor:null,null!=this.state.fontBorderColor?this.state.fontBorderColor:null,"display: flex; align-items: unsafe "+(u==mxConstants.ALIGN_TOP?"flex-start":u==mxConstants.ALIGN_BOTTOM?"flex-end":"center")+"; justify-content: unsafe "+(a==mxConstants.ALIGN_LEFT?"flex-start":a==mxConstants.ALIGN_RIGHT?"flex-end":"center")+"; ",this.getTextCss(),E,mxUtils.bind(this,function(S,b,_,D,M){e+=this.state.dx,t+=this.state.dy;var R=v.firstChild,N=R.firstChild,V=N.firstChild,F=(this.rotateHtml?this.state.rotation:0)+(null!=x?x:0),G=(0!=this.foOffset?"translate("+this.foOffset+" "+this.foOffset+")":"")+(1!=E?"scale("+E+")":"");V.firstChild.setAttribute("style",M),V.setAttribute("style",D),R.setAttribute("width",Math.ceil(1/Math.min(1,E)*100)+"%"),R.setAttribute("height",Math.ceil(1/Math.min(1,E)*100)+"%");var j=Math.round(t+b);j<0?R.setAttribute("y",j):(R.removeAttribute("y"),_+="padding-top: "+j+"px; "),N.setAttribute("style",_+"margin-left: "+Math.round(e+S)+"px;"),""!=(G+=0!=F?"rotate("+F+" "+e+" "+t+")":"")?v.setAttribute("transform",G):v.removeAttribute("transform"),1!=this.state.alpha?v.setAttribute("opacity",this.state.alpha):v.removeAttribute("opacity")}))},mxSvgCanvas2D.createCss=function(e,t,r,o,a,u,c,f,m,x,v,E,S){var b="box-sizing: border-box; font-size: 0; text-align: "+(r==mxConstants.ALIGN_LEFT?"left":r==mxConstants.ALIGN_RIGHT?"right":"center")+"; ",_=mxUtils.getAlignmentAsPoint(r,o),D="overflow: hidden; ",M="width: 1px; ",R="height: 1px; ",N=_.x*e,V=_.y*t;c?(M="width: "+Math.round(e)+"px; ",b+="max-height: "+Math.round(t)+"px; ",V=0):"fill"==u?(v+="width: 100%; height: 100%; ",b+=(M="width: "+Math.round(e)+"px; ")+(R="height: "+Math.round(t)+"px; ")):"width"==u?(v+="width: 100%; ",b+=M="width: "+Math.round(e)+"px; ",V=0,t>0&&(b+="max-height: "+Math.round(t)+"px; ")):(D="",V=0);var O="";null!=f&&(O+="background-color: "+f+"; "),null!=m&&(O+="border: 1px solid "+m+"; "),""==D||c?v+=O:b+=O,a&&e>0?(v+="white-space: normal; word-wrap: "+mxConstants.WORD_WRAP+"; ",M="width: "+Math.round(e)+"px; ",""!=D&&"fill"!=u&&(V=0)):(v+="white-space: nowrap; ",""==D&&(N=0)),S(N,V,x+M+R,b+D,v,D)},mxSvgCanvas2D.prototype.getTextCss=function(){var e=this.state,r="display: inline-block; font-size: "+e.fontSize+"px; font-family: "+e.fontFamily+"; color: "+e.fontColor+"; line-height: "+(mxConstants.ABSOLUTE_LINE_HEIGHT?e.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*this.lineHeightCorrection)+"; pointer-events: "+(this.pointerEvents?this.pointerEventsValue:"none")+"; ";(e.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(r+="font-weight: bold; "),(e.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(r+="font-style: italic; ");var o=[];return(e.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&o.push("underline"),(e.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&o.push("line-through"),o.length>0&&(r+="text-decoration: "+o.join(" ")+"; "),r},mxSvgCanvas2D.prototype.text=function(e,t,r,o,a,u,c,f,m,x,v,E,S){if(this.textEnabled&&null!=a)if(E=null!=E?E:0,this.foEnabled&&"html"==m){var b=this.createDiv(a);null!=b&&(null!=S&&b.setAttribute("dir",S),this.addForeignObject(e,t,r,o,a,u,c,f,m,x,v,E,S,b,this.root))}else this.plainText(e+this.state.dx,t+this.state.dy,r,o,a,u,c,f,x,v,E,S)},mxSvgCanvas2D.prototype.createClip=function(e,t,r,o){for(var a="mx-clip-"+(e=Math.round(e))+"-"+(t=Math.round(t))+"-"+(r=Math.round(r))+"-"+(o=Math.round(o)),u=0,c=a+"-"+u;null!=document.getElementById(c);)c=a+"-"+ ++u;clip=this.createElement("clipPath"),clip.setAttribute("id",c);var f=this.createElement("rect");return f.setAttribute("x",e),f.setAttribute("y",t),f.setAttribute("width",r),f.setAttribute("height",o),clip.appendChild(f),clip},mxSvgCanvas2D.prototype.plainText=function(e,t,r,o,a,u,c,f,m,x,v,E){v=null!=v?v:0;var S=this.state,b=S.fontSize,_=this.createElement("g"),D=S.transform||"";if(this.updateFont(_),!this.pointerEvents&&null==this.originalRoot&&_.setAttribute("pointer-events","none"),0!=v&&(D+="rotate("+v+","+this.format(e*S.scale)+","+this.format(t*S.scale)+")"),null!=E&&_.setAttribute("direction",E),x&&r>0&&o>0){var M=e,j=t;u==mxConstants.ALIGN_CENTER?M-=r/2:u==mxConstants.ALIGN_RIGHT&&(M-=r),"fill"!=m&&(c==mxConstants.ALIGN_MIDDLE?j-=o/2:c==mxConstants.ALIGN_BOTTOM&&(j-=o));var R=this.createClip(M*S.scale-2,j*S.scale-2,r*S.scale+4,o*S.scale+4);if(null!=this.defs?this.defs.appendChild(R):this.root.appendChild(R),mxClient.IS_CHROMEAPP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document)_.setAttribute("clip-path","url(#"+R.getAttribute("id")+")");else{var N=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");_.setAttribute("clip-path","url("+N+"#"+R.getAttribute("id")+")")}}var V=u==mxConstants.ALIGN_RIGHT?"end":u==mxConstants.ALIGN_CENTER?"middle":"start";"start"!=V&&_.setAttribute("text-anchor",V),(!this.styleEnabled||b!=mxConstants.DEFAULT_FONTSIZE)&&_.setAttribute("font-size",b*S.scale+"px"),D.length>0&&_.setAttribute("transform",D),S.alpha<1&&_.setAttribute("opacity",S.alpha);var O=a.split("\n"),F=Math.round(b*mxConstants.LINE_HEIGHT),G=b+(O.length-1)*F;j=t+b-1,c==mxConstants.ALIGN_MIDDLE?j-="fill"==m?o/2:(this.matchHtmlAlignment&&x&&o>0?Math.min(G,o):G)/2:c==mxConstants.ALIGN_BOTTOM&&(j-="fill"==m?o:(this.matchHtmlAlignment&&x&&o>0?Math.min(G,o):G)+1);for(var W=0;W<O.length;W++){if(O[W].length>0&&mxUtils.trim(O[W]).length>0){var q=this.createElement("text");q.setAttribute("x",this.format(e*S.scale)+this.textOffset),q.setAttribute("y",this.format(j*S.scale)+this.textOffset),mxUtils.write(q,O[W]),_.appendChild(q)}j+=F}this.root.appendChild(_),this.addTextBackground(_,a,e,t,r,"fill"==m?o:G,u,c,m)},mxSvgCanvas2D.prototype.updateFont=function(e){var t=this.state;e.setAttribute("fill",t.fontColor),(!this.styleEnabled||t.fontFamily!=mxConstants.DEFAULT_FONTFAMILY)&&e.setAttribute("font-family",t.fontFamily),(t.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&e.setAttribute("font-weight","bold"),(t.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&e.setAttribute("font-style","italic");var r=[];(t.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&r.push("underline"),(t.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&r.push("line-through"),r.length>0&&e.setAttribute("text-decoration",r.join(" "))},mxSvgCanvas2D.prototype.addTextBackground=function(e,t,r,o,a,u,c,f,m){var x=this.state;if(null!=x.fontBackgroundColor||null!=x.fontBorderColor){var v=null;if("fill"==m||"width"==m)c==mxConstants.ALIGN_CENTER?r-=a/2:c==mxConstants.ALIGN_RIGHT&&(r-=a),f==mxConstants.ALIGN_MIDDLE?o-=u/2:f==mxConstants.ALIGN_BOTTOM&&(o-=u),v=new mxRectangle((r+1)*x.scale,o*x.scale,(a-2)*x.scale,(u+2)*x.scale);else if(null!=e.getBBox&&this.root.ownerDocument==document)try{v=e.getBBox();var E=mxClient.IS_IE&&mxClient.IS_SVG;v=new mxRectangle(v.x,v.y+(E?0:1),v.width,v.height+(E?1:0))}catch(D){}if(null==v||0==v.width||0==v.height){var S=document.createElement("div");S.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?x.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,S.style.fontSize=x.fontSize+"px",S.style.fontFamily=x.fontFamily,S.style.whiteSpace="nowrap",S.style.position="absolute",S.style.visibility="hidden",S.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",S.style.zoom="1",(x.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(S.style.fontWeight="bold"),(x.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(S.style.fontStyle="italic"),t=mxUtils.htmlEntities(t,!1),S.innerHTML=t.replace(/\n/g,"<br/>"),document.body.appendChild(S),a=S.offsetWidth,u=S.offsetHeight,S.parentNode.removeChild(S),c==mxConstants.ALIGN_CENTER?r-=a/2:c==mxConstants.ALIGN_RIGHT&&(r-=a),f==mxConstants.ALIGN_MIDDLE?o-=u/2:f==mxConstants.ALIGN_BOTTOM&&(o-=u),v=new mxRectangle((r+1)*x.scale,(o+2)*x.scale,a*x.scale,(u+1)*x.scale)}if(null!=v){var b=this.createElement("rect");b.setAttribute("fill",x.fontBackgroundColor||"none"),b.setAttribute("stroke",x.fontBorderColor||"none"),b.setAttribute("x",Math.floor(v.x-1)),b.setAttribute("y",Math.floor(v.y-1)),b.setAttribute("width",Math.ceil(v.width+2)),b.setAttribute("height",Math.ceil(v.height));var _=null!=x.fontBorderColor?Math.max(1,this.format(x.scale)):0;b.setAttribute("stroke-width",_),this.root.ownerDocument==document&&1==mxUtils.mod(_,2)&&b.setAttribute("transform","translate(0.5, 0.5)"),e.insertBefore(b,e.firstChild)}}},mxSvgCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxSvgCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},__mxOutput.mxSvgCanvas2D=void 0!==mxSvgCanvas2D?mxSvgCanvas2D:void 0;var mxVmlCanvas2D=function(e){mxAbstractCanvas2D.call(this),this.root=e};function mxGuide(e,t){this.graph=e,this.setStates(t)}function mxShape(e){this.stencil=e,this.initStyles()}function mxStencil(e){this.desc=e,this.parseDescription(),this.parseConstraints()}mxUtils.extend(mxVmlCanvas2D,mxAbstractCanvas2D),mxVmlCanvas2D.prototype.node=null,mxVmlCanvas2D.prototype.textEnabled=!0,mxVmlCanvas2D.prototype.moveOp="m",mxVmlCanvas2D.prototype.lineOp="l",mxVmlCanvas2D.prototype.curveOp="c",mxVmlCanvas2D.prototype.closeOp="x",mxVmlCanvas2D.prototype.rotatedHtmlBackground="",mxVmlCanvas2D.prototype.vmlScale=1,mxVmlCanvas2D.prototype.createElement=function(e){return document.createElement(e)},mxVmlCanvas2D.prototype.createVmlElement=function(e){return this.createElement(mxClient.VML_PREFIX+":"+e)},mxVmlCanvas2D.prototype.addNode=function(e,t){var r=this.node,o=this.state;if(null!=r){if("shape"==r.nodeName){if(!(null!=this.path&&this.path.length>0))return;r.path=this.path.join(" ")+" e",r.style.width=this.root.style.width,r.style.height=this.root.style.height,r.coordsize=parseInt(r.style.width)+" "+parseInt(r.style.height)}r.strokeweight=this.format(Math.max(1,o.strokeWidth*o.scale/this.vmlScale))+"px",o.shadow&&this.root.appendChild(this.createShadow(r,e&&null!=o.fillColor,t&&null!=o.strokeColor)),t&&null!=o.strokeColor?(r.stroked="true",r.strokecolor=o.strokeColor):r.stroked="false",r.appendChild(this.createStroke()),e&&null!=o.fillColor?r.appendChild(this.createFill()):!this.pointerEvents||"shape"==r.nodeName&&this.path[this.path.length-1]!=this.closeOp?r.filled="false":r.appendChild(this.createTransparentFill()),this.root.appendChild(r)}},mxVmlCanvas2D.prototype.createTransparentFill=function(){var e=this.createVmlElement("fill");return e.src=mxClient.imageBasePath+"/transparent.gif",e.type="tile",e},mxVmlCanvas2D.prototype.createFill=function(){var e=this.state,t=this.createVmlElement("fill");if(t.color=e.fillColor,null!=e.gradientColor){t.type="gradient",t.method="none",t.color2=e.gradientColor;var r=180-e.rotation;e.gradientDirection==mxConstants.DIRECTION_WEST?r-=90+("x"==this.root.style.flip?180:0):e.gradientDirection==mxConstants.DIRECTION_EAST?r+=90+("x"==this.root.style.flip?180:0):e.gradientDirection==mxConstants.DIRECTION_NORTH?r-=180+("y"==this.root.style.flip?-180:0):r+="y"==this.root.style.flip?-180:0,("x"==this.root.style.flip||"y"==this.root.style.flip)&&(r*=-1),t.angle=mxUtils.mod(r,360),t.opacity=e.alpha*e.gradientFillAlpha*100+"%",t.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",e.alpha*e.gradientAlpha*100+"%")}else(e.alpha<1||e.fillAlpha<1)&&(t.opacity=e.alpha*e.fillAlpha*100+"%");return t},mxVmlCanvas2D.prototype.createStroke=function(){var e=this.state,t=this.createVmlElement("stroke");return t.endcap=e.lineCap||"flat",t.joinstyle=e.lineJoin||"miter",t.miterlimit=e.miterLimit||"10",(e.alpha<1||e.strokeAlpha<1)&&(t.opacity=e.alpha*e.strokeAlpha*100+"%"),e.dashed&&(t.dashstyle=this.getVmlDashStyle()),t},mxVmlCanvas2D.prototype.getVmlDashStyle=function(){var e="dash";if("string"==typeof this.state.dashPattern){var t=this.state.dashPattern.split(" ");t.length>0&&1==t[0]&&(e="0 2")}return e},mxVmlCanvas2D.prototype.createShadow=function(e,t,r){var o=this.state,a=-o.rotation*(Math.PI/180),u=Math.cos(a),c=Math.sin(a),f=o.shadowDx*o.scale,m=o.shadowDy*o.scale;"x"==this.root.style.flip?f*=-1:"y"==this.root.style.flip&&(m*=-1);var x=e.cloneNode(!0);return x.style.marginLeft=Math.round(f*u-m*c)+"px",x.style.marginTop=Math.round(f*c+m*u)+"px",8==document.documentMode&&(x.strokeweight=e.strokeweight,"shape"==e.nodeName&&(x.path=this.path.join(" ")+" e",x.style.width=this.root.style.width,x.style.height=this.root.style.height,x.coordsize=parseInt(e.style.width)+" "+parseInt(e.style.height))),r?(x.strokecolor=o.shadowColor,x.appendChild(this.createShadowStroke())):x.stroked="false",t?x.appendChild(this.createShadowFill()):x.filled="false",x},mxVmlCanvas2D.prototype.createShadowFill=function(){var e=this.createVmlElement("fill");return e.color=this.state.shadowColor,e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e},mxVmlCanvas2D.prototype.createShadowStroke=function(){var e=this.createStroke();return e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e},mxVmlCanvas2D.prototype.rotate=function(e,t,r,o,a){t&&r?e+=180:t?this.root.style.flip="x":r&&(this.root.style.flip="y"),(t?!r:r)&&(e*=-1),this.root.style.rotation=e,this.state.rotation=this.state.rotation+e,this.state.rotationCx=o,this.state.rotationCy=a},mxVmlCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createVmlElement("shape"),this.node.style.position="absolute"},mxVmlCanvas2D.prototype.quadTo=function(e,t,r,o){var a=this.state,u=(this.lastX+a.dx)*a.scale,c=(this.lastY+a.dy)*a.scale,f=(e+a.dx)*a.scale,m=(t+a.dy)*a.scale,x=(r+a.dx)*a.scale,v=(o+a.dy)*a.scale,S=c+2/3*(m-c),b=x+2/3*(f-x),_=v+2/3*(m-v);this.path.push("c "+this.format(u+2/3*(f-u))+" "+this.format(S)+" "+this.format(b)+" "+this.format(_)+" "+this.format(x)+" "+this.format(v)),this.lastX=x/a.scale-a.dx,this.lastY=v/a.scale-a.dy},mxVmlCanvas2D.prototype.createRect=function(e,t,r,o,a){var u=this.state,c=this.createVmlElement(e);return c.style.position="absolute",c.style.left=this.format((t+u.dx)*u.scale)+"px",c.style.top=this.format((r+u.dy)*u.scale)+"px",c.style.width=this.format(o*u.scale)+"px",c.style.height=this.format(a*u.scale)+"px",c},mxVmlCanvas2D.prototype.rect=function(e,t,r,o){this.node=this.createRect("rect",e,t,r,o)},mxVmlCanvas2D.prototype.roundrect=function(e,t,r,o,a,u){this.node=this.createRect("roundrect",e,t,r,o),this.node.setAttribute("arcsize",Math.max(100*a/r,100*u/o)+"%")},mxVmlCanvas2D.prototype.ellipse=function(e,t,r,o){this.node=this.createRect("oval",e,t,r,o)},mxVmlCanvas2D.prototype.image=function(e,t,r,o,a,u,c,f){var m=null;if(u){(m=this.createRect("rect",e,t,r,o)).stroked="false";var x=this.createVmlElement("fill");x.aspect=u?"atmost":"ignore",x.rotate="true",x.type="frame",x.src=a,m.appendChild(x)}else(m=this.createRect("image",e,t,r,o)).src=a;c&&f?m.style.rotation="180":c?m.style.flip="x":f&&(m.style.flip="y"),(this.state.alpha<1||this.state.fillAlpha<1)&&(m.style.filter+="alpha(opacity="+this.state.alpha*this.state.fillAlpha*100+")"),this.root.appendChild(m)},mxVmlCanvas2D.prototype.createDiv=function(e,t,r,o){var a=this.createElement("div"),u=this.state,c="";if(null!=u.fontBackgroundColor&&(c+="background-color:"+mxUtils.htmlEntities(u.fontBackgroundColor)+";"),null!=u.fontBorderColor&&(c+="border:1px solid "+mxUtils.htmlEntities(u.fontBorderColor)+";"),mxUtils.isNode(e))a.appendChild(e);else if("fill"!=o&&"width"!=o){var f=this.createElement("div");f.style.cssText=c,f.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",f.style.zoom="1",f.style.textDecoration="inherit",f.innerHTML=e,a.appendChild(f)}else a.style.cssText=c,a.innerHTML=e;var m=a.style;return m.fontSize=u.fontSize/this.vmlScale+"px",m.fontFamily=u.fontFamily,m.color=u.fontColor,m.verticalAlign="top",m.textAlign=t||"left",m.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?u.fontSize*mxConstants.LINE_HEIGHT/this.vmlScale+"px":mxConstants.LINE_HEIGHT,(u.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(m.fontWeight="bold"),(u.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(m.fontStyle="italic"),(u.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(m.textDecoration="underline"),a},mxVmlCanvas2D.prototype.text=function(e,t,r,o,a,u,c,f,m,x,v,E,S){if(this.textEnabled&&null!=a){var b=this.state;if("html"==m){if(null!=b.rotation){var _=this.rotatePoint(e,t,b.rotation,b.rotationCx,b.rotationCy);e=_.x,t=_.y}8!=document.documentMode||mxClient.IS_EM?(e*=b.scale,t*=b.scale):(e+=b.dx,t+=b.dy,"fill"!=x&&c==mxConstants.ALIGN_TOP&&(t-=1));var D=8!=document.documentMode||mxClient.IS_EM?this.createElement("div"):this.createVmlElement("group");D.style.position="absolute",D.style.display="inline",D.style.left=this.format(e)+"px",D.style.top=this.format(t)+"px",D.style.zoom=b.scale;var M=this.createElement("div");M.style.position="relative",M.style.display="inline";var R=mxUtils.getAlignmentAsPoint(u,c),N=R.x,V=R.y,O=this.createDiv(a,u,c,x),F=this.createElement("div");null!=S&&O.setAttribute("dir",S),f&&r>0?(v||(O.style.width=Math.round(r)+"px"),O.style.wordWrap=mxConstants.WORD_WRAP,O.style.whiteSpace="normal","break-word"==O.style.wordWrap&&null!=(G=O).firstChild&&"DIV"==G.firstChild.nodeName&&(G.firstChild.style.width="100%")):O.style.whiteSpace="nowrap";var j=b.rotation+(E||0);if(this.rotateHtml&&0!=j?(F.style.display="inline",F.style.zoom="1",F.appendChild(O),8!=document.documentMode||mxClient.IS_EM||"DIV"==this.root.nodeName?D.appendChild(F):(M.appendChild(F),D.appendChild(M))):8!=document.documentMode||mxClient.IS_EM?(O.style.display="inline",D.appendChild(O)):(M.appendChild(O),D.appendChild(M)),"DIV"!=this.root.nodeName){var Y=this.createVmlElement("rect");Y.stroked="false",Y.filled="false",Y.appendChild(D),this.root.appendChild(Y)}else this.root.appendChild(D);if(v?(O.style.overflow="hidden",O.style.width=Math.round(r)+"px",mxClient.IS_QUIRKS||(O.style.maxHeight=Math.round(o)+"px")):"fill"==x?(O.style.overflow="hidden",O.style.width=Math.max(0,r)+1+"px",O.style.height=Math.max(0,o)+1+"px"):"width"==x&&(O.style.overflow="hidden",O.style.width=Math.max(0,r)+1+"px",O.style.maxHeight=Math.max(0,o)+1+"px"),this.rotateHtml&&0!=j){var W=j*(Math.PI/180),q=parseFloat(parseFloat(Math.cos(W)).toFixed(8)),Z=parseFloat(parseFloat(Math.sin(-W)).toFixed(8));(W%=2*Math.PI)<0&&(W+=2*Math.PI),(W%=Math.PI)>Math.PI/2&&(W=Math.PI-W);var Q=Math.cos(W),K=Math.sin(W);8==document.documentMode&&!mxClient.IS_EM&&(O.style.display="inline-block",F.style.display="inline-block",M.style.display="inline-block"),O.style.visibility="hidden",O.style.position="absolute",document.body.appendChild(O);var ie=O;null!=ie.firstChild&&"DIV"==ie.firstChild.nodeName&&(ie=ie.firstChild);var G=ie.offsetWidth+3,U=ie.offsetHeight;v?(r=Math.min(r,G),U=Math.min(U,o)):r=G,f&&(O.style.width=r+"px"),mxClient.IS_QUIRKS&&(v||"width"==x)&&U>o&&(O.style.height=(U=o)+"px");var he=((o=U)-o*Q+r*-K)/2-Z*r*(N+.5)+q*o*(V+.5),je=(r-r*Q+o*-K)/2+q*r*(N+.5)+Z*o*(V+.5);if("group"==D.nodeName&&"DIV"==this.root.nodeName){var Oe=this.createElement("div");Oe.style.display="inline-block",Oe.style.position="absolute",Oe.style.left=this.format(e+(je-r/2)*b.scale)+"px",Oe.style.top=this.format(t+(he-o/2)*b.scale)+"px",D.parentNode.appendChild(Oe),Oe.appendChild(D)}else{var Me=8!=document.documentMode||mxClient.IS_EM?b.scale:1;D.style.left=this.format(e+(je-r/2)*Me)+"px",D.style.top=this.format(t+(he-o/2)*Me)+"px"}F.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+q+", M12="+Z+", M21="+-Z+", M22="+q+", sizingMethod='auto expand')",F.style.backgroundColor=this.rotatedHtmlBackground,this.state.alpha<1&&(F.style.filter+="alpha(opacity="+100*this.state.alpha+")"),F.appendChild(O),O.style.position="",O.style.visibility=""}else if(8!=document.documentMode||mxClient.IS_EM){O.style.verticalAlign="top",this.state.alpha<1&&(D.style.filter="alpha(opacity="+100*this.state.alpha+")");var Ce=O.parentNode;O.style.visibility="hidden",document.body.appendChild(O),r=O.offsetWidth,U=O.offsetHeight,mxClient.IS_QUIRKS&&v&&U>o&&(O.style.height=(U=o)+"px"),o=U,O.style.visibility="",Ce.appendChild(O),D.style.left=this.format(e+r*N*this.state.scale)+"px",D.style.top=this.format(t+o*V*this.state.scale)+"px"}else this.state.alpha<1&&(O.style.filter="alpha(opacity="+100*this.state.alpha+")"),M.style.left=100*N+"%",M.style.top=100*V+"%"}else this.plainText(e,t,r,o,mxUtils.htmlEntities(a,!1),u,c,f,m,x,v,E,S)}},mxVmlCanvas2D.prototype.plainText=function(e,t,r,o,a,u,c,f,m,x,v,E,S){var b=this.state;e=(e+b.dx)*b.scale,t=(t+b.dy)*b.scale;var _=this.createVmlElement("shape");_.style.width="1px",_.style.height="1px",_.stroked="false";var D=this.createVmlElement("fill");D.color=b.fontColor,D.opacity=100*b.alpha+"%",_.appendChild(D);var M=this.createVmlElement("path");M.textpathok="true",M.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0),_.appendChild(M);var R=this.createVmlElement("textpath");R.style.cssText="v-text-align:"+u,R.style.align=u,R.style.fontFamily=b.fontFamily,R.string=a,R.on="true";var N=b.fontSize*b.scale/this.vmlScale;R.style.fontSize=N+"px",(b.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(R.style.fontWeight="bold"),(b.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(R.style.fontStyle="italic"),(b.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(R.style.textDecoration="underline");var O=N+(a.split("\n").length-1)*N*mxConstants.LINE_HEIGHT,F=0,G=0;if(c==mxConstants.ALIGN_BOTTOM?G=-O/2:c!=mxConstants.ALIGN_MIDDLE&&(G=O/2),null!=E){_.style.rotation=E;var j=E*(Math.PI/180);F=Math.sin(j)*G,G=Math.cos(j)*G}_.appendChild(R),_.style.left=this.format(e-F)+"px",_.style.top=this.format(t+G)+"px",this.root.appendChild(_)},mxVmlCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxVmlCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxVmlCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},__mxOutput.mxVmlCanvas2D=void 0!==mxVmlCanvas2D?mxVmlCanvas2D:void 0,mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.rounded=!1,mxGuide.prototype.tolerance=2,mxGuide.prototype.setStates=function(e){this.states=e},mxGuide.prototype.isEnabledForEvent=function(e){return!0},mxGuide.prototype.getGuideTolerance=function(e){return e&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance},mxGuide.prototype.createGuideShape=function(e){var t=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return t.isDashed=!0,t},mxGuide.prototype.isStateIgnored=function(e){return!1},mxGuide.prototype.move=function(e,t,r,o){if(null!=this.states&&(this.horizontal||this.vertical)&&null!=e&&null!=t){let ie=function(he,je,Oe){var Me=!1;Oe&&Math.abs(he-R)<b?(t.x=he-e.getCenterX(),b=Math.abs(he-R),Me=!0):Oe||(Math.abs(he-D)<b?(t.x=he-e.x,b=Math.abs(he-D),Me=!0):Math.abs(he-M)<b&&(t.x=he-e.x-e.width,b=Math.abs(he-M),Me=!0)),Me&&(m=je,x=he,null==this.guideX&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),f=f||Me},U=function(he,je,Oe){var Me=!1;Oe&&Math.abs(he-O)<_?(t.y=he-e.getCenterY(),_=Math.abs(he-O),Me=!0):Oe||(Math.abs(he-N)<_?(t.y=he-e.y,_=Math.abs(he-N),Me=!0):Math.abs(he-V)<_&&(t.y=he-e.y-e.height,_=Math.abs(he-V),Me=!0)),Me&&(E=je,S=he,null==this.guideY&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),v=v||Me};var a=this.graph.getView().scale,u=this.getGuideTolerance(r)*a,c=e.clone();c.x+=t.x,c.y+=t.y;for(var f=!1,m=null,x=null,v=!1,E=null,S=null,b=u,_=u,D=c.x,M=c.x+c.width,R=c.getCenterX(),N=c.y,V=c.y+c.height,O=c.getCenterY(),F=0;F<this.states.length;F++){var G=this.states[F];null!=G&&!this.isStateIgnored(G)&&(this.horizontal&&(ie.call(this,G.getCenterX(),G,!0),ie.call(this,G.x,G,!1),ie.call(this,G.x+G.width,G,!1),null==G.cell&&ie.call(this,G.getCenterX(),G,!1)),this.vertical&&(U.call(this,G.getCenterY(),G,!0),U.call(this,G.y,G,!1),U.call(this,G.y+G.height,G,!1),null==G.cell&&U.call(this,G.getCenterY(),G,!1)))}this.graph.snapDelta(t,e,!r,f,v),t=this.getDelta(e,m,t.x,E,t.y);var j=this.graph.container;if(f||null==this.guideX){if(null!=this.guideX){var Y=null,W=null;null!=m&&null!=e&&(Y=Math.min(e.y+t.y-this.graph.panDy,m.y),W=Math.max(e.y+e.height+t.y-this.graph.panDy,m.y+m.height)),this.guideX.points=null!=Y&&null!=W?[new mxPoint(x,Y),new mxPoint(x,W)]:[new mxPoint(x,-this.graph.panDy),new mxPoint(x,j.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(m,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()}}else this.guideX.node.style.visibility="hidden";if(v||null==this.guideY){if(null!=this.guideY){var q=null,Z=null;null!=E&&null!=e&&(q=Math.min(e.x+t.x-this.graph.panDx,E.x),Z=Math.max(e.x+e.width+t.x-this.graph.panDx,E.x+E.width)),this.guideY.points=null!=q&&null!=Z?[new mxPoint(q,S),new mxPoint(Z,S)]:[new mxPoint(-this.graph.panDx,S),new mxPoint(j.scrollWidth-3-this.graph.panDx,S)],this.guideY.stroke=this.getGuideColor(E,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()}}else this.guideY.node.style.visibility="hidden"}return t},mxGuide.prototype.getDelta=function(e,t,r,o,a){var u=this.graph.view.scale;return(this.rounded||null!=t&&null==t.cell)&&(r=Math.round((e.x+r)/u)*u-e.x),(this.rounded||null!=o&&null==o.cell)&&(a=Math.round((e.y+a)/u)*u-e.y),new mxPoint(r,a)},mxGuide.prototype.getGuideColor=function(e,t){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(e){null!=this.guideX&&(this.guideX.node.style.visibility=e?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=e?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)},__mxOutput.mxGuide=void 0!==mxGuide?mxGuide:void 0,mxShape.prototype.dialect=null,mxShape.prototype.scale=1,mxShape.prototype.antiAlias=!0,mxShape.prototype.minSvgStrokeWidth=1,mxShape.prototype.bounds=null,mxShape.prototype.points=null,mxShape.prototype.node=null,mxShape.prototype.state=null,mxShape.prototype.style=null,mxShape.prototype.boundingBox=null,mxShape.prototype.stencil=null,mxShape.prototype.svgStrokeTolerance=8,mxShape.prototype.pointerEvents=!0,mxShape.prototype.svgPointerEvents="all",mxShape.prototype.shapePointerEvents=!1,mxShape.prototype.stencilPointerEvents=!1,mxShape.prototype.vmlScale=1,mxShape.prototype.outline=!1,mxShape.prototype.visible=!0,mxShape.prototype.useSvgBoundingBox=!1,mxShape.prototype.init=function(e){null==this.node&&(this.node=this.create(e),null!=e&&e.appendChild(this.node))},mxShape.prototype.initStyles=function(e){this.strokewidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1},mxShape.prototype.isParseVml=function(){return!0},mxShape.prototype.isHtmlAllowed=function(){return!1},mxShape.prototype.getSvgScreenOffset=function(){var e=this.stencil&&"inherit"!=this.stencil.strokewidth?Number(this.stencil.strokewidth):this.strokewidth;return 1==mxUtils.mod(Math.max(1,Math.round(e*this.scale)),2)?.5:0},mxShape.prototype.create=function(e){return null!=e&&null!=e.ownerSVGElement?this.createSvg(e):8==document.documentMode||!mxClient.IS_VML||this.dialect!=mxConstants.DIALECT_VML&&this.isHtmlAllowed()?this.createHtml(e):this.createVml(e)},mxShape.prototype.createSvg=function(){return document.createElementNS(mxConstants.NS_SVG,"g")},mxShape.prototype.createVml=function(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e},mxShape.prototype.createHtml=function(){var e=document.createElement("div");return e.style.position="absolute",e},mxShape.prototype.reconfigure=function(){this.redraw()},mxShape.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),"DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML?this.redrawShape():this.redrawHtmlShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)},mxShape.prototype.clear=function(){if(null!=this.node.ownerSVGElement)for(;null!=this.node.lastChild;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(null!=this.cursor?"cursor:"+this.cursor+";":""),this.node.innerHTML=""},mxShape.prototype.updateBoundsFromPoints=function(){var e=this.points;if(null!=e&&e.length>0&&null!=e[0]){this.bounds=new mxRectangle(Number(e[0].x),Number(e[0].y),1,1);for(var t=1;t<this.points.length;t++)null!=e[t]&&this.bounds.add(new mxRectangle(Number(e[t].x),Number(e[t].y),1,1))}},mxShape.prototype.getLabelBounds=function(e){var t=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),r=e;if(t!=mxConstants.DIRECTION_SOUTH&&t!=mxConstants.DIRECTION_NORTH&&null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()){var o=(r=r.clone()).width;r.width=r.height,r.height=o}var a=this.getLabelMargins(r);if(null!=a){var u="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,!1),c="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,!1);return null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(o=a.x,a.x=a.height,a.height=a.width,a.width=a.y,a.y=o,o=u,u=c,c=o),mxUtils.getDirectedBounds(e,a,this.style,u,c)}return e},mxShape.prototype.getLabelMargins=function(e){return null},mxShape.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&this.bounds.width>0&&this.bounds.height>0},mxShape.prototype.createVmlGroup=function(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e.style.width=this.node.style.width,e.style.height=this.node.style.height,e},mxShape.prototype.redrawShape=function(){var e=this.createCanvas();null!=e&&(e.pointerEvents=this.pointerEvents,this.beforePaint(e),this.paint(e),this.afterPaint(e),this.node!=e.root&&this.node.insertAdjacentHTML("beforeend",e.root.outerHTML),"DIV"==this.node.nodeName&&8==document.documentMode&&(this.node.style.filter="",mxUtils.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(e))},mxShape.prototype.createCanvas=function(){var e=null;return null!=this.node.ownerSVGElement?e=this.createSvgCanvas():mxClient.IS_VML&&(this.updateVmlContainer(),e=this.createVmlCanvas()),null!=e&&this.outline&&(e.setStrokeWidth(this.strokewidth),e.setStrokeColor(this.stroke),null!=this.isDashed&&e.setDashed(this.isDashed),e.setStrokeWidth=function(){},e.setStrokeColor=function(){},e.setFillColor=function(){},e.setGradient=function(){},e.setDashed=function(){},e.text=function(){}),e},mxShape.prototype.createSvgCanvas=function(){var e=new mxSvgCanvas2D(this.node,!1);e.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,e.pointerEventsValue=this.svgPointerEvents;var t=this.getSvgScreenOffset();return 0!=t?this.node.setAttribute("transform","translate("+t+","+t+")"):this.node.removeAttribute("transform"),e.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(e.format=function(r){return Math.round(parseFloat(r))}),e},mxShape.prototype.createVmlCanvas=function(){var e=8==document.documentMode&&this.isParseVml()?this.createVmlGroup():this.node,t=new mxVmlCanvas2D(e,!1);if(""!=e.tagUrn){var r=Math.max(1,Math.round(this.bounds.width)),o=Math.max(1,Math.round(this.bounds.height));e.coordsize=r*this.vmlScale+","+o*this.vmlScale,t.scale(this.vmlScale),t.vmlScale=this.vmlScale}var a=this.scale;return t.translate(-Math.round(this.bounds.x/a),-Math.round(this.bounds.y/a)),t},mxShape.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px";var e=Math.max(1,Math.round(this.bounds.width)),t=Math.max(1,Math.round(this.bounds.height));this.node.style.width=e+"px",this.node.style.height=t+"px",this.node.style.overflow="visible"},mxShape.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)},mxShape.prototype.updateHtmlFilters=function(e){var t="";if(this.opacity<100&&(t+="alpha(opacity="+this.opacity+")"),this.isShadow&&(t+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants.VML_SHADOWCOLOR+"')"),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var r=this.fill,o=this.gradient,a="0",u={east:0,south:1,west:2,north:3},c=null!=this.direction?u[this.direction]:0;if(null!=this.gradientDirection&&(c=mxUtils.mod(c+u[this.gradientDirection]-1,4)),1==c){a="1";var f=r;r=o,o=f}else 2==c?(f=r,r=o,o=f):3==c&&(a="1");t+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+r+"', endColorStr='"+o+"', gradientType='"+a+"')"}e.style.filter=t},mxShape.prototype.updateHtmlColors=function(e){var t=this.stroke;null!=t&&t!=mxConstants.NONE?(e.style.borderColor=t,this.isDashed?e.style.borderStyle="dashed":this.strokewidth>0&&(e.style.borderStyle="solid"),e.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):e.style.borderWidth="0px",null!=(t=this.outline?null:this.fill)&&t!=mxConstants.NONE?(e.style.backgroundColor=t,e.style.backgroundImage="none"):this.pointerEvents?e.style.backgroundColor="transparent":8==document.documentMode?mxUtils.addTransparentBackgroundFilter(e):this.setTransparentBackgroundImage(e)},mxShape.prototype.updateHtmlBounds=function(e){var t=document.documentMode>=9?0:Math.ceil(this.strokewidth*this.scale);e.style.borderWidth=Math.max(1,t)+"px",e.style.overflow="hidden",e.style.left=Math.round(this.bounds.x-t/2)+"px",e.style.top=Math.round(this.bounds.y-t/2)+"px","CSS1Compat"==document.compatMode&&(t=-t),e.style.width=Math.round(Math.max(0,this.bounds.width+t))+"px",e.style.height=Math.round(Math.max(0,this.bounds.height+t))+"px"},mxShape.prototype.destroyCanvas=function(e){if(e instanceof mxSvgCanvas2D){for(var t in e.gradients){var r=e.gradients[t];null!=r&&(r.mxRefCount=(r.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=e.gradients}},mxShape.prototype.beforePaint=function(e){},mxShape.prototype.afterPaint=function(e){},mxShape.prototype.paint=function(e){var t=!1;if(null!=e&&this.outline){var r=e.stroke;e.stroke=function(){t=!0,r.apply(this,arguments)};var o=e.fillAndStroke;e.fillAndStroke=function(){t=!0,o.apply(this,arguments)}}var a=this.scale,u=this.bounds.x/a,c=this.bounds.y/a,f=this.bounds.width/a,m=this.bounds.height/a;if(this.isPaintBoundsInverted()){var x=(f-m)/2;u+=x,c-=x;var v=f;f=m,m=v}this.updateTransform(e,u,c,f,m),this.configureCanvas(e,u,c,f,m);var E=null;if(null==this.stencil&&null==this.points&&this.shapePointerEvents||null!=this.stencil&&this.stencilPointerEvents){var S=this.createBoundingBox();if(this.dialect==mxConstants.DIALECT_SVG)E=this.createTransparentSvgRectangle(S.x,S.y,S.width,S.height),this.node.appendChild(E);else{var b=e.createRect("rect",S.x/a,S.y/a,S.width/a,S.height/a);b.appendChild(e.createTransparentFill()),b.stroked="false",e.root.appendChild(b)}}if(null!=this.stencil)this.stencil.drawShape(e,this,u,c,f,m);else if(e.setStrokeWidth(this.strokewidth),null!=this.points){for(var _=[],D=0;D<this.points.length;D++)null!=this.points[D]&&_.push(new mxPoint(this.points[D].x/a,this.points[D].y/a));this.paintEdgeShape(e,_)}else this.paintVertexShape(e,u,c,f,m);null!=E&&null!=e.state&&null!=e.state.transform&&E.setAttribute("transform",e.state.transform),null!=e&&this.outline&&!t&&(e.rect(u,c,f,m),e.stroke())},mxShape.prototype.configureCanvas=function(e,t,r,o,a){var u=null;if(null!=this.style&&(u=this.style.dashPattern),e.setAlpha(this.opacity/100),e.setFillAlpha(this.fillOpacity/100),e.setStrokeAlpha(this.strokeOpacity/100),null!=this.isShadow&&e.setShadow(this.isShadow),null!=this.isDashed&&e.setDashed(this.isDashed,null!=this.style&&1==mxUtils.getValue(this.style,mxConstants.STYLE_FIX_DASH,!1)),null!=u&&e.setDashPattern(u),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var c=this.getGradientBounds(e,t,r,o,a);e.setGradient(this.fill,this.gradient,c.x,c.y,c.width,c.height,this.gradientDirection)}else e.setFillColor(this.fill);e.setStrokeColor(this.stroke)},mxShape.prototype.getGradientBounds=function(e,t,r,o,a){return new mxRectangle(t,r,o,a)},mxShape.prototype.updateTransform=function(e,t,r,o,a){e.scale(this.scale),e.rotate(this.getShapeRotation(),this.flipH,this.flipV,t+o/2,r+a/2)},mxShape.prototype.paintVertexShape=function(e,t,r,o,a){this.paintBackground(e,t,r,o,a),(!this.outline||null==this.style||0==mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0))&&(e.setShadow(!1),this.paintForeground(e,t,r,o,a))},mxShape.prototype.paintBackground=function(e,t,r,o,a){},mxShape.prototype.paintForeground=function(e,t,r,o,a){},mxShape.prototype.paintEdgeShape=function(e,t){},mxShape.prototype.getArcSize=function(e,t){var r=0;if("1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0))r=Math.min(e/2,Math.min(t/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2));else{var o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100;r=Math.min(e*o,t*o)}return r},mxShape.prototype.paintGlassEffect=function(e,t,r,o,a,u){var c=Math.ceil(this.strokewidth/2),f=.4;e.setGradient("#ffffff","#ffffff",t,r,o,.6*a,"south",.9,.1),e.begin(),u+=2*c,this.isRounded?(e.moveTo(t-c+u,r-c),e.quadTo(t-c,r-c,t-c,r-c+u),e.lineTo(t-c,r+a*f),e.quadTo(t+.5*o,r+.7*a,t+o+c,r+a*f),e.lineTo(t+o+c,r-c+u),e.quadTo(t+o+c,r-c,t+o+c-u,r-c)):(e.moveTo(t-c,r-c),e.lineTo(t-c,r+a*f),e.quadTo(t+.5*o,r+.7*a,t+o+c,r+a*f),e.lineTo(t+o+c,r-c)),e.close(),e.fill()},mxShape.prototype.addPoints=function(e,t,r,o,a,u,c){if(null!=t&&t.length>0){c=null==c||c;var f=t[t.length-1];if(a&&r){var m=(t=t.slice())[0],x=new mxPoint(f.x+(m.x-f.x)/2,f.y+(m.y-f.y)/2);t.splice(0,0,x)}var v=t[0],E=1;for(c?e.moveTo(v.x,v.y):e.lineTo(v.x,v.y);E<(a?t.length:t.length-1);){var S=t[mxUtils.mod(E,t.length)],b=v.x-S.x,_=v.y-S.y;if(r&&(0!=b||0!=_)&&(null==u||mxUtils.indexOf(u,E-1)<0)){var D=Math.sqrt(b*b+_*_),M=b*Math.min(o,D/2)/D,R=_*Math.min(o,D/2)/D;e.lineTo(S.x+M,S.y+R);for(var O=t[mxUtils.mod(E+1,t.length)];E<t.length-2&&0==Math.round(O.x-S.x)&&0==Math.round(O.y-S.y);)O=t[mxUtils.mod(E+2,t.length)],E++;b=O.x-S.x,_=O.y-S.y,D=Math.max(1,Math.sqrt(b*b+_*_));var F=b*Math.min(o,D/2)/D,G=_*Math.min(o,D/2)/D,j=S.x+F,Y=S.y+G;e.quadTo(S.x,S.y,j,Y),S=new mxPoint(j,Y)}else e.lineTo(S.x,S.y);v=S,E++}a?e.close():e.lineTo(f.x,f.y)}},mxShape.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass},mxShape.prototype.apply=function(e){if(this.state=e,this.style=e.style,null!=this.style){if(this.fill=mxUtils.getValue(this.style,mxConstants.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils.getValue(this.style,mxConstants.STYLE_ROTATION,this.rotation),this.direction=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,this.direction),this.flipH=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),this.flipV=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),null!=this.stencil&&(this.flipH=1==mxUtils.getValue(this.style,"stencilFlipH",0)||this.flipH,this.flipV=1==mxUtils.getValue(this.style,"stencilFlipV",0)||this.flipV),this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH){var t=this.flipH;this.flipH=this.flipV,this.flipV=t}this.isShadow=1==mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW,this.isShadow),this.isDashed=1==mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,this.isDashed),this.isRounded=1==mxUtils.getValue(this.style,mxConstants.STYLE_ROUNDED,this.isRounded),this.glass=1==mxUtils.getValue(this.style,mxConstants.STYLE_GLASS,this.glass),this.fill==mxConstants.NONE&&(this.fill=null),this.gradient==mxConstants.NONE&&(this.gradient=null),this.stroke==mxConstants.NONE&&(this.stroke=null)}},mxShape.prototype.setCursor=function(e){null==e&&(e=""),this.cursor=e,null!=this.node&&(this.node.style.cursor=e)},mxShape.prototype.getCursor=function(){return this.cursor},mxShape.prototype.isRoundable=function(){return!1},mxShape.prototype.updateBoundingBox=function(){if(this.useSvgBoundingBox&&null!=this.node&&null!=this.node.ownerSVGElement)try{var e=this.node.getBBox();if(e.width>0&&e.height>0)return this.boundingBox=new mxRectangle(e.x,e.y,e.width,e.height),void this.boundingBox.grow(this.strokewidth*this.scale/2)}catch(o){}if(null!=this.bounds){var t=this.createBoundingBox();if(null!=t){this.augmentBoundingBox(t);var r=this.getShapeRotation();0!=r&&(t=mxUtils.getBoundingBox(t,r))}this.boundingBox=t}},mxShape.prototype.createBoundingBox=function(){var e=this.bounds.clone();return(null!=this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)||this.isPaintBoundsInverted())&&e.rotate90(),e},mxShape.prototype.augmentBoundingBox=function(e){this.isShadow&&(e.width+=Math.ceil(mxConstants.SHADOW_OFFSET_X*this.scale),e.height+=Math.ceil(mxConstants.SHADOW_OFFSET_Y*this.scale)),e.grow(this.strokewidth*this.scale/2)},mxShape.prototype.isPaintBoundsInverted=function(){return null==this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)},mxShape.prototype.getRotation=function(){return null!=this.rotation?this.rotation:0},mxShape.prototype.getTextRotation=function(){var e=this.getRotation();return 1!=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)&&(e+=mxText.prototype.verticalTextRotation),e},mxShape.prototype.getShapeRotation=function(){var e=this.getRotation();return null!=this.direction&&(this.direction==mxConstants.DIRECTION_NORTH?e+=270:this.direction==mxConstants.DIRECTION_WEST?e+=180:this.direction==mxConstants.DIRECTION_SOUTH&&(e+=90)),e},mxShape.prototype.createTransparentSvgRectangle=function(e,t,r,o){var a=document.createElementNS(mxConstants.NS_SVG,"rect");return a.setAttribute("x",e),a.setAttribute("y",t),a.setAttribute("width",r),a.setAttribute("height",o),a.setAttribute("fill","none"),a.setAttribute("stroke","none"),a.setAttribute("pointer-events","all"),a},mxShape.prototype.setTransparentBackgroundImage=function(e){e.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"},mxShape.prototype.releaseSvgGradients=function(e){if(null!=e)for(var t in e){var r=e[t];null!=r&&(r.mxRefCount=(r.mxRefCount||0)-1,0==r.mxRefCount&&null!=r.parentNode&&r.parentNode.removeChild(r))}},mxShape.prototype.destroy=function(){null!=this.node&&(mxEvent.release(this.node),null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null},__mxOutput.mxShape=void 0!==mxShape?mxShape:void 0,mxUtils.extend(mxStencil,mxShape),mxStencil.defaultLocalized=!1,mxStencil.allowEval=!1,mxStencil.prototype.desc=null,mxStencil.prototype.constraints=null,mxStencil.prototype.aspect=null,mxStencil.prototype.w0=null,mxStencil.prototype.h0=null,mxStencil.prototype.bgNode=null,mxStencil.prototype.fgNode=null,mxStencil.prototype.strokewidth=null,mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var e=this.desc.getAttribute("aspect");this.aspect=null!=e?e:"variable";var t=this.desc.getAttribute("strokewidth");this.strokewidth=null!=t?t:"1"},mxStencil.prototype.parseConstraints=function(){var e=this.desc.getElementsByTagName("connections")[0];if(null!=e){var t=mxUtils.getChildNodes(e);if(null!=t&&t.length>0){this.constraints=[];for(var r=0;r<t.length;r++)this.constraints.push(this.parseConstraint(t[r]))}}},mxStencil.prototype.parseConstraint=function(e){var t=Number(e.getAttribute("x")),r=Number(e.getAttribute("y")),o="1"==e.getAttribute("perimeter"),a=e.getAttribute("name");return new mxConnectionConstraint(new mxPoint(t,r),o,a)},mxStencil.prototype.evaluateTextAttribute=function(e,t,r){var o=this.evaluateAttribute(e,t,r),a=e.getAttribute("localized");return(mxStencil.defaultLocalized&&null==a||"1"==a)&&(o=mxResources.get(o)),o},mxStencil.prototype.evaluateAttribute=function(e,t,r){var o=e.getAttribute(t);if(null==o){var a=mxUtils.getTextContent(e);if(null!=a&&mxStencil.allowEval){var u=mxUtils.eval(a);"function"==typeof u&&(o=u(r))}}return o},mxStencil.prototype.drawShape=function(e,t,r,o,a,u){var c=e.states.slice(),f=mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,null),m=this.computeAspect(t.style,r,o,a,u,f),x=Math.min(m.width,m.height),v="inherit"==this.strokewidth?Number(mxUtils.getNumber(t.style,mxConstants.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*x;e.setStrokeWidth(v),null!=t.style&&"1"==mxUtils.getValue(t.style,mxConstants.STYLE_POINTER_EVENTS,"0")&&(e.setStrokeColor(mxConstants.NONE),e.rect(r,o,a,u),e.stroke(),e.setStrokeColor(t.stroke)),this.drawChildren(e,t,r,o,a,u,this.bgNode,m,!1,!0),this.drawChildren(e,t,r,o,a,u,this.fgNode,m,!0,!t.outline||null==t.style||0==mxUtils.getValue(t.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)),e.states.length!=c.length&&(e.states=c)},mxStencil.prototype.drawChildren=function(e,t,r,o,a,u,c,f,m,x){if(null!=c&&a>0&&u>0)for(var v=c.firstChild;null!=v;)v.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(e,t,v,f,m,x),v=v.nextSibling},mxStencil.prototype.computeAspect=function(e,t,r,o,a,u){var c=t,f=r,m=o/this.w0,x=a/this.h0,v=u==mxConstants.DIRECTION_NORTH||u==mxConstants.DIRECTION_SOUTH;if(v){x=o/this.h0,m=a/this.w0;var E=(o-a)/2;c+=E,f-=E}return"fixed"==this.aspect&&(m=x=Math.min(m,x),v?(c+=(a-this.w0*m)/2,f+=(o-this.h0*x)/2):(c+=(o-this.w0*m)/2,f+=(a-this.h0*x)/2)),new mxRectangle(c,f,m,x)},mxStencil.prototype.drawNode=function(e,t,r,o,a,u){var c=r.nodeName,f=o.x,m=o.y,x=o.width,v=o.height,E=Math.min(x,v);if("save"==c)e.save();else if("restore"==c)e.restore();else if(u){if("path"==c){e.begin();var S=!0;if("1"==r.getAttribute("rounded")){S=!1;for(var b=Number(r.getAttribute("arcSize")),_=0,D=[],M=r.firstChild;null!=M;){if(M.nodeType==mxConstants.NODETYPE_ELEMENT){var R=M.nodeName;if("move"!=R&&"line"!=R){S=!0;break}("move"==R||0==D.length)&&D.push([]),D[D.length-1].push(new mxPoint(f+Number(M.getAttribute("x"))*x,m+Number(M.getAttribute("y"))*v)),_++}M=M.nextSibling}if(!S&&_>0)for(var N=0;N<D.length;N++){var V=!1,O=D[N][0],F=D[N][D[N].length-1];O.x==F.x&&O.y==F.y&&(D[N].pop(),V=!0),this.addPoints(e,D[N],!0,b,V)}else S=!0}if(S)for(M=r.firstChild;null!=M;)M.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(e,t,M,o,a,u),M=M.nextSibling}else if("close"==c)e.close();else if("move"==c)e.moveTo(f+Number(r.getAttribute("x"))*x,m+Number(r.getAttribute("y"))*v);else if("line"==c)e.lineTo(f+Number(r.getAttribute("x"))*x,m+Number(r.getAttribute("y"))*v);else if("quad"==c)e.quadTo(f+Number(r.getAttribute("x1"))*x,m+Number(r.getAttribute("y1"))*v,f+Number(r.getAttribute("x2"))*x,m+Number(r.getAttribute("y2"))*v);else if("curve"==c)e.curveTo(f+Number(r.getAttribute("x1"))*x,m+Number(r.getAttribute("y1"))*v,f+Number(r.getAttribute("x2"))*x,m+Number(r.getAttribute("y2"))*v,f+Number(r.getAttribute("x3"))*x,m+Number(r.getAttribute("y3"))*v);else if("arc"==c)e.arcTo(Number(r.getAttribute("rx"))*x,Number(r.getAttribute("ry"))*v,Number(r.getAttribute("x-axis-rotation")),Number(r.getAttribute("large-arc-flag")),Number(r.getAttribute("sweep-flag")),f+Number(r.getAttribute("x"))*x,m+Number(r.getAttribute("y"))*v);else if("rect"==c)e.rect(f+Number(r.getAttribute("x"))*x,m+Number(r.getAttribute("y"))*v,Number(r.getAttribute("w"))*x,Number(r.getAttribute("h"))*v);else if("roundrect"==c){var G=Number(r.getAttribute("arcsize"));0==G&&(G=100*mxConstants.RECTANGLE_ROUNDING_FACTOR);var j=Number(r.getAttribute("w"))*x,Y=Number(r.getAttribute("h"))*v,W=Number(G)/100,q=Math.min(j*W,Y*W);e.roundrect(f+Number(r.getAttribute("x"))*x,m+Number(r.getAttribute("y"))*v,j,Y,q,q)}else if("ellipse"==c)e.ellipse(f+Number(r.getAttribute("x"))*x,m+Number(r.getAttribute("y"))*v,Number(r.getAttribute("w"))*x,Number(r.getAttribute("h"))*v);else if("image"==c){if(!t.outline){var Z=this.evaluateAttribute(r,"src",t);e.image(f+Number(r.getAttribute("x"))*x,m+Number(r.getAttribute("y"))*v,Number(r.getAttribute("w"))*x,Number(r.getAttribute("h"))*v,Z,!1,"1"==r.getAttribute("flipH"),"1"==r.getAttribute("flipV"))}}else if("text"==c){if(!t.outline){var Q=this.evaluateTextAttribute(r,"str",t),K="1"==r.getAttribute("vertical")?-90:0;if("0"==r.getAttribute("align-shape")){var ie=t.rotation,U=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPH,0),he=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPV,0);U&&he?K-=ie:U||he?K+=ie:K-=ie}K-=r.getAttribute("rotation"),e.text(f+Number(r.getAttribute("x"))*x,m+Number(r.getAttribute("y"))*v,0,0,Q,r.getAttribute("align")||"left",r.getAttribute("valign")||"top",!1,"",null,!1,K)}}else if("include-shape"==c){var je=mxStencilRegistry.getStencil(r.getAttribute("name"));if(null!=je){var Oe=f+Number(r.getAttribute("x"))*x,Me=m+Number(r.getAttribute("y"))*v;j=Number(r.getAttribute("w"))*x,Y=Number(r.getAttribute("h"))*v,je.drawShape(e,t,Oe,Me,j,Y)}}else if("fillstroke"==c)e.fillAndStroke();else if("fill"==c)e.fill();else if("stroke"==c)e.stroke();else if("strokewidth"==c){var Ce="1"==r.getAttribute("fixed")?1:E;e.setStrokeWidth(Number(r.getAttribute("width"))*Ce)}else if("dashed"==c)e.setDashed("1"==r.getAttribute("dashed"));else if("dashpattern"==c){var et=r.getAttribute("pattern");if(null!=et){var tt=et.split(" "),Ae=[];for(N=0;N<tt.length;N++)tt[N].length>0&&Ae.push(Number(tt[N])*E);et=Ae.join(" "),e.setDashPattern(et)}}else"strokecolor"==c?e.setStrokeColor(r.getAttribute("color")):"linecap"==c?e.setLineCap(r.getAttribute("cap")):"linejoin"==c?e.setLineJoin(r.getAttribute("join")):"miterlimit"==c?e.setMiterLimit(Number(r.getAttribute("limit"))):"fillcolor"==c?e.setFillColor(r.getAttribute("color")):"alpha"==c||"fillalpha"==c||"strokealpha"==c?e.setAlpha(r.getAttribute("alpha")):"fontcolor"==c?e.setFontColor(r.getAttribute("color")):"fontstyle"==c?e.setFontStyle(r.getAttribute("style")):"fontfamily"==c?e.setFontFamily(r.getAttribute("family")):"fontsize"==c&&e.setFontSize(Number(r.getAttribute("size"))*E);a&&("fillstroke"==c||"fill"==c||"stroke"==c)&&(a=!1,e.setShadow(!1))}},__mxOutput.mxStencil=void 0!==mxStencil?mxStencil:void 0;var mxStencilRegistry={stencils:{},addStencil:function(e,t){mxStencilRegistry.stencils[e]=t},getStencil:function(e){return mxStencilRegistry.stencils[e]}};__mxOutput.mxStencilRegistry=void 0!==mxStencilRegistry?mxStencilRegistry:void 0;var mxMarker={markers:[],addMarker:function(e,t){mxMarker.markers[e]=t},createMarker:function(e,t,r,o,a,u,c,f,m,x){var v=mxMarker.markers[r];return null!=v?v(e,t,r,o,a,u,c,f,m,x):null}};function mxActor(e,t,r,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1}function mxCloud(e,t,r,o){mxActor.call(this),this.bounds=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1}function mxRectangleShape(e,t,r,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1}function mxEllipse(e,t,r,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1}function mxDoubleEllipse(e,t,r,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1}function mxRhombus(e,t,r,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1}function mxPolyline(e,t,r){mxShape.call(this),this.points=e,this.stroke=t,this.strokewidth=null!=r?r:1}function mxArrow(e,t,r,o,a,u,c){mxShape.call(this),this.points=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1,this.arrowWidth=null!=a?a:mxConstants.ARROW_WIDTH,this.spacing=null!=u?u:mxConstants.ARROW_SPACING,this.endSize=null!=c?c:mxConstants.ARROW_SIZE}function mxArrowConnector(e,t,r,o,a,u,c){mxShape.call(this),this.points=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1,this.arrowWidth=null!=a?a:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=u?u:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}function mxText(e,t,r,o,a,u,c,f,m,x,v,E,S,b,_,D,M,R,N,V,O){mxShape.call(this),this.value=e,this.bounds=t,this.color=null!=a?a:"black",this.align=null!=r?r:mxConstants.ALIGN_CENTER,this.valign=null!=o?o:mxConstants.ALIGN_MIDDLE,this.family=null!=u?u:mxConstants.DEFAULT_FONTFAMILY,this.size=null!=c?c:mxConstants.DEFAULT_FONTSIZE,this.fontStyle=null!=f?f:mxConstants.DEFAULT_FONTSTYLE,this.spacing=parseInt(m||2),this.spacingTop=this.spacing+parseInt(x||0),this.spacingRight=this.spacing+parseInt(v||0),this.spacingBottom=this.spacing+parseInt(E||0),this.spacingLeft=this.spacing+parseInt(S||0),this.horizontal=null==b||b,this.background=_,this.border=D,this.wrap=null!=M&&M,this.clipped=null!=R&&R,this.overflow=null!=N?N:"visible",this.labelPadding=null!=V?V:0,this.textDirection=O,this.rotation=0,this.updateMargin()}function mxTriangle(){mxActor.call(this)}function mxHexagon(){mxActor.call(this)}function mxLine(e,t,r,o){mxShape.call(this),this.bounds=e,this.stroke=t,this.strokewidth=null!=r?r:1,this.vertical=null!=o?o:this.vertical}function mxImageShape(e,t,r,o,a){mxShape.call(this),this.bounds=e,this.image=t,this.fill=r,this.stroke=o,this.strokewidth=null!=a?a:1,this.shadow=!1}function mxLabel(e,t,r,o){mxRectangleShape.call(this,e,t,r,o)}function mxCylinder(e,t,r,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1}function mxConnector(e,t,r){mxPolyline.call(this,e,t,r)}function mxSwimlane(e,t,r,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=r,this.strokewidth=null!=o?o:1}function mxGraphLayout(e){this.graph=e}function WeightedCellSorter(e,t){this.cell=e,this.weightedValue=t}function mxStackLayout(e,t,r,o,a,u){mxGraphLayout.call(this,e),this.horizontal=null==t||t,this.spacing=null!=r?r:0,this.x0=null!=o?o:0,this.y0=null!=a?a:0,this.border=null!=u?u:0}function mxPartitionLayout(e,t,r,o){mxGraphLayout.call(this,e),this.horizontal=null==t||t,this.spacing=r||0,this.border=o||0}function mxCompactTreeLayout(e,t,r){mxGraphLayout.call(this,e),this.horizontal=null==t||t,this.invert=null!=r&&r}function mxRadialTreeLayout(e){mxCompactTreeLayout.call(this,e,!1)}function mxFastOrganicLayout(e){mxGraphLayout.call(this,e)}function mxCircleLayout(e,t){mxGraphLayout.call(this,e),this.radius=null!=t?t:100}function mxParallelEdgeLayout(e){mxGraphLayout.call(this,e)}function mxCompositeLayout(e,t,r){mxGraphLayout.call(this,e),this.layouts=t,this.master=r}function mxEdgeLabelLayout(e,t){mxGraphLayout.call(this,e)}function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}function mxGraphHierarchyNode(e){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=e,this.id=mxObjectIdentity.get(e),this.connectsAsTarget=[],this.connectsAsSource=[]}function mxGraphHierarchyEdge(e){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=e,this.ids=[];for(var t=0;t<e.length;t++)this.ids.push(mxObjectIdentity.get(e[t]))}function mxGraphHierarchyModel(e,t,r,o,a){e.getGraph(),this.tightenToSource=a,this.roots=r,this.parent=o,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var c=[];null==t&&(t=this.graph.getChildVertices(o)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,t,c);for(var f=0;f<t.length;f++){for(var m=c[f].connectsAsSource,x=0;x<m.length;x++){var v=m[x],E=v.edges;if(null!=E&&E.length>0){var S=E[0],b=e.getVisibleTerminal(S,!1),_=this.vertexMapper.get(b);c[f]==_&&(b=e.getVisibleTerminal(S,!0),_=this.vertexMapper.get(b)),null!=_&&c[f]!=_&&(v.target=_,0==_.connectsAsTarget.length&&(_.connectsAsTarget=[]),mxUtils.indexOf(_.connectsAsTarget,v)<0&&_.connectsAsTarget.push(v))}}c[f].temp[0]=1}}function mxSwimlaneModel(e,t,r,o,a){e.getGraph(),this.tightenToSource=a,this.roots=r,this.parent=o,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var c=[];null==t&&(t=this.graph.getChildVertices(o)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,t,c);for(var f=0;f<t.length;f++){for(var m=c[f].connectsAsSource,x=0;x<m.length;x++){var v=m[x],E=v.edges;if(null!=E&&E.length>0){var S=E[0],b=e.getVisibleTerminal(S,!1),_=this.vertexMapper.get(b);c[f]==_&&(b=e.getVisibleTerminal(S,!0),_=this.vertexMapper.get(b)),null!=_&&c[f]!=_&&(v.target=_,0==_.connectsAsTarget.length&&(_.connectsAsTarget=[]),mxUtils.indexOf(_.connectsAsTarget,v)<0&&_.connectsAsTarget.push(v))}}c[f].temp[0]=1}}function mxHierarchicalLayoutStage(){}function mxMedianHybridCrossingReduction(e){this.layout=e}function MedianCellSorter(){}function mxMinimumCycleRemover(e){this.layout=e}function mxCoordinateAssignment(e,t,r,o,a,u){this.layout=e,this.intraCellSpacing=t,this.interRankCellSpacing=r,this.orientation=o,this.initialX=a,this.parallelEdgeSpacing=u}function mxSwimlaneOrdering(e){this.layout=e}function mxHierarchicalLayout(e,t,r){mxGraphLayout.call(this,e),this.orientation=null!=t?t:mxConstants.DIRECTION_NORTH,this.deterministic=null==r||r}(function(){function e(o){return o=null!=o?o:2,function(a,u,c,f,m,x,v,E,S,b){var _=m*S*1.118,D=x*S*1.118;m*=v+S,x*=v+S;var M=f.clone();M.x-=_,M.y-=D;var R=c!=mxConstants.ARROW_CLASSIC&&c!=mxConstants.ARROW_CLASSIC_THIN?1:3/4;return f.x+=-m*R-_,f.y+=-x*R-D,function(){a.begin(),a.moveTo(M.x,M.y),a.lineTo(M.x-m-x/o,M.y-x+m/o),(c==mxConstants.ARROW_CLASSIC||c==mxConstants.ARROW_CLASSIC_THIN)&&a.lineTo(M.x-3*m/4,M.y-3*x/4),a.lineTo(M.x+x/o-m,M.y-x-m/o),a.close(),b?a.fillAndStroke():a.stroke()}}}function t(o){return o=null!=o?o:2,function(a,u,c,f,m,x,v,E,S,b){var _=m*S*1.118,D=x*S*1.118;m*=v+S,x*=v+S;var M=f.clone();return M.x-=_,M.y-=D,f.x+=2*-_,f.y+=2*-D,function(){a.begin(),a.moveTo(M.x-m-x/o,M.y-x+m/o),a.lineTo(M.x,M.y),a.lineTo(M.x+x/o-m,M.y-x-m/o),a.stroke()}}}function r(o,a,u,c,f,m,x,v,E,S){var b=u==mxConstants.ARROW_DIAMOND?.7071:.9862,_=f*E*b,D=m*E*b;f*=x+E,m*=x+E;var M=c.clone();M.x-=_,M.y-=D,c.x+=-f-_,c.y+=-m-D;var R=u==mxConstants.ARROW_DIAMOND?2:3.4;return function(){o.begin(),o.moveTo(M.x,M.y),o.lineTo(M.x-f/2-m/R,M.y+f/R-m/2),o.lineTo(M.x-f,M.y-m),o.lineTo(M.x-f/2+m/R,M.y-m/2-f/R),o.close(),S?o.fillAndStroke():o.stroke()}}mxMarker.addMarker("classic",e(2)),mxMarker.addMarker("classicThin",e(3)),mxMarker.addMarker("block",e(2)),mxMarker.addMarker("blockThin",e(3)),mxMarker.addMarker("open",t(2)),mxMarker.addMarker("openThin",t(3)),mxMarker.addMarker("oval",function(o,a,u,c,f,m,x,v,E,S){var b=x/2,_=c.clone();return c.x-=f*b,c.y-=m*b,function(){o.ellipse(_.x-b,_.y-b,x,x),S?o.fillAndStroke():o.stroke()}}),mxMarker.addMarker("diamond",r),mxMarker.addMarker("diamondThin",r)})(),__mxOutput.mxMarker=void 0!==mxMarker?mxMarker:void 0,mxUtils.extend(mxActor,mxShape),mxActor.prototype.paintVertexShape=function(e,t,r,o,a){e.translate(t,r),e.begin(),this.redrawPath(e,t,r,o,a),e.fillAndStroke()},mxActor.prototype.redrawPath=function(e,t,r,o,a){var u=o/3;e.moveTo(0,a),e.curveTo(0,3*a/5,0,2*a/5,o/2,2*a/5),e.curveTo(o/2-u,2*a/5,o/2-u,0,o/2,0),e.curveTo(o/2+u,0,o/2+u,2*a/5,o/2,2*a/5),e.curveTo(o,2*a/5,o,3*a/5,o,a),e.close()},__mxOutput.mxActor=void 0!==mxActor?mxActor:void 0,mxUtils.extend(mxCloud,mxActor),mxCloud.prototype.redrawPath=function(e,t,r,o,a){e.moveTo(.25*o,.25*a),e.curveTo(.05*o,.25*a,0,.5*a,.16*o,.55*a),e.curveTo(0,.66*a,.18*o,.9*a,.31*o,.8*a),e.curveTo(.4*o,a,.7*o,a,.8*o,.8*a),e.curveTo(o,.8*a,o,.6*a,.875*o,.5*a),e.curveTo(o,.3*a,.8*o,.1*a,.625*o,.2*a),e.curveTo(.5*o,.05*a,.3*o,.05*a,.25*o,.25*a),e.close()},__mxOutput.mxCloud=void 0!==mxCloud?mxCloud:void 0,mxUtils.extend(mxRectangleShape,mxShape),mxRectangleShape.prototype.isHtmlAllowed=function(){var e=!0;return null!=this.style&&(e="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!this.isRounded&&!this.glass&&0==this.rotation&&(e||null!=this.fill&&this.fill!=mxConstants.NONE)},mxRectangleShape.prototype.paintBackground=function(e,t,r,o,a){var u=!0;if(null!=this.style&&(u="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),u||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE){if(!u&&(null==this.fill||this.fill==mxConstants.NONE)&&(e.pointerEvents=!1),this.isRounded){var c=0;if("1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0))c=Math.min(o/2,Math.min(a/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2));else{var f=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100;c=Math.min(o*f,a*f)}e.roundrect(t,r,o,a,c,c)}else e.rect(t,r,o,a);e.fillAndStroke()}},mxRectangleShape.prototype.isRoundable=function(e,t,r,o,a){return!0},mxRectangleShape.prototype.paintForeground=function(e,t,r,o,a){this.glass&&!this.outline&&null!=this.fill&&this.fill!=mxConstants.NONE&&this.paintGlassEffect(e,t,r,o,a,this.getArcSize(o+this.strokewidth,a+this.strokewidth))},__mxOutput.mxRectangleShape=void 0!==mxRectangleShape?mxRectangleShape:void 0,mxUtils.extend(mxEllipse,mxShape),mxEllipse.prototype.paintVertexShape=function(e,t,r,o,a){e.ellipse(t,r,o,a),e.fillAndStroke()},__mxOutput.mxEllipse=void 0!==mxEllipse?mxEllipse:void 0,mxUtils.extend(mxDoubleEllipse,mxShape),mxDoubleEllipse.prototype.vmlScale=10,mxDoubleEllipse.prototype.paintBackground=function(e,t,r,o,a){e.ellipse(t,r,o,a),e.fillAndStroke()},mxDoubleEllipse.prototype.paintForeground=function(e,t,r,o,a){if(!this.outline){var u=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(o/5,a/5)));a-=2*u,(o-=2*u)>0&&a>0&&e.ellipse(t+=u,r+=u,o,a),e.stroke()}},mxDoubleEllipse.prototype.getLabelBounds=function(e){var t=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(e.width/5/this.scale,e.height/5/this.scale)))*this.scale;return new mxRectangle(e.x+t,e.y+t,e.width-2*t,e.height-2*t)},__mxOutput.mxDoubleEllipse=void 0!==mxDoubleEllipse?mxDoubleEllipse:void 0,mxUtils.extend(mxRhombus,mxShape),mxRhombus.prototype.isRoundable=function(){return!0},mxRhombus.prototype.paintVertexShape=function(e,t,r,o,a){var u=o/2,c=a/2,f=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,[new mxPoint(t+u,r),new mxPoint(t+o,r+c),new mxPoint(t+u,r+a),new mxPoint(t,r+c)],this.isRounded,f,!0),e.fillAndStroke()},__mxOutput.mxRhombus=void 0!==mxRhombus?mxRhombus:void 0,mxUtils.extend(mxPolyline,mxShape),mxPolyline.prototype.getRotation=function(){return 0},mxPolyline.prototype.getShapeRotation=function(){return 0},mxPolyline.prototype.isPaintBoundsInverted=function(){return!1},mxPolyline.prototype.paintEdgeShape=function(e,t){var r=e.pointerEventsValue;e.pointerEventsValue="stroke",null==this.style||1!=this.style[mxConstants.STYLE_CURVED]?this.paintLine(e,t,this.isRounded):this.paintCurvedLine(e,t),e.pointerEventsValue=r},mxPolyline.prototype.paintLine=function(e,t,r){var o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,t,r,o,!1),e.stroke()},mxPolyline.prototype.paintCurvedLine=function(e,t){e.begin();var r=t[0],o=t.length;e.moveTo(r.x,r.y);for(var a=1;a<o-2;a++){var f,m;e.quadTo((f=t[a]).x,f.y,(f.x+(m=t[a+1]).x)/2,(f.y+m.y)/2)}e.quadTo((f=t[o-2]).x,f.y,(m=t[o-1]).x,m.y),e.stroke()},__mxOutput.mxPolyline=void 0!==mxPolyline?mxPolyline:void 0,mxUtils.extend(mxArrow,mxShape),mxArrow.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var t=Math.max(this.arrowWidth,this.endSize);e.grow((t/2+this.strokewidth)*this.scale)},mxArrow.prototype.paintEdgeShape=function(e,t){var r=mxConstants.ARROW_SPACING,o=mxConstants.ARROW_WIDTH,a=mxConstants.ARROW_SIZE,u=t[0],c=t[t.length-1],f=c.x-u.x,m=c.y-u.y,x=Math.sqrt(f*f+m*m),v=x-2*r-a,E=f/x,S=m/x,D=o*S/3,M=-o*E/3,R=u.x-D/2+r*E,N=u.y-M/2+r*S,V=R+D,O=N+M,F=V+v*E,G=O+v*S,j=F+D,Y=G+M,W=j-3*D,q=Y-3*M;e.begin(),e.moveTo(R,N),e.lineTo(V,O),e.lineTo(F,G),e.lineTo(j,Y),e.lineTo(c.x-r*E,c.y-r*S),e.lineTo(W,q),e.lineTo(W+D,q+M),e.close(),e.fillAndStroke()},__mxOutput.mxArrow=void 0!==mxArrow?mxArrow:void 0,mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.isRoundable=function(){return!0},mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var t=this.getEdgeWidth();this.isMarkerStart()&&(t=Math.max(t,this.getStartArrowWidth())),this.isMarkerEnd()&&(t=Math.max(t,this.getEndArrowWidth())),e.grow((t/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(e,t){var r=this.strokewidth;this.outline&&(r=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth)));for(var o=this.getStartArrowWidth()+r,a=this.getEndArrowWidth()+r,u=this.outline?this.getEdgeWidth()+r:this.getEdgeWidth(),c=this.isOpenEnded(),f=this.isMarkerStart(),m=this.isMarkerEnd(),x=c?0:this.arrowSpacing+r/2,v=this.startSize+r,E=this.endSize+r,S=this.isArrowRounded(),b=t[t.length-1],_=1;_<t.length-1&&t[_].x==t[0].x&&t[_].y==t[0].y;)_++;var D=t[_].x-t[0].x,M=t[_].y-t[0].y,R=Math.sqrt(D*D+M*M);if(0!=R){var V,G,N=D/R,O=N,F=M/R,j=F,Y=u*F,W=-u*N,q=[];S?e.setLineJoin("round"):t.length>2&&e.setMiterLimit(1.42),e.begin();var Z=N,Q=F;if(f&&!c)this.paintMarker(e,t[0].x,t[0].y,N,F,v,o,u,x,!0);else{var K=t[0].x+Y/2+x*N,ie=t[0].y+W/2+x*F,U=t[0].x-Y/2+x*N,he=t[0].y-W/2+x*F;c?(e.moveTo(K,ie),q.push(function(){e.lineTo(U,he)})):(e.moveTo(U,he),e.lineTo(K,ie))}for(var je=0,Oe=0,Me=0,Ce=0;Ce<t.length-2;Ce++){var et=mxUtils.relativeCcw(t[Ce].x,t[Ce].y,t[Ce+1].x,t[Ce+1].y,t[Ce+2].x,t[Ce+2].y);if(je=t[Ce+2].x-t[Ce+1].x,Oe=t[Ce+2].y-t[Ce+1].y,0!=(Me=Math.sqrt(je*je+Oe*Oe))){O=je/Me,j=Oe/Me;var Ae=Math.max(Math.sqrt((N*O+F*j+1)/2),.04);V=N+O,G=F+j;var qe=Math.sqrt(V*V+G*G);if(0!=qe){V/=qe,G/=qe;var un=Math.max(Ae,Math.min(this.strokewidth/200+.04,.35)),Lt=0!=et&&S?Math.max(.1,un):Math.max(Ae,.06),dt=t[Ce+1].x+G*u/2/Lt,ct=t[Ce+1].y-V*u/2/Lt,we=t[Ce+1].x-G*u/2/Lt,Le=t[Ce+1].y+V*u/2/Lt;if(0!=et&&S)if(-1==et){var Ht=we+j*u,Re=Le-O*u;e.lineTo(we+F*u,Le-N*u),e.quadTo(dt,ct,Ht,Re),function(Wt,Rt){q.push(function(){e.lineTo(Wt,Rt)})}(we,Le)}else e.lineTo(dt,ct),function(Wt,Rt){var Ze=dt-F*u,vi=ct+N*u,to=dt-j*u,hn=ct+O*u;q.push(function(){e.quadTo(Wt,Rt,Ze,vi)}),q.push(function(){e.lineTo(to,hn)})}(we,Le);else e.lineTo(dt,ct),function(Wt,Rt){q.push(function(){e.lineTo(Wt,Rt)})}(we,Le);N=O,F=j}}}if(Y=u*j,W=-u*O,m&&!c)this.paintMarker(e,b.x,b.y,-N,-F,E,a,u,x,!1);else{e.lineTo(b.x-x*O+Y/2,b.y-x*j+W/2);var zt=b.x-x*O-Y/2,Mn=b.y-x*j-W/2;c?(e.moveTo(zt,Mn),q.splice(0,0,function(){e.moveTo(zt,Mn)})):e.lineTo(zt,Mn)}for(Ce=q.length-1;Ce>=0;Ce--)q[Ce]();c?(e.end(),e.stroke()):(e.close(),e.fillAndStroke()),e.setShadow(!1),e.setMiterLimit(4),S&&e.setLineJoin("flat"),t.length>2&&(e.setMiterLimit(4),f&&!c&&(e.begin(),this.paintMarker(e,t[0].x,t[0].y,Z,Q,v,o,u,x,!0),e.stroke(),e.end()),m&&!c&&(e.begin(),this.paintMarker(e,b.x,b.y,-N,-F,E,a,u,x,!0),e.stroke(),e.end()))}},mxArrowConnector.prototype.paintMarker=function(e,t,r,o,a,u,c,f,m,x){var v=f/c,E=f*a/2,S=-f*o/2,b=(m+u)*o,_=(m+u)*a;x?e.moveTo(t-E+b,r-S+_):e.lineTo(t-E+b,r-S+_),e.lineTo(t-E/v+b,r-S/v+_),e.lineTo(t+m*o,r+m*a),e.lineTo(t+E/v+b,r+S/v+_),e.lineTo(t+E+b,r+S+_)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE},__mxOutput.mxArrowConnector=void 0!==mxArrowConnector?mxArrowConnector:void 0,mxUtils.extend(mxText,mxShape),mxText.prototype.baseSpacingTop=0,mxText.prototype.baseSpacingBottom=0,mxText.prototype.baseSpacingLeft=0,mxText.prototype.baseSpacingRight=0,mxText.prototype.replaceLinefeeds=!0,mxText.prototype.verticalTextRotation=-90,mxText.prototype.ignoreClippedStringSize=!0,mxText.prototype.ignoreStringSize=!1,mxText.prototype.textWidthPadding=8!=document.documentMode||mxClient.IS_EM?3:4,mxText.prototype.lastValue=null,mxText.prototype.cacheEnabled=!0,mxText.prototype.isParseVml=function(){return!1},mxText.prototype.isHtmlAllowed=function(){return 8!=document.documentMode||mxClient.IS_EM},mxText.prototype.getSvgScreenOffset=function(){return 0},mxText.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)},mxText.prototype.paint=function(e,t){var r=this.scale,o=this.bounds.x/r,a=this.bounds.y/r,u=this.bounds.width/r,c=this.bounds.height/r;if(this.updateTransform(e,o,a,u,c),this.configureCanvas(e,o,a,u,c),t)e.updateText(o,a,u,c,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node);else{var f=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML,m=f||e instanceof mxVmlCanvas2D?"html":"",x=this.value;!f&&"html"==m&&(x=mxUtils.htmlEntities(x,!1)),"html"==m&&!mxUtils.isNode(this.value)&&(x=mxUtils.replaceTrailingNewlines(x,"<div><br></div>")),x=!mxUtils.isNode(this.value)&&this.replaceLinefeeds&&"html"==m?x.replace(/\n/g,"<br/>"):x;var v=this.textDirection;v==mxConstants.TEXT_DIRECTION_AUTO&&!f&&(v=this.getAutoDirection()),v!=mxConstants.TEXT_DIRECTION_LTR&&v!=mxConstants.TEXT_DIRECTION_RTL&&(v=null),e.text(o,a,u,c,x,this.align,this.valign,this.wrap,m,this.overflow,this.clipped,this.getTextRotation(),v)}},mxText.prototype.redraw=function(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML))if("DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML){var e=this.createCanvas();null!=e&&null!=e.updateText?(e.pointerEvents=this.pointerEvents,this.paint(e,!0),this.destroyCanvas(e),this.updateBoundingBox()):mxShape.prototype.redraw.apply(this,arguments)}else mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():(this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()),this.updateBoundingBox();else mxShape.prototype.redraw.apply(this,arguments),this.lastValue=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML?this.value:null},mxText.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.color="black",this.align=mxConstants.ALIGN_CENTER,this.valign=mxConstants.ALIGN_MIDDLE,this.family=mxConstants.DEFAULT_FONTFAMILY,this.size=mxConstants.DEFAULT_FONTSIZE,this.fontStyle=mxConstants.DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=2,this.spacingRight=2,this.spacingBottom=2,this.spacingLeft=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants.DEFAULT_TEXT_DIRECTION,delete this.margin},mxText.prototype.apply=function(e){var t=this.spacing;mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.fontStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils.getValue(this.style,mxConstants.STYLE_FONTFAMILY,this.family),this.size=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSIZE,this.size),this.color=mxUtils.getValue(this.style,mxConstants.STYLE_FONTCOLOR,this.color),this.align=mxUtils.getValue(this.style,mxConstants.STYLE_ALIGN,this.align),this.valign=mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_TOP,this.spacingTop-t))+this.spacing,this.spacingRight=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_RIGHT,this.spacingRight-t))+this.spacing,this.spacingBottom=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_BOTTOM,this.spacingBottom-t))+this.spacing,this.spacingLeft=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_LEFT,this.spacingLeft-t))+this.spacing,this.horizontal=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipV=null,this.flipH=null},mxText.prototype.getAutoDirection=function(){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return null!=e&&e.length>0&&e[0]>"z"?mxConstants.TEXT_DIRECTION_RTL:mxConstants.TEXT_DIRECTION_LTR},mxText.prototype.getContentNode=function(){var e=this.node;return null!=e&&(e=null==e.ownerSVGElement?this.node.firstChild.firstChild:e.firstChild.firstChild.firstChild.firstChild.firstChild),e},mxText.prototype.updateBoundingBox=function(){var e=this.node;this.boundingBox=this.bounds.clone();var t=this.getTextRotation(),r=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER):null,o=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE):null;if(!(this.ignoreStringSize||null==e||"fill"==this.overflow||this.clipped&&this.ignoreClippedStringSize&&r==mxConstants.ALIGN_CENTER&&o==mxConstants.ALIGN_MIDDLE)){var a=null,u=null;if(null!=e.ownerSVGElement)if(null!=e.firstChild&&null!=e.firstChild.firstChild&&"foreignObject"==e.firstChild.firstChild.nodeName)u=(e=e.firstChild.firstChild.firstChild.firstChild).offsetHeight*this.scale,a="width"==this.overflow?this.boundingBox.width:e.offsetWidth*this.scale;else try{var c=e.getBBox();return void(this.boundingBox="string"==typeof this.value&&0==mxUtils.trim(this.value)||0==c.width&&0==c.height?null:new mxRectangle(c.x,c.y,c.width,c.height))}catch(S){}else{var f=null!=this.state?this.state.view.textDiv:null;if(null!=this.offsetWidth&&null!=this.offsetHeight)a=this.offsetWidth*this.scale,u=this.offsetHeight*this.scale;else{null!=f&&(this.updateFont(f),this.updateSize(f,!1),this.updateInnerHtml(f),e=f);var m=e;if(8!=document.documentMode||mxClient.IS_EM)null!=m.firstChild&&"DIV"==m.firstChild.nodeName&&(m=m.firstChild);else{var x=Math.round(this.bounds.width/this.scale);if(this.wrap&&x>0){if(e.style.wordWrap=mxConstants.WORD_WRAP,e.style.whiteSpace="normal","break-word"!=e.style.wordWrap){var v=m.getElementsByTagName("div");v.length>0&&(m=v[v.length-1]),a=m.offsetWidth+2,v=this.node.getElementsByTagName("div"),this.clipped&&(a=Math.min(x,a)),v.length>1&&(v[v.length-2].style.width=a+"px")}}else e.style.whiteSpace="nowrap"}this.offsetWidth=m.offsetWidth+this.textWidthPadding,this.offsetHeight=m.offsetHeight,a=this.offsetWidth*this.scale,u=this.offsetHeight*this.scale}}null!=a&&null!=u&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,a,u))}if(null!=this.boundingBox)if(0!=t){var E=mxUtils.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),t,new mxPoint(0,0));this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=E.x,this.boundingBox.y+=E.y,this.boundingBox.width=E.width,this.boundingBox.height=E.height}else this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null},mxText.prototype.getShapeRotation=function(){return 0},mxText.prototype.getTextRotation=function(){return null!=this.state&&null!=this.state.shape?this.state.shape.getTextRotation():0},mxText.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&null!=this.state&&this.state.view.graph.model.isVertex(this.state.cell)},mxText.prototype.configureCanvas=function(e,t,r,o,a){mxShape.prototype.configureCanvas.apply(this,arguments),e.setFontColor(this.color),e.setFontBackgroundColor(this.background),e.setFontBorderColor(this.border),e.setFontFamily(this.family),e.setFontSize(this.size),e.setFontStyle(this.fontStyle)},mxText.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width="1px",this.node.style.height="1px",this.node.style.overflow="visible"},mxText.prototype.getHtmlValue=function(){var e=this.value;return this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div><br></div>"),this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e},mxText.prototype.getTextCss=function(){var t="display: inline-block; font-size: "+this.size+"px; font-family: "+this.family+"; color: "+this.color+"; line-height: "+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+"; pointer-events: "+(this.pointerEvents?"all":"none")+"; ";(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(t+="font-weight: bold; "),(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(t+="font-style: italic; ");var r=[];return(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&r.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&r.push("line-through"),r.length>0&&(t+="text-decoration: "+r.join(" ")+"; "),t},mxText.prototype.redrawHtmlShape=function(){if(mxClient.IS_SVG)this.redrawHtmlShapeWithCss3();else{var e=this.node.style;e.whiteSpace="normal",e.overflow="",e.width="",e.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),this.offsetWidth=null,this.offsetHeight=null,mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()}},mxText.prototype.redrawHtmlShapeWithCss3=function(){var e=Math.max(0,Math.round(this.bounds.width/this.scale)),t=Math.max(0,Math.round(this.bounds.height/this.scale)),r="position: absolute; left: "+Math.round(this.bounds.x)+"px; top: "+Math.round(this.bounds.y)+"px; pointer-events: none; ",o=this.getTextCss();mxSvgCanvas2D.createCss(e+2,t,this.align,this.valign,this.wrap,this.overflow,this.clipped,null!=this.background?mxUtils.htmlEntities(this.background):null,null!=this.border?mxUtils.htmlEntities(this.border):null,r,o,this.scale,mxUtils.bind(this,function(a,u,c,f,m,x){var v=this.getTextRotation(),E=(1!=this.scale?"scale("+this.scale+") ":"")+(0!=v?"rotate("+v+"deg) ":"")+(0!=this.margin.x||0!=this.margin.y?"translate("+100*this.margin.x+"%,"+100*this.margin.y+"%)":"");""!=E&&(E="transform-origin: 0 0; transform: "+E+"; "),""==x?(c+=f,f="display:inline-block; min-width: 100%; "+E):(f+=E,mxClient.IS_SF&&(f+="-webkit-clip-path: content-box;")),this.opacity<100&&(m+="opacity: "+this.opacity/100+"; "),this.node.setAttribute("style",c);var S=mxUtils.isNode(this.value)?this.value.outerHTML:this.getHtmlValue();null==this.node.firstChild&&(this.node.innerHTML="<div><div>"+S+"</div></div>"),this.node.firstChild.firstChild.setAttribute("style",m),this.node.firstChild.setAttribute("style",f)}))},mxText.prototype.updateHtmlTransform=function(){var e=this.getTextRotation(),t=this.node.style,r=this.margin.x,o=this.margin.y;0!=e?(mxUtils.setPrefixedStyle(t,"transformOrigin",100*-r+"% "+100*-o+"%"),mxUtils.setPrefixedStyle(t,"transform","translate("+100*r+"%,"+100*o+"%) scale("+this.scale+") rotate("+e+"deg)")):(mxUtils.setPrefixedStyle(t,"transformOrigin","0% 0%"),mxUtils.setPrefixedStyle(t,"transform","scale("+this.scale+") translate("+100*r+"%,"+100*o+"%)")),t.left=Math.round(this.bounds.x-Math.ceil(r*("fill"!=this.overflow&&"width"!=this.overflow?3:1)))+"px",t.top=Math.round(this.bounds.y-o*("fill"!=this.overflow?3:1))+"px",t.opacity=this.opacity<100?this.opacity/100:""},mxText.prototype.updateInnerHtml=function(e){if(mxUtils.isNode(this.value))e.innerHTML=this.value.outerHTML;else{var t=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=mxUtils.htmlEntities(t,!1)),t=mxUtils.replaceTrailingNewlines(t,"<div>&nbsp;</div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t,e.innerHTML=t='<div style="display:inline-block;_display:inline;">'+t+"</div>"}},mxText.prototype.updateHtmlFilter=function(){var e=this.node.style,t=this.margin.x,r=this.margin.y,o=this.scale;mxUtils.setOpacity(this.node,this.opacity);var a=0,u=0,c=null!=this.state?this.state.view.textDiv:null,f=this.node;if(null!=c){c.style.overflow="",c.style.height="",c.style.width="",this.updateFont(c),this.updateSize(c,!1),this.updateInnerHtml(c);var m=Math.round(this.bounds.width/this.scale);this.wrap&&m>0?(c.style.whiteSpace="normal",c.style.wordWrap=mxConstants.WORD_WRAP,a=m,this.clipped&&(a=Math.min(a,this.bounds.width)),c.style.width=a+"px"):c.style.whiteSpace="nowrap",null!=(f=c).firstChild&&"DIV"==f.firstChild.nodeName&&(f=f.firstChild,this.wrap&&"break-word"==c.style.wordWrap&&(f.style.width="100%")),!this.clipped&&this.wrap&&m>0&&(c.style.width=(a=f.offsetWidth+this.textWidthPadding)+"px"),u=f.offsetHeight+2,mxClient.IS_QUIRKS&&null!=this.border&&this.border!=mxConstants.NONE&&(u+=3)}else null!=f.firstChild&&"DIV"==f.firstChild.nodeName&&(u=(f=f.firstChild).offsetHeight);a=f.offsetWidth+this.textWidthPadding,this.clipped&&(u=Math.min(u,this.bounds.height)),m=this.bounds.width/o;var x=this.bounds.height/o;"fill"==this.overflow?(u=x,a=m):"width"==this.overflow&&(u=f.scrollHeight,a=m),this.offsetWidth=a,this.offsetHeight=u,mxClient.IS_QUIRKS&&(this.clipped||"width"==this.overflow&&x>0)?(x=Math.min(x,u),e.height=Math.round(x)+"px"):x=u,"fill"!=this.overflow&&"width"!=this.overflow&&(this.clipped&&(a=Math.min(m,a)),m=a,(mxClient.IS_QUIRKS&&this.clipped||this.wrap)&&(e.width=Math.round(m)+"px")),x*=o,m*=o;var v=this.getTextRotation()*(Math.PI/180),E=parseFloat(parseFloat(Math.cos(v)).toFixed(8)),S=parseFloat(parseFloat(Math.sin(-v)).toFixed(8));(v%=2*Math.PI)<0&&(v+=2*Math.PI),(v%=Math.PI)>Math.PI/2&&(v=Math.PI-v);var b=Math.cos(v),_=Math.sin(-v),D=m*-(t+.5),M=x*-(r+.5),R=(x-x*b+m*_)/2+S*D-E*M,N=(m-m*b+x*_)/2-E*D-S*M;if(0!=v){var V="progid:DXImageTransform.Microsoft.Matrix(M11="+E+", M12="+S+", M21="+-S+", M22="+E+", sizingMethod='auto expand')";null!=e.filter&&e.filter.length>0?e.filter+=" "+V:e.filter=V}r=0,"fill"!=this.overflow&&mxClient.IS_QUIRKS&&(this.valign==mxConstants.ALIGN_TOP?r-=1:r+=this.valign==mxConstants.ALIGN_BOTTOM?2:1),e.zoom=o,e.left=Math.round(this.bounds.x+N-m/2)+"px",e.top=Math.round(this.bounds.y+R-x/2+r)+"px"},mxText.prototype.updateValue=function(){if(mxUtils.isNode(this.value))this.node.innerHTML="",this.node.appendChild(this.value);else{var e=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div><br></div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e;var t=null!=this.background&&this.background!=mxConstants.NONE?this.background:null,r=null!=this.border&&this.border!=mxConstants.NONE?this.border:null;if("fill"==this.overflow||"width"==this.overflow)null!=t&&(this.node.style.backgroundColor=t),null!=r&&(this.node.style.border="1px solid "+r);else{var o="";null!=t&&(o+="background-color:"+mxUtils.htmlEntities(t)+";"),null!=r&&(o+="border:1px solid "+mxUtils.htmlEntities(r)+";"),e='<div style="zoom:1;'+o+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+'">'+e+"</div>"}this.node.innerHTML=e;var u=this.node.getElementsByTagName("div");if(u.length>0){var c=this.textDirection;c==mxConstants.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants.DIALECT_STRICTHTML&&(c=this.getAutoDirection()),c==mxConstants.TEXT_DIRECTION_LTR||c==mxConstants.TEXT_DIRECTION_RTL?u[u.length-1].setAttribute("dir",c):u[u.length-1].removeAttribute("dir")}}},mxText.prototype.updateFont=function(e){var t=e.style;t.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,t.fontSize=this.size+"px",t.fontFamily=this.family,t.verticalAlign="top",t.color=this.color,t.fontWeight=(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?"bold":"",t.fontStyle=(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?"italic":"";var r=[];(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&r.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&r.push("line-through"),t.textDecoration=r.join(" "),t.textAlign=this.align==mxConstants.ALIGN_CENTER?"center":this.align==mxConstants.ALIGN_RIGHT?"right":"left"},mxText.prototype.updateSize=function(e,t){var r=Math.max(0,Math.round(this.bounds.width/this.scale)),o=Math.max(0,Math.round(this.bounds.height/this.scale)),a=e.style;if(this.clipped?(a.overflow="hidden",mxClient.IS_QUIRKS?a.width=r+"px":(a.maxHeight=o+"px",a.maxWidth=r+"px")):"fill"==this.overflow?(a.width=r+1+"px",a.height=o+1+"px",a.overflow="hidden"):"width"==this.overflow&&(a.width=r+1+"px",a.maxHeight=o+1+"px",a.overflow="hidden"),this.wrap&&r>0){if(a.wordWrap=mxConstants.WORD_WRAP,a.whiteSpace="normal",a.width=r+"px",t&&"fill"!=this.overflow&&"width"!=this.overflow){var u=e;null!=u.firstChild&&"DIV"==u.firstChild.nodeName&&(u=u.firstChild,"break-word"==e.style.wordWrap&&(u.style.width="100%"));var c=u.offsetWidth;if(0==c){var f=e.parentNode;e.style.visibility="hidden",document.body.appendChild(e),c=u.offsetWidth,e.style.visibility="",f.appendChild(e)}c+=3,this.clipped&&(c=Math.min(c,r)),a.width=c+"px"}}else a.whiteSpace="nowrap"},mxText.prototype.updateMargin=function(){this.margin=mxUtils.getAlignmentAsPoint(this.align,this.valign)},mxText.prototype.getSpacing=function(){return new mxPoint(this.align==mxConstants.ALIGN_CENTER?(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants.ALIGN_RIGHT?-this.spacingRight-this.baseSpacingRight:this.spacingLeft+this.baseSpacingLeft,this.valign==mxConstants.ALIGN_MIDDLE?(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants.ALIGN_BOTTOM?-this.spacingBottom-this.baseSpacingBottom:this.spacingTop+this.baseSpacingTop)},__mxOutput.mxText=void 0!==mxText?mxText:void 0,mxUtils.extend(mxTriangle,mxActor),mxTriangle.prototype.isRoundable=function(){return!0},mxTriangle.prototype.redrawPath=function(e,t,r,o,a){var u=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(0,0),new mxPoint(o,.5*a),new mxPoint(0,a)],this.isRounded,u,!0)},__mxOutput.mxTriangle=void 0!==mxTriangle?mxTriangle:void 0,mxUtils.extend(mxHexagon,mxActor),mxHexagon.prototype.redrawPath=function(e,t,r,o,a){var u=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(.25*o,0),new mxPoint(.75*o,0),new mxPoint(o,.5*a),new mxPoint(.75*o,a),new mxPoint(.25*o,a),new mxPoint(0,.5*a)],this.isRounded,u,!0)},__mxOutput.mxHexagon=void 0!==mxHexagon?mxHexagon:void 0,mxUtils.extend(mxLine,mxShape),mxLine.prototype.vertical=!1,mxLine.prototype.paintVertexShape=function(e,t,r,o,a){var u;e.begin(),this.vertical?(e.moveTo(u=t+o/2,r),e.lineTo(u,r+a)):(e.moveTo(t,u=r+a/2),e.lineTo(t+o,u)),e.stroke()},__mxOutput.mxLine=void 0!==mxLine?mxLine:void 0,mxUtils.extend(mxImageShape,mxRectangleShape),mxImageShape.prototype.preserveImageAspect=!0,mxImageShape.prototype.getSvgScreenOffset=function(){return 0},mxImageShape.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),this.fill=null,this.stroke=null,this.gradient=null,null!=this.style&&(this.preserveImageAspect=1==mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1),this.flipH=this.flipH||1==mxUtils.getValue(this.style,"imageFlipH",0),this.flipV=this.flipV||1==mxUtils.getValue(this.style,"imageFlipV",0))},mxImageShape.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect},mxImageShape.prototype.createHtml=function(){var e=document.createElement("div");return e.style.position="absolute",e},mxImageShape.prototype.isRoundable=function(e,t,r,o,a){return!1},mxImageShape.prototype.paintVertexShape=function(e,t,r,o,a){if(null!=this.image){var u=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null),c=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null);null!=u&&(e.setFillColor(u),e.setStrokeColor(c),e.rect(t,r,o,a),e.fillAndStroke()),e.image(t,r,o,a,this.image,this.preserveImageAspect,!1,!1),null!=(c=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null))&&(e.setShadow(!1),e.setStrokeColor(c),e.rect(t,r,o,a),e.stroke())}else mxRectangleShape.prototype.paintBackground.apply(this,arguments)},mxImageShape.prototype.redrawHtmlShape=function(){if(this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="",null!=this.image){var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,""),t=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=e,this.node.style.borderColor=t;var r=mxClient.IS_IE6||(null==document.documentMode||document.documentMode<=8)&&0!=this.rotation,o=document.createElement(r?mxClient.VML_PREFIX+":image":"img");o.setAttribute("border","0"),o.style.position="absolute",o.src=this.image;var a=this.opacity<100?"alpha(opacity="+this.opacity+")":"";this.node.style.filter=a,this.flipH&&this.flipV?a+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?a+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(a+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),o.style.filter!=a&&(o.style.filter=a),"image"==o.nodeName?o.style.rotation=this.rotation:mxUtils.setPrefixedStyle(o.style,"transform",0!=this.rotation?"rotate("+this.rotation+"deg)":""),o.style.width=this.node.style.width,o.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(o)}else this.setTransparentBackgroundImage(this.node)},__mxOutput.mxImageShape=void 0!==mxImageShape?mxImageShape:void 0,mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(e){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(e,t,r,o,a){this.paintImage(e,t,r,o,a),this.paintIndicator(e,t,r,o,a),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(e,t,r,o,a){if(null!=this.image){var u=this.getImageBounds(t,r,o,a);e.image(u.x,u.y,u.width,u.height,this.image,!1,!1,!1)}},mxLabel.prototype.getImageBounds=function(e,t,r,o){var a=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),u=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),c=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),f=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),m=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return new mxRectangle(e+=a==mxConstants.ALIGN_CENTER?(r-c)/2:a==mxConstants.ALIGN_RIGHT?r-c-m:m,t+=u==mxConstants.ALIGN_TOP?m:u==mxConstants.ALIGN_BOTTOM?o-f-m:(o-f)/2,c,f)},mxLabel.prototype.paintIndicator=function(e,t,r,o,a){if(null!=this.indicator)this.indicator.bounds=this.getIndicatorBounds(t,r,o,a),this.indicator.paint(e);else if(null!=this.indicatorImage){var u=this.getIndicatorBounds(t,r,o,a);e.image(u.x,u.y,u.width,u.height,this.indicatorImage,!1,!1,!1)}},mxLabel.prototype.getIndicatorBounds=function(e,t,r,o){var a=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),u=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),c=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),f=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),m=this.spacing+5;return new mxRectangle(e+=a==mxConstants.ALIGN_RIGHT?r-c-m:a==mxConstants.ALIGN_CENTER?(r-c)/2:m,t+=u==mxConstants.ALIGN_BOTTOM?o-f-m:u==mxConstants.ALIGN_TOP?m:(o-f)/2,c,f)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(null!=this.image){var e=document.createElement("img");e.style.position="relative",e.setAttribute("border","0");var t=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);t.x-=this.bounds.x,t.y-=this.bounds.y,e.style.left=Math.round(t.x)+"px",e.style.top=Math.round(t.y)+"px",e.style.width=Math.round(t.width)+"px",e.style.height=Math.round(t.height)+"px",e.src=this.image,this.node.appendChild(e)}},__mxOutput.mxLabel=void 0!==mxLabel?mxLabel:void 0,mxUtils.extend(mxCylinder,mxShape),mxCylinder.prototype.maxHeight=40,mxCylinder.prototype.svgStrokeTolerance=0,mxCylinder.prototype.paintVertexShape=function(e,t,r,o,a){e.translate(t,r),e.begin(),this.redrawPath(e,t,r,o,a,!1),e.fillAndStroke(),(!this.outline||null==this.style||0==mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0))&&(e.setShadow(!1),e.begin(),this.redrawPath(e,t,r,o,a,!0),e.stroke())},mxCylinder.prototype.getCylinderSize=function(e,t,r,o){return Math.min(this.maxHeight,Math.round(o/5))},mxCylinder.prototype.redrawPath=function(e,t,r,o,a,u){var c=this.getCylinderSize(t,r,o,a);(u&&null!=this.fill||!u&&null==this.fill)&&(e.moveTo(0,c),e.curveTo(0,2*c,o,2*c,o,c),u||(e.stroke(),e.begin())),u||(e.moveTo(0,c),e.curveTo(0,-c/3,o,-c/3,o,c),e.lineTo(o,a-c),e.curveTo(o,a+c/3,0,a+c/3,0,a-c),e.close())},__mxOutput.mxCylinder=void 0!==mxCylinder?mxCylinder:void 0,mxUtils.extend(mxConnector,mxPolyline),mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=null!=this.style&&1==this.style[mxConstants.STYLE_CURVED],mxShape.prototype.updateBoundingBox.apply(this,arguments)},mxConnector.prototype.paintEdgeShape=function(e,t){var r=this.createMarker(e,t,!0),o=this.createMarker(e,t,!1);mxPolyline.prototype.paintEdgeShape.apply(this,arguments),e.setFillColor(this.stroke),e.setShadow(!1),e.setDashed(!1),null!=r&&r(),null!=o&&o()},mxConnector.prototype.createMarker=function(e,t,r){var o=null,a=t.length,u=mxUtils.getValue(this.style,r?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW),c=r?t[1]:t[a-2],f=r?t[0]:t[a-1];if(null!=u&&null!=c&&null!=f){for(var m=1;m<a-1&&0==Math.round(c.x-f.x)&&0==Math.round(c.y-f.y);)c=r?t[1+m]:t[a-2-m],m++;var x=f.x-c.x,v=f.y-c.y,E=Math.max(1,Math.sqrt(x*x+v*v)),S=x/E,b=v/E,_=mxUtils.getNumber(this.style,r?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE);o=mxMarker.createMarker(e,this,u,f,S,b,_,r,this.strokewidth,0!=this.style[r?mxConstants.STYLE_STARTFILL:mxConstants.STYLE_ENDFILL])}return o},mxConnector.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var t=0;mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(t=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)+1),mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(t=Math.max(t,mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE))+1),e.grow(t*this.scale)},__mxOutput.mxConnector=void 0!==mxConnector?mxConnector:void 0,mxUtils.extend(mxSwimlane,mxShape),mxSwimlane.prototype.imageSize=16,mxSwimlane.prototype.isRoundable=function(e,t,r,o,a){return!0},mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils.getValue(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE))},mxSwimlane.prototype.getLabelBounds=function(e){var t=this.getTitleSize(),r=new mxRectangle(e.x,e.y,e.width,e.height),o=this.isHorizontal(),a=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),u=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),c=this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH,f=o==!c,m=!f&&a!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),x=f&&u!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST);if(c){var v=Math.min(r.width,t*this.scale);(m||x)&&(r.x+=r.width-v),r.width=v}else v=Math.min(r.height,t*this.scale),(m||x)&&(r.y+=r.height-v),r.height=v;return r},mxSwimlane.prototype.getGradientBounds=function(e,t,r,o,a){var u=this.getTitleSize();return this.isHorizontal()?new mxRectangle(t,r,o,u=Math.min(u,a)):new mxRectangle(t,r,u=Math.min(u,o),a)},mxSwimlane.prototype.getSwimlaneArcSize=function(e,t,r){return"1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(e/2,Math.min(t/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):r*(mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100)*3},mxSwimlane.prototype.isHorizontal=function(){return 1==mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)},mxSwimlane.prototype.paintVertexShape=function(e,t,r,o,a){var u=this.getTitleSize(),c=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE),f=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),m=0;u=this.isHorizontal()?Math.min(u,a):Math.min(u,o),e.translate(t,r),this.isRounded?(m=this.getSwimlaneArcSize(o,a,u),m=Math.min((this.isHorizontal()?a:o)-u,Math.min(u,m)),this.paintRoundedSwimlane(e,t,r,o,a,u,m,c,f)):this.paintSwimlane(e,t,r,o,a,u,c,f);var x=mxUtils.getValue(this.style,mxConstants.STYLE_SEPARATORCOLOR,mxConstants.NONE);if(this.paintSeparator(e,t,r,o,a,u,x),null!=this.image){var v=this.getImageBounds(t,r,o,a);e.image(v.x-t,v.y-r,v.width,v.height,this.image,!1,!1,!1)}this.glass&&(e.setShadow(!1),this.paintGlassEffect(e,0,0,o,u,m))},mxSwimlane.prototype.paintSwimlane=function(e,t,r,o,a,u,c,f){e.begin();var m=!0;null!=this.style&&(m="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!m&&(null==this.fill||this.fill==mxConstants.NONE)&&(e.pointerEvents=!1),this.isHorizontal()?(e.moveTo(0,u),e.lineTo(0,0),e.lineTo(o,0),e.lineTo(o,u),e.fillAndStroke(),u<a&&((c==mxConstants.NONE||!m)&&(e.pointerEvents=!1),c!=mxConstants.NONE&&e.setFillColor(c),e.begin(),e.moveTo(0,u),e.lineTo(0,a),e.lineTo(o,a),e.lineTo(o,u),c==mxConstants.NONE?e.stroke():e.fillAndStroke())):(e.moveTo(u,0),e.lineTo(0,0),e.lineTo(0,a),e.lineTo(u,a),e.fillAndStroke(),u<o&&((c==mxConstants.NONE||!m)&&(e.pointerEvents=!1),c!=mxConstants.NONE&&e.setFillColor(c),e.begin(),e.moveTo(u,0),e.lineTo(o,0),e.lineTo(o,a),e.lineTo(u,a),c==mxConstants.NONE?e.stroke():e.fillAndStroke())),f&&this.paintDivider(e,t,r,o,a,u,c==mxConstants.NONE)},mxSwimlane.prototype.paintRoundedSwimlane=function(e,t,r,o,a,u,c,f,m){e.begin();var x=!0;null!=this.style&&(x="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!x&&(null==this.fill||this.fill==mxConstants.NONE)&&(e.pointerEvents=!1),this.isHorizontal()?(e.moveTo(o,u),e.lineTo(o,c),e.quadTo(o,0,o-Math.min(o/2,c),0),e.lineTo(Math.min(o/2,c),0),e.quadTo(0,0,0,c),e.lineTo(0,u),e.fillAndStroke(),u<a&&((f==mxConstants.NONE||!x)&&(e.pointerEvents=!1),f!=mxConstants.NONE&&e.setFillColor(f),e.begin(),e.moveTo(0,u),e.lineTo(0,a-c),e.quadTo(0,a,Math.min(o/2,c),a),e.lineTo(o-Math.min(o/2,c),a),e.quadTo(o,a,o,a-c),e.lineTo(o,u),f==mxConstants.NONE?e.stroke():e.fillAndStroke())):(e.moveTo(u,0),e.lineTo(c,0),e.quadTo(0,0,0,Math.min(a/2,c)),e.lineTo(0,a-Math.min(a/2,c)),e.quadTo(0,a,c,a),e.lineTo(u,a),e.fillAndStroke(),u<o&&((f==mxConstants.NONE||!x)&&(e.pointerEvents=!1),f!=mxConstants.NONE&&e.setFillColor(f),e.begin(),e.moveTo(u,a),e.lineTo(o-c,a),e.quadTo(o,a,o,a-Math.min(a/2,c)),e.lineTo(o,Math.min(a/2,c)),e.quadTo(o,0,o-c,0),e.lineTo(u,0),f==mxConstants.NONE?e.stroke():e.fillAndStroke())),m&&this.paintDivider(e,t,r,o,a,u,f==mxConstants.NONE)},mxSwimlane.prototype.paintDivider=function(e,t,r,o,a,u,c){c||e.setShadow(!1),e.begin(),this.isHorizontal()?(e.moveTo(0,u),e.lineTo(o,u)):(e.moveTo(u,0),e.lineTo(u,a)),e.stroke()},mxSwimlane.prototype.paintSeparator=function(e,t,r,o,a,u,c){c!=mxConstants.NONE&&(e.setStrokeColor(c),e.setDashed(!0),e.begin(),this.isHorizontal()?(e.moveTo(o,u),e.lineTo(o,a)):(e.moveTo(u,0),e.lineTo(o,0)),e.stroke(),e.setDashed(!1))},mxSwimlane.prototype.getImageBounds=function(e,t,r,o){return this.isHorizontal()?new mxRectangle(e+r-this.imageSize,t,this.imageSize,this.imageSize):new mxRectangle(e,t,this.imageSize,this.imageSize)},__mxOutput.mxSwimlane=void 0!==mxSwimlane?mxSwimlane:void 0,mxGraphLayout.prototype.graph=null,mxGraphLayout.prototype.useBoundingBox=!0,mxGraphLayout.prototype.parent=null,mxGraphLayout.prototype.moveCell=function(e,t,r){},mxGraphLayout.prototype.resizeCell=function(e,t){},mxGraphLayout.prototype.execute=function(e){},mxGraphLayout.prototype.getGraph=function(){return this.graph},mxGraphLayout.prototype.getConstraint=function(e,t,r,o){return this.graph.getCurrentCellStyle(t)[e]},mxGraphLayout.traverse=function(e,t,r,o,a){if(null!=r&&null!=e&&(t=null==t||t,!(a=a||new mxDictionary).get(e))){a.put(e,!0);var u=r(e,o);if(null==u||u){var c=this.graph.model.getEdgeCount(e);if(c>0)for(var f=0;f<c;f++){var m=this.graph.model.getEdgeAt(e,f),x=this.graph.model.getTerminal(m,!0)==e;if(!t||x){var v=this.graph.view.getVisibleTerminal(m,!x);this.traverse(v,t,r,m,a)}}}}},mxGraphLayout.prototype.isAncestor=function(e,t,r){if(!r)return this.graph.model.getParent(t)==e;if(t==e)return!1;for(;null!=t&&t!=e;)t=this.graph.model.getParent(t);return t==e},mxGraphLayout.prototype.isVertexMovable=function(e){return this.graph.isCellMovable(e)},mxGraphLayout.prototype.isVertexIgnored=function(e){return!this.graph.getModel().isVertex(e)||!this.graph.isCellVisible(e)},mxGraphLayout.prototype.isEdgeIgnored=function(e){var t=this.graph.getModel();return!t.isEdge(e)||!this.graph.isCellVisible(e)||null==t.getTerminal(e,!0)||null==t.getTerminal(e,!1)},mxGraphLayout.prototype.setEdgeStyleEnabled=function(e,t){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,t?"0":"1",[e])},mxGraphLayout.prototype.setOrthogonalEdge=function(e,t){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,t?"1":"0",[e])},mxGraphLayout.prototype.getParentOffset=function(e){var t=new mxPoint;if(null!=e&&e!=this.parent){var r=this.graph.getModel();if(r.isAncestor(this.parent,e))for(var o=r.getGeometry(e);e!=this.parent;)t.x=t.x+o.x,t.y=t.y+o.y,e=r.getParent(e),o=r.getGeometry(e)}return t},mxGraphLayout.prototype.setEdgePoints=function(e,t){if(null!=e){var r=this.graph.model,o=r.getGeometry(e);if(null==o?(o=new mxGeometry).setRelative(!0):o=o.clone(),null!=this.parent&&null!=t)for(var a=r.getParent(e),u=this.getParentOffset(a),c=0;c<t.length;c++)t[c].x=t[c].x-u.x,t[c].y=t[c].y-u.y;o.points=t,r.setGeometry(e,o)}},mxGraphLayout.prototype.setVertexLocation=function(e,t,r){var o=this.graph.getModel(),a=o.getGeometry(e),u=null;if(null!=a){if(u=new mxRectangle(t,r,a.width,a.height),this.useBoundingBox){var c=this.graph.getView().getState(e);if(null!=c&&null!=c.text&&null!=c.text.boundingBox){var f=this.graph.getView().scale,m=c.text.boundingBox;c.text.boundingBox.x<c.x&&(t+=(c.x-m.x)/f,u.width=m.width),c.text.boundingBox.y<c.y&&(r+=(c.y-m.y)/f,u.height=m.height)}}if(null!=this.parent){var x=o.getParent(e);if(null!=x&&x!=this.parent){var v=this.getParentOffset(x);t-=v.x,r-=v.y}}(a.x!=t||a.y!=r)&&((a=a.clone()).x=t,a.y=r,o.setGeometry(e,a))}return u},mxGraphLayout.prototype.getVertexBounds=function(e){var t=this.graph.getModel().getGeometry(e);if(this.useBoundingBox){var r=this.graph.getView().getState(e);if(null!=r&&null!=r.text&&null!=r.text.boundingBox){var o=this.graph.getView().scale,a=r.text.boundingBox,u=Math.max(r.x-a.x,0)/o,c=Math.max(r.y-a.y,0)/o,f=Math.max(a.x+a.width-(r.x+r.width),0)/o,m=Math.max(a.y+a.height-(r.y+r.height),0)/o;t=new mxRectangle(t.x-u,t.y-c,t.width+u+f,t.height+c+m)}}if(null!=this.parent){var x=this.graph.getModel().getParent(e);if(t=t.clone(),null!=x&&x!=this.parent){var v=this.getParentOffset(x);t.x=t.x+v.x,t.y=t.y+v.y}}return new mxRectangle(t.x,t.y,t.width,t.height)},mxGraphLayout.prototype.arrangeGroups=function(e,t,r,o,a,u){return this.graph.updateGroupBounds(e,t,!0,r,o,a,u)},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(e,t){return null!=e&&null!=t?t.weightedValue>e.weightedValue?-1:t.weightedValue<e.weightedValue?1:t.nudge?-1:1:0},__mxOutput.mxGraphLayout=void 0!==mxGraphLayout?mxGraphLayout:void 0,mxStackLayout.prototype=new mxGraphLayout,mxStackLayout.prototype.constructor=mxStackLayout,mxStackLayout.prototype.horizontal=null,mxStackLayout.prototype.spacing=null,mxStackLayout.prototype.x0=null,mxStackLayout.prototype.y0=null,mxStackLayout.prototype.border=0,mxStackLayout.prototype.marginTop=0,mxStackLayout.prototype.marginLeft=0,mxStackLayout.prototype.marginRight=0,mxStackLayout.prototype.marginBottom=0,mxStackLayout.prototype.keepFirstLocation=!1,mxStackLayout.prototype.fill=!1,mxStackLayout.prototype.resizeParent=!1,mxStackLayout.prototype.resizeParentMax=!1,mxStackLayout.prototype.resizeLast=!1,mxStackLayout.prototype.wrap=null,mxStackLayout.prototype.borderCollapse=!0,mxStackLayout.prototype.allowGaps=!1,mxStackLayout.prototype.gridSize=0,mxStackLayout.prototype.isHorizontal=function(){return this.horizontal},mxStackLayout.prototype.moveCell=function(e,t,r){var o=this.graph.getModel(),a=o.getParent(e),u=this.isHorizontal();if(null!=e&&null!=a){var c=0,f=0,m=o.getChildCount(a),x=u?t:r,v=this.graph.getView().getState(a);for(null!=v&&(x-=u?v.x:v.y),x/=this.graph.view.scale,c=0;c<m;c++){var E=o.getChildAt(a,c);if(E!=e){var S=o.getGeometry(E);if(null!=S){var b=u?S.x+S.width/2:S.y+S.height/2;if(f<=x&&b>x)break;f=b}}}var _=a.getIndex(e);_=Math.max(0,c-(c>_?1:0)),o.add(a,e,_)}},mxStackLayout.prototype.getParentSize=function(e){var t=this.graph.getModel(),r=t.getGeometry(e);return null!=this.graph.container&&(null==r&&t.isLayer(e)||e==this.graph.getView().currentRoot)&&(r=new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1)),r},mxStackLayout.prototype.getLayoutCells=function(e){for(var t=this.graph.getModel(),r=t.getChildCount(e),o=[],a=0;a<r;a++){var u=t.getChildAt(e,a);!this.isVertexIgnored(u)&&this.isVertexMovable(u)&&o.push(u)}return this.allowGaps&&o.sort(mxUtils.bind(this,function(c,f){var m=this.graph.getCellGeometry(c),x=this.graph.getCellGeometry(f);return this.horizontal?m.x==x.x?0:m.x>x.x>0?1:-1:m.y==x.y?0:m.y>x.y>0?1:-1})),o},mxStackLayout.prototype.snap=function(e){if(null!=this.gridSize&&this.gridSize>0&&(e=Math.max(e,this.gridSize))/this.gridSize>1){var t=e%this.gridSize;e+=t>this.gridSize/2?this.gridSize-t:-t}return e},mxStackLayout.prototype.execute=function(e){if(null!=e){var t=this.getParentSize(e),r=this.isHorizontal(),o=this.graph.getModel(),a=null;null!=t&&(a=r?t.height-this.marginTop-this.marginBottom:t.width-this.marginLeft-this.marginRight),a-=2*this.border;var u=this.x0+this.border+this.marginLeft,c=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(e)){var f=this.graph.getCellStyle(e),m=mxUtils.getNumber(f,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),x=1==mxUtils.getValue(f,mxConstants.STYLE_HORIZONTAL,!0);null!=t&&(m=x?Math.min(m,t.height):Math.min(m,t.width)),r==x&&(a-=m),x?c+=m:u+=m}o.beginUpdate();try{for(var v=0,E=null,S=0,b=null,_=this.getLayoutCells(e),D=0;D<_.length;D++){var M=_[D],R=o.getGeometry(M);if(null!=R){R=R.clone(),null!=this.wrap&&null!=E&&(r&&E.x+E.width+R.width+2*this.spacing>this.wrap||!r&&E.y+E.height+R.height+2*this.spacing>this.wrap)&&(E=null,r?c+=v+this.spacing:u+=v+this.spacing,v=0),v=Math.max(v,r?R.height:R.width);var N=0;if(!this.borderCollapse){var V=this.graph.getCellStyle(M);N=mxUtils.getNumber(V,mxConstants.STYLE_STROKEWIDTH,1)}if(null!=E){var O=S+this.spacing+Math.floor(N/2);r?R.x=this.snap((this.allowGaps?Math.max(O,R.x):O)-this.marginLeft)+this.marginLeft:R.y=this.snap((this.allowGaps?Math.max(O,R.y):O)-this.marginTop)+this.marginTop}else this.keepFirstLocation||(r?R.x=this.allowGaps&&R.x>u?Math.max(this.snap(R.x-this.marginLeft)+this.marginLeft,u):u:R.y=this.allowGaps&&R.y>c?Math.max(this.snap(R.y-this.marginTop)+this.marginTop,c):c);r?R.y=c:R.x=u,this.fill&&null!=a&&(r?R.height=a:R.width=a),r?R.width=this.snap(R.width):R.height=this.snap(R.height),this.setChildGeometry(M,R),b=M,E=R,S=r?E.x+E.width+Math.floor(N/2):E.y+E.height+Math.floor(N/2)}}this.resizeParent&&null!=t&&null!=E&&!this.graph.isCellCollapsed(e)?this.updateParentGeometry(e,t,E):this.resizeLast&&null!=t&&null!=E&&null!=b&&(r?E.width=t.width-E.x-this.spacing-this.marginRight-this.marginLeft:E.height=t.height-E.y-this.spacing-this.marginBottom,this.setChildGeometry(b,E))}finally{o.endUpdate()}}},mxStackLayout.prototype.setChildGeometry=function(e,t){var r=this.graph.getCellGeometry(e);(null==r||t.x!=r.x||t.y!=r.y||t.width!=r.width||t.height!=r.height)&&this.graph.getModel().setGeometry(e,t)},mxStackLayout.prototype.updateParentGeometry=function(e,t,r){var o=this.isHorizontal(),a=this.graph.getModel(),u=t.clone();if(o){var c=r.x+r.width+this.marginRight+this.border;u.width=this.resizeParentMax?Math.max(u.width,c):c}else c=r.y+r.height+this.marginBottom+this.border,u.height=this.resizeParentMax?Math.max(u.height,c):c;(t.x!=u.x||t.y!=u.y||t.width!=u.width||t.height!=u.height)&&a.setGeometry(e,u)},__mxOutput.mxStackLayout=void 0!==mxStackLayout?mxStackLayout:void 0,mxPartitionLayout.prototype=new mxGraphLayout,mxPartitionLayout.prototype.constructor=mxPartitionLayout,mxPartitionLayout.prototype.horizontal=null,mxPartitionLayout.prototype.spacing=null,mxPartitionLayout.prototype.border=null,mxPartitionLayout.prototype.resizeVertices=!0,mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal},mxPartitionLayout.prototype.moveCell=function(e,t,r){var o=this.graph.getModel(),a=o.getParent(e);if(null!=e&&null!=a){var u=0,c=0,f=o.getChildCount(a);for(u=0;u<f;u++){var m=o.getChildAt(a,u),x=this.getVertexBounds(m);if(null!=x){var v=x.x+x.width/2;if(c<t&&v>t)break;c=v}}var E=a.getIndex(e);E=Math.max(0,u-(u>E?1:0)),o.add(a,e,E)}},mxPartitionLayout.prototype.execute=function(e){var t=this.isHorizontal(),r=this.graph.getModel(),o=r.getGeometry(e);if(null!=this.graph.container&&(null==o&&r.isLayer(e)||e==this.graph.getView().currentRoot)&&(o=new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1)),null!=o){for(var c=[],f=r.getChildCount(e),m=0;m<f;m++){var x=r.getChildAt(e,m);!this.isVertexIgnored(x)&&this.isVertexMovable(x)&&c.push(x)}var v=c.length;if(v>0){var E=this.border,S=this.border,b=t?o.height:o.width;b-=2*this.border;var _=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle;b-=t?_.height:_.width,E+=_.width,S+=_.height;var D=this.border+(v-1)*this.spacing,M=t?(o.width-E-D)/v:(o.height-S-D)/v;if(M>0){r.beginUpdate();try{for(m=0;m<v;m++){var R=r.getGeometry(x=c[m]);null!=R&&((R=R.clone()).x=E,R.y=S,t?(this.resizeVertices&&(R.width=M,R.height=b),E+=M+this.spacing):(this.resizeVertices&&(R.height=M,R.width=b),S+=M+this.spacing),r.setGeometry(x,R))}}finally{r.endUpdate()}}}}},__mxOutput.mxPartitionLayout=void 0!==mxPartitionLayout?mxPartitionLayout:void 0,mxCompactTreeLayout.prototype=new mxGraphLayout,mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout,mxCompactTreeLayout.prototype.horizontal=null,mxCompactTreeLayout.prototype.invert=null,mxCompactTreeLayout.prototype.resizeParent=!0,mxCompactTreeLayout.prototype.maintainParentLocation=!1,mxCompactTreeLayout.prototype.groupPadding=10,mxCompactTreeLayout.prototype.groupPaddingTop=0,mxCompactTreeLayout.prototype.groupPaddingRight=0,mxCompactTreeLayout.prototype.groupPaddingBottom=0,mxCompactTreeLayout.prototype.groupPaddingLeft=0,mxCompactTreeLayout.prototype.parentsChanged=null,mxCompactTreeLayout.prototype.moveTree=!1,mxCompactTreeLayout.prototype.visited=null,mxCompactTreeLayout.prototype.levelDistance=10,mxCompactTreeLayout.prototype.nodeDistance=20,mxCompactTreeLayout.prototype.resetEdges=!0,mxCompactTreeLayout.prototype.prefHozEdgeSep=5,mxCompactTreeLayout.prototype.prefVertEdgeOff=4,mxCompactTreeLayout.prototype.minEdgeJetty=8,mxCompactTreeLayout.prototype.channelBuffer=4,mxCompactTreeLayout.prototype.edgeRouting=!0,mxCompactTreeLayout.prototype.sortEdges=!1,mxCompactTreeLayout.prototype.alignRanks=!1,mxCompactTreeLayout.prototype.maxRankHeight=null,mxCompactTreeLayout.prototype.root=null,mxCompactTreeLayout.prototype.node=null,mxCompactTreeLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal},mxCompactTreeLayout.prototype.execute=function(e,t){this.parent=e;var r=this.graph.getModel();if(null==t)if(this.graph.getEdges(e,r.getParent(e),this.invert,!this.invert,!1).length>0)this.root=e;else{var o=this.graph.findTreeRoots(e,!0,this.invert);if(o.length>0)for(var a=0;a<o.length;a++)if(!this.isVertexIgnored(o[a])&&this.graph.getEdges(o[a],null,this.invert,!this.invert,!1).length>0){this.root=o[a];break}}else this.root=t;if(null!=this.root){this.parentsChanged=this.resizeParent?new Object:null,this.parentX=null,this.parentY=null,e!=this.root&&null!=r.isVertex(e)&&this.maintainParentLocation&&null!=(u=this.graph.getCellGeometry(e))&&(this.parentX=u.x,this.parentY=u.y),r.beginUpdate();try{if(this.visited=new Object,this.node=this.dfs(this.root,e),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),null!=this.node){this.layout(this.node);var c=this.graph.gridSize,f=c;if(!this.moveTree){var m=this.getVertexBounds(this.root);null!=m&&(c=m.x,f=m.y)}var u,x;if(null!=(x=this.isHorizontal()?this.horizontalLayout(this.node,c,f):this.verticalLayout(this.node,null,c,f))){var v=0,E=0;x.x<0&&(v=Math.abs(c-x.x)),x.y<0&&(E=Math.abs(f-x.y)),(0!=v||0!=E)&&this.moveNode(this.node,v,E),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)}null!=this.parentX&&null!=this.parentY&&null!=(u=this.graph.getCellGeometry(e))&&((u=u.clone()).x=this.parentX,u.y=this.parentY,r.setGeometry(e,u))}}finally{r.endUpdate()}}},mxCompactTreeLayout.prototype.moveNode=function(e,t,r){e.x+=t,e.y+=r,this.apply(e);for(var o=e.child;null!=o;)this.moveNode(o,t,r),o=o.next},mxCompactTreeLayout.prototype.sortOutgoingEdges=function(e,t){var r=new mxDictionary;t.sort(function(o,a){var u=o.getTerminal(o.getTerminal(!1)==e),c=r.get(u);null==c&&(c=mxCellPath.create(u).split(mxCellPath.PATH_SEPARATOR),r.put(u,c));var f=a.getTerminal(a.getTerminal(!1)==e),m=r.get(f);return null==m&&(m=mxCellPath.create(f).split(mxCellPath.PATH_SEPARATOR),r.put(f,m)),mxCellPath.compare(c,m)})},mxCompactTreeLayout.prototype.findRankHeights=function(e,t){(null==this.maxRankHeight[t]||this.maxRankHeight[t]<e.height)&&(this.maxRankHeight[t]=e.height);for(var r=e.child;null!=r;)this.findRankHeights(r,t+1),r=r.next},mxCompactTreeLayout.prototype.setCellHeights=function(e,t){null!=this.maxRankHeight[t]&&this.maxRankHeight[t]>e.height&&(e.height=this.maxRankHeight[t]);for(var r=e.child;null!=r;)this.setCellHeights(r,t+1),r=r.next},mxCompactTreeLayout.prototype.dfs=function(e,t){var r=mxCellPath.create(e),o=null;if(null!=e&&null==this.visited[r]&&!this.isVertexIgnored(e)){this.visited[r]=e,o=this.createNode(e);var a=this.graph.getModel(),u=null,c=this.graph.getEdges(e,t,this.invert,!this.invert,!1,!0),f=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(e,c);for(var m=0;m<c.length;m++){var x=c[m];if(!this.isEdgeIgnored(x)){this.resetEdges&&this.setEdgePoints(x,null),this.edgeRouting&&(this.setEdgeStyleEnabled(x,!1),this.setEdgePoints(x,null));var v=f.getState(x),E=null!=v?v.getVisibleTerminal(this.invert):f.getVisibleTerminal(x,this.invert),S=this.dfs(E,t);null!=S&&null!=a.getGeometry(E)&&(null==u?o.child=S:u.next=S,u=S)}}}return o},mxCompactTreeLayout.prototype.layout=function(e){if(null!=e){for(var t=e.child;null!=t;)this.layout(t),t=t.next;null!=e.child?this.attachParent(e,this.join(e)):this.layoutLeaf(e)}},mxCompactTreeLayout.prototype.horizontalLayout=function(e,t,r,o){e.x+=t+e.offsetX,e.y+=r+e.offsetY,o=this.apply(e,o);var a=e.child;if(null!=a){o=this.horizontalLayout(a,e.x,e.y,o);for(var u=e.y+a.offsetY,c=a.next;null!=c;)o=this.horizontalLayout(c,e.x+a.offsetX,u,o),u+=c.offsetY,c=c.next}return o},mxCompactTreeLayout.prototype.verticalLayout=function(e,t,r,o,a){e.x+=r+e.offsetY,e.y+=o+e.offsetX,a=this.apply(e,a);var u=e.child;if(null!=u){a=this.verticalLayout(u,e,e.x,e.y,a);for(var c=e.x+u.offsetY,f=u.next;null!=f;)a=this.verticalLayout(f,e,c,e.y+u.offsetX,a),c+=f.offsetY,f=f.next}return a},mxCompactTreeLayout.prototype.attachParent=function(e,t){var r=this.nodeDistance+this.levelDistance,o=(t-e.width)/2-this.nodeDistance,a=o+e.width+2*this.nodeDistance-t;e.child.offsetX=r+e.height,e.child.offsetY=a,e.contour.upperHead=this.createLine(e.height,0,this.createLine(r,a,e.contour.upperHead)),e.contour.lowerHead=this.createLine(e.height,0,this.createLine(r,o,e.contour.lowerHead))},mxCompactTreeLayout.prototype.layoutLeaf=function(e){var t=2*this.nodeDistance;e.contour.upperTail=this.createLine(e.height+t,0),e.contour.upperHead=e.contour.upperTail,e.contour.lowerTail=this.createLine(0,-e.width-t),e.contour.lowerHead=this.createLine(e.height+t,0,e.contour.lowerTail)},mxCompactTreeLayout.prototype.join=function(e){var t=2*this.nodeDistance,r=e.child;e.contour=r.contour;var o=r.width+t,a=o;for(r=r.next;null!=r;){var u=this.merge(e.contour,r.contour);r.offsetY=u+o,r.offsetX=0,a+=u+(o=r.width+t),r=r.next}return a},mxCompactTreeLayout.prototype.merge=function(e,t){for(var r=0,o=0,a=0,u=e.lowerHead,c=t.upperHead;null!=c&&null!=u;){var f=this.offset(r,o,c.dx,c.dy,u.dx,u.dy);o+=f,a+=f,r+c.dx<=u.dx?(r+=c.dx,o+=c.dy,c=c.next):(r-=u.dx,o-=u.dy,u=u.next)}if(null!=c){var m=this.bridge(e.upperTail,0,0,c,r,o);e.upperTail=null!=m.next?t.upperTail:m,e.lowerTail=t.lowerTail}else null==(m=this.bridge(t.lowerTail,r,o,u,0,0)).next&&(e.lowerTail=m);return e.lowerHead=t.lowerHead,a},mxCompactTreeLayout.prototype.offset=function(e,t,r,o,a,u){var c=0;return a<=e||e+r<=0?0:(c=a*o-r*u>0?e<0?e*o/r-t:e>0?e*u/a-t:-t:a<e+r?u-(t+(a-e)*o/r):a>e+r?(r+e)*u/a-(t+o):u-(t+o))>0?c:0},mxCompactTreeLayout.prototype.bridge=function(e,t,r,o,a,u){var f,c=a+o.dx-t,x=this.createLine(c,f=0==o.dx?o.dy:c*o.dy/o.dx,o.next);return e.next=this.createLine(0,u+o.dy-f-r,x),x},mxCompactTreeLayout.prototype.createNode=function(e){var t=new Object;t.cell=e,t.x=0,t.y=0,t.width=0,t.height=0;var r=this.getVertexBounds(e);return null!=r&&(this.isHorizontal()?(t.width=r.height,t.height=r.width):(t.width=r.width,t.height=r.height)),t.offsetX=0,t.offsetY=0,t.contour=new Object,t},mxCompactTreeLayout.prototype.apply=function(e,t){var r=this.graph.getModel(),o=e.cell,a=r.getGeometry(o);if(null!=o&&null!=a){if(this.isVertexMovable(o)&&(a=this.setVertexLocation(o,e.x,e.y),this.resizeParent)){var u=r.getParent(o),c=mxCellPath.create(u);null==this.parentsChanged[c]&&(this.parentsChanged[c]=u)}t=null==t?new mxRectangle(a.x,a.y,a.width,a.height):new mxRectangle(Math.min(t.x,a.x),Math.min(t.y,a.y),Math.max(t.x+t.width,a.x+a.width),Math.max(t.y+t.height,a.y+a.height))}return t},mxCompactTreeLayout.prototype.createLine=function(e,t,r){var o=new Object;return o.dx=e,o.dy=t,o.next=r,o},mxCompactTreeLayout.prototype.adjustParents=function(){var e=[];for(var t in this.parentsChanged)e.push(this.parentsChanged[t]);this.arrangeGroups(mxUtils.sortCells(e,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)},mxCompactTreeLayout.prototype.localEdgeProcessing=function(e){this.processNodeOutgoing(e);for(var t=e.child;null!=t;)this.localEdgeProcessing(t),t=t.next},mxCompactTreeLayout.prototype.processNodeOutgoing=function(e){for(var t=e.child,r=e.cell,o=0,a=[];null!=t;){o++;var u=t.x;this.horizontal&&(u=t.y),a.push(new WeightedCellSorter(t,u)),t=t.next}a.sort(WeightedCellSorter.prototype.compare);var c=e.width,f=(o+1)*this.prefHozEdgeSep;c>f+2*this.prefHozEdgeSep&&(c-=2*this.prefHozEdgeSep);var m=c/o,x=m/2;c>f+2*this.prefHozEdgeSep&&(x+=this.prefHozEdgeSep);var v=this.minEdgeJetty-this.prefVertEdgeOff,E=0,S=this.getVertexBounds(r);t=e.child;for(var b=0;b<a.length;b++){for(var _=a[b].cell.cell,D=this.getVertexBounds(_),M=this.graph.getEdgesBetween(r,_,!1),R=[],N=0,V=0,O=0;O<M.length;O++)this.horizontal?(R.push(new mxPoint(N=S.x+S.width,V=S.y+x)),R.push(new mxPoint(N=S.x+S.width+v,V)),R.push(new mxPoint(N,V=D.y+D.height/2)),this.setEdgePoints(M[O],R)):(R.push(new mxPoint(N=S.x+x,V=S.y+S.height)),R.push(new mxPoint(N,V=S.y+S.height+v)),R.push(new mxPoint(N=D.x+D.width/2,V)),this.setEdgePoints(M[O],R));b<o/2?v+=this.prefVertEdgeOff:b>o/2&&(v-=this.prefVertEdgeOff),x+=m,E=Math.max(E,v)}},__mxOutput.mxCompactTreeLayout=void 0!==mxCompactTreeLayout?mxCompactTreeLayout:void 0,mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout),mxRadialTreeLayout.prototype.angleOffset=.5,mxRadialTreeLayout.prototype.rootx=0,mxRadialTreeLayout.prototype.rooty=0,mxRadialTreeLayout.prototype.levelDistance=120,mxRadialTreeLayout.prototype.nodeDistance=10,mxRadialTreeLayout.prototype.autoRadius=!1,mxRadialTreeLayout.prototype.sortEdges=!1,mxRadialTreeLayout.prototype.rowMinX=[],mxRadialTreeLayout.prototype.rowMaxX=[],mxRadialTreeLayout.prototype.rowMinCenX=[],mxRadialTreeLayout.prototype.rowMaxCenX=[],mxRadialTreeLayout.prototype.rowRadi=[],mxRadialTreeLayout.prototype.row=[],mxRadialTreeLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxRadialTreeLayout.prototype.execute=function(e,t){this.parent=e,this.useBoundingBox=!1,this.edgeRouting=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var r=null,o=this.getVertexBounds(this.root);for(var a in this.centerX=o.x+o.width/2,this.centerY=o.y+o.height/2,this.visited){var u=this.getVertexBounds(this.visited[a]);(r=null!=r?r:u.clone()).add(u)}this.calcRowDims([this.node],0);for(var c=0,f=0,m=0;m<this.row.length;m++){var x=(this.centerX-this.rowMinX[m]-this.nodeDistance)/this.rowRadi[m],v=(this.rowMaxX[m]-this.centerX-this.nodeDistance)/this.rowRadi[m];c=Math.max(c,x),f=Math.max(f,v)}for(m=0;m<this.row.length;m++)for(var E=this.centerX-this.nodeDistance-c*this.rowRadi[m],S=this.centerX+this.nodeDistance+f*this.rowRadi[m],b=S-E,_=0;_<this.row[m].length;_++){var R=((u=this.getVertexBounds((M=(D=this.row[m])[_]).cell)).x+u.width/2-E)/b,N=2*Math.PI*R;M.theta=N}for(m=this.row.length-2;m>=0;m--){var D=this.row[m];for(_=0;_<D.length;_++){for(var V=(M=D[_]).child,O=0,F=0;null!=V;)F+=V.theta,O++,V=V.next;if(O>0){var G=F/O;if(G>M.theta&&_<D.length-1){var j=D[_+1].theta;M.theta=Math.min(G,j-Math.PI/10)}else if(G<M.theta&&_>0){var Y=D[_-1].theta;M.theta=Math.max(G,Y+Math.PI/10)}}}}for(m=0;m<this.row.length;m++)for(_=0;_<this.row[m].length;_++){var M;u=this.getVertexBounds((M=(D=this.row[m])[_]).cell),this.setVertexLocation(M.cell,this.centerX-u.width/2+this.rowRadi[m]*Math.cos(M.theta),this.centerY-u.height/2+this.rowRadi[m]*Math.sin(M.theta))}},mxRadialTreeLayout.prototype.calcRowDims=function(e,t){if(null!=e&&0!=e.length){this.rowMinX[t]=this.centerX,this.rowMaxX[t]=this.centerX,this.rowMinCenX[t]=this.centerX,this.rowMaxCenX[t]=this.centerX,this.row[t]=[];for(var r=!1,o=0;o<e.length;o++)for(var a=null!=e[o]?e[o].child:null;null!=a;){var c=this.getVertexBounds(a.cell);this.rowMinX[t]=Math.min(c.x,this.rowMinX[t]),this.rowMaxX[t]=Math.max(c.x+c.width,this.rowMaxX[t]),this.rowMinCenX[t]=Math.min(c.x+c.width/2,this.rowMinCenX[t]),this.rowMaxCenX[t]=Math.max(c.x+c.width/2,this.rowMaxCenX[t]),this.rowRadi[t]=c.y-this.getVertexBounds(this.root).y,null!=a.child&&(r=!0),this.row[t].push(a),a=a.next}r&&this.calcRowDims(this.row[t],t+1)}},__mxOutput.mxRadialTreeLayout=void 0!==mxRadialTreeLayout?mxRadialTreeLayout:void 0,mxFastOrganicLayout.prototype=new mxGraphLayout,mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout,mxFastOrganicLayout.prototype.useInputOrigin=!0,mxFastOrganicLayout.prototype.resetEdges=!0,mxFastOrganicLayout.prototype.disableEdgeStyle=!0,mxFastOrganicLayout.prototype.forceConstant=50,mxFastOrganicLayout.prototype.forceConstantSquared=0,mxFastOrganicLayout.prototype.minDistanceLimit=2,mxFastOrganicLayout.prototype.maxDistanceLimit=500,mxFastOrganicLayout.prototype.minDistanceLimitSquared=4,mxFastOrganicLayout.prototype.initialTemp=200,mxFastOrganicLayout.prototype.temperature=0,mxFastOrganicLayout.prototype.maxIterations=0,mxFastOrganicLayout.prototype.iteration=0,mxFastOrganicLayout.prototype.allowedToRun=!0,mxFastOrganicLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxFastOrganicLayout.prototype.execute=function(e){var t=this.graph.getModel();this.vertexArray=[];for(var r=this.graph.getChildVertices(e),o=0;o<r.length;o++)this.isVertexIgnored(r[o])||this.vertexArray.push(r[o]);var a=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,u=this.vertexArray.length;for(this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant,o=0;o<this.vertexArray.length;o++){var c=this.vertexArray[o];this.cellLocation[o]=[];var f=mxObjectIdentity.get(c);this.indices[f]=o;var x=(m=this.getVertexBounds(c)).width,v=m.height,S=m.y;this.cellLocation[o][0]=(E=m.x)+x/2,this.cellLocation[o][1]=S+v/2,this.radius[o]=Math.min(x,v),this.radiusSquared[o]=this.radius[o]*this.radius[o]}t.beginUpdate();try{for(o=0;o<u;o++){this.dispX[o]=0,this.dispY[o]=0,this.isMoveable[o]=this.isVertexMovable(this.vertexArray[o]);var b=this.graph.getConnections(this.vertexArray[o],e);r=this.graph.getOpposites(b,this.vertexArray[o]),this.neighbours[o]=[];for(var _=0;_<r.length;_++){this.resetEdges&&this.graph.resetEdge(b[_]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(b[_],!1),f=mxObjectIdentity.get(r[_]);var D=this.indices[f];this.neighbours[o][_]=null!=D?D:o}}for(this.temperature=this.initialTemp,0==this.maxIterations&&(this.maxIterations=20*Math.sqrt(u)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}var M=null,R=null;for(o=0;o<this.vertexArray.length;o++){var m;if(this.isVertexMovable(c=this.vertexArray[o])&&null!=(m=this.getVertexBounds(c))){this.cellLocation[o][0]-=m.width/2,this.cellLocation[o][1]-=m.height/2;var E=this.graph.snap(Math.round(this.cellLocation[o][0]));S=this.graph.snap(Math.round(this.cellLocation[o][1])),this.setVertexLocation(c,E,S),M=null==M?E:Math.min(M,E),R=null==R?S:Math.min(R,S)}}var N=1-(M||0),V=1-(R||0);null!=a&&(N+=a.x,V+=a.y),this.graph.moveCells(this.vertexArray,N,V)}finally{t.endUpdate()}},mxFastOrganicLayout.prototype.calcPositions=function(){for(var e=0;e<this.vertexArray.length;e++)if(this.isMoveable[e]){var t=Math.sqrt(this.dispX[e]*this.dispX[e]+this.dispY[e]*this.dispY[e]);t<.001&&(t=.001);var r=this.dispX[e]/t*Math.min(t,this.temperature),o=this.dispY[e]/t*Math.min(t,this.temperature);this.dispX[e]=0,this.dispY[e]=0,this.cellLocation[e][0]+=r,this.cellLocation[e][1]+=o}},mxFastOrganicLayout.prototype.calcAttraction=function(){for(var e=0;e<this.vertexArray.length;e++)for(var t=0;t<this.neighbours[e].length;t++){var r=this.neighbours[e][t];if(e!=r&&this.isMoveable[e]&&this.isMoveable[r]){var o=this.cellLocation[e][0]-this.cellLocation[r][0],a=this.cellLocation[e][1]-this.cellLocation[r][1],u=o*o+a*a-this.radiusSquared[e]-this.radiusSquared[r];u<this.minDistanceLimitSquared&&(u=this.minDistanceLimitSquared);var c=Math.sqrt(u),f=u/this.forceConstant,m=o/c*f,x=a/c*f;this.dispX[e]-=m,this.dispY[e]-=x,this.dispX[r]+=m,this.dispY[r]+=x}}},mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var e=this.vertexArray.length,t=0;t<e;t++)for(var r=t;r<e;r++){if(!this.allowedToRun)return;if(r!=t&&this.isMoveable[t]&&this.isMoveable[r]){var o=this.cellLocation[t][0]-this.cellLocation[r][0],a=this.cellLocation[t][1]-this.cellLocation[r][1];0==o&&(o=.01+Math.random()),0==a&&(a=.01+Math.random());var u=Math.sqrt(o*o+a*a),c=u-this.radius[t]-this.radius[r];if(c>this.maxDistanceLimit)continue;c<this.minDistanceLimit&&(c=this.minDistanceLimit);var f=this.forceConstantSquared/c,m=o/u*f,x=a/u*f;this.dispX[t]+=m,this.dispY[t]+=x,this.dispX[r]-=m,this.dispY[r]-=x}}},mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)},__mxOutput.mxFastOrganicLayout=void 0!==mxFastOrganicLayout?mxFastOrganicLayout:void 0,mxCircleLayout.prototype=new mxGraphLayout,mxCircleLayout.prototype.constructor=mxCircleLayout,mxCircleLayout.prototype.radius=null,mxCircleLayout.prototype.moveCircle=!1,mxCircleLayout.prototype.x0=0,mxCircleLayout.prototype.y0=0,mxCircleLayout.prototype.resetEdges=!0,mxCircleLayout.prototype.disableEdgeStyle=!0,mxCircleLayout.prototype.execute=function(e){var t=this.graph.getModel();t.beginUpdate();try{for(var r=0,o=null,a=null,u=[],c=t.getChildCount(e),f=0;f<c;f++){var m=t.getChildAt(e,f);if(this.isVertexIgnored(m))this.isEdgeIgnored(m)||(this.resetEdges&&this.graph.resetEdge(m),this.disableEdgeStyle&&this.setEdgeStyleEnabled(m,!1));else{u.push(m);var x=this.getVertexBounds(m);o=null==o?x.y:Math.min(o,x.y),a=null==a?x.x:Math.min(a,x.x),r=Math.max(r,Math.max(x.width,x.height))}}var v=this.getRadius(u.length,r);this.moveCircle&&(a=this.x0,o=this.y0),this.circle(u,v,a,o)}finally{t.endUpdate()}},mxCircleLayout.prototype.getRadius=function(e,t){return Math.max(e*t/Math.PI,this.radius)},mxCircleLayout.prototype.circle=function(e,t,r,o){for(var a=e.length,u=2*Math.PI/a,c=0;c<a;c++)this.isVertexMovable(e[c])&&this.setVertexLocation(e[c],Math.round(r+t+t*Math.sin(c*u)),Math.round(o+t+t*Math.cos(c*u)))},__mxOutput.mxCircleLayout=void 0!==mxCircleLayout?mxCircleLayout:void 0,mxParallelEdgeLayout.prototype=new mxGraphLayout,mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout,mxParallelEdgeLayout.prototype.spacing=20,mxParallelEdgeLayout.prototype.checkOverlap=!1,mxParallelEdgeLayout.prototype.execute=function(e,t){var r=this.findParallels(e,t);this.graph.model.beginUpdate();try{for(var o in r){var a=r[o];a.length>1&&this.layout(a)}}finally{this.graph.model.endUpdate()}},mxParallelEdgeLayout.prototype.findParallels=function(e,t){var r=[],o=mxUtils.bind(this,function(f){if(!this.isEdgeIgnored(f)){var m=this.getEdgeId(f);null!=m&&(null==r[m]&&(r[m]=[]),r[m].push(f))}});if(null!=t)for(var a=0;a<t.length;a++)o(t[a]);else{var u=this.graph.getModel(),c=u.getChildCount(e);for(a=0;a<c;a++)o(u.getChildAt(e,a))}return r},mxParallelEdgeLayout.prototype.getEdgeId=function(e){var t=this.graph.getView(),r=t.getVisibleTerminal(e,!0),o=t.getVisibleTerminal(e,!1),a="";if(null!=r&&null!=o){if(r=mxObjectIdentity.get(r),o=mxObjectIdentity.get(o),this.checkOverlap){var u=this.graph.view.getState(e);if(null!=u&&null!=u.absolutePoints){for(var c=[],f=0;f<u.absolutePoints.length;f++){var m=u.absolutePoints[f];null!=m&&c.push(m.x,m.y)}a=c.join(",")}}return(r>o?o+"-"+r:r+"-"+o)+a}return null},mxParallelEdgeLayout.prototype.layout=function(e){var t=e[0],r=this.graph.getView(),o=this.graph.getModel(),a=o.getGeometry(r.getVisibleTerminal(t,!0)),u=o.getGeometry(r.getVisibleTerminal(t,!1));if(a==u)for(var c=a.x+a.width+this.spacing,f=a.y+a.height/2,m=0;m<e.length;m++)this.route(e[m],c,f),c+=this.spacing;else if(null!=a&&null!=u){var x=a.x+a.width/2,v=a.y+a.height/2,b=u.x+u.width/2-x,_=u.y+u.height/2-v,D=Math.sqrt(b*b+_*_);if(D>0){c=x+b/2,f=v+_/2;var M=_*this.spacing/D,R=b*this.spacing/D;for(c+=M*(e.length-1)/2,f-=R*(e.length-1)/2,m=0;m<e.length;m++)this.route(e[m],c,f),c-=M,f+=R}}},mxParallelEdgeLayout.prototype.route=function(e,t,r){this.graph.isCellMovable(e)&&this.setEdgePoints(e,[new mxPoint(t,r)])},__mxOutput.mxParallelEdgeLayout=void 0!==mxParallelEdgeLayout?mxParallelEdgeLayout:void 0,mxCompositeLayout.prototype=new mxGraphLayout,mxCompositeLayout.prototype.constructor=mxCompositeLayout,mxCompositeLayout.prototype.layouts=null,mxCompositeLayout.prototype.master=null,mxCompositeLayout.prototype.moveCell=function(e,t,r){null!=this.master?this.master.moveCell.apply(this.master,arguments):this.layouts[0].moveCell.apply(this.layouts[0],arguments)},mxCompositeLayout.prototype.execute=function(e){var t=this.graph.getModel();t.beginUpdate();try{for(var r=0;r<this.layouts.length;r++)this.layouts[r].execute.apply(this.layouts[r],arguments)}finally{t.endUpdate()}},__mxOutput.mxCompositeLayout=void 0!==mxCompositeLayout?mxCompositeLayout:void 0,mxEdgeLabelLayout.prototype=new mxGraphLayout,mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout,mxEdgeLabelLayout.prototype.execute=function(e){for(var t=this.graph.view,r=this.graph.getModel(),o=[],a=[],u=r.getChildCount(e),c=0;c<u;c++){var f=r.getChildAt(e,c),m=t.getState(f);null!=m&&(this.isVertexIgnored(f)?this.isEdgeIgnored(f)||o.push(m):a.push(m))}this.placeLabels(a,o)},mxEdgeLabelLayout.prototype.placeLabels=function(e,t){var r=this.graph.getModel();r.beginUpdate();try{for(var o=0;o<t.length;o++){var a=t[o];if(null!=a&&null!=a.text&&null!=a.text.boundingBox)for(var u=0;u<e.length;u++){var c=e[u];null!=c&&this.avoid(a,c)}}}finally{r.endUpdate()}},mxEdgeLabelLayout.prototype.avoid=function(e,t){var r=this.graph.getModel(),o=e.text.boundingBox;if(mxUtils.intersects(o,t)){var a=-o.y-o.height+t.y,u=-o.y+t.y+t.height,c=Math.abs(a)<Math.abs(u)?a:u,f=-o.x-o.width+t.x,m=-o.x+t.x+t.width,x=Math.abs(f)<Math.abs(m)?f:m;Math.abs(x)<Math.abs(c)?c=0:x=0;var v=r.getGeometry(e.cell);null!=v&&(null!=(v=v.clone()).offset?(v.offset.x+=x,v.offset.y+=c):v.offset=new mxPoint(x,c),r.setGeometry(e.cell,v))}},__mxOutput.mxEdgeLabelLayout=void 0!==mxEdgeLabelLayout?mxEdgeLabelLayout:void 0,mxGraphAbstractHierarchyCell.prototype.maxRank=-1,mxGraphAbstractHierarchyCell.prototype.minRank=-1,mxGraphAbstractHierarchyCell.prototype.x=null,mxGraphAbstractHierarchyCell.prototype.y=null,mxGraphAbstractHierarchyCell.prototype.width=0,mxGraphAbstractHierarchyCell.prototype.height=0,mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.temp=null,mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(e){return null},mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(e){return null},mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1},mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1},mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(e){return null},mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(e,t){return null},mxGraphAbstractHierarchyCell.prototype.setX=function(e,t){this.isVertex()?this.x[0]=t:this.isEdge()&&(this.x[e-this.minRank-1]=t)},mxGraphAbstractHierarchyCell.prototype.getX=function(e){return this.isVertex()?this.x[0]:this.isEdge()?this.x[e-this.minRank-1]:0},mxGraphAbstractHierarchyCell.prototype.setY=function(e,t){this.isVertex()?this.y[0]=t:this.isEdge()&&(this.y[e-this.minRank-1]=t)},__mxOutput.mxGraphAbstractHierarchyCell=void 0!==mxGraphAbstractHierarchyCell?mxGraphAbstractHierarchyCell:void 0,mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode,mxGraphHierarchyNode.prototype.cell=null,mxGraphHierarchyNode.prototype.id=null,mxGraphHierarchyNode.prototype.connectsAsTarget=null,mxGraphHierarchyNode.prototype.connectsAsSource=null,mxGraphHierarchyNode.prototype.hashCode=!1,mxGraphHierarchyNode.prototype.getRankValue=function(e){return this.maxRank},mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(e){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var t=0;t<this.connectsAsTarget.length;t++){var r=this.connectsAsTarget[t];this.nextLayerConnectedCells[0].push(-1==r.maxRank||r.maxRank==e+1?r.source:r)}}return this.nextLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(e){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var t=0;t<this.connectsAsSource.length;t++){var r=this.connectsAsSource[t];this.previousLayerConnectedCells[0].push(-1==r.minRank||r.minRank==e-1?r.target:r)}}return this.previousLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.isVertex=function(){return!0},mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(e){return this.temp[0]},mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(e,t){this.temp[0]=t},mxGraphHierarchyNode.prototype.isAncestor=function(e){if(null!=e&&null!=this.hashCode&&null!=e.hashCode&&this.hashCode.length<e.hashCode.length){if(this.hashCode==e.hashCode)return!0;if(null==this.hashCode||null==this.hashCode)return!1;for(var t=0;t<this.hashCode.length;t++)if(this.hashCode[t]!=e.hashCode[t])return!1;return!0}return!1},mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell},__mxOutput.mxGraphHierarchyNode=void 0!==mxGraphHierarchyNode?mxGraphHierarchyNode:void 0,mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge,mxGraphHierarchyEdge.prototype.edges=null,mxGraphHierarchyEdge.prototype.ids=null,mxGraphHierarchyEdge.prototype.source=null,mxGraphHierarchyEdge.prototype.target=null,mxGraphHierarchyEdge.prototype.isReversed=!1,mxGraphHierarchyEdge.prototype.invert=function(e){var t=this.source;this.source=this.target,this.target=t,this.isReversed=!this.isReversed},mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(e){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[];for(var t=0;t<this.temp.length;t++)this.nextLayerConnectedCells[t]=[],this.nextLayerConnectedCells[t].push(t==this.temp.length-1?this.source:this)}return this.nextLayerConnectedCells[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(e){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[];for(var t=0;t<this.temp.length;t++)this.previousLayerConnectedCells[t]=[],this.previousLayerConnectedCells[t].push(0==t?this.target:this)}return this.previousLayerConnectedCells[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.isEdge=function(){return!0},mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(e){return this.temp[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(e,t){this.temp[e-this.minRank-1]=t},mxGraphHierarchyEdge.prototype.getCoreCell=function(){return null!=this.edges&&this.edges.length>0?this.edges[0]:null},__mxOutput.mxGraphHierarchyEdge=void 0!==mxGraphHierarchyEdge?mxGraphHierarchyEdge:void 0,mxGraphHierarchyModel.prototype.maxRank=null,mxGraphHierarchyModel.prototype.vertexMapper=null,mxGraphHierarchyModel.prototype.edgeMapper=null,mxGraphHierarchyModel.prototype.ranks=null,mxGraphHierarchyModel.prototype.roots=null,mxGraphHierarchyModel.prototype.parent=null,mxGraphHierarchyModel.prototype.dfsCount=0,mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxGraphHierarchyModel.prototype.createInternalCells=function(e,t,r){for(var o=e.getGraph(),a=0;a<t.length;a++){r[a]=new mxGraphHierarchyNode(t[a]),this.vertexMapper.put(t[a],r[a]);var u=e.getEdges(t[a]);r[a].connectsAsSource=[];for(var c=0;c<u.length;c++){var f=e.getVisibleTerminal(u[c],!1);if(f!=t[a]&&e.graph.model.isVertex(f)&&!e.isVertexIgnored(f)){var m=e.getEdgesBetween(t[a],f,!1),x=e.getEdgesBetween(t[a],f,!0);if(null!=m&&m.length>0&&null==this.edgeMapper.get(m[0])&&2*x.length>=m.length){for(var v=new mxGraphHierarchyEdge(m),E=0;E<m.length;E++){var S=m[E];this.edgeMapper.put(S,v),o.resetEdge(S),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(S,!1),e.setOrthogonalEdge(S,!0))}v.source=r[a],mxUtils.indexOf(r[a].connectsAsSource,v)<0&&r[a].connectsAsSource.push(v)}}}r[a].temp[0]=0}},mxGraphHierarchyModel.prototype.initialRank=function(){var e=[];if(null!=this.roots)for(var t=0;t<this.roots.length;t++)null!=(r=this.vertexMapper.get(this.roots[t]))&&e.push(r);var o=this.vertexMapper.getValues();for(t=0;t<o.length;t++)o[t].temp[0]=-1;for(var a=e.slice();e.length>0;){var c;u=(r=e[0]).connectsAsTarget,c=r.connectsAsSource;var f=!0,m=this.SOURCESCANSTARTRANK;for(t=0;t<u.length;t++){if(5270620!=(x=u[t]).temp[0]){f=!1;break}var v=x.source;m=Math.min(m,v.temp[0]-1)}if(f){if(r.temp[0]=m,this.maxRank=Math.min(this.maxRank,m),null!=c)for(t=0;t<c.length;t++)(x=c[t]).temp[0]=5270620,-1==(v=x.target).temp[0]&&(e.push(v),v.temp[0]=-2);e.shift()}else{var E=e.shift();if(e.push(r),E==r&&1==e.length)break}}for(t=0;t<o.length;t++)o[t].temp[0]-=this.maxRank;for(t=0;t<a.length;t++)for(var r,S=0,u=(r=a[t]).connectsAsSource,b=0;b<u.length;b++){var x;v=(x=u[b]).target,r.temp[0]=Math.max(S,v.temp[0]+1),S=r.temp[0]}this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank},mxGraphHierarchyModel.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var r=null;if(null!=this.roots){var o=this.roots;for(r=[],t=0;t<o.length;t++){var u=this.vertexMapper.get(o[t]);r[t]=u}}this.visit(function(c,f,m,x,v){if(0==v&&f.maxRank<0&&f.minRank<0&&(e[f.temp[0]].push(f),f.maxRank=f.temp[0],f.minRank=f.temp[0],f.temp[0]=e[f.maxRank].length-1),null!=c&&null!=m&&c.maxRank-f.maxRank>1){m.maxRank=c.maxRank,m.minRank=f.maxRank,m.temp=[],m.x=[],m.y=[];for(var S=m.minRank+1;S<m.maxRank;S++)e[S].push(m),m.setGeneralPurposeVariable(S,e[S].length-1)}},r,!1,null)},mxGraphHierarchyModel.prototype.visit=function(e,t,r,o){if(null!=t){for(var a=0;a<t.length;a++){var u=t[a];null!=u&&(null==o&&(o=new Object),r?(u.hashCode=[],u.hashCode[0]=this.dfsCount,u.hashCode[1]=a,this.extendedDfs(null,u,null,e,o,u.hashCode,a,0)):this.dfs(null,u,null,e,o,0))}this.dfsCount++}},mxGraphHierarchyModel.prototype.dfs=function(e,t,r,o,a,u){if(null!=t){var c=t.id;if(null==a[c]){a[c]=t,o(e,t,r,u,0);for(var f=t.connectsAsSource.slice(),m=0;m<f.length;m++){var x=f[m];this.dfs(t,x.target,x,o,a,u+1)}}else o(e,t,r,u,1)}},mxGraphHierarchyModel.prototype.extendedDfs=function(e,t,r,o,a,u,c,f){if(null!=t){if(null!=e&&(null==t.hashCode||t.hashCode[0]!=e.hashCode[0])){var m=e.hashCode.length+1;t.hashCode=e.hashCode.slice(),t.hashCode[m-1]=c}var x=t.id;if(null==a[x]){a[x]=t,o(e,t,r,f,0);for(var v=t.connectsAsSource.slice(),E=0;E<v.length;E++){var S=v[E];this.extendedDfs(t,S.target,S,o,a,t.hashCode,E,f+1)}}else o(e,t,r,f,1)}},__mxOutput.mxGraphHierarchyModel=void 0!==mxGraphHierarchyModel?mxGraphHierarchyModel:void 0,mxSwimlaneModel.prototype.maxRank=null,mxSwimlaneModel.prototype.vertexMapper=null,mxSwimlaneModel.prototype.edgeMapper=null,mxSwimlaneModel.prototype.ranks=null,mxSwimlaneModel.prototype.roots=null,mxSwimlaneModel.prototype.parent=null,mxSwimlaneModel.prototype.dfsCount=0,mxSwimlaneModel.prototype.SOURCESCANSTARTRANK=1e8,mxSwimlaneModel.prototype.tightenToSource=!1,mxSwimlaneModel.prototype.ranksPerGroup=null,mxSwimlaneModel.prototype.createInternalCells=function(e,t,r){for(var o=e.getGraph(),a=e.swimlanes,u=0;u<t.length;u++){r[u]=new mxGraphHierarchyNode(t[u]),this.vertexMapper.put(t[u],r[u]),r[u].swimlaneIndex=-1;for(var c=0;c<a.length;c++)if(o.model.getParent(t[u])==a[c]){r[u].swimlaneIndex=c;break}var f=e.getEdges(t[u]);r[u].connectsAsSource=[];for(var m=0;m<f.length;m++){var x=e.getVisibleTerminal(f[m],!1);if(x!=t[u]&&e.graph.model.isVertex(x)&&!e.isVertexIgnored(x)){var v=e.getEdgesBetween(t[u],x,!1),E=e.getEdgesBetween(t[u],x,!0);if(null!=v&&v.length>0&&null==this.edgeMapper.get(v[0])&&2*E.length>=v.length){for(var S=new mxGraphHierarchyEdge(v),b=0;b<v.length;b++){var _=v[b];this.edgeMapper.put(_,S),o.resetEdge(_),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(_,!1),e.setOrthogonalEdge(_,!0))}S.source=r[u],mxUtils.indexOf(r[u].connectsAsSource,S)<0&&r[u].connectsAsSource.push(S)}}}r[u].temp[0]=0}},mxSwimlaneModel.prototype.initialRank=function(){this.ranksPerGroup=[];var e=[],t=new Object;if(null!=this.roots)for(var r=0;r<this.roots.length;r++){var o=this.vertexMapper.get(this.roots[r]);this.maxChainDfs(null,o,null,t,0),null!=o&&e.push(o)}var a=[],u=[];for(r=this.ranksPerGroup.length-1;r>=0;r--)a[r]=r==this.ranksPerGroup.length-1?0:u[r+1]+1,u[r]=a[r]+this.ranksPerGroup[r];this.maxRank=u[0];var c=this.vertexMapper.getValues();for(r=0;r<c.length;r++)c[r].temp[0]=-1;for(e.slice();e.length>0;){var m,x;m=(o=e[0]).connectsAsTarget,x=o.connectsAsSource;var v=!0,E=u[0];for(r=0;r<m.length;r++){if(5270620!=(S=m[r]).temp[0]){v=!1;break}var b=S.source;E=Math.min(E,b.temp[0]-1)}if(v){if(E>u[o.swimlaneIndex]&&(E=u[o.swimlaneIndex]),o.temp[0]=E,null!=x)for(r=0;r<x.length;r++){var S;(S=x[r]).temp[0]=5270620,-1==(b=S.target).temp[0]&&(e.push(b),b.temp[0]=-2)}e.shift()}else{var _=e.shift();if(e.push(o),_==o&&1==e.length)break}}},mxSwimlaneModel.prototype.maxChainDfs=function(e,t,r,o,a){if(null!=t){var u=mxCellPath.create(t.cell);if(null==o[u]){o[u]=t;var c=t.swimlaneIndex;(null==this.ranksPerGroup[c]||this.ranksPerGroup[c]<a)&&(this.ranksPerGroup[c]=a);for(var f=t.connectsAsSource.slice(),m=0;m<f.length;m++){var x=f[m],v=x.target;t.swimlaneIndex<v.swimlaneIndex?this.maxChainDfs(t,v,x,mxUtils.clone(o,null,!0),0):t.swimlaneIndex==v.swimlaneIndex&&this.maxChainDfs(t,v,x,mxUtils.clone(o,null,!0),a+1)}}}},mxSwimlaneModel.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var r=null;if(null!=this.roots){var o=this.roots;for(r=[],t=0;t<o.length;t++){var u=this.vertexMapper.get(o[t]);r[t]=u}}this.visit(function(c,f,m,x,v){if(0==v&&f.maxRank<0&&f.minRank<0&&(e[f.temp[0]].push(f),f.maxRank=f.temp[0],f.minRank=f.temp[0],f.temp[0]=e[f.maxRank].length-1),null!=c&&null!=m&&c.maxRank-f.maxRank>1){m.maxRank=c.maxRank,m.minRank=f.maxRank,m.temp=[],m.x=[],m.y=[];for(var S=m.minRank+1;S<m.maxRank;S++)e[S].push(m),m.setGeneralPurposeVariable(S,e[S].length-1)}},r,!1,null)},mxSwimlaneModel.prototype.visit=function(e,t,r,o){if(null!=t){for(var a=0;a<t.length;a++){var u=t[a];null!=u&&(null==o&&(o=new Object),r?(u.hashCode=[],u.hashCode[0]=this.dfsCount,u.hashCode[1]=a,this.extendedDfs(null,u,null,e,o,u.hashCode,a,0)):this.dfs(null,u,null,e,o,0))}this.dfsCount++}},mxSwimlaneModel.prototype.dfs=function(e,t,r,o,a,u){if(null!=t){var c=t.id;if(null==a[c]){a[c]=t,o(e,t,r,u,0);for(var f=t.connectsAsSource.slice(),m=0;m<f.length;m++){var x=f[m];this.dfs(t,x.target,x,o,a,u+1)}}else o(e,t,r,u,1)}},mxSwimlaneModel.prototype.extendedDfs=function(e,t,r,o,a,u,c,f){if(null!=t){if(null!=e&&(null==t.hashCode||t.hashCode[0]!=e.hashCode[0])){var m=e.hashCode.length+1;t.hashCode=e.hashCode.slice(),t.hashCode[m-1]=c}var x=t.id;if(null==a[x]){a[x]=t,o(e,t,r,f,0);for(var v=t.connectsAsSource.slice(),E=t.connectsAsTarget.slice(),S=0;S<v.length;S++)t.swimlaneIndex<=(_=(b=v[S]).target).swimlaneIndex&&this.extendedDfs(t,_,b,o,a,t.hashCode,S,f+1);for(S=0;S<E.length;S++){var b,_;t.swimlaneIndex<(_=(b=E[S]).source).swimlaneIndex&&this.extendedDfs(t,_,b,o,a,t.hashCode,S,f+1)}}else o(e,t,r,f,1)}},__mxOutput.mxSwimlaneModel=void 0!==mxSwimlaneModel?mxSwimlaneModel:void 0,mxHierarchicalLayoutStage.prototype.execute=function(e){},__mxOutput.mxHierarchicalLayoutStage=void 0!==mxHierarchicalLayoutStage?mxHierarchicalLayoutStage:void 0,mxMedianHybridCrossingReduction.prototype=new mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype.constructor=mxMedianHybridCrossingReduction,mxMedianHybridCrossingReduction.prototype.layout=null,mxMedianHybridCrossingReduction.prototype.maxIterations=24,mxMedianHybridCrossingReduction.prototype.nestedBestRanks=null,mxMedianHybridCrossingReduction.prototype.currentBestCrossings=0,mxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement=0,mxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations=2,mxMedianHybridCrossingReduction.prototype.execute=function(e){var t=this.layout.getModel();this.nestedBestRanks=[];for(var r=0;r<t.ranks.length;r++)this.nestedBestRanks[r]=t.ranks[r].slice();var o=0,a=this.calculateCrossings(t);for(r=0;r<this.maxIterations&&o<this.maxNoImprovementIterations;r++){this.weightedMedian(r,t),this.transpose(r,t);var u=this.calculateCrossings(t);if(u<a){a=u,o=0;for(var c=0;c<this.nestedBestRanks.length;c++)for(var f=t.ranks[c],m=0;m<f.length;m++)this.nestedBestRanks[c][(x=f[m]).getGeneralPurposeVariable(c)]=x}else for(o++,c=0;c<this.nestedBestRanks.length;c++)for(f=t.ranks[c],m=0;m<f.length;m++){var x;(x=f[m]).setGeneralPurposeVariable(c,m)}if(0==a)break}var v=[],E=[];for(r=0;r<t.maxRank+1;r++)E[r]=[],v[r]=E[r];for(r=0;r<this.nestedBestRanks.length;r++)for(c=0;c<this.nestedBestRanks[r].length;c++)E[r].push(this.nestedBestRanks[r][c]);t.ranks=v},mxMedianHybridCrossingReduction.prototype.calculateCrossings=function(e){for(var t=e.ranks.length,r=0,o=1;o<t;o++)r+=this.calculateRankCrossing(o,e);return r},mxMedianHybridCrossingReduction.prototype.calculateRankCrossing=function(e,t){for(var r=0,o=t.ranks[e],a=t.ranks[e-1],u=[],c=0;c<o.length;c++){for(var f=o[c],m=f.getGeneralPurposeVariable(e),x=f.getPreviousLayerConnectedCells(e),v=[],E=0;E<x.length;E++){var b=x[E].getGeneralPurposeVariable(e-1);v.push(b)}v.sort(function(O,F){return O-F}),u[m]=v}var _=[];for(c=0;c<u.length;c++)_=_.concat(u[c]);for(var D=1;D<a.length;)D<<=1;var M=2*D-1;D-=1;var R=[];for(c=0;c<M;++c)R[c]=0;for(c=0;c<_.length;c++){var V=_[c]+D;for(++R[V];V>0;)V%2&&(r+=R[V+1]),++R[V=V-1>>1]}return r},mxMedianHybridCrossingReduction.prototype.transpose=function(e,t){for(var r=!0,o=0;r&&o++<10;){var u=e%2==1&&o%2==1;r=!1;for(var c=0;c<t.ranks.length;c++){for(var f=t.ranks[c],m=[],x=0;x<f.length;x++){var v=f[x],E=v.getGeneralPurposeVariable(c);E<0&&(E=x),m[E]=v}var S=null,b=null,_=null,D=null,M=null,R=null,N=null,V=null,O=null,F=null;for(x=0;x<f.length-1;x++){if(0==x){S=(O=m[x]).getNextLayerConnectedCells(c),b=O.getPreviousLayerConnectedCells(c),M=[],R=[];for(var G=0;G<S.length;G++)M[G]=S[G].getGeneralPurposeVariable(c+1);for(G=0;G<b.length;G++)R[G]=b[G].getGeneralPurposeVariable(c-1)}else S=_,b=D,M=N,R=V,O=F;for(_=(F=m[x+1]).getNextLayerConnectedCells(c),D=F.getPreviousLayerConnectedCells(c),N=[],V=[],G=0;G<_.length;G++)N[G]=_[G].getGeneralPurposeVariable(c+1);for(G=0;G<D.length;G++)V[G]=D[G].getGeneralPurposeVariable(c-1);var j=0,Y=0;for(G=0;G<M.length;G++)for(var W=0;W<N.length;W++)M[G]>N[W]&&j++,M[G]<N[W]&&Y++;for(G=0;G<R.length;G++)for(W=0;W<V.length;W++)R[G]>V[W]&&j++,R[G]<V[W]&&Y++;if(Y<j||Y==j&&u){var q=O.getGeneralPurposeVariable(c);O.setGeneralPurposeVariable(c,F.getGeneralPurposeVariable(c)),F.setGeneralPurposeVariable(c,q),_=S,D=b,N=M,V=R,F=O,u||(r=!0)}}}}},mxMedianHybridCrossingReduction.prototype.weightedMedian=function(e,t){var r=e%2==0;if(r)for(var o=t.maxRank-1;o>=0;o--)this.medianRank(o,r);else for(o=1;o<t.maxRank;o++)this.medianRank(o,r)},mxMedianHybridCrossingReduction.prototype.medianRank=function(e,t){for(var r=this.nestedBestRanks[e].length,o=[],a=[],u=0;u<r;u++){var m,x,c=this.nestedBestRanks[e][u],f=new MedianCellSorter;f.cell=c,x=t?e+1:e-1,null!=(m=t?c.getNextLayerConnectedCells(e):c.getPreviousLayerConnectedCells(e))&&0!=m.length?(f.medianValue=this.medianValue(m,x),o.push(f)):a[c.getGeneralPurposeVariable(e)]=!0}for(o.sort(MedianCellSorter.prototype.compare),u=0;u<r;u++)null==a[u]&&(c=o.shift().cell).setGeneralPurposeVariable(e,u)},mxMedianHybridCrossingReduction.prototype.medianValue=function(e,t){for(var r=[],o=0,a=0;a<e.length;a++)r[o++]=e[a].getGeneralPurposeVariable(t);if(r.sort(function(x,v){return x-v}),o%2==1)return r[Math.floor(o/2)];if(2==o)return(r[0]+r[1])/2;var c=o/2,f=r[c-1]-r[0],m=r[o-1]-r[c];return(r[c-1]*m+r[c]*f)/(f+m)},MedianCellSorter.prototype.medianValue=0,MedianCellSorter.prototype.cell=!1,MedianCellSorter.prototype.compare=function(e,t){return null!=e&&null!=t?t.medianValue>e.medianValue?-1:t.medianValue<e.medianValue?1:0:0},__mxOutput.mxMedianHybridCrossingReduction=void 0!==mxMedianHybridCrossingReduction?mxMedianHybridCrossingReduction:void 0,mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage,mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover,mxMinimumCycleRemover.prototype.layout=null,mxMinimumCycleRemover.prototype.execute=function(e){for(var t=this.layout.getModel(),r=new Object,o=t.vertexMapper.getValues(),a=new Object,u=0;u<o.length;u++)a[o[u].id]=o[u];var c=null;if(null!=t.roots){var f=t.roots;for(c=[],u=0;u<f.length;u++)c[u]=t.vertexMapper.get(f[u])}t.visit(function(x,v,E,S,b){v.isAncestor(x)&&(E.invert(),mxUtils.remove(E,x.connectsAsSource),x.connectsAsTarget.push(E),mxUtils.remove(E,v.connectsAsTarget),v.connectsAsSource.push(E)),r[v.id]=v,delete a[v.id]},c,!0,null);var m=mxUtils.clone(r,null,!0);t.visit(function(x,v,E,S,b){v.isAncestor(x)&&(E.invert(),mxUtils.remove(E,x.connectsAsSource),v.connectsAsSource.push(E),x.connectsAsTarget.push(E),mxUtils.remove(E,v.connectsAsTarget)),r[v.id]=v,delete a[v.id]},a,!0,m)},__mxOutput.mxMinimumCycleRemover=void 0!==mxMinimumCycleRemover?mxMinimumCycleRemover:void 0,mxCoordinateAssignment.prototype=new mxHierarchicalLayoutStage,mxCoordinateAssignment.prototype.constructor=mxCoordinateAssignment,mxCoordinateAssignment.prototype.layout=null,mxCoordinateAssignment.prototype.intraCellSpacing=30,mxCoordinateAssignment.prototype.interRankCellSpacing=100,mxCoordinateAssignment.prototype.parallelEdgeSpacing=10,mxCoordinateAssignment.prototype.maxIterations=8,mxCoordinateAssignment.prototype.prefHozEdgeSep=5,mxCoordinateAssignment.prototype.prefVertEdgeOff=2,mxCoordinateAssignment.prototype.minEdgeJetty=12,mxCoordinateAssignment.prototype.channelBuffer=4,mxCoordinateAssignment.prototype.jettyPositions=null,mxCoordinateAssignment.prototype.orientation=mxConstants.DIRECTION_NORTH,mxCoordinateAssignment.prototype.initialX=null,mxCoordinateAssignment.prototype.limitX=null,mxCoordinateAssignment.prototype.currentXDelta=null,mxCoordinateAssignment.prototype.widestRank=null,mxCoordinateAssignment.prototype.rankTopY=null,mxCoordinateAssignment.prototype.rankBottomY=null,mxCoordinateAssignment.prototype.widestRankValue=null,mxCoordinateAssignment.prototype.rankWidths=null,mxCoordinateAssignment.prototype.rankY=null,mxCoordinateAssignment.prototype.fineTuning=!0,mxCoordinateAssignment.prototype.nextLayerConnectedCache=null,mxCoordinateAssignment.prototype.previousLayerConnectedCache=null,mxCoordinateAssignment.prototype.groupPadding=10,mxCoordinateAssignment.prototype.printStatus=function(){var e=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var t=0;t<e.ranks.length;t++){mxLog.write("Rank ",t," : ");for(var r=e.ranks[t],o=0;o<r.length;o++)mxLog.write(r[o].getGeneralPurposeVariable(t),"  ");mxLog.writeln()}mxLog.writeln("====================================")},mxCoordinateAssignment.prototype.execute=function(e){this.jettyPositions=Object();var t=this.layout.getModel();this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),t),this.fineTuning&&this.minNode(t);var r=1e8;if(this.fineTuning)for(var o=0;o<this.maxIterations;o++){if(0!=o&&(this.medianPos(o,t),this.minNode(t)),this.currentXDelta<r){for(var a=0;a<t.ranks.length;a++)for(var u=t.ranks[a],c=0;c<u.length;c++)(f=u[c]).setX(a,f.getGeneralPurposeVariable(a));r=this.currentXDelta}else for(a=0;a<t.ranks.length;a++)for(u=t.ranks[a],c=0;c<u.length;c++){var f;(f=u[c]).setGeneralPurposeVariable(a,f.getX(a))}this.minPath(this.layout.getGraph(),t),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),t)},mxCoordinateAssignment.prototype.minNode=function(e){for(var t=[],r=new mxDictionary,o=[],a=0;a<=e.maxRank;a++){o[a]=e.ranks[a];for(var u=0;u<o[a].length;u++){var c=o[a][u],f=new WeightedCellSorter(c,a);f.rankIndex=u,f.visited=!0,t.push(f),r.put(c,f)}}for(var m=10*t.length,x=0;t.length>0&&x<=m;){var E=t.shift(),S=E.cell,b=E.weightedValue,_=parseInt(E.rankIndex),D=S.getNextLayerConnectedCells(b),M=S.getPreviousLayerConnectedCells(b),R=D.length,N=M.length,V=this.medianXValue(D,b+1),O=this.medianXValue(M,b-1),F=R+N,G=S.getGeneralPurposeVariable(b),j=G;F>0&&(j=(V*R+O*N)/F);var Y=!1;if(j<G-1)if(0==_)S.setGeneralPurposeVariable(b,j),Y=!0;else{var W=o[b][_-1],q=W.getGeneralPurposeVariable(b);(q=q+W.width/2+this.intraCellSpacing+S.width/2)<j?(S.setGeneralPurposeVariable(b,j),Y=!0):q<S.getGeneralPurposeVariable(b)-1&&(S.setGeneralPurposeVariable(b,q),Y=!0)}else if(j>G+1)if(_==o[b].length-1)S.setGeneralPurposeVariable(b,j),Y=!0;else{var Q=o[b][_+1],K=Q.getGeneralPurposeVariable(b);(K=K-Q.width/2-this.intraCellSpacing-S.width/2)>j?(S.setGeneralPurposeVariable(b,j),Y=!0):K>S.getGeneralPurposeVariable(b)+1&&(S.setGeneralPurposeVariable(b,K),Y=!0)}if(Y){for(a=0;a<D.length;a++)null!=(U=r.get(D[a]))&&0==U.visited&&(U.visited=!0,t.push(U));for(a=0;a<M.length;a++){var U;null!=(U=r.get(M[a]))&&0==U.visited&&(U.visited=!0,t.push(U))}}E.visited=!1,x++}},mxCoordinateAssignment.prototype.medianPos=function(e,t){if(e%2==0)for(var o=t.maxRank;o>0;o--)this.rankMedianPosition(o-1,t,o);else for(o=0;o<t.maxRank-1;o++)this.rankMedianPosition(o+1,t,o)},mxCoordinateAssignment.prototype.rankMedianPosition=function(e,t,r){for(var o=t.ranks[e],a=[],u=new Object,c=0;c<o.length;c++){var f=o[c];a[c]=new WeightedCellSorter,a[c].cell=f,a[c].rankIndex=c,u[f.id]=a[c];var m=null;m=r<e?f.getPreviousLayerConnectedCells(e):f.getNextLayerConnectedCells(e),a[c].weightedValue=this.calculatedWeightedValue(f,m)}for(a.sort(WeightedCellSorter.prototype.compare),c=0;c<a.length;c++){var v=a[c].cell,E=(m=null,0);null!=(m=r<e?v.getPreviousLayerConnectedCells(e).slice():v.getNextLayerConnectedCells(e).slice())&&(E=m.length>0?this.medianXValue(m,r):v.getGeneralPurposeVariable(e));for(var S=0,b=-1e8,_=a[c].rankIndex-1;_>=0;)if(null!=(D=u[o[_].id])){var M=D.cell;D.visited?(b=M.getGeneralPurposeVariable(e)+M.width/2+this.intraCellSpacing+S+v.width/2,_=-1):(S+=M.width+this.intraCellSpacing,_--)}var R=0,N=1e8;for(_=a[c].rankIndex+1;_<a.length;){var D;if(null!=(D=u[o[_].id])){var V=D.cell;D.visited?(N=V.getGeneralPurposeVariable(e)-V.width/2-this.intraCellSpacing-R-v.width/2,_=a.length):(R+=V.width+this.intraCellSpacing,_++)}}E>=b&&E<=N?v.setGeneralPurposeVariable(e,E):E<b?(v.setGeneralPurposeVariable(e,b),this.currentXDelta+=b-E):E>N&&(v.setGeneralPurposeVariable(e,N),this.currentXDelta+=E-N),a[c].visited=!0}},mxCoordinateAssignment.prototype.calculatedWeightedValue=function(e,t){for(var r=0,o=0;o<t.length;o++){var a=t[o];e.isVertex()&&a.isVertex()?r++:e.isEdge()&&a.isEdge()?r+=8:r+=2}return r},mxCoordinateAssignment.prototype.medianXValue=function(e,t){if(0==e.length)return 0;for(var r=[],o=0;o<e.length;o++)r[o]=e[o].getGeneralPurposeVariable(t);if(r.sort(function(f,m){return f-m}),e.length%2==1)return r[Math.floor(e.length/2)];var a=e.length/2;return(r[a-1]+r[a])/2},mxCoordinateAssignment.prototype.initialCoords=function(e,t){this.calculateWidestRank(e,t);for(var r=this.widestRank;r>=0;r--)r<t.maxRank&&this.rankCoordinates(r,e,t);for(r=this.widestRank+1;r<=t.maxRank;r++)r>0&&this.rankCoordinates(r,e,t)},mxCoordinateAssignment.prototype.rankCoordinates=function(e,t,r){for(var o=r.ranks[e],a=0,u=this.initialX+(this.widestRankValue-this.rankWidths[e])/2,c=!1,f=0;f<o.length;f++){var m=o[f];if(m.isVertex()){var x=this.layout.getVertexBounds(m.cell);null!=x?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(m.width=x.width,m.height=x.height):(m.width=x.height,m.height=x.width):c=!0,a=Math.max(a,m.height)}else if(m.isEdge()){var v=1;null!=m.edges?v=m.edges.length:mxLog.warn("edge.edges is null"),m.width=(v-1)*this.parallelEdgeSpacing}m.setX(e,u+=m.width/2),m.setGeneralPurposeVariable(e,u),u+=m.width/2,u+=this.intraCellSpacing}1==c&&mxLog.warn("At least one cell has no bounds")},mxCoordinateAssignment.prototype.calculateWidestRank=function(e,t){var r=-this.interRankCellSpacing,o=0;this.rankWidths=[],this.rankY=[];for(var a=t.maxRank;a>=0;a--){for(var u=0,c=t.ranks[a],f=this.initialX,m=!1,x=0;x<c.length;x++){var v=c[x];if(v.isVertex()){var E=this.layout.getVertexBounds(v.cell);null!=E?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(v.width=E.width,v.height=E.height):(v.width=E.height,v.height=E.width):m=!0,u=Math.max(u,v.height)}else if(v.isEdge()){var S=1;null!=v.edges?S=v.edges.length:mxLog.warn("edge.edges is null"),v.width=(S-1)*this.parallelEdgeSpacing}v.setX(a,f+=v.width/2),v.setGeneralPurposeVariable(a,f),f+=v.width/2,(f+=this.intraCellSpacing)>this.widestRankValue&&(this.widestRankValue=f,this.widestRank=a),this.rankWidths[a]=f}1==m&&mxLog.warn("At least one cell has no bounds"),this.rankY[a]=r;var b=u/2+o/2+this.interRankCellSpacing;for(o=u,this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_WEST?r+=b:r-=b,x=0;x<c.length;x++)c[x].setY(a,r)}},mxCoordinateAssignment.prototype.minPath=function(e,t){for(var r=t.edgeMapper.getValues(),o=0;o<r.length;o++){var a=r[o];if(!(a.maxRank-a.minRank-1<1)){for(var u=a.getGeneralPurposeVariable(a.minRank+1),c=!0,f=0,m=a.minRank+2;m<a.maxRank;m++){var x=a.getGeneralPurposeVariable(m);u!=x?(c=!1,u=x):f++}if(!c){var v=0,E=0,S=[],b=[],_=a.getGeneralPurposeVariable(a.minRank+1);for(m=a.minRank+1;m<a.maxRank-1;m++)_==(D=a.getX(m+1))||this.repositionValid(t,a,m+1,_)?(S[m-a.minRank-1]=_,v++):(S[m-a.minRank-1]=D,_=D);for(_=a.getX(m),m=a.maxRank-1;m>a.minRank+1;m--){var D;_==(D=a.getX(m-1))||this.repositionValid(t,a,m-1,_)?(b[m-a.minRank-2]=_,E++):(b[m-a.minRank-2]=a.getX(m-1),_=D)}if(E>f||v>f)if(E>=v)for(m=a.maxRank-2;m>a.minRank;m--)a.setX(m,b[m-a.minRank-1]);else if(v>E)for(m=a.minRank+2;m<a.maxRank;m++)a.setX(m,S[m-a.minRank-2])}}}},mxCoordinateAssignment.prototype.repositionValid=function(e,t,r,o){for(var a=e.ranks[r],u=-1,c=0;c<a.length;c++)if(t==a[c]){u=c;break}if(u<0)return!1;var f=t.getGeneralPurposeVariable(r);if(o<f){if(0==u)return!0;var m=a[u-1],x=m.getGeneralPurposeVariable(r);return(x=x+m.width/2+this.intraCellSpacing+t.width/2)<=o}if(o>f){if(u==a.length-1)return!0;var v=a[u+1],E=v.getGeneralPurposeVariable(r);return(E=E-v.width/2-this.intraCellSpacing-t.width/2)>=o}return!0},mxCoordinateAssignment.prototype.setCellLocations=function(e,t){this.rankTopY=[],this.rankBottomY=[];for(var r=0;r<t.ranks.length;r++)this.rankTopY[r]=Number.MAX_VALUE,this.rankBottomY[r]=-Number.MAX_VALUE;var o=t.vertexMapper.getValues();for(r=0;r<o.length;r++)this.setVertexLocation(o[r]);(this.layout.edgeStyle==mxHierarchicalEdgeStyle.ORTHOGONAL||this.layout.edgeStyle==mxHierarchicalEdgeStyle.POLYLINE||this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE)&&this.localEdgeProcessing(t);var a=t.edgeMapper.getValues();for(r=0;r<a.length;r++)this.setEdgePosition(a[r])},mxCoordinateAssignment.prototype.localEdgeProcessing=function(e){for(var t=0;t<e.ranks.length;t++)for(var r=e.ranks[t],o=0;o<r.length;o++){var a=r[o];if(a.isVertex())for(var u=a.getPreviousLayerConnectedCells(t),c=t-1,f=0;f<2;f++){if(c>-1&&c<e.ranks.length&&null!=u&&u.length>0){for(var m=[],x=0;x<u.length;x++){var v=new WeightedCellSorter(u[x],u[x].getX(c));m.push(v)}m.sort(WeightedCellSorter.prototype.compare);var E=a.x[0]-a.width/2,S=E+a.width,b=0,D=[];for(x=0;x<m.length;x++){var R,M=m[x].cell;if(M.isVertex()){R=0==f?a.connectsAsSource:a.connectsAsTarget;for(var N=0;N<R.length;N++)(R[N].source==M||R[N].target==M)&&(b+=R[N].edges.length,D.push(R[N]))}else b+=M.edges.length,D.push(M)}a.width>(b+1)*this.prefHozEdgeSep+2*this.prefHozEdgeSep&&(E+=this.prefHozEdgeSep,S-=this.prefHozEdgeSep);var F=(S-E)/b,G=E+F/2,j=this.minEdgeJetty-this.prefVertEdgeOff,Y=0;for(x=0;x<D.length;x++){var W=D[x].edges.length,q=this.jettyPositions[D[x].ids[0]];null==q&&(this.jettyPositions[D[x].ids[0]]=q=[]),x<b/2?j+=this.prefVertEdgeOff:x>b/2&&(j-=this.prefVertEdgeOff);for(var Z=0;Z<W;Z++)q[4*Z+2*f]=G,G+=F,q[4*Z+2*f+1]=j;Y=Math.max(Y,j)}}u=a.getNextLayerConnectedCells(t),c=t+1}}},mxCoordinateAssignment.prototype.setEdgePosition=function(e){var t=0;if(101207!=e.temp[0]){var r=e.maxRank,o=e.minRank;r==o&&(r=e.source.maxRank,o=e.target.minRank);for(var a=0,u=this.jettyPositions[e.ids[0]],c=e.isReversed?e.target.cell:e.source.cell,f=this.layout.graph,m=this.orientation==mxConstants.DIRECTION_EAST||this.orientation==mxConstants.DIRECTION_SOUTH,x=0;x<e.edges.length;x++){var v=e.edges[x],E=this.layout.getVisibleTerminal(v,!0),S=[],b=e.isReversed;if(E!=c&&(b=!b),null!=u){var D=b?m?this.rankBottomY[o]:this.rankTopY[o]:m?this.rankTopY[r]:this.rankBottomY[r],M=u[4*a+1+(_=b?2:0)];b!=m&&(M=-M),D+=M;var R=u[4*a+_],N=f.model.getTerminal(v,!0);this.layout.isPort(N)&&f.model.getParent(N)==E&&(R=null!=(V=f.view.getState(N))?V.x:E.geometry.x+e.source.width*N.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(S.push(new mxPoint(R,D)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&S.push(new mxPoint(R,D+M))):(S.push(new mxPoint(D,R)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&S.push(new mxPoint(D+M,R)))}var O=e.x.length-1,F=-1,G=-1,j=e.maxRank-1;b&&(O=0,F=e.x.length,G=1,j=e.minRank+1);for(var Y=O;e.maxRank!=e.minRank&&Y!=F;Y+=G){var W=e.x[Y]+t,q=(this.rankTopY[j]+this.rankBottomY[j+1])/2,Z=(this.rankTopY[j-1]+this.rankBottomY[j])/2;if(b){var Q=q;q=Z,Z=Q}this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(S.push(new mxPoint(W,q)),S.push(new mxPoint(W,Z))):(S.push(new mxPoint(q,W)),S.push(new mxPoint(Z,W))),this.limitX=Math.max(this.limitX,W),j+=G}if(null!=u){var _;M=u[4*a+3-(_=b?2:0)],b!=m&&(M=-M),D=(b?m?this.rankTopY[r]:this.rankBottomY[r]:m?this.rankBottomY[o]:this.rankTopY[o])-M,R=u[4*a+2-_];var V,ie=f.model.getTerminal(v,!1),U=this.layout.getVisibleTerminal(v,!1);this.layout.isPort(ie)&&f.model.getParent(ie)==U&&(R=null!=(V=f.view.getState(ie))?V.x:U.geometry.x+e.target.width*ie.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&S.push(new mxPoint(R,D-M)),S.push(new mxPoint(R,D))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&S.push(new mxPoint(D-M,R)),S.push(new mxPoint(D,R)))}e.isReversed&&this.processReversedEdge(e,v),this.layout.setEdgePoints(v,S),t=0==t?this.parallelEdgeSpacing:t>0?-t:-t+this.parallelEdgeSpacing,a++}e.temp[0]=101207}},mxCoordinateAssignment.prototype.setVertexLocation=function(e){var t=e.cell,r=e.x[0]-e.width/2,o=e.y[0]-e.height/2;this.rankTopY[e.minRank]=Math.min(this.rankTopY[e.minRank],o),this.rankBottomY[e.minRank]=Math.max(this.rankBottomY[e.minRank],o+e.height),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?this.layout.setVertexLocation(t,r,o):this.layout.setVertexLocation(t,o,r),this.limitX=Math.max(this.limitX,r+e.width)},mxCoordinateAssignment.prototype.processReversedEdge=function(e,t){},__mxOutput.mxCoordinateAssignment=void 0!==mxCoordinateAssignment?mxCoordinateAssignment:void 0,mxSwimlaneOrdering.prototype=new mxHierarchicalLayoutStage,mxSwimlaneOrdering.prototype.constructor=mxSwimlaneOrdering,mxSwimlaneOrdering.prototype.layout=null,mxSwimlaneOrdering.prototype.execute=function(e){var t=this.layout.getModel(),r=new Object,o=mxUtils.clone(t.vertexMapper,null,!0),a=null;if(null!=t.roots){var u=t.roots;a=[];for(var c=0;c<u.length;c++)a[c]=t.vertexMapper.get(u[c])}t.visit(function(f,m,x,v,E){var S=null!=f&&f.swimlaneIndex==m.swimlaneIndex&&m.isAncestor(f),b=null!=f&&null!=x&&f.swimlaneIndex<m.swimlaneIndex&&x.source==m;S?(x.invert(),mxUtils.remove(x,f.connectsAsSource),m.connectsAsSource.push(x),f.connectsAsTarget.push(x),mxUtils.remove(x,m.connectsAsTarget)):b&&(x.invert(),mxUtils.remove(x,f.connectsAsTarget),m.connectsAsTarget.push(x),f.connectsAsSource.push(x),mxUtils.remove(x,m.connectsAsSource));var _=mxCellPath.create(m.cell);r[_]=m,delete o[_]},a,!0,null)},__mxOutput.mxSwimlaneOrdering=void 0!==mxSwimlaneOrdering?mxSwimlaneOrdering:void 0;var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};function mxSwimlaneLayout(e,t,r){mxGraphLayout.call(this,e),this.orientation=null!=t?t:mxConstants.DIRECTION_NORTH,this.deterministic=null==r||r}function mxGraphModel(e){this.currentEdit=this.createUndoableEdit(),null!=e?this.setRoot(e):this.clear()}function mxRootChange(e,t){this.model=e,this.root=t,this.previous=t}function mxChildChange(e,t,r,o){this.model=e,this.parent=t,this.previous=t,this.child=r,this.index=o,this.previousIndex=o}function mxTerminalChange(e,t,r,o){this.model=e,this.cell=t,this.terminal=r,this.previous=r,this.source=o}function mxValueChange(e,t,r){this.model=e,this.cell=t,this.value=r,this.previous=r}function mxStyleChange(e,t,r){this.model=e,this.cell=t,this.style=r,this.previous=r}function mxGeometryChange(e,t,r){this.model=e,this.cell=t,this.geometry=r,this.previous=r}function mxCollapseChange(e,t,r){this.model=e,this.cell=t,this.collapsed=r,this.previous=r}function mxVisibleChange(e,t,r){this.model=e,this.cell=t,this.visible=r,this.previous=r}function mxCellAttributeChange(e,t,r){this.cell=e,this.attribute=t,this.value=r,this.previous=r}function mxCell(e,t,r){this.value=e,this.setGeometry(t),this.setStyle(r),null!=this.onInit&&this.onInit()}function mxGeometry(e,t,r,o){mxRectangle.call(this,e,t,r,o)}mxHierarchicalLayout.prototype=new mxGraphLayout,mxHierarchicalLayout.prototype.constructor=mxHierarchicalLayout,mxHierarchicalLayout.prototype.roots=null,mxHierarchicalLayout.prototype.resizeParent=!1,mxHierarchicalLayout.prototype.maintainParentLocation=!1,mxHierarchicalLayout.prototype.moveParent=!1,mxHierarchicalLayout.prototype.parentBorder=0,mxHierarchicalLayout.prototype.intraCellSpacing=30,mxHierarchicalLayout.prototype.interRankCellSpacing=100,mxHierarchicalLayout.prototype.interHierarchySpacing=60,mxHierarchicalLayout.prototype.parallelEdgeSpacing=10,mxHierarchicalLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxHierarchicalLayout.prototype.fineTuning=!0,mxHierarchicalLayout.prototype.tightenToSource=!0,mxHierarchicalLayout.prototype.disableEdgeStyle=!0,mxHierarchicalLayout.prototype.traverseAncestors=!0,mxHierarchicalLayout.prototype.model=null,mxHierarchicalLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxHierarchicalLayout.prototype.getModel=function(){return this.model},mxHierarchicalLayout.prototype.execute=function(e,t){this.parent=e;var r=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,null!=t&&!(t instanceof Array)&&(t=[t]),null!=t||null!=e){if(this.parentX=null,this.parentY=null,e!=this.root&&null!=r.isVertex(e)&&this.maintainParentLocation&&null!=(o=this.graph.getCellGeometry(e))&&(this.parentX=o.x,this.parentY=o.y),null!=t){for(var a=[],u=0;u<t.length;u++)(null==e||r.isAncestor(e,t[u]))&&r.isVertex(t[u])&&a.push(t[u]);this.roots=a}r.beginUpdate();try{var o;this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(o=this.graph.getCellGeometry(e))&&((o=o.clone()).x=this.parentX,o.y=this.parentY,r.setGeometry(e,o))}finally{r.endUpdate()}}},mxHierarchicalLayout.prototype.findRoots=function(e,t){var r=[];if(null!=e&&null!=t){var o=this.graph.model,a=null,u=-1e5;for(var c in t){var f=t[c];if(o.isVertex(f)&&this.graph.isCellVisible(f)){for(var m=this.getEdges(f),x=0,v=0,E=0;E<m.length;E++)this.getVisibleTerminal(m[E],!0)==f?x++:v++;0==v&&x>0&&r.push(f);var b=x-v;b>u&&(u=b,a=f)}}0==r.length&&null!=a&&r.push(a)}return r},mxHierarchicalLayout.prototype.getEdges=function(e){var t=this.edgesCache.get(e);if(null!=t)return t;for(var r=this.graph.model,o=[],a=this.graph.isCellCollapsed(e),u=r.getChildCount(e),c=0;c<u;c++){var f=r.getChildAt(e,c);(this.isPort(f)||a||!this.graph.isCellVisible(f))&&(o=o.concat(r.getEdges(f,!0,!0)))}o=o.concat(r.getEdges(e,!0,!0));var m=[];for(c=0;c<o.length;c++){var x=this.getVisibleTerminal(o[c],!0),v=this.getVisibleTerminal(o[c],!1);(x==v||x!=v&&(v==e&&(null==this.parent||this.isAncestor(this.parent,x,this.traverseAncestors))||x==e&&(null==this.parent||this.isAncestor(this.parent,v,this.traverseAncestors))))&&m.push(o[c])}return this.edgesCache.put(e,m),m},mxHierarchicalLayout.prototype.getVisibleTerminal=function(e,t){var r=this.edgesTargetTermCache;t&&(r=this.edgeSourceTermCache);var o=r.get(e);if(null!=o)return o;var a=this.graph.view.getState(e),u=null!=a?a.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t);return null==u&&(u=null!=a?a.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t)),null!=u&&(this.isPort(u)&&(u=this.graph.model.getParent(u)),r.put(e,u)),u},mxHierarchicalLayout.prototype.run=function(e){var t=[],r=[];if(null==this.roots&&null!=e){var o=Object();this.filterDescendants(e,o),this.roots=[];var a=!0;for(var u in o)if(null!=o[u]){a=!1;break}for(;!a;){for(var c=this.findRoots(e,o),f=0;f<c.length;f++){var m=Object();t.push(m),this.traverse(c[f],!0,null,r,m,t,o)}for(f=0;f<c.length;f++)this.roots.push(c[f]);for(var u in a=!0,o)if(null!=o[u]){a=!1;break}}}else for(f=0;f<this.roots.length;f++)m=Object(),t.push(m),this.traverse(this.roots[f],!0,null,r,m,t,null);var x=0;for(f=0;f<t.length;f++){m=t[f];var v=[];for(var u in m)v.push(m[u]);this.model=new mxGraphHierarchyModel(this,v,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),x=this.placementStage(x,e)}},mxHierarchicalLayout.prototype.filterDescendants=function(e,t){var r=this.graph.model;if(r.isVertex(e)&&e!=this.parent&&this.graph.isCellVisible(e)&&(t[mxObjectIdentity.get(e)]=e),this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var o=r.getChildCount(e),a=0;a<o;a++){var u=r.getChildAt(e,a);this.isPort(u)||this.filterDescendants(u,t)}},mxHierarchicalLayout.prototype.isPort=function(e){return null!=e&&null!=e.geometry&&e.geometry.relative},mxHierarchicalLayout.prototype.getEdgesBetween=function(e,t,r){r=null!=r&&r;for(var o=this.getEdges(e),a=[],u=0;u<o.length;u++){var c=this.getVisibleTerminal(o[u],!0),f=this.getVisibleTerminal(o[u],!1);(c==e&&f==t||!r&&c==t&&f==e)&&a.push(o[u])}return a},mxHierarchicalLayout.prototype.traverse=function(e,t,r,o,a,u,c){if(null!=e&&null!=o){var f=mxObjectIdentity.get(e);if(null!=o[f]||null!=c&&null==c[f]){if(null==a[f])for(v=0;v<u.length;v++){var M=u[v];if(null!=M[f]){for(var R in M)a[R]=M[R];return u.splice(v,1),a}}}else{null==a[f]&&(a[f]=e),null==o[f]&&(o[f]=e),null!==c&&delete c[f];for(var m=this.getEdges(e),x=[],v=0;v<m.length;v++)x[v]=this.getVisibleTerminal(m[v],!0)==e;for(v=0;v<m.length;v++)if(!t||x[v]){for(var E=this.getVisibleTerminal(m[v],!x[v]),S=1,b=0;b<m.length;b++)if(b!=v){var _=x[b];this.getVisibleTerminal(m[b],!_)==E&&(_?S++:S--)}S>=0&&(a=this.traverse(E,t,m[v],o,a,u,c))}}}return a},mxHierarchicalLayout.prototype.cycleStage=function(e){new mxMinimumCycleRemover(this).execute(e)},mxHierarchicalLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxHierarchicalLayout.prototype.crossingStage=function(e){new mxMedianHybridCrossingReduction(this).execute(e)},mxHierarchicalLayout.prototype.placementStage=function(e,t){var r=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return r.fineTuning=this.fineTuning,r.execute(t),r.limitX+this.interHierarchySpacing},__mxOutput.mxHierarchicalLayout=void 0!==mxHierarchicalLayout?mxHierarchicalLayout:void 0,mxSwimlaneLayout.prototype=new mxGraphLayout,mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout,mxSwimlaneLayout.prototype.roots=null,mxSwimlaneLayout.prototype.swimlanes=null,mxSwimlaneLayout.prototype.dummyVertexWidth=50,mxSwimlaneLayout.prototype.resizeParent=!1,mxSwimlaneLayout.prototype.maintainParentLocation=!1,mxSwimlaneLayout.prototype.moveParent=!1,mxSwimlaneLayout.prototype.parentBorder=30,mxSwimlaneLayout.prototype.intraCellSpacing=30,mxSwimlaneLayout.prototype.interRankCellSpacing=100,mxSwimlaneLayout.prototype.interHierarchySpacing=60,mxSwimlaneLayout.prototype.parallelEdgeSpacing=10,mxSwimlaneLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxSwimlaneLayout.prototype.fineTuning=!0,mxSwimlaneLayout.prototype.tightenToSource=!0,mxSwimlaneLayout.prototype.disableEdgeStyle=!0,mxSwimlaneLayout.prototype.traverseAncestors=!0,mxSwimlaneLayout.prototype.model=null,mxSwimlaneLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxSwimlaneLayout.prototype.getModel=function(){return this.model},mxSwimlaneLayout.prototype.execute=function(e,t){this.parent=e;var r=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,!(null==t||t.length<1)){null==e&&(e=r.getParent(t[0])),this.parentX=null,this.parentY=null,e!=this.root&&null!=r.isVertex(e)&&this.maintainParentLocation&&null!=(o=this.graph.getCellGeometry(e))&&(this.parentX=o.x,this.parentY=o.y),this.swimlanes=t;for(var a=[],u=0;u<t.length;u++){var c=this.graph.getChildCells(t[u]);if(null==c||0==c.length){var f=this.graph.insertVertex(t[u],null,null,0,0,this.dummyVertexWidth,0);a.push(f)}}r.beginUpdate();try{var o;this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(o=this.graph.getCellGeometry(e))&&((o=o.clone()).x=this.parentX,o.y=this.parentY,r.setGeometry(e,o)),this.graph.removeCells(a)}finally{r.endUpdate()}}},mxSwimlaneLayout.prototype.updateGroupBounds=function(){var e=[],t=this.model;for(var r in t.edgeMapper)for(var o=t.edgeMapper[r],a=0;a<o.edges.length;a++)e.push(o.edges[a]);var u=this.graph.getBoundingBoxFromGeometry(e,!0),c=[];for(a=0;a<this.swimlanes.length;a++)if(null!=(m=this.graph.getCellGeometry(f=this.swimlanes[a]))){var x=this.graph.getChildCells(f),v=this.graph.isSwimlane(f)?this.graph.getStartSize(f):new mxRectangle,E=this.graph.getBoundingBoxFromGeometry(x);c[a]=E;var S=E.y+m.y-v.height-this.parentBorder,b=E.y+m.y+E.height;if(null==u)u=new mxRectangle(0,S,0,b-S);else{u.y=Math.min(u.y,S);var _=Math.max(u.y+u.height,b);u.height=_-u.y}}for(a=0;a<this.swimlanes.length;a++){var f,m;if(null!=(m=this.graph.getCellGeometry(f=this.swimlanes[a]))){x=this.graph.getChildCells(f),v=this.graph.isSwimlane(f)?this.graph.getStartSize(f):new mxRectangle;var D=m.clone(),R=v.width+(0==a?this.parentBorder:this.interRankCellSpacing/2),N=c[a].x-R,V=u.y-this.parentBorder;D.x+=N,D.y=V,D.width=c[a].width+R+this.interRankCellSpacing/2,D.height=u.height+v.height+2*this.parentBorder,this.graph.model.setGeometry(f,D),this.graph.moveCells(x,-N,m.y-V)}}},mxSwimlaneLayout.prototype.findRoots=function(e,t){var r=[];if(null!=e&&null!=t){var o=this.graph.model,a=null,u=-1e5;for(var c in t){var f=t[c];if(null!=f&&o.isVertex(f)&&this.graph.isCellVisible(f)&&o.isAncestor(e,f)){for(var m=this.getEdges(f),x=0,v=0,E=0;E<m.length;E++){var S=this.getVisibleTerminal(m[E],!0);if(S==f){var b=this.getVisibleTerminal(m[E],!1);o.isAncestor(e,b)&&x++}else o.isAncestor(e,S)&&v++}0==v&&x>0&&r.push(f);var _=x-v;_>u&&(u=_,a=f)}}0==r.length&&null!=a&&r.push(a)}return r},mxSwimlaneLayout.prototype.getEdges=function(e){var t=this.edgesCache.get(e);if(null!=t)return t;for(var r=this.graph.model,o=[],a=this.graph.isCellCollapsed(e),u=r.getChildCount(e),c=0;c<u;c++){var f=r.getChildAt(e,c);(this.isPort(f)||a||!this.graph.isCellVisible(f))&&(o=o.concat(r.getEdges(f,!0,!0)))}o=o.concat(r.getEdges(e,!0,!0));var m=[];for(c=0;c<o.length;c++){var x=this.getVisibleTerminal(o[c],!0),v=this.getVisibleTerminal(o[c],!1);(x==v||x!=v&&(v==e&&(null==this.parent||this.graph.isValidAncestor(x,this.parent,this.traverseAncestors))||x==e&&(null==this.parent||this.graph.isValidAncestor(v,this.parent,this.traverseAncestors))))&&m.push(o[c])}return this.edgesCache.put(e,m),m},mxSwimlaneLayout.prototype.getVisibleTerminal=function(e,t){var r=this.edgesTargetTermCache;t&&(r=this.edgeSourceTermCache);var o=r.get(e);if(null!=o)return o;var a=this.graph.view.getState(e),u=null!=a?a.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t);return null==u&&(u=null!=a?a.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t)),null!=u&&(this.isPort(u)&&(u=this.graph.model.getParent(u)),r.put(e,u)),u},mxSwimlaneLayout.prototype.run=function(e){var t=[],r=Object();if(null!=this.swimlanes&&this.swimlanes.length>0&&null!=e){for(var o=Object(),a=0;a<this.swimlanes.length;a++)this.filterDescendants(this.swimlanes[a],o);this.roots=[];var u=!0;for(var c in o)if(null!=o[c]){u=!1;break}for(var f=0;!u&&f<this.swimlanes.length;){var m=this.findRoots(this.swimlanes[f],o);if(0!=m.length){for(a=0;a<m.length;a++){var x=Object();t.push(x),this.traverse(m[a],!0,null,r,x,t,o,f)}for(a=0;a<m.length;a++)this.roots.push(m[a]);for(var c in u=!0,o)if(null!=o[c]){u=!1;break}}else f++}}else for(a=0;a<this.roots.length;a++)x=Object(),t.push(x),this.traverse(this.roots[a],!0,null,r,x,t,null);var v=[];for(var c in r)v.push(r[c]);this.model=new mxSwimlaneModel(this,v,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),this.placementStage(0,e)},mxSwimlaneLayout.prototype.filterDescendants=function(e,t){var r=this.graph.model;if(r.isVertex(e)&&e!=this.parent&&r.getParent(e)!=this.parent&&this.graph.isCellVisible(e)&&(t[mxObjectIdentity.get(e)]=e),this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var o=r.getChildCount(e),a=0;a<o;a++){var u=r.getChildAt(e,a);this.isPort(u)||this.filterDescendants(u,t)}},mxSwimlaneLayout.prototype.isPort=function(e){return!!e.geometry.relative},mxSwimlaneLayout.prototype.getEdgesBetween=function(e,t,r){r=null!=r&&r;for(var o=this.getEdges(e),a=[],u=0;u<o.length;u++){var c=this.getVisibleTerminal(o[u],!0),f=this.getVisibleTerminal(o[u],!1);(c==e&&f==t||!r&&c==t&&f==e)&&a.push(o[u])}return a},mxSwimlaneLayout.prototype.traverse=function(e,t,r,o,a,u,c,f){if(null!=e&&null!=o){var m=mxObjectIdentity.get(e);if(null!=o[m]||null!=c&&null==c[m]){if(null==a[m])for(E=0;E<u.length;E++){var D=u[E];if(null!=D[m]){for(var M in D)a[M]=D[M];return u.splice(E,1),a}}}else{null==a[m]&&(a[m]=e),null==o[m]&&(o[m]=e),null!==c&&delete c[m];for(var x=this.getEdges(e),v=this.graph.model,E=0;E<x.length;E++){var S=this.getVisibleTerminal(x[E],!0),b=S==e;b&&(S=this.getVisibleTerminal(x[E],!1));var _=0;for(_=0;_<this.swimlanes.length&&!v.isAncestor(this.swimlanes[_],S);_++);_>=this.swimlanes.length||(_>f||(!t||b)&&_==f)&&(a=this.traverse(S,t,x[E],o,a,u,c,_))}}}return a},mxSwimlaneLayout.prototype.cycleStage=function(e){new mxSwimlaneOrdering(this).execute(e)},mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxSwimlaneLayout.prototype.crossingStage=function(e){new mxMedianHybridCrossingReduction(this).execute(e)},mxSwimlaneLayout.prototype.placementStage=function(e,t){var r=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return r.fineTuning=this.fineTuning,r.execute(t),r.limitX+this.interHierarchySpacing},__mxOutput.mxSwimlaneLayout=void 0!==mxSwimlaneLayout?mxSwimlaneLayout:void 0,mxGraphModel.prototype=new mxEventSource,mxGraphModel.prototype.constructor=mxGraphModel,mxGraphModel.prototype.root=null,mxGraphModel.prototype.cells=null,mxGraphModel.prototype.maintainEdgeParent=!0,mxGraphModel.prototype.ignoreRelativeEdgeParent=!0,mxGraphModel.prototype.createIds=!0,mxGraphModel.prototype.prefix="",mxGraphModel.prototype.postfix="",mxGraphModel.prototype.nextId=0,mxGraphModel.prototype.currentEdit=null,mxGraphModel.prototype.updateLevel=0,mxGraphModel.prototype.endingUpdate=!1,mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())},mxGraphModel.prototype.isCreateIds=function(){return this.createIds},mxGraphModel.prototype.setCreateIds=function(e){this.createIds=e},mxGraphModel.prototype.createRoot=function(){var e=new mxCell;return e.insert(new mxCell),e},mxGraphModel.prototype.getCell=function(e){return null!=this.cells?this.cells[e]:null},mxGraphModel.prototype.filterCells=function(e,t){var r=null;if(null!=e){r=[];for(var o=0;o<e.length;o++)t(e[o])&&r.push(e[o])}return r},mxGraphModel.prototype.getDescendants=function(e){return this.filterDescendants(null,e)},mxGraphModel.prototype.filterDescendants=function(e,t){var r=[];t=t||this.getRoot(),(null==e||e(t))&&r.push(t);for(var o=this.getChildCount(t),a=0;a<o;a++){var u=this.getChildAt(t,a);r=r.concat(this.filterDescendants(e,u))}return r},mxGraphModel.prototype.getRoot=function(e){var t=e||this.root;if(null!=e)for(;null!=e;)t=e,e=this.getParent(e);return t},mxGraphModel.prototype.setRoot=function(e){return this.execute(new mxRootChange(this,e)),e},mxGraphModel.prototype.rootChanged=function(e){var t=this.root;return this.root=e,this.nextId=0,this.cells=null,this.cellAdded(e),t},mxGraphModel.prototype.isRoot=function(e){return null!=e&&this.root==e},mxGraphModel.prototype.isLayer=function(e){return this.isRoot(this.getParent(e))},mxGraphModel.prototype.isAncestor=function(e,t){for(;null!=t&&t!=e;)t=this.getParent(t);return t==e},mxGraphModel.prototype.contains=function(e){return this.isAncestor(this.root,e)},mxGraphModel.prototype.getParent=function(e){return null!=e?e.getParent():null},mxGraphModel.prototype.add=function(e,t,r){if(t!=e&&null!=e&&null!=t){null==r&&(r=this.getChildCount(e));var o=e!=this.getParent(t);this.execute(new mxChildChange(this,e,t,r)),this.maintainEdgeParent&&o&&this.updateEdgeParents(t)}return t},mxGraphModel.prototype.cellAdded=function(e){if(null!=e){if(null==e.getId()&&this.createIds&&e.setId(this.createId(e)),null!=e.getId()){var t=this.getCell(e.getId());if(t!=e){for(;null!=t;)e.setId(this.createId(e)),t=this.getCell(e.getId());null==this.cells&&(this.cells=new Object),this.cells[e.getId()]=e}}mxUtils.isNumeric(e.getId())&&(this.nextId=Math.max(this.nextId,e.getId()));for(var r=this.getChildCount(e),o=0;o<r;o++)this.cellAdded(this.getChildAt(e,o))}},mxGraphModel.prototype.createId=function(e){var t=this.nextId;return this.nextId++,this.prefix+t+this.postfix},mxGraphModel.prototype.updateEdgeParents=function(e,t){t=t||this.getRoot(e);for(var r=this.getChildCount(e),o=0;o<r;o++){var a=this.getChildAt(e,o);this.updateEdgeParents(a,t)}var u=this.getEdgeCount(e),c=[];for(o=0;o<u;o++)c.push(this.getEdgeAt(e,o));for(o=0;o<c.length;o++){var f=c[o];this.isAncestor(t,f)&&this.updateEdgeParent(f,t)}},mxGraphModel.prototype.updateEdgeParent=function(e,t){for(var r=this.getTerminal(e,!0),o=this.getTerminal(e,!1),a=null;null!=r&&!this.isEdge(r)&&null!=r.geometry&&r.geometry.relative;)r=this.getParent(r);for(;null!=o&&this.ignoreRelativeEdgeParent&&!this.isEdge(o)&&null!=o.geometry&&o.geometry.relative;)o=this.getParent(o);if(this.isAncestor(t,r)&&this.isAncestor(t,o)&&null!=(a=r==o?this.getParent(r):this.getNearestCommonAncestor(r,o))&&(this.getParent(a)!=this.root||this.isAncestor(a,e))&&this.getParent(e)!=a){var u=this.getGeometry(e);if(null!=u){var c=this.getOrigin(this.getParent(e)),f=this.getOrigin(a),m=f.x-c.x,x=f.y-c.y;(u=u.clone()).translate(-m,-x),this.setGeometry(e,u)}this.add(a,e,this.getChildCount(a))}},mxGraphModel.prototype.getOrigin=function(e){var t=null;if(null!=e){if(t=this.getOrigin(this.getParent(e)),!this.isEdge(e)){var r=this.getGeometry(e);null!=r&&(t.x+=r.x,t.y+=r.y)}}else t=new mxPoint;return t},mxGraphModel.prototype.getNearestCommonAncestor=function(e,t){if(null!=e&&null!=t){var r=mxCellPath.create(t);if(null!=r&&r.length>0){var o=e,a=mxCellPath.create(o);if(r.length<a.length){o=t;var u=a;a=r,r=u}for(;null!=o;){var c=this.getParent(o);if(0==r.indexOf(a+mxCellPath.PATH_SEPARATOR)&&null!=c)return o;a=mxCellPath.getParentPath(a),o=c}}}return null},mxGraphModel.prototype.remove=function(e){return e==this.root?this.setRoot(null):null!=this.getParent(e)&&this.execute(new mxChildChange(this,null,e)),e},mxGraphModel.prototype.cellRemoved=function(e){if(null!=e&&null!=this.cells){for(var r=this.getChildCount(e)-1;r>=0;r--)this.cellRemoved(this.getChildAt(e,r));null!=this.cells&&null!=e.getId()&&delete this.cells[e.getId()]}},mxGraphModel.prototype.parentForCellChanged=function(e,t,r){var o=this.getParent(e);if(null!=t)(t!=o||o.getIndex(e)!=r)&&t.insert(e,r);else if(null!=o){var a=o.getIndex(e);o.remove(a)}var u=this.contains(t),c=this.contains(o);return u&&!c?this.cellAdded(e):c&&!u&&this.cellRemoved(e),o},mxGraphModel.prototype.getChildCount=function(e){return null!=e?e.getChildCount():0},mxGraphModel.prototype.getChildAt=function(e,t){return null!=e?e.getChildAt(t):null},mxGraphModel.prototype.getChildren=function(e){return null!=e?e.children:null},mxGraphModel.prototype.getChildVertices=function(e){return this.getChildCells(e,!0,!1)},mxGraphModel.prototype.getChildEdges=function(e){return this.getChildCells(e,!1,!0)},mxGraphModel.prototype.getChildCells=function(e,t,r){t=null!=t&&t,r=null!=r&&r;for(var o=this.getChildCount(e),a=[],u=0;u<o;u++){var c=this.getChildAt(e,u);(!r&&!t||r&&this.isEdge(c)||t&&this.isVertex(c))&&a.push(c)}return a},mxGraphModel.prototype.getTerminal=function(e,t){return null!=e?e.getTerminal(t):null},mxGraphModel.prototype.setTerminal=function(e,t,r){var o=t!=this.getTerminal(e,r);return this.execute(new mxTerminalChange(this,e,t,r)),this.maintainEdgeParent&&o&&this.updateEdgeParent(e,this.getRoot()),t},mxGraphModel.prototype.setTerminals=function(e,t,r){this.beginUpdate();try{this.setTerminal(e,t,!0),this.setTerminal(e,r,!1)}finally{this.endUpdate()}},mxGraphModel.prototype.terminalForCellChanged=function(e,t,r){var o=this.getTerminal(e,r);return null!=t?t.insertEdge(e,r):null!=o&&o.removeEdge(e,r),o},mxGraphModel.prototype.getEdgeCount=function(e){return null!=e?e.getEdgeCount():0},mxGraphModel.prototype.getEdgeAt=function(e,t){return null!=e?e.getEdgeAt(t):null},mxGraphModel.prototype.getDirectedEdgeCount=function(e,t,r){for(var o=0,a=this.getEdgeCount(e),u=0;u<a;u++){var c=this.getEdgeAt(e,u);c!=r&&this.getTerminal(c,t)==e&&o++}return o},mxGraphModel.prototype.getConnections=function(e){return this.getEdges(e,!0,!0,!1)},mxGraphModel.prototype.getIncomingEdges=function(e){return this.getEdges(e,!0,!1,!1)},mxGraphModel.prototype.getOutgoingEdges=function(e){return this.getEdges(e,!1,!0,!1)},mxGraphModel.prototype.getEdges=function(e,t,r,o){t=null==t||t,r=null==r||r,o=null==o||o;for(var a=this.getEdgeCount(e),u=[],c=0;c<a;c++){var f=this.getEdgeAt(e,c),m=this.getTerminal(f,!0),x=this.getTerminal(f,!1);(o&&m==x||m!=x&&(t&&x==e||r&&m==e))&&u.push(f)}return u},mxGraphModel.prototype.getEdgesBetween=function(e,t,r){r=null!=r&&r;var o=this.getEdgeCount(e),a=this.getEdgeCount(t),u=e,c=o;a<o&&(c=a,u=t);for(var f=[],m=0;m<c;m++){var x=this.getEdgeAt(u,m),v=this.getTerminal(x,!0),E=this.getTerminal(x,!1);(v==e&&E==t||!r&&E==e&&v==t)&&f.push(x)}return f},mxGraphModel.prototype.getOpposites=function(e,t,r,o){r=null==r||r,o=null==o||o;var a=[];if(null!=e)for(var u=0;u<e.length;u++){var c=this.getTerminal(e[u],!0),f=this.getTerminal(e[u],!1);c==t&&null!=f&&f!=t&&o?a.push(f):f==t&&null!=c&&c!=t&&r&&a.push(c)}return a},mxGraphModel.prototype.getTopmostCells=function(e){for(var t=new mxDictionary,r=[],o=0;o<e.length;o++)t.put(e[o],!0);for(o=0;o<e.length;o++){for(var a=e[o],u=!0,c=this.getParent(a);null!=c;){if(t.get(c)){u=!1;break}c=this.getParent(c)}u&&r.push(a)}return r},mxGraphModel.prototype.isVertex=function(e){return null!=e&&e.isVertex()},mxGraphModel.prototype.isEdge=function(e){return null!=e&&e.isEdge()},mxGraphModel.prototype.isConnectable=function(e){return null!=e&&e.isConnectable()},mxGraphModel.prototype.getValue=function(e){return null!=e?e.getValue():null},mxGraphModel.prototype.setValue=function(e,t){return this.execute(new mxValueChange(this,e,t)),t},mxGraphModel.prototype.valueForCellChanged=function(e,t){return e.valueChanged(t)},mxGraphModel.prototype.getGeometry=function(e){return null!=e?e.getGeometry():null},mxGraphModel.prototype.setGeometry=function(e,t){return t!=this.getGeometry(e)&&this.execute(new mxGeometryChange(this,e,t)),t},mxGraphModel.prototype.geometryForCellChanged=function(e,t){var r=this.getGeometry(e);return e.setGeometry(t),r},mxGraphModel.prototype.getStyle=function(e){return null!=e?e.getStyle():null},mxGraphModel.prototype.setStyle=function(e,t){return t!=this.getStyle(e)&&this.execute(new mxStyleChange(this,e,t)),t},mxGraphModel.prototype.styleForCellChanged=function(e,t){var r=this.getStyle(e);return e.setStyle(t),r},mxGraphModel.prototype.isCollapsed=function(e){return null!=e&&e.isCollapsed()},mxGraphModel.prototype.setCollapsed=function(e,t){return t!=this.isCollapsed(e)&&this.execute(new mxCollapseChange(this,e,t)),t},mxGraphModel.prototype.collapsedStateForCellChanged=function(e,t){var r=this.isCollapsed(e);return e.setCollapsed(t),r},mxGraphModel.prototype.isVisible=function(e){return null!=e&&e.isVisible()},mxGraphModel.prototype.setVisible=function(e,t){return t!=this.isVisible(e)&&this.execute(new mxVisibleChange(this,e,t)),t},mxGraphModel.prototype.visibleStateForCellChanged=function(e,t){var r=this.isVisible(e);return e.setVisible(t),r},mxGraphModel.prototype.execute=function(e){e.execute(),this.beginUpdate(),this.currentEdit.add(e),this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",e)),this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",e)),this.endUpdate()},mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE)),1==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.START_EDIT))},mxGraphModel.prototype.endUpdate=function(){if(this.updateLevel--,0==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.END_EDIT)),!this.endingUpdate){this.endingUpdate=0==this.updateLevel,this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit));var e=this.currentEdit;this.currentEdit=this.createUndoableEdit(),e.notify(),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e))}}finally{this.endingUpdate=!1}}},mxGraphModel.prototype.createUndoableEdit=function(e){var t=new mxUndoableEdit(this,null==e||e);return t.notify=function(){t.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",t,"changes",t.changes)),t.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",t,"changes",t.changes))},t},mxGraphModel.prototype.mergeChildren=function(e,t,r){r=null==r||r,this.beginUpdate();try{var o=new Object;for(var a in this.mergeChildrenImpl(e,t,r,o),o){var u=o[a],c=this.getTerminal(u,!0);null!=c&&(c=o[mxCellPath.create(c)],this.setTerminal(u,c,!0)),null!=(c=this.getTerminal(u,!1))&&(c=o[mxCellPath.create(c)],this.setTerminal(u,c,!1))}}finally{this.endUpdate()}},mxGraphModel.prototype.mergeChildrenImpl=function(e,t,r,o){this.beginUpdate();try{for(var a=e.getChildCount(),u=0;u<a;u++){var c=e.getChildAt(u);if("function"==typeof c.getId){var f=c.getId(),m=null==f||this.isEdge(c)&&r?null:this.getCell(f);if(null==m){var x=c.clone();x.setId(f),x.setTerminal(c.getTerminal(!0),!0),x.setTerminal(c.getTerminal(!1),!1),m=t.insert(x),this.cellAdded(m)}o[mxCellPath.create(c)]=m,this.mergeChildrenImpl(c,m,r,o)}}}finally{this.endUpdate()}},mxGraphModel.prototype.getParents=function(e){var t=[];if(null!=e)for(var r=new mxDictionary,o=0;o<e.length;o++){var a=this.getParent(e[o]);null!=a&&!r.get(a)&&(r.put(a,!0),t.push(a))}return t},mxGraphModel.prototype.cloneCell=function(e,t){return null!=e?this.cloneCells([e],t)[0]:null},mxGraphModel.prototype.cloneCells=function(e,t,r){t=null==t||t,r=null!=r?r:new Object;for(var o=[],a=0;a<e.length;a++)o.push(null!=e[a]?this.cloneCellImpl(e[a],r,t):null);for(a=0;a<o.length;a++)null!=o[a]&&this.restoreClone(o[a],e[a],r);return o},mxGraphModel.prototype.cloneCellImpl=function(e,t,r){var o=mxObjectIdentity.get(e),a=t[o];if(null==a&&(a=this.cellCloned(e),t[o]=a,r))for(var u=this.getChildCount(e),c=0;c<u;c++){var f=this.cloneCellImpl(this.getChildAt(e,c),t,!0);a.insert(f)}return a},mxGraphModel.prototype.cellCloned=function(e){return e.clone()},mxGraphModel.prototype.restoreClone=function(e,t,r){var o=this.getTerminal(t,!0);null!=o&&null!=(a=r[mxObjectIdentity.get(o)])&&a.insertEdge(e,!0);var a,u=this.getTerminal(t,!1);null!=u&&null!=(a=r[mxObjectIdentity.get(u)])&&a.insertEdge(e,!1);for(var c=this.getChildCount(e),f=0;f<c;f++)this.restoreClone(this.getChildAt(e,f),this.getChildAt(t,f),r)},mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)},mxChildChange.prototype.execute=function(){if(null!=this.child){var e=this.model.getParent(this.child),t=null!=e?e.getIndex(this.child):0;null==this.previous&&this.connect(this.child,!1),e=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),null!=this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=e,this.index=this.previousIndex,this.previousIndex=t}},mxChildChange.prototype.connect=function(e,t){t=null==t||t;var r=e.getTerminal(!0),o=e.getTerminal(!1);null!=r&&this.model.terminalForCellChanged(e,t?r:null,!0),null!=o&&this.model.terminalForCellChanged(e,t?o:null,!1),e.setTerminal(r,!0),e.setTerminal(o,!1);for(var a=this.model.getChildCount(e),u=0;u<a;u++)this.connect(this.model.getChildAt(e,u),t)},mxTerminalChange.prototype.execute=function(){null!=this.cell&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))},mxValueChange.prototype.execute=function(){null!=this.cell&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))},mxStyleChange.prototype.execute=function(){null!=this.cell&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))},mxGeometryChange.prototype.execute=function(){null!=this.cell&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))},mxCollapseChange.prototype.execute=function(){null!=this.cell&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))},mxVisibleChange.prototype.execute=function(){null!=this.cell&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))},mxCellAttributeChange.prototype.execute=function(){if(null!=this.cell){var e=this.cell.getAttribute(this.attribute);null==this.previous?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=e}},__mxOutput.mxGraphModel=void 0!==mxGraphModel?mxGraphModel:void 0,mxCell.prototype.id=null,mxCell.prototype.value=null,mxCell.prototype.geometry=null,mxCell.prototype.style=null,mxCell.prototype.vertex=!1,mxCell.prototype.edge=!1,mxCell.prototype.connectable=!0,mxCell.prototype.visible=!0,mxCell.prototype.collapsed=!1,mxCell.prototype.parent=null,mxCell.prototype.source=null,mxCell.prototype.target=null,mxCell.prototype.children=null,mxCell.prototype.edges=null,mxCell.prototype.mxTransient=["id","value","parent","source","target","children","edges"],mxCell.prototype.getId=function(){return this.id},mxCell.prototype.setId=function(e){this.id=e},mxCell.prototype.getValue=function(){return this.value},mxCell.prototype.setValue=function(e){this.value=e},mxCell.prototype.valueChanged=function(e){var t=this.getValue();return this.setValue(e),t},mxCell.prototype.getGeometry=function(){return this.geometry},mxCell.prototype.setGeometry=function(e){this.geometry=e},mxCell.prototype.getStyle=function(){return this.style},mxCell.prototype.setStyle=function(e){this.style=e},mxCell.prototype.isVertex=function(){return 0!=this.vertex},mxCell.prototype.setVertex=function(e){this.vertex=e},mxCell.prototype.isEdge=function(){return 0!=this.edge},mxCell.prototype.setEdge=function(e){this.edge=e},mxCell.prototype.isConnectable=function(){return 0!=this.connectable},mxCell.prototype.setConnectable=function(e){this.connectable=e},mxCell.prototype.isVisible=function(){return 0!=this.visible},mxCell.prototype.setVisible=function(e){this.visible=e},mxCell.prototype.isCollapsed=function(){return 0!=this.collapsed},mxCell.prototype.setCollapsed=function(e){this.collapsed=e},mxCell.prototype.getParent=function(){return this.parent},mxCell.prototype.setParent=function(e){this.parent=e},mxCell.prototype.getTerminal=function(e){return e?this.source:this.target},mxCell.prototype.setTerminal=function(e,t){return t?this.source=e:this.target=e,e},mxCell.prototype.getChildCount=function(){return null==this.children?0:this.children.length},mxCell.prototype.getIndex=function(e){return mxUtils.indexOf(this.children,e)},mxCell.prototype.getChildAt=function(e){return null==this.children?null:this.children[e]},mxCell.prototype.insert=function(e,t){return null!=e&&(null==t&&(t=this.getChildCount(),e.getParent()==this&&t--),e.removeFromParent(),e.setParent(this),null==this.children?(this.children=[],this.children.push(e)):this.children.splice(t,0,e)),e},mxCell.prototype.remove=function(e){var t=null;return null!=this.children&&e>=0&&null!=(t=this.getChildAt(e))&&(this.children.splice(e,1),t.setParent(null)),t},mxCell.prototype.removeFromParent=function(){if(null!=this.parent){var e=this.parent.getIndex(this);this.parent.remove(e)}},mxCell.prototype.getEdgeCount=function(){return null==this.edges?0:this.edges.length},mxCell.prototype.getEdgeIndex=function(e){return mxUtils.indexOf(this.edges,e)},mxCell.prototype.getEdgeAt=function(e){return null==this.edges?null:this.edges[e]},mxCell.prototype.insertEdge=function(e,t){return null!=e&&(e.removeFromTerminal(t),e.setTerminal(this,t),(null==this.edges||e.getTerminal(!t)!=this||mxUtils.indexOf(this.edges,e)<0)&&(null==this.edges&&(this.edges=[]),this.edges.push(e))),e},mxCell.prototype.removeEdge=function(e,t){if(null!=e){if(e.getTerminal(!t)!=this&&null!=this.edges){var r=this.getEdgeIndex(e);r>=0&&this.edges.splice(r,1)}e.setTerminal(null,t)}return e},mxCell.prototype.removeFromTerminal=function(e){var t=this.getTerminal(e);null!=t&&t.removeEdge(this,e)},mxCell.prototype.hasAttribute=function(e){var t=this.getValue();return null!=t&&t.nodeType==mxConstants.NODETYPE_ELEMENT&&t.hasAttribute?t.hasAttribute(e):null!=t.getAttribute(e)},mxCell.prototype.getAttribute=function(e,t){var r=this.getValue(),o=null!=r&&r.nodeType==mxConstants.NODETYPE_ELEMENT?r.getAttribute(e):null;return null!=o?o:t},mxCell.prototype.setAttribute=function(e,t){var r=this.getValue();null!=r&&r.nodeType==mxConstants.NODETYPE_ELEMENT&&r.setAttribute(e,t)},mxCell.prototype.clone=function(){var e=mxUtils.clone(this,this.mxTransient);return e.setValue(this.cloneValue()),e},mxCell.prototype.cloneValue=function(){var e=this.getValue();return null!=e&&("function"==typeof e.clone?e=e.clone():isNaN(e.nodeType)||(e=e.cloneNode(!0))),e},__mxOutput.mxCell=void 0!==mxCell?mxCell:void 0,mxGeometry.prototype=new mxRectangle,mxGeometry.prototype.constructor=mxGeometry,mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=!0,mxGeometry.prototype.alternateBounds=null,mxGeometry.prototype.sourcePoint=null,mxGeometry.prototype.targetPoint=null,mxGeometry.prototype.points=null,mxGeometry.prototype.offset=null,mxGeometry.prototype.relative=!1,mxGeometry.prototype.swap=function(){if(null!=this.alternateBounds){var e=new mxRectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=e}},mxGeometry.prototype.getTerminalPoint=function(e){return e?this.sourcePoint:this.targetPoint},mxGeometry.prototype.setTerminalPoint=function(e,t){return t?this.sourcePoint=e:this.targetPoint=e,e},mxGeometry.prototype.rotate=function(e,t){var r=mxUtils.toRadians(e),o=Math.cos(r),a=Math.sin(r);if(!this.relative){var u=new mxPoint(this.getCenterX(),this.getCenterY()),c=mxUtils.getRotatedPoint(u,o,a,t);this.x=Math.round(c.x-this.width/2),this.y=Math.round(c.y-this.height/2)}if(null!=this.sourcePoint&&(c=mxUtils.getRotatedPoint(this.sourcePoint,o,a,t),this.sourcePoint.x=Math.round(c.x),this.sourcePoint.y=Math.round(c.y)),null!=this.targetPoint&&(c=mxUtils.getRotatedPoint(this.targetPoint,o,a,t),this.targetPoint.x=Math.round(c.x),this.targetPoint.y=Math.round(c.y)),null!=this.points)for(var f=0;f<this.points.length;f++)null!=this.points[f]&&(c=mxUtils.getRotatedPoint(this.points[f],o,a,t),this.points[f].x=Math.round(c.x),this.points[f].y=Math.round(c.y))},mxGeometry.prototype.translate=function(e,t){if(e=parseFloat(e),t=parseFloat(t),this.relative||(this.x=parseFloat(this.x)+e,this.y=parseFloat(this.y)+t),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+t),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+e,this.targetPoint.y=parseFloat(this.targetPoint.y)+t),this.TRANSLATE_CONTROL_POINTS&&null!=this.points)for(var r=0;r<this.points.length;r++)null!=this.points[r]&&(this.points[r].x=parseFloat(this.points[r].x)+e,this.points[r].y=parseFloat(this.points[r].y)+t)},mxGeometry.prototype.scale=function(e,t,r){if(e=parseFloat(e),t=parseFloat(t),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*t),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*e,this.targetPoint.y=parseFloat(this.targetPoint.y)*t),null!=this.points)for(var o=0;o<this.points.length;o++)null!=this.points[o]&&(this.points[o].x=parseFloat(this.points[o].x)*e,this.points[o].y=parseFloat(this.points[o].y)*t);this.relative||(this.x=parseFloat(this.x)*e,this.y=parseFloat(this.y)*t,r&&(t=e=Math.min(e,t)),this.width=parseFloat(this.width)*e,this.height=parseFloat(this.height)*t)},mxGeometry.prototype.equals=function(e){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==e.relative&&(null==this.sourcePoint&&null==e.sourcePoint||null!=this.sourcePoint&&this.sourcePoint.equals(e.sourcePoint))&&(null==this.targetPoint&&null==e.targetPoint||null!=this.targetPoint&&this.targetPoint.equals(e.targetPoint))&&(null==this.points&&null==e.points||null!=this.points&&mxUtils.equalPoints(this.points,e.points))&&(null==this.alternateBounds&&null==e.alternateBounds||null!=this.alternateBounds&&this.alternateBounds.equals(e.alternateBounds))&&(null==this.offset&&null==e.offset||null!=this.offset&&this.offset.equals(e.offset))},__mxOutput.mxGeometry=void 0!==mxGeometry?mxGeometry:void 0;var mxCellPath={PATH_SEPARATOR:".",create:function(e){var t="";if(null!=e)for(var r=e.getParent();null!=r;)t=r.getIndex(e)+mxCellPath.PATH_SEPARATOR+t,r=(e=r).getParent();var a=t.length;return a>1&&(t=t.substring(0,a-1)),t},getParentPath:function(e){if(null!=e){var t=e.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(t>=0)return e.substring(0,t);if(e.length>0)return""}return null},resolve:function(e,t){var r=e;if(null!=t)for(var o=t.split(mxCellPath.PATH_SEPARATOR),a=0;a<o.length;a++)r=r.getChildAt(parseInt(o[a]));return r},compare:function(e,t){for(var r=Math.min(e.length,t.length),o=0,a=0;a<r;a++)if(e[a]!=t[a]){o=0==e[a].length||0==t[a].length?e[a]==t[a]?0:e[a]>t[a]?1:-1:(u=parseInt(e[a]))==(c=parseInt(t[a]))?0:u>c?1:-1;break}var u,c;return 0==o&&(u=e.length)!=(c=t.length)&&(o=u>c?1:-1),o}};__mxOutput.mxCellPath=void 0!==mxCellPath?mxCellPath:void 0;var mxPerimeter={RectanglePerimeter:function(e,t,r,o){var a=e.getCenterX(),u=e.getCenterY(),m=Math.atan2(r.y-u,r.x-a),x=new mxPoint(0,0),v=Math.PI,S=Math.PI/2-m,b=Math.atan2(e.height,e.width);return m<-v+b||m>v-b?(x.x=e.x,x.y=u-e.width*Math.tan(m)/2):m<-b?(x.y=e.y,x.x=a-e.height*Math.tan(S)/2):m<b?(x.x=e.x+e.width,x.y=u+e.width*Math.tan(m)/2):(x.y=e.y+e.height,x.x=a+e.height*Math.tan(S)/2),o&&(r.x>=e.x&&r.x<=e.x+e.width?x.x=r.x:r.y>=e.y&&r.y<=e.y+e.height&&(x.y=r.y),r.x<e.x?x.x=e.x:r.x>e.x+e.width&&(x.x=e.x+e.width),r.y<e.y?x.y=e.y:r.y>e.y+e.height&&(x.y=e.y+e.height)),x},EllipsePerimeter:function(e,t,r,o){var a=e.x,u=e.y,c=e.width/2,f=e.height/2,m=a+c,x=u+f,v=r.x,E=r.y,S=parseInt(v-m),b=parseInt(E-x);if(0==S&&0!=b)return new mxPoint(m,x+f*b/Math.abs(b));if(0==S&&0==b)return new mxPoint(v,E);if(o){if(E>=u&&E<=u+e.height){var _=E-x,D=Math.sqrt(c*c*(1-_*_/(f*f)))||0;return v<=a&&(D=-D),new mxPoint(m+D,E)}if(v>=a&&v<=a+e.width)return D=v-m,_=Math.sqrt(f*f*(1-D*D/(c*c)))||0,E<=u&&(_=-_),new mxPoint(v,x+_)}var M=b/S,R=x-M*m,N=c*c*M*M+f*f,V=-2*m*N,F=Math.sqrt(V*V-4*N*(c*c*M*M*m*m+f*f*m*m-c*c*f*f)),G=(-V+F)/(2*N),j=(-V-F)/(2*N),Y=M*G+R,W=M*j+R,Q=0,K=0;return Math.sqrt(Math.pow(G-v,2)+Math.pow(Y-E,2))<Math.sqrt(Math.pow(j-v,2)+Math.pow(W-E,2))?(Q=G,K=Y):(Q=j,K=W),new mxPoint(Q,K)},RhombusPerimeter:function(e,t,r,o){var a=e.x,u=e.y,c=e.width,f=e.height,m=a+c/2,x=u+f/2,v=r.x,E=r.y;if(m==v)return new mxPoint(m,x>E?u:u+f);if(x==E)return new mxPoint(m>v?a:a+c,x);var S=m,b=x;return o&&(v>=a&&v<=a+c?S=v:E>=u&&E<=u+f&&(b=E)),mxUtils.intersection(v,E,S,b,m,E<x?u:u+f,v<m?a:a+c,x)},TrianglePerimeter:function(e,t,r,o){var a=null!=t?t.style[mxConstants.STYLE_DIRECTION]:null,u=a==mxConstants.DIRECTION_NORTH||a==mxConstants.DIRECTION_SOUTH,c=e.x,f=e.y,m=e.width,x=e.height,v=c+m/2,E=f+x/2,S=new mxPoint(c,f),b=new mxPoint(c+m,E),_=new mxPoint(c,f+x);a==mxConstants.DIRECTION_NORTH?(S=_,b=new mxPoint(v,f),_=new mxPoint(c+m,f+x)):a==mxConstants.DIRECTION_SOUTH?(b=new mxPoint(v,f+x),_=new mxPoint(c+m,f)):a==mxConstants.DIRECTION_WEST&&(S=new mxPoint(c+m,f),b=new mxPoint(c,E),_=new mxPoint(c+m,f+x));var D=r.x-v,M=r.y-E,R=u?Math.atan2(D,M):Math.atan2(M,D),N=u?Math.atan2(m,x):Math.atan2(x,m),O=null;if(a==mxConstants.DIRECTION_NORTH||a==mxConstants.DIRECTION_WEST?R>-N&&R<N:R<-Math.PI+N||R>Math.PI-N)O=o&&(u&&r.x>=S.x&&r.x<=_.x||!u&&r.y>=S.y&&r.y<=_.y)?u?new mxPoint(r.x,S.y):new mxPoint(S.x,r.y):a==mxConstants.DIRECTION_NORTH?new mxPoint(c+m/2+x*Math.tan(R)/2,f+x):a==mxConstants.DIRECTION_SOUTH?new mxPoint(c+m/2-x*Math.tan(R)/2,f):a==mxConstants.DIRECTION_WEST?new mxPoint(c+m,f+x/2+m*Math.tan(R)/2):new mxPoint(c,f+x/2-m*Math.tan(R)/2);else{if(o){var F=new mxPoint(v,E);r.y>=f&&r.y<=f+x?(F.x=u?v:a==mxConstants.DIRECTION_WEST?c+m:c,F.y=r.y):r.x>=c&&r.x<=c+m&&(F.x=r.x,F.y=u?a==mxConstants.DIRECTION_NORTH?f+x:f:E),D=r.x-F.x,M=r.y-F.y,v=F.x,E=F.y}O=u&&r.x<=c+m/2||!u&&r.y<=f+x/2?mxUtils.intersection(r.x,r.y,v,E,S.x,S.y,b.x,b.y):mxUtils.intersection(r.x,r.y,v,E,b.x,b.y,_.x,_.y)}return null==O&&(O=new mxPoint(v,E)),O},HexagonPerimeter:function(e,t,r,o){var a=e.x,u=e.y,c=e.width,f=e.height,m=e.getCenterX(),x=e.getCenterY(),v=r.x,E=r.y,_=-Math.atan2(E-x,v-m),D=Math.PI,M=Math.PI/2,R=new mxPoint(m,x),N=null!=t?mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,V=N==mxConstants.DIRECTION_NORTH||N==mxConstants.DIRECTION_SOUTH,O=new mxPoint,F=new mxPoint;if((v<a&&E<u||v<a&&E>u+f||v>a+c&&E<u||v>a+c&&E>u+f)&&(o=!1),o){if(V){if(v==m){if(E<=u)return new mxPoint(m,u);if(E>=u+f)return new mxPoint(m,u+f)}else if(v<a){if(E==u+f/4)return new mxPoint(a,u+f/4);if(E==u+3*f/4)return new mxPoint(a,u+3*f/4)}else if(v>a+c){if(E==u+f/4)return new mxPoint(a+c,u+f/4);if(E==u+3*f/4)return new mxPoint(a+c,u+3*f/4)}else if(v==a){if(E<x)return new mxPoint(a,u+f/4);if(E>x)return new mxPoint(a,u+3*f/4)}else if(v==a+c){if(E<x)return new mxPoint(a+c,u+f/4);if(E>x)return new mxPoint(a+c,u+3*f/4)}if(E==u)return new mxPoint(m,u);if(E==u+f)return new mxPoint(m,u+f);v<m?E>u+f/4&&E<u+3*f/4?(O=new mxPoint(a,u),F=new mxPoint(a,u+f)):E<u+f/4?(O=new mxPoint(a-Math.floor(.5*c),u+Math.floor(.5*f)),F=new mxPoint(a+c,u-Math.floor(.25*f))):E>u+3*f/4&&(O=new mxPoint(a-Math.floor(.5*c),u+Math.floor(.5*f)),F=new mxPoint(a+c,u+Math.floor(1.25*f))):v>m&&(E>u+f/4&&E<u+3*f/4?(O=new mxPoint(a+c,u),F=new mxPoint(a+c,u+f)):E<u+f/4?(O=new mxPoint(a,u-Math.floor(.25*f)),F=new mxPoint(a+Math.floor(1.5*c),u+Math.floor(.5*f))):E>u+3*f/4&&(O=new mxPoint(a+Math.floor(1.5*c),u+Math.floor(.5*f)),F=new mxPoint(a,u+Math.floor(1.25*f))))}else{if(E==x){if(v<=a)return new mxPoint(a,u+f/2);if(v>=a+c)return new mxPoint(a+c,u+f/2)}else if(E<u){if(v==a+c/4)return new mxPoint(a+c/4,u);if(v==a+3*c/4)return new mxPoint(a+3*c/4,u)}else if(E>u+f){if(v==a+c/4)return new mxPoint(a+c/4,u+f);if(v==a+3*c/4)return new mxPoint(a+3*c/4,u+f)}else if(E==u){if(v<m)return new mxPoint(a+c/4,u);if(v>m)return new mxPoint(a+3*c/4,u)}else if(E==u+f){if(v<m)return new mxPoint(a+c/4,u+f);if(E>x)return new mxPoint(a+3*c/4,u+f)}if(v==a)return new mxPoint(a,x);if(v==a+c)return new mxPoint(a+c,x);E<x?v>a+c/4&&v<a+3*c/4?(O=new mxPoint(a,u),F=new mxPoint(a+c,u)):v<a+c/4?(O=new mxPoint(a-Math.floor(.25*c),u+f),F=new mxPoint(a+Math.floor(.5*c),u-Math.floor(.5*f))):v>a+3*c/4&&(O=new mxPoint(a+Math.floor(.5*c),u-Math.floor(.5*f)),F=new mxPoint(a+Math.floor(1.25*c),u+f)):E>x&&(v>a+c/4&&v<a+3*c/4?(O=new mxPoint(a,u+f),F=new mxPoint(a+c,u+f)):v<a+c/4?(O=new mxPoint(a-Math.floor(.25*c),u),F=new mxPoint(a+Math.floor(.5*c),u+Math.floor(1.5*f))):v>a+3*c/4&&(O=new mxPoint(a+Math.floor(.5*c),u+Math.floor(1.5*f)),F=new mxPoint(a+Math.floor(1.25*c),u)))}var G=m,j=x;v>=a&&v<=a+c?(G=v,j=E<x?u+f:u):E>=u&&E<=u+f&&(j=E,G=v<m?a+c:a),R=mxUtils.intersection(G,j,r.x,r.y,O.x,O.y,F.x,F.y)}else{if(V){if(_==(Y=Math.atan2(f/4,c/2)))return new mxPoint(a+c,u+Math.floor(.25*f));if(_==M)return new mxPoint(a+Math.floor(.5*c),u);if(_==D-Y)return new mxPoint(a,u+Math.floor(.25*f));if(_==-Y)return new mxPoint(a+c,u+Math.floor(.75*f));if(_==-M)return new mxPoint(a+Math.floor(.5*c),u+f);if(_==-D+Y)return new mxPoint(a,u+Math.floor(.75*f));_<Y&&_>-Y?(O=new mxPoint(a+c,u),F=new mxPoint(a+c,u+f)):_>Y&&_<M?(O=new mxPoint(a,u-Math.floor(.25*f)),F=new mxPoint(a+Math.floor(1.5*c),u+Math.floor(.5*f))):_>M&&_<D-Y?(O=new mxPoint(a-Math.floor(.5*c),u+Math.floor(.5*f)),F=new mxPoint(a+c,u-Math.floor(.25*f))):_>D-Y&&_<=D||_<-D+Y&&_>=-D?(O=new mxPoint(a,u),F=new mxPoint(a,u+f)):_<-Y&&_>-M?(O=new mxPoint(a+Math.floor(1.5*c),u+Math.floor(.5*f)),F=new mxPoint(a,u+Math.floor(1.25*f))):_<-M&&_>-D+Y&&(O=new mxPoint(a-Math.floor(.5*c),u+Math.floor(.5*f)),F=new mxPoint(a+c,u+Math.floor(1.25*f)))}else{var Y;if(_==(Y=Math.atan2(f/2,c/4)))return new mxPoint(a+Math.floor(.75*c),u);if(_==D-Y)return new mxPoint(a+Math.floor(.25*c),u);if(_==D||_==-D)return new mxPoint(a,u+Math.floor(.5*f));if(0==_)return new mxPoint(a+c,u+Math.floor(.5*f));if(_==-Y)return new mxPoint(a+Math.floor(.75*c),u+f);if(_==-D+Y)return new mxPoint(a+Math.floor(.25*c),u+f);_>0&&_<Y?(O=new mxPoint(a+Math.floor(.5*c),u-Math.floor(.5*f)),F=new mxPoint(a+Math.floor(1.25*c),u+f)):_>Y&&_<D-Y?(O=new mxPoint(a,u),F=new mxPoint(a+c,u)):_>D-Y&&_<D?(O=new mxPoint(a-Math.floor(.25*c),u+f),F=new mxPoint(a+Math.floor(.5*c),u-Math.floor(.5*f))):_<0&&_>-Y?(O=new mxPoint(a+Math.floor(.5*c),u+Math.floor(1.5*f)),F=new mxPoint(a+Math.floor(1.25*c),u)):_<-Y&&_>-D+Y?(O=new mxPoint(a,u+f),F=new mxPoint(a+c,u+f)):_<-D+Y&&_>-D&&(O=new mxPoint(a-Math.floor(.25*c),u),F=new mxPoint(a+Math.floor(.5*c),u+Math.floor(1.5*f)))}R=mxUtils.intersection(m,x,r.x,r.y,O.x,O.y,F.x,F.y)}return null==R?new mxPoint(m,x):R}};function mxPrintPreview(e,t,r,o,a,u,c,f,m){this.graph=e,this.scale=null!=t?t:1/e.pageScale,this.border=null!=o?o:0,this.pageFormat=mxRectangle.fromRectangle(null!=r?r:e.pageFormat),this.title=null!=f?f:"Printer-friendly version",this.x0=null!=a?a:0,this.y0=null!=u?u:0,this.borderColor=c,this.pageSelector=null==m||m}function mxStylesheet(){this.styles=new Object,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}function mxCellState(e,t,r){this.view=e,this.cell=t,this.style=null!=r?r:{},this.origin=new mxPoint,this.absoluteOffset=new mxPoint}function mxGraphSelectionModel(e){this.graph=e,this.cells=[]}function mxSelectionChange(e,t,r){this.selectionModel=e,this.added=null!=t?t.slice():null,this.removed=null!=r?r.slice():null}function mxCellEditor(e){this.graph=e,this.zoomHandler=mxUtils.bind(this,function(){this.graph.isEditing()&&this.resize()}),this.graph.view.addListener(mxEvent.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.zoomHandler),this.changeHandler=mxUtils.bind(this,function(t){null!=this.editingCell&&null==this.graph.getView().getState(this.editingCell)&&this.stopEditing(!0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}function mxCellRenderer(){}__mxOutput.mxPerimeter=void 0!==mxPerimeter?mxPerimeter:void 0,mxPrintPreview.prototype.graph=null,mxPrintPreview.prototype.pageFormat=null,mxPrintPreview.prototype.scale=null,mxPrintPreview.prototype.border=0,mxPrintPreview.prototype.marginTop=0,mxPrintPreview.prototype.marginBottom=0,mxPrintPreview.prototype.x0=0,mxPrintPreview.prototype.y0=0,mxPrintPreview.prototype.autoOrigin=!0,mxPrintPreview.prototype.printOverlays=!1,mxPrintPreview.prototype.printControls=!1,mxPrintPreview.prototype.printBackgroundImage=!1,mxPrintPreview.prototype.backgroundColor="#ffffff",mxPrintPreview.prototype.borderColor=null,mxPrintPreview.prototype.title=null,mxPrintPreview.prototype.pageSelector=null,mxPrintPreview.prototype.wnd=null,mxPrintPreview.prototype.targetWindow=null,mxPrintPreview.prototype.pageCount=0,mxPrintPreview.prototype.clipping=!0,mxPrintPreview.prototype.getWindow=function(){return this.wnd},mxPrintPreview.prototype.getDoctype=function(){var e="";return 5==document.documentMode?e='<meta http-equiv="X-UA-Compatible" content="IE=5">':8==document.documentMode?e='<meta http-equiv="X-UA-Compatible" content="IE=8">':document.documentMode>8&&(e='\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--\x3e'),e},mxPrintPreview.prototype.appendGraph=function(e,t,r,o,a,u){this.graph=e,this.scale=null!=t?t:1/e.pageScale,this.x0=r,this.y0=o,this.open(null,null,a,u)},mxPrintPreview.prototype.open=function(e,t,r,o){var a=this.graph.cellRenderer.initializeOverlay,u=null;try{this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(Z,Q){Q.init(Z.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(Z,Q,K,ie){Q.dialect=Z.view.graph.dialect,Q.init(Z.view.getDrawPane())}),this.wnd=null!=t?t:this.wnd;var c=!1;null==this.wnd&&(c=!0,this.wnd=window.open());var f=this.wnd.document;if(c){var m=this.getDoctype();null!=m&&m.length>0&&f.writeln(m),mxClient.IS_VML?f.writeln('<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">'):("CSS1Compat"===document.compatMode&&f.writeln("<!DOCTYPE html>"),f.writeln("<html>")),f.writeln("<head>"),this.writeHead(f,e),f.writeln("</head>"),f.writeln('<body class="mxPage">')}var x=this.graph.getGraphBounds().clone(),v=this.graph.getView().getScale(),E=v/this.scale,S=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=S.x*this.scale,this.y0-=S.y*this.scale,x.width+=x.x,x.height+=x.y,x.x=0,x.y=0,this.border=0);var b=this.pageFormat.width-2*this.border,_=this.pageFormat.height-2*this.border;this.pageFormat.height+=this.marginTop+this.marginBottom,x.width/=E,x.height/=E;var D=Math.max(1,Math.ceil((x.width+this.x0)/b)),M=Math.max(1,Math.ceil((x.height+this.y0)/_));this.pageCount=D*M;var R=mxUtils.bind(this,function(){if(this.pageSelector&&(M>1||D>1)){var Z=this.createPageSelector(M,D);if(f.body.appendChild(Z),mxClient.IS_IE&&null==f.documentMode||5==f.documentMode||8==f.documentMode||7==f.documentMode){Z.style.position="absolute";var Q=function(){Z.style.top=(f.body.scrollTop||f.documentElement.scrollTop)+10+"px"};mxEvent.addListener(this.wnd,"scroll",function(K){Q()}),mxEvent.addListener(this.wnd,"resize",function(K){Q()})}}}),N=mxUtils.bind(this,function(Z,Q){if(null!=this.borderColor&&(Z.style.borderColor=this.borderColor,Z.style.borderStyle="solid",Z.style.borderWidth="1px"),Z.style.background=this.backgroundColor,(r||Q)&&(Z.style.pageBreakAfter="always"),c&&(mxClient.IS_IE||document.documentMode>=11||mxClient.IS_EDGE))f.writeln(Z.outerHTML),Z.parentNode.removeChild(Z);else if(mxClient.IS_IE||document.documentMode>=11||mxClient.IS_EDGE){var K=f.createElement("div");K.innerHTML=Z.outerHTML,K=K.getElementsByTagName("div")[0],f.body.appendChild(K),Z.parentNode.removeChild(Z)}else Z.parentNode.removeChild(Z),f.body.appendChild(Z);(r||Q)&&this.addPageBreak(f)}),V=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if(null!=V)for(var O=0;O<V.length;O++)N(V[O],!0);var F=this.getAppendices(this.pageFormat.width,this.pageFormat.height);for(O=0;O<M;O++)for(var G=O*_/this.scale-this.y0/this.scale+(x.y-S.y*v)/v,j=0;j<D;j++){if(null==this.wnd)return null;var Y=j*b/this.scale-this.x0/this.scale+(x.x-S.x*v)/v,W=O*D+j+1,q=new mxRectangle(Y,G,b,_);(u=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,mxUtils.bind(this,function(Q){this.addGraphFragment(-Y,-G,this.scale,W,Q,q),this.printBackgroundImage&&this.insertBackgroundImage(Q,-Y,-G)}),W)).setAttribute("id","mxPage-"+W),N(u,null!=F||O<M-1||j<D-1)}if(null!=F)for(O=0;O<F.length;O++)N(F[O],O<F.length-1);c&&!o&&(this.closeDocument(),R()),this.wnd.focus()}catch(Z){null!=u&&null!=u.parentNode&&u.parentNode.removeChild(u)}finally{this.graph.cellRenderer.initializeOverlay=a}return this.wnd},mxPrintPreview.prototype.addPageBreak=function(e){var t=e.createElement("hr");t.className="mxPageBreak",e.body.appendChild(t)},mxPrintPreview.prototype.closeDocument=function(){try{if(null!=this.wnd&&null!=this.wnd.document){var e=this.wnd.document;this.writePostfix(e),e.writeln("</body>"),e.writeln("</html>"),e.close(),mxEvent.release(e.body)}}catch(t){}},mxPrintPreview.prototype.writeHead=function(e,t){null!=this.title&&e.writeln("<title>"+this.title+"</title>"),mxClient.IS_VML&&e.writeln('<style type="text/css">v\\:*{behavior:url(#default#VML)}o\\:*{behavior:url(#default#VML)}</style>'),mxClient.link("stylesheet",mxClient.basePath+"/css/common.css",e),e.writeln('<style type="text/css">'),e.writeln("@media print {"),e.writeln("  * { -webkit-print-color-adjust: exact; }"),e.writeln("  table.mxPageSelector { display: none; }"),e.writeln("  hr.mxPageBreak { display: none; }"),e.writeln("}"),e.writeln("@media screen {"),e.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),e.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),e.writeln("  body.mxPage { background: gray; }"),e.writeln("}"),null!=t&&e.writeln(t),e.writeln("</style>")},mxPrintPreview.prototype.writePostfix=function(e){},mxPrintPreview.prototype.createPageSelector=function(e,t){var r=this.wnd.document,o=r.createElement("table");o.className="mxPageSelector",o.setAttribute("border","0");for(var a=r.createElement("tbody"),u=0;u<e;u++){for(var c=r.createElement("tr"),f=0;f<t;f++){var m=u*t+f+1,x=r.createElement("td"),v=r.createElement("a");v.setAttribute("href","#mxPage-"+m),!mxClient.IS_NS||mxClient.IS_SF||mxClient.IS_GC||v.setAttribute("onclick","var page = document.getElementById('mxPage-"+m+"');page.scrollIntoView(true);event.preventDefault();"),mxUtils.write(v,m,r),x.appendChild(v),c.appendChild(x)}a.appendChild(c)}return o.appendChild(a),o},mxPrintPreview.prototype.renderPage=function(e,t,r,o,a,u){var c=this.wnd.document,f=document.createElement("div"),m=null;try{if(0!=r||0!=o){f.style.position="relative",f.style.width=e+"px",f.style.height=t+"px",f.style.pageBreakInside="avoid",(x=document.createElement("div")).style.position="relative",x.style.top=this.border+"px",x.style.left=this.border+"px",x.style.width=e-2*this.border+"px",x.style.height=t-2*this.border+"px",x.style.overflow="hidden";var v=document.createElement("div");v.style.position="relative",v.style.marginLeft=r+"px",v.style.marginTop=o+"px",8==c.documentMode&&(x.style.position="absolute",v.style.position="absolute"),10==c.documentMode&&(v.style.width="100%",v.style.height="100%"),x.appendChild(v),f.appendChild(x),document.body.appendChild(f),m=v}else{var x;f.style.width=e+"px",f.style.height=t+"px",f.style.overflow="hidden",f.style.pageBreakInside="avoid",8==c.documentMode&&(f.style.position="relative"),(x=document.createElement("div")).style.width=e-2*this.border+"px",x.style.height=t-2*this.border+"px",x.style.overflow="hidden",!mxClient.IS_IE||null!=c.documentMode&&5!=c.documentMode&&8!=c.documentMode&&7!=c.documentMode?(x.style.top=this.border+"px",x.style.left=this.border+"px"):(x.style.marginTop=this.border+"px",x.style.marginLeft=this.border+"px"),this.graph.dialect==mxConstants.DIALECT_VML&&(x.style.position="absolute"),f.appendChild(x),document.body.appendChild(f),m=x}}catch(E){throw f.parentNode.removeChild(f),f=null,E}return a(m),f},mxPrintPreview.prototype.getRoot=function(){var e=this.graph.view.currentRoot;return null==e&&(e=this.graph.getModel().getRoot()),e},mxPrintPreview.prototype.useCssTransforms=function(){return!mxClient.NO_FO&&!mxClient.IS_SF},mxPrintPreview.prototype.addGraphFragment=function(e,t,r,o,a,u){var c=this.graph.getView(),f=this.graph.container;this.graph.container=a;var m=c.getCanvas(),x=c.getBackgroundPane(),v=c.getDrawPane(),E=c.getOverlayPane(),S=r;if(this.graph.dialect==mxConstants.DIALECT_SVG){if(c.createSvg(),this.useCssTransforms()){var b=c.getDrawPane().parentNode;b.getAttribute("transform"),b.setAttribute("transformOrigin","0 0"),b.setAttribute("transform","scale("+r+","+r+")translate("+e+","+t+")"),r=1,e=0,t=0}}else this.graph.dialect==mxConstants.DIALECT_VML?c.createVml():c.createHtml();var D=c.isEventsEnabled();c.setEventsEnabled(!1);var M=this.graph.isEnabled();this.graph.setEnabled(!1);var R=c.getTranslate();c.translate=new mxPoint(e,t);var N=this.graph.cellRenderer.redraw,V=c.states,O=c.scale;if(this.clipping){var F=new mxRectangle((u.x+R.x)*O,(u.y+R.y)*O,u.width*O/S,u.height*O/S);this.graph.cellRenderer.redraw=function(Q,K,ie){if(null!=Q){var U=V.get(Q.cell);if(null!=U){var he=c.getBoundingBox(U,!1);if(null!=he&&he.width>0&&he.height>0&&!mxUtils.intersects(F,he))return}}N.apply(this,arguments)}}var G=null;try{var j=[this.getRoot()];G=new mxTemporaryCellStates(c,r,j,null,mxUtils.bind(this,function(Q){return this.getLinkForCellState(Q)}))}finally{if(mxClient.IS_IE)c.overlayPane.innerHTML="",c.canvas.style.overflow="hidden",c.canvas.style.position="relative",c.canvas.style.top=this.marginTop+"px",c.canvas.style.width=u.width+"px",c.canvas.style.height=u.height+"px";else for(var Y=a.firstChild;null!=Y;){var W=Y.nextSibling,q=Y.nodeName.toLowerCase();"svg"==q?(Y.style.overflow="hidden",Y.style.position="relative",Y.style.top=this.marginTop+"px",Y.setAttribute("width",u.width),Y.setAttribute("height",u.height),Y.style.width="",Y.style.height=""):"default"!=Y.style.cursor&&"div"!=q&&Y.parentNode.removeChild(Y),Y=W}if(this.printBackgroundImage){var Z=a.getElementsByTagName("svg");Z.length>0&&(Z[0].style.position="absolute")}c.overlayPane.parentNode.removeChild(c.overlayPane),this.graph.setEnabled(M),this.graph.container=f,this.graph.cellRenderer.redraw=N,c.canvas=m,c.backgroundPane=x,c.drawPane=v,c.overlayPane=E,c.translate=R,G.destroy(),c.setEventsEnabled(D)}},mxPrintPreview.prototype.getLinkForCellState=function(e){return this.graph.getLinkForCell(e.cell)},mxPrintPreview.prototype.insertBackgroundImage=function(e,t,r){var o=this.graph.backgroundImage;if(null!=o){var a=document.createElement("img");a.style.position="absolute",a.style.marginLeft=Math.round(t*this.scale)+"px",a.style.marginTop=Math.round(r*this.scale)+"px",a.setAttribute("width",Math.round(this.scale*o.width)),a.setAttribute("height",Math.round(this.scale*o.height)),a.src=o.src,e.insertBefore(a,e.firstChild)}},mxPrintPreview.prototype.getCoverPages=function(){return null},mxPrintPreview.prototype.getAppendices=function(){return null},mxPrintPreview.prototype.print=function(e){var t=this.open(e);null!=t&&t.print()},mxPrintPreview.prototype.close=function(){null!=this.wnd&&(this.wnd.close(),this.wnd=null)},__mxOutput.mxPrintPreview=void 0!==mxPrintPreview?mxPrintPreview:void 0,mxStylesheet.prototype.createDefaultVertexStyle=function(){var e=new Object;return e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_RECTANGLE,e[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,e[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,e[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,e[mxConstants.STYLE_FILLCOLOR]="#C3D9FF",e[mxConstants.STYLE_STROKECOLOR]="#6482B9",e[mxConstants.STYLE_FONTCOLOR]="#774400",e},mxStylesheet.prototype.createDefaultEdgeStyle=function(){var e=new Object;return e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_CONNECTOR,e[mxConstants.STYLE_ENDARROW]=mxConstants.ARROW_CLASSIC,e[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,e[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,e[mxConstants.STYLE_STROKECOLOR]="#6482B9",e[mxConstants.STYLE_FONTCOLOR]="#446299",e},mxStylesheet.prototype.putDefaultVertexStyle=function(e){this.putCellStyle("defaultVertex",e)},mxStylesheet.prototype.putDefaultEdgeStyle=function(e){this.putCellStyle("defaultEdge",e)},mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex},mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge},mxStylesheet.prototype.putCellStyle=function(e,t){this.styles[e]=t},mxStylesheet.prototype.getCellStyle=function(e,t){var r=t;if(null!=e&&e.length>0){var o=e.split(";");r=null!=r&&";"!=e.charAt(0)?mxUtils.clone(r):new Object;for(var a=0;a<o.length;a++){var u=o[a],c=u.indexOf("=");if(c>=0){var f=u.substring(0,c),m=u.substring(c+1);m==mxConstants.NONE?delete r[f]:r[f]=mxUtils.isNumeric(m)?parseFloat(m):m}else{var x=this.styles[u];if(null!=x)for(var f in x)r[f]=x[f]}}}return r},__mxOutput.mxStylesheet=void 0!==mxStylesheet?mxStylesheet:void 0,mxCellState.prototype=new mxRectangle,mxCellState.prototype.constructor=mxCellState,mxCellState.prototype.view=null,mxCellState.prototype.cell=null,mxCellState.prototype.style=null,mxCellState.prototype.invalidStyle=!1,mxCellState.prototype.invalid=!0,mxCellState.prototype.origin=null,mxCellState.prototype.absolutePoints=null,mxCellState.prototype.absoluteOffset=null,mxCellState.prototype.visibleSourceState=null,mxCellState.prototype.visibleTargetState=null,mxCellState.prototype.terminalDistance=0,mxCellState.prototype.length=0,mxCellState.prototype.segments=null,mxCellState.prototype.shape=null,mxCellState.prototype.text=null,mxCellState.prototype.unscaledWidth=null,mxCellState.prototype.unscaledHeight=null,mxCellState.prototype.getPerimeterBounds=function(e,t){if(e=e||0,t=null!=t?t:new mxRectangle(this.x,this.y,this.width,this.height),null!=this.shape&&null!=this.shape.stencil&&"fixed"==this.shape.stencil.aspect){var r=this.shape.stencil.computeAspect(this.style,t.x,t.y,t.width,t.height);t.x=r.x,t.y=r.y,t.width=this.shape.stencil.w0*r.width,t.height=this.shape.stencil.h0*r.height}return 0!=e&&t.grow(e),t},mxCellState.prototype.setAbsoluteTerminalPoint=function(e,t){t?(null==this.absolutePoints&&(this.absolutePoints=[]),0==this.absolutePoints.length?this.absolutePoints.push(e):this.absolutePoints[0]=e):null==this.absolutePoints?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(e)):1==this.absolutePoints.length?this.absolutePoints.push(e):this.absolutePoints[this.absolutePoints.length-1]=e},mxCellState.prototype.setCursor=function(e){null!=this.shape&&this.shape.setCursor(e),null!=this.text&&this.text.setCursor(e)},mxCellState.prototype.getVisibleTerminal=function(e){var t=this.getVisibleTerminalState(e);return null!=t?t.cell:null},mxCellState.prototype.getVisibleTerminalState=function(e){return e?this.visibleSourceState:this.visibleTargetState},mxCellState.prototype.setVisibleTerminalState=function(e,t){t?this.visibleSourceState=e:this.visibleTargetState=e},mxCellState.prototype.getCellBounds=function(){return this.cellBounds},mxCellState.prototype.getPaintBounds=function(){return this.paintBounds},mxCellState.prototype.updateCachedBounds=function(){var e=this.view.translate,t=this.view.scale;this.cellBounds=new mxRectangle(this.x/t-e.x,this.y/t-e.y,this.width/t,this.height/t),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),null!=this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()},mxCellState.prototype.setState=function(e){this.view=e.view,this.cell=e.cell,this.style=e.style,this.absolutePoints=e.absolutePoints,this.origin=e.origin,this.absoluteOffset=e.absoluteOffset,this.boundingBox=e.boundingBox,this.terminalDistance=e.terminalDistance,this.segments=e.segments,this.length=e.length,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.unscaledWidth=e.unscaledWidth,this.unscaledHeight=e.unscaledHeight},mxCellState.prototype.clone=function(){var e=new mxCellState(this.view,this.cell,this.style);if(null!=this.absolutePoints){e.absolutePoints=[];for(var t=0;t<this.absolutePoints.length;t++)e.absolutePoints[t]=this.absolutePoints[t].clone()}return null!=this.origin&&(e.origin=this.origin.clone()),null!=this.absoluteOffset&&(e.absoluteOffset=this.absoluteOffset.clone()),null!=this.boundingBox&&(e.boundingBox=this.boundingBox.clone()),e.terminalDistance=this.terminalDistance,e.segments=this.segments,e.length=this.length,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.unscaledWidth=this.unscaledWidth,e.unscaledHeight=this.unscaledHeight,e},mxCellState.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)},__mxOutput.mxCellState=void 0!==mxCellState?mxCellState:void 0,mxGraphSelectionModel.prototype=new mxEventSource,mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel,mxGraphSelectionModel.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphSelectionModel.prototype.updatingSelectionResource="none"!=mxClient.language?"updatingSelection":"",mxGraphSelectionModel.prototype.graph=null,mxGraphSelectionModel.prototype.singleSelection=!1,mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection},mxGraphSelectionModel.prototype.setSingleSelection=function(e){this.singleSelection=e},mxGraphSelectionModel.prototype.isSelected=function(e){return null!=e&&mxUtils.indexOf(this.cells,e)>=0},mxGraphSelectionModel.prototype.isEmpty=function(){return 0==this.cells.length},mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)},mxGraphSelectionModel.prototype.setCell=function(e){null!=e&&this.setCells([e])},mxGraphSelectionModel.prototype.setCells=function(e){if(null!=e){this.singleSelection&&(e=[this.getFirstSelectableCell(e)]);for(var t=[],r=0;r<e.length;r++)this.graph.isCellSelectable(e[r])&&t.push(e[r]);this.changeSelection(t,this.cells)}},mxGraphSelectionModel.prototype.getFirstSelectableCell=function(e){if(null!=e)for(var t=0;t<e.length;t++)if(this.graph.isCellSelectable(e[t]))return e[t];return null},mxGraphSelectionModel.prototype.addCell=function(e){null!=e&&this.addCells([e])},mxGraphSelectionModel.prototype.addCells=function(e){if(null!=e){var t=null;this.singleSelection&&(t=this.cells,e=[this.getFirstSelectableCell(e)]);for(var r=[],o=0;o<e.length;o++)!this.isSelected(e[o])&&this.graph.isCellSelectable(e[o])&&r.push(e[o]);this.changeSelection(r,t)}},mxGraphSelectionModel.prototype.removeCell=function(e){null!=e&&this.removeCells([e])},mxGraphSelectionModel.prototype.removeCells=function(e){if(null!=e){for(var t=[],r=0;r<e.length;r++)this.isSelected(e[r])&&t.push(e[r]);this.changeSelection(null,t)}},mxGraphSelectionModel.prototype.changeSelection=function(e,t){if(null!=e&&e.length>0&&null!=e[0]||null!=t&&t.length>0&&null!=t[0]){var r=new mxSelectionChange(this,e,t);r.execute();var o=new mxUndoableEdit(this,!1);o.add(r),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",o))}},mxGraphSelectionModel.prototype.cellAdded=function(e){null!=e&&!this.isSelected(e)&&this.cells.push(e)},mxGraphSelectionModel.prototype.cellRemoved=function(e){if(null!=e){var t=mxUtils.indexOf(this.cells,e);t>=0&&this.cells.splice(t,1)}},mxSelectionChange.prototype.execute=function(){var e=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,null!=this.removed)for(var t=0;t<this.removed.length;t++)this.selectionModel.cellRemoved(this.removed[t]);if(null!=this.added)for(t=0;t<this.added.length;t++)this.selectionModel.cellAdded(this.added[t]);var r=this.added;this.added=this.removed,this.removed=r,window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",e),this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))},__mxOutput.mxGraphSelectionModel=void 0!==mxGraphSelectionModel?mxGraphSelectionModel:void 0,mxCellEditor.prototype.graph=null,mxCellEditor.prototype.textarea=null,mxCellEditor.prototype.editingCell=null,mxCellEditor.prototype.trigger=null,mxCellEditor.prototype.modified=!1,mxCellEditor.prototype.autoSize=!0,mxCellEditor.prototype.selectText=!0,mxCellEditor.prototype.emptyLabelText=mxClient.IS_FF?"<br>":"",mxCellEditor.prototype.escapeCancelsEditing=!0,mxCellEditor.prototype.textNode="",mxCellEditor.prototype.zIndex=5,mxCellEditor.prototype.minResize=new mxRectangle(0,20),mxCellEditor.prototype.wordWrapPadding=mxClient.IS_QUIRKS?2:mxClient.IS_IE11?0:1,mxCellEditor.prototype.blurEnabled=!1,mxCellEditor.prototype.initialValue=null,mxCellEditor.prototype.align=null,mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.textarea.style.position=this.isLegacyEditor()?"absolute":"relative",this.installListeners(this.textarea)},mxCellEditor.prototype.applyValue=function(e,t){this.graph.labelChanged(e.cell,t,this.trigger)},mxCellEditor.prototype.setAlign=function(e){null!=this.textarea&&(this.textarea.style.textAlign=e),this.align=e,this.resize()},mxCellEditor.prototype.getInitialValue=function(e,t){var r=mxUtils.htmlEntities(this.graph.getEditingValue(e.cell,t),!1);return!mxClient.IS_QUIRKS&&8!=document.documentMode&&9!=document.documentMode&&10!=document.documentMode&&(r=mxUtils.replaceTrailingNewlines(r,"<div><br></div>")),r.replace(/\n/g,"<br>")},mxCellEditor.prototype.getCurrentValue=function(e){return mxUtils.extractTextWithWhitespace(this.textarea.childNodes)},mxCellEditor.prototype.isCancelEditingKeyEvent=function(e){return this.escapeCancelsEditing||mxEvent.isShiftDown(e)||mxEvent.isControlDown(e)||mxEvent.isMetaDown(e)},mxCellEditor.prototype.installListeners=function(e){mxEvent.addListener(e,"dragstart",mxUtils.bind(this,function(u){this.graph.stopEditing(!1),mxEvent.consume(u)})),mxEvent.addListener(e,"blur",mxUtils.bind(this,function(u){this.blurEnabled&&this.focusLost(u)})),mxEvent.addListener(e,"keydown",mxUtils.bind(this,function(u){mxEvent.isConsumed(u)||(this.isStopEditingEvent(u)?(this.graph.stopEditing(!1),mxEvent.consume(u)):27==u.keyCode&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(u)),mxEvent.consume(u)))}));var t=mxUtils.bind(this,function(u){null!=this.editingCell&&this.clearOnChange&&e.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||8!=u.keyCode&&46!=u.keyCode)&&(this.clearOnChange=!1,e.innerHTML="")});mxEvent.addListener(e,"keypress",t),mxEvent.addListener(e,"paste",t);var r=mxUtils.bind(this,function(u){null!=this.editingCell&&(0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0):this.clearOnChange=!1)});mxEvent.addListener(e,mxClient.IS_IE11||mxClient.IS_IE?"keyup":"input",r),mxEvent.addListener(e,"cut",r),mxEvent.addListener(e,"paste",r);var o=mxClient.IS_IE11||mxClient.IS_IE?"keydown":"input",a=mxUtils.bind(this,function(u){null!=this.editingCell&&this.autoSize&&!mxEvent.isConsumed(u)&&(null!=this.resizeThread&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent.addListener(e,o,a),mxEvent.addListener(window,"resize",a),document.documentMode>=9?(mxEvent.addListener(e,"DOMNodeRemoved",a),mxEvent.addListener(e,"DOMNodeInserted",a)):(mxEvent.addListener(e,"cut",a),mxEvent.addListener(e,"paste",a))},mxCellEditor.prototype.isStopEditingEvent=function(e){return 113==e.keyCode||this.graph.isEnterStopsCellEditing()&&13==e.keyCode&&!mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)},mxCellEditor.prototype.isEventSource=function(e){return mxEvent.getSource(e)==this.textarea},mxCellEditor.prototype.resize=function(){var e=this.graph.getView().getState(this.editingCell);if(null==e)this.stopEditing(!0);else if(null!=this.textarea){var t=this.graph.getModel().isEdge(e.cell),r=this.graph.getView().scale,o=null;if(this.autoSize&&"fill"!=e.style[mxConstants.STYLE_OVERFLOW]){var a=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);if(null==(o=null!=e.text&&null==this.align?e.text.margin:null)&&(o=mxUtils.getAlignmentAsPoint(this.align||mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),t){if(this.bounds=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y,0,0),null!=a){var u=(parseFloat(a)+2)*r;this.bounds.width=u,this.bounds.x+=o.x*u}}else{var c=mxRectangle.fromRectangle(e),f=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),m=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(c=null!=e.shape&&f==mxConstants.ALIGN_CENTER&&m==mxConstants.ALIGN_MIDDLE?e.shape.getLabelBounds(c):c,null!=a&&(c.width=parseFloat(a)*r),!e.view.graph.cellRenderer.legacySpacing||"width"!=e.style[mxConstants.STYLE_OVERFLOW]){var x=parseInt(e.style[mxConstants.STYLE_SPACING]||2)*r,v=(parseInt(e.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*r+x,E=(parseInt(e.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*r+x,S=(parseInt(e.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*r+x,b=(parseInt(e.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*r+x;f=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),m=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),c=new mxRectangle(c.x+b,c.y+v,c.width-(f==mxConstants.ALIGN_CENTER&&null==a?b+E:0),c.height-(m==mxConstants.ALIGN_MIDDLE?v+S:0))}this.bounds=new mxRectangle(c.x+e.absoluteOffset.x,c.y+e.absoluteOffset.y,c.width,c.height)}this.graph.isWrapping(e.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal",u=Math.round(this.bounds.width/(document,r))+this.wordWrapPadding,"relative"!=this.textarea.style.position?(this.textarea.style.width=u+"px",this.textarea.scrollWidth>u&&(this.textarea.style.width=this.textarea.scrollWidth+"px")):this.textarea.style.maxWidth=u+"px"):(this.textarea.style.whiteSpace="nowrap",this.textarea.style.width=""),8==document.documentMode&&(this.textarea.style.zoom="1",this.textarea.style.height="auto");var _=this.textarea.scrollWidth,D=this.textarea.scrollHeight;8==document.documentMode?(this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-o.x*(this.bounds.width-(_+1)*r)+_*(r-1)*0+2*(o.x+.5))/r))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-o.y*(this.bounds.height-(D+.5)*r)+D*(r-1)*0+1*Math.abs(o.y+.5))/r))+"px",this.textarea.style.width=Math.round(_*r)+"px",this.textarea.style.height=Math.round(D*r)+"px"):mxClient.IS_QUIRKS?(this.textarea.style.left=Math.max(0,Math.ceil(this.bounds.x-o.x*(this.bounds.width-(_+1)*r)+_*(r-1)*0+2*(o.x+.5)))+"px",this.textarea.style.top=Math.max(0,Math.ceil(this.bounds.y-o.y*(this.bounds.height-(D+.5)*r)+D*(r-1)*0+1*Math.abs(o.y+.5)))+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-o.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-o.y*(this.bounds.height-4)+(-1==o.y?3:0))+1)+"px")}else this.bounds=this.getEditorBounds(e),this.textarea.style.width=Math.round(this.bounds.width/r)+"px",this.textarea.style.height=Math.round(this.bounds.height/r)+"px",8==document.documentMode||mxClient.IS_QUIRKS?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(e.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=Math.round(this.bounds.width/r)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap","fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=""));mxClient.IS_VML?this.textarea.style.zoom=r:(mxUtils.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+r+","+r+")"+(null==o?"":" translate("+100*o.x+"%,"+100*o.y+"%)")))}},mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())},mxCellEditor.prototype.getBackgroundColor=function(e){return null},mxCellEditor.prototype.isLegacyEditor=function(){if(mxClient.IS_VML)return!0;var e=!1;if(mxClient.IS_SVG){var t=this.graph.view.getDrawPane().ownerSVGElement;if(null!=t){var r=mxUtils.getCurrentStyle(t);null!=r&&(e="absolute"==r.position)}}return!e},mxCellEditor.prototype.startEditing=function(e,t){this.stopEditing(!0),this.align=null,null==this.textarea&&this.init(),null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.hideTooltip();var r=this.graph.getView().getState(e);if(null!=r){this.graph.getView();var a=mxUtils.getValue(r.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),u=mxUtils.getValue(r.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),c=mxUtils.getValue(r.style,mxConstants.STYLE_FONTCOLOR,"black"),f=mxUtils.getValue(r.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),m=(mxUtils.getValue(r.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,x=(mxUtils.getValue(r.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,v=[];(mxUtils.getValue(r.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&v.push("underline"),(mxUtils.getValue(r.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&v.push("line-through"),this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(a*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(r),this.textarea.style.textDecoration=v.join(" "),this.textarea.style.fontWeight=m?"bold":"normal",this.textarea.style.fontStyle=x?"italic":"",this.textarea.style.fontSize=Math.round(a)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=u,this.textarea.style.textAlign=f,this.textarea.style.outline="none",this.textarea.style.color=c;var E=this.textDirection=mxUtils.getValue(r.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION);E==mxConstants.TEXT_DIRECTION_AUTO&&null!=r&&null!=r.text&&r.text.dialect!=mxConstants.DIALECT_STRICTHTML&&!mxUtils.isNode(r.text.value)&&(E=r.text.getAutoDirection()),E==mxConstants.TEXT_DIRECTION_LTR||E==mxConstants.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",E):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(r,t)||"",this.initialValue=this.textarea.innerHTML,0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=e,this.trigger=t,this.textNode=null,null!=r.text&&this.isHideLabel(r)&&(this.textNode=r.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(r.cell)||"fill"!=r.style[mxConstants.STYLE_OVERFLOW])&&window.setTimeout(mxUtils.bind(this,function(){this.resize()}),0),this.resize();try{this.textarea.focus(),this.isSelectText()&&this.textarea.innerHTML.length>0&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch(S){}}},mxCellEditor.prototype.isSelectText=function(){return this.selectText},mxCellEditor.prototype.clearSelection=function(){var e=null;window.getSelection?e=window.getSelection():document.selection&&(e=document.selection),null!=e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())},mxCellEditor.prototype.stopEditing=function(e){if(e=e||!1,null!=this.editingCell){null!=this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null);var t=e?null:this.graph.view.getState(this.editingCell),r=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.trigger=null,this.bounds=null,this.textarea.blur(),this.clearSelection(),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),null!=t&&(this.textarea.innerHTML!=r||null!=this.align)){this.prepareTextarea();var o=this.getCurrentValue(t);this.graph.getModel().beginUpdate();try{null!=o&&this.applyValue(t,o),null!=this.align&&this.graph.setCellStyles(mxConstants.STYLE_ALIGN,this.align,[t.cell])}finally{this.graph.getModel().endUpdate()}}mxEvent.release(this.textarea),this.textarea=null,this.align=null}},mxCellEditor.prototype.prepareTextarea=function(){null!=this.textarea.lastChild&&"BR"==this.textarea.lastChild.nodeName&&this.textarea.removeChild(this.textarea.lastChild)},mxCellEditor.prototype.isHideLabel=function(e){return!0},mxCellEditor.prototype.getMinimumSize=function(e){var t=this.graph.getView().scale;return new mxRectangle(0,0,null==e.text?30:e.text.size*t+20,"left"==this.textarea.style.textAlign?120:40)},mxCellEditor.prototype.getEditorBounds=function(e){var t=this.graph.getModel().isEdge(e.cell),r=this.graph.getView().scale,o=this.getMinimumSize(e),a=o.width,u=o.height,c=null;if(!t&&e.view.graph.cellRenderer.legacySpacing&&"fill"==e.style[mxConstants.STYLE_OVERFLOW])c=e.shape.getLabelBounds(mxRectangle.fromRectangle(e));else{var f=parseInt(e.style[mxConstants.STYLE_SPACING]||0)*r,m=(parseInt(e.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*r+f,x=(parseInt(e.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*r+f,v=(parseInt(e.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*r+f,E=(parseInt(e.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*r+f;c=new mxRectangle(e.x,e.y,Math.max(a,e.width-E-x),Math.max(u,e.height-m-v));var S=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),b=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(c=null!=e.shape&&S==mxConstants.ALIGN_CENTER&&b==mxConstants.ALIGN_MIDDLE?e.shape.getLabelBounds(c):c,t?(c.x=e.absoluteOffset.x,c.y=e.absoluteOffset.y,null!=e.text&&null!=e.text.boundingBox&&(e.text.boundingBox.x>0&&(c.x=e.text.boundingBox.x),e.text.boundingBox.y>0&&(c.y=e.text.boundingBox.y))):null!=e.text&&null!=e.text.boundingBox&&(c.x=Math.min(c.x,e.text.boundingBox.x),c.y=Math.min(c.y,e.text.boundingBox.y)),c.x+=E,c.y+=m,null!=e.text&&null!=e.text.boundingBox&&(t?(c.width=Math.max(a,e.text.boundingBox.width),c.height=Math.max(u,e.text.boundingBox.height)):(c.width=Math.max(c.width,e.text.boundingBox.width),c.height=Math.max(c.height,e.text.boundingBox.height))),this.graph.getModel().isVertex(e.cell)){var _=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);_==mxConstants.ALIGN_LEFT?c.x-=e.width:_==mxConstants.ALIGN_RIGHT&&(c.x+=e.width);var D=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);D==mxConstants.ALIGN_TOP?c.y-=e.height:D==mxConstants.ALIGN_BOTTOM&&(c.y+=e.height)}}return new mxRectangle(Math.round(c.x),Math.round(c.y),Math.round(c.width),Math.round(c.height))},mxCellEditor.prototype.getEmptyLabelText=function(e){return this.emptyLabelText},mxCellEditor.prototype.getEditingCell=function(){return this.editingCell},mxCellEditor.prototype.destroy=function(){null!=this.textarea&&(mxEvent.release(this.textarea),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)},__mxOutput.mxCellEditor=void 0!==mxCellEditor?mxCellEditor:void 0,mxCellRenderer.defaultShapes=new Object,mxCellRenderer.prototype.defaultEdgeShape=mxConnector,mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape,mxCellRenderer.prototype.defaultTextShape=mxText,mxCellRenderer.prototype.legacyControlPosition=!0,mxCellRenderer.prototype.legacySpacing=!0,mxCellRenderer.prototype.antiAlias=!0,mxCellRenderer.prototype.minSvgStrokeWidth=1,mxCellRenderer.prototype.forceControlClickHandler=!1,mxCellRenderer.registerShape=function(e,t){mxCellRenderer.defaultShapes[e]=t},mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel),mxCellRenderer.prototype.initializeShape=function(e){e.shape.dialect=e.view.graph.dialect,this.configureShape(e),e.shape.init(e.view.getDrawPane())},mxCellRenderer.prototype.createShape=function(e){var t=null;if(null!=e.style){var r=mxStencilRegistry.getStencil(e.style[mxConstants.STYLE_SHAPE]);t=null!=r?new mxShape(r):new(this.getShapeConstructor(e))}return t},mxCellRenderer.prototype.createIndicatorShape=function(e){e.shape.indicatorShape=this.getShape(e.view.graph.getIndicatorShape(e))},mxCellRenderer.prototype.getShape=function(e){return null!=e?mxCellRenderer.defaultShapes[e]:null},mxCellRenderer.prototype.getShapeConstructor=function(e){var t=this.getShape(e.style[mxConstants.STYLE_SHAPE]);return null==t&&(t=e.view.graph.getModel().isEdge(e.cell)?this.defaultEdgeShape:this.defaultVertexShape),t},mxCellRenderer.prototype.configureShape=function(e){e.shape.apply(e),e.shape.image=e.view.graph.getImage(e),e.shape.indicatorColor=e.view.graph.getIndicatorColor(e),e.shape.indicatorStrokeColor=e.style[mxConstants.STYLE_INDICATOR_STROKECOLOR],e.shape.indicatorGradientColor=e.view.graph.getIndicatorGradientColor(e),e.shape.indicatorDirection=e.style[mxConstants.STYLE_INDICATOR_DIRECTION],e.shape.indicatorImage=e.view.graph.getIndicatorImage(e),this.postConfigureShape(e)},mxCellRenderer.prototype.postConfigureShape=function(e){null!=e.shape&&(this.resolveColor(e,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(e,"indicatorColor",mxConstants.STYLE_FILLCOLOR),this.resolveColor(e,"gradient",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(e,"stroke",mxConstants.STYLE_STROKECOLOR),this.resolveColor(e,"fill",mxConstants.STYLE_FILLCOLOR))},mxCellRenderer.prototype.checkPlaceholderStyles=function(e){if(null!=e.style)for(var t=["inherit","swimlane","indicated"],r=[mxConstants.STYLE_FILLCOLOR,mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.STYLE_FONTCOLOR],o=0;o<r.length;o++)if(mxUtils.indexOf(t,e.style[r[o]])>=0)return!0;return!1},mxCellRenderer.prototype.resolveColor=function(e,t,r){var o=r==mxConstants.STYLE_FONTCOLOR?e.text:e.shape;if(null!=o){var a=e.view.graph,u=o[t],c=null;if("inherit"==u?c=a.model.getParent(e.cell):"swimlane"==u?(o[t]=r==mxConstants.STYLE_STROKECOLOR||r==mxConstants.STYLE_FONTCOLOR?"#000000":"#ffffff",c=null!=a.model.getTerminal(e.cell,!1)?a.model.getTerminal(e.cell,!1):e.cell,c=a.getSwimlane(c),r=a.swimlaneIndicatorColorAttribute):"indicated"==u&&null!=e.shape?o[t]=e.shape.indicatorColor:r!=mxConstants.STYLE_FILLCOLOR&&u==mxConstants.STYLE_FILLCOLOR&&null!=e.shape?o[t]=e.style[mxConstants.STYLE_FILLCOLOR]:r!=mxConstants.STYLE_STROKECOLOR&&u==mxConstants.STYLE_STROKECOLOR&&null!=e.shape&&(o[t]=e.style[mxConstants.STYLE_STROKECOLOR]),null!=c){var f=a.getView().getState(c);if(o[t]=null,null!=f){var m=r==mxConstants.STYLE_FONTCOLOR?f.text:f.shape;o[t]=null!=m&&"indicatorColor"!=t?m[t]:f.style[r]}}}},mxCellRenderer.prototype.getLabelValue=function(e){return e.view.graph.getLabel(e.cell)},mxCellRenderer.prototype.createLabel=function(e,t){var r=e.view.graph;if(r.getModel().isEdge(e.cell),e.style[mxConstants.STYLE_FONTSIZE]>0||null==e.style[mxConstants.STYLE_FONTSIZE]){var a=r.isHtmlLabel(e.cell)||null!=t&&mxUtils.isNode(t);e.text=new this.defaultTextShape(t,new mxRectangle,e.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,r.getVerticalAlign(e),e.style[mxConstants.STYLE_FONTCOLOR],e.style[mxConstants.STYLE_FONTFAMILY],e.style[mxConstants.STYLE_FONTSIZE],e.style[mxConstants.STYLE_FONTSTYLE],e.style[mxConstants.STYLE_SPACING],e.style[mxConstants.STYLE_SPACING_TOP],e.style[mxConstants.STYLE_SPACING_RIGHT],e.style[mxConstants.STYLE_SPACING_BOTTOM],e.style[mxConstants.STYLE_SPACING_LEFT],e.style[mxConstants.STYLE_HORIZONTAL],e.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],e.style[mxConstants.STYLE_LABEL_BORDERCOLOR],r.isWrapping(e.cell)&&r.isHtmlLabel(e.cell),r.isLabelClipped(e.cell),e.style[mxConstants.STYLE_OVERFLOW],e.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)),e.text.opacity=mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_OPACITY,100),e.text.dialect=a?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect,e.text.style=e.style,e.text.state=e,this.initializeLabel(e,e.text);var u=!1,c=function(f){var m=e;if(mxClient.IS_TOUCH||u){var x=mxEvent.getClientX(f),v=mxEvent.getClientY(f),E=mxUtils.convertPoint(r.container,x,v);m=r.view.getState(r.getCellAt(E.x,E.y))}return m};mxEvent.addGestureListeners(e.text.node,mxUtils.bind(this,function(f){this.isLabelEvent(e,f)&&(r.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(f,e)),u=r.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(f).nodeName)}),mxUtils.bind(this,function(f){this.isLabelEvent(e,f)&&r.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(f,c(f)))}),mxUtils.bind(this,function(f){this.isLabelEvent(e,f)&&(r.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(f,c(f))),u=!1)})),r.nativeDblClickEnabled&&mxEvent.addListener(e.text.node,"dblclick",mxUtils.bind(this,function(f){this.isLabelEvent(e,f)&&(r.dblClick(f,e.cell),mxEvent.consume(f))}))}},mxCellRenderer.prototype.initializeLabel=function(e,t){t.init(mxClient.IS_SVG&&mxClient.NO_FO&&t.dialect!=mxConstants.DIALECT_SVG?e.view.graph.container:e.view.getDrawPane())},mxCellRenderer.prototype.createCellOverlays=function(e){var r=e.view.graph.getCellOverlays(e.cell),o=null;if(null!=r){o=new mxDictionary;for(var a=0;a<r.length;a++){var u=null!=e.overlays?e.overlays.remove(r[a]):null;if(null==u){var c=new mxImageShape(new mxRectangle,r[a].image.src);c.dialect=e.view.graph.dialect,c.preserveImageAspect=!1,c.overlay=r[a],this.initializeOverlay(e,c),this.installCellOverlayListeners(e,r[a],c),null!=r[a].cursor&&(c.node.style.cursor=r[a].cursor),o.put(r[a],c)}else o.put(r[a],u)}}null!=e.overlays&&e.overlays.visit(function(f,m){m.destroy()}),e.overlays=o},mxCellRenderer.prototype.initializeOverlay=function(e,t){t.init(e.view.getOverlayPane())},mxCellRenderer.prototype.installCellOverlayListeners=function(e,t,r){var o=e.view.graph;mxEvent.addListener(r.node,"click",function(a){o.isEditing()&&o.stopEditing(!o.isInvokesStopCellEditing()),t.fireEvent(new mxEventObject(mxEvent.CLICK,"event",a,"cell",e.cell))}),mxEvent.addGestureListeners(r.node,function(a){mxEvent.consume(a)},function(a){o.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a,e))}),mxClient.IS_TOUCH&&mxEvent.addListener(r.node,"touchend",function(a){t.fireEvent(new mxEventObject(mxEvent.CLICK,"event",a,"cell",e.cell))})},mxCellRenderer.prototype.createControl=function(e){var t=e.view.graph,r=t.getFoldingImage(e);if(t.foldingEnabled&&null!=r){if(null==e.control){var o=new mxRectangle(0,0,r.width,r.height);e.control=new mxImageShape(o,r.src),e.control.preserveImageAspect=!1,e.control.dialect=t.dialect,this.initControl(e,e.control,!0,this.createControlClickHandler(e))}}else null!=e.control&&(e.control.destroy(),e.control=null)},mxCellRenderer.prototype.createControlClickHandler=function(e){var t=e.view.graph;return mxUtils.bind(this,function(r){if(this.forceControlClickHandler||t.isEnabled()){var o=!t.isCellCollapsed(e.cell);t.foldCells(o,!1,[e.cell],null,r),mxEvent.consume(r)}})},mxCellRenderer.prototype.initControl=function(e,t,r,o){var a=e.view.graph;a.isHtmlLabel(e.cell)&&mxClient.NO_FO&&a.dialect==mxConstants.DIALECT_SVG?(t.dialect=mxConstants.DIALECT_PREFERHTML,t.init(a.container),t.node.style.zIndex=1):t.init(e.view.getOverlayPane());var c=t.innerNode||t.node;if(null!=o&&!mxClient.IS_IOS&&(a.isEnabled()&&(c.style.cursor="pointer"),mxEvent.addListener(c,"click",o)),r){var f=null;mxEvent.addGestureListeners(c,function(m){f=new mxPoint(mxEvent.getClientX(m),mxEvent.getClientY(m)),a.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(m,e)),mxEvent.consume(m)},function(m){a.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(m,e))},function(m){a.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(m,e)),mxEvent.consume(m)}),null!=o&&mxClient.IS_IOS&&c.addEventListener("touchend",function(m){if(null!=f){var x=a.tolerance;Math.abs(f.x-mxEvent.getClientX(m))<x&&Math.abs(f.y-mxEvent.getClientY(m))<x&&(o.call(o,m),mxEvent.consume(m))}},!0)}return c},mxCellRenderer.prototype.isShapeEvent=function(e,t){return!0},mxCellRenderer.prototype.isLabelEvent=function(e,t){return!0},mxCellRenderer.prototype.installListeners=function(e){var t=e.view.graph,r=function(o){var a=e;if(t.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(o).nodeName||mxClient.IS_TOUCH){var u=mxEvent.getClientX(o),c=mxEvent.getClientY(o),f=mxUtils.convertPoint(t.container,u,c);a=t.view.getState(t.getCellAt(f.x,f.y))}return a};mxEvent.addGestureListeners(e.shape.node,mxUtils.bind(this,function(o){this.isShapeEvent(e,o)&&t.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(o,e))}),mxUtils.bind(this,function(o){this.isShapeEvent(e,o)&&t.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(o,r(o)))}),mxUtils.bind(this,function(o){this.isShapeEvent(e,o)&&t.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(o,r(o)))})),t.nativeDblClickEnabled&&mxEvent.addListener(e.shape.node,"dblclick",mxUtils.bind(this,function(o){this.isShapeEvent(e,o)&&(t.dblClick(o,e.cell),mxEvent.consume(o))}))},mxCellRenderer.prototype.redrawLabel=function(e,t){var r=e.view.graph,o=this.getLabelValue(e),a=r.isWrapping(e.cell),u=r.isLabelClipped(e.cell),f=e.view.graph.isHtmlLabel(e.cell)||null!=o&&mxUtils.isNode(o)?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect,m=e.style[mxConstants.STYLE_OVERFLOW]||"visible";if(null!=e.text&&(e.text.wrap!=a||e.text.clipped!=u||e.text.overflow!=m||e.text.dialect!=f)&&(e.text.destroy(),e.text=null),null==e.text&&null!=o&&(mxUtils.isNode(o)||o.length>0)?this.createLabel(e,o):null!=e.text&&(null==o||0==o.length)&&(e.text.destroy(),e.text=null),null!=e.text){t&&(null!=e.text.lastValue&&this.isTextShapeInvalid(e,e.text)&&(e.text.lastValue=null),e.text.resetStyles(),e.text.apply(e),e.text.valign=r.getVerticalAlign(e));var x=this.getLabelBounds(e),v=this.getTextScale(e);if(this.resolveColor(e,"color",mxConstants.STYLE_FONTCOLOR),t||e.text.value!=o||e.text.isWrapping!=a||e.text.overflow!=m||e.text.isClipping!=u||e.text.scale!=v||e.text.dialect!=f||null==e.text.bounds||!e.text.bounds.equals(x)){e.text.dialect=f,e.text.value=o,e.text.bounds=x,e.text.scale=v,e.text.wrap=a,e.text.clipped=u,e.text.overflow=m;var E=e.text.node.style.visibility;this.redrawLabelShape(e.text),e.text.node.style.visibility=E}}},mxCellRenderer.prototype.isTextShapeInvalid=function(e,t){function r(o,a,u){return"spacingTop"==a||"spacingRight"==a||"spacingBottom"==a||"spacingLeft"==a?parseFloat(t[o])-parseFloat(t.spacing)!=(e.style[a]||u):t[o]!=(e.style[a]||u)}return r("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||r("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||r("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||r("color",mxConstants.STYLE_FONTCOLOR,"black")||r("align",mxConstants.STYLE_ALIGN,"")||r("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||r("spacing",mxConstants.STYLE_SPACING,2)||r("spacingTop",mxConstants.STYLE_SPACING_TOP,0)||r("spacingRight",mxConstants.STYLE_SPACING_RIGHT,0)||r("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,0)||r("spacingLeft",mxConstants.STYLE_SPACING_LEFT,0)||r("horizontal",mxConstants.STYLE_HORIZONTAL,!0)||r("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||r("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||r("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||r("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)},mxCellRenderer.prototype.redrawLabelShape=function(e){e.redraw()},mxCellRenderer.prototype.getTextScale=function(e){return e.view.scale},mxCellRenderer.prototype.getLabelBounds=function(e){var t=e.view.graph,r=e.view.scale,o=t.getModel().isEdge(e.cell),a=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y);if(o){var u=e.text.getSpacing();a.x+=u.x*r,a.y+=u.y*r;var c=t.getCellGeometry(e.cell);null!=c&&(a.width=Math.max(0,c.width*r),a.height=Math.max(0,c.height*r))}else{if(e.text.isPaintBoundsInverted()){var f=a.x;a.x=a.y,a.y=f}a.x+=e.x,a.y+=e.y,a.width=Math.max(1,e.width),a.height=Math.max(1,e.height)}if(e.text.isPaintBoundsInverted()){var m=(e.width-e.height)/2;a.x+=m,a.y-=m,f=a.width,a.width=a.height,a.height=f}if(null!=e.shape){var x=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),v=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);x==mxConstants.ALIGN_CENTER&&v==mxConstants.ALIGN_MIDDLE&&(a=e.shape.getLabelBounds(a))}var E=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);return null!=E&&(a.width=parseFloat(E)*r),o||this.rotateLabelBounds(e,a),a},mxCellRenderer.prototype.rotateLabelBounds=function(e,t){if(t.y-=e.text.margin.y*t.height,t.x-=e.text.margin.x*t.width,!this.legacySpacing||"fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&"width"!=e.style[mxConstants.STYLE_OVERFLOW]){var r=e.view.scale,o=e.text.getSpacing();t.x+=o.x*r,t.y+=o.y*r;var a=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),u=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),c=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);t.width=Math.max(0,t.width-(a==mxConstants.ALIGN_CENTER&&null==c?e.text.spacingLeft*r+e.text.spacingRight*r:0)),t.height=Math.max(0,t.height-(u==mxConstants.ALIGN_MIDDLE?e.text.spacingTop*r+e.text.spacingBottom*r:0))}var f=e.text.getTextRotation();if(0!=f&&null!=e&&e.view.graph.model.isVertex(e.cell)){var m=e.getCenterX(),x=e.getCenterY();if(t.x!=m||t.y!=x){var v=f*(Math.PI/180),E=mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(v),Math.sin(v),new mxPoint(m,x));t.x=E.x,t.y=E.y}}},mxCellRenderer.prototype.redrawCellOverlays=function(e,t){if(this.createCellOverlays(e),null!=e.overlays){var r=mxUtils.mod(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0),90),o=mxUtils.toRadians(r),a=Math.cos(o),u=Math.sin(o);e.overlays.visit(function(c,f){var m=f.overlay.getBounds(e);if(!e.view.graph.getModel().isEdge(e.cell)&&null!=e.shape&&0!=r){var x=m.getCenterX(),v=m.getCenterY(),E=mxUtils.getRotatedPoint(new mxPoint(x,v),a,u,new mxPoint(e.getCenterX(),e.getCenterY()));x=E.x,v=E.y,m.x=Math.round(x-m.width/2),m.y=Math.round(v-m.height/2)}(t||null==f.bounds||f.scale!=e.view.scale||!f.bounds.equals(m))&&(f.bounds=m,f.scale=e.view.scale,f.redraw())})}},mxCellRenderer.prototype.redrawControl=function(e,t){var r=e.view.graph.getFoldingImage(e);if(null!=e.control&&null!=r){var o=this.getControlBounds(e,r.width,r.height),a=this.legacyControlPosition?mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0):e.shape.getTextRotation(),u=e.view.scale;(t||e.control.scale!=u||!e.control.bounds.equals(o)||e.control.rotation!=a)&&(e.control.rotation=a,e.control.bounds=o,e.control.scale=u,e.control.redraw())}},mxCellRenderer.prototype.getControlBounds=function(e,t,r){if(null!=e.control){var o=e.view.scale,a=e.getCenterX(),u=e.getCenterY();if(!e.view.graph.getModel().isEdge(e.cell)&&(a=e.x+t*o,u=e.y+r*o,null!=e.shape)){var c=e.shape.getShapeRotation();if(this.legacyControlPosition)c=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0);else if(e.shape.isPaintBoundsInverted()){var f=(e.width-e.height)/2;a+=f,u-=f}if(0!=c){var m=mxUtils.toRadians(c),x=Math.cos(m),v=Math.sin(m),E=mxUtils.getRotatedPoint(new mxPoint(a,u),x,v,new mxPoint(e.getCenterX(),e.getCenterY()));a=E.x,u=E.y}}return e.view.graph.getModel().isEdge(e.cell),new mxRectangle(Math.round(a-t/2*o),Math.round(u-r/2*o),Math.round(t*o),Math.round(r*o))}return null},mxCellRenderer.prototype.insertStateAfter=function(e,t,r){for(var o=this.getShapesForState(e),a=0;a<o.length;a++)if(null!=o[a]&&null!=o[a].node){var u=o[a].node.parentNode!=e.view.getDrawPane()&&o[a].node.parentNode!=e.view.getOverlayPane(),c=u?r:t;if(null!=c&&c.nextSibling!=o[a].node)null==c.nextSibling?c.parentNode.appendChild(o[a].node):c.parentNode.insertBefore(o[a].node,c.nextSibling);else if(null==c)if(o[a].node.parentNode==e.view.graph.container){for(var f=e.view.canvas;null!=f&&f.parentNode!=e.view.graph.container;)f=f.parentNode;null!=f&&null!=f.nextSibling?f.nextSibling!=o[a].node&&o[a].node.parentNode.insertBefore(o[a].node,f.nextSibling):o[a].node.parentNode.appendChild(o[a].node)}else null!=o[a].node.parentNode&&null!=o[a].node.parentNode.firstChild&&o[a].node.parentNode.firstChild!=o[a].node&&o[a].node.parentNode.insertBefore(o[a].node,o[a].node.parentNode.firstChild);u?r=o[a].node:t=o[a].node}return[t,r]},mxCellRenderer.prototype.getShapesForState=function(e){return[e.shape,e.text,e.control]},mxCellRenderer.prototype.redraw=function(e,t,r){var o=this.redrawShape(e,t,r);null!=e.shape&&(null==r||r)&&(this.redrawLabel(e,o),this.redrawCellOverlays(e,o),this.redrawControl(e,o))},mxCellRenderer.prototype.redrawShape=function(e,t,r){var o=e.view.graph.model,a=!1;return null!=e.shape&&null!=e.shape.style&&null!=e.style&&e.shape.style[mxConstants.STYLE_SHAPE]!=e.style[mxConstants.STYLE_SHAPE]&&(e.shape.destroy(),e.shape=null),null==e.shape&&null!=e.view.graph.container&&e.cell!=e.view.currentRoot&&(o.isVertex(e.cell)||o.isEdge(e.cell))?(e.shape=this.createShape(e),null!=e.shape&&(e.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,e.shape.antiAlias=this.antiAlias,this.createIndicatorShape(e),this.initializeShape(e),this.createCellOverlays(e),this.installListeners(e),e.view.graph.selectionCellsHandler.updateHandler(e))):!t&&null!=e.shape&&(!mxUtils.equalEntries(e.shape.style,e.style)||this.checkPlaceholderStyles(e))&&(e.shape.resetStyles(),this.configureShape(e),e.view.graph.selectionCellsHandler.updateHandler(e),t=!0),null!=e.shape&&e.shape.indicatorShape!=this.getShape(e.view.graph.getIndicatorShape(e))&&(null!=e.shape.indicator&&(e.shape.indicator.destroy(),e.shape.indicator=null),this.createIndicatorShape(e),null!=e.shape.indicatorShape&&(e.shape.indicator=new e.shape.indicatorShape,e.shape.indicator.dialect=e.shape.dialect,e.shape.indicator.init(e.node),t=!0)),null!=e.shape&&(this.createControl(e),(t||this.isShapeInvalid(e,e.shape))&&(null!=e.absolutePoints?(e.shape.points=e.absolutePoints.slice(),e.shape.bounds=null):(e.shape.points=null,e.shape.bounds=new mxRectangle(e.x,e.y,e.width,e.height)),e.shape.scale=e.view.scale,null==r||r?this.doRedrawShape(e):e.shape.updateBoundingBox(),a=!0)),a},mxCellRenderer.prototype.doRedrawShape=function(e){e.shape.redraw()},mxCellRenderer.prototype.isShapeInvalid=function(e,t){return null==t.bounds||t.scale!=e.view.scale||null==e.absolutePoints&&!t.bounds.equals(e)||null!=e.absolutePoints&&!mxUtils.equalPoints(t.points,e.absolutePoints)},mxCellRenderer.prototype.destroy=function(e){null!=e.shape&&(null!=e.text&&(e.text.destroy(),e.text=null),null!=e.overlays&&(e.overlays.visit(function(t,r){r.destroy()}),e.overlays=null),null!=e.control&&(e.control.destroy(),e.control=null),e.shape.destroy(),e.shape=null)},__mxOutput.mxCellRenderer=void 0!==mxCellRenderer?mxCellRenderer:void 0;var mxEdgeStyle={EntityRelation:function(e,t,r,o,a){var u=e.view,c=u.graph,f=mxUtils.getValue(e.style,mxConstants.STYLE_SEGMENT,mxConstants.ENTITY_SEGMENT)*u.scale,m=e.absolutePoints,x=m[0],v=m[m.length-1],E=!1;if(null!=t){var S=c.getCellGeometry(t.cell);S.relative?E=S.x<=.5:null!=r&&(E=(null!=v?v.x:r.x+r.width)<(null!=x?x.x:t.x))}if(null!=x)(t=new mxCellState).x=x.x,t.y=x.y;else{if(null==t)return;(b=mxUtils.getPortConstraints(t,e,!0,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&b!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(E=b==mxConstants.DIRECTION_MASK_WEST)}var _=!0;if(null!=r){var D=c.getCellGeometry(r.cell);D.relative?_=D.x<=.5:null!=t&&(_=(null!=x?x.x:t.x+t.width)<(null!=v?v.x:r.x))}if(null!=v)(r=new mxCellState).x=v.x,r.y=v.y;else if(null!=r){var b;(b=mxUtils.getPortConstraints(r,e,!1,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&b!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(_=b==mxConstants.DIRECTION_MASK_WEST)}if(null!=t&&null!=r){var M=E?t.x:t.x+t.width,R=u.getRoutingCenterY(t),N=_?r.x:r.x+r.width,V=u.getRoutingCenterY(r),O=f,F=E?-O:O,G=new mxPoint(M+F,R),j=new mxPoint(N+(F=_?-O:O),V);if(E==_){var Y=E?Math.min(M,N)-f:Math.max(M,N)+f;a.push(new mxPoint(Y,R)),a.push(new mxPoint(Y,V))}else if(G.x<j.x==E){var W=R+(V-R)/2;a.push(G),a.push(new mxPoint(G.x,W)),a.push(new mxPoint(j.x,W)),a.push(j)}else a.push(G),a.push(j)}},Loop:function(e,t,r,o,a){var u=e.absolutePoints;if(null==u[0]||null==u[u.length-1]){if(null!=t){var v=e.view,E=v.graph;null!=(x=null!=o&&o.length>0?o[0]:null)&&(x=v.transformControlPoint(e,x),mxUtils.contains(t,x.x,x.y)&&(x=null));var S=0,b=0,_=0,D=0,M=mxUtils.getValue(e.style,mxConstants.STYLE_SEGMENT,E.gridSize)*v.scale,R=mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_WEST);R==mxConstants.DIRECTION_NORTH||R==mxConstants.DIRECTION_SOUTH?(S=v.getRoutingCenterX(t),b=M):(_=v.getRoutingCenterY(t),D=M),null==x||x.x<t.x||x.x>t.x+t.width?null!=x?(S=x.x,D=Math.max(Math.abs(_-x.y),D)):R==mxConstants.DIRECTION_NORTH?_=t.y-2*b:R==mxConstants.DIRECTION_SOUTH?_=t.y+t.height+2*b:S=R==mxConstants.DIRECTION_EAST?t.x-2*D:t.x+t.width+2*D:null!=x&&(S=v.getRoutingCenterX(t),b=Math.max(Math.abs(S-x.x),D),_=x.y,D=0),a.push(new mxPoint(S-b,_-D)),a.push(new mxPoint(S+b,_+D))}}else if(null!=o&&o.length>0)for(var m=0;m<o.length;m++){var x;x=e.view.transformControlPoint(e,x=o[m]),a.push(new mxPoint(x.x,x.y))}},ElbowConnector:function(e,t,r,o,a){var u=null!=o&&o.length>0?o[0]:null,c=!1,f=!1;if(null!=t&&null!=r)if(null!=u){var m=Math.min(t.x,r.x),x=Math.max(t.x+t.width,r.x+r.width),v=Math.min(t.y,r.y),E=Math.max(t.y+t.height,r.y+r.height);c=(u=e.view.transformControlPoint(e,u)).y<v||u.y>E,f=u.x<m||u.x>x}else(c=(m=Math.max(t.x,r.x))==(x=Math.min(t.x+t.width,r.x+r.width)))||(f=(v=Math.max(t.y,r.y))==(E=Math.min(t.y+t.height,r.y+r.height)));f||!c&&e.style[mxConstants.STYLE_ELBOW]!=mxConstants.ELBOW_VERTICAL?mxEdgeStyle.SideToSide(e,t,r,o,a):mxEdgeStyle.TopToBottom(e,t,r,o,a)},SideToSide:function(e,t,r,o,a){var u=e.view,c=null!=o&&o.length>0?o[0]:null,f=e.absolutePoints,m=f[0],x=f[f.length-1];if(null!=c&&(c=u.transformControlPoint(e,c)),null!=m&&((t=new mxCellState).x=m.x,t.y=m.y),null!=x&&((r=new mxCellState).x=x.x,r.y=x.y),null!=t&&null!=r){var v=Math.max(t.x,r.x),E=Math.min(t.x+t.width,r.x+r.width),S=null!=c?c.x:Math.round(E+(v-E)/2),b=u.getRoutingCenterY(t),_=u.getRoutingCenterY(r);if(null!=c&&(c.y>=t.y&&c.y<=t.y+t.height&&(b=c.y),c.y>=r.y&&c.y<=r.y+r.height&&(_=c.y)),!mxUtils.contains(r,S,b)&&!mxUtils.contains(t,S,b)&&a.push(new mxPoint(S,b)),!mxUtils.contains(r,S,_)&&!mxUtils.contains(t,S,_)&&a.push(new mxPoint(S,_)),1==a.length)if(null!=c)!mxUtils.contains(r,S,c.y)&&!mxUtils.contains(t,S,c.y)&&a.push(new mxPoint(S,c.y));else{var D=Math.max(t.y,r.y),M=Math.min(t.y+t.height,r.y+r.height);a.push(new mxPoint(S,D+(M-D)/2))}}},TopToBottom:function(e,t,r,o,a){var u=e.view,c=null!=o&&o.length>0?o[0]:null,f=e.absolutePoints,m=f[0],x=f[f.length-1];if(null!=c&&(c=u.transformControlPoint(e,c)),null!=m&&((t=new mxCellState).x=m.x,t.y=m.y),null!=x&&((r=new mxCellState).x=x.x,r.y=x.y),null!=t&&null!=r){var v=Math.max(t.y,r.y),E=Math.min(t.y+t.height,r.y+r.height),S=u.getRoutingCenterX(t);null!=c&&c.x>=t.x&&c.x<=t.x+t.width&&(S=c.x);var b=null!=c?c.y:Math.round(E+(v-E)/2);if(!mxUtils.contains(r,S,b)&&!mxUtils.contains(t,S,b)&&a.push(new mxPoint(S,b)),S=null!=c&&c.x>=r.x&&c.x<=r.x+r.width?c.x:u.getRoutingCenterX(r),!mxUtils.contains(r,S,b)&&!mxUtils.contains(t,S,b)&&a.push(new mxPoint(S,b)),1==a.length)if(null!=c&&1==a.length)!mxUtils.contains(r,c.x,b)&&!mxUtils.contains(t,c.x,b)&&a.push(new mxPoint(c.x,b));else{var _=Math.max(t.x,r.x),D=Math.min(t.x+t.width,r.x+r.width);a.push(new mxPoint(_+(D-_)/2,b))}}},SegmentConnector:function(e,t,r,o,a){var u=mxEdgeStyle.scalePointArray(e.absolutePoints,e.view.scale),c=mxEdgeStyle.scaleCellState(t,e.view.scale),f=mxEdgeStyle.scaleCellState(r,e.view.scale),x=a.length>0?a[0]:null,v=!0,E=null;function S(Q){return Q.x=Math.round(Q.x*e.view.scale*10)/10,Q.y=Math.round(Q.y*e.view.scale*10)/10,(null==x||Math.abs(x.x-Q.x)>=1||Math.abs(x.y-Q.y)>=Math.max(1,e.view.scale))&&(a.push(Q),x=Q),x}var b=u[0];null==b&&null!=c?b=new mxPoint(e.view.getRoutingCenterX(c),e.view.getRoutingCenterY(c)):null!=b&&(b=b.clone());var _=u.length-1;if(null!=o&&o.length>0){for(var D=[],M=0;M<o.length;M++){var R=e.view.transformControlPoint(e,o[M],!0);null!=R&&D.push(R)}if(0==D.length)return;null!=b&&null!=D[0]&&(Math.abs(D[0].x-b.x)<1&&(D[0].x=b.x),Math.abs(D[0].y-b.y)<1&&(D[0].y=b.y));var N=u[_];null!=N&&null!=D[D.length-1]&&(Math.abs(D[D.length-1].x-N.x)<1&&(D[D.length-1].x=N.x),Math.abs(D[D.length-1].y-N.y)<1&&(D[D.length-1].y=N.y));var V=c,O=u[0],F=!1,G=!1,j=E=D[0];for(null!=O&&(V=null),M=0;M<2;M++){var Y=null!=O&&O.x==j.x,W=null!=O&&O.y==j.y,q=null!=V&&j.y>=V.y&&j.y<=V.y+V.height,Z=null!=V&&j.x>=V.x&&j.x<=V.x+V.width;if(F=W||null==O&&q,G=Y||null==O&&Z,0!=M||!(F&&G||Y&&W)){if(null!=O&&!W&&!Y&&(q||Z)){v=!q;break}if(G||F){v=F,1==M&&(v=D.length%2==0?F:G);break}}V=f,null!=(O=u[_])&&(V=null),j=D[D.length-1],Y&&W&&(D=D.slice(1))}for(v&&(null!=u[0]&&u[0].y!=E.y||null==u[0]&&null!=c&&(E.y<c.y||E.y>c.y+c.height))?S(new mxPoint(b.x,E.y)):!v&&(null!=u[0]&&u[0].x!=E.x||null==u[0]&&null!=c&&(E.x<c.x||E.x>c.x+c.width))&&S(new mxPoint(E.x,b.y)),v?b.y=E.y:b.x=E.x,M=0;M<D.length;M++)E=D[M],(v=!v)?b.y=E.y:b.x=E.x,S(b.clone())}else E=b,v=!0;if(null==(b=u[_])&&null!=f&&(b=new mxPoint(e.view.getRoutingCenterX(f),e.view.getRoutingCenterY(f))),null!=b&&null!=E&&(v&&(null!=u[_]&&u[_].y!=E.y||null==u[_]&&null!=f&&(E.y<f.y||E.y>f.y+f.height))?S(new mxPoint(b.x,E.y)):!v&&(null!=u[_]&&u[_].x!=E.x||null==u[_]&&null!=f&&(E.x<f.x||E.x>f.x+f.width))&&S(new mxPoint(E.x,b.y))),null==u[0]&&null!=c)for(;a.length>1&&null!=a[1]&&mxUtils.contains(c,a[1].x,a[1].y);)a.splice(1,1);if(null==u[_]&&null!=f)for(;a.length>1&&null!=a[a.length-1]&&mxUtils.contains(f,a[a.length-1].x,a[a.length-1].y);)a.splice(a.length-1,1);null!=N&&null!=a[a.length-1]&&Math.abs(N.x-a[a.length-1].x)<=1&&Math.abs(N.y-a[a.length-1].y)<=1&&(a.splice(a.length-1,1),null!=a[a.length-1]&&(Math.abs(a[a.length-1].x-N.x)<1&&(a[a.length-1].x=N.x),Math.abs(a[a.length-1].y-N.y)<1&&(a[a.length-1].y=N.y)))},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(e,t){var r=mxUtils.getValue(e.style,t?mxConstants.STYLE_SOURCE_JETTY_SIZE:mxConstants.STYLE_TARGET_JETTY_SIZE,mxUtils.getValue(e.style,mxConstants.STYLE_JETTY_SIZE,mxEdgeStyle.orthBuffer));if("auto"==r)if(mxUtils.getValue(e.style,t?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE){var a=mxUtils.getNumber(e.style,t?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE);r=Math.max(2,Math.ceil((a+mxEdgeStyle.orthBuffer)/mxEdgeStyle.orthBuffer))*mxEdgeStyle.orthBuffer}else r=2*mxEdgeStyle.orthBuffer;return r},scalePointArray:function(e,t){var r=[];if(null!=e)for(var o=0;o<e.length;o++)if(null!=e[o]){var a=new mxPoint(Math.round(e[o].x/t*10)/10,Math.round(e[o].y/t*10)/10);r[o]=a}else r[o]=null;else r=null;return r},scaleCellState:function(e,t){var r=null;return null!=e?(r=e.clone()).setRect(Math.round(e.x/t*10)/10,Math.round(e.y/t*10)/10,Math.round(e.width/t*10)/10,Math.round(e.height/t*10)/10):r=null,r},OrthConnector:function(e,t,r,o,a){var u=e.view.graph,c=null!=x&&u.getModel().isEdge(x.cell),f=null!=v&&u.getModel().isEdge(v.cell),m=mxEdgeStyle.scalePointArray(e.absolutePoints,e.view.scale),x=mxEdgeStyle.scaleCellState(t,e.view.scale),v=mxEdgeStyle.scaleCellState(r,e.view.scale),E=m[0],S=m[m.length-1],b=null!=x?x.x:E.x,_=null!=x?x.y:E.y,D=null!=x?x.width:0,M=null!=x?x.height:0,R=null!=v?v.x:S.x,N=null!=v?v.y:S.y,V=null!=v?v.width:0,O=null!=v?v.height:0,F=mxEdgeStyle.getJettySize(e,!0),G=mxEdgeStyle.getJettySize(e,!1);null!=x&&v==x&&(F=G=Math.max(F,G));var j=G+F,Y=!1;if(null!=E&&null!=S&&(Y=(Ce=S.x-E.x)*Ce+(et=S.y-E.y)*et<j*j),Y||mxEdgeStyle.orthPointsFallback&&null!=o&&o.length>0||c||f)mxEdgeStyle.SegmentConnector(e,t,r,o,a);else{var Z,W=[mxConstants.DIRECTION_MASK_ALL,mxConstants.DIRECTION_MASK_ALL],q=0;null!=x&&(W[0]=mxUtils.getPortConstraints(x,e,!0,mxConstants.DIRECTION_MASK_ALL),0!=(q=mxUtils.getValue(x.style,mxConstants.STYLE_ROTATION,0)))&&(b=(Z=mxUtils.getBoundingBox(new mxRectangle(b,_,D,M),q)).x,_=Z.y,D=Z.width,M=Z.height),null!=v&&(W[1]=mxUtils.getPortConstraints(v,e,!1,mxConstants.DIRECTION_MASK_ALL),0!=(q=mxUtils.getValue(v.style,mxConstants.STYLE_ROTATION,0)))&&(R=(Z=mxUtils.getBoundingBox(new mxRectangle(R,N,V,O),q)).x,N=Z.y,V=Z.width,O=Z.height);for(var Q=[0,0],K=[[b,_,D,M],[R,N,V,O]],ie=[F,G],U=0;U<2;U++)mxEdgeStyle.limits[U][1]=K[U][0]-ie[U],mxEdgeStyle.limits[U][2]=K[U][1]-ie[U],mxEdgeStyle.limits[U][4]=K[U][0]+K[U][2]+ie[U],mxEdgeStyle.limits[U][8]=K[U][1]+K[U][3]+ie[U];var Ce,et=K[0][1]+K[0][3]/2-(K[1][1]+K[1][3]/2),tt=0;(Ce=K[0][0]+K[0][2]/2-(K[1][0]+K[1][2]/2))<0?tt=et<0?2:1:et<=0&&(tt=3,0==Ce&&(tt=2));var Ae=null;null!=x&&(Ae=E);var qe=[[.5,.5],[.5,.5]];for(U=0;U<2;U++)null!=Ae&&(qe[U][0]=(Ae.x-K[U][0])/K[U][2],Math.abs(Ae.x-K[U][0])<=1?Q[U]=mxConstants.DIRECTION_MASK_WEST:Math.abs(Ae.x-K[U][0]-K[U][2])<=1&&(Q[U]=mxConstants.DIRECTION_MASK_EAST),qe[U][1]=(Ae.y-K[U][1])/K[U][3],Math.abs(Ae.y-K[U][1])<=1?Q[U]=mxConstants.DIRECTION_MASK_NORTH:Math.abs(Ae.y-K[U][1]-K[U][3])<=1&&(Q[U]=mxConstants.DIRECTION_MASK_SOUTH)),Ae=null,null!=v&&(Ae=S);var un=K[0][1]-(K[1][1]+K[1][3]),Lt=K[0][0]-(K[1][0]+K[1][2]),dt=K[1][1]-(K[0][1]+K[0][3]),ct=K[1][0]-(K[0][0]+K[0][2]);mxEdgeStyle.vertexSeperations[1]=Math.max(Lt-j,0),mxEdgeStyle.vertexSeperations[2]=Math.max(un-j,0),mxEdgeStyle.vertexSeperations[4]=Math.max(dt-j,0),mxEdgeStyle.vertexSeperations[3]=Math.max(ct-j,0);var we=[],Le=[],Ue=[];Le[0]=Lt>=ct?mxConstants.DIRECTION_MASK_WEST:mxConstants.DIRECTION_MASK_EAST,Ue[0]=un>=dt?mxConstants.DIRECTION_MASK_NORTH:mxConstants.DIRECTION_MASK_SOUTH,Le[1]=mxUtils.reversePortConstraints(Le[0]),Ue[1]=mxUtils.reversePortConstraints(Ue[0]);var In=Lt>=ct?Lt:ct,Ht=un>=dt?un:dt,Re=[[0,0],[0,0]],zt=!1;for(U=0;U<2;U++)0==Q[U]&&(0==(Le[U]&W[U])&&(Le[U]=mxUtils.reversePortConstraints(Le[U])),0==(Ue[U]&W[U])&&(Ue[U]=mxUtils.reversePortConstraints(Ue[U])),Re[U][0]=Ue[U],Re[U][1]=Le[U]);for(Ht>0&&In>0&&((Le[0]&W[0])>0&&(Ue[1]&W[1])>0?(Re[0][0]=Le[0],Re[0][1]=Ue[0],Re[1][0]=Ue[1],Re[1][1]=Le[1],zt=!0):(Ue[0]&W[0])>0&&(Le[1]&W[1])>0&&(Re[0][0]=Ue[0],Re[0][1]=Le[0],Re[1][0]=Le[1],Re[1][1]=Ue[1],zt=!0)),Ht>0&&!zt&&(Re[0][0]=Ue[0],Re[0][1]=Le[0],Re[1][0]=Ue[1],Re[1][1]=Le[1],zt=!0),In>0&&!zt&&(Re[0][0]=Le[0],Re[0][1]=Ue[0],Re[1][0]=Le[1],Re[1][1]=Ue[1],zt=!0),U=0;U<2;U++)0==Q[U]&&(0==(Re[U][0]&W[U])&&(Re[U][0]=Re[U][1]),we[U]=Re[U][0]&W[U],we[U]|=(Re[U][1]&W[U])<<8,we[U]|=(Re[1-U][U]&W[U])<<16,we[U]|=(Re[1-U][1-U]&W[U])<<24,0==(15&we[U])&&(we[U]=we[U]<<8),0==(3840&we[U])&&(we[U]=15&we[U]|we[U]>>8),0==(983040&we[U])&&(we[U]=65535&we[U]|(251658240&we[U])>>8),Q[U]=15&we[U],(W[U]==mxConstants.DIRECTION_MASK_WEST||W[U]==mxConstants.DIRECTION_MASK_NORTH||W[U]==mxConstants.DIRECTION_MASK_EAST||W[U]==mxConstants.DIRECTION_MASK_SOUTH)&&(Q[U]=W[U]));var Mn=Q[0]==mxConstants.DIRECTION_MASK_EAST?3:Q[0],Wt=Q[1]==mxConstants.DIRECTION_MASK_EAST?3:Q[1];(Mn-=tt)<1&&(Mn+=4),(Wt-=tt)<1&&(Wt+=4);var Rt=mxEdgeStyle.routePatterns[Mn-1][Wt-1];switch(mxEdgeStyle.wayPoints1[0][0]=K[0][0],mxEdgeStyle.wayPoints1[0][1]=K[0][1],Q[0]){case mxConstants.DIRECTION_MASK_WEST:mxEdgeStyle.wayPoints1[0][0]-=F,mxEdgeStyle.wayPoints1[0][1]+=qe[0][1]*K[0][3];break;case mxConstants.DIRECTION_MASK_SOUTH:mxEdgeStyle.wayPoints1[0][0]+=qe[0][0]*K[0][2],mxEdgeStyle.wayPoints1[0][1]+=K[0][3]+F;break;case mxConstants.DIRECTION_MASK_EAST:mxEdgeStyle.wayPoints1[0][0]+=K[0][2]+F,mxEdgeStyle.wayPoints1[0][1]+=qe[0][1]*K[0][3];break;case mxConstants.DIRECTION_MASK_NORTH:mxEdgeStyle.wayPoints1[0][0]+=qe[0][0]*K[0][2],mxEdgeStyle.wayPoints1[0][1]-=F}var Ze=0,vi=(Q[0]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))>0?0:1,to=vi,hn=0;for(U=0;U<Rt.length;U++){var Br=15&Rt[U],Yn=Br==mxConstants.DIRECTION_MASK_EAST?3:Br;(Yn+=tt)>4&&(Yn-=4);var ri=mxEdgeStyle.dirVectors[Yn-1];(hn=Yn%2>0?0:1)!=vi&&(Ze++,mxEdgeStyle.wayPoints1[Ze][0]=mxEdgeStyle.wayPoints1[Ze-1][0],mxEdgeStyle.wayPoints1[Ze][1]=mxEdgeStyle.wayPoints1[Ze-1][1]);var no=(Rt[U]&mxEdgeStyle.SOURCE_MASK)>0,jn=(Rt[U]&mxEdgeStyle.SIDE_MASK)>>5;(jn<<=tt)>15&&(jn>>=4);var Yr=(Rt[U]&mxEdgeStyle.CENTER_MASK)>0;if((no||(Rt[U]&mxEdgeStyle.TARGET_MASK)>0)&&jn<9){var si,zn=no?0:1;if(si=Yr&&0==hn?K[zn][0]+qe[zn][0]*K[zn][2]:Yr?K[zn][1]+qe[zn][1]*K[zn][3]:mxEdgeStyle.limits[zn][jn],0==hn){var io=(si-mxEdgeStyle.wayPoints1[Ze][0])*ri[0];io>0&&(mxEdgeStyle.wayPoints1[Ze][0]+=ri[0]*io)}else{var ro=(si-mxEdgeStyle.wayPoints1[Ze][1])*ri[1];ro>0&&(mxEdgeStyle.wayPoints1[Ze][1]+=ri[1]*ro)}}else Yr&&(mxEdgeStyle.wayPoints1[Ze][0]+=ri[0]*Math.abs(mxEdgeStyle.vertexSeperations[Yn]/2),mxEdgeStyle.wayPoints1[Ze][1]+=ri[1]*Math.abs(mxEdgeStyle.vertexSeperations[Yn]/2));Ze>0&&mxEdgeStyle.wayPoints1[Ze][hn]==mxEdgeStyle.wayPoints1[Ze-1][hn]?Ze--:vi=hn}for(U=0;U<=Ze&&(U!=Ze||(((Q[1]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))>0?0:1)==to?0:1)==(Ze+1)%2);U++)a.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[U][0]*e.view.scale*10)/10,Math.round(mxEdgeStyle.wayPoints1[U][1]*e.view.scale*10)/10));for(var dn=1;dn<a.length;)null==a[dn-1]||null==a[dn]||a[dn-1].x!=a[dn].x||a[dn-1].y!=a[dn].y?dn++:a.splice(dn,1)}},getRoutePattern:function(e,t,r,o){var a=e[0]==mxConstants.DIRECTION_MASK_EAST?3:e[0],u=e[1]==mxConstants.DIRECTION_MASK_EAST?3:e[1];(a-=t)<1&&(a+=4),(u-=t)<1&&(u+=4);var c=routePatterns[a-1][u-1];return(0==r||0==o)&&null!=inlineRoutePatterns[a-1][u-1]&&(c=inlineRoutePatterns[a-1][u-1]),c}};__mxOutput.mxEdgeStyle=void 0!==mxEdgeStyle?mxEdgeStyle:void 0;var mxStyleRegistry={values:[],putValue:function(e,t){mxStyleRegistry.values[e]=t},getValue:function(e){return mxStyleRegistry.values[e]},getName:function(e){for(var t in mxStyleRegistry.values)if(mxStyleRegistry.values[t]==e)return t;return null}};function mxGraphView(e){this.graph=e,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}function mxCurrentRootChange(e,t){if(this.view=e,this.root=t,this.previous=t,this.isUp=null==t,!this.isUp)for(var r=this.view.currentRoot,o=this.view.graph.getModel();null!=r;){if(r==t){this.isUp=!0;break}r=o.getParent(r)}}function mxGraph(e,t,r,o){this.mouseListeners=null,this.renderHint=r,this.dialect=mxClient.IS_SVG?mxConstants.DIALECT_SVG:r==mxConstants.RENDERING_HINT_EXACT&&mxClient.IS_VML?mxConstants.DIALECT_VML:r==mxConstants.RENDERING_HINT_FASTEST?mxConstants.DIALECT_STRICTHTML:r==mxConstants.RENDERING_HINT_FASTER?mxConstants.DIALECT_PREFERHTML:mxConstants.DIALECT_MIXEDHTML,this.model=null!=t?t:new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(null!=o?o:this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=mxUtils.bind(this,function(a,u){this.graphModelChanged(u.getProperty("edit").changes)}),this.model.addListener(mxEvent.CHANGE,this.graphModelChangeListener),this.createHandlers(),null!=e&&this.init(e),this.view.revalidate()}function mxCellOverlay(e,t,r,o,a,u){this.image=e,this.tooltip=t,this.align=null!=r?r:this.align,this.verticalAlign=null!=o?o:this.verticalAlign,this.offset=null!=a?a:new mxPoint,this.cursor=null!=u?u:"help"}function mxOutline(e,t){this.source=e,null!=t&&this.init(t)}function mxMultiplicity(e,t,r,o,a,u,c,f,m,x){this.source=e,this.type=t,this.attr=r,this.value=o,this.min=null!=a?a:0,this.max=null!=u?u:"n",this.validNeighbors=c,this.countError=mxResources.get(f)||f,this.typeError=mxResources.get(m)||m,this.validNeighborsAllowed=null==x||x}function mxLayoutManager(e){this.undoHandler=mxUtils.bind(this,function(t,r){this.isEnabled()&&this.beforeUndo(r.getProperty("edit"))}),this.moveHandler=mxUtils.bind(this,function(t,r){this.isEnabled()&&this.cellsMoved(r.getProperty("cells"),r.getProperty("event"))}),this.resizeHandler=mxUtils.bind(this,function(t,r){this.isEnabled()&&this.cellsResized(r.getProperty("cells"),r.getProperty("bounds"),r.getProperty("previous"))}),this.setGraph(e)}function mxSwimlaneManager(e,t,r,o){this.horizontal=null==t||t,this.addEnabled=null==r||r,this.resizeEnabled=null==o||o,this.addHandler=mxUtils.bind(this,function(a,u){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(u.getProperty("cells"))}),this.resizeHandler=mxUtils.bind(this,function(a,u){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(u.getProperty("cells"))}),this.setGraph(e)}function mxTemporaryCellStates(e,t,r,o,a){t=null!=t?t:1,this.view=e,this.oldValidateCellState=e.validateCellState,this.oldBounds=e.getGraphBounds(),this.oldStates=e.getStates(),this.oldScale=e.getScale(),this.oldDoRedrawShape=e.graph.cellRenderer.doRedrawShape;var u=this;if(null!=a&&(e.graph.cellRenderer.doRedrawShape=function(x){var v=x.shape.paint;x.shape.paint=function(E){var S=a(x);null!=S&&E.setLink(S),v.apply(this,arguments),null!=S&&E.setLink(null)},u.oldDoRedrawShape.apply(e.graph.cellRenderer,arguments),x.shape.paint=v}),e.validateCellState=function(x,v){return null==x||null==o||o(x)?u.oldValidateCellState.apply(e,arguments):null},e.setStates(new mxDictionary),e.setScale(t),null!=r){e.resetValidationState();for(var c=null,f=0;f<r.length;f++){var m=e.getBoundingBox(e.validateCellState(e.validateCell(r[f])));null==c?c=m:c.add(m)}e.setGraphBounds(c||new mxRectangle)}}function mxCellStatePreview(e){this.deltas=new mxDictionary,this.graph=e}function mxConnectionConstraint(e,t,r,o,a){this.point=e,this.perimeter=null==t||t,this.name=r,this.dx=o||0,this.dy=a||0}function mxGraphHandler(e){this.graph=e,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.suspended||(this.updatePreview(),this.updateHint())}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(t,r){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler),this.refreshHandler=mxUtils.bind(this,function(t,r){this.refreshThread&&window.clearTimeout(this.refreshThread),this.refreshThread=window.setTimeout(mxUtils.bind(this,function(){if(this.refreshThread=null,null!=this.first&&!this.suspended){var o=this.currentDx,a=this.currentDy;this.currentDx=0,this.currentDy=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),null!=this.pBounds||this.livePreviewUsed?(this.currentDx=o,this.currentDy=a,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1,!0),this.updatePreview())):this.reset()}}),0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.addListener(mxEvent.REFRESH,this.refreshHandler),this.keyHandler=mxUtils.bind(this,function(t){if(null!=this.graph.container&&"hidden"!=this.graph.container.style.visibility&&null!=this.first&&!this.suspended){var r=this.graph.isCloneEvent(t)&&this.graph.isCellsCloneable()&&this.isCloneEnabled();r!=this.cloning&&(this.cloning=r,this.checkPreview(),this.updatePreview())}}),mxEvent.addListener(document,"keydown",this.keyHandler),mxEvent.addListener(document,"keyup",this.keyHandler)}function mxPanningHandler(e){null!=e&&(this.graph=e,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(t,r){var o=r.getProperty("eventName"),a=r.getProperty("event");o==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(a)&&(this.start(a),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",a)),a.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(t,r){if(this.isPinchEnabled()){var o=r.getProperty("event");mxEvent.isConsumed(o)||"gesturestart"!=o.type?"gestureend"==o.type&&null!=this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,!this.active&&null!=this.mouseDownEvent&&(this.start(this.mouseDownEvent),this.mouseDownEvent=null)),null!=this.initialScale&&this.zoomGraph(o)}}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.reset()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener))}function mxPopupMenuHandler(e,t){null!=e&&(this.graph=e,this.factoryMethod=t,this.graph.addMouseListener(this),this.gestureHandler=mxUtils.bind(this,function(r,o){this.inTolerance=!1}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.init())}function mxCellMarker(e,t,r,o){mxEventSource.call(this),null!=e&&(this.graph=e,this.validColor=null!=t?t:mxConstants.DEFAULT_VALID_COLOR,this.invalidColor=null!=r?r:mxConstants.DEFAULT_INVALID_COLOR,this.hotspot=null!=o?o:mxConstants.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(e))}function mxSelectionCellsHandler(e){mxEventSource.call(this),this.graph=e,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=mxUtils.bind(this,function(t,r){this.isEnabled()&&this.refresh()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent.UP,this.refreshHandler)}function mxConnectionHandler(e,t){mxEventSource.call(this),null!=e&&(this.graph=e,this.factoryMethod=t,this.init(),this.escapeHandler=mxUtils.bind(this,function(r,o){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxConstraintHandler(e){this.graph=e,this.resetHandler=mxUtils.bind(this,function(t,r){null!=this.currentFocus&&null==this.graph.view.getState(this.currentFocus.cell)?this.reset():this.redraw()}),this.graph.model.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE,this.resetHandler),this.graph.addListener(mxEvent.ROOT,this.resetHandler)}function mxRubberband(e){null!=e&&(this.graph=e,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils.bind(this,function(t,r){var o=r.getProperty("eventName"),a=r.getProperty("event");if(o==mxEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(a)){var u=mxUtils.getOffset(this.graph.container),c=mxUtils.getScrollOrigin(this.graph.container);c.x-=u.x,c.y-=u.y,this.start(a.getX()+c.x,a.getY()+c.y),a.consume(!1)}}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.gestureHandler=mxUtils.bind(this,function(t,r){null!=this.first&&this.reset()}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxHandle(e,t,r,o){this.graph=e.view.graph,this.state=e,this.cursor=null!=t?t:this.cursor,this.image=null!=r?r:this.image,this.shape=null!=o?o:null,this.init()}function mxVertexHandler(e){null!=e&&(this.state=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,r){this.livePreview&&null!=this.index&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxEdgeHandler(e){null!=e&&null!=e.shape&&(this.state=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,r){var o=null!=this.index;this.reset(),o&&this.graph.cellRenderer.redraw(this.state,!1,e.view.isRendering())}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxElbowEdgeHandler(e){mxEdgeHandler.call(this,e)}function mxEdgeSegmentHandler(e){mxEdgeHandler.call(this,e)}function mxKeyHandler(e,t){null!=e&&(this.graph=e,this.target=t||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils.bind(this,function(r){this.keyDown(r)}),mxEvent.addListener(this.target,"keydown",this.keydownHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxTooltipHandler(e,t){null!=e&&(this.graph=e,this.delay=t||500,this.graph.addMouseListener(this))}function mxCellTracker(e,t,r){mxCellMarker.call(this,e,t),this.graph.addMouseListener(this),null!=r&&(this.getCell=r),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxCellHighlight(e,t,r,o){null!=e&&(this.graph=e,this.highlightColor=null!=t?t:mxConstants.DEFAULT_VALID_COLOR,this.strokeWidth=null!=r?r:mxConstants.HIGHLIGHT_STROKEWIDTH,this.dashed=null!=o&&o,this.opacity=mxConstants.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils.bind(this,function(){if(null!=this.state){var a=this.graph.view.getState(this.state.cell);null==a?this.hide():(this.state=a,this.repaint())}}),this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler),this.resetHandler=mxUtils.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent.UP,this.resetHandler))}function mxDefaultKeyHandler(e){if(null!=e){this.editor=e,this.handler=new mxKeyHandler(e.graph);var t=this.handler.escape;this.handler.escape=function(r){t.apply(this,arguments),e.hideProperties(),e.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",r))}}}function mxDefaultPopupMenu(e){this.config=e}function mxDefaultToolbar(e,t){this.editor=t,null!=e&&null!=t&&this.init(e)}function mxEditor(e){this.actions=[],this.addActions(),null!=document.body&&(this.cycleAttributeValues=[],this.popupHandler=new mxDefaultPopupMenu,this.undoManager=new mxUndoManager,this.graph=this.createGraph(),this.toolbar=this.createToolbar(),this.keyHandler=new mxDefaultKeyHandler(this),this.configure(e),this.graph.swimlaneIndicatorColorAttribute=this.cycleAttributeName,null!=this.onInit&&this.onInit(),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter),__mxOutput.mxStyleRegistry=void 0!==mxStyleRegistry?mxStyleRegistry:void 0,mxGraphView.prototype=new mxEventSource,mxGraphView.prototype.constructor=mxGraphView,mxGraphView.prototype.EMPTY_POINT=new mxPoint,mxGraphView.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphView.prototype.updatingDocumentResource="none"!=mxClient.language?"updatingDocument":"",mxGraphView.prototype.allowEval=!1,mxGraphView.prototype.captureDocumentGesture=!0,mxGraphView.prototype.optimizeVmlReflows=!0,mxGraphView.prototype.rendering=!0,mxGraphView.prototype.graph=null,mxGraphView.prototype.currentRoot=null,mxGraphView.prototype.graphBounds=null,mxGraphView.prototype.scale=1,mxGraphView.prototype.translate=null,mxGraphView.prototype.states=null,mxGraphView.prototype.updateStyle=!1,mxGraphView.prototype.lastNode=null,mxGraphView.prototype.lastHtmlNode=null,mxGraphView.prototype.lastForegroundNode=null,mxGraphView.prototype.lastForegroundHtmlNode=null,mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds},mxGraphView.prototype.setGraphBounds=function(e){this.graphBounds=e},mxGraphView.prototype.getBounds=function(e){var t=null;if(null!=e&&e.length>0)for(var r=this.graph.getModel(),o=0;o<e.length;o++)if(r.isVertex(e[o])||r.isEdge(e[o])){var a=this.getState(e[o]);null!=a&&(null==t?t=mxRectangle.fromRectangle(a):t.add(a))}return t},mxGraphView.prototype.setCurrentRoot=function(e){if(this.currentRoot!=e){var t=new mxCurrentRootChange(this,e);t.execute();var r=new mxUndoableEdit(this,!0);r.add(t),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",r)),this.graph.sizeDidChange()}return e},mxGraphView.prototype.scaleAndTranslate=function(e,t,r){var o=this.scale,a=new mxPoint(this.translate.x,this.translate.y);(this.scale!=e||this.translate.x!=t||this.translate.y!=r)&&(this.scale=e,this.translate.x=t,this.translate.y=r,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,"scale",e,"previousScale",o,"translate",this.translate,"previousTranslate",a))},mxGraphView.prototype.getScale=function(){return this.scale},mxGraphView.prototype.setScale=function(e){var t=this.scale;this.scale!=e&&(this.scale=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE,"scale",e,"previousScale",t))},mxGraphView.prototype.getTranslate=function(){return this.translate},mxGraphView.prototype.setTranslate=function(e,t){var r=new mxPoint(this.translate.x,this.translate.y);(this.translate.x!=e||this.translate.y!=t)&&(this.translate.x=e,this.translate.y=t,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.TRANSLATE,"translate",this.translate,"previousTranslate",r))},mxGraphView.prototype.viewStateChanged=function(){this.revalidate(),this.graph.sizeDidChange()},mxGraphView.prototype.refresh=function(){null!=this.currentRoot&&this.clear(),this.revalidate()},mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()},mxGraphView.prototype.clear=function(e,t,r){var o=this.graph.getModel();if(e=e||o.getRoot(),t=null!=t&&t,r=null==r||r,this.removeState(e),r&&(t||e!=this.currentRoot))for(var a=o.getChildCount(e),u=0;u<a;u++)this.clear(o.getChildAt(e,u),t);else this.invalidate(e)},mxGraphView.prototype.invalidate=function(e,t,r){var o=this.graph.getModel();e=e||o.getRoot(),t=null==t||t,r=null==r||r;var a=this.getState(e);if(null!=a&&(a.invalid=!0),!e.invalidating){if(e.invalidating=!0,t)for(var u=o.getChildCount(e),c=0;c<u;c++){var f=o.getChildAt(e,c);this.invalidate(f,t,r)}if(r){var m=o.getEdgeCount(e);for(c=0;c<m;c++)this.invalidate(o.getEdgeAt(e,c),t,r)}delete e.invalidating}},mxGraphView.prototype.validate=function(e){var t=mxLog.enter("mxGraphView.validate");window.status=mxResources.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var r=null;this.optimizeVmlReflows&&null!=this.canvas&&null==this.textDiv&&(8==document.documentMode&&!mxClient.IS_EM||mxClient.IS_QUIRKS)&&(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),r=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv));var o=this.getBoundingBox(this.validateCellState(this.validateCell(e||(null!=this.currentRoot?this.currentRoot:this.graph.getModel().getRoot()))));this.setGraphBounds(null!=o?o:this.getEmptyBounds()),this.validateBackground(),null!=r&&(this.canvas.style.display=r,this.textDiv.parentNode.removeChild(this.textDiv),null!=this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",t)},mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)},mxGraphView.prototype.getBoundingBox=function(e,t){t=null==t||t;var r=null;if(null!=e&&(null!=e.shape&&null!=e.shape.boundingBox&&(r=e.shape.boundingBox.clone()),null!=e.text&&null!=e.text.boundingBox&&(null!=r?r.add(e.text.boundingBox):r=e.text.boundingBox.clone()),t))for(var o=this.graph.getModel(),a=o.getChildCount(e.cell),u=0;u<a;u++){var c=this.getBoundingBox(this.getState(o.getChildAt(e.cell,u)));null!=c&&(null==r?r=c:r.add(c))}return r},mxGraphView.prototype.createBackgroundPageShape=function(e){return new mxRectangleShape(e,"white","black")},mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()},mxGraphView.prototype.validateBackgroundImage=function(){var e=this.graph.getBackgroundImage();if(null!=e){if(null==this.backgroundImage||this.backgroundImage.image!=e.src){null!=this.backgroundImage&&this.backgroundImage.destroy();var t=new mxRectangle(0,0,1,1);this.backgroundImage=new mxImageShape(t,e.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),8==document.documentMode&&!mxClient.IS_EM&&mxEvent.addGestureListeners(this.backgroundImage.node,mxUtils.bind(this,function(r){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(r))}),mxUtils.bind(this,function(r){this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(r))}),mxUtils.bind(this,function(r){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(r))}))}this.redrawBackgroundImage(this.backgroundImage,e)}else null!=this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)},mxGraphView.prototype.validateBackgroundPage=function(){if(this.graph.pageVisible){var e=this.getBackgroundPageBounds();null==this.backgroundPageShape?(this.backgroundPageShape=this.createBackgroundPageShape(e),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){this.graph.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent.isConsumed(t)&&this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=e,this.backgroundPageShape.redraw())}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)},mxGraphView.prototype.getBackgroundPageBounds=function(){var e=this.graph.pageFormat,t=this.scale*this.graph.pageScale;return new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,e.width*t,e.height*t)},mxGraphView.prototype.redrawBackgroundImage=function(e,t){e.scale=this.scale,e.bounds.x=this.scale*this.translate.x,e.bounds.y=this.scale*this.translate.y,e.bounds.width=this.scale*t.width,e.bounds.height=this.scale*t.height,e.redraw()},mxGraphView.prototype.validateCell=function(e,t){if(t=null==t||t,null!=e)if(t=t&&this.graph.isCellVisible(e),null==this.getState(e,t)||t)for(var o=this.graph.getModel(),a=o.getChildCount(e),u=0;u<a;u++)this.validateCell(o.getChildAt(e,u),t&&(!this.isCellCollapsed(e)||e==this.currentRoot));else this.removeState(e);return e},mxGraphView.prototype.validateCellState=function(e,t){t=null==t||t;var r=null;if(null!=e&&null!=(r=this.getState(e))){var o=this.graph.getModel();if(r.invalid&&(r.invalid=!1,(null==r.style||r.invalidStyle)&&(r.style=this.graph.getCellStyle(r.cell),r.invalidStyle=!1),e!=this.currentRoot&&this.validateCellState(o.getParent(e),!1),r.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!0),!1),!0),r.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!1),!1),!1),this.updateCellState(r),e!=this.currentRoot&&!r.invalid&&(this.graph.cellRenderer.redraw(r,!1,this.isRendering()),r.updateCachedBounds())),t&&!r.invalid){null!=r.shape&&this.stateValidated(r);for(var a=o.getChildCount(e),u=0;u<a;u++)this.validateCellState(o.getChildAt(e,u))}}return r},mxGraphView.prototype.updateCellState=function(e){if(e.absoluteOffset.x=0,e.absoluteOffset.y=0,e.origin.x=0,e.origin.y=0,e.length=0,e.cell!=this.currentRoot){var t=this.graph.getModel(),r=this.getState(t.getParent(e.cell));null!=r&&r.cell!=this.currentRoot&&(e.origin.x+=r.origin.x,e.origin.y+=r.origin.y);var o=this.graph.getChildOffsetForCell(e.cell);null!=o&&(e.origin.x+=o.x,e.origin.y+=o.y);var a=this.graph.getCellGeometry(e.cell);if(null!=a){if(!t.isEdge(e.cell))if(o=null!=a.offset?a.offset:this.EMPTY_POINT,a.relative&&null!=r)if(t.isEdge(r.cell)){var u=this.getPoint(r,a);null!=u&&(e.origin.x+=u.x/this.scale-r.origin.x-this.translate.x,e.origin.y+=u.y/this.scale-r.origin.y-this.translate.y)}else e.origin.x+=a.x*r.unscaledWidth+o.x,e.origin.y+=a.y*r.unscaledHeight+o.y;else e.absoluteOffset.x=this.scale*o.x,e.absoluteOffset.y=this.scale*o.y,e.origin.x+=a.x,e.origin.y+=a.y;e.x=this.scale*(this.translate.x+e.origin.x),e.y=this.scale*(this.translate.y+e.origin.y),e.width=this.scale*a.width,e.unscaledWidth=a.width,e.height=this.scale*a.height,e.unscaledHeight=a.height,t.isVertex(e.cell)&&this.updateVertexState(e,a),t.isEdge(e.cell)&&this.updateEdgeState(e,a)}}e.updateCachedBounds()},mxGraphView.prototype.isCellCollapsed=function(e){return this.graph.isCellCollapsed(e)},mxGraphView.prototype.updateVertexState=function(e,t){var r=this.graph.getModel(),o=this.getState(r.getParent(e.cell));if(t.relative&&null!=o&&!r.isEdge(o.cell)){var a=mxUtils.toRadians(o.style[mxConstants.STYLE_ROTATION]||"0");if(0!=a){var u=Math.cos(a),c=Math.sin(a),f=new mxPoint(e.getCenterX(),e.getCenterY()),m=new mxPoint(o.getCenterX(),o.getCenterY()),x=mxUtils.getRotatedPoint(f,u,c,m);e.x=x.x-e.width/2,e.y=x.y-e.height/2}}this.updateVertexLabelOffset(e)},mxGraphView.prototype.updateEdgeState=function(e,t){var r=e.getVisibleTerminalState(!0),o=e.getVisibleTerminalState(!1);if(null!=this.graph.model.getTerminal(e.cell,!0)&&null==r||null==r&&null==t.getTerminalPoint(!0)||null!=this.graph.model.getTerminal(e.cell,!1)&&null==o||null==o&&null==t.getTerminalPoint(!1))this.clear(e.cell,!0);else{this.updateFixedTerminalPoints(e,r,o),this.updatePoints(e,t.points,r,o),this.updateFloatingTerminalPoints(e,r,o);var a=e.absolutePoints;e.cell!=this.currentRoot&&(null==a||a.length<2||null==a[0]||null==a[a.length-1])?this.clear(e.cell,!0):(this.updateEdgeBounds(e),this.updateEdgeLabelOffset(e))}},mxGraphView.prototype.updateVertexLabelOffset=function(e){var t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);if(t==mxConstants.ALIGN_LEFT)null!=(r=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null))?r*=this.scale:r=e.width,e.absoluteOffset.x-=r;else if(t==mxConstants.ALIGN_RIGHT)e.absoluteOffset.x+=e.width;else if(t==mxConstants.ALIGN_CENTER){var r;if(null!=(r=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null))){var o=mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),a=0;o==mxConstants.ALIGN_CENTER?a=.5:o==mxConstants.ALIGN_RIGHT&&(a=1),0!=a&&(e.absoluteOffset.x-=(r*this.scale-e.width)*a)}}var u=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);u==mxConstants.ALIGN_TOP?e.absoluteOffset.y-=e.height:u==mxConstants.ALIGN_BOTTOM&&(e.absoluteOffset.y+=e.height)},mxGraphView.prototype.resetValidationState=function(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null},mxGraphView.prototype.stateValidated=function(e){var t=this.graph.getModel().isEdge(e.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(e.cell)&&this.graph.keepEdgesInBackground,a=this.graph.cellRenderer.insertStateAfter(e,t&&this.lastForegroundNode||this.lastNode,t&&this.lastForegroundHtmlNode||this.lastHtmlNode);t?(this.lastForegroundHtmlNode=a[1],this.lastForegroundNode=a[0]):(this.lastHtmlNode=a[1],this.lastNode=a[0])},mxGraphView.prototype.updateFixedTerminalPoints=function(e,t,r){this.updateFixedTerminalPoint(e,t,!0,this.graph.getConnectionConstraint(e,t,!0)),this.updateFixedTerminalPoint(e,r,!1,this.graph.getConnectionConstraint(e,r,!1))},mxGraphView.prototype.updateFixedTerminalPoint=function(e,t,r,o){e.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(e,t,r,o),r)},mxGraphView.prototype.getFixedTerminalPoint=function(e,t,r,o){var a=null;if(null!=o&&(a=this.graph.getConnectionPoint(t,o,!1)),null==a&&null==t){var u=this.scale,c=this.translate,f=e.origin;null!=(a=this.graph.getCellGeometry(e.cell).getTerminalPoint(r))&&(a=new mxPoint(u*(c.x+a.x+f.x),u*(c.y+a.y+f.y)))}return a},mxGraphView.prototype.updateBoundsFromStencil=function(e){var t=null;if(null!=e&&null!=e.shape&&null!=e.shape.stencil&&"fixed"==e.shape.stencil.aspect){t=mxRectangle.fromRectangle(e);var r=e.shape.stencil.computeAspect(e.style,e.x,e.y,e.width,e.height);e.setRect(r.x,r.y,e.shape.stencil.w0*r.width,e.shape.stencil.h0*r.height)}return t},mxGraphView.prototype.updatePoints=function(e,t,r,o){if(null!=e){var a=[];a.push(e.absolutePoints[0]);var u=this.getEdgeStyle(e,t,r,o);if(null!=u){var c=this.getTerminalPort(e,r,!0),f=this.getTerminalPort(e,o,!1),m=this.updateBoundsFromStencil(c),x=this.updateBoundsFromStencil(f);u(e,c,f,t,a),null!=m&&c.setRect(m.x,m.y,m.width,m.height),null!=x&&f.setRect(x.x,x.y,x.width,x.height)}else if(null!=t)for(var v=0;v<t.length;v++)if(null!=t[v]){var E=mxUtils.clone(t[v]);a.push(this.transformControlPoint(e,E))}var S=e.absolutePoints;a.push(S[S.length-1]),e.absolutePoints=a}},mxGraphView.prototype.transformControlPoint=function(e,t,r){if(null!=e&&null!=t){var o=e.origin,a=r?1:this.scale;return new mxPoint(a*(t.x+this.translate.x+o.x),a*(t.y+this.translate.y+o.y))}return null},mxGraphView.prototype.isLoopStyleEnabled=function(e,t,r,o){var a=this.graph.getConnectionConstraint(e,r,!0),u=this.graph.getConnectionConstraint(e,o,!1);return!(!(null==t||t.length<2)||mxUtils.getValue(e.style,mxConstants.STYLE_ORTHOGONAL_LOOP,!1)&&(null!=a&&null!=a.point||null!=u&&null!=u.point))&&null!=r&&r==o},mxGraphView.prototype.getEdgeStyle=function(e,t,r,o){var a=this.isLoopStyleEnabled(e,t,r,o)?mxUtils.getValue(e.style,mxConstants.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils.getValue(e.style,mxConstants.STYLE_NOEDGESTYLE,!1)?null:e.style[mxConstants.STYLE_EDGE];if("string"==typeof a){var u=mxStyleRegistry.getValue(a);null==u&&this.isAllowEval()&&(u=mxUtils.eval(a)),a=u}return"function"==typeof a?a:null},mxGraphView.prototype.updateFloatingTerminalPoints=function(e,t,r){var o=e.absolutePoints,a=o[0];null==o[o.length-1]&&null!=r&&this.updateFloatingTerminalPoint(e,r,t,!1),null==a&&null!=t&&this.updateFloatingTerminalPoint(e,t,r,!0)},mxGraphView.prototype.updateFloatingTerminalPoint=function(e,t,r,o){e.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(e,t,r,o),o)},mxGraphView.prototype.getFloatingTerminalPoint=function(e,t,r,o){t=this.getTerminalPort(e,t,o);var a=this.getNextPoint(e,r,o),u=this.graph.isOrthogonal(e),c=mxUtils.toRadians(Number(t.style[mxConstants.STYLE_ROTATION]||"0")),f=new mxPoint(t.getCenterX(),t.getCenterY());if(0!=c){var m=Math.cos(-c),x=Math.sin(-c);a=mxUtils.getRotatedPoint(a,m,x,f)}var v=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0);v+=parseFloat(e.style[o?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0);var E=this.getPerimeterPoint(t,a,0==c&&u,v);return 0!=c&&(m=Math.cos(c),x=Math.sin(c),E=mxUtils.getRotatedPoint(E,m,x,f)),E},mxGraphView.prototype.getTerminalPort=function(e,t,r){var a=mxUtils.getValue(e.style,r?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT);if(null!=a){var u=this.getState(this.graph.getModel().getCell(a));null!=u&&(t=u)}return t},mxGraphView.prototype.getPerimeterPoint=function(e,t,r,o){var a=null;if(null!=e){var u=this.getPerimeterFunction(e);if(null!=u&&null!=t){var c=this.getPerimeterBounds(e,o);if(c.width>0||c.height>0){a=new mxPoint(t.x,t.y);var f=!1,m=!1;this.graph.model.isVertex(e.cell)&&(f=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPH,0),m=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPV,0),null!=e.shape&&null!=e.shape.stencil&&(f=1==mxUtils.getValue(e.style,"stencilFlipH",0)||f,m=1==mxUtils.getValue(e.style,"stencilFlipV",0)||m),f&&(a.x=2*c.getCenterX()-a.x),m&&(a.y=2*c.getCenterY()-a.y)),null!=(a=u(c,e,a,r))&&(f&&(a.x=2*c.getCenterX()-a.x),m&&(a.y=2*c.getCenterY()-a.y))}}null==a&&(a=this.getPoint(e))}return a},mxGraphView.prototype.getRoutingCenterX=function(e){var t=null!=e.style&&parseFloat(e.style[mxConstants.STYLE_ROUTING_CENTER_X])||0;return e.getCenterX()+t*e.width},mxGraphView.prototype.getRoutingCenterY=function(e){var t=null!=e.style&&parseFloat(e.style[mxConstants.STYLE_ROUTING_CENTER_Y])||0;return e.getCenterY()+t*e.height},mxGraphView.prototype.getPerimeterBounds=function(e,t){return t=null!=t?t:0,null!=e&&(t+=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),e.getPerimeterBounds(t*this.scale)},mxGraphView.prototype.getPerimeterFunction=function(e){var t=e.style[mxConstants.STYLE_PERIMETER];if("string"==typeof t){var r=mxStyleRegistry.getValue(t);null==r&&this.isAllowEval()&&(r=mxUtils.eval(t)),t=r}return"function"==typeof t?t:null},mxGraphView.prototype.getNextPoint=function(e,t,r){var o=e.absolutePoints,a=null;if(null!=o&&o.length>=2){var u=o.length;a=o[r?Math.min(1,u-1):Math.max(0,u-2)]}return null==a&&null!=t&&(a=new mxPoint(t.getCenterX(),t.getCenterY())),a},mxGraphView.prototype.getVisibleTerminal=function(e,t){for(var r=this.graph.getModel(),o=r.getTerminal(e,t),a=o;null!=o&&o!=this.currentRoot;)(!this.graph.isCellVisible(a)||this.isCellCollapsed(o))&&(a=o),o=r.getParent(o);return null!=a&&(!r.contains(a)||r.getParent(a)==r.getRoot()||a==this.currentRoot)&&(a=null),a},mxGraphView.prototype.updateEdgeBounds=function(e){var t=e.absolutePoints,r=t[0],o=t[t.length-1];if(r.x!=o.x||r.y!=o.y){var a=o.x-r.x,u=o.y-r.y;e.terminalDistance=Math.sqrt(a*a+u*u)}else e.terminalDistance=0;var c=0,f=[],m=r;if(null!=m){for(var x=m.x,v=m.y,E=x,S=v,b=1;b<t.length;b++){var _=t[b];if(null!=_){a=m.x-_.x,u=m.y-_.y;var D=Math.sqrt(a*a+u*u);f.push(D),c+=D,m=_,x=Math.min(m.x,x),v=Math.min(m.y,v),E=Math.max(m.x,E),S=Math.max(m.y,S)}}e.length=c,e.segments=f,e.x=x,e.y=v,e.width=Math.max(1,E-x),e.height=Math.max(1,S-v)}},mxGraphView.prototype.getPoint=function(e,t){var r=e.getCenterX(),o=e.getCenterY();if(null==e.segments||null!=t&&!t.relative)null!=t&&null!=(M=t.offset)&&(r+=M.x,o+=M.y);else{for(var u=e.absolutePoints.length,c=Math.round((.5+(null!=t?t.x/2:0))*e.length),f=e.segments[0],m=0,x=1;c>=Math.round(m+f)&&x<u-1;)m+=f,f=e.segments[x++];var v=0==f?0:(c-m)/f,E=e.absolutePoints[x-1],S=e.absolutePoints[x];if(null!=E&&null!=S){var M,b=0,_=0,D=0;null!=t&&(b=t.y,null!=(M=t.offset)&&(_=M.x,D=M.y));var R=S.x-E.x,N=S.y-E.y;r=E.x+R*v+((0==f?0:N/f)*b+_)*this.scale,o=E.y+N*v-((0==f?0:R/f)*b-D)*this.scale}}return new mxPoint(r,o)},mxGraphView.prototype.getRelativePoint=function(e,t,r){var a=this.graph.getModel().getGeometry(e.cell);if(null!=a){var u=e.absolutePoints.length;if(a.relative&&u>1){for(var c=e.length,f=e.segments,m=e.absolutePoints[0],x=e.absolutePoints[1],v=mxUtils.ptSegDistSq(m.x,m.y,x.x,x.y,t,r),E=0,S=0,b=0,_=2;_<u;_++){S+=f[_-2];var D=mxUtils.ptSegDistSq(m.x,m.y,(x=e.absolutePoints[_]).x,x.y,t,r);D<=v&&(v=D,E=_-1,b=S),m=x}var M=f[E],V=(x=e.absolutePoints[E+1]).x,O=x.y,F=t,G=r,j=(m=e.absolutePoints[E]).x-V,Y=m.y-O,q=(F=j-(F-=V))*j+(G=Y-(G-=O))*Y,Z=Math.sqrt(q<=0?0:q*q/(j*j+Y*Y));Z>M&&(Z=M);var Q=Math.sqrt(mxUtils.ptSegDistSq(m.x,m.y,x.x,x.y,t,r));return-1==mxUtils.relativeCcw(m.x,m.y,x.x,x.y,t,r)&&(Q=-Q),new mxPoint((c/2-b-Z)/c*-2,Q/this.scale)}}return new mxPoint},mxGraphView.prototype.updateEdgeLabelOffset=function(e){var t=e.absolutePoints;if(e.absoluteOffset.x=e.getCenterX(),e.absoluteOffset.y=e.getCenterY(),null!=t&&t.length>0&&null!=e.segments){var r=this.graph.getCellGeometry(e.cell);if(r.relative){var o=this.getPoint(e,r);null!=o&&(e.absoluteOffset=o)}else{var a=t[0],u=t[t.length-1];if(null!=a&&null!=u){var m=0,x=0,v=r.offset;null!=v&&(m=v.x,x=v.y);var S=a.y+(u.y-a.y)/2+x*this.scale;e.absoluteOffset.x=a.x+(u.x-a.x)/2+m*this.scale,e.absoluteOffset.y=S}}}},mxGraphView.prototype.getState=function(e,t){t=t||!1;var r=null;return null!=e&&(r=this.states.get(e),t&&(null==r||this.updateStyle)&&this.graph.isCellVisible(e)&&(null==r?(r=this.createState(e),this.states.put(e,r)):r.style=this.graph.getCellStyle(e))),r},mxGraphView.prototype.isRendering=function(){return this.rendering},mxGraphView.prototype.setRendering=function(e){this.rendering=e},mxGraphView.prototype.isAllowEval=function(){return this.allowEval},mxGraphView.prototype.setAllowEval=function(e){this.allowEval=e},mxGraphView.prototype.getStates=function(){return this.states},mxGraphView.prototype.setStates=function(e){this.states=e},mxGraphView.prototype.getCellStates=function(e){if(null==e)return this.states;for(var t=[],r=0;r<e.length;r++){var o=this.getState(e[r]);null!=o&&t.push(o)}return t},mxGraphView.prototype.removeState=function(e){var t=null;return null!=e&&null!=(t=this.states.remove(e))&&(this.graph.cellRenderer.destroy(t),t.invalid=!0,t.destroy()),t},mxGraphView.prototype.createState=function(e){return new mxCellState(this,e,this.graph.getCellStyle(e))},mxGraphView.prototype.getCanvas=function(){return this.canvas},mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane},mxGraphView.prototype.getDrawPane=function(){return this.drawPane},mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane},mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane},mxGraphView.prototype.isContainerEvent=function(e){var t=mxEvent.getSource(e);return t==this.graph.container||t.parentNode==this.backgroundPane||null!=t.parentNode&&t.parentNode.parentNode==this.backgroundPane||t==this.canvas.parentNode||t==this.canvas||t==this.backgroundPane||t==this.drawPane||t==this.overlayPane||t==this.decoratorPane},mxGraphView.prototype.isScrollEvent=function(e){var t=mxUtils.getOffset(this.graph.container),r=new mxPoint(e.clientX-t.x,e.clientY-t.y),o=this.graph.container.offsetWidth,a=this.graph.container.clientWidth;if(o>a&&r.x>a+2&&r.x<=o)return!0;var u=this.graph.container.offsetHeight,c=this.graph.container.clientHeight;return u>c&&r.y>c+2&&r.y<=u},mxGraphView.prototype.init=function(){this.installListeners();var e=this.graph;e.dialect==mxConstants.DIALECT_SVG?this.createSvg():e.dialect==mxConstants.DIALECT_VML?this.createVml():this.createHtml()},mxGraphView.prototype.installListeners=function(){var e=this.graph,t=e.container;if(null!=t){mxClient.IS_TOUCH&&(mxEvent.addListener(t,"gesturestart",mxUtils.bind(this,function(a){e.fireGestureEvent(a),mxEvent.consume(a)})),mxEvent.addListener(t,"gesturechange",mxUtils.bind(this,function(a){e.fireGestureEvent(a),mxEvent.consume(a)})),mxEvent.addListener(t,"gestureend",mxUtils.bind(this,function(a){e.fireGestureEvent(a),mxEvent.consume(a)})));var r=null;mxEvent.addGestureListeners(t,mxUtils.bind(this,function(a){this.isContainerEvent(a)&&(!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_GC&&!mxClient.IS_OP&&!mxClient.IS_SF||!this.isScrollEvent(a))&&(e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(a)),r=a.pointerId)}),mxUtils.bind(this,function(a){this.isContainerEvent(a)&&(null==r||a.pointerId==r)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a))}),mxUtils.bind(this,function(a){this.isContainerEvent(a)&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a)),r=null})),mxEvent.addListener(t,"dblclick",mxUtils.bind(this,function(a){this.isContainerEvent(a)&&e.dblClick(a)})),e.addMouseListener({mouseDown:function(a,u){e.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils.bind(this,function(a){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(a)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&!mxEvent.isConsumed(a)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a,function(a){var u=null;if(mxClient.IS_TOUCH){var c=mxEvent.getClientX(a),f=mxEvent.getClientY(a),m=mxUtils.convertPoint(t,c,f);u=e.view.getState(e.getCellAt(m.x,m.y))}return u}(a)))}),this.endHandler=mxUtils.bind(this,function(a){this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(a)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a))}),mxEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler)}},mxGraphView.prototype.createHtml=function(){var e=this.graph.container;if(null!=e&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas),this.updateContainerStyle(e),mxClient.IS_QUIRKS)){var t=mxUtils.bind(this,function(r){var o=this.getGraphBounds();this.updateHtmlCanvasSize(o.x+o.width+this.graph.border,o.y+o.height+this.graph.border)});mxEvent.addListener(window,"resize",t)}},mxGraphView.prototype.updateHtmlCanvasSize=function(e,t){if(null!=this.graph.container){var o=this.graph.container.offsetHeight;this.canvas.style.width=this.graph.container.offsetWidth<e?e+"px":"100%",this.canvas.style.height=o<t?t+"px":"100%"}},mxGraphView.prototype.createHtmlPane=function(e,t){var r=document.createElement("DIV");return null!=e&&null!=t?(r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width=e,r.style.height=t):r.style.position="relative",r},mxGraphView.prototype.createVml=function(){var e=this.graph.container;if(null!=e){var t=e.offsetWidth,r=e.offsetHeight;this.canvas=this.createVmlPane(t,r),this.canvas.style.overflow="hidden",this.backgroundPane=this.createVmlPane(t,r),this.drawPane=this.createVmlPane(t,r),this.overlayPane=this.createVmlPane(t,r),this.decoratorPane=this.createVmlPane(t,r),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas)}},mxGraphView.prototype.createVmlPane=function(e,t){var r=document.createElement(mxClient.VML_PREFIX+":group");return r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width=e+"px",r.style.height=t+"px",r.setAttribute("coordsize",e+","+t),r.setAttribute("coordorigin","0,0"),r},mxGraphView.prototype.createSvg=function(){var e=this.graph.container;this.canvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var t=document.createElementNS(mxConstants.NS_SVG,"svg");t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.display="block",t.appendChild(this.canvas),(mxClient.IS_IE||mxClient.IS_IE11)&&(t.style.overflow="hidden"),null!=e&&(e.appendChild(t),this.updateContainerStyle(e))},mxGraphView.prototype.updateContainerStyle=function(e){var t=mxUtils.getCurrentStyle(e);null!=t&&"static"==t.position&&(e.style.position="relative"),mxClient.IS_POINTER&&(e.style.touchAction="none")},mxGraphView.prototype.destroy=function(){var e=null!=this.canvas?this.canvas.ownerSVGElement:null;null==e&&(e=this.canvas),null!=e&&null!=e.parentNode&&(this.clear(this.currentRoot,!0),mxEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent.release(this.graph.container),e.parentNode.removeChild(e),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)},mxCurrentRootChange.prototype.execute=function(){var e=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=e;var t=this.view.graph.getTranslateForRoot(this.view.currentRoot);null!=t&&(this.view.translate=new mxPoint(-t.x,-t.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh(),this.view.fireEvent(new mxEventObject(this.isUp?mxEvent.UP:mxEvent.DOWN,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp},__mxOutput.mxGraphView=void 0!==mxGraphView?mxGraphView:void 0,mxLoadResources?mxResources.add(mxClient.basePath+"/resources/graph"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/graph"),mxGraph.prototype=new mxEventSource,mxGraph.prototype.constructor=mxGraph,mxGraph.prototype.mouseListeners=null,mxGraph.prototype.isMouseDown=!1,mxGraph.prototype.model=null,mxGraph.prototype.view=null,mxGraph.prototype.stylesheet=null,mxGraph.prototype.selectionModel=null,mxGraph.prototype.cellEditor=null,mxGraph.prototype.cellRenderer=null,mxGraph.prototype.multiplicities=null,mxGraph.prototype.renderHint=null,mxGraph.prototype.dialect=null,mxGraph.prototype.gridSize=10,mxGraph.prototype.gridEnabled=!0,mxGraph.prototype.portsEnabled=!0,mxGraph.prototype.nativeDblClickEnabled=!0,mxGraph.prototype.doubleTapEnabled=!0,mxGraph.prototype.doubleTapTimeout=500,mxGraph.prototype.doubleTapTolerance=25,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchTime=0,mxGraph.prototype.tapAndHoldEnabled=!0,mxGraph.prototype.tapAndHoldDelay=500,mxGraph.prototype.tapAndHoldInProgress=!1,mxGraph.prototype.tapAndHoldValid=!1,mxGraph.prototype.initialTouchX=0,mxGraph.prototype.initialTouchY=0,mxGraph.prototype.tolerance=4,mxGraph.prototype.defaultOverlap=.5,mxGraph.prototype.defaultParent=null,mxGraph.prototype.alternateEdgeStyle=null,mxGraph.prototype.backgroundImage=null,mxGraph.prototype.pageVisible=!1,mxGraph.prototype.pageBreaksVisible=!1,mxGraph.prototype.pageBreakColor="gray",mxGraph.prototype.pageBreakDashed=!0,mxGraph.prototype.minPageBreakDist=20,mxGraph.prototype.preferPageSize=!1,mxGraph.prototype.pageFormat=mxConstants.PAGE_FORMAT_A4_PORTRAIT,mxGraph.prototype.pageScale=1.5,mxGraph.prototype.enabled=!0,mxGraph.prototype.escapeEnabled=!0,mxGraph.prototype.invokesStopCellEditing=!0,mxGraph.prototype.enterStopsCellEditing=!1,mxGraph.prototype.useScrollbarsForPanning=!0,mxGraph.prototype.exportEnabled=!0,mxGraph.prototype.importEnabled=!0,mxGraph.prototype.cellsLocked=!1,mxGraph.prototype.cellsCloneable=!0,mxGraph.prototype.foldingEnabled=!0,mxGraph.prototype.cellsEditable=!0,mxGraph.prototype.cellsDeletable=!0,mxGraph.prototype.cellsMovable=!0,mxGraph.prototype.edgeLabelsMovable=!0,mxGraph.prototype.vertexLabelsMovable=!1,mxGraph.prototype.dropEnabled=!1,mxGraph.prototype.splitEnabled=!0,mxGraph.prototype.cellsResizable=!0,mxGraph.prototype.cellsBendable=!0,mxGraph.prototype.cellsSelectable=!0,mxGraph.prototype.cellsDisconnectable=!0,mxGraph.prototype.autoSizeCells=!1,mxGraph.prototype.autoSizeCellsOnAdd=!1,mxGraph.prototype.autoScroll=!0,mxGraph.prototype.ignoreScrollbars=!1,mxGraph.prototype.translateToScrollPosition=!1,mxGraph.prototype.timerAutoScroll=!1,mxGraph.prototype.allowAutoPanning=!1,mxGraph.prototype.autoExtend=!0,mxGraph.prototype.maximumGraphBounds=null,mxGraph.prototype.minimumGraphSize=null,mxGraph.prototype.minimumContainerSize=null,mxGraph.prototype.maximumContainerSize=null,mxGraph.prototype.resizeContainer=!1,mxGraph.prototype.border=0,mxGraph.prototype.keepEdgesInForeground=!1,mxGraph.prototype.keepEdgesInBackground=!1,mxGraph.prototype.allowNegativeCoordinates=!0,mxGraph.prototype.constrainChildren=!0,mxGraph.prototype.constrainRelativeChildren=!1,mxGraph.prototype.extendParents=!0,mxGraph.prototype.extendParentsOnAdd=!0,mxGraph.prototype.extendParentsOnMove=!1,mxGraph.prototype.recursiveResize=!1,mxGraph.prototype.collapseToPreferredSize=!0,mxGraph.prototype.zoomFactor=1.2,mxGraph.prototype.keepSelectionVisibleOnZoom=!1,mxGraph.prototype.centerZoom=!0,mxGraph.prototype.resetViewOnRootChange=!0,mxGraph.prototype.resetEdgesOnResize=!1,mxGraph.prototype.resetEdgesOnMove=!1,mxGraph.prototype.resetEdgesOnConnect=!0,mxGraph.prototype.allowLoops=!1,mxGraph.prototype.defaultLoopStyle=mxEdgeStyle.Loop,mxGraph.prototype.multigraph=!0,mxGraph.prototype.connectableEdges=!1,mxGraph.prototype.allowDanglingEdges=!0,mxGraph.prototype.cloneInvalidEdges=!1,mxGraph.prototype.disconnectOnMove=!0,mxGraph.prototype.labelsVisible=!0,mxGraph.prototype.htmlLabels=!1,mxGraph.prototype.swimlaneSelectionEnabled=!0,mxGraph.prototype.swimlaneNesting=!0,mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants.STYLE_FILLCOLOR,mxGraph.prototype.imageBundles=null,mxGraph.prototype.minFitScale=.1,mxGraph.prototype.maxFitScale=8,mxGraph.prototype.panDx=0,mxGraph.prototype.panDy=0,mxGraph.prototype.collapsedImage=new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9),mxGraph.prototype.expandedImage=new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9),mxGraph.prototype.warningImage=new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16),mxGraph.prototype.alreadyConnectedResource="none"!=mxClient.language?"alreadyConnected":"",mxGraph.prototype.containsValidationErrorsResource="none"!=mxClient.language?"containsValidationErrors":"",mxGraph.prototype.collapseExpandResource="none"!=mxClient.language?"collapse-expand":"",mxGraph.prototype.init=function(e){this.container=e,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent.addListener(e,"mouseleave",mxUtils.bind(this,function(t){null!=this.tooltipHandler&&null!=this.tooltipHandler.div&&this.tooltipHandler.div!=t.relatedTarget&&this.tooltipHandler.hide()})),mxClient.IS_IE&&(mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})),mxEvent.addListener(e,"selectstart",mxUtils.bind(this,function(t){return this.isEditing()||!this.isMouseDown&&!mxEvent.isShiftDown(t)}))),8==document.documentMode&&e.insertAdjacentHTML("beforeend","<"+mxClient.VML_PREFIX+':group style="DISPLAY: none;"></'+mxClient.VML_PREFIX+":group>")},mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()},mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)},mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)},mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)},mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)},mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)},mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)},mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)},mxGraph.prototype.createStylesheet=function(){return new mxStylesheet},mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)},mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer},mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)},mxGraph.prototype.getModel=function(){return this.model},mxGraph.prototype.getView=function(){return this.view},mxGraph.prototype.getStylesheet=function(){return this.stylesheet},mxGraph.prototype.setStylesheet=function(e){this.stylesheet=e},mxGraph.prototype.getSelectionModel=function(){return this.selectionModel},mxGraph.prototype.setSelectionModel=function(e){this.selectionModel=e},mxGraph.prototype.getSelectionCellsForChanges=function(e,t){for(var r=new mxDictionary,o=[],a=mxUtils.bind(this,function(m){if(!r.get(m)&&this.model.contains(m))if(this.model.isEdge(m)||this.model.isVertex(m))r.put(m,!0),o.push(m);else for(var x=this.model.getChildCount(m),v=0;v<x;v++)a(this.model.getChildAt(m,v))}),u=0;u<e.length;u++){var c=e[u];if(c.constructor!=mxRootChange&&(null==t||!t(c))){var f=null;c instanceof mxChildChange?f=c.child:null!=c.cell&&c.cell instanceof mxCell&&(f=c.cell),null!=f&&a(f)}}return o},mxGraph.prototype.graphModelChanged=function(e){for(var t=0;t<e.length;t++)this.processChange(e[t]);this.updateSelection(),this.view.validate(),this.sizeDidChange()},mxGraph.prototype.updateSelection=function(){for(var e=this.getSelectionCells(),t=[],r=0;r<e.length;r++)if(this.model.contains(e[r])&&this.isCellVisible(e[r]))for(var o=this.model.getParent(e[r]);null!=o&&o!=this.view.currentRoot;){if(this.isCellCollapsed(o)||!this.isCellVisible(o)){t.push(e[r]);break}o=this.model.getParent(o)}else t.push(e[r]);this.removeSelectionCells(t)},mxGraph.prototype.processChange=function(e){if(e instanceof mxRootChange)this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(e.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject(mxEvent.ROOT));else if(e instanceof mxChildChange){var t=this.model.getParent(e.child);this.view.invalidate(e.child,!0,!0),(!this.model.contains(t)||this.isCellCollapsed(t))&&(this.view.invalidate(e.child,!0,!0),this.removeStateForCell(e.child),this.view.currentRoot==e.child&&this.home()),t!=e.previous&&(null!=t&&this.view.invalidate(t,!1,!1),null!=e.previous&&this.view.invalidate(e.previous,!1,!1))}else if(e instanceof mxTerminalChange||e instanceof mxGeometryChange)(e instanceof mxTerminalChange||null==e.previous&&null!=e.geometry||null!=e.previous&&!e.previous.equals(e.geometry))&&this.view.invalidate(e.cell);else if(e instanceof mxValueChange)this.view.invalidate(e.cell,!1,!1);else if(e instanceof mxStyleChange){this.view.invalidate(e.cell,!0,!0);var r=this.view.getState(e.cell);null!=r&&(r.invalidStyle=!0)}else null!=e.cell&&e.cell instanceof mxCell&&this.removeStateForCell(e.cell)},mxGraph.prototype.removeStateForCell=function(e){for(var t=this.model.getChildCount(e),r=0;r<t;r++)this.removeStateForCell(this.model.getChildAt(e,r));this.view.invalidate(e,!1,!0),this.view.removeState(e)},mxGraph.prototype.addCellOverlay=function(e,t){null==e.overlays&&(e.overlays=[]),e.overlays.push(t);var r=this.view.getState(e);return null!=r&&this.cellRenderer.redraw(r),this.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,"cell",e,"overlay",t)),t},mxGraph.prototype.getCellOverlays=function(e){return e.overlays},mxGraph.prototype.removeCellOverlay=function(e,t){if(null==t)this.removeCellOverlays(e);else{var r=mxUtils.indexOf(e.overlays,t);if(r>=0){e.overlays.splice(r,1),0==e.overlays.length&&(e.overlays=null);var o=this.view.getState(e);null!=o&&this.cellRenderer.redraw(o),this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",e,"overlay",t))}else t=null}return t},mxGraph.prototype.removeCellOverlays=function(e){var t=e.overlays;if(null!=t){e.overlays=null;var r=this.view.getState(e);null!=r&&this.cellRenderer.redraw(r);for(var o=0;o<t.length;o++)this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",e,"overlay",t[o]))}return t},mxGraph.prototype.clearCellOverlays=function(e){e=null!=e?e:this.model.getRoot(),this.removeCellOverlays(e);for(var t=this.model.getChildCount(e),r=0;r<t;r++){var o=this.model.getChildAt(e,r);this.clearCellOverlays(o)}},mxGraph.prototype.setCellWarning=function(e,t,r,o){if(null!=t&&t.length>0){var a=new mxCellOverlay(r=null!=r?r:this.warningImage,"<font color=red>"+t+"</font>");return o&&a.addListener(mxEvent.CLICK,mxUtils.bind(this,function(u,c){this.isEnabled()&&this.setSelectionCell(e)})),this.addCellOverlay(e,a)}return this.removeCellOverlays(e),null},mxGraph.prototype.startEditing=function(e){this.startEditingAtCell(null,e)},mxGraph.prototype.startEditingAtCell=function(e,t){(null==t||!mxEvent.isMultiTouchEvent(t))&&(null==e&&null!=(e=this.getSelectionCell())&&!this.isCellEditable(e)&&(e=null),null!=e&&(this.fireEvent(new mxEventObject(mxEvent.START_EDITING,"cell",e,"event",t)),this.cellEditor.startEditing(e,t),this.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,"cell",e,"event",t))))},mxGraph.prototype.getEditingValue=function(e,t){return this.convertValueToString(e)},mxGraph.prototype.stopEditing=function(e){this.cellEditor.stopEditing(e),this.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED,"cancel",e))},mxGraph.prototype.labelChanged=function(e,t,r){this.model.beginUpdate();try{var o=e.value;this.cellLabelChanged(e,t,this.isAutoSizeCell(e)),this.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,"cell",e,"value",t,"old",o,"event",r))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellLabelChanged=function(e,t,r){this.model.beginUpdate();try{this.model.setValue(e,t),r&&this.cellSizeUpdated(e,!1)}finally{this.model.endUpdate()}},mxGraph.prototype.escape=function(e){this.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",e))},mxGraph.prototype.click=function(e){var t=e.getEvent(),r=e.getCell(),o=new mxEventObject(mxEvent.CLICK,"event",t,"cell",r);if(e.isConsumed()&&o.consume(),this.fireEvent(o),this.isEnabled()&&!mxEvent.isConsumed(t)&&!o.isConsumed()){if(null!=r){if(this.isTransparentClickEvent(t)){var a=!1,u=this.getCellAt(e.graphX,e.graphY,null,null,null,mxUtils.bind(this,function(v){var E=this.isCellSelected(v.cell);return!(a=a||E)||E||v.cell!=r&&this.model.isAncestor(v.cell,r)}));null!=u&&(r=u)}}else if(this.isSwimlaneSelectionEnabled()&&!(null==(r=this.getSwimlaneAt(e.getGraphX(),e.getGraphY()))||this.isToggleEvent(t)&&mxEvent.isAltDown(t))){for(var c=r,f=[];null!=c;){c=this.model.getParent(c);var m=this.view.getState(c);this.isSwimlane(c)&&null!=m&&f.push(c)}if(f.length>0){(f=f.reverse()).splice(0,0,r),f.push(r);for(var x=0;x<f.length-1;x++)this.isCellSelected(f[x])&&(r=f[this.isToggleEvent(t)?x:x+1])}}null!=r?this.selectCellForEvent(r,t):this.isToggleEvent(t)||this.clearSelection()}},mxGraph.prototype.isSiblingSelected=function(e){for(var t=this.model,r=t.getParent(e),o=t.getChildCount(r),a=0;a<o;a++){var u=t.getChildAt(r,a);if(e!=u&&this.isCellSelected(u))return!0}return!1},mxGraph.prototype.dblClick=function(e,t){var r=new mxEventObject(mxEvent.DOUBLE_CLICK,"event",e,"cell",t);this.fireEvent(r),this.isEnabled()&&!mxEvent.isConsumed(e)&&!r.isConsumed()&&null!=t&&this.isCellEditable(t)&&!this.isEditing(t)&&(this.startEditingAtCell(t,e),mxEvent.consume(e))},mxGraph.prototype.tapAndHold=function(e){var t=e.getEvent(),r=new mxEventObject(mxEvent.TAP_AND_HOLD,"event",t,"cell",e.getCell());if(this.fireEvent(r),r.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent.isConsumed(t)&&!r.isConsumed()&&this.connectionHandler.isEnabled()){var o=this.view.getState(this.connectionHandler.marker.getCell(e));null!=o&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=o,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(e),this.connectionHandler.previous=o,this.connectionHandler.fireEvent(new mxEventObject(mxEvent.START,"state",this.connectionHandler.previous)))}},mxGraph.prototype.scrollPointToVisible=function(e,t,r,o){if(this.timerAutoScroll||!this.ignoreScrollbars&&!mxUtils.hasScrollbars(this.container))this.allowAutoPanning&&!this.panningHandler.isActive()&&(null==this.panningManager&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(e+this.panDx,t+this.panDy));else{var a=this.container;if(o=null!=o?o:20,e>=a.scrollLeft&&t>=a.scrollTop&&e<=a.scrollLeft+a.clientWidth&&t<=a.scrollTop+a.clientHeight){var u=a.scrollLeft+a.clientWidth-e;if(u<o){var c=a.scrollLeft;if(a.scrollLeft+=o-u,r&&c==a.scrollLeft){if(this.dialect==mxConstants.DIALECT_SVG)this.view.getDrawPane().ownerSVGElement.style.width=(m=this.container.scrollWidth+o-u)+"px";else{var m=Math.max(a.clientWidth,a.scrollWidth)+o-u;this.view.getCanvas().style.width=m+"px"}a.scrollLeft+=o-u}}else(u=e-a.scrollLeft)<o&&(a.scrollLeft-=o-u);var v=a.scrollTop+a.clientHeight-t;if(v<o){if(c=a.scrollTop,a.scrollTop+=o-v,c==a.scrollTop&&r){if(this.dialect==mxConstants.DIALECT_SVG)this.view.getDrawPane().ownerSVGElement.style.height=(E=this.container.scrollHeight+o-v)+"px";else{var E=Math.max(a.clientHeight,a.scrollHeight)+o-v;this.view.getCanvas().style.height=E+"px"}a.scrollTop+=o-v}}else(v=t-a.scrollTop)<o&&(a.scrollTop-=o-v)}}},mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)},mxGraph.prototype.getBorderSizes=function(){var e=mxUtils.getCurrentStyle(this.container);return new mxRectangle(mxUtils.parseCssNumber(e.paddingLeft)+("none"!=e.borderLeftStyle?mxUtils.parseCssNumber(e.borderLeftWidth):0),mxUtils.parseCssNumber(e.paddingTop)+("none"!=e.borderTopStyle?mxUtils.parseCssNumber(e.borderTopWidth):0),mxUtils.parseCssNumber(e.paddingRight)+("none"!=e.borderRightStyle?mxUtils.parseCssNumber(e.borderRightWidth):0),mxUtils.parseCssNumber(e.paddingBottom)+("none"!=e.borderBottomStyle?mxUtils.parseCssNumber(e.borderBottomWidth):0))},mxGraph.prototype.getPreferredPageSize=function(e,t,r){var a=this.view.translate,u=this.pageFormat,c=this.pageScale,f=new mxRectangle(0,0,Math.ceil(u.width*c),Math.ceil(u.height*c)),m=this.pageBreaksVisible?Math.ceil(t/f.width):1,x=this.pageBreaksVisible?Math.ceil(r/f.height):1;return new mxRectangle(0,0,m*f.width+2+a.x,x*f.height+2+a.y)},mxGraph.prototype.fit=function(e,t,r,o,a,u,c){if(null!=this.container){e=null!=e?e:this.getBorder(),t=null!=t&&t,r=null!=r?r:0,o=null==o||o,a=null!=a&&a,u=null!=u&&u;var f=this.getBorderSizes(),m=this.container.offsetWidth-f.x-f.width-1,x=null!=c?c:this.container.offsetHeight-f.y-f.height-1,v=this.view.getGraphBounds();if(v.width>0&&v.height>0){t&&null!=v.x&&null!=v.y&&((v=v.clone()).width+=v.x,v.height+=v.y,v.x=0,v.y=0);var E=this.view.scale,S=v.width/E,b=v.height/E;null!=this.backgroundImage&&(S=Math.max(S,this.backgroundImage.width-v.x/E),b=Math.max(b,this.backgroundImage.height-v.y/E));var _=(t?e:2*e)+r+1;m-=_,x-=_;var D=a?x/b:u?m/S:Math.min(m/S,x/b);if(null!=this.minFitScale&&(D=Math.max(D,this.minFitScale)),null!=this.maxFitScale&&(D=Math.min(D,this.maxFitScale)),!o)return D;if(t)this.view.scale!=D&&this.view.setScale(D);else if(mxUtils.hasScrollbars(this.container)){this.view.setScale(D);var N=this.getGraphBounds();null!=N.x&&(this.container.scrollLeft=N.x),null!=N.y&&(this.container.scrollTop=N.y)}else{var M=null!=v.x?Math.floor(this.view.translate.x-v.x/E+e/D+r/2):e,R=null!=v.y?Math.floor(this.view.translate.y-v.y/E+e/D+r/2):e;this.view.scaleAndTranslate(D,M,R)}}}return this.view.scale},mxGraph.prototype.sizeDidChange=function(){var e=this.getGraphBounds();if(null!=this.container){var t=this.getBorder(),r=Math.max(0,e.x)+e.width+2*t,o=Math.max(0,e.y)+e.height+2*t;if(null!=this.minimumContainerSize&&(r=Math.max(r,this.minimumContainerSize.width),o=Math.max(o,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(r,o),this.preferPageSize||!mxClient.IS_IE&&this.pageVisible){var a=this.getPreferredPageSize(e,Math.max(1,r),Math.max(1,o));null!=a&&(r=a.width*this.view.scale,o=a.height*this.view.scale)}if(null!=this.minimumGraphSize&&(r=Math.max(r,this.minimumGraphSize.width*this.view.scale),o=Math.max(o,this.minimumGraphSize.height*this.view.scale)),r=Math.ceil(r),o=Math.ceil(o),this.dialect==mxConstants.DIALECT_SVG){var u=this.view.getDrawPane().ownerSVGElement;null!=u&&(u.style.minWidth=Math.max(1,r)+"px",u.style.minHeight=Math.max(1,o)+"px",u.style.width="100%",u.style.height="100%")}else mxClient.IS_QUIRKS?this.view.updateHtmlCanvasSize(Math.max(1,r),Math.max(1,o)):(this.view.canvas.style.minWidth=Math.max(1,r)+"px",this.view.canvas.style.minHeight=Math.max(1,o)+"px");this.updatePageBreaks(this.pageBreaksVisible,r,o)}this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",e))},mxGraph.prototype.doResizeContainer=function(e,t){null!=this.maximumContainerSize&&(e=Math.min(this.maximumContainerSize.width,e),t=Math.min(this.maximumContainerSize.height,t)),this.container.style.width=Math.ceil(e)+"px",this.container.style.height=Math.ceil(t)+"px"},mxGraph.prototype.updatePageBreaks=function(e,t,r){var o=this.view.scale,a=this.view.translate,u=this.pageFormat,c=o*this.pageScale,f=new mxRectangle(0,0,u.width*c,u.height*c),m=mxRectangle.fromRectangle(this.getGraphBounds());m.width=Math.max(1,m.width),m.height=Math.max(1,m.height),f.x=Math.floor((m.x-a.x*o)/f.width)*f.width+a.x*o,f.y=Math.floor((m.y-a.y*o)/f.height)*f.height+a.y*o,m.width=Math.ceil((m.width+(m.x-f.x))/f.width)*f.width,m.height=Math.ceil((m.height+(m.y-f.y))/f.height)*f.height;var x=(e=e&&Math.min(f.width,f.height)>this.minPageBreakDist)?Math.ceil(m.height/f.height)+1:0,v=e?Math.ceil(m.width/f.width)+1:0,E=(v-1)*f.width,S=(x-1)*f.height;null==this.horizontalPageBreaks&&x>0&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&v>0&&(this.verticalPageBreaks=[]);var b=mxUtils.bind(this,function(_){if(null!=_){for(var D=_==this.horizontalPageBreaks?x:v,M=0;M<=D;M++){var R=_==this.horizontalPageBreaks?[new mxPoint(Math.round(f.x),Math.round(f.y+M*f.height)),new mxPoint(Math.round(f.x+E),Math.round(f.y+M*f.height))]:[new mxPoint(Math.round(f.x+M*f.width),Math.round(f.y)),new mxPoint(Math.round(f.x+M*f.width),Math.round(f.y+S))];if(null!=_[M])_[M].points=R,_[M].redraw();else{var N=new mxPolyline(R,this.pageBreakColor);N.dialect=this.dialect,N.pointerEvents=!1,N.isDashed=this.pageBreakDashed,N.init(this.view.backgroundPane),N.redraw(),_[M]=N}}for(M=D;M<_.length;M++)_[M].destroy();_.splice(D,_.length-D)}});b(this.horizontalPageBreaks),b(this.verticalPageBreaks)},mxGraph.prototype.getCurrentCellStyle=function(e,t){var r=t?null:this.view.getState(e);return null!=r?r.style:this.getCellStyle(e)},mxGraph.prototype.getCellStyle=function(e){var t=this.model.getStyle(e),r=null;return r=this.model.isEdge(e)?this.stylesheet.getDefaultEdgeStyle():this.stylesheet.getDefaultVertexStyle(),null!=t&&(r=this.postProcessCellStyle(this.stylesheet.getCellStyle(t,r))),null==r&&(r=new Object),r},mxGraph.prototype.postProcessCellStyle=function(e){if(null!=e){var t=e[mxConstants.STYLE_IMAGE],r=this.getImageFromBundles(t);if(null!=r?e[mxConstants.STYLE_IMAGE]=r:r=t,null!=r&&"data:image/"==r.substring(0,11)){if("data:image/svg+xml,<"==r.substring(0,20))r=r.substring(0,19)+encodeURIComponent(r.substring(19));else if("data:image/svg+xml,%3C"!=r.substring(0,22)){var o=r.indexOf(",");o>0&&";base64,"!=r.substring(o-7,o+1)&&(r=r.substring(0,o)+";base64,"+r.substring(o+1))}e[mxConstants.STYLE_IMAGE]=r}}return e},mxGraph.prototype.setCellStyle=function(e,t){if(null!=(t=t||this.getSelectionCells())){this.model.beginUpdate();try{for(var r=0;r<t.length;r++)this.model.setStyle(t[r],e)}finally{this.model.endUpdate()}}},mxGraph.prototype.toggleCellStyle=function(e,t,r){return r=r||this.getSelectionCell(),this.toggleCellStyles(e,t,[r])},mxGraph.prototype.toggleCellStyles=function(e,t,r){t=null!=t&&t;var o=null;if(null!=(r=r||this.getSelectionCells())&&r.length>0){var a=this.getCurrentCellStyle(r[0]);o=mxUtils.getValue(a,e,t)?0:1,this.setCellStyles(e,o,r)}return o},mxGraph.prototype.setCellStyles=function(e,t,r){r=r||this.getSelectionCells(),mxUtils.setCellStyles(this.model,r,e,t)},mxGraph.prototype.toggleCellStyleFlags=function(e,t,r){this.setCellStyleFlags(e,t,null,r)},mxGraph.prototype.setCellStyleFlags=function(e,t,r,o){if(null!=(o=o||this.getSelectionCells())&&o.length>0){if(null==r){var a=this.getCurrentCellStyle(o[0]);r=(parseInt(a[e]||0)&t)!=t}mxUtils.setCellStyleFlags(this.model,o,e,t,r)}},mxGraph.prototype.alignCells=function(e,t,r){if(null==t&&(t=this.getSelectionCells()),null!=t&&t.length>1){if(null==r)for(var o=0;o<t.length;o++)if(null!=(a=this.view.getState(t[o]))&&!this.model.isEdge(t[o]))if(null==r){if(e==mxConstants.ALIGN_CENTER){r=a.x+a.width/2;break}if(e==mxConstants.ALIGN_RIGHT)r=a.x+a.width;else if(e==mxConstants.ALIGN_TOP)r=a.y;else{if(e==mxConstants.ALIGN_MIDDLE){r=a.y+a.height/2;break}r=e==mxConstants.ALIGN_BOTTOM?a.y+a.height:a.x}}else r=e==mxConstants.ALIGN_RIGHT?Math.max(r,a.x+a.width):e==mxConstants.ALIGN_TOP?Math.min(r,a.y):e==mxConstants.ALIGN_BOTTOM?Math.max(r,a.y+a.height):Math.min(r,a.x);if(null!=r){var u=this.view.scale;this.model.beginUpdate();try{for(o=0;o<t.length;o++){var a;if(null!=(a=this.view.getState(t[o]))){var c=this.getCellGeometry(t[o]);null!=c&&!this.model.isEdge(t[o])&&(c=c.clone(),e==mxConstants.ALIGN_CENTER?c.x+=(r-a.x-a.width/2)/u:e==mxConstants.ALIGN_RIGHT?c.x+=(r-a.x-a.width)/u:e==mxConstants.ALIGN_TOP?c.y+=(r-a.y)/u:e==mxConstants.ALIGN_MIDDLE?c.y+=(r-a.y-a.height/2)/u:e==mxConstants.ALIGN_BOTTOM?c.y+=(r-a.y-a.height)/u:c.x+=(r-a.x)/u,this.resizeCell(t[o],c))}}this.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,"align",e,"cells",t))}finally{this.model.endUpdate()}}}return t},mxGraph.prototype.flipEdge=function(e){if(null!=e&&null!=this.alternateEdgeStyle){this.model.beginUpdate();try{var t=this.model.getStyle(e);this.model.setStyle(e,null==t||0==t.length?this.alternateEdgeStyle:null),this.resetEdge(e),this.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE,"edge",e))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.addImageBundle=function(e){this.imageBundles.push(e)},mxGraph.prototype.removeImageBundle=function(e){for(var t=[],r=0;r<this.imageBundles.length;r++)this.imageBundles[r]!=e&&t.push(this.imageBundles[r]);this.imageBundles=t},mxGraph.prototype.getImageFromBundles=function(e){if(null!=e)for(var t=0;t<this.imageBundles.length;t++){var r=this.imageBundles[t].getImage(e);if(null!=r)return r}return null},mxGraph.prototype.orderCells=function(e,t){null==t&&(t=mxUtils.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(t,e),this.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,"back",e,"cells",t))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsOrdered=function(e,t){if(null!=e){this.model.beginUpdate();try{for(var r=0;r<e.length;r++){var o=this.model.getParent(e[r]);this.model.add(o,e[r],t?r:this.model.getChildCount(o)-1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,"back",t,"cells",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.groupCells=function(e,t,r){null==r&&(r=mxUtils.sortCells(this.getSelectionCells(),!0)),r=this.getCellsForGroup(r),null==e&&(e=this.createGroupCell(r));var o=this.getBoundsForGroup(e,r,t);if(r.length>1&&null!=o){var a=this.model.getParent(e);null==a&&(a=this.model.getParent(r[0])),this.model.beginUpdate();try{null==this.getCellGeometry(e)&&this.model.setGeometry(e,new mxGeometry);var u=this.model.getChildCount(a);this.cellsAdded([e],a,u,null,null,!1,!1,!1),u=this.model.getChildCount(e),this.cellsAdded(r,e,u,null,null,!1,!1,!1),this.cellsMoved(r,-o.x,-o.y,!1,!1,!1),this.cellsResized([e],[o],!1),this.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,"group",e,"border",t,"cells",r))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.getCellsForGroup=function(e){var t=[];if(null!=e&&e.length>0){var r=this.model.getParent(e[0]);t.push(e[0]);for(var o=1;o<e.length;o++)this.model.getParent(e[o])==r&&t.push(e[o])}return t},mxGraph.prototype.getBoundsForGroup=function(e,t,r){var o=this.getBoundingBoxFromGeometry(t,!0);if(null!=o){if(this.isSwimlane(e)){var a=this.getStartSize(e);o.x-=a.width,o.y-=a.height,o.width+=a.width,o.height+=a.height}null!=r&&(o.x-=r,o.y-=r,o.width+=2*r,o.height+=2*r)}return o},mxGraph.prototype.createGroupCell=function(e){var t=new mxCell("");return t.setVertex(!0),t.setConnectable(!1),t},mxGraph.prototype.ungroupCells=function(e){var t=[];if(null==e&&(e=this.getCellsForUngroup()),null!=e&&e.length>0){this.model.beginUpdate();try{for(var r=0;r<e.length;r++){var o=this.model.getChildren(e[r]);if(null!=o&&o.length>0){o=o.slice();var a=this.model.getParent(e[r]),u=this.model.getChildCount(a);this.cellsAdded(o,a,u,null,null,!0),t=t.concat(o);for(var c=0;c<o.length;c++){var f=this.view.getState(o[c]),m=this.getCellGeometry(o[c]);null!=f&&null!=m&&m.relative&&((m=m.clone()).x=f.origin.x,m.y=f.origin.y,m.relative=!1,this.model.setGeometry(o[c],m))}}}this.removeCellsAfterUngroup(e),this.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS,"cells",e))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.getCellsForUngroup=function(){for(var e=this.getSelectionCells(),t=[],r=0;r<e.length;r++)this.model.isVertex(e[r])&&this.model.getChildCount(e[r])>0&&t.push(e[r]);return t},mxGraph.prototype.removeCellsAfterUngroup=function(e){this.cellsRemoved(this.addAllEdges(e))},mxGraph.prototype.removeCellsFromParent=function(e){null==e&&(e=this.getSelectionCells()),this.model.beginUpdate();try{var t=this.getDefaultParent(),r=this.model.getChildCount(t);this.cellsAdded(e,t,r,null,null,!0),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT,"cells",e))}finally{this.model.endUpdate()}return e},mxGraph.prototype.updateGroupBounds=function(e,t,r,o,a,u,c){null==e&&(e=this.getSelectionCells()),t=null!=t?t:0,r=null!=r&&r,o=null!=o?o:0,a=null!=a?a:0,u=null!=u?u:0,c=null!=c?c:0,this.model.beginUpdate();try{for(var f=e.length-1;f>=0;f--){var m=this.getCellGeometry(e[f]);if(null!=m){var x=this.getChildCells(e[f]);if(null!=x&&x.length>0){var v=this.getBoundingBoxFromGeometry(x,!0);if(null!=v&&v.width>0&&v.height>0){var E=this.isSwimlane(e[f])?this.getActualStartSize(e[f],!0):new mxRectangle;m=m.clone(),r&&(m.x=Math.round(m.x+v.x-t-E.x-c),m.y=Math.round(m.y+v.y-t-E.y-o)),m.width=Math.round(v.width+2*t+E.x+c+a+E.width),m.height=Math.round(v.height+2*t+E.y+o+u+E.height),this.model.setGeometry(e[f],m),this.moveCells(x,t+E.x-v.x+c,t+E.y-v.y+o)}}}}}finally{this.model.endUpdate()}return e},mxGraph.prototype.getBoundingBox=function(e){var t=null;if(null!=e&&e.length>0)for(var r=0;r<e.length;r++)if(this.model.isVertex(e[r])||this.model.isEdge(e[r])){var o=this.view.getBoundingBox(this.view.getState(e[r]),!0);null!=o&&(null==t?t=mxRectangle.fromRectangle(o):t.add(o))}return t},mxGraph.prototype.cloneCell=function(e,t,r,o){return this.cloneCells([e],t,r,o)[0]},mxGraph.prototype.cloneCells=function(e,t,r,o){t=null==t||t;var a=null;if(null!=e){for(var u=new mxDictionary,c=[],f=0;f<e.length;f++)u.put(e[f],!0),c.push(e[f]);if(c.length>0){var m=this.view.scale,x=this.view.translate;for(a=this.model.cloneCells(e,!0,r),f=0;f<e.length;f++)if(!t&&this.model.isEdge(a[f])&&null!=this.getEdgeValidationError(a[f],this.model.getTerminal(a[f],!0),this.model.getTerminal(a[f],!1)))a[f]=null;else{var v=this.model.getGeometry(a[f]);if(null!=v){var E=this.view.getState(e[f]),S=this.view.getState(this.model.getParent(e[f]));if(null!=E&&null!=S){var b=o?0:S.origin.x,_=o?0:S.origin.y;if(this.model.isEdge(a[f])){var D=E.absolutePoints;if(null!=D){for(var M=this.model.getTerminal(e[f],!0);null!=M&&!u.get(M);)M=this.model.getParent(M);null==M&&null!=D[0]&&v.setTerminalPoint(new mxPoint(D[0].x/m-x.x,D[0].y/m-x.y),!0);for(var R=this.model.getTerminal(e[f],!1);null!=R&&!u.get(R);)R=this.model.getParent(R);var N=D.length-1;null==R&&null!=D[N]&&v.setTerminalPoint(new mxPoint(D[N].x/m-x.x,D[N].y/m-x.y),!1);var V=v.points;if(null!=V)for(var O=0;O<V.length;O++)V[O].x+=b,V[O].y+=_}}else v.translate(b,_)}}}}else a=[]}return a},mxGraph.prototype.insertVertex=function(e,t,r,o,a,u,c,f,m){var x=this.createVertex(e,t,r,o,a,u,c,f,m);return this.addCell(x,e)},mxGraph.prototype.createVertex=function(e,t,r,o,a,u,c,f,m){var x=new mxGeometry(o,a,u,c);x.relative=null!=m&&m;var v=new mxCell(r,x,f);return v.setId(t),v.setVertex(!0),v.setConnectable(!0),v},mxGraph.prototype.insertEdge=function(e,t,r,o,a,u){var c=this.createEdge(e,t,r,o,a,u);return this.addEdge(c,e,o,a)},mxGraph.prototype.createEdge=function(e,t,r,o,a,u){var c=new mxCell(r,new mxGeometry,u);return c.setId(t),c.setEdge(!0),c.geometry.relative=!0,c},mxGraph.prototype.addEdge=function(e,t,r,o,a){return this.addCell(e,t,a,r,o)},mxGraph.prototype.addCell=function(e,t,r,o,a){return this.addCells([e],t,r,o,a)[0]},mxGraph.prototype.addCells=function(e,t,r,o,a,u){null==t&&(t=this.getDefaultParent()),null==r&&(r=this.model.getChildCount(t)),this.model.beginUpdate();try{this.cellsAdded(e,t,r,o,a,null!=u&&u,!0),this.fireEvent(new mxEventObject(mxEvent.ADD_CELLS,"cells",e,"parent",t,"index",r,"source",o,"target",a))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsAdded=function(e,t,r,o,a,u,c,f){if(null!=e&&null!=t&&null!=r){this.model.beginUpdate();try{for(var m=u?this.view.getState(t):null,x=null!=m?m.origin:null,v=new mxPoint(0,0),E=0;E<e.length;E++)if(null==e[E])r--;else{var S=this.model.getParent(e[E]);if(null!=x&&e[E]!=t&&t!=S){var b=this.view.getState(S),_=null!=b?b.origin:v,D=this.model.getGeometry(e[E]);if(null!=D){var M=_.x-x.x,R=_.y-x.y;(D=D.clone()).translate(M,R),!D.relative&&this.model.isVertex(e[E])&&!this.isAllowNegativeCoordinates()&&(D.x=Math.max(0,D.x),D.y=Math.max(0,D.y)),this.model.setGeometry(e[E],D)}}t==S&&r+E>this.model.getChildCount(t)&&r--,this.model.add(t,e[E],r+E),this.autoSizeCellsOnAdd&&this.autoSizeCell(e[E],!0),(null==f||f)&&this.isExtendParentsOnAdd(e[E])&&this.isExtendParent(e[E])&&this.extendParent(e[E]),(null==c||c)&&this.constrainChild(e[E]),null!=o&&this.cellConnected(e[E],o,!0),null!=a&&this.cellConnected(e[E],a,!1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",e,"parent",t,"index",r,"source",o,"target",a,"absolute",u))}finally{this.model.endUpdate()}}},mxGraph.prototype.autoSizeCell=function(e,t){if(t=null==t||t)for(var r=this.model.getChildCount(e),o=0;o<r;o++)this.autoSizeCell(this.model.getChildAt(e,o));this.getModel().isVertex(e)&&this.isAutoSizeCell(e)&&this.updateCellSize(e)},mxGraph.prototype.removeCells=function(e,t){if(t=null==t||t,null==e&&(e=this.getDeletableCells(this.getSelectionCells())),t)e=this.getDeletableCells(this.addAllEdges(e));else{e=e.slice();for(var r=this.getDeletableCells(this.getAllEdges(e)),o=new mxDictionary,a=0;a<e.length;a++)o.put(e[a],!0);for(a=0;a<r.length;a++)null==this.view.getState(r[a])&&!o.get(r[a])&&(o.put(r[a],!0),e.push(r[a]))}this.model.beginUpdate();try{this.cellsRemoved(e),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS,"cells",e,"includeEdges",t))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsRemoved=function(e){if(null!=e&&e.length>0){var t=this.view.scale,r=this.view.translate;this.model.beginUpdate();try{for(var o=new mxDictionary,a=0;a<e.length;a++)o.put(e[a],!0);for(a=0;a<e.length;a++){for(var u=this.getAllEdges([e[a]]),c=mxUtils.bind(this,function(x,v){var E=this.model.getGeometry(x);if(null!=E){for(var S=this.model.getTerminal(x,v),b=!1,_=S;null!=_;){if(e[a]==_){b=!0;break}_=this.model.getParent(_)}if(b){E=E.clone();var D=this.view.getState(x);if(null!=D&&null!=D.absolutePoints){var M=D.absolutePoints,R=v?0:M.length-1;E.setTerminalPoint(new mxPoint(M[R].x/t-r.x-D.origin.x,M[R].y/t-r.y-D.origin.y),v)}else{var N=this.view.getState(S);null!=N&&E.setTerminalPoint(new mxPoint(N.getCenterX()/t-r.x,N.getCenterY()/t-r.y),v)}this.model.setGeometry(x,E),this.model.setTerminal(x,null,v)}}}),f=0;f<u.length;f++)o.get(u[f])||(o.put(u[f],!0),c(u[f],!0),c(u[f],!1));this.model.remove(e[a])}this.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED,"cells",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.splitEdge=function(e,t,r,o,a,u,c,f){o=o||0,a=a||0,f=null!=f?f:this.model.getParent(e);var m=this.model.getTerminal(e,!0);this.model.beginUpdate();try{if(null==r){r=this.cloneCell(e);var x=this.view.getState(e),v=this.getCellGeometry(r);if(null!=v&&null!=v.points&&null!=x){var E=this.view.translate,S=this.view.scale,b=mxUtils.findNearestSegment(x,(o+E.x)*S,(a+E.y)*S);v.points=v.points.slice(0,b),null!=(v=this.getCellGeometry(e))&&null!=v.points&&((v=v.clone()).points=v.points.slice(b),this.model.setGeometry(e,v))}}this.cellsMoved(t,o,a,!1,!1),this.cellsAdded(t,f,this.model.getChildCount(f),null,null,!0),this.cellsAdded([r],f,this.model.getChildCount(f),m,t[0],!1),this.cellConnected(e,t[0],!0),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",e,"cells",t,"newEdge",r,"dx",o,"dy",a))}finally{this.model.endUpdate()}return r},mxGraph.prototype.toggleCells=function(e,t,r){null==t&&(t=this.getSelectionCells()),r&&(t=this.addAllEdges(t)),this.model.beginUpdate();try{this.cellsToggled(t,e),this.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,"show",e,"cells",t,"includeEdges",r))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsToggled=function(e,t){if(null!=e&&e.length>0){this.model.beginUpdate();try{for(var r=0;r<e.length;r++)this.model.setVisible(e[r],t)}finally{this.model.endUpdate()}}},mxGraph.prototype.foldCells=function(e,t,r,o,a){t=null!=t&&t,null==r&&(r=this.getFoldableCells(this.getSelectionCells(),e)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(r,e,t,o),this.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"collapse",e,"recurse",t,"cells",r))}finally{this.model.endUpdate()}return r},mxGraph.prototype.cellsFolded=function(e,t,r,o){if(null!=e&&e.length>0){this.model.beginUpdate();try{for(var a=0;a<e.length;a++)if((!o||this.isCellFoldable(e[a],t))&&t!=this.isCellCollapsed(e[a])){if(this.model.setCollapsed(e[a],t),this.swapBounds(e[a],t),this.isExtendParent(e[a])&&this.extendParent(e[a]),r){var u=this.model.getChildren(e[a]);this.cellsFolded(u,t,r)}this.constrainChild(e[a])}this.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,"cells",e,"collapse",t,"recurse",r))}finally{this.model.endUpdate()}}},mxGraph.prototype.swapBounds=function(e,t){if(null!=e){var r=this.model.getGeometry(e);null!=r&&(r=r.clone(),this.updateAlternateBounds(e,r,t),r.swap(),this.model.setGeometry(e,r))}},mxGraph.prototype.updateAlternateBounds=function(e,t,r){if(null!=e&&null!=t){var o=this.getCurrentCellStyle(e);if(null==t.alternateBounds){var a=t;if(this.collapseToPreferredSize){var u=this.getPreferredSizeForCell(e);if(null!=u){a=u;var c=mxUtils.getValue(o,mxConstants.STYLE_STARTSIZE);c>0&&(a.height=Math.max(a.height,c))}}t.alternateBounds=new mxRectangle(0,0,a.width,a.height)}if(null!=t.alternateBounds){t.alternateBounds.x=t.x,t.alternateBounds.y=t.y;var f=mxUtils.toRadians(o[mxConstants.STYLE_ROTATION]||0);if(0!=f){var m=t.alternateBounds.getCenterX()-t.getCenterX(),x=t.alternateBounds.getCenterY()-t.getCenterY(),v=Math.cos(f),E=Math.sin(f),b=E*m+v*x;t.alternateBounds.x+=v*m-E*x-m,t.alternateBounds.y+=b-x}}}},mxGraph.prototype.addAllEdges=function(e){var t=e.slice();return mxUtils.removeDuplicates(t.concat(this.getAllEdges(e)))},mxGraph.prototype.getAllEdges=function(e){var t=[];if(null!=e)for(var r=0;r<e.length;r++){for(var o=this.model.getEdgeCount(e[r]),a=0;a<o;a++)t.push(this.model.getEdgeAt(e[r],a));var u=this.model.getChildren(e[r]);t=t.concat(this.getAllEdges(u))}return t},mxGraph.prototype.updateCellSize=function(e,t){t=null!=t&&t,this.model.beginUpdate();try{this.cellSizeUpdated(e,t),this.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,"cell",e,"ignoreChildren",t))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellSizeUpdated=function(e,t){if(null!=e){this.model.beginUpdate();try{var r=this.getPreferredSizeForCell(e),o=this.model.getGeometry(e);if(null!=r&&null!=o){var a=this.isCellCollapsed(e);if(o=o.clone(),this.isSwimlane(e)){var u=this.getCellStyle(e),c=this.model.getStyle(e);null==c&&(c=""),mxUtils.getValue(u,mxConstants.STYLE_HORIZONTAL,!0)?(c=mxUtils.setStyle(c,mxConstants.STYLE_STARTSIZE,r.height+8),a&&(o.height=r.height+8),o.width=r.width):(c=mxUtils.setStyle(c,mxConstants.STYLE_STARTSIZE,r.width+8),a&&(o.width=r.width+8),o.height=r.height),this.model.setStyle(e,c)}else{var f=this.view.createState(e),m=f.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER;m==mxConstants.ALIGN_RIGHT?o.x+=o.width-r.width:m==mxConstants.ALIGN_CENTER&&(o.x+=Math.round((o.width-r.width)/2));var x=this.getVerticalAlign(f);x==mxConstants.ALIGN_BOTTOM?o.y+=o.height-r.height:x==mxConstants.ALIGN_MIDDLE&&(o.y+=Math.round((o.height-r.height)/2)),o.width=r.width,o.height=r.height}if(!t&&!a){var v=this.view.getBounds(this.model.getChildren(e));if(null!=v){var E=this.view.translate,S=this.view.scale,_=(v.y+v.height)/S-o.y-E.y;o.width=Math.max(o.width,(v.x+v.width)/S-o.x-E.x),o.height=Math.max(o.height,_)}}this.cellsResized([e],[o],!1)}}finally{this.model.endUpdate()}}},mxGraph.prototype.getPreferredSizeForCell=function(e,t){var r=null;if(null!=e){var o=this.view.createState(e),a=o.style;if(!this.model.isEdge(e)){var u=a[mxConstants.STYLE_FONTSIZE]||mxConstants.DEFAULT_FONTSIZE,c=0,f=0;(null!=this.getImage(o)||null!=a[mxConstants.STYLE_IMAGE])&&a[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_LABEL&&(a[mxConstants.STYLE_VERTICAL_ALIGN]==mxConstants.ALIGN_MIDDLE&&(c+=parseFloat(a[mxConstants.STYLE_IMAGE_WIDTH])||mxLabel.prototype.imageSize),a[mxConstants.STYLE_ALIGN]!=mxConstants.ALIGN_CENTER&&(f+=parseFloat(a[mxConstants.STYLE_IMAGE_HEIGHT])||mxLabel.prototype.imageSize)),c+=2*(a[mxConstants.STYLE_SPACING]||0),c+=a[mxConstants.STYLE_SPACING_LEFT]||0,c+=a[mxConstants.STYLE_SPACING_RIGHT]||0,f+=2*(a[mxConstants.STYLE_SPACING]||0),f+=a[mxConstants.STYLE_SPACING_TOP]||0,f+=a[mxConstants.STYLE_SPACING_BOTTOM]||0;var m=this.getFoldingImage(o);null!=m&&(c+=m.width+8);var x=this.cellRenderer.getLabelValue(o);if(null!=x&&x.length>0){this.isHtmlLabel(o.cell)||(x=mxUtils.htmlEntities(x,!1)),x=x.replace(/\n/g,"<br>");var v=mxUtils.getSizeForString(x,u,a[mxConstants.STYLE_FONTFAMILY],t,a[mxConstants.STYLE_FONTSTYLE]),E=v.width+c,S=v.height+f;if(!mxUtils.getValue(a,mxConstants.STYLE_HORIZONTAL,!0)){var b=S;S=E,E=b}this.gridEnabled&&(E=this.snap(E+this.gridSize/2),S=this.snap(S+this.gridSize/2)),r=new mxRectangle(0,0,E,S)}else{var _=4*this.gridSize;r=new mxRectangle(0,0,_,_)}}}return r},mxGraph.prototype.resizeCell=function(e,t,r){return this.resizeCells([e],[t],r)[0]},mxGraph.prototype.resizeCells=function(e,t,r){r=null!=r?r:this.isRecursiveResize(),this.model.beginUpdate();try{var o=this.cellsResized(e,t,r);this.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,"cells",e,"bounds",t,"previous",o))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsResized=function(e,t,r){r=null!=r&&r;var o=[];if(null!=e&&null!=t&&e.length==t.length){this.model.beginUpdate();try{for(var a=0;a<e.length;a++)o.push(this.cellResized(e[a],t[a],!1,r)),this.isExtendParent(e[a])&&this.extendParent(e[a]),this.constrainChild(e[a]);this.resetEdgesOnResize&&this.resetEdges(e),this.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,"cells",e,"bounds",t,"previous",o))}finally{this.model.endUpdate()}}return o},mxGraph.prototype.cellResized=function(e,t,r,o){var a=this.model.getGeometry(e);if(null!=a&&(a.x!=t.x||a.y!=t.y||a.width!=t.width||a.height!=t.height)){var u=a.clone();if(!r&&u.relative){var c=u.offset;null!=c&&(c.x+=t.x-u.x,c.y+=t.y-u.y)}else u.x=t.x,u.y=t.y;u.width=t.width,u.height=t.height,!u.relative&&this.model.isVertex(e)&&!this.isAllowNegativeCoordinates()&&(u.x=Math.max(0,u.x),u.y=Math.max(0,u.y)),this.model.beginUpdate();try{o&&this.resizeChildCells(e,u),this.model.setGeometry(e,u),this.constrainChildCells(e)}finally{this.model.endUpdate()}}return a},mxGraph.prototype.resizeChildCells=function(e,t){for(var r=this.model.getGeometry(e),o=0!=r.width?t.width/r.width:1,a=0!=r.height?t.height/r.height:1,u=this.model.getChildCount(e),c=0;c<u;c++)this.scaleCell(this.model.getChildAt(e,c),o,a,!0)},mxGraph.prototype.constrainChildCells=function(e){for(var t=this.model.getChildCount(e),r=0;r<t;r++)this.constrainChild(this.model.getChildAt(e,r))},mxGraph.prototype.scaleCell=function(e,t,r,o){var a=this.model.getGeometry(e);if(null!=a){var u=this.getCurrentCellStyle(e),c=(a=a.clone()).x,f=a.y,m=a.width,x=a.height;a.scale(t,r,"fixed"==u[mxConstants.STYLE_ASPECT]),"1"==u[mxConstants.STYLE_RESIZE_WIDTH]?a.width=m*t:"0"==u[mxConstants.STYLE_RESIZE_WIDTH]&&(a.width=m),"1"==u[mxConstants.STYLE_RESIZE_HEIGHT]?a.height=x*r:"0"==u[mxConstants.STYLE_RESIZE_HEIGHT]&&(a.height=x),this.isCellMovable(e)||(a.x=c,a.y=f),this.isCellResizable(e)||(a.width=m,a.height=x),this.model.isVertex(e)?this.cellResized(e,a,!0,o):this.model.setGeometry(e,a)}},mxGraph.prototype.extendParent=function(e){if(null!=e){var t=this.model.getParent(e),r=this.getCellGeometry(t);if(null!=t&&null!=r&&!this.isCellCollapsed(t)){var o=this.getCellGeometry(e);null!=o&&!o.relative&&(r.width<o.x+o.width||r.height<o.y+o.height)&&((r=r.clone()).width=Math.max(r.width,o.x+o.width),r.height=Math.max(r.height,o.y+o.height),this.cellsResized([t],[r],!1))}}},mxGraph.prototype.importCells=function(e,t,r,o,a,u){return this.moveCells(e,t,r,!0,o,a,u)},mxGraph.prototype.moveCells=function(e,t,r,o,a,u,c){if(t=null!=t?t:0,r=null!=r?r:0,o=null!=o&&o,null!=e&&(0!=t||0!=r||o||null!=a)){var f=e=this.model.getTopmostCells(e);this.model.beginUpdate();try{for(var m=new mxDictionary,x=0;x<e.length;x++)m.put(e[x],!0);var v=mxUtils.bind(this,function(M){for(;null!=M;){if(m.get(M))return!0;M=this.model.getParent(M)}return!1}),E=[];for(x=0;x<e.length;x++){var S=this.getCellGeometry(e[x]),b=this.model.getParent(e[x]);(null==S||!S.relative||!this.model.isEdge(b)||!v(this.model.getTerminal(b,!0))&&!v(this.model.getTerminal(b,!1)))&&E.push(e[x])}e=E,o&&(e=this.cloneCells(e,this.isCloneInvalidEdges(),c),null==a&&(a=this.getDefaultParent()));var _=this.isAllowNegativeCoordinates();if(null!=a&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(e,t,r,!o&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),null==a,this.isExtendParentsOnMove()&&null==a),this.setAllowNegativeCoordinates(_),null!=a){var D=this.model.getChildCount(a);if(this.cellsAdded(e,a,D,null,null,!0),o)for(x=0;x<e.length;x++)S=this.getCellGeometry(e[x]),b=this.model.getParent(f[x]),null!=S&&S.relative&&this.model.isEdge(b)&&this.model.contains(b)&&this.model.add(b,e[x])}this.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",e,"dx",t,"dy",r,"clone",o,"target",a,"event",u))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.cellsMoved=function(e,t,r,o,a,u){if(null!=e&&(0!=t||0!=r)){u=null!=u&&u,this.model.beginUpdate();try{o&&this.disconnectGraph(e);for(var c=0;c<e.length;c++)this.translateCell(e[c],t,r),u&&this.isExtendParent(e[c])?this.extendParent(e[c]):a&&this.constrainChild(e[c]);this.resetEdgesOnMove&&this.resetEdges(e),this.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,"cells",e,"dx",t,"dy",r,"disconnect",o))}finally{this.model.endUpdate()}}},mxGraph.prototype.translateCell=function(e,t,r){var o=this.model.getGeometry(e);if(null!=o){if(t=parseFloat(t),r=parseFloat(r),(o=o.clone()).translate(t,r),!o.relative&&this.model.isVertex(e)&&!this.isAllowNegativeCoordinates()&&(o.x=Math.max(0,parseFloat(o.x)),o.y=Math.max(0,parseFloat(o.y))),o.relative&&!this.model.isEdge(e)){var a=this.model.getParent(e),u=0;if(this.model.isVertex(a)){var c=this.getCurrentCellStyle(a);u=mxUtils.getValue(c,mxConstants.STYLE_ROTATION,0)}if(0!=u){var f=mxUtils.toRadians(-u),m=Math.cos(f),x=Math.sin(f),v=mxUtils.getRotatedPoint(new mxPoint(t,r),m,x,new mxPoint(0,0));t=v.x,r=v.y}null==o.offset?o.offset=new mxPoint(t,r):(o.offset.x=parseFloat(o.offset.x)+t,o.offset.y=parseFloat(o.offset.y)+r)}this.model.setGeometry(e,o)}},mxGraph.prototype.getCellContainmentArea=function(e){if(null!=e&&!this.model.isEdge(e)){var t=this.model.getParent(e);if(null!=t&&t!=this.getDefaultParent()){var r=this.model.getGeometry(t);if(null!=r){var o=0,a=0,u=r.width,c=r.height;if(this.isSwimlane(t)){var f=this.getStartSize(t),m=this.getCurrentCellStyle(t),x=mxUtils.getValue(m,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),v=1==mxUtils.getValue(m,mxConstants.STYLE_FLIPH,0),E=1==mxUtils.getValue(m,mxConstants.STYLE_FLIPV,0);if(x==mxConstants.DIRECTION_SOUTH||x==mxConstants.DIRECTION_NORTH){var S=f.width;f.width=f.height,f.height=S}(x==mxConstants.DIRECTION_EAST&&!E||x==mxConstants.DIRECTION_NORTH&&!v||x==mxConstants.DIRECTION_WEST&&E||x==mxConstants.DIRECTION_SOUTH&&v)&&(o=f.width,a=f.height),u-=f.width,c-=f.height}return new mxRectangle(o,a,u,c)}}}return null},mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds},mxGraph.prototype.constrainChild=function(e,t){if(t=null==t||t,null!=e){var r=this.getCellGeometry(e);if(null!=r&&(this.isConstrainRelativeChildren()||!r.relative)){var o=this.model.getParent(e),u=(this.getCellGeometry(o),this.getMaximumGraphBounds());if(null!=u){var c=this.getBoundingBoxFromGeometry([o],!1);null!=c&&((u=mxRectangle.fromRectangle(u)).x-=c.x,u.y-=c.y)}if(this.isConstrainChild(e)){var f=this.getCellContainmentArea(e);if(null!=f){var m=this.getOverlap(e);m>0&&((f=mxRectangle.fromRectangle(f)).x-=f.width*m,f.y-=f.height*m,f.width+=2*f.width*m,f.height+=2*f.height*m),null==u?u=f:(u=mxRectangle.fromRectangle(u)).intersect(f)}}if(null!=u){var x=[e];if(!this.isCellCollapsed(e))for(var v=this.model.getDescendants(e),E=0;E<v.length;E++)this.isCellVisible(v[E])&&x.push(v[E]);var S=this.getBoundingBoxFromGeometry(x,!1);if(null!=S){var b=0;(r=r.clone()).width>u.width&&(r.width-=b=r.width-u.width),S.x+S.width>u.x+u.width&&(b-=S.x+S.width-u.x-u.width-b);var _=0;r.height>u.height&&(r.height-=_=r.height-u.height),S.y+S.height>u.y+u.height&&(_-=S.y+S.height-u.y-u.height-_),S.x<u.x&&(b-=S.x-u.x),S.y<u.y&&(_-=S.y-u.y),(0!=b||0!=_)&&(r.relative?(null==r.offset&&(r.offset=new mxPoint),r.offset.x+=b,r.offset.y+=_):(r.x+=b,r.y+=_)),this.model.setGeometry(e,r)}}}}},mxGraph.prototype.resetEdges=function(e){if(null!=e){for(var t=new mxDictionary,r=0;r<e.length;r++)t.put(e[r],!0);this.model.beginUpdate();try{for(r=0;r<e.length;r++){var o=this.model.getEdges(e[r]);if(null!=o)for(var a=0;a<o.length;a++){var u=this.view.getState(o[a]),c=null!=u?u.getVisibleTerminal(!0):this.view.getVisibleTerminal(o[a],!0),f=null!=u?u.getVisibleTerminal(!1):this.view.getVisibleTerminal(o[a],!1);(!t.get(c)||!t.get(f))&&this.resetEdge(o[a])}this.resetEdges(this.model.getChildren(e[r]))}}finally{this.model.endUpdate()}}},mxGraph.prototype.resetEdge=function(e){var t=this.model.getGeometry(e);return null!=t&&null!=t.points&&t.points.length>0&&((t=t.clone()).points=[],this.model.setGeometry(e,t)),e},mxGraph.prototype.getOutlineConstraint=function(e,t,r){if(null!=t.shape){var o=this.view.getPerimeterBounds(t),a=t.style[mxConstants.STYLE_DIRECTION];if(a==mxConstants.DIRECTION_NORTH||a==mxConstants.DIRECTION_SOUTH){o.x+=o.width/2-o.height/2,o.y+=o.height/2-o.width/2;var u=o.width;o.width=o.height,o.height=u}var c=mxUtils.toRadians(t.shape.getShapeRotation());if(0!=c){var f=Math.cos(-c),m=Math.sin(-c),x=new mxPoint(o.getCenterX(),o.getCenterY());e=mxUtils.getRotatedPoint(e,f,m,x)}var v=1,E=1,S=0,b=0;if(this.getModel().isVertex(t.cell)){var _=t.style[mxConstants.STYLE_FLIPH],D=t.style[mxConstants.STYLE_FLIPV];null!=t.shape&&null!=t.shape.stencil&&(_=1==mxUtils.getValue(t.style,"stencilFlipH",0)||_,D=1==mxUtils.getValue(t.style,"stencilFlipV",0)||D),(a==mxConstants.DIRECTION_NORTH||a==mxConstants.DIRECTION_SOUTH)&&(u=_,_=D,D=u),_&&(v=-1,S=-o.width),D&&(E=-1,b=-o.height)}return e=new mxPoint((e.x-o.x)*v-S+o.x,(e.y-o.y)*E-b+o.y),new mxConnectionConstraint(new mxPoint(0==o.width?0:Math.round(1e3*(e.x-o.x)/o.width)/1e3,0==o.height?0:Math.round(1e3*(e.y-o.y)/o.height)/1e3),!1)}return null},mxGraph.prototype.getAllConnectionConstraints=function(e,t){return null!=e&&null!=e.shape&&null!=e.shape.stencil?e.shape.stencil.constraints:null},mxGraph.prototype.getConnectionConstraint=function(e,t,r){var o=null,a=e.style[r?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X];if(null!=a){var u=e.style[r?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y];null!=u&&(o=new mxPoint(parseFloat(a),parseFloat(u)))}var c=!1,f=0,m=0;return null!=o&&(c=mxUtils.getValue(e.style,r?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,!0),f=parseFloat(e.style[r?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX]),m=parseFloat(e.style[r?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY]),f=isFinite(f)?f:0,m=isFinite(m)?m:0),new mxConnectionConstraint(o,c,null,f,m)},mxGraph.prototype.setConnectionConstraint=function(e,t,r,o){if(null!=o){this.model.beginUpdate();try{null==o||null==o.point?(this.setCellStyles(r?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,null,[e]),this.setCellStyles(r?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,null,[e]),this.setCellStyles(r?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,null,[e]),this.setCellStyles(r?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,null,[e]),this.setCellStyles(r?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[e])):null!=o.point&&(this.setCellStyles(r?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,o.point.x,[e]),this.setCellStyles(r?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,o.point.y,[e]),this.setCellStyles(r?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,o.dx,[e]),this.setCellStyles(r?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,o.dy,[e]),this.setCellStyles(r?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,o.perimeter?null:"0",[e]))}finally{this.model.endUpdate()}}},mxGraph.prototype.getConnectionPoint=function(e,t,r){r=null==r||r;var o=null;if(null!=e&&null!=t.point){var a=this.view.getPerimeterBounds(e),u=new mxPoint(a.getCenterX(),a.getCenterY()),c=e.style[mxConstants.STYLE_DIRECTION],f=0;null!=c&&1==mxUtils.getValue(e.style,mxConstants.STYLE_ANCHOR_POINT_DIRECTION,1)&&(c==mxConstants.DIRECTION_NORTH?f+=270:c==mxConstants.DIRECTION_WEST?f+=180:c==mxConstants.DIRECTION_SOUTH&&(f+=90),(c==mxConstants.DIRECTION_NORTH||c==mxConstants.DIRECTION_SOUTH)&&a.rotate90());var m=this.view.scale;o=new mxPoint(a.x+t.point.x*a.width+t.dx*m,a.y+t.point.y*a.height+t.dy*m);var x=e.style[mxConstants.STYLE_ROTATION]||0;if(t.perimeter){if(0!=f){var v=0,E=0;90==f?E=1:180==f?v=-1:270==f&&(E=-1),o=mxUtils.getRotatedPoint(o,v,E,u)}o=this.view.getPerimeterPoint(e,o,!1)}else if(x+=f,this.getModel().isVertex(e.cell)){var S=1==e.style[mxConstants.STYLE_FLIPH],b=1==e.style[mxConstants.STYLE_FLIPV];if(null!=e.shape&&null!=e.shape.stencil&&(S=1==mxUtils.getValue(e.style,"stencilFlipH",0)||S,b=1==mxUtils.getValue(e.style,"stencilFlipV",0)||b),c==mxConstants.DIRECTION_NORTH||c==mxConstants.DIRECTION_SOUTH){var _=S;S=b,b=_}S&&(o.x=2*a.getCenterX()-o.x),b&&(o.y=2*a.getCenterY()-o.y)}if(0!=x&&null!=o){var D=mxUtils.toRadians(x);v=Math.cos(D),E=Math.sin(D),o=mxUtils.getRotatedPoint(o,v,E,u)}}return r&&null!=o&&(o.x=Math.round(o.x),o.y=Math.round(o.y)),o},mxGraph.prototype.connectCell=function(e,t,r,o){this.model.beginUpdate();try{var a=this.model.getTerminal(e,r);this.cellConnected(e,t,r,o),this.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,"edge",e,"terminal",t,"source",r,"previous",a))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellConnected=function(e,t,r,o){if(null!=e){this.model.beginUpdate();try{var a=this.model.getTerminal(e,r);if(this.setConnectionConstraint(e,t,r,o),this.isPortsEnabled()){var u=null;this.isPort(t)&&(u=t.getId(),t=this.getTerminalForPort(t,r)),this.setCellStyles(r?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,u,[e])}this.model.setTerminal(e,t,r),this.resetEdgesOnConnect&&this.resetEdge(e),this.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,"edge",e,"terminal",t,"source",r,"previous",a))}finally{this.model.endUpdate()}}},mxGraph.prototype.disconnectGraph=function(e){if(null!=e){this.model.beginUpdate();try{for(var t=this.view.scale,r=this.view.translate,o=new mxDictionary,a=0;a<e.length;a++)o.put(e[a],!0);for(a=0;a<e.length;a++)if(this.model.isEdge(e[a])){var u=this.model.getGeometry(e[a]);if(null!=u){var c=this.view.getState(e[a]),f=this.view.getState(this.model.getParent(e[a]));if(null!=c&&null!=f){u=u.clone();var m=-f.origin.x,x=-f.origin.y,v=c.absolutePoints,E=this.model.getTerminal(e[a],!0);if(null!=E&&this.isCellDisconnectable(e[a],E,!0)){for(;null!=E&&!o.get(E);)E=this.model.getParent(E);null==E&&(u.setTerminalPoint(new mxPoint(v[0].x/t-r.x+m,v[0].y/t-r.y+x),!0),this.model.setTerminal(e[a],null,!0))}var S=this.model.getTerminal(e[a],!1);if(null!=S&&this.isCellDisconnectable(e[a],S,!1)){for(;null!=S&&!o.get(S);)S=this.model.getParent(S);if(null==S){var b=v.length-1;u.setTerminalPoint(new mxPoint(v[b].x/t-r.x+m,v[b].y/t-r.y+x),!1),this.model.setTerminal(e[a],null,!1)}}this.model.setGeometry(e[a],u)}}}}finally{this.model.endUpdate()}}},mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot},mxGraph.prototype.getTranslateForRoot=function(e){return null},mxGraph.prototype.isPort=function(e){return!1},mxGraph.prototype.getTerminalForPort=function(e,t){return this.model.getParent(e)},mxGraph.prototype.getChildOffsetForCell=function(e){return null},mxGraph.prototype.enterGroup=function(e){null!=(e=e||this.getSelectionCell())&&this.isValidRoot(e)&&(this.view.setCurrentRoot(e),this.clearSelection())},mxGraph.prototype.exitGroup=function(){var e=this.model.getRoot(),t=this.getCurrentRoot();if(null!=t){for(var r=this.model.getParent(t);r!=e&&!this.isValidRoot(r)&&this.model.getParent(r)!=e;)r=this.model.getParent(r);r==e||this.model.getParent(r)==e?this.view.setCurrentRoot(null):this.view.setCurrentRoot(r),null!=this.view.getState(t)&&this.setSelectionCell(t)}},mxGraph.prototype.home=function(){var e=this.getCurrentRoot();null!=e&&(this.view.setCurrentRoot(null),null!=this.view.getState(e)&&this.setSelectionCell(e))},mxGraph.prototype.isValidRoot=function(e){return null!=e},mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()},mxGraph.prototype.getCellBounds=function(e,t,r){var o=[e];t&&(o=o.concat(this.model.getEdges(e)));var a=this.view.getBounds(o);if(r)for(var u=this.model.getChildCount(e),c=0;c<u;c++){var f=this.getCellBounds(this.model.getChildAt(e,c),t,!0);null!=a?a.add(f):a=f}return a},mxGraph.prototype.getBoundingBoxFromGeometry=function(e,t){t=null!=t&&t;var r=null;if(null!=e)for(var o=0;o<e.length;o++)if(t||this.model.isVertex(e[o])){var a=this.getCellGeometry(e[o]);if(null!=a){var u=null;if(this.model.isEdge(e[o])){var c=function(b){null!=b&&(null==m?m=new mxRectangle(b.x,b.y,0,0):m.add(new mxRectangle(b.x,b.y,0,0)))};null==this.model.getTerminal(e[o],!0)&&c(a.getTerminalPoint(!0)),null==this.model.getTerminal(e[o],!1)&&c(a.getTerminalPoint(!1));var f=a.points;if(null!=f&&f.length>0)for(var m=new mxRectangle(f[0].x,f[0].y,0,0),x=1;x<f.length;x++)c(f[x]);u=m}else{var v=this.model.getParent(e[o]);a.relative?this.model.isVertex(v)&&v!=this.view.currentRoot&&null!=(m=this.getBoundingBoxFromGeometry([v],!1))&&(u=new mxRectangle(a.x*m.width,a.y*m.height,a.width,a.height),mxUtils.indexOf(e,v)>=0&&(u.x+=m.x,u.y+=m.y)):(u=mxRectangle.fromRectangle(a),this.model.isVertex(v)&&mxUtils.indexOf(e,v)>=0&&null!=(m=this.getBoundingBoxFromGeometry([v],!1))&&(u.x+=m.x,u.y+=m.y)),null!=u&&null!=a.offset&&(u.x+=a.offset.x,u.y+=a.offset.y);var E=this.getCurrentCellStyle(e[o]);if(null!=u){var S=mxUtils.getValue(E,mxConstants.STYLE_ROTATION,0);0!=S&&(u=mxUtils.getBoundingBox(u,S))}}null!=u&&(null==r?r=mxRectangle.fromRectangle(u):r.add(u))}}return r},mxGraph.prototype.refresh=function(e){this.view.clear(e,null==e),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject(mxEvent.REFRESH))},mxGraph.prototype.snap=function(e){return this.gridEnabled&&(e=Math.round(e/this.gridSize)*this.gridSize),e},mxGraph.prototype.snapDelta=function(e,t,r,o,a){var u=this.view.translate,c=this.view.scale;if(!r&&this.gridEnabled){var f=this.gridSize*c*.5;if(!o){var m=t.x-(this.snap(t.x/c-u.x)+u.x)*c;e.x=Math.abs(e.x-m)<f?0:this.snap(e.x/c)*c-m}if(!a){var x=t.y-(this.snap(t.y/c-u.y)+u.y)*c;e.y=Math.abs(e.y-x)<f?0:this.snap(e.y/c)*c-x}}else f=.5*c,o||(m=t.x-(Math.round(t.x/c-u.x)+u.x)*c,e.x=Math.abs(e.x-m)<f?0:Math.round(e.x/c)*c-m),a||(x=t.y-(Math.round(t.y/c-u.y)+u.y)*c,e.y=Math.abs(e.y-x)<f?0:Math.round(e.y/c)*c-x);return e},mxGraph.prototype.panGraph=function(e,t){if(this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container))this.container.scrollLeft=-e,this.container.scrollTop=-t;else{var r=this.view.getCanvas();if(this.dialect==mxConstants.DIALECT_SVG)if(0==e&&0==t){if(mxClient.IS_IE?r.setAttribute("transform","translate("+e+","+t+")"):r.removeAttribute("transform"),null!=this.shiftPreview1){for(var o=this.shiftPreview1.firstChild;null!=o;){var a=o.nextSibling;this.container.appendChild(o),o=a}for(null!=this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(r.parentNode),o=this.shiftPreview2.firstChild;null!=o;)a=o.nextSibling,this.container.appendChild(o),o=a;null!=this.shiftPreview2.parentNode&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(r.setAttribute("transform","translate("+e+","+t+")"),null==this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";var u=this.shiftPreview1;for(o=this.container.firstChild;null!=o;)a=o.nextSibling,o!=r.parentNode?u.appendChild(o):u=this.shiftPreview2,o=a;null!=this.shiftPreview1.firstChild&&this.container.insertBefore(this.shiftPreview1,r.parentNode),null!=this.shiftPreview2.firstChild&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=e+"px",this.shiftPreview1.style.top=t+"px",this.shiftPreview2.style.left=e+"px",this.shiftPreview2.style.top=t+"px"}else r.style.left=e+"px",r.style.top=t+"px";this.panDx=e,this.panDy=t,this.fireEvent(new mxEventObject(mxEvent.PAN))}},mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)},mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)},mxGraph.prototype.zoomActual=function(){1==this.view.scale?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))},mxGraph.prototype.zoomTo=function(e,t){this.zoom(e/this.view.scale,t)},mxGraph.prototype.center=function(e,t,r,o){e=null==e||e,t=null==t||t,r=null!=r?r:.5,o=null!=o?o:.5;var a=mxUtils.hasScrollbars(this.container),u=2*this.getBorder(),c=this.container.clientWidth-u,f=this.container.clientHeight-u,m=this.getGraphBounds(),x=this.view.translate,v=this.view.scale,E=e?c-m.width:0,S=t?f-m.height:0;if(a){m.x-=x.x,m.y-=x.y;var b=this.container.scrollWidth,_=this.container.scrollHeight;b>c&&(E=0),_>f&&(S=0),this.view.setTranslate(Math.floor(E/2-m.x),Math.floor(S/2-m.y)),this.container.scrollLeft=(b-c)/2,this.container.scrollTop=(_-f)/2}else this.view.setTranslate(e?Math.floor(x.x-m.x*v+E*r/v):x.x,t?Math.floor(x.y-m.y*v+S*o/v):x.y)},mxGraph.prototype.zoom=function(e,t){t=null!=t?t:this.centerZoom;var r=Math.round(this.view.scale*e*100)/100,o=this.view.getState(this.getSelectionCell());if(e=r/this.view.scale,this.keepSelectionVisibleOnZoom&&null!=o){var a=new mxRectangle(o.x*e,o.y*e,o.width*e,o.height*e);this.view.scale=r,this.scrollRectToVisible(a)||(this.view.revalidate(),this.view.setScale(r))}else{var u=mxUtils.hasScrollbars(this.container);if(t&&!u){var m,c=this.container.offsetWidth,f=this.container.offsetHeight;e>1?(c*=-(m=(e-1)/(2*r)),f*=-m):(c*=m=(1/e-1)/(2*this.view.scale),f*=m),this.view.scaleAndTranslate(r,this.view.translate.x+c,this.view.translate.y+f)}else{var x=this.view.translate.x,v=this.view.translate.y,E=this.container.scrollLeft,S=this.container.scrollTop;this.view.setScale(r),u&&(c=0,f=0,t&&(c=this.container.offsetWidth*(e-1)/2,f=this.container.offsetHeight*(e-1)/2),this.container.scrollLeft=(this.view.translate.x-x)*this.view.scale+Math.round(E*e+c),this.container.scrollTop=(this.view.translate.y-v)*this.view.scale+Math.round(S*e+f))}}},mxGraph.prototype.zoomToRect=function(e){var o=this.container.clientWidth/e.width/(this.container.clientHeight/e.height);e.x=Math.max(0,e.x),e.y=Math.max(0,e.y);var a=Math.min(this.container.scrollWidth,e.x+e.width),u=Math.min(this.container.scrollHeight,e.y+e.height);if(e.width=a-e.x,e.height=u-e.y,o<1){var c=e.height/o,f=(c-e.height)/2;e.height=c;var m=Math.min(e.y,f);e.y=e.y-m,u=Math.min(this.container.scrollHeight,e.y+e.height),e.height=u-e.y}else{var x=e.width*o,v=(x-e.width)/2;e.width=x;var E=Math.min(e.x,v);e.x=e.x-E,a=Math.min(this.container.scrollWidth,e.x+e.width),e.width=a-e.x}var S=this.container.clientWidth/e.width,b=this.view.scale*S;mxUtils.hasScrollbars(this.container)?(this.view.setScale(b),this.container.scrollLeft=Math.round(e.x*S),this.container.scrollTop=Math.round(e.y*S)):this.view.scaleAndTranslate(b,this.view.translate.x-e.x/this.view.scale,this.view.translate.y-e.y/this.view.scale)},mxGraph.prototype.scrollCellToVisible=function(e,t){var r=-this.view.translate.x,o=-this.view.translate.y,a=this.view.getState(e);if(null!=a){var u=new mxRectangle(r+a.x,o+a.y,a.width,a.height);if(t&&null!=this.container){var c=this.container.clientWidth,f=this.container.clientHeight;u.x=u.getCenterX()-c/2,u.width=c,u.y=u.getCenterY()-f/2,u.height=f}var m=new mxPoint(this.view.translate.x,this.view.translate.y);if(this.scrollRectToVisible(u)){var x=new mxPoint(this.view.translate.x,this.view.translate.y);this.view.translate.x=m.x,this.view.translate.y=m.y,this.view.setTranslate(x.x,x.y)}}},mxGraph.prototype.scrollRectToVisible=function(e){var t=!1;if(null!=e){var r=this.container.offsetWidth,o=this.container.offsetHeight,a=Math.min(r,e.width),u=Math.min(o,e.height);if(mxUtils.hasScrollbars(this.container)){var c=this.container;e.x+=this.view.translate.x,e.y+=this.view.translate.y;var f=c.scrollLeft-e.x,m=Math.max(f-c.scrollLeft,0);f>0?c.scrollLeft-=f+2:(f=e.x+a-c.scrollLeft-c.clientWidth)>0&&(c.scrollLeft+=f+2);var x=c.scrollTop-e.y,v=Math.max(0,x-c.scrollTop);x>0?c.scrollTop-=x+2:(x=e.y+u-c.scrollTop-c.clientHeight)>0&&(c.scrollTop+=x+2),!this.useScrollbarsForPanning&&(0!=m||0!=v)&&this.view.setTranslate(m,v)}else{var E=-this.view.translate.x,S=-this.view.translate.y,b=this.view.scale;e.x+a>E+r&&(this.view.translate.x-=(e.x+a-r-E)/b,t=!0),e.y+u>S+o&&(this.view.translate.y-=(e.y+u-o-S)/b,t=!0),e.x<E&&(this.view.translate.x+=(E-e.x)/b,t=!0),e.y<S&&(this.view.translate.y+=(S-e.y)/b,t=!0),t&&(this.view.refresh(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.refresh())}}return t},mxGraph.prototype.getCellGeometry=function(e){return this.model.getGeometry(e)},mxGraph.prototype.isCellVisible=function(e){return this.model.isVisible(e)},mxGraph.prototype.isCellCollapsed=function(e){return this.model.isCollapsed(e)},mxGraph.prototype.isCellConnectable=function(e){return this.model.isConnectable(e)},mxGraph.prototype.isOrthogonal=function(e){var t=e.style[mxConstants.STYLE_ORTHOGONAL];if(null!=t)return t;var r=this.view.getEdgeStyle(e);return r==mxEdgeStyle.SegmentConnector||r==mxEdgeStyle.ElbowConnector||r==mxEdgeStyle.SideToSide||r==mxEdgeStyle.TopToBottom||r==mxEdgeStyle.EntityRelation||r==mxEdgeStyle.OrthConnector},mxGraph.prototype.isLoop=function(e){var t=e.getVisibleTerminalState(!0),r=e.getVisibleTerminalState(!1);return null!=t&&t==r},mxGraph.prototype.isCloneEvent=function(e){return mxEvent.isControlDown(e)},mxGraph.prototype.isTransparentClickEvent=function(e){return!1},mxGraph.prototype.isToggleEvent=function(e){return mxClient.IS_MAC?mxEvent.isMetaDown(e):mxEvent.isControlDown(e)},mxGraph.prototype.isGridEnabledEvent=function(e){return null!=e&&!mxEvent.isAltDown(e)},mxGraph.prototype.isConstrainedEvent=function(e){return mxEvent.isShiftDown(e)},mxGraph.prototype.isIgnoreTerminalEvent=function(e){return!1},mxGraph.prototype.validationAlert=function(e){mxUtils.alert(e)},mxGraph.prototype.isEdgeValid=function(e,t,r){return null==this.getEdgeValidationError(e,t,r)},mxGraph.prototype.getEdgeValidationError=function(e,t,r){if(null!=e&&!this.isAllowDanglingEdges()&&(null==t||null==r))return"";if(null!=e&&null==this.model.getTerminal(e,!0)&&null==this.model.getTerminal(e,!1))return null;if(!this.allowLoops&&t==r&&null!=t||!this.isValidConnection(t,r))return"";if(null!=t&&null!=r){var o="";if(!this.multigraph){var a=this.model.getEdgesBetween(t,r,!0);(a.length>1||1==a.length&&a[0]!=e)&&(o+=(mxResources.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+"\n")}var u=this.model.getDirectedEdgeCount(t,!0,e),c=this.model.getDirectedEdgeCount(r,!1,e);if(null!=this.multiplicities)for(var f=0;f<this.multiplicities.length;f++){var m;null!=(m=this.multiplicities[f].check(this,e,t,r,u,c))&&(o+=m)}return null!=(m=this.validateEdge(e,t,r))&&(o+=m),o.length>0?o:null}return this.allowDanglingEdges?null:""},mxGraph.prototype.validateEdge=function(e,t,r){return null},mxGraph.prototype.validateGraph=function(e,t){e=null!=e?e:this.model.getRoot(),t=null!=t?t:new Object;for(var r=!0,o=this.model.getChildCount(e),a=0;a<o;a++){var u=this.model.getChildAt(e,a),c=t;this.isValidRoot(u)&&(c=new Object);var f=this.validateGraph(u,c);this.setCellWarning(u,null!=f?f.replace(/\n/g,"<br>"):null),r=r&&null==f}var m="";this.isCellCollapsed(e)&&!r&&(m+=(mxResources.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+"\n"),this.model.isEdge(e)?m+=this.getEdgeValidationError(e,this.model.getTerminal(e,!0),this.model.getTerminal(e,!1))||"":m+=this.getCellValidationError(e)||"";var x=this.validateCell(e,t);return null!=x&&(m+=x),null==this.model.getParent(e)&&this.view.validate(),m.length>0||!r?m:null},mxGraph.prototype.getCellValidationError=function(e){var t=this.model.getDirectedEdgeCount(e,!0),r=this.model.getDirectedEdgeCount(e,!1),o=this.model.getValue(e),a="";if(null!=this.multiplicities)for(var u=0;u<this.multiplicities.length;u++){var c=this.multiplicities[u];(c.source&&mxUtils.isNode(o,c.type,c.attr,c.value)&&(t>c.max||t<c.min)||!c.source&&mxUtils.isNode(o,c.type,c.attr,c.value)&&(r>c.max||r<c.min))&&(a+=c.countError+"\n")}return a.length>0?a:null},mxGraph.prototype.validateCell=function(e,t){return null},mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage},mxGraph.prototype.setBackgroundImage=function(e){this.backgroundImage=e},mxGraph.prototype.getFoldingImage=function(e){if(null!=e&&this.foldingEnabled&&!this.getModel().isEdge(e.cell)){var t=this.isCellCollapsed(e.cell);if(this.isCellFoldable(e.cell,!t))return t?this.collapsedImage:this.expandedImage}return null},mxGraph.prototype.convertValueToString=function(e){var t=this.model.getValue(e);if(null!=t){if(mxUtils.isNode(t))return t.nodeName;if("function"==typeof t.toString)return t.toString()}return""},mxGraph.prototype.getLabel=function(e){var t="";if(this.labelsVisible&&null!=e){var r=this.getCurrentCellStyle(e);mxUtils.getValue(r,mxConstants.STYLE_NOLABEL,!1)||(t=this.convertValueToString(e))}return t},mxGraph.prototype.isHtmlLabel=function(e){return this.isHtmlLabels()},mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels},mxGraph.prototype.setHtmlLabels=function(e){this.htmlLabels=e},mxGraph.prototype.isWrapping=function(e){return"wrap"==this.getCurrentCellStyle(e)[mxConstants.STYLE_WHITE_SPACE]},mxGraph.prototype.isLabelClipped=function(e){return"hidden"==this.getCurrentCellStyle(e)[mxConstants.STYLE_OVERFLOW]},mxGraph.prototype.getTooltip=function(e,t,r,o){var a=null;if(null!=e){if(null!=e.control&&(t==e.control.node||t.parentNode==e.control.node)&&(a=mxUtils.htmlEntities(mxResources.get(a=this.collapseExpandResource)||a).replace(/\\n/g,"<br>")),null==a&&null!=e.overlays&&e.overlays.visit(function(c,f){null==a&&(t==f.node||t.parentNode==f.node)&&(a=f.overlay.toString())}),null==a){var u=this.selectionCellsHandler.getHandler(e.cell);null!=u&&"function"==typeof u.getTooltipForNode&&(a=u.getTooltipForNode(t))}null==a&&(a=this.getTooltipForCell(e.cell))}return a},mxGraph.prototype.getTooltipForCell=function(e){return null!=e&&null!=e.getTooltip?e.getTooltip():this.convertValueToString(e)},mxGraph.prototype.getLinkForCell=function(e){return null},mxGraph.prototype.getCursorForMouseEvent=function(e){return this.getCursorForCell(e.getCell())},mxGraph.prototype.getCursorForCell=function(e){return null},mxGraph.prototype.getStartSize=function(e,t){var r=new mxRectangle,o=this.getCurrentCellStyle(e,t),a=parseInt(mxUtils.getValue(o,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));return mxUtils.getValue(o,mxConstants.STYLE_HORIZONTAL,!0)?r.height=a:r.width=a,r},mxGraph.prototype.getSwimlaneDirection=function(e){var t=mxUtils.getValue(e,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),r=1==mxUtils.getValue(e,mxConstants.STYLE_FLIPH,0),o=1==mxUtils.getValue(e,mxConstants.STYLE_FLIPV,0),u=mxUtils.getValue(e,mxConstants.STYLE_HORIZONTAL,!0)?0:3;t==mxConstants.DIRECTION_NORTH?u--:t==mxConstants.DIRECTION_WEST?u+=2:t==mxConstants.DIRECTION_SOUTH&&(u+=1);var c=mxUtils.mod(u,2);return r&&1==c&&(u+=2),o&&0==c&&(u+=2),[mxConstants.DIRECTION_NORTH,mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST][mxUtils.mod(u,4)]},mxGraph.prototype.getActualStartSize=function(e,t){var r=new mxRectangle;if(this.isSwimlane(e,t)){var o=this.getCurrentCellStyle(e,t),a=parseInt(mxUtils.getValue(o,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),u=this.getSwimlaneDirection(o);u==mxConstants.DIRECTION_NORTH?r.y=a:u==mxConstants.DIRECTION_WEST?r.x=a:u==mxConstants.DIRECTION_SOUTH?r.height=a:r.width=a}return r},mxGraph.prototype.getImage=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_IMAGE]:null},mxGraph.prototype.isTransparentState=function(e){var t=!1;if(null!=e){var r=mxUtils.getValue(e.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),o=mxUtils.getValue(e.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);t=r==mxConstants.NONE&&o==mxConstants.NONE&&null==this.getImage(e)}return t},mxGraph.prototype.getVerticalAlign=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_VERTICAL_ALIGN]||mxConstants.ALIGN_MIDDLE:null},mxGraph.prototype.getIndicatorColor=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_COLOR]:null},mxGraph.prototype.getIndicatorGradientColor=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR]:null},mxGraph.prototype.getIndicatorShape=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_SHAPE]:null},mxGraph.prototype.getIndicatorImage=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_IMAGE]:null},mxGraph.prototype.getBorder=function(){return this.border},mxGraph.prototype.setBorder=function(e){this.border=e},mxGraph.prototype.isSwimlane=function(e,t){return null!=e&&this.model.getParent(e)!=this.model.getRoot()&&!this.model.isEdge(e)&&this.getCurrentCellStyle(e,t)[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_SWIMLANE},mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer},mxGraph.prototype.setResizeContainer=function(e){this.resizeContainer=e},mxGraph.prototype.isEnabled=function(){return this.enabled},mxGraph.prototype.setEnabled=function(e){this.enabled=e},mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled},mxGraph.prototype.setEscapeEnabled=function(e){this.escapeEnabled=e},mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing},mxGraph.prototype.setInvokesStopCellEditing=function(e){this.invokesStopCellEditing=e},mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing},mxGraph.prototype.setEnterStopsCellEditing=function(e){this.enterStopsCellEditing=e},mxGraph.prototype.isCellLocked=function(e){var t=this.model.getGeometry(e);return this.isCellsLocked()||null!=t&&this.model.isVertex(e)&&t.relative},mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked},mxGraph.prototype.setCellsLocked=function(e){this.cellsLocked=e},mxGraph.prototype.getCloneableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.isCellCloneable(t)}))},mxGraph.prototype.isCellCloneable=function(e){var t=this.getCurrentCellStyle(e);return this.isCellsCloneable()&&0!=t[mxConstants.STYLE_CLONEABLE]},mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable},mxGraph.prototype.setCellsCloneable=function(e){this.cellsCloneable=e},mxGraph.prototype.getExportableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.canExportCell(t)}))},mxGraph.prototype.canExportCell=function(e){return this.exportEnabled},mxGraph.prototype.getImportableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.canImportCell(t)}))},mxGraph.prototype.canImportCell=function(e){return this.importEnabled},mxGraph.prototype.isCellSelectable=function(e){return this.isCellsSelectable()},mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable},mxGraph.prototype.setCellsSelectable=function(e){this.cellsSelectable=e},mxGraph.prototype.getDeletableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.isCellDeletable(t)}))},mxGraph.prototype.isCellDeletable=function(e){var t=this.getCurrentCellStyle(e);return this.isCellsDeletable()&&0!=t[mxConstants.STYLE_DELETABLE]},mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable},mxGraph.prototype.setCellsDeletable=function(e){this.cellsDeletable=e},mxGraph.prototype.isLabelMovable=function(e){return!this.isCellLocked(e)&&(this.model.isEdge(e)&&this.edgeLabelsMovable||this.model.isVertex(e)&&this.vertexLabelsMovable)},mxGraph.prototype.isCellRotatable=function(e){return 0!=this.getCurrentCellStyle(e)[mxConstants.STYLE_ROTATABLE]},mxGraph.prototype.getMovableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.isCellMovable(t)}))},mxGraph.prototype.isCellMovable=function(e){var t=this.getCurrentCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&0!=t[mxConstants.STYLE_MOVABLE]},mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable},mxGraph.prototype.setCellsMovable=function(e){this.cellsMovable=e},mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled},mxGraph.prototype.setGridEnabled=function(e){this.gridEnabled=e},mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled},mxGraph.prototype.setPortsEnabled=function(e){this.portsEnabled=e},mxGraph.prototype.getGridSize=function(){return this.gridSize},mxGraph.prototype.setGridSize=function(e){this.gridSize=e},mxGraph.prototype.getTolerance=function(){return this.tolerance},mxGraph.prototype.setTolerance=function(e){this.tolerance=e},mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable},mxGraph.prototype.setVertexLabelsMovable=function(e){this.vertexLabelsMovable=e},mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable},mxGraph.prototype.setEdgeLabelsMovable=function(e){this.edgeLabelsMovable=e},mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting},mxGraph.prototype.setSwimlaneNesting=function(e){this.swimlaneNesting=e},mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled},mxGraph.prototype.setSwimlaneSelectionEnabled=function(e){this.swimlaneSelectionEnabled=e},mxGraph.prototype.isMultigraph=function(){return this.multigraph},mxGraph.prototype.setMultigraph=function(e){this.multigraph=e},mxGraph.prototype.isAllowLoops=function(){return this.allowLoops},mxGraph.prototype.setAllowDanglingEdges=function(e){this.allowDanglingEdges=e},mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges},mxGraph.prototype.setConnectableEdges=function(e){this.connectableEdges=e},mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges},mxGraph.prototype.setCloneInvalidEdges=function(e){this.cloneInvalidEdges=e},mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges},mxGraph.prototype.setAllowLoops=function(e){this.allowLoops=e},mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove},mxGraph.prototype.setDisconnectOnMove=function(e){this.disconnectOnMove=e},mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled},mxGraph.prototype.setDropEnabled=function(e){this.dropEnabled=e},mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled},mxGraph.prototype.setSplitEnabled=function(e){this.splitEnabled=e},mxGraph.prototype.isCellResizable=function(e){var t=this.getCurrentCellStyle(e);return this.isCellsResizable()&&!this.isCellLocked(e)&&"0"!=mxUtils.getValue(t,mxConstants.STYLE_RESIZABLE,"1")},mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable},mxGraph.prototype.setCellsResizable=function(e){this.cellsResizable=e},mxGraph.prototype.isTerminalPointMovable=function(e,t){return!0},mxGraph.prototype.isCellBendable=function(e){var t=this.getCurrentCellStyle(e);return this.isCellsBendable()&&!this.isCellLocked(e)&&0!=t[mxConstants.STYLE_BENDABLE]},mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable},mxGraph.prototype.setCellsBendable=function(e){this.cellsBendable=e},mxGraph.prototype.isCellEditable=function(e){var t=this.getCurrentCellStyle(e);return this.isCellsEditable()&&!this.isCellLocked(e)&&0!=t[mxConstants.STYLE_EDITABLE]},mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable},mxGraph.prototype.setCellsEditable=function(e){this.cellsEditable=e},mxGraph.prototype.isCellDisconnectable=function(e,t,r){return this.isCellsDisconnectable()&&!this.isCellLocked(e)},mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable},mxGraph.prototype.setCellsDisconnectable=function(e){this.cellsDisconnectable=e},mxGraph.prototype.isValidSource=function(e){return null==e&&this.allowDanglingEdges||null!=e&&(!this.model.isEdge(e)||this.connectableEdges)&&this.isCellConnectable(e)},mxGraph.prototype.isValidTarget=function(e){return this.isValidSource(e)},mxGraph.prototype.isValidConnection=function(e,t){return this.isValidSource(e)&&this.isValidTarget(t)},mxGraph.prototype.setConnectable=function(e){this.connectionHandler.setEnabled(e)},mxGraph.prototype.isConnectable=function(){return this.connectionHandler.isEnabled()},mxGraph.prototype.setTooltips=function(e){this.tooltipHandler.setEnabled(e)},mxGraph.prototype.setPanning=function(e){this.panningHandler.panningEnabled=e},mxGraph.prototype.isEditing=function(e){if(null!=this.cellEditor){var t=this.cellEditor.getEditingCell();return null==e?null!=t:e==t}return!1},mxGraph.prototype.isAutoSizeCell=function(e){var t=this.getCurrentCellStyle(e);return this.isAutoSizeCells()||1==t[mxConstants.STYLE_AUTOSIZE]},mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells},mxGraph.prototype.setAutoSizeCells=function(e){this.autoSizeCells=e},mxGraph.prototype.isExtendParent=function(e){return!this.getModel().isEdge(e)&&this.isExtendParents()},mxGraph.prototype.isExtendParents=function(){return this.extendParents},mxGraph.prototype.setExtendParents=function(e){this.extendParents=e},mxGraph.prototype.isExtendParentsOnAdd=function(e){return this.extendParentsOnAdd},mxGraph.prototype.setExtendParentsOnAdd=function(e){this.extendParentsOnAdd=e},mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove},mxGraph.prototype.setExtendParentsOnMove=function(e){this.extendParentsOnMove=e},mxGraph.prototype.isRecursiveResize=function(e){return this.recursiveResize},mxGraph.prototype.setRecursiveResize=function(e){this.recursiveResize=e},mxGraph.prototype.isConstrainChild=function(e){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(e))},mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren},mxGraph.prototype.setConstrainChildren=function(e){this.constrainChildren=e},mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren},mxGraph.prototype.setConstrainRelativeChildren=function(e){this.constrainRelativeChildren=e},mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates},mxGraph.prototype.setAllowNegativeCoordinates=function(e){this.allowNegativeCoordinates=e},mxGraph.prototype.getOverlap=function(e){return this.isAllowOverlapParent(e)?this.defaultOverlap:0},mxGraph.prototype.isAllowOverlapParent=function(e){return!1},mxGraph.prototype.getFoldableCells=function(e,t){return this.model.filterCells(e,mxUtils.bind(this,function(r){return this.isCellFoldable(r,t)}))},mxGraph.prototype.isCellFoldable=function(e,t){var r=this.getCurrentCellStyle(e);return this.model.getChildCount(e)>0&&0!=r[mxConstants.STYLE_FOLDABLE]},mxGraph.prototype.isValidDropTarget=function(e,t,r){return null!=e&&(this.isSplitEnabled()&&this.isSplitTarget(e,t,r)||!this.model.isEdge(e)&&(this.isSwimlane(e)||this.model.getChildCount(e)>0&&!this.isCellCollapsed(e)))},mxGraph.prototype.isSplitTarget=function(e,t,r){if(this.model.isEdge(e)&&null!=t&&1==t.length&&this.isCellConnectable(t[0])&&null==this.getEdgeValidationError(e,this.model.getTerminal(e,!0),t[0])){var o=this.model.getTerminal(e,!0),a=this.model.getTerminal(e,!1);return!this.model.isAncestor(t[0],o)&&!this.model.isAncestor(t[0],a)}return!1},mxGraph.prototype.getDropTarget=function(e,t,r,o){if(!this.isSwimlaneNesting())for(var a=0;a<e.length;a++)if(this.isSwimlane(e[a]))return null;var u=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t));u.x-=this.panDx,u.y-=this.panDy;var c=this.getSwimlaneAt(u.x,u.y);if(null==r)r=c;else if(null!=c){for(var f=this.model.getParent(c);null!=f&&this.isSwimlane(f)&&f!=r;)f=this.model.getParent(f);f==r&&(r=c)}for(;null!=r&&!this.isValidDropTarget(r,e,t)&&!this.model.isLayer(r);)r=this.model.getParent(r);if(null==o||!o)for(var m=r;null!=m&&mxUtils.indexOf(e,m)<0;)m=this.model.getParent(m);return this.model.isLayer(r)||null!=m?null:r},mxGraph.prototype.getDefaultParent=function(){var e=this.getCurrentRoot();if(null==e&&null==(e=this.defaultParent)){var t=this.model.getRoot();e=this.model.getChildAt(t,0)}return e},mxGraph.prototype.setDefaultParent=function(e){this.defaultParent=e},mxGraph.prototype.getSwimlane=function(e){for(;null!=e&&!this.isSwimlane(e);)e=this.model.getParent(e);return e},mxGraph.prototype.getSwimlaneAt=function(e,t,r){if(null==r&&null==(r=this.getCurrentRoot())&&(r=this.model.getRoot()),null!=r)for(var o=this.model.getChildCount(r),a=0;a<o;a++){var u=this.model.getChildAt(r,a);if(null!=u){var c=this.getSwimlaneAt(e,t,u);if(null!=c)return c;if(this.isCellVisible(u)&&this.isSwimlane(u)){var f=this.view.getState(u);if(this.intersects(f,e,t))return u}}}return null},mxGraph.prototype.getCellAt=function(e,t,r,o,a,u){if(o=null==o||o,a=null==a||a,null==r&&null==(r=this.getCurrentRoot())&&(r=this.getModel().getRoot()),null!=r)for(var f=this.model.getChildCount(r)-1;f>=0;f--){var m=this.model.getChildAt(r,f),x=this.getCellAt(e,t,m,o,a,u);if(null!=x)return x;if(this.isCellVisible(m)&&(a&&this.model.isEdge(m)||o&&this.model.isVertex(m))){var v=this.view.getState(m);if(null!=v&&(null==u||!u(v,e,t))&&this.intersects(v,e,t))return m}}return null},mxGraph.prototype.intersects=function(e,t,r){if(null!=e){var o=e.absolutePoints;if(null!=o)for(var a=this.tolerance*this.tolerance,u=o[0],c=1;c<o.length;c++){var f=o[c];if(mxUtils.ptSegDistSq(u.x,u.y,f.x,f.y,t,r)<=a)return!0;u=f}else{var x=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0);if(0!=x){var v=Math.cos(-x),E=Math.sin(-x),S=new mxPoint(e.getCenterX(),e.getCenterY());t=(u=mxUtils.getRotatedPoint(new mxPoint(t,r),v,E,S)).x,r=u.y}if(mxUtils.contains(e,t,r))return!0}}return!1},mxGraph.prototype.hitsSwimlaneContent=function(e,t,r){var o=this.getView().getState(e),a=this.getStartSize(e);if(null!=o){var u=this.getView().getScale();if(t-=o.x,r-=o.y,a.width>0&&t>0&&t>a.width*u)return!0;if(a.height>0&&r>0&&r>a.height*u)return!0}return!1},mxGraph.prototype.getChildVertices=function(e){return this.getChildCells(e,!0,!1)},mxGraph.prototype.getChildEdges=function(e){return this.getChildCells(e,!1,!0)},mxGraph.prototype.getChildCells=function(e,t,r){e=null!=e?e:this.getDefaultParent();for(var o=this.model.getChildCells(e,t=null!=t&&t,r=null!=r&&r),a=[],u=0;u<o.length;u++)this.isCellVisible(o[u])&&a.push(o[u]);return a},mxGraph.prototype.getConnections=function(e,t){return this.getEdges(e,t,!0,!0,!1)},mxGraph.prototype.getIncomingEdges=function(e,t){return this.getEdges(e,t,!0,!1,!1)},mxGraph.prototype.getOutgoingEdges=function(e,t){return this.getEdges(e,t,!1,!0,!1)},mxGraph.prototype.getEdges=function(e,t,r,o,a,u){r=null==r||r,o=null==o||o,a=null==a||a,u=null!=u&&u;for(var c=[],f=this.isCellCollapsed(e),m=this.model.getChildCount(e),x=0;x<m;x++){var v=this.model.getChildAt(e,x);(f||!this.isCellVisible(v))&&(c=c.concat(this.model.getEdges(v,r,o)))}c=c.concat(this.model.getEdges(e,r,o));var E=[];for(x=0;x<c.length;x++){var S=this.view.getState(c[x]),b=null!=S?S.getVisibleTerminal(!0):this.view.getVisibleTerminal(c[x],!0),_=null!=S?S.getVisibleTerminal(!1):this.view.getVisibleTerminal(c[x],!1);(a&&b==_||b!=_&&(r&&_==e&&(null==t||this.isValidAncestor(b,t,u))||o&&b==e&&(null==t||this.isValidAncestor(_,t,u))))&&E.push(c[x])}return E},mxGraph.prototype.isValidAncestor=function(e,t,r){return r?this.model.isAncestor(t,e):this.model.getParent(e)==t},mxGraph.prototype.getOpposites=function(e,t,r,o){r=null==r||r,o=null==o||o;var a=[],u=new mxDictionary;if(null!=e)for(var c=0;c<e.length;c++){var f=this.view.getState(e[c]),m=null!=f?f.getVisibleTerminal(!0):this.view.getVisibleTerminal(e[c],!0),x=null!=f?f.getVisibleTerminal(!1):this.view.getVisibleTerminal(e[c],!1);m==t&&null!=x&&x!=t&&o?u.get(x)||(u.put(x,!0),a.push(x)):x==t&&null!=m&&m!=t&&r&&(u.get(m)||(u.put(m,!0),a.push(m)))}return a},mxGraph.prototype.getEdgesBetween=function(e,t,r){r=null!=r&&r;for(var o=this.getEdges(e),a=[],u=0;u<o.length;u++){var c=this.view.getState(o[u]),f=null!=c?c.getVisibleTerminal(!0):this.view.getVisibleTerminal(o[u],!0),m=null!=c?c.getVisibleTerminal(!1):this.view.getVisibleTerminal(o[u],!1);(f==e&&m==t||!r&&f==t&&m==e)&&a.push(o[u])}return a},mxGraph.prototype.getPointForEvent=function(e,t){var r=mxUtils.convertPoint(this.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),o=this.view.scale,a=this.view.translate,u=0!=t?this.gridSize/2:0;return r.x=this.snap(r.x/o-a.x-u),r.y=this.snap(r.y/o-a.y-u),r},mxGraph.prototype.getCells=function(e,t,r,o,a,u,c,f,m){if(u=null!=u?u:[],r>0||o>0||null!=c){var x=this.getModel(),v=e+r,E=t+o;if(null==a&&null==(a=this.getCurrentRoot())&&(a=x.getRoot()),null!=a)for(var S=x.getChildCount(a),b=0;b<S;b++){var _=x.getChildAt(a,b),D=this.view.getState(_);if(null!=D&&this.isCellVisible(_)&&(null==f||!f(D))){var M=mxUtils.getValue(D.style,mxConstants.STYLE_ROTATION)||0,R=D;0!=M&&(R=mxUtils.getBoundingBox(R,M));var N=null!=c&&x.isVertex(_)&&mxUtils.intersects(c,R)||null==c&&(x.isEdge(_)||x.isVertex(_))&&R.x>=e&&R.y+R.height<=E&&R.y>=t&&R.x+R.width<=v;N&&u.push(_),(!N||m)&&this.getCells(e,t,r,o,_,u,c,f,m)}}}return u},mxGraph.prototype.getCellsBeyond=function(e,t,r,o,a){var u=[];if((o||a)&&(null==r&&(r=this.getDefaultParent()),null!=r))for(var c=this.model.getChildCount(r),f=0;f<c;f++){var m=this.model.getChildAt(r,f),x=this.view.getState(m);this.isCellVisible(m)&&null!=x&&(!o||x.x>=e)&&(!a||x.y>=t)&&u.push(m)}return u},mxGraph.prototype.findTreeRoots=function(e,t,r){t=null!=t&&t,r=null!=r&&r;var o=[];if(null!=e){for(var a=this.getModel(),u=a.getChildCount(e),c=null,f=0,m=0;m<u;m++){var x=a.getChildAt(e,m);if(this.model.isVertex(x)&&this.isCellVisible(x)){for(var v=this.getConnections(x,t?e:null),E=0,S=0,b=0;b<v.length;b++)this.view.getVisibleTerminal(v[b],!0)==x?E++:S++;(r&&0==E&&S>0||!r&&0==S&&E>0)&&o.push(x);var D=r?S-E:E-S;D>f&&(f=D,c=x)}}0==o.length&&null!=c&&o.push(c)}return o},mxGraph.prototype.traverse=function(e,t,r,o,a,u){if(null!=r&&null!=e&&(t=null==t||t,u=null!=u&&u,!(a=a||new mxDictionary).get(e))){a.put(e,!0);var c=r(e,o);if(null==c||c){var f=this.model.getEdgeCount(e);if(f>0)for(var m=0;m<f;m++){var x=this.model.getEdgeAt(e,m),v=this.model.getTerminal(x,!0)==e;if(!t||!u==v){var E=this.model.getTerminal(x,!v);this.traverse(E,t,r,x,a,u)}}}}},mxGraph.prototype.isCellSelected=function(e){return this.getSelectionModel().isSelected(e)},mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()},mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()},mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length},mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]},mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()},mxGraph.prototype.setSelectionCell=function(e){this.getSelectionModel().setCell(e)},mxGraph.prototype.setSelectionCells=function(e){this.getSelectionModel().setCells(e)},mxGraph.prototype.addSelectionCell=function(e){this.getSelectionModel().addCell(e)},mxGraph.prototype.addSelectionCells=function(e){this.getSelectionModel().addCells(e)},mxGraph.prototype.removeSelectionCell=function(e){this.getSelectionModel().removeCell(e)},mxGraph.prototype.removeSelectionCells=function(e){this.getSelectionModel().removeCells(e)},mxGraph.prototype.selectRegion=function(e,t){var r=this.getCells(e.x,e.y,e.width,e.height);return this.selectCellsForEvent(r,t),r},mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)},mxGraph.prototype.selectPreviousCell=function(){this.selectCell()},mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)},mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)},mxGraph.prototype.selectCell=function(e,t,r){var o=this.selectionModel,a=o.cells.length>0?o.cells[0]:null;o.cells.length>1&&o.clear();var u=null!=a?this.model.getParent(a):this.getDefaultParent(),c=this.model.getChildCount(u);if(null==a&&c>0){var f=this.model.getChildAt(u,0);this.setSelectionCell(f)}else if(null!=a&&!t||null==this.view.getState(u)||null==this.model.getGeometry(u)){if(null!=a&&r)this.model.getChildCount(a)>0&&(f=this.model.getChildAt(a,0),this.setSelectionCell(f));else if(c>0){var x=u.getIndex(a);e?(x++,f=this.model.getChildAt(u,x%c),this.setSelectionCell(f)):(x--,f=this.model.getChildAt(u,x<0?c-1:x),this.setSelectionCell(f))}}else this.getCurrentRoot()!=u&&this.setSelectionCell(u)},mxGraph.prototype.selectAll=function(e,t){e=e||this.getDefaultParent();var r=t?this.model.filterDescendants(mxUtils.bind(this,function(o){return o!=e&&null!=this.view.getState(o)}),e):this.model.getChildren(e);null!=r&&this.setSelectionCells(r)},mxGraph.prototype.selectVertices=function(e,t){this.selectCells(!0,!1,e,t)},mxGraph.prototype.selectEdges=function(e){this.selectCells(!1,!0,e)},mxGraph.prototype.selectCells=function(e,t,r,o){r=r||this.getDefaultParent();var a=mxUtils.bind(this,function(c){return null!=this.view.getState(c)&&((o||0==this.model.getChildCount(c))&&this.model.isVertex(c)&&e&&!this.model.isEdge(this.model.getParent(c))||this.model.isEdge(c)&&t)}),u=this.model.filterDescendants(a,r);null!=u&&this.setSelectionCells(u)},mxGraph.prototype.selectCellForEvent=function(e,t){var r=this.isCellSelected(e);this.isToggleEvent(t)?r?this.removeSelectionCell(e):this.addSelectionCell(e):(!r||1!=this.getSelectionCount())&&this.setSelectionCell(e)},mxGraph.prototype.selectCellsForEvent=function(e,t){this.isToggleEvent(t)?this.addSelectionCells(e):this.setSelectionCells(e)},mxGraph.prototype.createHandler=function(e){var t=null;if(null!=e)if(this.model.isEdge(e.cell)){var r=e.getVisibleTerminalState(!0),o=e.getVisibleTerminalState(!1),a=this.getCellGeometry(e.cell),u=this.view.getEdgeStyle(e,null!=a?a.points:null,r,o);t=this.createEdgeHandler(e,u)}else t=this.createVertexHandler(e);return t},mxGraph.prototype.createVertexHandler=function(e){return new mxVertexHandler(e)},mxGraph.prototype.createEdgeHandler=function(e,t){return t==mxEdgeStyle.Loop||t==mxEdgeStyle.ElbowConnector||t==mxEdgeStyle.SideToSide||t==mxEdgeStyle.TopToBottom?this.createElbowEdgeHandler(e):t==mxEdgeStyle.SegmentConnector||t==mxEdgeStyle.OrthConnector?this.createEdgeSegmentHandler(e):new mxEdgeHandler(e)},mxGraph.prototype.createEdgeSegmentHandler=function(e){return new mxEdgeSegmentHandler(e)},mxGraph.prototype.createElbowEdgeHandler=function(e){return new mxElbowEdgeHandler(e)},mxGraph.prototype.addMouseListener=function(e){null==this.mouseListeners&&(this.mouseListeners=[]),this.mouseListeners.push(e)},mxGraph.prototype.removeMouseListener=function(e){if(null!=this.mouseListeners)for(var t=0;t<this.mouseListeners.length;t++)if(this.mouseListeners[t]==e){this.mouseListeners.splice(t,1);break}},mxGraph.prototype.updateMouseEvent=function(e,t){if(null==e.graphX||null==e.graphY){var r=mxUtils.convertPoint(this.container,e.getX(),e.getY());e.graphX=r.x-this.panDx,e.graphY=r.y-this.panDy,null==e.getCell()&&this.isMouseDown&&t==mxEvent.MOUSE_MOVE&&(e.state=this.view.getState(this.getCellAt(r.x,r.y,null,null,null,function(o){return null==o.shape||o.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||"1"==mxUtils.getValue(o.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=o.shape.fill&&o.shape.fill!=mxConstants.NONE})))}return e},mxGraph.prototype.getStateForTouchEvent=function(e){var t=mxEvent.getClientX(e),r=mxEvent.getClientY(e),o=mxUtils.convertPoint(this.container,t,r);return this.view.getState(this.getCellAt(o.x,o.y))},mxGraph.prototype.isEventIgnored=function(e,t,r){var o=mxEvent.isMouseEvent(t.getEvent()),a=!1;return t.getEvent()==this.lastEvent?a=!0:this.lastEvent=t.getEvent(),null!=this.eventSource&&e!=mxEvent.MOUSE_MOVE?(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.eventSource=null):mxClient.IS_GC||null==this.eventSource||t.getSource()==this.eventSource?mxClient.IS_TOUCH&&e==mxEvent.MOUSE_DOWN&&!o&&!mxEvent.isPenEvent(t.getEvent())&&(this.eventSource=t.getSource(),this.mouseMoveRedirect=mxUtils.bind(this,function(u){this.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(u,this.getStateForTouchEvent(u)))}),this.mouseUpRedirect=mxUtils.bind(this,function(u){this.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(u,this.getStateForTouchEvent(u)))}),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)):a=!0,this.isSyntheticEventIgnored(e,t,r)&&(a=!0),!mxEvent.isPopupTrigger(this.lastEvent)&&e!=mxEvent.MOUSE_MOVE&&2==this.lastEvent.detail||(e==mxEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:e!=mxEvent.MOUSE_DOWN||this.isMouseDown?!a&&((!mxClient.IS_FF||e!=mxEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=o||e==mxEvent.MOUSE_DOWN&&this.isMouseDown||e==mxEvent.MOUSE_UP&&!this.isMouseDown)&&(a=!0):(this.isMouseDown=!0,this.isMouseTrigger=o),!a&&e==mxEvent.MOUSE_DOWN&&(this.lastMouseX=t.getX(),this.lastMouseY=t.getY()),a)},mxGraph.prototype.isSyntheticEventIgnored=function(e,t,r){var o=!1,a=mxEvent.isMouseEvent(t.getEvent());return this.ignoreMouseEvents&&a&&e!=mxEvent.MOUSE_MOVE?(this.ignoreMouseEvents=e!=mxEvent.MOUSE_UP,o=!0):mxClient.IS_FF&&!a&&e==mxEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),o},mxGraph.prototype.isEventSourceIgnored=function(e,t){var r=t.getSource(),o=null!=r.nodeName?r.nodeName.toLowerCase():"",a=!mxEvent.isMouseEvent(t.getEvent())||mxEvent.isLeftMouseButton(t.getEvent());return e==mxEvent.MOUSE_DOWN&&a&&("select"==o||"option"==o||"input"==o&&"checkbox"!=r.type&&"radio"!=r.type&&"button"!=r.type&&"submit"!=r.type&&"file"!=r.type)},mxGraph.prototype.getEventState=function(e){return e},mxGraph.prototype.fireMouseEvent=function(e,t,r){if(this.isEventSourceIgnored(e,t))null!=this.tooltipHandler&&this.tooltipHandler.hide();else{if(null==r&&(r=this),t=this.updateMouseEvent(t,e),!this.nativeDblClickEnabled&&!mxEvent.isPopupTrigger(t.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&(mxEvent.isTouchEvent(t.getEvent())||mxEvent.isPenEvent(t.getEvent()))){var o=(new Date).getTime();if(!mxClient.IS_QUIRKS&&e==mxEvent.MOUSE_DOWN||mxClient.IS_QUIRKS&&e==mxEvent.MOUSE_UP&&!this.fireDoubleClick)if(null!=this.lastTouchEvent&&this.lastTouchEvent!=t.getEvent()&&o-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-t.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-t.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter++;var a=!1;if(e==mxEvent.MOUSE_UP){if(t.getCell()==this.lastTouchCell&&null!=this.lastTouchCell){this.lastTouchTime=0;var u=this.lastTouchCell;this.lastTouchCell=null,mxClient.IS_QUIRKS&&t.getSource().fireEvent("ondblclick"),this.dblClick(t.getEvent(),u),a=!0}}else this.fireDoubleClick=!0,this.lastTouchTime=0;if(!mxClient.IS_QUIRKS||a)return void mxEvent.consume(t.getEvent())}else(null==this.lastTouchEvent||this.lastTouchEvent!=t.getEvent())&&(this.lastTouchCell=t.getCell(),this.lastTouchX=t.getX(),this.lastTouchY=t.getY(),this.lastTouchTime=o,this.lastTouchEvent=t.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||e==mxEvent.MOUSE_UP)&&this.fireDoubleClick)return this.fireDoubleClick=!1,u=this.lastTouchCell,this.lastTouchCell=null,this.isMouseDown=!1,void((null!=u||(mxEvent.isTouchEvent(t.getEvent())||mxEvent.isPenEvent(t.getEvent()))&&(mxClient.IS_GC||mxClient.IS_SF))&&Math.abs(this.lastTouchX-t.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-t.getY())<this.doubleTapTolerance?this.dblClick(t.getEvent(),u):mxEvent.consume(t.getEvent()))}if(!this.isEventIgnored(e,t,r)){if(t.state=this.getEventState(t.getState()),this.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT,"eventName",e,"event",t)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||mxClient.IS_IE&&mxClient.IS_SVG||t.getEvent().target!=this.container){if(e==mxEvent.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent.isMultiTouchEvent(t.getEvent))this.scrollPointToVisible(t.getGraphX(),t.getGraphY(),this.autoExtend);else if(e==mxEvent.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(0!=this.container.scrollLeft||0!=this.container.scrollTop)){var f=this.view.scale,m=this.view.translate;this.view.setTranslate(m.x-this.container.scrollLeft/f,m.y-this.container.scrollTop/f),this.container.scrollLeft=0,this.container.scrollTop=0}if(null!=this.mouseListeners){var x=[r,t];t.getEvent().preventDefault||(t.getEvent().returnValue=!0);for(var v=0;v<this.mouseListeners.length;v++){var E=this.mouseListeners[v];e==mxEvent.MOUSE_DOWN?E.mouseDown.apply(E,x):e==mxEvent.MOUSE_MOVE?E.mouseMove.apply(E,x):e==mxEvent.MOUSE_UP&&E.mouseUp.apply(E,x)}}e==mxEvent.MOUSE_UP&&this.click(t)}(mxEvent.isTouchEvent(t.getEvent())||mxEvent.isPenEvent(t.getEvent()))&&e==mxEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress?(this.tapAndHoldInProgress=!0,this.initialTouchX=t.getGraphX(),this.initialTouchY=t.getGraphY(),this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils.bind(this,function(){this.tapAndHoldValid&&this.tapAndHold(t),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1}),this.tapAndHoldDelay),this.tapAndHoldValid=!0):e==mxEvent.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-t.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-t.getGraphY())<this.tolerance),e==mxEvent.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(t.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(e,t,r)}}},mxGraph.prototype.consumeMouseEvent=function(e,t,r){e==mxEvent.MOUSE_DOWN&&mxEvent.isTouchEvent(t.getEvent())&&t.consume(!1)},mxGraph.prototype.fireGestureEvent=function(e,t){this.lastTouchTime=0,this.fireEvent(new mxEventObject(mxEvent.GESTURE,"event",e,"cell",t))},mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tooltipHandler&&this.tooltipHandler.destroy(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.destroy(),null!=this.panningHandler&&this.panningHandler.destroy(),null!=this.popupMenuHandler&&this.popupMenuHandler.destroy(),null!=this.connectionHandler&&this.connectionHandler.destroy(),null!=this.graphHandler&&this.graphHandler.destroy(),null!=this.cellEditor&&this.cellEditor.destroy(),null!=this.view&&this.view.destroy(),null!=this.model&&null!=this.graphModelChangeListener&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)},__mxOutput.mxGraph=void 0!==mxGraph?mxGraph:void 0,mxCellOverlay.prototype=new mxEventSource,mxCellOverlay.prototype.constructor=mxCellOverlay,mxCellOverlay.prototype.image=null,mxCellOverlay.prototype.tooltip=null,mxCellOverlay.prototype.align=mxConstants.ALIGN_RIGHT,mxCellOverlay.prototype.verticalAlign=mxConstants.ALIGN_BOTTOM,mxCellOverlay.prototype.offset=null,mxCellOverlay.prototype.cursor=null,mxCellOverlay.prototype.defaultOverlap=.5,mxCellOverlay.prototype.getBounds=function(e){var t=e.view.graph.getModel().isEdge(e.cell),r=e.view.scale,o=null,a=this.image.width,u=this.image.height;if(t){var c=e.absolutePoints;if(c.length%2==1)o=c[Math.floor(c.length/2)];else{var f=c.length/2,m=c[f-1],x=c[f];o=new mxPoint(m.x+(x.x-m.x)/2,m.y+(x.y-m.y)/2)}}else(o=new mxPoint).x=this.align==mxConstants.ALIGN_LEFT?e.x:this.align==mxConstants.ALIGN_CENTER?e.x+e.width/2:e.x+e.width,o.y=this.verticalAlign==mxConstants.ALIGN_TOP?e.y:this.verticalAlign==mxConstants.ALIGN_MIDDLE?e.y+e.height/2:e.y+e.height;return new mxRectangle(Math.round(o.x-(a*this.defaultOverlap-this.offset.x)*r),Math.round(o.y-(u*this.defaultOverlap-this.offset.y)*r),a*r,u*r)},mxCellOverlay.prototype.toString=function(){return this.tooltip},__mxOutput.mxCellOverlay=void 0!==mxCellOverlay?mxCellOverlay:void 0,mxOutline.prototype.source=null,mxOutline.prototype.outline=null,mxOutline.prototype.graphRenderHint=mxConstants.RENDERING_HINT_FASTER,mxOutline.prototype.enabled=!0,mxOutline.prototype.showViewport=!0,mxOutline.prototype.border=10,mxOutline.prototype.sizerSize=8,mxOutline.prototype.labelsVisible=!1,mxOutline.prototype.updateOnPan=!1,mxOutline.prototype.sizerImage=null,mxOutline.prototype.minScale=1e-4,mxOutline.prototype.suspended=!1,mxOutline.prototype.forceVmlHandles=8==document.documentMode,mxOutline.prototype.createGraph=function(e){var t=new mxGraph(e,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet());return t.foldingEnabled=!1,t.autoScroll=!1,t},mxOutline.prototype.init=function(e){this.outline=this.createGraph(e);var t=this.outline.graphModelChanged;if(this.outline.graphModelChanged=mxUtils.bind(this,function(u){!this.suspended&&null!=this.outline&&t.apply(this.outline,arguments)}),mxClient.IS_SVG){var r=this.outline.getView().getCanvas().parentNode;r.setAttribute("shape-rendering","optimizeSpeed"),r.setAttribute("image-rendering","optimizeSpeed")}this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=mxUtils.bind(this,function(u,c){!this.suspended&&!this.active&&this.update()}),this.source.getModel().addListener(mxEvent.CHANGE,this.updateHandler),this.outline.addMouseListener(this);var o=this.source.getView();o.addListener(mxEvent.SCALE,this.updateHandler),o.addListener(mxEvent.TRANSLATE,this.updateHandler),o.addListener(mxEvent.SCALE_AND_TRANSLATE,this.updateHandler),o.addListener(mxEvent.DOWN,this.updateHandler),o.addListener(mxEvent.UP,this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=mxUtils.bind(this,function(u){this.updateOnPan&&this.updateHandler.apply(this,arguments)}),this.source.addListener(mxEvent.PAN,this.panHandler),this.refreshHandler=mxUtils.bind(this,function(u){this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()}),this.source.addListener(mxEvent.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants.OUTLINE_COLOR,mxConstants.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.forceVmlHandles&&(this.selectionBorder.isHtmlAllowed=function(){return!1}),this.selectionBorder.init(this.outline.getView().getOverlayPane());var a=mxUtils.bind(this,function(u){var c=mxEvent.getSource(u),f=mxUtils.bind(this,function(x){this.outline.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(x))}),m=mxUtils.bind(this,function(x){mxEvent.removeGestureListeners(c,null,f,m),this.outline.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(x))});mxEvent.addGestureListeners(c,null,f,m),this.outline.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(u))});mxEvent.addGestureListeners(this.selectionBorder.node,a),this.sizer=this.createSizer(),this.forceVmlHandles&&(this.sizer.isHtmlAllowed=function(){return!1}),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent.addGestureListeners(this.sizer.node,a),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)},mxOutline.prototype.isEnabled=function(){return this.enabled},mxOutline.prototype.setEnabled=function(e){this.enabled=e},mxOutline.prototype.setZoomEnabled=function(e){this.sizer.node.style.visibility=e?"visible":"hidden"},mxOutline.prototype.refresh=function(){this.update(!0)},mxOutline.prototype.createSizer=function(){var e;return null!=this.sizerImage?((e=new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src)).dialect=this.outline.dialect,e):((e=new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants.OUTLINE_HANDLE_FILLCOLOR,mxConstants.OUTLINE_HANDLE_STROKECOLOR)).dialect=this.outline.dialect,e)},mxOutline.prototype.getSourceContainerSize=function(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)},mxOutline.prototype.getOutlineOffset=function(e){return null},mxOutline.prototype.getSourceGraphBounds=function(){return this.source.getGraphBounds()},mxOutline.prototype.update=function(e){if(null!=this.source&&null!=this.source.container&&null!=this.outline&&null!=this.outline.container){var t=this.source.view.scale,r=this.getSourceGraphBounds(),o=new mxRectangle(r.x/t+this.source.panDx,r.y/t+this.source.panDy,r.width/t,r.height/t),a=new mxRectangle(0,0,this.source.container.clientWidth/t,this.source.container.clientHeight/t),u=o.clone();u.add(a);var c=this.getSourceContainerSize(),f=Math.max(c.width/t,u.width),m=Math.max(c.height/t,u.height),x=Math.max(0,this.outline.container.clientWidth-this.border),v=Math.max(0,this.outline.container.clientHeight-this.border),E=Math.min(x/f,v/m),S=isNaN(E)?this.minScale:Math.max(this.minScale,E);if(S>0){this.outline.getView().scale!=S&&(this.outline.getView().scale=S,e=!0);var b=this.outline.getView();b.currentRoot!=this.source.getView().currentRoot&&b.setCurrentRoot(this.source.getView().currentRoot);var _=this.source.view.translate,D=_.x+this.source.panDx,M=_.y+this.source.panDy,R=this.getOutlineOffset(S);null!=R&&(D+=R.x,M+=R.y),o.x<0&&(D-=o.x),o.y<0&&(M-=o.y),(b.translate.x!=D||b.translate.y!=M)&&(b.translate.x=D,b.translate.y=M,e=!0);var N=b.translate,V=(S=this.source.getView().scale)/b.scale,O=1/b.scale,F=this.source.container;this.bounds=new mxRectangle((N.x-_.x-this.source.panDx)/O,(N.y-_.y-this.source.panDy)/O,F.clientWidth/V,F.clientHeight/V),this.bounds.x+=this.source.container.scrollLeft*b.scale/S,this.bounds.y+=this.source.container.scrollTop*b.scale/S,((G=this.selectionBorder.bounds).x!=this.bounds.x||G.y!=this.bounds.y||G.width!=this.bounds.width||G.height!=this.bounds.height)&&(this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw());var G,j=new mxRectangle(this.bounds.x+this.bounds.width-(G=this.sizer.bounds).width/2,this.bounds.y+this.bounds.height-G.height/2,G.width,G.height);(G.x!=j.x||G.y!=j.y||G.width!=j.width||G.height!=j.height)&&(this.sizer.bounds=j,"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw()),e&&this.outline.view.revalidate()}}},mxOutline.prototype.mouseDown=function(e,t){if(this.enabled&&this.showViewport){var r=mxEvent.isMouseEvent(t.getEvent())?0:this.source.tolerance,o=this.source.allowHandleBoundsCheck&&(mxClient.IS_IE||r>0)?new mxRectangle(t.getGraphX()-r,t.getGraphY()-r,2*r,2*r):null;this.zoom=t.isSource(this.sizer)||null!=o&&mxUtils.intersects(shape.bounds,o),this.startX=t.getX(),this.startY=t.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):(this.dx0=0,this.dy0=0)}t.consume()},mxOutline.prototype.mouseMove=function(e,t){if(this.active){this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display;var r=this.getTranslateForEvent(t),o=r.x,a=r.y,u=null;if(this.zoom){var f=this.source.container;a=o/(f.clientWidth/f.clientHeight),u=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+o),Math.max(1,this.bounds.height+a)),this.selectionBorder.bounds=u,this.selectionBorder.redraw()}else{var c=this.outline.getView().scale;u=new mxRectangle(this.bounds.x+o,this.bounds.y+a,this.bounds.width,this.bounds.height),this.selectionBorder.bounds=u,this.selectionBorder.redraw(),o/=c,o*=this.source.getView().scale,a/=c,a*=this.source.getView().scale,this.source.panGraph(-o-this.dx0,-a-this.dy0)}var x=this.sizer.bounds;this.sizer.bounds=new mxRectangle(u.x+u.width-x.width/2,u.y+u.height-x.height/2,x.width,x.height),"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw(),t.consume()}},mxOutline.prototype.getTranslateForEvent=function(e){return new mxPoint(e.getX()-this.startX,e.getY()-this.startY)},mxOutline.prototype.mouseUp=function(e,t){if(this.active){var r=this.getTranslateForEvent(t),o=r.x,a=r.y;if(Math.abs(o)>0||Math.abs(a)>0){if(this.zoom){var c=this.selectionBorder.bounds.width,f=this.source.getView().scale;this.source.zoomTo(Math.max(this.minScale,f-o*f/c),!1)}else if(!this.source.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.source.container)){this.source.panGraph(0,0),o/=this.outline.getView().scale,a/=this.outline.getView().scale;var u=this.source.getView().translate;this.source.getView().setTranslate(u.x-o,u.y-a)}this.update(),t.consume()}this.index=null,this.active=!1}},mxOutline.prototype.destroy=function(){null!=this.source&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent.removeListener(this.source.container,"scroll",this.updateHandler),this.source=null),null!=this.outline&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),null!=this.sizer&&(this.sizer.destroy(),this.sizer=null)},__mxOutput.mxOutline=void 0!==mxOutline?mxOutline:void 0,mxMultiplicity.prototype.type=null,mxMultiplicity.prototype.attr=null,mxMultiplicity.prototype.value=null,mxMultiplicity.prototype.source=null,mxMultiplicity.prototype.min=null,mxMultiplicity.prototype.max=null,mxMultiplicity.prototype.validNeighbors=null,mxMultiplicity.prototype.validNeighborsAllowed=!0,mxMultiplicity.prototype.countError=null,mxMultiplicity.prototype.typeError=null,mxMultiplicity.prototype.check=function(e,t,r,o,a,u){var c="";return(this.source&&this.checkTerminal(e,r,t)||!this.source&&this.checkTerminal(e,o,t))&&(null!=this.countError&&(this.source&&(0==this.max||a>=this.max)||!this.source&&(0==this.max||u>=this.max))&&(c+=this.countError+"\n"),null!=this.validNeighbors&&null!=this.typeError&&this.validNeighbors.length>0)&&(this.checkNeighbors(e,t,r,o)||(c+=this.typeError+"\n")),c.length>0?c:null},mxMultiplicity.prototype.checkNeighbors=function(e,t,r,o){for(var a=e.model.getValue(r),u=e.model.getValue(o),c=!this.validNeighborsAllowed,f=this.validNeighbors,m=0;m<f.length;m++){if(this.source&&this.checkType(e,u,f[m])){c=this.validNeighborsAllowed;break}if(!this.source&&this.checkType(e,a,f[m])){c=this.validNeighborsAllowed;break}}return c},mxMultiplicity.prototype.checkTerminal=function(e,t,r){var o=e.model.getValue(t);return this.checkType(e,o,this.type,this.attr,this.value)},mxMultiplicity.prototype.checkType=function(e,t,r,o,a){return null!=t&&(isNaN(t.nodeType)?t==r:mxUtils.isNode(t,r,o,a))},__mxOutput.mxMultiplicity=void 0!==mxMultiplicity?mxMultiplicity:void 0,mxLayoutManager.prototype=new mxEventSource,mxLayoutManager.prototype.constructor=mxLayoutManager,mxLayoutManager.prototype.graph=null,mxLayoutManager.prototype.bubbling=!0,mxLayoutManager.prototype.enabled=!0,mxLayoutManager.prototype.undoHandler=null,mxLayoutManager.prototype.moveHandler=null,mxLayoutManager.prototype.resizeHandler=null,mxLayoutManager.prototype.isEnabled=function(){return this.enabled},mxLayoutManager.prototype.setEnabled=function(e){this.enabled=e},mxLayoutManager.prototype.isBubbling=function(){return this.bubbling},mxLayoutManager.prototype.setBubbling=function(e){this.bubbling=e},mxLayoutManager.prototype.getGraph=function(){return this.graph},mxLayoutManager.prototype.setGraph=function(e){null!=this.graph&&(this.graph.getModel().removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler),this.graph.removeListener(this.resizeHandler)),this.graph=e,null!=this.graph&&(this.graph.getModel().addListener(mxEvent.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent.MOVE_CELLS,this.moveHandler),this.graph.addListener(mxEvent.RESIZE_CELLS,this.resizeHandler))},mxLayoutManager.prototype.hasLayout=function(e){return this.getLayout(e,mxEvent.LAYOUT_CELLS)},mxLayoutManager.prototype.getLayout=function(e,t){return null},mxLayoutManager.prototype.beforeUndo=function(e){this.executeLayoutForCells(this.getCellsForChanges(e.changes))},mxLayoutManager.prototype.cellsMoved=function(e,t){if(null!=e&&null!=t)for(var r=mxUtils.convertPoint(this.getGraph().container,mxEvent.getClientX(t),mxEvent.getClientY(t)),o=this.getGraph().getModel(),a=0;a<e.length;a++){var u=this.getLayout(o.getParent(e[a]),mxEvent.MOVE_CELLS);null!=u&&u.moveCell(e[a],r.x,r.y)}},mxLayoutManager.prototype.cellsResized=function(e,t,r){if(null!=e&&null!=t)for(var o=this.getGraph().getModel(),a=0;a<e.length;a++){var u=this.getLayout(o.getParent(e[a]),mxEvent.RESIZE_CELLS);null!=u&&u.resizeCell(e[a],t[a],r[a])}},mxLayoutManager.prototype.getCellsForChanges=function(e){for(var t=[],r=0;r<e.length;r++){var o=e[r];if(o instanceof mxRootChange)return[];t=t.concat(this.getCellsForChange(o))}return t},mxLayoutManager.prototype.getCellsForChange=function(e){return e instanceof mxChildChange?this.addCellsWithLayout(e.child,this.addCellsWithLayout(e.previous)):e instanceof mxTerminalChange||e instanceof mxGeometryChange||e instanceof mxVisibleChange||e instanceof mxStyleChange?this.addCellsWithLayout(e.cell):[]},mxLayoutManager.prototype.addCellsWithLayout=function(e,t){return this.addDescendantsWithLayout(e,this.addAncestorsWithLayout(e,t))},mxLayoutManager.prototype.addAncestorsWithLayout=function(e,t){if(t=null!=t?t:[],null!=e&&(null!=this.hasLayout(e)&&t.push(e),this.isBubbling())){var o=this.getGraph().getModel();this.addAncestorsWithLayout(o.getParent(e),t)}return t},mxLayoutManager.prototype.addDescendantsWithLayout=function(e,t){if(t=null!=t?t:[],null!=e&&this.hasLayout(e))for(var r=this.getGraph().getModel(),o=0;o<r.getChildCount(e);o++){var a=r.getChildAt(e,o);this.hasLayout(a)&&(t.push(a),this.addDescendantsWithLayout(a,t))}return t},mxLayoutManager.prototype.executeLayoutForCells=function(e){var t=mxUtils.sortCells(e,!1);this.layoutCells(t,!0),this.layoutCells(t.reverse(),!1)},mxLayoutManager.prototype.layoutCells=function(e,t){if(e.length>0){var r=this.getGraph().getModel();r.beginUpdate();try{for(var o=null,a=0;a<e.length;a++)e[a]!=r.getRoot()&&e[a]!=o&&(this.executeLayout(e[a],t),o=e[a]);this.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS,"cells",e))}finally{r.endUpdate()}}},mxLayoutManager.prototype.executeLayout=function(e,t){var r=this.getLayout(e,t?mxEvent.BEGIN_UPDATE:mxEvent.END_UPDATE);null!=r&&r.execute(e)},mxLayoutManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxLayoutManager=void 0!==mxLayoutManager?mxLayoutManager:void 0,mxSwimlaneManager.prototype=new mxEventSource,mxSwimlaneManager.prototype.constructor=mxSwimlaneManager,mxSwimlaneManager.prototype.graph=null,mxSwimlaneManager.prototype.enabled=!0,mxSwimlaneManager.prototype.horizontal=!0,mxSwimlaneManager.prototype.addEnabled=!0,mxSwimlaneManager.prototype.resizeEnabled=!0,mxSwimlaneManager.prototype.addHandler=null,mxSwimlaneManager.prototype.resizeHandler=null,mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled},mxSwimlaneManager.prototype.setEnabled=function(e){this.enabled=e},mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal},mxSwimlaneManager.prototype.setHorizontal=function(e){this.horizontal=e},mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled},mxSwimlaneManager.prototype.setAddEnabled=function(e){this.addEnabled=e},mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled},mxSwimlaneManager.prototype.setResizeEnabled=function(e){this.resizeEnabled=e},mxSwimlaneManager.prototype.getGraph=function(){return this.graph},mxSwimlaneManager.prototype.setGraph=function(e){null!=this.graph&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=e,null!=this.graph&&(this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler))},mxSwimlaneManager.prototype.isSwimlaneIgnored=function(e){return!this.getGraph().isSwimlane(e)},mxSwimlaneManager.prototype.isCellHorizontal=function(e){if(this.graph.isSwimlane(e)){var t=this.graph.getCellStyle(e);return 1==mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,1)}return!this.isHorizontal()},mxSwimlaneManager.prototype.cellsAdded=function(e){if(null!=e){var t=this.getGraph().getModel();t.beginUpdate();try{for(var r=0;r<e.length;r++)this.isSwimlaneIgnored(e[r])||this.swimlaneAdded(e[r])}finally{t.endUpdate()}}},mxSwimlaneManager.prototype.swimlaneAdded=function(e){for(var t=this.getGraph().getModel(),r=t.getParent(e),o=t.getChildCount(r),a=null,u=0;u<o;u++){var c=t.getChildAt(r,u);if(c!=e&&!this.isSwimlaneIgnored(c)&&null!=(a=t.getGeometry(c)))break}if(null!=a){var f=null!=r?this.isCellHorizontal(r):this.horizontal;this.resizeSwimlane(e,a.width,a.height,f)}},mxSwimlaneManager.prototype.cellsResized=function(e){if(null!=e){var t=this.getGraph().getModel();t.beginUpdate();try{for(var r=0;r<e.length;r++)if(!this.isSwimlaneIgnored(e[r])){var o=t.getGeometry(e[r]);if(null!=o){for(var a=new mxRectangle(0,0,o.width,o.height),u=e[r],c=u;null!=c;){u=c,c=t.getParent(c);var f=this.graph.isSwimlane(c)?this.graph.getStartSize(c):new mxRectangle;a.width+=f.width,a.height+=f.height}var m=null!=c?this.isCellHorizontal(c):this.horizontal;this.resizeSwimlane(u,a.width,a.height,m)}}}finally{t.endUpdate()}}},mxSwimlaneManager.prototype.resizeSwimlane=function(e,t,r,o){var a=this.getGraph().getModel();a.beginUpdate();try{var u=this.isCellHorizontal(e);if(!this.isSwimlaneIgnored(e)){var c=a.getGeometry(e);null!=c&&(o&&c.height!=r||!o&&c.width!=t)&&(c=c.clone(),o?c.height=r:c.width=t,a.setGeometry(e,c))}var f=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle;t-=f.width,r-=f.height;for(var m=a.getChildCount(e),x=0;x<m;x++){var v=a.getChildAt(e,x);this.resizeSwimlane(v,t,r,u)}}finally{a.endUpdate()}},mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)},__mxOutput.mxSwimlaneManager=void 0!==mxSwimlaneManager?mxSwimlaneManager:void 0,mxTemporaryCellStates.prototype.view=null,mxTemporaryCellStates.prototype.oldStates=null,mxTemporaryCellStates.prototype.oldBounds=null,mxTemporaryCellStates.prototype.oldScale=null,mxTemporaryCellStates.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape},__mxOutput.mxTemporaryCellStates=void 0!==mxTemporaryCellStates?mxTemporaryCellStates:void 0,mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(e,t,r,o,a){o=null==o||o,a=null==a||a;var u=this.deltas.get(e.cell);return null==u?(u={point:new mxPoint(t,r),state:e},this.deltas.put(e.cell,u),this.count++):o?(u.point.x+=t,u.point.y+=r):(u.point.x=t,u.point.y=r),a&&this.addEdges(e),u.point},mxCellStatePreview.prototype.show=function(e){this.deltas.visit(mxUtils.bind(this,function(t,r){this.translateState(r.state,r.point.x,r.point.y)})),this.deltas.visit(mxUtils.bind(this,function(t,r){this.revalidateState(r.state,r.point.x,r.point.y,e)}))},mxCellStatePreview.prototype.translateState=function(e,t,r){if(null!=e){var o=this.graph.getModel();if(o.isVertex(e.cell)){e.view.updateCellState(e);var a=o.getGeometry(e.cell);(0!=t||0!=r)&&null!=a&&(!a.relative||null!=this.deltas.get(e.cell))&&(e.x+=t,e.y+=r)}for(var u=o.getChildCount(e.cell),c=0;c<u;c++)this.translateState(e.view.getState(o.getChildAt(e.cell,c)),t,r)}},mxCellStatePreview.prototype.revalidateState=function(e,t,r,o){if(null!=e){var a=this.graph.getModel();a.isEdge(e.cell)&&e.view.updateCellState(e);var u=this.graph.getCellGeometry(e.cell),c=e.view.getState(a.getParent(e.cell));(0!=t||0!=r)&&null!=u&&u.relative&&a.isVertex(e.cell)&&(null==c||a.isVertex(c.cell)||null!=this.deltas.get(e.cell))&&(e.x+=t,e.y+=r),this.graph.cellRenderer.redraw(e),null!=o&&o(e);for(var f=a.getChildCount(e.cell),m=0;m<f;m++)this.revalidateState(this.graph.view.getState(a.getChildAt(e.cell,m)),t,r,o)}},mxCellStatePreview.prototype.addEdges=function(e){for(var t=this.graph.getModel(),r=t.getEdgeCount(e.cell),o=0;o<r;o++){var a=e.view.getState(t.getEdgeAt(e.cell,o));null!=a&&this.moveState(a,0,0)}},__mxOutput.mxCellStatePreview=void 0!==mxCellStatePreview?mxCellStatePreview:void 0,mxConnectionConstraint.prototype.point=null,mxConnectionConstraint.prototype.perimeter=null,mxConnectionConstraint.prototype.name=null,mxConnectionConstraint.prototype.dx=null,mxConnectionConstraint.prototype.dy=null,__mxOutput.mxConnectionConstraint=void 0!==mxConnectionConstraint?mxConnectionConstraint:void 0,mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=mxClient.IS_IE?20:50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.handlesVisible=!0,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.removeEmptyParents=!1,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.maxLivePreview=0,mxGraphHandler.prototype.allowLivePreview=mxClient.IS_SVG,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(e){this.enabled=e},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(e){this.cloneEnabled=e},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(e){this.moveEnabled=e},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(e){this.selectEnabled=e},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(e){this.removeCellsFromParent=e},mxGraphHandler.prototype.isPropagateSelectionCell=function(e,t,r){var o=this.graph.model.getParent(e);if(t){var a=this.graph.model.isEdge(e)?null:this.graph.getCellGeometry(e);return!this.graph.isSiblingSelected(e)&&(null!=a&&a.relative||!this.graph.isSwimlane(o))}return(!this.graph.isToggleEvent(r.getEvent())||!this.graph.isSiblingSelected(e)&&!this.graph.isCellSelected(e)&&!this.graph.isSwimlane(o)||this.graph.isCellSelected(o))&&(this.graph.isToggleEvent(r.getEvent())||!this.graph.isCellSelected(o))},mxGraphHandler.prototype.getInitialCellForEvent=function(e){var t=e.getState();if(!(this.graph.isToggleEvent(e.getEvent())&&mxEvent.isAltDown(e.getEvent())||null==t||this.graph.isCellSelected(t.cell)))for(var r=this.graph.model,o=this.graph.view.getState(r.getParent(t.cell));null!=o&&!this.graph.isCellSelected(o.cell)&&(r.isVertex(o.cell)||r.isEdge(o.cell))&&this.isPropagateSelectionCell(t.cell,!0,e);)t=o,o=this.graph.view.getState(this.graph.getModel().getParent(t.cell));return null!=t?t.cell:null},mxGraphHandler.prototype.isDelayedSelection=function(e,t){if(!this.graph.isToggleEvent(t.getEvent())||!mxEvent.isAltDown(t.getEvent()))for(;null!=e;){if(this.graph.selectionCellsHandler.isHandled(e))return this.graph.cellEditor.getEditingCell()!=e;e=this.graph.model.getParent(e)}return this.graph.isToggleEvent(t.getEvent())&&!mxEvent.isAltDown(t.getEvent())},mxGraphHandler.prototype.selectDelayed=function(e){if(!this.graph.popupMenuHandler.isPopupTrigger(e)){var t=e.getCell();null==t&&(t=this.cell),this.selectCellForEvent(t,e)}},mxGraphHandler.prototype.selectCellForEvent=function(e,t){var r=this.graph.view.getState(e);if(null!=r)if(t.isSource(r.control))this.graph.selectCellForEvent(e,t.getEvent());else{if(!this.graph.isToggleEvent(t.getEvent())||!mxEvent.isAltDown(t.getEvent()))for(var o=this.graph.getModel(),a=o.getParent(e);null!=this.graph.view.getState(a)&&(o.isVertex(a)||o.isEdge(a))&&this.isPropagateSelectionCell(e,!1,t);)a=o.getParent(e=a);this.graph.selectCellForEvent(e,t.getEvent())}return e},mxGraphHandler.prototype.consumeMouseEvent=function(e,t){t.consume()},mxGraphHandler.prototype.mouseDown=function(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null!=t.getState()&&!mxEvent.isMultiTouchEvent(t.getEvent())){var r=this.getInitialCellForEvent(t);if(this.delayedSelection=this.isDelayedSelection(r,t),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(r,t.getEvent()),this.isMoveEnabled()){var o=this.graph.model,a=o.getGeometry(r);this.graph.isCellMovable(r)&&(!o.isEdge(r)||this.graph.getSelectionCount()>1||null!=a.points&&a.points.length>0||null==o.getTerminal(r,!0)||null==o.getTerminal(r,!1)||this.graph.allowDanglingEdges||this.graph.isCloneEvent(t.getEvent())&&this.graph.isCellsCloneable())?this.start(r,t.getX(),t.getY()):this.delayedSelection&&(this.cell=r),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent.MOUSE_DOWN,t)}}},mxGraphHandler.prototype.getGuideStates=function(){var e=this.graph.getDefaultParent(),t=this.graph.getModel(),r=mxUtils.bind(this,function(o){return null!=this.graph.view.getState(o)&&t.isVertex(o)&&null!=t.getGeometry(o)&&!t.getGeometry(o).relative});return this.graph.view.getCellStates(t.filterDescendants(r,e))},mxGraphHandler.prototype.getCells=function(e){return!this.delayedSelection&&this.graph.isCellMovable(e)?[e]:this.graph.getMovableCells(this.graph.getSelectionCells())},mxGraphHandler.prototype.getPreviewBounds=function(e){var t=this.getBoundingBox(e);return null!=t&&(t.width=Math.max(0,t.width-1),t.height=Math.max(0,t.height-1),t.width<this.minimumSize?(t.x-=(this.minimumSize-t.width)/2,t.width=this.minimumSize):(t.x=Math.round(t.x),t.width=Math.ceil(t.width)),t.height<this.minimumSize?(t.y-=(this.minimumSize-t.height)/2,t.height=this.minimumSize):(t.y=Math.round(t.y),t.height=Math.ceil(t.height))),t},mxGraphHandler.prototype.getBoundingBox=function(e){var t=null;if(null!=e&&e.length>0)for(var r=this.graph.getModel(),o=0;o<e.length;o++)if(r.isVertex(e[o])||r.isEdge(e[o])){var a=this.graph.view.getState(e[o]);if(null!=a){var u=a;r.isVertex(e[o])&&null!=a.shape&&null!=a.shape.boundingBox&&(u=a.shape.boundingBox),null==t?t=mxRectangle.fromRectangle(u):t.add(u)}}return t},mxGraphHandler.prototype.createPreviewShape=function(e){var t=new mxRectangleShape(e,null,this.previewColor);return t.isDashed=!0,this.htmlPreview?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.pointerEvents=!1,mxClient.IS_IOS&&(t.getSvgScreenOffset=function(){return 0})),t},mxGraphHandler.prototype.start=function(e,t,r,o){this.cell=e,this.first=mxUtils.convertPoint(this.graph.container,t,r),this.cells=null!=o?o:this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary,this.cloning=!1,this.cellCount=0;for(var a=0;a<this.cells.length;a++)this.cellCount+=this.addStates(this.cells[a],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide(this.graph,this.getGuideStates());var u=this.graph.model.getParent(e),c=this.graph.model.getChildCount(u)<2,f=new mxDictionary,m=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell);for(a=0;a<m.length;a++){var x=this.graph.view.getState(m[a]);null!=x&&!f.get(x)&&f.put(x,!0)}this.guide.isStateIgnored=mxUtils.bind(this,function(v){var E=this.graph.model.getParent(v.cell);return null!=v.cell&&(!this.cloning&&this.isCellMoving(v.cell)||v.cell!=(this.target||u)&&!c&&!f.get(v)&&(null==this.target||this.graph.model.getChildCount(this.target)>=2)&&E!=(this.target||u))})}},mxGraphHandler.prototype.addStates=function(e,t){var r=this.graph.view.getState(e),o=0;if(null!=r&&null==t.get(e)){t.put(e,r),o++;for(var a=this.graph.model.getChildCount(e),u=0;u<a;u++)o+=this.addStates(this.graph.model.getChildAt(e,u),t)}return o},mxGraphHandler.prototype.isCellMoving=function(e){return null!=this.allCells.get(e)},mxGraphHandler.prototype.useGuidesForEvent=function(e){return null==this.guide||this.guide.isEnabledForEvent(e.getEvent())&&!this.graph.isConstrainedEvent(e.getEvent())},mxGraphHandler.prototype.snap=function(e){var t=this.scaleGrid?this.graph.view.scale:1;return e.x=this.graph.snap(e.x/t)*t,e.y=this.graph.snap(e.y/t)*t,e},mxGraphHandler.prototype.getDelta=function(e){var t=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY());return new mxPoint(t.x-this.first.x-this.graph.panDx,t.y-this.first.y-this.graph.panDy)},mxGraphHandler.prototype.updateHint=function(e){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(e){return Math.round(100*e)/100},mxGraphHandler.prototype.isValidDropTarget=function(e,t){return this.graph.model.getParent(this.cell)!=e},mxGraphHandler.prototype.checkPreview=function(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?(!this.cloning||!this.livePreviewActive)&&(this.livePreviewActive=!0,this.livePreviewUsed=!0):!this.livePreviewUsed&&null==this.shape&&(this.shape=this.createPreviewShape(this.bounds))},mxGraphHandler.prototype.mouseMove=function(e,t){var r=this.graph;if(t.isConsumed()||!r.isMouseDown||null==this.cell||null==this.first||null==this.bounds||this.suspended){if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!t.isConsumed()&&(null!=t.getState()||null!=t.sourceState)&&!r.isMouseDown){var _=r.getCursorForMouseEvent(t);null==_&&r.isEnabled()&&r.isCellMovable(t.getCell())&&(_=r.getModel().isEdge(t.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX),null!=_&&null!=t.sourceState&&t.sourceState.setCursor(_)}}else{if(mxEvent.isMultiTouchEvent(t.getEvent()))return void this.reset();var o=this.getDelta(t),a=r.tolerance;if(null!=this.shape||this.livePreviewActive||Math.abs(o.x)>a||Math.abs(o.y)>a){null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3));var u=r.isCloneEvent(t.getEvent())&&r.isCellsCloneable()&&this.isCloneEnabled(),c=r.isGridEnabledEvent(t.getEvent()),f=t.getCell(),m=!0,x=null;this.cloning=u,r.isDropEnabled()&&this.highlightEnabled&&(x=r.getDropTarget(this.cells,t.getEvent(),f,u));var v=r.getView().getState(x),E=!1;if(null!=v&&(u||this.isValidDropTarget(x,t)))this.target!=x&&(this.target=x,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),E=!0;else if(this.target=null,this.connectOnDrop&&null!=f&&1==this.cells.length&&r.getModel().isVertex(f)&&r.isCellConnectable(f)&&null!=(v=r.getView().getState(f))){var S=r.getEdgeValidationError(null,this.cell,f);this.setHighlightColor(null==S?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR),E=!0}null!=v&&E?this.highlight.highlight(v):this.highlight.hide(),null!=this.guide&&this.useGuidesForEvent(t)?(o=this.guide.move(this.bounds,o,c,u),m=!1):o=this.graph.snapDelta(o,this.bounds,!c,!1,!1),null!=this.guide&&m&&this.guide.hide(),r.isConstrainedEvent(t.getEvent())&&(Math.abs(o.x)>Math.abs(o.y)?o.y=0:o.x=0),this.checkPreview(),(this.currentDx!=o.x||this.currentDy!=o.y)&&(this.currentDx=o.x,this.currentDy=o.y,this.updatePreview())}this.updateHint(t),this.consumeMouseEvent(mxEvent.MOUSE_MOVE,t),mxEvent.consume(t.getEvent())}},mxGraphHandler.prototype.updatePreview=function(e){this.livePreviewUsed&&!e?null!=this.cells&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&null!=this.pBounds&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.updateLivePreview=function(e,t){if(!this.suspended){var r=[];if(null!=this.allCells&&this.allCells.visit(mxUtils.bind(this,function(_,D){var M=this.graph.view.getState(D.cell);if(M!=D&&(D.destroy(),null!=M?this.allCells.put(D.cell,M):this.allCells.remove(D.cell),D=M),null!=D){var R=D.clone();r.push([D,R]),null!=D.shape&&(null==D.shape.originalPointerEvents&&(D.shape.originalPointerEvents=D.shape.pointerEvents),D.shape.pointerEvents=!1,null!=D.text&&(null==D.text.originalPointerEvents&&(D.text.originalPointerEvents=D.text.pointerEvents),D.text.pointerEvents=!1)),this.graph.model.isVertex(D.cell)&&(D.x+=e,D.y+=t,this.cloning?null!=D.text&&(D.text.updateBoundingBox(),null!=D.text.boundingBox&&(D.text.boundingBox.x+=e,D.text.boundingBox.y+=t),null!=D.text.unrotatedBoundingBox&&(D.text.unrotatedBoundingBox.x+=e,D.text.unrotatedBoundingBox.y+=t)):(D.view.graph.cellRenderer.redraw(D,!0),D.view.invalidate(D.cell),D.invalid=!1,null!=D.control&&null!=D.control.node&&(D.control.node.style.visibility="hidden")))}})),0==r.length)this.reset();else{for(var o=this.graph.view.scale,a=0;a<r.length;a++){var u=r[a][0];if(this.graph.model.isEdge(u.cell)){var c=this.graph.getCellGeometry(u.cell),f=[];if(null!=c&&null!=c.points)for(var m=0;m<c.points.length;m++)null!=c.points[m]&&f.push(new mxPoint(c.points[m].x+e/o,c.points[m].y+t/o));var x=u.visibleSourceState,v=u.visibleTargetState,E=r[a][1].absolutePoints;if(null!=x&&this.isCellMoving(x.cell))u.view.updateFixedTerminalPoint(u,x,!0,this.graph.getConnectionConstraint(u,x,!0));else{var S=E[0];u.setAbsoluteTerminalPoint(new mxPoint(S.x+e,S.y+t),!0),x=null}if(null!=v&&this.isCellMoving(v.cell))u.view.updateFixedTerminalPoint(u,v,!1,this.graph.getConnectionConstraint(u,v,!1));else{var b=E[E.length-1];u.setAbsoluteTerminalPoint(new mxPoint(b.x+e,b.y+t),!1),v=null}u.view.updatePoints(u,f,x,v),u.view.updateFloatingTerminalPoints(u,x,v),u.view.updateEdgeLabelOffset(u),u.invalid=!1,this.cloning||u.view.graph.cellRenderer.redraw(u,!0)}}this.graph.view.validate(),this.redrawHandles(r),this.resetPreviewStates(r)}}},mxGraphHandler.prototype.redrawHandles=function(e){for(var t=0;t<e.length;t++){var r=this.graph.selectionCellsHandler.getHandler(e[t][0].cell);null!=r&&r.redraw(!0)}},mxGraphHandler.prototype.resetPreviewStates=function(e){for(var t=0;t<e.length;t++)e[t][0].setState(e[t][1])},mxGraphHandler.prototype.suspend=function(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),null!=this.shape&&(this.shape.node.style.visibility="hidden"),null!=this.guide&&this.guide.setVisible(!1),this.suspended=!0)},mxGraphHandler.prototype.resume=function(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),null!=this.shape&&(this.shape.node.style.visibility="visible"),null!=this.guide&&this.guide.setVisible(!0))},mxGraphHandler.prototype.resetLivePreview=function(){null!=this.allCells&&(this.allCells.visit(mxUtils.bind(this,function(e,t){null!=t.shape&&null!=t.shape.originalPointerEvents&&(t.shape.pointerEvents=t.shape.originalPointerEvents,t.shape.originalPointerEvents=null,t.shape.bounds=null,null!=t.text&&(t.text.pointerEvents=t.text.originalPointerEvents,t.text.originalPointerEvents=null)),null!=t.control&&null!=t.control.node&&"hidden"==t.control.node.style.visibility&&(t.control.node.style.visibility=""),this.cloning||null!=t.text&&t.text.updateBoundingBox(),t.view.invalidate(t.cell)})),this.graph.view.validate())},mxGraphHandler.prototype.setHandlesVisibleForCells=function(e,t,r){if(r||this.handlesVisible!=t){this.handlesVisible=t;for(var o=0;o<e.length;o++){var a=this.graph.selectionCellsHandler.getHandler(e[o]);null!=a&&(a.setHandlesVisible(t),t&&a.redraw())}}},mxGraphHandler.prototype.setHighlightColor=function(e){null!=this.highlight&&this.highlight.setHighlightColor(e)},mxGraphHandler.prototype.mouseUp=function(e,t){if(!t.isConsumed())if(this.livePreviewUsed&&this.resetLivePreview(),null==this.cell||null==this.first||null==this.shape&&!this.livePreviewUsed||null==this.currentDx||null==this.currentDy)this.isSelectEnabled()&&this.delayedSelection&&null!=this.cell&&this.selectDelayed(t);else{var r=this.graph,o=t.getCell();if(this.connectOnDrop&&null==this.target&&null!=o&&r.getModel().isVertex(o)&&r.isCellConnectable(o)&&r.isEdgeValid(null,this.cell,o))r.connectionHandler.connect(this.cell,o,t.getEvent());else{var a=r.isCloneEvent(t.getEvent())&&r.isCellsCloneable()&&this.isCloneEnabled(),u=r.getView().scale,c=this.roundLength(this.currentDx/u),f=this.roundLength(this.currentDy/u),m=this.target;r.isSplitEnabled()&&r.isSplitTarget(m,this.cells,t.getEvent())?r.splitEdge(m,this.cells,null,c,f,t.getGraphX(),t.getGraphY()):this.moveCells(this.cells,c,f,a,this.target,t.getEvent())}}this.cellWasClicked&&this.consumeMouseEvent(mxEvent.MOUSE_UP,t),this.reset()},mxGraphHandler.prototype.reset=function(){this.livePreviewUsed&&(this.resetLivePreview(),this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!0)),this.destroyShapes(),this.removeHint(),this.delayedSelection=!1,this.livePreviewActive=null,this.livePreviewUsed=null,this.cellWasClicked=!1,this.suspended=null,this.currentDx=null,this.currentDy=null,this.cellCount=null,this.cloning=!1,this.allCells=null,this.pBounds=null,this.guides=null,this.target=null,this.first=null,this.cells=null,this.cell=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(e,t,r){if(this.graph.getModel().isVertex(e)){var o=this.graph.getView().getState(e);if(null!=o){var a=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(r),mxEvent.getClientY(r)),u=mxUtils.toRadians(mxUtils.getValue(o.style,mxConstants.STYLE_ROTATION)||0);if(0!=u){var c=Math.cos(-u),f=Math.sin(-u),m=new mxPoint(o.getCenterX(),o.getCenterY());a=mxUtils.getRotatedPoint(a,c,f,m)}return!mxUtils.contains(o,a.x,a.y)}}return!1},mxGraphHandler.prototype.moveCells=function(e,t,r,o,a,u){o&&(e=this.graph.getCloneableCells(e));var c=this.graph.getModel().getParent(this.cell);null==a&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(c,e,u)&&(a=this.graph.getDefaultParent()),o=o&&!this.graph.isCellLocked(a||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{var f=[];if(!o&&null!=a&&this.removeEmptyParents){for(var m=new mxDictionary,x=0;x<e.length;x++)m.put(e[x],!0);for(x=0;x<e.length;x++){var v=this.graph.model.getParent(e[x]);null!=v&&!m.get(v)&&(m.put(v,!0),f.push(v))}}e=this.graph.moveCells(e,t,r,o,a,u);var E=[];for(x=0;x<f.length;x++)this.shouldRemoveParent(f[x])&&E.push(f[x]);this.graph.removeCells(E,!1)}finally{this.graph.getModel().endUpdate()}o&&this.graph.setSelectionCells(e),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(e[0])},mxGraphHandler.prototype.shouldRemoveParent=function(e){var t=this.graph.view.getState(e);return null!=t&&(this.graph.model.isEdge(t.cell)||this.graph.model.isVertex(t.cell))&&this.graph.isCellDeletable(t.cell)&&0==this.graph.model.getChildCount(t.cell)&&this.graph.isTransparentState(t)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.refreshHandler&&(this.graph.getModel().removeListener(this.refreshHandler),this.graph.removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent.removeListener(document,"keydown",this.keyHandler),mxEvent.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()},__mxOutput.mxGraphHandler=void 0!==mxGraphHandler?mxGraphHandler:void 0;mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(e){this.panningEnabled=e},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(e){this.pinchEnabled=e},mxPanningHandler.prototype.isPanningTrigger=function(e){var t=e.getEvent();return this.useLeftButtonForPanning&&null==e.getState()&&mxEvent.isLeftMouseButton(t)||mxEvent.isControlDown(t)&&mxEvent.isShiftDown(t)||this.usePopupTrigger&&mxEvent.isPopupTrigger(t)},mxPanningHandler.prototype.isForcePanningEvent=function(e){return this.ignoreCell||mxEvent.isMultiTouchEvent(e.getEvent())},mxPanningHandler.prototype.mouseDown=function(e,t){this.mouseDownEvent=t,!t.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(t)&&(this.start(t),this.consumePanningTrigger(t))},mxPanningHandler.prototype.start=function(e){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=e.getX(),this.startY=e.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(e){e.consume()},mxPanningHandler.prototype.mouseMove=function(e,t){if(this.dx=t.getX()-this.startX,this.dy=t.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",t));else if(this.panningTrigger){var r=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!r&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",t))}(this.active||this.panningTrigger)&&t.consume()},mxPanningHandler.prototype.mouseUp=function(e,t){if(this.active){if(null!=this.dx&&null!=this.dy){if(!this.graph.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.graph.container)){var r=this.graph.getView().scale,o=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(o.x+this.dx/r,o.y+this.dy/r)}t.consume()}this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",t))}this.reset()},mxPanningHandler.prototype.zoomGraph=function(e){var t=Math.round(this.initialScale*e.scale*100)/100;null!=this.minScale&&(t=Math.max(this.minScale,t)),null!=this.maxScale&&(t=Math.min(this.maxScale,t)),this.graph.view.scale!=t&&(this.graph.zoomTo(t),mxEvent.consume(e))},mxPanningHandler.prototype.reset=function(){this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null},mxPanningHandler.prototype.panGraph=function(e,t){this.graph.getView().setTranslate(e,t)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)},__mxOutput.mxPanningHandler=void 0!==mxPanningHandler?mxPanningHandler:void 0,mxPopupMenuHandler.prototype=new mxPopupMenu,mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler,mxPopupMenuHandler.prototype.graph=null,mxPopupMenuHandler.prototype.selectOnPopup=!0,mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0,mxPopupMenuHandler.prototype.triggerX=null,mxPopupMenuHandler.prototype.triggerY=null,mxPopupMenuHandler.prototype.screenX=null,mxPopupMenuHandler.prototype.screenY=null,mxPopupMenuHandler.prototype.init=function(){mxPopupMenu.prototype.init.apply(this),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(e){this.graph.tooltipHandler.hide()}))},mxPopupMenuHandler.prototype.isSelectOnPopup=function(e){return this.selectOnPopup},mxPopupMenuHandler.prototype.mouseDown=function(e,t){this.isEnabled()&&!mxEvent.isMultiTouchEvent(t.getEvent())&&(this.hideMenu(),this.triggerX=t.getGraphX(),this.triggerY=t.getGraphY(),this.screenX=mxEvent.getMainEvent(t.getEvent()).screenX,this.screenY=mxEvent.getMainEvent(t.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(t),this.inTolerance=!0)},mxPopupMenuHandler.prototype.mouseMove=function(e,t){this.inTolerance&&null!=this.screenX&&null!=this.screenY&&(Math.abs(mxEvent.getMainEvent(t.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent.getMainEvent(t.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxPopupMenuHandler.prototype.mouseUp=function(e,t){if(this.popupTrigger&&this.inTolerance&&null!=this.triggerX&&null!=this.triggerY){var r=this.getCellForPopupEvent(t);this.graph.isEnabled()&&this.isSelectOnPopup(t)&&null!=r&&!this.graph.isCellSelected(r)?this.graph.setSelectionCell(r):this.clearSelectionOnBackground&&null==r&&this.graph.clearSelection(),this.graph.tooltipHandler.hide();var o=mxUtils.getScrollOrigin();this.popup(t.getX()+o.x+1,t.getY()+o.y+1,r,t.getEvent()),t.consume()}this.popupTrigger=!1,this.inTolerance=!1},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(e){return e.getCell()},mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu.prototype.destroy.apply(this)},__mxOutput.mxPopupMenuHandler=void 0!==mxPopupMenuHandler?mxPopupMenuHandler:void 0,mxUtils.extend(mxCellMarker,mxEventSource),mxCellMarker.prototype.graph=null,mxCellMarker.prototype.enabled=!0,mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT,mxCellMarker.prototype.hotspotEnabled=!1,mxCellMarker.prototype.validColor=null,mxCellMarker.prototype.invalidColor=null,mxCellMarker.prototype.currentColor=null,mxCellMarker.prototype.validState=null,mxCellMarker.prototype.markedState=null,mxCellMarker.prototype.setEnabled=function(e){this.enabled=e},mxCellMarker.prototype.isEnabled=function(){return this.enabled},mxCellMarker.prototype.setHotspot=function(e){this.hotspot=e},mxCellMarker.prototype.getHotspot=function(){return this.hotspot},mxCellMarker.prototype.setHotspotEnabled=function(e){this.hotspotEnabled=e},mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled},mxCellMarker.prototype.hasValidState=function(){return null!=this.validState},mxCellMarker.prototype.getValidState=function(){return this.validState},mxCellMarker.prototype.getMarkedState=function(){return this.markedState},mxCellMarker.prototype.reset=function(){this.validState=null,null!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.process=function(e){var t=null;return this.isEnabled()&&(t=this.getState(e),this.setCurrentState(t,e)),t},mxCellMarker.prototype.setCurrentState=function(e,t,r){var o=null!=e&&this.isValidState(e);r=null!=r?r:this.getMarkerColor(t.getEvent(),e,o),this.validState=o?e:null,(e!=this.markedState||r!=this.currentColor)&&(this.currentColor=r,null!=e&&null!=this.currentColor?(this.markedState=e,this.mark()):null!=this.markedState&&(this.markedState=null,this.unmark()))},mxCellMarker.prototype.markCell=function(e,t){var r=this.graph.getView().getState(e);null!=r&&(this.currentColor=null!=t?t:this.validColor,this.markedState=r,this.mark())},mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))},mxCellMarker.prototype.unmark=function(){this.mark()},mxCellMarker.prototype.isValidState=function(e){return!0},mxCellMarker.prototype.getMarkerColor=function(e,t,r){return r?this.validColor:this.invalidColor},mxCellMarker.prototype.getState=function(e){var t=this.graph.getView(),r=this.getCell(e),o=this.getStateToMark(t.getState(r));return null!=o&&this.intersects(o,e)?o:null},mxCellMarker.prototype.getCell=function(e){return e.getCell()},mxCellMarker.prototype.getStateToMark=function(e){return e},mxCellMarker.prototype.intersects=function(e,t){return!this.hotspotEnabled||mxUtils.intersectsHotspot(e,t.getGraphX(),t.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE)},mxCellMarker.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()},__mxOutput.mxCellMarker=void 0!==mxCellMarker?mxCellMarker:void 0,mxUtils.extend(mxSelectionCellsHandler,mxEventSource),mxSelectionCellsHandler.prototype.graph=null,mxSelectionCellsHandler.prototype.enabled=!0,mxSelectionCellsHandler.prototype.refreshHandler=null,mxSelectionCellsHandler.prototype.maxHandlers=100,mxSelectionCellsHandler.prototype.handlers=null,mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled},mxSelectionCellsHandler.prototype.setEnabled=function(e){this.enabled=e},mxSelectionCellsHandler.prototype.getHandler=function(e){return this.handlers.get(e)},mxSelectionCellsHandler.prototype.isHandled=function(e){return null!=this.getHandler(e)},mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(e,t){t.reset.apply(t)})},mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){return this.graph.getSelectionCells()},mxSelectionCellsHandler.prototype.refresh=function(){var e=this.handlers;this.handlers=new mxDictionary;for(var t=mxUtils.sortCells(this.getHandledSelectionCells(),!1),r=0;r<t.length;r++)null!=(o=this.graph.view.getState(t[r]))&&(null!=(a=e.remove(t[r]))&&(a.state!=o?(a.destroy(),a=null):this.isHandlerActive(a)||(null!=a.refresh&&a.refresh(),a.redraw())),null!=a&&this.handlers.put(t[r],a));for(e.visit(mxUtils.bind(this,function(u,c){this.fireEvent(new mxEventObject(mxEvent.REMOVE,"state",c.state)),c.destroy()})),r=0;r<t.length;r++){var o,a;null!=(o=this.graph.view.getState(t[r]))&&(null==(a=this.handlers.get(t[r]))?(a=this.graph.createHandler(o),this.fireEvent(new mxEventObject(mxEvent.ADD,"state",o)),this.handlers.put(t[r],a)):a.updateParentHighlight())}},mxSelectionCellsHandler.prototype.isHandlerActive=function(e){return null!=e.index},mxSelectionCellsHandler.prototype.updateHandler=function(e){var t=this.handlers.remove(e.cell);if(null!=t){var r=t.index,o=t.startX,a=t.startY;t.destroy(),null!=(t=this.graph.createHandler(e))&&(this.handlers.put(e.cell,t),null!=r&&null!=o&&null!=a&&t.start(o,a,r))}},mxSelectionCellsHandler.prototype.mouseDown=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var r=[e,t];this.handlers.visit(function(o,a){a.mouseDown.apply(a,r)})}},mxSelectionCellsHandler.prototype.mouseMove=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var r=[e,t];this.handlers.visit(function(o,a){a.mouseMove.apply(a,r)})}},mxSelectionCellsHandler.prototype.mouseUp=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var r=[e,t];this.handlers.visit(function(o,a){a.mouseUp.apply(a,r)})}},mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.refreshHandler&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)},__mxOutput.mxSelectionCellsHandler=void 0!==mxSelectionCellsHandler?mxSelectionCellsHandler:void 0,mxUtils.extend(mxConnectionHandler,mxEventSource),mxConnectionHandler.prototype.graph=null,mxConnectionHandler.prototype.factoryMethod=!0,mxConnectionHandler.prototype.moveIconFront=!1,mxConnectionHandler.prototype.moveIconBack=!1,mxConnectionHandler.prototype.connectImage=null,mxConnectionHandler.prototype.targetConnectImage=!1,mxConnectionHandler.prototype.enabled=!0,mxConnectionHandler.prototype.select=!0,mxConnectionHandler.prototype.createTarget=!1,mxConnectionHandler.prototype.marker=null,mxConnectionHandler.prototype.constraintHandler=null,mxConnectionHandler.prototype.error=null,mxConnectionHandler.prototype.waypointsEnabled=!1,mxConnectionHandler.prototype.ignoreMouseDown=!1,mxConnectionHandler.prototype.first=null,mxConnectionHandler.prototype.connectIconOffset=new mxPoint(0,mxConstants.TOOLTIP_VERTICAL_OFFSET),mxConnectionHandler.prototype.edgeState=null,mxConnectionHandler.prototype.changeHandler=null,mxConnectionHandler.prototype.drillHandler=null,mxConnectionHandler.prototype.mouseDownCounter=0,mxConnectionHandler.prototype.movePreviewAway=mxClient.IS_VML,mxConnectionHandler.prototype.outlineConnect=!1,mxConnectionHandler.prototype.livePreview=!1,mxConnectionHandler.prototype.cursor=null,mxConnectionHandler.prototype.insertBeforeSource=!1,mxConnectionHandler.prototype.isEnabled=function(){return this.enabled},mxConnectionHandler.prototype.setEnabled=function(e){this.enabled=e},mxConnectionHandler.prototype.isInsertBefore=function(e,t,r,o,a){return this.insertBeforeSource&&t!=r},mxConnectionHandler.prototype.isCreateTarget=function(e){return this.createTarget},mxConnectionHandler.prototype.setCreateTarget=function(e){this.createTarget=e},mxConnectionHandler.prototype.createShape=function(){var e=this.livePreview&&null!=this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants.INVALID_COLOR);return e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.scale=this.graph.view.scale,e.pointerEvents=!1,e.isDashed=!0,e.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(e.node,this.graph,null),e},mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils.bind(this,function(e){null!=this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),null!=this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):null!=this.previous&&null==this.graph.view.getState(this.previous.cell)&&this.reset()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils.bind(this,function(e){this.reset()}),this.graph.addListener(mxEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent.UP,this.drillHandler)},mxConnectionHandler.prototype.isConnectableCell=function(e){return!0},mxConnectionHandler.prototype.createMarker=function(){var e=new mxCellMarker(this.graph);return e.hotspotEnabled=!0,e.getCell=mxUtils.bind(this,function(t){var r=mxCellMarker.prototype.getCell.apply(e,arguments);if(this.error=null,null==r&&null!=this.currentPoint&&(r=this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y)),null!=r&&!this.graph.isCellConnectable(r)){var o=this.graph.getModel().getParent(r);this.graph.getModel().isVertex(o)&&this.graph.isCellConnectable(o)&&(r=o)}return(this.graph.isSwimlane(r)&&null!=this.currentPoint&&this.graph.hitsSwimlaneContent(r,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(r))&&(r=null),null!=r?this.isConnecting()?null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,r),null!=this.error&&0==this.error.length&&(r=null,this.isCreateTarget(t.getEvent())&&(this.error=null))):this.isValidSource(r,t)||(r=null):this.isConnecting()&&!this.isCreateTarget(t.getEvent())&&!this.graph.allowDanglingEdges&&(this.error=""),r}),e.isValidState=mxUtils.bind(this,function(t){return this.isConnecting()?null==this.error:mxCellMarker.prototype.isValidState.apply(e,arguments)}),e.getMarkerColor=mxUtils.bind(this,function(t,r,o){return null==this.connectImage||this.isConnecting()?mxCellMarker.prototype.getMarkerColor.apply(e,arguments):null}),e.intersects=mxUtils.bind(this,function(t,r){return!(null==this.connectImage&&!this.isConnecting())||mxCellMarker.prototype.intersects.apply(e,arguments)}),e},mxConnectionHandler.prototype.start=function(e,t,r,o){this.previous=e,this.first=new mxPoint(t,r),this.edgeState=null!=o?o:this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=e,this.marker.mark(),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous))},mxConnectionHandler.prototype.isConnecting=function(){return null!=this.first&&null!=this.shape},mxConnectionHandler.prototype.isValidSource=function(e,t){return this.graph.isValidSource(e)},mxConnectionHandler.prototype.isValidTarget=function(e){return!0},mxConnectionHandler.prototype.validateConnection=function(e,t){return this.isValidTarget(t)?this.graph.getEdgeValidationError(null,e,t):""},mxConnectionHandler.prototype.getConnectImage=function(e){return this.connectImage},mxConnectionHandler.prototype.isMoveIconToFrontForState=function(e){return null!=e.text&&e.text.node.parentNode==this.graph.container||this.moveIconFront},mxConnectionHandler.prototype.createIcons=function(e){var t=this.getConnectImage(e);if(null!=t&&null!=e){this.iconState=e;var r=[],a=new mxImageShape(new mxRectangle(0,0,t.width,t.height),t.src,null,null,0);a.preserveImageAspect=!1,this.isMoveIconToFrontForState(e)?(a.dialect=mxConstants.DIALECT_STRICTHTML,a.init(this.graph.container)):(a.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,a.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&null!=a.node.previousSibling&&a.node.parentNode.insertBefore(a.node,a.node.parentNode.firstChild)),a.node.style.cursor=mxConstants.CURSOR_CONNECT;var u=mxUtils.bind(this,function(){return null!=this.currentState?this.currentState:e}),c=mxUtils.bind(this,function(f){mxEvent.isConsumed(f)||(this.icon=a,this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(f,u())))});return mxEvent.redirectMouseEvents(a.node,this.graph,u,c),r.push(a),this.redrawIcons(r,this.iconState),r}return null},mxConnectionHandler.prototype.redrawIcons=function(e,t){if(null!=e&&null!=e[0]&&null!=t){var r=this.getIconPosition(e[0],t);e[0].bounds.x=r.x,e[0].bounds.y=r.y,e[0].redraw()}},mxConnectionHandler.prototype.getIconPosition=function(e,t){var r=this.graph.getView().scale,o=t.getCenterX(),a=t.getCenterY();if(this.graph.isSwimlane(t.cell)){var u=this.graph.getStartSize(t.cell);o=0!=u.width?t.x+u.width*r/2:o,a=0!=u.height?t.y+u.height*r/2:a;var c=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0);if(0!=c){var f=Math.cos(c),m=Math.sin(c),x=new mxPoint(t.getCenterX(),t.getCenterY()),v=mxUtils.getRotatedPoint(new mxPoint(o,a),f,m,x);o=v.x,a=v.y}}return new mxPoint(o-e.bounds.width/2,a-e.bounds.height/2)},mxConnectionHandler.prototype.destroyIcons=function(){if(null!=this.icons){for(var e=0;e<this.icons.length;e++)this.icons[e].destroy();this.icons=null,this.icon=null,this.selectedIcon=null,this.iconState=null}},mxConnectionHandler.prototype.isStartEvent=function(e){return null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint||null!=this.previous&&null==this.error&&(null==this.icons||null!=this.icons&&null!=this.icon)},mxConnectionHandler.prototype.mouseDown=function(e,t){if(this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!t.isConsumed()&&!this.isConnecting()&&this.isStartEvent(t)){if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(t.getGraphX(),t.getGraphY()),this.edgeState=this.createEdgeState(t),this.mouseDownCounter=1,this.waypointsEnabled&&null==this.shape&&(this.waypoints=null,this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState)),null==this.previous&&null!=this.edgeState){var r=this.graph.getPointForEvent(t.getEvent());this.edgeState.cell.geometry.setTerminalPoint(r,!0)}this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous)),t.consume()}this.selectedIcon=this.icon,this.icon=null},mxConnectionHandler.prototype.isImmediateConnectSource=function(e){return!this.graph.isCellMovable(e.cell)},mxConnectionHandler.prototype.createEdgeState=function(e){return null},mxConnectionHandler.prototype.isOutlineConnectEvent=function(e){var t=mxUtils.getOffset(this.graph.container),r=e.getEvent(),o=mxEvent.getClientX(r),a=mxEvent.getClientY(r),u=document.documentElement,c=(window.pageXOffset||u.scrollLeft)-(u.clientLeft||0),f=(window.pageYOffset||u.scrollTop)-(u.clientTop||0),m=this.currentPoint.x-this.graph.container.scrollLeft+t.x-c,x=this.currentPoint.y-this.graph.container.scrollTop+t.y-f;return this.outlineConnect&&!mxEvent.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(e.getEvent())&&null!=e.getState()||this.marker.highlight.isHighlightAt(o,a)||(m!=o||x!=a)&&null==e.getState()&&this.marker.highlight.isHighlightAt(m,x))},mxConnectionHandler.prototype.updateCurrentState=function(e,t){if(this.constraintHandler.update(e,null==this.first,!1,null==this.first||e.isSource(this.marker.highlight.shape)?null:t),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint)null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),null==this.error&&(this.currentState=this.constraintHandler.currentFocus),(null!=this.error||null!=this.currentState&&!this.isCellEnabled(this.currentState.cell))&&this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(e.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(e),this.currentState=this.marker.getValidState()),null!=this.currentState&&!this.isCellEnabled(this.currentState.cell)&&(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null);var r=this.isOutlineConnectEvent(e);if(null!=this.currentState&&r){e.isSource(this.marker.highlight.shape)&&(t=new mxPoint(e.getGraphX(),e.getGraphY()));var o=this.graph.getOutlineConstraint(t,this.currentState,e);this.constraintHandler.setFocus(e,this.currentState,!1),this.constraintHandler.currentConstraint=o,this.constraintHandler.currentPoint=t}if(this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var a=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=mxConstants.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/a/a,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.graph.isCellConnectable(e.getCell())&&this.marker.getValidState()!=e.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/a/a,this.marker.highlight.repaint())}}},mxConnectionHandler.prototype.isCellEnabled=function(e){return!0},mxConnectionHandler.prototype.convertWaypoint=function(e){var t=this.graph.getView().getScale(),r=this.graph.getView().getTranslate();e.x=e.x/t-r.x,e.y=e.y/t-r.y},mxConnectionHandler.prototype.snapToPreview=function(e,t){if(!mxEvent.isAltDown(e.getEvent())&&null!=this.previous){var r=this.graph.gridSize*this.graph.view.scale/2,o=null!=this.sourceConstraint?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(o.x-e.getGraphX())<r&&(t.x=o.x),Math.abs(o.y-e.getGraphY())<r&&(t.y=o.y)}},mxConnectionHandler.prototype.mouseMove=function(e,t){if(t.isConsumed()||!this.ignoreMouseDown&&null==this.first&&this.graph.isMouseDown)this.constraintHandler.reset();else{!this.isEnabled()&&null!=this.currentState&&(this.destroyIcons(),this.currentState=null);var r=this.graph.getView(),o=r.scale,a=r.translate,u=new mxPoint(t.getGraphX(),t.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(t.getEvent())&&(u=new mxPoint((this.graph.snap(u.x/o-a.x)+a.x)*o,(this.graph.snap(u.y/o-a.y)+a.y)*o)),this.snapToPreview(t,u),this.currentPoint=u,(null!=this.first||this.isEnabled()&&this.graph.isEnabled())&&(null!=this.shape||null==this.first||Math.abs(t.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(t.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(t,u),null!=this.first){var c=null,f=u;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(c=this.constraintHandler.currentConstraint,f=this.constraintHandler.currentPoint.clone()):null!=this.previous&&!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent.isShiftDown(t.getEvent())&&(Math.abs(this.previous.getCenterX()-u.x)<Math.abs(this.previous.getCenterY()-u.y)?u.x=this.previous.getCenterX():u.y=this.previous.getCenterY());var m=this.first;if(null!=this.selectedIcon){var x=this.selectedIcon.bounds.width,v=this.selectedIcon.bounds.height;if(null!=this.currentState&&this.targetConnectImage){var E=this.getIconPosition(this.selectedIcon,this.currentState);this.selectedIcon.bounds.x=E.x,this.selectedIcon.bounds.y=E.y}else{var S=new mxRectangle(t.getGraphX()+this.connectIconOffset.x,t.getGraphY()+this.connectIconOffset.y,x,v);this.selectedIcon.bounds=S}this.selectedIcon.redraw()}if(null!=this.edgeState?(this.updateEdgeState(f,c),f=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],m=this.edgeState.absolutePoints[0]):(null!=this.currentState&&null==this.constraintHandler.currentConstraint&&null!=(b=this.getTargetPerimeterPoint(this.currentState,t))&&(f=b),null==this.sourceConstraint&&null!=this.previous&&null!=(b=this.getSourcePerimeterPoint(this.previous,null!=this.waypoints&&this.waypoints.length>0?this.waypoints[0]:f,t))&&(m=b)),null==this.currentState&&this.movePreviewAway){var b=m;if(null!=this.edgeState&&this.edgeState.absolutePoints.length>=2){var D=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2];null!=D&&(b=D)}var M=f.x-b.x,R=f.y-b.y,N=Math.sqrt(M*M+R*R);if(0==N)return;this.originalPoint=f.clone(),f.x-=4*M/N,f.y-=4*R/N}else this.originalPoint=null;if(null==this.shape&&(M=Math.abs(t.getGraphX()-this.first.x),R=Math.abs(t.getGraphY()-this.first.y),(M>this.graph.tolerance||R>this.graph.tolerance)&&(this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(t,u))),null!=this.shape){if(null!=this.edgeState)this.shape.points=this.edgeState.absolutePoints;else{var V=[m];null!=this.waypoints&&(V=V.concat(this.waypoints)),V.push(f),this.shape.points=V}this.drawPreview()}null!=this.cursor&&(this.graph.container.style.cursor=this.cursor),mxEvent.consume(t.getEvent()),t.consume()}else this.isEnabled()&&this.graph.isEnabled()?this.previous!=this.currentState&&null==this.edgeState?(this.destroyIcons(),null!=this.currentState&&null==this.error&&null==this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),null==this.icons&&(this.currentState.setCursor(mxConstants.CURSOR_CONNECT),t.consume())),this.previous=this.currentState):this.previous==this.currentState&&null!=this.currentState&&null==this.icons&&!this.graph.isMouseDown&&t.consume():this.constraintHandler.reset();if(!this.graph.isMouseDown&&null!=this.currentState&&null!=this.icons){for(var O=!1,F=t.getSource(),G=0;G<this.icons.length&&!O;G++)O=F==this.icons[G].node||F.parentNode==this.icons[G].node;O||this.updateIcons(this.currentState,this.icons,t)}}},mxConnectionHandler.prototype.updateEdgeState=function(e,t){null!=this.sourceConstraint&&null!=this.sourceConstraint.point&&(this.edgeState.style[mxConstants.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants.STYLE_EXIT_Y]=this.sourceConstraint.point.y),null!=t&&null!=t.point?(this.edgeState.style[mxConstants.STYLE_ENTRY_X]=t.point.x,this.edgeState.style[mxConstants.STYLE_ENTRY_Y]=t.point.y):(delete this.edgeState.style[mxConstants.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,null!=this.currentState?null:e],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),null!=this.currentState&&(null==t&&(t=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,t));var r=null;if(null!=this.waypoints){r=[];for(var o=0;o<this.waypoints.length;o++){var a=this.waypoints[o].clone();this.convertWaypoint(a),r[o]=a}}this.graph.view.updatePoints(this.edgeState,r,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)},mxConnectionHandler.prototype.getTargetPerimeterPoint=function(e,t){var r=null,o=e.view,a=o.getPerimeterFunction(e);if(null!=a){var u=null!=this.waypoints&&this.waypoints.length>0?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),c=a(o.getPerimeterBounds(e),this.edgeState,u,!1);null!=c&&(r=c)}else r=new mxPoint(e.getCenterX(),e.getCenterY());return r},mxConnectionHandler.prototype.getSourcePerimeterPoint=function(e,t,r){var o=null,a=e.view,u=a.getPerimeterFunction(e),c=new mxPoint(e.getCenterX(),e.getCenterY());if(null!=u){var f=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0),m=-f*(Math.PI/180);0!=f&&(t=mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(m),Math.sin(m),c));var x=u(a.getPerimeterBounds(e),e,t,!1);null!=x&&(0!=f&&(x=mxUtils.getRotatedPoint(new mxPoint(x.x,x.y),Math.cos(-m),Math.sin(-m),c)),o=x)}else o=c;return o},mxConnectionHandler.prototype.updateIcons=function(e,t,r){},mxConnectionHandler.prototype.isStopEvent=function(e){return null!=e.getState()},mxConnectionHandler.prototype.addWaypointForEvent=function(e){var t=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY()),r=Math.abs(t.x-this.first.x),o=Math.abs(t.y-this.first.y);if(null!=this.waypoints||this.mouseDownCounter>1&&(r>this.graph.tolerance||o>this.graph.tolerance)){null==this.waypoints&&(this.waypoints=[]);var u=this.graph.view.scale;t=new mxPoint(this.graph.snap(e.getGraphX()/u)*u,this.graph.snap(e.getGraphY()/u)*u),this.waypoints.push(t)}},mxConnectionHandler.prototype.checkConstraints=function(e,t){return null==e||null==t||null==e.point||null==t.point||!e.point.equals(t.point)||e.dx!=t.dx||e.dy!=t.dy||e.perimeter!=t.perimeter},mxConnectionHandler.prototype.mouseUp=function(e,t){if(!t.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(t))return this.addWaypointForEvent(t),void t.consume();var a=null!=this.previous?this.previous.cell:null,u=null;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(u=this.constraintHandler.currentFocus.cell),null==u&&null!=this.currentState&&(u=this.currentState.cell),null!=this.error||null!=a&&null!=u&&a==u&&!this.checkConstraints(this.sourceConstraint,this.constraintHandler.currentConstraint)?(null!=this.previous&&null!=this.marker.validState&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,t.getEvent()),null!=this.error&&this.error.length>0&&this.graph.validationAlert(this.error)):this.connect(a,u,t.getEvent(),t.getCell()),this.destroyIcons(),t.consume()}null!=this.first&&this.reset()},mxConnectionHandler.prototype.reset=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.cursor&&null!=this.graph.container&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject(mxEvent.RESET))},mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(null==this.error),this.shape.redraw()},mxConnectionHandler.prototype.updatePreview=function(e){this.shape.strokewidth=this.getEdgeWidth(e),this.shape.stroke=this.getEdgeColor(e)},mxConnectionHandler.prototype.getEdgeColor=function(e){return e?mxConstants.VALID_COLOR:mxConstants.INVALID_COLOR},mxConnectionHandler.prototype.getEdgeWidth=function(e){return e?3:1},mxConnectionHandler.prototype.connect=function(e,t,r,o){if(null!=t||this.isCreateTarget(r)||this.graph.allowDanglingEdges){var a=this.graph.getModel(),u=!1,c=null;a.beginUpdate();try{if(null!=e&&null==t&&!this.graph.isIgnoreTerminalEvent(r)&&this.isCreateTarget(r)&&null!=(t=this.createTargetVertex(r,e))){if(o=this.graph.getDropTarget([t],r,o),u=!0,null!=o&&this.graph.getModel().isEdge(o))o=this.graph.getDefaultParent();else{var f=this.graph.getView().getState(o);null!=f&&((m=a.getGeometry(t)).x-=f.origin.x,m.y-=f.origin.y)}this.graph.addCell(t,o)}var x=this.graph.getDefaultParent();null!=e&&null!=t&&a.getParent(e)==a.getParent(t)&&a.getParent(a.getParent(e))!=a.getRoot()&&(x=a.getParent(e),null!=e.geometry&&e.geometry.relative&&null!=t.geometry&&t.geometry.relative&&(x=a.getParent(x)));var v=null,E=null;if(null!=this.edgeState&&(v=this.edgeState.cell.value,E=this.edgeState.cell.style),null!=(c=this.insertEdge(x,null,v,e,t,E))){if(this.graph.setConnectionConstraint(c,e,!0,this.sourceConstraint),this.graph.setConnectionConstraint(c,t,!1,this.constraintHandler.currentConstraint),null!=this.edgeState&&a.setGeometry(c,this.edgeState.cell.geometry),x=a.getParent(e),this.isInsertBefore(c,e,t,r,o)){for(var m=e;null!=m.parent&&null!=m.geometry&&m.geometry.relative&&m.parent!=c.parent;)m=this.graph.model.getParent(m);null!=m&&null!=m.parent&&m.parent==c.parent&&a.add(x,c,m.parent.getIndex(m))}var b=a.getGeometry(c);if(null==b&&((b=new mxGeometry).relative=!0,a.setGeometry(c,b)),null!=this.waypoints&&this.waypoints.length>0){var _=this.graph.view.scale,D=this.graph.view.translate;b.points=[];for(var M=0;M<this.waypoints.length;M++)b.points.push(new mxPoint((R=this.waypoints[M]).x/_-D.x,R.y/_-D.y))}if(null==t){var R,N=this.graph.view.translate;_=this.graph.view.scale,(R=null!=this.originalPoint?new mxPoint(this.originalPoint.x/_-N.x,this.originalPoint.y/_-N.y):new mxPoint(this.currentPoint.x/_-N.x,this.currentPoint.y/_-N.y)).x-=this.graph.panDx/this.graph.view.scale,R.y-=this.graph.panDy/this.graph.view.scale,b.setTerminalPoint(R,!1)}this.fireEvent(new mxEventObject(mxEvent.CONNECT,"cell",c,"terminal",t,"event",r,"target",o,"terminalInserted",u))}}catch(V){mxLog.show(),mxLog.debug(V.message)}finally{a.endUpdate()}this.select&&this.selectCells(c,u?t:null)}},mxConnectionHandler.prototype.selectCells=function(e,t){this.graph.setSelectionCell(e)},mxConnectionHandler.prototype.insertEdge=function(e,t,r,o,a,u){if(null==this.factoryMethod)return this.graph.insertEdge(e,t,r,o,a,u);var c=this.createEdge(r,o,a,u);return this.graph.addEdge(c,e,o,a)},mxConnectionHandler.prototype.createTargetVertex=function(e,t){for(var r=this.graph.getCellGeometry(t);null!=r&&r.relative;)t=this.graph.getModel().getParent(t),r=this.graph.getCellGeometry(t);var o=this.graph.cloneCell(t);if(null!=(r=this.graph.getModel().getGeometry(o))){var a=this.graph.view.translate,u=this.graph.view.scale,c=new mxPoint(this.currentPoint.x/u-a.x,this.currentPoint.y/u-a.y);r.x=Math.round(c.x-r.width/2-this.graph.panDx/u),r.y=Math.round(c.y-r.height/2-this.graph.panDy/u);var f=this.getAlignmentTolerance();if(f>0){var m=this.graph.view.getState(t);if(null!=m){var x=m.x/u-a.x,v=m.y/u-a.y;Math.abs(x-r.x)<=f&&(r.x=Math.round(x)),Math.abs(v-r.y)<=f&&(r.y=Math.round(v))}}}return o},mxConnectionHandler.prototype.getAlignmentTolerance=function(e){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance},mxConnectionHandler.prototype.createEdge=function(e,t,r,o){var a=null;if(null!=this.factoryMethod&&(a=this.factoryMethod(t,r,o)),null==a){(a=new mxCell(e||"")).setEdge(!0),a.setStyle(o);var u=new mxGeometry;u.relative=!0,a.setGeometry(u)}return a},mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),null!=this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)},__mxOutput.mxConnectionHandler=void 0!==mxConnectionHandler?mxConnectionHandler:void 0,mxConstraintHandler.prototype.pointImage=new mxImage(mxClient.imageBasePath+"/point.gif",5,5),mxConstraintHandler.prototype.graph=null,mxConstraintHandler.prototype.enabled=!0,mxConstraintHandler.prototype.highlightColor=mxConstants.DEFAULT_VALID_COLOR,mxConstraintHandler.prototype.isEnabled=function(){return this.enabled},mxConstraintHandler.prototype.setEnabled=function(e){this.enabled=e},mxConstraintHandler.prototype.reset=function(){if(null!=this.focusIcons){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null}null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=null},mxConstraintHandler.prototype.getTolerance=function(e){return this.graph.getTolerance()},mxConstraintHandler.prototype.getImageForConstraint=function(e,t,r){return this.pointImage},mxConstraintHandler.prototype.isEventIgnored=function(e,t){return!1},mxConstraintHandler.prototype.isStateIgnored=function(e,t){return!1},mxConstraintHandler.prototype.destroyIcons=function(){if(null!=this.focusIcons){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null,this.focusPoints=null}},mxConstraintHandler.prototype.destroyFocusHighlight=function(){null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)},mxConstraintHandler.prototype.isKeepFocusEvent=function(e){return mxEvent.isShiftDown(e.getEvent())},mxConstraintHandler.prototype.getCellForEvent=function(e,t){var r=e.getCell();if(null==r&&null!=t&&(e.getGraphX()!=t.x||e.getGraphY()!=t.y)&&(r=this.graph.getCellAt(t.x,t.y)),null!=r&&!this.graph.isCellConnectable(r)){var o=this.graph.getModel().getParent(r);this.graph.getModel().isVertex(o)&&this.graph.isCellConnectable(o)&&(r=o)}return this.graph.isCellLocked(r)?null:r},mxConstraintHandler.prototype.update=function(e,t,r,o){if(this.isEnabled()&&!this.isEventIgnored(e)){null==this.mouseleaveHandler&&null!=this.graph.container&&(this.mouseleaveHandler=mxUtils.bind(this,function(){this.reset()}),mxEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));var a=this.getTolerance(e),f=new mxRectangle((null!=o?o.x:e.getGraphX())-a,(null!=o?o.y:e.getGraphY())-a,2*a,2*a),m=new mxRectangle(e.getGraphX()-a,e.getGraphY()-a,2*a,2*a),x=this.graph.view.getState(this.getCellForEvent(e,o));!this.isKeepFocusEvent(e)&&(null==this.currentFocusArea||null==this.currentFocus||null!=x||!this.graph.getModel().isVertex(this.currentFocus.cell)||!mxUtils.intersects(this.currentFocusArea,m))&&x!=this.currentFocus&&(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(e,x,t)),this.currentConstraint=null,this.currentPoint=null;var v=null;if(null!=this.focusIcons&&null!=this.constraints&&(null==x||this.currentFocus==x))for(var E=m.getCenterX(),S=m.getCenterY(),b=0;b<this.focusIcons.length;b++){var _=E-this.focusIcons[b].bounds.getCenterX(),D=S-this.focusIcons[b].bounds.getCenterY(),M=_*_+D*D;if((this.intersects(this.focusIcons[b],m,t,r)||null!=o&&this.intersects(this.focusIcons[b],f,t,r))&&(null==v||M<v)){if(this.currentConstraint=this.constraints[b],this.currentPoint=this.focusPoints[b],v=M,(M=this.focusIcons[b].bounds.clone()).grow(mxConstants.HIGHLIGHT_SIZE+1),M.width-=1,M.height-=1,null==this.focusHighlight){var R=this.createHighlightShape();R.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,R.pointerEvents=!1,R.init(this.graph.getView().getOverlayPane()),this.focusHighlight=R;var N=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:x});mxEvent.redirectMouseEvents(R.node,this.graph,N)}this.focusHighlight.bounds=M,this.focusHighlight.redraw()}}null==this.currentConstraint&&this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null},mxConstraintHandler.prototype.redraw=function(){if(null!=this.currentFocus&&null!=this.constraints&&null!=this.focusIcons){var e=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=e,this.currentFocusArea=new mxRectangle(e.x,e.y,e.width,e.height);for(var t=0;t<this.constraints.length;t++){var r=this.graph.getConnectionPoint(e,this.constraints[t]),o=this.getImageForConstraint(e,this.constraints[t],r),a=new mxRectangle(Math.round(r.x-o.width/2),Math.round(r.y-o.height/2),o.width,o.height);this.focusIcons[t].bounds=a,this.focusIcons[t].redraw(),this.currentFocusArea.add(this.focusIcons[t].bounds),this.focusPoints[t]=r}}},mxConstraintHandler.prototype.setFocus=function(e,t,r){if(this.constraints=null!=t&&!this.isStateIgnored(t,r)&&this.graph.isCellConnectable(t.cell)?this.isEnabled()&&this.graph.getAllConnectionConstraints(t,r)||[]:null,null!=this.constraints){if(this.currentFocus=t,this.currentFocusArea=new mxRectangle(t.x,t.y,t.width,t.height),null!=this.focusIcons){for(var o=0;o<this.focusIcons.length;o++)this.focusIcons[o].destroy();this.focusIcons=null,this.focusPoints=null}for(this.focusPoints=[],this.focusIcons=[],o=0;o<this.constraints.length;o++){var a=this.graph.getConnectionPoint(t,this.constraints[o]),u=this.getImageForConstraint(t,this.constraints[o],a),c=u.src,m=new mxImageShape(new mxRectangle(Math.round(a.x-u.width/2),Math.round(a.y-u.height/2),u.width,u.height),c);m.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,m.preserveImageAspect=!1,m.init(this.graph.getView().getDecoratorPane()),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(m.node,"dragstart",function(E){return mxEvent.consume(E),!1}),null!=m.node.previousSibling&&m.node.parentNode.insertBefore(m.node,m.node.parentNode.firstChild);var x=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:t});m.redraw(),mxEvent.redirectMouseEvents(m.node,this.graph,x),this.currentFocusArea.add(m.bounds),this.focusIcons.push(m),this.focusPoints.push(a)}this.currentFocusArea.grow(this.getTolerance(e))}else this.destroyIcons(),this.destroyFocusHighlight()},mxConstraintHandler.prototype.createHighlightShape=function(){var e=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants.HIGHLIGHT_STROKEWIDTH);return e.opacity=mxConstants.HIGHLIGHT_OPACITY,e},mxConstraintHandler.prototype.intersects=function(e,t,r,o){return mxUtils.intersects(e.bounds,t)},mxConstraintHandler.prototype.destroy=function(){this.reset(),null!=this.resetHandler&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),null!=this.mouseleaveHandler&&null!=this.graph.container&&(mxEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)},__mxOutput.mxConstraintHandler=void 0!==mxConstraintHandler?mxConstraintHandler:void 0,mxRubberband.prototype.defaultOpacity=20,mxRubberband.prototype.enabled=!0,mxRubberband.prototype.div=null,mxRubberband.prototype.sharedDiv=null,mxRubberband.prototype.currentX=0,mxRubberband.prototype.currentY=0,mxRubberband.prototype.fadeOut=!1,mxRubberband.prototype.isEnabled=function(){return this.enabled},mxRubberband.prototype.setEnabled=function(e){this.enabled=e},mxRubberband.prototype.isForceRubberbandEvent=function(e){return mxEvent.isAltDown(e.getEvent())},mxRubberband.prototype.mouseDown=function(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null==t.getState()&&!mxEvent.isMultiTouchEvent(t.getEvent())){var r=mxUtils.getOffset(this.graph.container),o=mxUtils.getScrollOrigin(this.graph.container);o.x-=r.x,o.y-=r.y,this.start(t.getX()+o.x,t.getY()+o.y),t.consume(!1)}},mxRubberband.prototype.start=function(e,t){this.first=new mxPoint(e,t);var r=this.graph.container;function o(a){var u=new mxMouseEvent(a),c=mxUtils.convertPoint(r,u.getX(),u.getY());return u.graphX=c.x,u.graphY=c.y,u}this.dragHandler=mxUtils.bind(this,function(a){this.mouseMove(this.graph,o(a))}),this.dropHandler=mxUtils.bind(this,function(a){this.mouseUp(this.graph,o(a))}),mxClient.IS_FF&&mxEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)},mxRubberband.prototype.mouseMove=function(e,t){if(!t.isConsumed()&&null!=this.first){var r=mxUtils.getScrollOrigin(this.graph.container),o=mxUtils.getOffset(this.graph.container);r.x-=o.x,r.y-=o.y;var a=t.getX()+r.x,u=t.getY()+r.y,f=this.first.y-u,m=this.graph.tolerance;(null!=this.div||Math.abs(this.first.x-a)>m||Math.abs(f)>m)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(a,u),t.consume())}},mxRubberband.prototype.createShape=function(){null==this.sharedDiv&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var e=this.sharedDiv;return mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&this.fadeOut&&(this.sharedDiv=null),e},mxRubberband.prototype.isActive=function(e,t){return null!=this.div&&"none"!=this.div.style.display},mxRubberband.prototype.mouseUp=function(e,t){var r=this.isActive();this.reset(),r&&(this.execute(t.getEvent()),t.consume())},mxRubberband.prototype.execute=function(e){var t=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(t,e)},mxRubberband.prototype.reset=function(){if(null!=this.div)if(mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&this.fadeOut){var e=this.div;mxUtils.setPrefixedStyle(e.style,"transition","all 0.2s linear"),e.style.pointerEvents="none",e.style.opacity=0,window.setTimeout(function(){e.parentNode.removeChild(e)},200)}else this.div.parentNode.removeChild(this.div);mxEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null},mxRubberband.prototype.update=function(e,t){this.currentX=e,this.currentY=t,this.repaint()},mxRubberband.prototype.repaint=function(){if(null!=this.div){var e=this.currentX-this.graph.panDx,t=this.currentY-this.graph.panDy;this.x=Math.min(this.first.x,e),this.y=Math.min(this.first.y,t),this.width=Math.max(this.first.x,e)-this.x,this.height=Math.max(this.first.y,t)-this.y;var o=mxClient.IS_VML?this.graph.panDy:0;this.div.style.left=this.x+(mxClient.IS_VML?this.graph.panDx:0)+"px",this.div.style.top=this.y+o+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px"}},mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),null!=this.sharedDiv&&(this.sharedDiv=null))},__mxOutput.mxRubberband=void 0!==mxRubberband?mxRubberband:void 0,mxHandle.prototype.cursor="default",mxHandle.prototype.image=null,mxHandle.prototype.ignoreGrid=!1,mxHandle.prototype.getPosition=function(e){},mxHandle.prototype.setPosition=function(e,t,r){},mxHandle.prototype.execute=function(e){},mxHandle.prototype.copyStyle=function(e){this.graph.setCellStyles(e,this.state.style[e],[this.state.cell])},mxHandle.prototype.processEvent=function(e){var t=this.graph.view.scale,r=this.graph.view.translate,o=new mxPoint(e.getGraphX()/t-r.x,e.getGraphY()/t-r.y);null!=this.shape&&null!=this.shape.bounds&&(o.x-=this.shape.bounds.width/t/4,o.y-=this.shape.bounds.height/t/4);var a=-mxUtils.toRadians(this.getRotation()),u=-mxUtils.toRadians(this.getTotalRotation())-a;o=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(o,a),this.ignoreGrid||!this.graph.isGridEnabledEvent(e.getEvent())),u)),this.setPosition(this.state.getPaintBounds(),o,e),this.redraw()},mxHandle.prototype.positionChanged=function(){null!=this.state.text&&this.state.text.apply(this.state),null!=this.state.shape&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)},mxHandle.prototype.getRotation=function(){return null!=this.state.shape?this.state.shape.getRotation():0},mxHandle.prototype.getTotalRotation=function(){return null!=this.state.shape?this.state.shape.getShapeRotation():0},mxHandle.prototype.init=function(){var e=this.isHtmlRequired();null!=this.image?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):null==this.shape&&(this.shape=this.createShape(e)),this.initShape(e)},mxHandle.prototype.createShape=function(e){return new mxRectangleShape(new mxRectangle(0,0,mxConstants.HANDLE_SIZE,mxConstants.HANDLE_SIZE),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxHandle.prototype.initShape=function(e){e&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,null!=this.cursor&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor},mxHandle.prototype.redraw=function(){if(null!=this.shape&&null!=this.state.shape){var e=this.getPosition(this.state.getPaintBounds());if(null!=e){var t=mxUtils.toRadians(this.getTotalRotation());e=this.rotatePoint(this.flipPoint(e),t);var r=this.graph.view.scale,o=this.graph.view.translate;this.shape.bounds.x=Math.floor((e.x+o.x)*r-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((e.y+o.y)*r-this.shape.bounds.height/2),this.shape.redraw()}}},mxHandle.prototype.isHtmlRequired=function(){return null!=this.state.text&&this.state.text.node.parentNode==this.graph.container},mxHandle.prototype.rotatePoint=function(e,t){var r=this.state.getCellBounds(),o=new mxPoint(r.getCenterX(),r.getCenterY()),a=Math.cos(t),u=Math.sin(t);return mxUtils.getRotatedPoint(e,a,u,o)},mxHandle.prototype.flipPoint=function(e){if(null!=this.state.shape){var t=this.state.getCellBounds();this.state.shape.flipH&&(e.x=2*t.x+t.width-e.x),this.state.shape.flipV&&(e.y=2*t.y+t.height-e.y)}return e},mxHandle.prototype.snapPoint=function(e,t){return t||(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e},mxHandle.prototype.setVisible=function(e){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display=e?"":"none")},mxHandle.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()},mxHandle.prototype.destroy=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null)},__mxOutput.mxHandle=void 0!==mxHandle?mxHandle:void 0,mxVertexHandler.prototype.graph=null,mxVertexHandler.prototype.state=null,mxVertexHandler.prototype.singleSizer=!1,mxVertexHandler.prototype.index=null,mxVertexHandler.prototype.allowHandleBoundsCheck=!0,mxVertexHandler.prototype.handleImage=null,mxVertexHandler.prototype.handlesVisible=!0,mxVertexHandler.prototype.tolerance=0,mxVertexHandler.prototype.rotationEnabled=!1,mxVertexHandler.prototype.parentHighlightEnabled=!1,mxVertexHandler.prototype.rotationRaster=!0,mxVertexHandler.prototype.rotationCursor="crosshair",mxVertexHandler.prototype.livePreview=!1,mxVertexHandler.prototype.movePreviewToFront=!1,mxVertexHandler.prototype.manageSizers=!1,mxVertexHandler.prototype.constrainGroupByChildren=!1,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxVertexHandler.prototype.horizontalOffset=0,mxVertexHandler.prototype.verticalOffset=0,mxVertexHandler.prototype.init=function(){if(this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX),mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells){var e=this.graph.isCellResizable(this.state.cell);if(this.sizers=[],e||this.graph.isLabelMovable(this.state.cell)&&this.state.width>=2&&this.state.height>=2){var t=0;e&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",t++)),this.sizers.push(this.createSizer("n-resize",t++)),this.sizers.push(this.createSizer("ne-resize",t++)),this.sizers.push(this.createSizer("w-resize",t++)),this.sizers.push(this.createSizer("e-resize",t++)),this.sizers.push(this.createSizer("sw-resize",t++)),this.sizers.push(this.createSizer("s-resize",t++))),this.sizers.push(this.createSizer("se-resize",t++)));var r=this.graph.model.getGeometry(this.state.cell);null!=r&&!r.relative&&!this.graph.isSwimlane(this.state.cell)&&this.graph.isLabelMovable(this.state.cell)&&(this.labelShape=this.createSizer(mxConstants.CURSOR_LABEL_HANDLE,mxEvent.LABEL_HANDLE,mxConstants.LABEL_HANDLE_SIZE,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,mxEvent.LABEL_HANDLE,null,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent.ROTATION_HANDLE,mxConstants.HANDLE_SIZE+3,mxConstants.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)},mxVertexHandler.prototype.isConstrainedEvent=function(e){return mxEvent.isShiftDown(e.getEvent())||"fixed"==this.state.style[mxConstants.STYLE_ASPECT]},mxVertexHandler.prototype.isCenteredEvent=function(e,t){return!1},mxVertexHandler.prototype.createCustomHandles=function(){return null},mxVertexHandler.prototype.updateMinBounds=function(){var e=this.graph.getChildCells(this.state.cell);if(e.length>0&&(this.minBounds=this.graph.view.getBounds(e),null!=this.minBounds)){var t=this.state.view.scale,r=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=t,this.minBounds.y/=t,this.minBounds.width/=t,this.minBounds.height/=t,this.x0=this.state.x/t-r.x,this.y0=this.state.y/t-r.y}},mxVertexHandler.prototype.getSelectionBounds=function(e){return new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))},mxVertexHandler.prototype.createParentHighlightShape=function(e){return this.createSelectionShape(e)},mxVertexHandler.prototype.createSelectionShape=function(e){var t=new mxRectangleShape(mxRectangle.fromRectangle(e),null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxVertexHandler.prototype.getSelectionColor=function(){return mxConstants.VERTEX_SELECTION_COLOR},mxVertexHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.VERTEX_SELECTION_STROKEWIDTH},mxVertexHandler.prototype.isSelectionDashed=function(){return mxConstants.VERTEX_SELECTION_DASHED},mxVertexHandler.prototype.createSizer=function(e,t,r,o){var a=new mxRectangle(0,0,r=r||mxConstants.HANDLE_SIZE,r),u=this.createSizerShape(a,t,o);return u.isHtmlAllowed()&&null!=this.state.text&&this.state.text.node.parentNode==this.graph.container?(u.bounds.height-=1,u.bounds.width-=1,u.dialect=mxConstants.DIALECT_STRICTHTML,u.init(this.graph.container)):(u.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,u.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(u.node,this.graph,this.state),this.graph.isEnabled()&&u.setCursor(e),this.isSizerVisible(t)||(u.visible=!1),u},mxVertexHandler.prototype.isSizerVisible=function(e){return!0},mxVertexHandler.prototype.createSizerShape=function(e,t,r){if(null!=this.handleImage){var o=new mxImageShape(e=new mxRectangle(e.x,e.y,this.handleImage.width,this.handleImage.height),this.handleImage.src);return o.preserveImageAspect=!1,o}return t==mxEvent.ROTATION_HANDLE?new mxEllipse(e,r||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR):new mxRectangleShape(e,r||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxVertexHandler.prototype.moveSizerTo=function(e,t,r){null!=e&&(e.bounds.x=Math.floor(t-e.bounds.width/2),e.bounds.y=Math.floor(r-e.bounds.height/2),null!=e.node&&"none"!=e.node.style.display&&e.redraw())},mxVertexHandler.prototype.getHandleForEvent=function(e){var t=mxEvent.isMouseEvent(e.getEvent())?1:this.tolerance,r=this.allowHandleBoundsCheck&&(mxClient.IS_IE||t>0)?new mxRectangle(e.getGraphX()-t,e.getGraphY()-t,2*t,2*t):null,o=mxUtils.bind(this,function(u){var c=null!=u&&u.constructor!=mxImageShape&&this.allowHandleBoundsCheck?u.strokewidth+u.svgStrokeTolerance:null,f=null!=c?new mxRectangle(e.getGraphX()-Math.floor(c/2),e.getGraphY()-Math.floor(c/2),c,c):r;return null!=u&&(e.isSource(u)||null!=f&&mxUtils.intersects(u.bounds,f)&&"none"!=u.node.style.display&&"hidden"!=u.node.style.visibility)});if(o(this.rotationShape))return mxEvent.ROTATION_HANDLE;if(o(this.labelShape))return mxEvent.LABEL_HANDLE;if(null!=this.sizers)for(var a=0;a<this.sizers.length;a++)if(o(this.sizers[a]))return a;if(null!=this.customHandles&&this.isCustomHandleEvent(e))for(a=this.customHandles.length-1;a>=0;a--)if(o(this.customHandles[a].shape))return mxEvent.CUSTOM_HANDLE-a;return null},mxVertexHandler.prototype.isCustomHandleEvent=function(e){return!0},mxVertexHandler.prototype.mouseDown=function(e,t){if(!t.isConsumed()&&this.graph.isEnabled()){var r=this.getHandleForEvent(t);null!=r&&(this.start(t.getGraphX(),t.getGraphY(),r),t.consume())}},mxVertexHandler.prototype.isLivePreviewBorder=function(){return null!=this.state.shape&&null==this.state.shape.fill&&null==this.state.shape.stroke},mxVertexHandler.prototype.start=function(e,t,r){if(null!=this.selectionBorder)if(this.livePreviewActive=this.livePreview&&0==this.graph.model.getChildCount(this.state.cell),this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=r,this.startX=e,this.startY=t,this.index<=mxEvent.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else{var o=this.state.view.graph.model,a=o.getParent(this.state.cell);if(this.state.view.currentRoot!=a&&(o.isVertex(a)||o.isEdge(a))&&(this.parentState=this.state.view.graph.view.getState(a)),this.selectionBorder.node.style.display=r==mxEvent.ROTATION_HANDLE?"inline":"none",(!this.livePreviewActive||this.isLivePreviewBorder())&&(this.preview=this.createSelectionShape(this.bounds),mxClient.IS_SVG&&0!=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")||null==this.state.text||this.state.text.node.parentNode!=this.graph.container?(this.preview.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane())):(this.preview.dialect=mxConstants.DIALECT_STRICTHTML,this.preview.init(this.graph.container))),r==mxEvent.ROTATION_HANDLE){var u=this.getRotationHandlePosition(),c=u.x-this.state.getCenterX(),f=u.y-this.state.getCenterY();this.startAngle=0!=c?180*Math.atan(f/c)/Math.PI+90:0,this.startDist=Math.sqrt(c*c+f*f)}if(this.livePreviewActive){this.hideSizers(),r==mxEvent.ROTATION_HANDLE?this.rotationShape.node.style.display="":r==mxEvent.LABEL_HANDLE?this.labelShape.node.style.display="":null!=this.sizers&&null!=this.sizers[r]?this.sizers[r].node.style.display="":r<=mxEvent.CUSTOM_HANDLE&&null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-r].setVisible(!0);var m=this.graph.getEdges(this.state.cell);this.edgeHandlers=[];for(var x=0;x<m.length;x++){var v=this.graph.selectionCellsHandler.getHandler(m[x]);null!=v&&this.edgeHandlers.push(v)}}}},mxVertexHandler.prototype.createGhostPreview=function(){var e=this.graph.cellRenderer.createShape(this.state);return e.init(this.graph.view.getOverlayPane()),e.scale=this.state.view.scale,e.bounds=this.bounds,e.outline=!0,e},mxVertexHandler.prototype.setHandlesVisible=function(e){if(this.handlesVisible=e,null!=this.sizers)for(var t=0;t<this.sizers.length;t++)this.sizers[t].node.style.display=e?"":"none";if(null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(e)},mxVertexHandler.prototype.hideSizers=function(){this.setHandlesVisible(!1)},mxVertexHandler.prototype.checkTolerance=function(e){this.inTolerance&&null!=this.startX&&null!=this.startY&&(mxEvent.isMouseEvent(e.getEvent())||Math.abs(e.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(e.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxVertexHandler.prototype.updateHint=function(e){},mxVertexHandler.prototype.removeHint=function(){},mxVertexHandler.prototype.roundAngle=function(e){return Math.round(10*e)/10},mxVertexHandler.prototype.roundLength=function(e){return Math.round(100*e)/100},mxVertexHandler.prototype.mouseMove=function(e,t){t.isConsumed()||null==this.index?!this.graph.isMouseDown&&null!=this.getHandleForEvent(t)&&t.consume(!1):(this.checkTolerance(t),this.inTolerance||(this.index<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(t),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].active=!0,null!=this.ghostPreview?(this.ghostPreview.apply(this.state),this.ghostPreview.strokewidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),null!=this.selectionBounds&&(this.selectionBorder.node.style.display="none")):(this.movePreviewToFront&&this.moveToFront(),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged())):this.index==mxEvent.LABEL_HANDLE?this.moveLabel(t):(this.index==mxEvent.ROTATION_HANDLE?this.rotateVertex(t):this.resizeVertex(t),this.updateHint(t))),t.consume())},mxVertexHandler.prototype.isGhostPreview=function(){return this.state.view.graph.model.getChildCount(this.state.cell)>0},mxVertexHandler.prototype.moveLabel=function(e){var t=new mxPoint(e.getGraphX(),e.getGraphY()),r=this.graph.view.translate,o=this.graph.view.scale;this.graph.isGridEnabledEvent(e.getEvent())&&(t.x=(this.graph.snap(t.x/o-r.x)+r.x)*o,t.y=(this.graph.snap(t.y/o-r.y)+r.y)*o),this.moveSizerTo(this.sizers[null!=this.rotationShape?this.sizers.length-2:this.sizers.length-1],t.x,t.y)},mxVertexHandler.prototype.rotateVertex=function(e){var t=new mxPoint(e.getGraphX(),e.getGraphY()),o=this.state.y+this.state.height/2-t.y;if(this.currentAlpha=0!=(r=this.state.x+this.state.width/2-t.x)?180*Math.atan(o/r)/Math.PI+90:o<0?180:0,r>0&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(e.getEvent())){var r=t.x-this.state.getCenterX(),a=(o=t.y-this.state.getCenterY(),Math.sqrt(r*r+o*o));raster=a-this.startDist<2?15:a-this.startDist<25?5:1,this.currentAlpha=Math.round(this.currentAlpha/raster)*raster}else this.currentAlpha=this.roundAngle(this.currentAlpha);this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()},mxVertexHandler.prototype.resizeVertex=function(e){var t=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),r=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),o=new mxPoint(e.getGraphX(),e.getGraphY()),a=this.graph.view.translate,u=this.graph.view.scale,c=Math.cos(-r),f=Math.sin(-r),E=f*(m=o.x-this.startX)+c*(x=o.y-this.startY);m=c*m-f*x,x=E;var S=this.graph.getCellGeometry(this.state.cell);if(this.unscaledBounds=this.union(S,m/u,x/u,this.index,this.graph.isGridEnabledEvent(e.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(e),this.isCenteredEvent(this.state,e)),!S.relative){var b=this.graph.getMaximumGraphBounds();if(null!=b&&null!=this.parentState&&((b=mxRectangle.fromRectangle(b)).x-=(this.parentState.x-a.x*u)/u,b.y-=(this.parentState.y-a.y*u)/u),this.graph.isConstrainChild(this.state.cell)){var _=this.graph.getCellContainmentArea(this.state.cell);if(null!=_){var D=this.graph.getOverlap(this.state.cell);D>0&&((_=mxRectangle.fromRectangle(_)).x-=_.width*D,_.y-=_.height*D,_.width+=2*_.width*D,_.height+=2*_.height*D),null==b?b=_:(b=mxRectangle.fromRectangle(b)).intersect(_)}}null!=b&&(this.unscaledBounds.x<b.x&&(this.unscaledBounds.width-=b.x-this.unscaledBounds.x,this.unscaledBounds.x=b.x),this.unscaledBounds.y<b.y&&(this.unscaledBounds.height-=b.y-this.unscaledBounds.y,this.unscaledBounds.y=b.y),this.unscaledBounds.x+this.unscaledBounds.width>b.x+b.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-b.x-b.width),this.unscaledBounds.y+this.unscaledBounds.height>b.y+b.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-b.y-b.height))}var M=this.bounds;this.bounds=new mxRectangle((null!=this.parentState?this.parentState.x:a.x*u)+this.unscaledBounds.x*u,(null!=this.parentState?this.parentState.y:a.y*u)+this.unscaledBounds.y*u,this.unscaledBounds.width*u,this.unscaledBounds.height*u),S.relative&&null!=this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),c=Math.cos(r),f=Math.sin(r);var m,x,R=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY()),O=c*(m=R.x-t.x)-f*(x=R.y-t.y)-m,F=f*m+c*x-x,G=this.bounds.x-this.state.x,j=this.bounds.y-this.state.y,Y=c*G-f*j,W=f*G+c*j;this.bounds.x+=O,this.bounds.y+=F,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+O/u),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+F/u),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),this.graph.isCellCollapsed(this.state.cell)||0==O&&0==F?(this.childOffsetX=0,this.childOffsetY=0):(this.childOffsetX=this.state.x-this.bounds.x+Y,this.childOffsetY=this.state.y-this.bounds.y+W),M.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(e),null!=this.preview?this.drawPreview():this.updateParentHighlight())},mxVertexHandler.prototype.updateLivePreview=function(e){var t=this.graph.view.scale,r=this.graph.view.translate,o=this.state.clone();this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/t-r.x,this.state.y/t-r.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height;var a=this.state.absoluteOffset;a=new mxPoint(a.x,a.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0;var u=this.graph.getCellGeometry(this.state.cell);if(null!=u){var c=u.offset||this.EMPTY_POINT;null!=c&&!u.relative&&(this.state.absoluteOffset.x=this.state.view.scale*c.x,this.state.absoluteOffset.y=this.state.view.scale*c.y),this.state.view.updateVertexLabelOffset(this.state)}this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.movePreviewToFront&&this.moveToFront(),null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="hidden"),this.state.setState(o)},mxVertexHandler.prototype.moveToFront=function(){(null!=this.state.text&&null!=this.state.text.node&&null!=this.state.text.node.nextSibling||null!=this.state.shape&&null!=this.state.shape.node&&null!=this.state.shape.node.nextSibling&&(null==this.state.text||this.state.shape.node.nextSibling!=this.state.text.node))&&(null!=this.state.shape&&null!=this.state.shape.node&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),null!=this.state.text&&null!=this.state.text.node&&this.state.text.node.parentNode.appendChild(this.state.text.node))},mxVertexHandler.prototype.mouseUp=function(e,t){if(null!=this.index&&null!=this.state){var r=new mxPoint(t.getGraphX(),t.getGraphY()),o=this.index;this.index=null,null==this.ghostPreview&&(this.state.view.invalidate(this.state.cell,!1,!1),this.state.view.validate()),this.graph.getModel().beginUpdate();try{if(o<=mxEvent.CUSTOM_HANDLE){if(null!=this.customHandles){var a=this.state.view.graph.getCellStyle(this.state.cell);this.customHandles[mxEvent.CUSTOM_HANDLE-o].active=!1,this.customHandles[mxEvent.CUSTOM_HANDLE-o].execute(t),null!=this.customHandles&&null!=this.customHandles[mxEvent.CUSTOM_HANDLE-o]&&(this.state.style=a,this.customHandles[mxEvent.CUSTOM_HANDLE-o].positionChanged())}}else if(o==mxEvent.ROTATION_HANDLE)if(null!=this.currentAlpha){var u=this.currentAlpha-(this.state.style[mxConstants.STYLE_ROTATION]||0);0!=u&&this.rotateCell(this.state.cell,u)}else this.rotateClick();else{var c=this.graph.isGridEnabledEvent(t.getEvent()),f=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),m=Math.cos(-f),x=Math.sin(-f),v=r.x-this.startX,E=r.y-this.startY,b=x*v+m*E;v=m*v-x*E,E=b;var _=this.graph.view.scale,D=this.isRecursiveResize(this.state,t);this.resizeCell(this.state.cell,this.roundLength(v/_),this.roundLength(E/_),o,c,this.isConstrainedEvent(t),D)}}finally{this.graph.getModel().endUpdate()}t.consume(),this.reset(),this.redrawHandles()}},mxVertexHandler.prototype.isRecursiveResize=function(e,t){return this.graph.isRecursiveResize(this.state)},mxVertexHandler.prototype.rotateClick=function(){},mxVertexHandler.prototype.rotateCell=function(e,t,r){if(0!=t){var o=this.graph.getModel();if(o.isVertex(e)||o.isEdge(e)){if(!o.isEdge(e)){var a=this.graph.getCurrentCellStyle(e);this.graph.setCellStyles(mxConstants.STYLE_ROTATION,(a[mxConstants.STYLE_ROTATION]||0)+t,[e])}var c=this.graph.getCellGeometry(e);if(null!=c){var f=this.graph.getCellGeometry(r);if(null!=f&&!o.isEdge(r)&&((c=c.clone()).rotate(t,new mxPoint(f.width/2,f.height/2)),o.setGeometry(e,c)),o.isVertex(e)&&!c.relative||o.isEdge(e))for(var m=o.getChildCount(e),x=0;x<m;x++)this.rotateCell(o.getChildAt(e,x),t,e)}}}},mxVertexHandler.prototype.reset=function(){if(null!=this.sizers&&null!=this.index&&null!=this.sizers[this.index]&&"none"==this.sizers[this.index].node.style.display&&(this.sizers[this.index].node.style.display=""),this.currentAlpha=null,this.inTolerance=null,this.index=null,null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive&&null!=this.sizers){for(var e=0;e<this.sizers.length;e++)null!=this.sizers[e]&&(this.sizers[e].node.style.display="");null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="")}if(null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].active?(this.customHandles[e].active=!1,this.customHandles[e].reset()):this.customHandles[e].setVisible(!0);null!=this.selectionBorder&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.handlesVisible=!0,this.unscaledBounds=null,this.livePreviewActive=null},mxVertexHandler.prototype.resizeCell=function(e,t,r,o,a,u,c){var f=this.graph.model.getGeometry(e);if(null!=f)if(o==mxEvent.LABEL_HANDLE){var m=-mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),x=Math.cos(m),v=Math.sin(m),E=this.graph.view.scale,S=mxUtils.getRotatedPoint(new mxPoint(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/E),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/E)),x,v);null==(f=f.clone()).offset?f.offset=S:(f.offset.x+=S.x,f.offset.y+=S.y),this.graph.model.setGeometry(e,f)}else null!=this.unscaledBounds&&(E=this.graph.view.scale,(0!=this.childOffsetX||0!=this.childOffsetY)&&this.moveChildren(e,Math.round(this.childOffsetX/E),Math.round(this.childOffsetY/E)),this.graph.resizeCell(e,this.unscaledBounds,c))},mxVertexHandler.prototype.moveChildren=function(e,t,r){for(var o=this.graph.getModel(),a=o.getChildCount(e),u=0;u<a;u++){var c=o.getChildAt(e,u),f=this.graph.getCellGeometry(c);null!=f&&((f=f.clone()).translate(t,r),o.setGeometry(c,f))}},mxVertexHandler.prototype.union=function(e,t,r,o,a,u,c,f,m){if(a=null!=a?a&&this.graph.gridEnabled:this.graph.gridEnabled,this.singleSizer){var x=e.x+e.width+t,v=e.y+e.height+r;a&&(x=this.graph.snap(x/u)*u,v=this.graph.snap(v/u)*u);var E=new mxRectangle(e.x,e.y,0,0);return E.add(new mxRectangle(x,v,0,0)),E}var S=e.width,b=e.height,_=e.x-c.x*u,D=_+S,M=e.y-c.y*u,R=M+b,N=_+S/2,V=M+b/2;o>4?(R+=r,R=a?this.graph.snap(R/u)*u:Math.round(R/u)*u):o<3&&(M+=r,M=a?this.graph.snap(M/u)*u:Math.round(M/u)*u),0==o||3==o||5==o?(_+=t,_=a?this.graph.snap(_/u)*u:Math.round(_/u)*u):(2==o||4==o||7==o)&&(D+=t,D=a?this.graph.snap(D/u)*u:Math.round(D/u)*u);var O=D-_,F=R-M;if(f){var G=this.graph.getCellGeometry(this.state.cell);if(null!=G){var j=G.width/G.height;1==o||2==o||7==o||6==o?O=F*j:F=O/j,0==o&&(_=D-O,M=R-F)}}if(m){var Y=N-(_+(O+=O-S)/2),W=V-(M+(F+=F-b)/2);_+=Y,M+=W,D+=Y,R+=W}O<0&&(_+=O,O=Math.abs(O)),F<0&&(M+=F,F=Math.abs(F));var q=new mxRectangle(_+c.x*u,M+c.y*u,O,F);return null!=this.minBounds&&(q.width=Math.max(q.width,this.minBounds.x*u+this.minBounds.width*u+Math.max(0,this.x0*u-q.x)),q.height=Math.max(q.height,this.minBounds.y*u+this.minBounds.height*u+Math.max(0,this.y0*u-q.y))),q},mxVertexHandler.prototype.redraw=function(e){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),e||this.redrawHandles()},mxVertexHandler.prototype.getHandlePadding=function(){var e=new mxPoint(0,0),t=this.tolerance;return null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]&&(this.bounds.width<2*this.sizers[0].bounds.width+2*t||this.bounds.height<2*this.sizers[0].bounds.height+2*t)&&(e.x=this.sizers[0].bounds.width+(t/=2),e.y=this.sizers[0].bounds.height+t),e},mxVertexHandler.prototype.getSizerBounds=function(){return this.bounds},mxVertexHandler.prototype.redrawHandles=function(){var e=this.getSizerBounds(),t=this.tolerance;if(this.horizontalOffset=0,this.verticalOffset=0,null!=this.customHandles)for(var r=0;r<this.customHandles.length;r++){var o=this.customHandles[r].shape.node.style.display;this.customHandles[r].redraw(),this.customHandles[r].shape.node.style.display=o,this.customHandles[r].shape.node.style.visibility=this.handlesVisible&&this.isCustomHandleVisible(this.customHandles[r])?"":"hidden"}if(null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]){if(null==this.index&&this.manageSizers&&this.sizers.length>=8){var a=this.getHandlePadding();this.horizontalOffset=a.x,this.verticalOffset=a.y,(0!=this.horizontalOffset||0!=this.verticalOffset)&&((e=new mxRectangle(e.x,e.y,e.width,e.height)).x-=this.horizontalOffset/2,e.width+=this.horizontalOffset,e.y-=this.verticalOffset/2,e.height+=this.verticalOffset),this.sizers.length>=8&&(e.width<2*this.sizers[0].bounds.width+2*t||e.height<2*this.sizers[0].bounds.height+2*t?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):this.handlesVisible&&(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}var u=e.x+e.width,c=e.y+e.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],u,c);else{var f=e.x+e.width/2,m=e.y+e.height/2;if(this.sizers.length>=8){var x=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],v=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),E=Math.cos(v),S=Math.sin(v),b=Math.round(4*v/Math.PI),_=new mxPoint(e.getCenterX(),e.getCenterY()),D=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),E,S,_);this.moveSizerTo(this.sizers[0],D.x,D.y),this.sizers[0].setCursor(x[mxUtils.mod(0+b,x.length)]),D.x=f,D.y=e.y,D=mxUtils.getRotatedPoint(D,E,S,_),this.moveSizerTo(this.sizers[1],D.x,D.y),this.sizers[1].setCursor(x[mxUtils.mod(1+b,x.length)]),D.x=u,D.y=e.y,D=mxUtils.getRotatedPoint(D,E,S,_),this.moveSizerTo(this.sizers[2],D.x,D.y),this.sizers[2].setCursor(x[mxUtils.mod(2+b,x.length)]),D.x=e.x,D.y=m,D=mxUtils.getRotatedPoint(D,E,S,_),this.moveSizerTo(this.sizers[3],D.x,D.y),this.sizers[3].setCursor(x[mxUtils.mod(7+b,x.length)]),D.x=u,D.y=m,D=mxUtils.getRotatedPoint(D,E,S,_),this.moveSizerTo(this.sizers[4],D.x,D.y),this.sizers[4].setCursor(x[mxUtils.mod(3+b,x.length)]),D.x=e.x,D.y=c,D=mxUtils.getRotatedPoint(D,E,S,_),this.moveSizerTo(this.sizers[5],D.x,D.y),this.sizers[5].setCursor(x[mxUtils.mod(6+b,x.length)]),D.x=f,D.y=c,D=mxUtils.getRotatedPoint(D,E,S,_),this.moveSizerTo(this.sizers[6],D.x,D.y),this.sizers[6].setCursor(x[mxUtils.mod(5+b,x.length)]),D.x=u,D.y=c,D=mxUtils.getRotatedPoint(D,E,S,_),this.moveSizerTo(this.sizers[7],D.x,D.y),this.sizers[7].setCursor(x[mxUtils.mod(4+b,x.length)]),D.x=f+this.state.absoluteOffset.x,D.y=m+this.state.absoluteOffset.y,D=mxUtils.getRotatedPoint(D,E,S,_),this.moveSizerTo(this.sizers[8],D.x,D.y)}else this.state.width>=2&&this.state.height>=2?this.moveSizerTo(this.sizers[0],f+this.state.absoluteOffset.x,m+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y)}}if(null!=this.rotationShape&&(v=mxUtils.toRadians(null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),E=Math.cos(v),S=Math.sin(v),_=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),D=mxUtils.getRotatedPoint(this.getRotationHandlePosition(),E,S,_),null!=this.rotationShape.node&&(this.moveSizerTo(this.rotationShape,D.x,D.y),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()||!this.handlesVisible?"hidden":"")),null!=this.selectionBorder&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.edgeHandlers)for(r=0;r<this.edgeHandlers.length;r++)this.edgeHandlers[r].redraw()},mxVertexHandler.prototype.isCustomHandleVisible=function(e){return!this.graph.isEditing()&&1==this.state.view.graph.getSelectionCount()},mxVertexHandler.prototype.getRotationHandlePosition=function(){return new mxPoint(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)},mxVertexHandler.prototype.isParentHighlightVisible=function(){return!this.graph.isCellSelected(this.graph.model.getParent(this.state.cell))},mxVertexHandler.prototype.updateParentHighlight=function(){if(!this.isDestroyed()){var e=this.isParentHighlightVisible(),t=this.graph.model.getParent(this.state.cell),r=this.graph.view.getState(t);if(null!=this.parentHighlight)if(this.graph.model.isVertex(t)&&e){var o=this.parentHighlight.bounds;null!=r&&(o.x!=r.x||o.y!=r.y||o.width!=r.width||o.height!=r.height)&&(this.parentHighlight.bounds=mxRectangle.fromRectangle(r),this.parentHighlight.redraw())}else null!=r&&r.parentHighlight==this.parentHighlight&&(r.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null;else this.parentHighlightEnabled&&e&&this.graph.model.isVertex(t)&&null!=r&&null==r.parentHighlight&&(this.parentHighlight=this.createParentHighlightShape(r),this.parentHighlight.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(r.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw(),r.parentHighlight=this.parentHighlight)}},mxVertexHandler.prototype.drawPreview=function(){null!=this.preview&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()},mxVertexHandler.prototype.getSelectionBorderBounds=function(){return this.bounds},mxVertexHandler.prototype.isDestroyed=function(){return null==this.selectionBorder},mxVertexHandler.prototype.destroy=function(){if(null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.parentHighlight){var e=this.graph.model.getParent(this.state.cell),t=this.graph.view.getState(e);null!=t&&t.parentHighlight==this.parentHighlight&&(t.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null}if(null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint(),null!=this.sizers){for(var r=0;r<this.sizers.length;r++)this.sizers[r].destroy();this.sizers=null}if(null!=this.customHandles){for(r=0;r<this.customHandles.length;r++)this.customHandles[r].destroy();this.customHandles=null}},__mxOutput.mxVertexHandler=void 0!==mxVertexHandler?mxVertexHandler:void 0,mxEdgeHandler.prototype.graph=null,mxEdgeHandler.prototype.state=null,mxEdgeHandler.prototype.marker=null,mxEdgeHandler.prototype.constraintHandler=null,mxEdgeHandler.prototype.error=null,mxEdgeHandler.prototype.shape=null,mxEdgeHandler.prototype.bends=null,mxEdgeHandler.prototype.labelShape=null,mxEdgeHandler.prototype.cloneEnabled=!0,mxEdgeHandler.prototype.addEnabled=!1,mxEdgeHandler.prototype.removeEnabled=!1,mxEdgeHandler.prototype.dblClickRemoveEnabled=!1,mxEdgeHandler.prototype.mergeRemoveEnabled=!1,mxEdgeHandler.prototype.straightRemoveEnabled=!1,mxEdgeHandler.prototype.virtualBendsEnabled=!1,mxEdgeHandler.prototype.virtualBendOpacity=20,mxEdgeHandler.prototype.parentHighlightEnabled=!1,mxEdgeHandler.prototype.preferHtml=!1,mxEdgeHandler.prototype.allowHandleBoundsCheck=!0,mxEdgeHandler.prototype.snapToTerminals=!1,mxEdgeHandler.prototype.handleImage=null,mxEdgeHandler.prototype.tolerance=0,mxEdgeHandler.prototype.outlineConnect=!1,mxEdgeHandler.prototype.manageLabelHandle=!1,mxEdgeHandler.prototype.init=function(){if(this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=null!=this.state.text&&this.state.text.node.parentNode==this.graph.container,!this.preferHtml){var e=this.state.getVisibleTerminalState(!0);if(null!=e&&(this.preferHtml=null!=e.text&&e.text.node.parentNode==this.graph.container),!this.preferHtml){var t=this.state.getVisibleTerminalState(!1);null!=t&&(this.preferHtml=null!=t.text&&t.text.node.parentNode==this.graph.container)}}(this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells||mxGraphHandler.prototype.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends())),this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.updateParentHighlight(),this.redraw()},mxEdgeHandler.prototype.isParentHighlightVisible=mxVertexHandler.prototype.isParentHighlightVisible,mxEdgeHandler.prototype.updateParentHighlight=mxVertexHandler.prototype.updateParentHighlight,mxEdgeHandler.prototype.createCustomHandles=function(){return null},mxEdgeHandler.prototype.isVirtualBendsEnabled=function(e){return this.virtualBendsEnabled&&(null==this.state.style[mxConstants.STYLE_EDGE]||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.NONE||1==this.state.style[mxConstants.STYLE_NOEDGESTYLE])&&"arrow"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_SHAPE,null)},mxEdgeHandler.prototype.isCellEnabled=function(e){return!0},mxEdgeHandler.prototype.isAddPointEvent=function(e){return mxEvent.isShiftDown(e)},mxEdgeHandler.prototype.isRemovePointEvent=function(e){return mxEvent.isShiftDown(e)},mxEdgeHandler.prototype.getSelectionPoints=function(e){return e.absolutePoints},mxEdgeHandler.prototype.createParentHighlightShape=function(e){var t=new mxRectangleShape(mxRectangle.fromRectangle(e),null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxEdgeHandler.prototype.createSelectionShape=function(e){var t=new this.state.shape.constructor;return t.outline=!0,t.apply(this.state),t.isDashed=this.isSelectionDashed(),t.stroke=this.getSelectionColor(),t.isShadow=!1,t},mxEdgeHandler.prototype.getSelectionColor=function(){return mxConstants.EDGE_SELECTION_COLOR},mxEdgeHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.EDGE_SELECTION_STROKEWIDTH},mxEdgeHandler.prototype.isSelectionDashed=function(){return mxConstants.EDGE_SELECTION_DASHED},mxEdgeHandler.prototype.isConnectableCell=function(e){return!0},mxEdgeHandler.prototype.getCellAt=function(e,t){return this.outlineConnect?null:this.graph.getCellAt(e,t)},mxEdgeHandler.prototype.createMarker=function(){var e=new mxCellMarker(this.graph),t=this;return e.getCell=function(r){var o=mxCellMarker.prototype.getCell.apply(this,arguments);if((o==t.state.cell||null==o)&&null!=t.currentPoint&&(o=t.graph.getCellAt(t.currentPoint.x,t.currentPoint.y)),null!=o&&!this.graph.isCellConnectable(o)){var a=this.graph.getModel().getParent(o);this.graph.getModel().isVertex(a)&&this.graph.isCellConnectable(a)&&(o=a)}var u=t.graph.getModel();return(this.graph.isSwimlane(o)&&null!=t.currentPoint&&this.graph.hitsSwimlaneContent(o,t.currentPoint.x,t.currentPoint.y)||!t.isConnectableCell(o)||o==t.state.cell||null!=o&&!t.graph.connectableEdges&&u.isEdge(o)||u.isAncestor(t.state.cell,o))&&(o=null),this.graph.isCellConnectable(o)||(o=null),o},e.isValidState=function(r){var o=t.graph.getModel(),a=t.graph.view.getTerminalPort(r,t.graph.view.getState(o.getTerminal(t.state.cell,!t.isSource)),!t.isSource),u=null!=a?a.cell:null;return t.error=t.validateConnection(t.isSource?r.cell:u,t.isSource?u:r.cell),null==t.error},e},mxEdgeHandler.prototype.validateConnection=function(e,t){return this.graph.getEdgeValidationError(this.state.cell,e,t)},mxEdgeHandler.prototype.createBends=function(){for(var e=this.state.cell,t=[],r=0;r<this.abspoints.length;r++)if(this.isHandleVisible(r)){var u=0==r||r==this.abspoints.length-1;(u||this.graph.isCellBendable(e))&&mxUtils.bind(this,function(c){var f=this.createHandleShape(c);this.initBend(f,mxUtils.bind(this,mxUtils.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,c)}))),this.isHandleEnabled(r)&&f.setCursor(u?mxConstants.CURSOR_TERMINAL_HANDLE:mxConstants.CURSOR_BEND_HANDLE),t.push(f),u||(this.points.push(new mxPoint(0,0)),f.node.style.visibility="hidden")})(r)}return t},mxEdgeHandler.prototype.createVirtualBends=function(){var r=[];if(this.graph.isCellBendable(this.state.cell))for(var o=1;o<this.abspoints.length;o++)mxUtils.bind(this,function(a){this.initBend(a),a.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE),r.push(a)})(this.createHandleShape());return r},mxEdgeHandler.prototype.isHandleEnabled=function(e){return!0},mxEdgeHandler.prototype.isHandleVisible=function(e){var t=this.state.getVisibleTerminalState(!0),r=this.state.getVisibleTerminalState(!1),o=this.graph.getCellGeometry(this.state.cell);return(null!=o?this.graph.view.getEdgeStyle(this.state,o.points,t,r):null)!=mxEdgeStyle.EntityRelation||0==e||e==this.abspoints.length-1},mxEdgeHandler.prototype.createHandleShape=function(e){if(null!=this.handleImage){var t=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src);return t.preserveImageAspect=!1,t}var r=mxConstants.HANDLE_SIZE;return this.preferHtml&&(r-=1),new mxRectangleShape(new mxRectangle(0,0,r,r),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.createLabelHandleShape=function(){if(null!=this.labelHandleImage){var e=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return e.preserveImageAspect=!1,e}var t=mxConstants.LABEL_HANDLE_SIZE;return new mxRectangleShape(new mxRectangle(0,0,t,t),mxConstants.LABEL_HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.initBend=function(e,t){this.preferHtml?(e.dialect=mxConstants.DIALECT_STRICTHTML,e.init(this.graph.container)):(e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(e.node,this.graph,this.state,null,null,null,t),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(e.node,"dragstart",function(r){return mxEvent.consume(r),!1}),mxClient.IS_TOUCH&&e.node.setAttribute("pointer-events","none")},mxEdgeHandler.prototype.getHandleForEvent=function(e){var t=null;if(null!=this.state){let f=function(m){if(null!=m&&null!=m.node&&"none"!=m.node.style.display&&"hidden"!=m.node.style.visibility&&(e.isSource(m)||null!=o&&mxUtils.intersects(m.bounds,o))){var x=e.getGraphX()-m.bounds.getCenterX(),v=e.getGraphY()-m.bounds.getCenterY(),E=x*x+v*v;if(null==a||E<=a)return a=E,!0}return!1};var r=mxEvent.isMouseEvent(e.getEvent())?1:this.tolerance,o=this.allowHandleBoundsCheck&&(mxClient.IS_IE||r>0)?new mxRectangle(e.getGraphX()-r,e.getGraphY()-r,2*r,2*r):null,a=null;if(null!=this.customHandles&&this.isCustomHandleEvent(e))for(var u=this.customHandles.length-1;u>=0;u--)if(f(this.customHandles[u].shape))return mxEvent.CUSTOM_HANDLE-u;if((e.isSource(this.state.text)||f(this.labelShape))&&(t=mxEvent.LABEL_HANDLE),null!=this.bends)for(u=0;u<this.bends.length;u++)f(this.bends[u])&&(t=u);if(null!=this.virtualBends&&this.isAddVirtualBendEvent(e))for(u=0;u<this.virtualBends.length;u++)f(this.virtualBends[u])&&(t=mxEvent.VIRTUAL_HANDLE-u)}return t},mxEdgeHandler.prototype.isAddVirtualBendEvent=function(e){return!0},mxEdgeHandler.prototype.isCustomHandleEvent=function(e){return!0},mxEdgeHandler.prototype.mouseDown=function(e,t){var r=this.getHandleForEvent(t);if(null!=this.bends&&null!=this.bends[r]){var o=this.bends[r].bounds;this.snapPoint=new mxPoint(o.getCenterX(),o.getCenterY())}this.addEnabled&&null==r&&this.isAddPointEvent(t.getEvent())?(this.addPoint(this.state,t.getEvent()),t.consume()):null!=r&&!t.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(t.getEvent())?this.removePoint(this.state,r):(r!=mxEvent.LABEL_HANDLE||this.graph.isLabelMovable(t.getCell()))&&(r<=mxEvent.VIRTUAL_HANDLE&&mxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE-r].node,100),this.start(t.getX(),t.getY(),r)),t.consume())},mxEdgeHandler.prototype.start=function(e,t,r){if(this.startX=e,this.startY=t,this.isSource=null!=this.bends&&0==r,this.isTarget=null!=this.bends&&r==this.bends.length-1,this.isLabel=r==mxEvent.LABEL_HANDLE,this.isSource||this.isTarget){var o=this.state.cell,a=this.graph.model.getTerminal(o,this.isSource);(null==a&&this.graph.isTerminalPointMovable(o,this.isSource)||null!=a&&this.graph.isCellDisconnectable(o,a,this.isSource))&&(this.index=r)}else this.index=r;if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE&&null!=this.customHandles)for(var u=0;u<this.customHandles.length;u++)u!=mxEvent.CUSTOM_HANDLE-this.index&&this.customHandles[u].setVisible(!1)},mxEdgeHandler.prototype.clonePreviewState=function(e,t){return this.state.clone()},mxEdgeHandler.prototype.getSnapToTerminalTolerance=function(){return this.graph.gridSize*this.graph.view.scale/2},mxEdgeHandler.prototype.updateHint=function(e,t){},mxEdgeHandler.prototype.removeHint=function(){},mxEdgeHandler.prototype.roundLength=function(e){return Math.round(e)},mxEdgeHandler.prototype.isSnapToTerminalsEvent=function(e){return this.snapToTerminals&&!mxEvent.isAltDown(e.getEvent())},mxEdgeHandler.prototype.getPointForEvent=function(e){var t=this.graph.getView(),r=t.scale,o=new mxPoint(this.roundLength(e.getGraphX()/r)*r,this.roundLength(e.getGraphY()/r)*r),a=this.getSnapToTerminalTolerance(),u=!1,c=!1;if(a>0&&this.isSnapToTerminalsEvent(e)){let E=function(b){if(null!=b){var _=b.x;Math.abs(o.x-_)<a&&(o.x=_,u=!0);var D=b.y;Math.abs(o.y-D)<a&&(o.y=D,c=!0)}},S=function(b){null!=b&&E.call(this,new mxPoint(t.getRoutingCenterX(b),t.getRoutingCenterY(b)))};if(S.call(this,this.state.getVisibleTerminalState(!0)),S.call(this,this.state.getVisibleTerminalState(!1)),null!=this.state.absolutePoints)for(var f=0;f<this.state.absolutePoints.length;f++)E.call(this,this.state.absolutePoints[f])}if(this.graph.isGridEnabledEvent(e.getEvent())){var m=t.translate;u||(o.x=(this.graph.snap(o.x/r-m.x)+m.x)*r),c||(o.y=(this.graph.snap(o.y/r-m.y)+m.y)*r)}return o},mxEdgeHandler.prototype.getPreviewTerminalState=function(e){if(this.constraintHandler.update(e,this.isSource,!0,e.isSource(this.marker.highlight.shape)?null:this.currentPoint),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint){null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent");var t=this.graph.getModel(),r=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(t.getTerminal(this.state.cell,!this.isSource)),!this.isSource),o=null!=r?r.cell:null;this.error=this.validateConnection(this.isSource?this.constraintHandler.currentFocus.cell:o,this.isSource?o:this.constraintHandler.currentFocus.cell);var c=null;return null==this.error&&(c=this.constraintHandler.currentFocus),(null!=this.error||null!=c&&!this.isCellEnabled(c.cell))&&this.constraintHandler.reset(),c}if(this.graph.isIgnoreTerminalEvent(e.getEvent()))return this.marker.reset(),null;this.marker.process(e);var f=this.marker.getValidState();return null!=f&&!this.isCellEnabled(f.cell)&&(this.constraintHandler.reset(),this.marker.reset()),this.marker.getValidState()},mxEdgeHandler.prototype.getPreviewPoints=function(e,t){var r=this.graph.getCellGeometry(this.state.cell),o=null!=r.points?r.points.slice():null,a=new mxPoint(e.x,e.y),u=null;if(this.isSource||this.isTarget)this.graph.resetEdgesOnConnect&&(o=null);else if(this.convertPoint(a,!1),null==o)o=[a];else{if(this.index<=mxEvent.VIRTUAL_HANDLE&&o.splice(mxEvent.VIRTUAL_HANDLE-this.index,0,a),!this.isSource&&!this.isTarget){for(var c=0;c<this.bends.length;c++)if(c!=this.index){var f=this.bends[c];null!=f&&mxUtils.contains(f.bounds,e.x,e.y)&&(o.splice(this.index<=mxEvent.VIRTUAL_HANDLE?mxEvent.VIRTUAL_HANDLE-this.index:this.index-1,1),u=o)}if(null==u&&this.straightRemoveEnabled&&(null==t||!mxEvent.isAltDown(t.getEvent()))){let _=function(D,M){D>0&&D<x.length-1&&mxUtils.ptSegDistSq(x[D-1].x,x[D-1].y,x[D+1].x,x[D+1].y,M.x,M.y)<m&&(o.splice(D-1,1),u=o)};var m=this.graph.tolerance*this.graph.tolerance,x=this.state.absolutePoints.slice();x[this.index]=e;var v=this.state.getVisibleTerminalState(!0);null!=v&&(null==(E=this.graph.getConnectionConstraint(this.state,v,!0))||null==this.graph.getConnectionPoint(v,E))&&(x[0]=new mxPoint(v.view.getRoutingCenterX(v),v.view.getRoutingCenterY(v)));var E,S=this.state.getVisibleTerminalState(!1);null!=S&&(null==(E=this.graph.getConnectionConstraint(this.state,S,!1))||null==this.graph.getConnectionPoint(S,E))&&(x[x.length-1]=new mxPoint(S.view.getRoutingCenterX(S),S.view.getRoutingCenterY(S))),_(this.index,e)}}null==u&&this.index>mxEvent.VIRTUAL_HANDLE&&(o[this.index-1]=a)}return null!=u?u:o},mxEdgeHandler.prototype.isOutlineConnectEvent=function(e){var t=mxUtils.getOffset(this.graph.container),r=e.getEvent(),o=mxEvent.getClientX(r),a=mxEvent.getClientY(r),u=document.documentElement,c=(window.pageXOffset||u.scrollLeft)-(u.clientLeft||0),f=(window.pageYOffset||u.scrollTop)-(u.clientTop||0),m=this.currentPoint.x-this.graph.container.scrollLeft+t.x-c,x=this.currentPoint.y-this.graph.container.scrollTop+t.y-f;return this.outlineConnect&&!mxEvent.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(e.getEvent())&&null!=e.getState()||this.marker.highlight.isHighlightAt(o,a)||(m!=o||x!=a)&&null==e.getState()&&this.marker.highlight.isHighlightAt(m,x))},mxEdgeHandler.prototype.updatePreviewState=function(e,t,r,o,a){var u=this.isSource?r:this.state.getVisibleTerminalState(!0),c=this.isTarget?r:this.state.getVisibleTerminalState(!1),f=this.graph.getConnectionConstraint(e,u,!0),m=this.graph.getConnectionConstraint(e,c,!1),x=this.constraintHandler.currentConstraint;if(null==x&&a&&(null!=r?(o.isSource(this.marker.highlight.shape)&&(t=new mxPoint(o.getGraphX(),o.getGraphY())),x=this.graph.getOutlineConstraint(t,r,o),this.constraintHandler.setFocus(o,r,this.isSource),this.constraintHandler.currentConstraint=x,this.constraintHandler.currentPoint=t):x=new mxConnectionConstraint),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var v=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=a?mxConstants.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/v/v,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.graph.isCellConnectable(o.getCell())&&this.marker.getValidState()!=o.getState()?"transparent":mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/v/v,this.marker.highlight.repaint())}this.isSource?f=x:this.isTarget&&(m=x),(this.isSource||this.isTarget)&&(null!=x&&null!=x.point?(e.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X]=x.point.x,e.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]=x.point.y):(delete e.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],delete e.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])),e.setVisibleTerminalState(u,!0),e.setVisibleTerminalState(c,!1),(!this.isSource||null!=u)&&e.view.updateFixedTerminalPoint(e,u,!0,f),(!this.isTarget||null!=c)&&e.view.updateFixedTerminalPoint(e,c,!1,m),(this.isSource||this.isTarget)&&null==r&&(e.setAbsoluteTerminalPoint(t,this.isSource),null==this.marker.getMarkedState()&&(this.error=this.graph.allowDanglingEdges?null:"")),e.view.updatePoints(e,this.points,u,c),e.view.updateFloatingTerminalPoints(e,u,c)},mxEdgeHandler.prototype.mouseMove=function(e,t){if(null!=this.index&&null!=this.marker){if(this.currentPoint=this.getPointForEvent(t),this.error=null,!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent.isShiftDown(t.getEvent())&&null!=this.snapPoint&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE)null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(t),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged(),null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display="none"));else if(this.isLabel)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,t);var r=this.isSource||this.isTarget?this.getPreviewTerminalState(t):null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint)this.currentPoint=this.constraintHandler.currentPoint.clone();else if(this.outlineConnect){var o=!(!this.isSource&&!this.isTarget)&&this.isOutlineConnectEvent(t);o?r=this.marker.highlight.state:null!=r&&r!=t.getState()&&this.graph.isCellConnectable(t.getCell())&&null!=this.marker.highlight.shape&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),r=null)}null!=r&&!this.isCellEnabled(r.cell)&&(r=null,this.marker.reset());var a=this.clonePreviewState(this.currentPoint,null!=r?r.cell:null);this.updatePreviewState(a,this.currentPoint,r,t,o),this.setPreviewColor(null==this.error?this.marker.validColor:this.marker.invalidColor),this.abspoints=a.absolutePoints,this.active=!0,this.updateHint(t,this.currentPoint)}this.drawPreview(),mxEvent.consume(t.getEvent()),t.consume()}else mxClient.IS_IE&&null!=this.getHandleForEvent(t)&&t.consume(!1)},mxEdgeHandler.prototype.mouseUp=function(e,t){if(null!=this.index&&null!=this.marker){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display="");var r=this.state.cell,o=this.index;if(this.index=null,t.getX()!=this.startX||t.getY()!=this.startY){var a=!this.graph.isIgnoreTerminalEvent(t.getEvent())&&this.graph.isCloneEvent(t.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(null!=this.error)this.error.length>0&&this.graph.validationAlert(this.error);else if(o<=mxEvent.CUSTOM_HANDLE&&o>mxEvent.VIRTUAL_HANDLE){if(null!=this.customHandles){(u=this.graph.getModel()).beginUpdate();try{this.customHandles[mxEvent.CUSTOM_HANDLE-o].execute(t),null!=this.shape&&null!=this.shape.node&&(this.shape.apply(this.state),this.shape.redraw())}finally{u.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var c=null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(c=this.constraintHandler.currentFocus.cell),null==c&&this.marker.hasValidState()&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&"transparent"!=this.marker.highlight.shape.stroke&&"white"!=this.marker.highlight.shape.stroke&&(c=this.marker.validState.cell),null!=c){var u,f=(u=this.graph.getModel()).getParent(r);u.beginUpdate();try{if(a){var m=u.getGeometry(r);a=this.graph.cloneCell(r),u.add(f,a,u.getChildCount(f)),null!=m&&(m=m.clone(),u.setGeometry(a,m));var x=u.getTerminal(r,!this.isSource);this.graph.connectCell(a,x,!this.isSource),r=a}r=this.connect(r,c,this.isSource,a,t)}finally{u.endUpdate()}}else if(this.graph.isAllowDanglingEdges()){var v=this.abspoints[this.isSource?0:this.abspoints.length-1];v.x=this.roundLength(v.x/this.graph.view.scale-this.graph.view.translate.x),v.y=this.roundLength(v.y/this.graph.view.scale-this.graph.view.translate.y);var E=this.graph.getView().getState(this.graph.getModel().getParent(r));null!=E&&(v.x-=E.origin.x,v.y-=E.origin.y),v.x-=this.graph.panDx/this.graph.view.scale,v.y-=this.graph.panDy/this.graph.view.scale,r=this.changeTerminalPoint(r,v,this.isSource,a)}}else this.active?r=this.changePoints(r,this.points,a):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(t.getEvent())&&this.graph.selectCellForEvent(this.state.cell,t.getEvent());null!=this.marker&&(this.reset(),r!=this.state.cell&&this.graph.setSelectionCell(r)),t.consume()}},mxEdgeHandler.prototype.reset=function(){if(this.active&&this.refresh(),this.error=null,this.index=null,this.label=null,this.points=null,this.snapPoint=null,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.active=!1,this.livePreview&&null!=this.sizers)for(var e=0;e<this.sizers.length;e++)null!=this.sizers[e]&&(this.sizers[e].node.style.display="");if(null!=this.marker&&this.marker.reset(),null!=this.constraintHandler&&this.constraintHandler.reset(),null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].reset();this.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()},mxEdgeHandler.prototype.setPreviewColor=function(e){null!=this.shape&&(this.shape.stroke=e)},mxEdgeHandler.prototype.convertPoint=function(e,t){var r=this.graph.getView().getScale(),o=this.graph.getView().getTranslate();t&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/r-o.x),e.y=Math.round(e.y/r-o.y);var a=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell));return null!=a&&(e.x-=a.origin.x,e.y-=a.origin.y),e},mxEdgeHandler.prototype.moveLabel=function(e,t,r){var o=this.graph.getModel(),a=o.getGeometry(e.cell);if(null!=a){var u=this.graph.getView().scale;if((a=a.clone()).relative){var c=this.graph.getView().getRelativePoint(e,t,r);a.x=Math.round(1e4*c.x)/1e4,a.y=Math.round(c.y),a.offset=new mxPoint(0,0),c=this.graph.view.getPoint(e,a),a.offset=new mxPoint(Math.round((t-c.x)/u),Math.round((r-c.y)/u))}else{var f=e.absolutePoints,m=f[0],x=f[f.length-1];if(null!=m&&null!=x){var E=m.y+(x.y-m.y)/2;a.offset=new mxPoint(Math.round((t-(m.x+(x.x-m.x)/2))/u),Math.round((r-E)/u)),a.x=0,a.y=0}}o.setGeometry(e.cell,a)}},mxEdgeHandler.prototype.connect=function(e,t,r,o,a){var u=this.graph.getModel();u.getParent(e),u.beginUpdate();try{var f=this.constraintHandler.currentConstraint;null==f&&(f=new mxConnectionConstraint),this.graph.connectCell(e,t,r,f)}finally{u.endUpdate()}return e},mxEdgeHandler.prototype.changeTerminalPoint=function(e,t,r,o){var a=this.graph.getModel();a.beginUpdate();try{if(o){var u=a.getParent(e),c=a.getTerminal(e,!r);e=this.graph.cloneCell(e),a.add(u,e,a.getChildCount(u)),a.setTerminal(e,c,!r)}var f=a.getGeometry(e);null!=f&&((f=f.clone()).setTerminalPoint(t,r),a.setGeometry(e,f),this.graph.connectCell(e,null,r,new mxConnectionConstraint))}finally{a.endUpdate()}return e},mxEdgeHandler.prototype.changePoints=function(e,t,r){var o=this.graph.getModel();o.beginUpdate();try{if(r){var a=o.getParent(e),u=o.getTerminal(e,!0),c=o.getTerminal(e,!1);e=this.graph.cloneCell(e),o.add(a,e,o.getChildCount(a)),o.setTerminal(e,u,!0),o.setTerminal(e,c,!1)}var f=o.getGeometry(e);null!=f&&((f=f.clone()).points=t,o.setGeometry(e,f))}finally{o.endUpdate()}return e},mxEdgeHandler.prototype.addPoint=function(e,t){var r=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),o=this.graph.isGridEnabledEvent(t);this.convertPoint(r,o),this.addPointAt(e,r.x,r.y),mxEvent.consume(t)},mxEdgeHandler.prototype.addPointAt=function(e,t,r){var o=this.graph.getCellGeometry(e.cell),a=new mxPoint(t,r);if(null!=o){o=o.clone();var u=this.graph.view.translate,c=this.graph.view.scale,f=new mxPoint(u.x*c,u.y*c),m=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(m)){var x=this.graph.view.getState(m);f=new mxPoint(x.x,x.y)}var v=mxUtils.findNearestSegment(e,a.x*c+f.x,a.y*c+f.y);null==o.points?o.points=[a]:o.points.splice(v,0,a),this.graph.getModel().setGeometry(e.cell,o),this.refresh(),this.redraw()}},mxEdgeHandler.prototype.removePoint=function(e,t){if(t>0&&t<this.abspoints.length-1){var r=this.graph.getCellGeometry(this.state.cell);null!=r&&null!=r.points&&((r=r.clone()).points.splice(t-1,1),this.graph.getModel().setGeometry(e.cell,r),this.refresh(),this.redraw())}},mxEdgeHandler.prototype.getHandleFillColor=function(e){var t=0==e,r=this.state.cell,o=this.graph.getModel().getTerminal(r,t),a=mxConstants.HANDLE_FILLCOLOR;return null!=o&&!this.graph.isCellDisconnectable(r,o,t)||null==o&&!this.graph.isTerminalPointMovable(r,t)?a=mxConstants.LOCKED_HANDLE_FILLCOLOR:null!=o&&this.graph.isCellDisconnectable(r,o,t)&&(a=mxConstants.CONNECT_HANDLE_FILLCOLOR),a},mxEdgeHandler.prototype.redraw=function(e){if(null!=this.state){this.abspoints=this.state.absolutePoints.slice();var t=this.graph.getModel().getGeometry(this.state.cell);if(null!=t){var r=t.points;if(null!=this.bends&&this.bends.length>0&&null!=r){null==this.points&&(this.points=[]);for(var o=1;o<this.bends.length-1;o++)null!=this.bends[o]&&null!=this.abspoints[o]&&(this.points[o-1]=r[o-1])}}this.drawPreview(),e||this.redrawHandles()}},mxEdgeHandler.prototype.redrawHandles=function(){var e=this.state.cell,t=this.labelShape.bounds;this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height);var r=this.graph.getLabel(e);if(this.labelShape.visible=null!=r&&r.length>0&&this.graph.isLabelMovable(e),null!=this.bends&&this.bends.length>0){var o=this.abspoints.length-1,a=this.abspoints[0],c=a.y;t=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(a.x-t.width/2),Math.floor(c-t.height/2),t.width,t.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds);var f=this.abspoints[o],x=f.y,v=this.bends.length-1;t=this.bends[v].bounds,this.bends[v].bounds=new mxRectangle(Math.floor(f.x-t.width/2),Math.floor(x-t.height/2),t.width,t.height),this.bends[v].fill=this.getHandleFillColor(v),this.bends[v].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[v].bounds),this.redrawInnerBends(a,f)}if(null!=this.abspoints&&null!=this.virtualBends&&this.virtualBends.length>0)for(var E=this.abspoints[0],S=0;S<this.virtualBends.length;S++)if(null!=this.virtualBends[S]&&null!=this.abspoints[S+1]){var b=this.abspoints[S+1],D=E.y+(b.y-E.y)/2;(t=this.virtualBends[S]).bounds=new mxRectangle(Math.floor(E.x+(b.x-E.x)/2-t.bounds.width/2),Math.floor(D-t.bounds.height/2),t.bounds.width,t.bounds.height),t.redraw(),mxUtils.setOpacity(t.node,this.virtualBendOpacity),E=b,this.manageLabelHandle&&this.checkLabelHandle(t.bounds)}if(null!=this.labelShape&&this.labelShape.redraw(),null!=this.customHandles)for(S=0;S<this.customHandles.length;S++){var M=this.customHandles[S].shape.node.style.display;this.customHandles[S].redraw(),this.customHandles[S].shape.node.style.display=M,this.customHandles[S].shape.node.style.visibility=this.isCustomHandleVisible(this.customHandles[S])?"":"hidden"}},mxEdgeHandler.prototype.isCustomHandleVisible=function(e){return!this.graph.isEditing()&&1==this.state.view.graph.getSelectionCount()},mxEdgeHandler.prototype.setHandlesVisible=function(e){if(null!=this.bends)for(var t=0;t<this.bends.length;t++)this.bends[t].node.style.display=e?"":"none";if(null!=this.virtualBends)for(t=0;t<this.virtualBends.length;t++)this.virtualBends[t].node.style.display=e?"":"none";if(null!=this.labelShape&&(this.labelShape.node.style.display=e?"":"none"),null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(e)},mxEdgeHandler.prototype.redrawInnerBends=function(e,t){for(var r=1;r<this.bends.length-1;r++)if(null!=this.bends[r])if(null!=this.abspoints[r]){var o=this.abspoints[r].x,a=this.abspoints[r].y,u=this.bends[r].bounds;this.bends[r].node.style.visibility="visible",this.bends[r].bounds=new mxRectangle(Math.round(o-u.width/2),Math.round(a-u.height/2),u.width,u.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[r].bounds):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(this.bends[r].bounds,this.labelShape.bounds)&&(w=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,this.bends[r].bounds=new mxRectangle(Math.round(o-w/2),Math.round(a-h/2),w,h)),this.bends[r].redraw()}else this.bends[r].destroy(),this.bends[r]=null},mxEdgeHandler.prototype.checkLabelHandle=function(e){if(null!=this.labelShape){var t=this.labelShape.bounds;mxUtils.intersects(e,t)&&(t.y=e.getCenterY()<t.getCenterY()?e.y+e.height:e.y-t.height)}},mxEdgeHandler.prototype.drawPreview=function(){try{if(this.isLabel){var e=this.labelShape.bounds,t=new mxRectangle(Math.round(this.label.x-e.width/2),Math.round(this.label.y-e.height/2),e.width,e.height);this.labelShape.bounds.equals(t)||(this.labelShape.bounds=t,this.labelShape.redraw())}null!=this.shape&&!mxUtils.equalPoints(this.shape.points,this.abspoints)&&(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.updateParentHighlight()}catch(r){}},mxEdgeHandler.prototype.refresh=function(){null!=this.state&&(this.abspoints=this.getSelectionPoints(this.state),this.points=[],null!=this.bends&&(this.destroyBends(this.bends),this.bends=this.createBends()),null!=this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),null!=this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),null!=this.labelShape&&null!=this.labelShape.node&&null!=this.labelShape.node.parentNode&&this.labelShape.node.parentNode.appendChild(this.labelShape.node))},mxEdgeHandler.prototype.isDestroyed=function(){return null==this.shape},mxEdgeHandler.prototype.destroyBends=function(e){if(null!=e)for(var t=0;t<e.length;t++)null!=e[t]&&e[t].destroy()},mxEdgeHandler.prototype.destroy=function(){if(null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.parentHighlight){var e=this.graph.model.getParent(this.state.cell),t=this.graph.view.getState(e);null!=t&&t.parentHighlight==this.parentHighlight&&(t.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null}null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()},__mxOutput.mxEdgeHandler=void 0!==mxEdgeHandler?mxEdgeHandler:void 0,mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler),mxElbowEdgeHandler.prototype.flipEnabled=!0,mxElbowEdgeHandler.prototype.doubleClickOrientationResource="none"!=mxClient.language?"doubleClickOrientation":"",mxElbowEdgeHandler.prototype.createBends=function(){var e=[],t=this.createHandleShape(0);return this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e.push(this.createVirtualBend(mxUtils.bind(this,function(r){!mxEvent.isConsumed(r)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,r),mxEvent.consume(r))}))),this.points.push(new mxPoint(0,0)),t=this.createHandleShape(2),this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e},mxElbowEdgeHandler.prototype.createVirtualBend=function(e){var t=this.createHandleShape();return this.initBend(t,e),t.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(t.node.style.display="none"),t},mxElbowEdgeHandler.prototype.getCursorForBend=function(){return this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL?"row-resize":"col-resize"},mxElbowEdgeHandler.prototype.getTooltipForNode=function(e){var t=null;return null!=this.bends&&null!=this.bends[1]&&(e==this.bends[1].node||e.parentNode==this.bends[1].node)&&(t=mxResources.get(t=this.doubleClickOrientationResource)||t),t},mxElbowEdgeHandler.prototype.convertPoint=function(e,t){var r=this.graph.getView().getScale(),o=this.graph.getView().getTranslate(),a=this.state.origin;return t&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/r-o.x-a.x),e.y=Math.round(e.y/r-o.y-a.y),e},mxElbowEdgeHandler.prototype.redrawInnerBends=function(e,t){var r=this.graph.getModel().getGeometry(this.state.cell),o=this.state.absolutePoints,a=null;o.length>1?(e=o[1],t=o[o.length-2]):null!=r.points&&r.points.length>0&&(a=o[0]),a=null==a?new mxPoint(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2):new mxPoint(this.graph.getView().scale*(a.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(a.y+this.graph.getView().translate.y+this.state.origin.y));var u=this.bends[1].bounds,c=u.width,f=u.height,m=new mxRectangle(Math.round(a.x-c/2),Math.round(a.y-f/2),c,f);this.manageLabelHandle?this.checkLabelHandle(m):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(m,this.labelShape.bounds)&&(c=mxConstants.HANDLE_SIZE+3,f=mxConstants.HANDLE_SIZE+3,m=new mxRectangle(Math.floor(a.x-c/2),Math.floor(a.y-f/2),c,f)),this.bends[1].bounds=m,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)},__mxOutput.mxElbowEdgeHandler=void 0!==mxElbowEdgeHandler?mxElbowEdgeHandler:void 0,mxUtils.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler),mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var e=this.state.absolutePoints;if(null!=e){var t=Math.max(1,this.graph.view.scale);if(2==e.length||3==e.length&&(Math.abs(e[0].x-e[1].x)<t&&Math.abs(e[1].x-e[2].x)<t||Math.abs(e[0].y-e[1].y)<t&&Math.abs(e[1].y-e[2].y)<t)){var r=e[0].x+(e[e.length-1].x-e[0].x)/2,o=e[0].y+(e[e.length-1].y-e[0].y)/2;e=[e[0],new mxPoint(r,o),new mxPoint(r,o),e[e.length-1]]}}return e},mxEdgeSegmentHandler.prototype.getPreviewPoints=function(e){if(this.isSource||this.isTarget)return mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this,arguments);var t=this.getCurrentPoints(),r=this.convertPoint(t[0].clone(),!1);e=this.convertPoint(e.clone(),!1);for(var o=[],a=1;a<t.length;a++){var u=this.convertPoint(t[a].clone(),!1);a==this.index&&(0==Math.round(r.x-u.x)&&(r.x=e.x,u.x=e.x),0==Math.round(r.y-u.y)&&(r.y=e.y,u.y=e.y)),a<t.length-1&&o.push(u),r=u}if(1==o.length){var c=this.state.getVisibleTerminalState(!0),f=this.state.getVisibleTerminalState(!1),m=this.state.view.getScale(),x=this.state.view.getTranslate(),v=o[0].x*m+x.x,E=o[0].y*m+x.y;(null!=c&&mxUtils.contains(c,v,E)||null!=f&&mxUtils.contains(f,v,E))&&(o=[e,e])}return o},mxEdgeSegmentHandler.prototype.updatePreviewState=function(e,t,r,o){if(mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments),!this.isSource&&!this.isTarget){t=this.convertPoint(t.clone(),!1);for(var a=e.absolutePoints,u=a[0],c=a[1],f=[],m=2;m<a.length;m++){var x=a[m];(0!=Math.round(u.x-c.x)||0!=Math.round(c.x-x.x))&&(0!=Math.round(u.y-c.y)||0!=Math.round(c.y-x.y))&&f.push(this.convertPoint(c.clone(),!1)),u=c,c=x}var v=this.state.getVisibleTerminalState(!0),E=this.state.getVisibleTerminalState(!1),S=this.state.absolutePoints;if(0!=f.length||0!=Math.round(a[0].x-a[a.length-1].x)&&0!=Math.round(a[0].y-a[a.length-1].y)){if(5==a.length&&2==f.length&&null!=v&&null!=E&&null!=S&&0==Math.round(S[0].x-S[S.length-1].x)){var b=this.graph.getView(),_=b.getScale(),D=b.getTranslate(),M=b.getRoutingCenterY(v)/_-D.y,R=this.graph.getConnectionConstraint(e,v,!0);null!=R&&null!=(N=this.graph.getConnectionPoint(v,R))&&(this.convertPoint(N,!1),M=N.y);var N,V=b.getRoutingCenterY(E)/_-D.y,O=this.graph.getConnectionConstraint(e,E,!1);O&&null!=(N=this.graph.getConnectionPoint(E,O))&&(this.convertPoint(N,!1),V=N.y),f=[new mxPoint(t.x,M),new mxPoint(t.x,V)]}}else f=[t,t];this.points=f,e.view.updateFixedTerminalPoints(e,v,E),e.view.updatePoints(e,this.points,v,E),e.view.updateFloatingTerminalPoints(e,v,E)}},mxEdgeSegmentHandler.prototype.connect=function(e,t,r,o,a){var u=this.graph.getModel(),f=null;if(null!=(c=u.getGeometry(e))&&null!=c.points&&c.points.length>0){var m=this.abspoints,x=m[0],v=m[1];f=[];for(var E=2;E<m.length;E++){var S=m[E];(0!=Math.round(x.x-v.x)||0!=Math.round(v.x-S.x))&&(0!=Math.round(x.y-v.y)||0!=Math.round(v.y-S.y))&&f.push(this.convertPoint(v.clone(),!1)),x=v,v=S}}u.beginUpdate();try{var c;null!=f&&null!=(c=u.getGeometry(e))&&((c=c.clone()).points=f,u.setGeometry(e,c)),e=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{u.endUpdate()}return e},mxEdgeSegmentHandler.prototype.getTooltipForNode=function(e){return null},mxEdgeSegmentHandler.prototype.start=function(e,t,r){mxEdgeHandler.prototype.start.apply(this,arguments),null!=this.bends&&null!=this.bends[r]&&!this.isSource&&!this.isTarget&&mxUtils.setOpacity(this.bends[r].node,100)},mxEdgeSegmentHandler.prototype.createBends=function(){var e=[],t=this.createHandleShape(0);this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t);var r=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){null==this.points&&(this.points=[]);for(var o=0;o<r.length-1;o++){t=this.createVirtualBend(),e.push(t);var a=0==Math.round(r[o].x-r[o+1].x);0==Math.round(r[o].y-r[o+1].y)&&o<r.length-2&&(a=0==Math.round(r[o].x-r[o+2].x)),t.setCursor(a?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}return t=this.createHandleShape(r.length),this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e},mxEdgeSegmentHandler.prototype.redraw=function(){this.refresh(),mxEdgeHandler.prototype.redraw.apply(this,arguments)},mxEdgeSegmentHandler.prototype.redrawInnerBends=function(e,t){if(this.graph.isCellBendable(this.state.cell)){var r=this.getCurrentPoints();if(null!=r&&r.length>1){var o=!1;if(4==r.length&&0==Math.round(r[1].x-r[2].x)&&0==Math.round(r[1].y-r[2].y))if(o=!0,0==Math.round(r[0].y-r[r.length-1].y)){var a=r[0].x+(r[r.length-1].x-r[0].x)/2;r[1]=new mxPoint(a,r[1].y),r[2]=new mxPoint(a,r[2].y)}else{var u=r[0].y+(r[r.length-1].y-r[0].y)/2;r[1]=new mxPoint(r[1].x,u),r[2]=new mxPoint(r[2].x,u)}for(var c=0;c<r.length-1;c++)if(null!=this.bends[c+1]){var f=new mxPoint((e=r[c]).x+((t=r[c+1]).x-e.x)/2,e.y+(t.y-e.y)/2),m=this.bends[c+1].bounds;this.bends[c+1].bounds=new mxRectangle(Math.floor(f.x-m.width/2),Math.floor(f.y-m.height/2),m.width,m.height),this.bends[c+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[c+1].bounds)}o&&(mxUtils.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}},__mxOutput.mxEdgeSegmentHandler=void 0!==mxEdgeSegmentHandler?mxEdgeSegmentHandler:void 0,mxKeyHandler.prototype.graph=null,mxKeyHandler.prototype.target=null,mxKeyHandler.prototype.normalKeys=null,mxKeyHandler.prototype.shiftKeys=null,mxKeyHandler.prototype.controlKeys=null,mxKeyHandler.prototype.controlShiftKeys=null,mxKeyHandler.prototype.enabled=!0,mxKeyHandler.prototype.isEnabled=function(){return this.enabled},mxKeyHandler.prototype.setEnabled=function(e){this.enabled=e},mxKeyHandler.prototype.bindKey=function(e,t){this.normalKeys[e]=t},mxKeyHandler.prototype.bindShiftKey=function(e,t){this.shiftKeys[e]=t},mxKeyHandler.prototype.bindControlKey=function(e,t){this.controlKeys[e]=t},mxKeyHandler.prototype.bindControlShiftKey=function(e,t){this.controlShiftKeys[e]=t},mxKeyHandler.prototype.isControlDown=function(e){return mxEvent.isControlDown(e)},mxKeyHandler.prototype.getFunction=function(e){return null==e||mxEvent.isAltDown(e)?null:this.isControlDown(e)?mxEvent.isShiftDown(e)?this.controlShiftKeys[e.keyCode]:this.controlKeys[e.keyCode]:mxEvent.isShiftDown(e)?this.shiftKeys[e.keyCode]:this.normalKeys[e.keyCode]},mxKeyHandler.prototype.isGraphEvent=function(e){var t=mxEvent.getSource(e);return!!(t==this.target||t.parentNode==this.target||null!=this.graph.cellEditor&&this.graph.cellEditor.isEventSource(e))||mxUtils.isAncestorNode(this.graph.container,t)},mxKeyHandler.prototype.keyDown=function(e){if(this.isEnabledForEvent(e))if(27==e.keyCode)this.escape(e);else if(!this.isEventIgnored(e)){var t=this.getFunction(e);null!=t&&(t(e),mxEvent.consume(e))}},mxKeyHandler.prototype.isEnabledForEvent=function(e){return this.graph.isEnabled()&&!mxEvent.isConsumed(e)&&this.isGraphEvent(e)&&this.isEnabled()},mxKeyHandler.prototype.isEventIgnored=function(e){return this.graph.isEditing()},mxKeyHandler.prototype.escape=function(e){this.graph.isEscapeEnabled()&&this.graph.escape(e)},mxKeyHandler.prototype.destroy=function(){null!=this.target&&null!=this.keydownHandler&&(mxEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null},__mxOutput.mxKeyHandler=void 0!==mxKeyHandler?mxKeyHandler:void 0,mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!0,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(e){this.enabled=e},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(e){this.hideOnHover=e},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(e){"A"!=mxEvent.getSource(e).nodeName&&this.hideTooltip()})))},mxTooltipHandler.prototype.getStateForEvent=function(e){return e.getState()},mxTooltipHandler.prototype.mouseDown=function(e,t){this.reset(t,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(e,t){if(t.getX()!=this.lastX||t.getY()!=this.lastY){this.reset(t,!0);var r=this.getStateForEvent(t);(this.isHideOnHover()||r!=this.state||t.getSource()!=this.node&&(!this.stateSource||null!=r&&this.stateSource==(t.isSource(r.shape)||!t.isSource(r.text))))&&this.hideTooltip()}this.lastX=t.getX(),this.lastY=t.getY()},mxTooltipHandler.prototype.mouseUp=function(e,t){this.reset(t,!0),this.hideTooltip()},mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(e,t,r){if((!this.ignoreTouchEvents||mxEvent.isMouseEvent(e.getEvent()))&&(this.resetTimer(),r=null!=r?r:this.getStateForEvent(e),t&&this.isEnabled()&&null!=r&&(null==this.div||"hidden"==this.div.style.visibility))){var o=e.getSource(),a=e.getX(),u=e.getY(),c=e.isSource(r.shape)||e.isSource(r.text);this.thread=window.setTimeout(mxUtils.bind(this,function(){if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var f=this.graph.getTooltip(r,o,a,u);this.show(f,a,u),this.state=r,this.node=o,this.stateSource=c}}),this.delay)}},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden",this.div.innerHTML="")},mxTooltipHandler.prototype.show=function(e,t,r){if(!this.destroyed&&null!=e&&e.length>0){null==this.div&&this.init();var o=mxUtils.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=t+o.x+"px",this.div.style.top=r+mxConstants.TOOLTIP_VERTICAL_OFFSET+o.y+"px",mxUtils.isNode(e)?(this.div.innerHTML="",this.div.appendChild(e)):this.div.innerHTML=e.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils.fit(this.div)}},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)},__mxOutput.mxTooltipHandler=void 0!==mxTooltipHandler?mxTooltipHandler:void 0,mxUtils.extend(mxCellTracker,mxCellMarker),mxCellTracker.prototype.mouseDown=function(e,t){},mxCellTracker.prototype.mouseMove=function(e,t){this.isEnabled()&&this.process(t)},mxCellTracker.prototype.mouseUp=function(e,t){},mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker.prototype.destroy.apply(this))},__mxOutput.mxCellTracker=void 0!==mxCellTracker?mxCellTracker:void 0,mxCellHighlight.prototype.keepOnTop=!1,mxCellHighlight.prototype.graph=null,mxCellHighlight.prototype.state=null,mxCellHighlight.prototype.spacing=2,mxCellHighlight.prototype.resetHandler=null,mxCellHighlight.prototype.setHighlightColor=function(e){this.highlightColor=e,null!=this.shape&&(this.shape.stroke=e)},mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),!this.keepOnTop&&this.shape.node.parentNode.firstChild!=this.shape.node&&this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)},mxCellHighlight.prototype.createShape=function(){var e=this.graph.cellRenderer.createShape(this.state);return e.svgStrokeTolerance=this.graph.tolerance,e.points=this.state.absolutePoints,e.apply(this.state),e.stroke=this.highlightColor,e.opacity=this.opacity,e.isDashed=this.dashed,e.isShadow=!1,e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(e.node,this.graph,this.state),this.graph.dialect!=mxConstants.DIALECT_SVG?e.pointerEvents=!1:e.svgPointerEvents="stroke",e},mxCellHighlight.prototype.getStrokeWidth=function(e){return this.strokeWidth},mxCellHighlight.prototype.repaint=function(){null!=this.state&&null!=this.shape&&(this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),null!=this.state.shape&&this.shape.setCursor(this.state.shape.getCursor()),(mxClient.IS_QUIRKS||8==document.documentMode)&&("transparent"==this.shape.stroke?(this.shape.stroke="white",this.shape.opacity=1):this.shape.opacity=this.opacity),this.shape.redraw())},mxCellHighlight.prototype.hide=function(){this.highlight(null)},mxCellHighlight.prototype.highlight=function(e){this.state!=e&&(null!=this.shape&&(this.shape.destroy(),this.shape=null),this.state=e,null!=this.state&&this.drawHighlight())},mxCellHighlight.prototype.isHighlightAt=function(e,t){var r=!1;if(null!=this.shape&&null!=document.elementFromPoint&&!mxClient.IS_QUIRKS)for(var o=document.elementFromPoint(e,t);null!=o;){if(o==this.shape.node){r=!0;break}o=o.parentNode}return r},mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),null!=this.shape&&(this.shape.destroy(),this.shape=null)},__mxOutput.mxCellHighlight=void 0!==mxCellHighlight?mxCellHighlight:void 0,mxDefaultKeyHandler.prototype.editor=null,mxDefaultKeyHandler.prototype.handler=null,mxDefaultKeyHandler.prototype.bindAction=function(e,t,r){var o=mxUtils.bind(this,function(){this.editor.execute(t)});r?this.handler.bindControlKey(e,o):this.handler.bindKey(e,o)},mxDefaultKeyHandler.prototype.destroy=function(){this.handler.destroy(),this.handler=null},__mxOutput.mxDefaultKeyHandler=void 0!==mxDefaultKeyHandler?mxDefaultKeyHandler:void 0,mxDefaultPopupMenu.prototype.imageBasePath=null,mxDefaultPopupMenu.prototype.config=null,mxDefaultPopupMenu.prototype.createMenu=function(e,t,r,o){if(null!=this.config){var a=this.createConditions(e,r,o);this.addItems(e,t,r,o,a,this.config.firstChild,null)}},mxDefaultPopupMenu.prototype.addItems=function(e,t,r,o,a,u,c){for(var f=!1;null!=u;){if("add"==u.nodeName){var m=u.getAttribute("if");if(null==m||a[m]){var x=u.getAttribute("as");x=mxResources.get(x)||x;var v=mxUtils.eval(mxUtils.getTextContent(u)),E=u.getAttribute("action"),S=u.getAttribute("icon"),b=u.getAttribute("iconCls"),_=u.getAttribute("enabled-if"),D=null==_||a[_];f&&(t.addSeparator(c),f=!1),null!=S&&this.imageBasePath&&(S=this.imageBasePath+S);var M=this.addAction(t,e,x,S,v,E,r,c,b,D);this.addItems(e,t,r,o,a,u.firstChild,M)}}else"separator"==u.nodeName&&(f=!0);u=u.nextSibling}},mxDefaultPopupMenu.prototype.addAction=function(e,t,r,o,a,u,c,f,m,x){return e.addItem(r,o,function(E){"function"==typeof a&&a.call(t,t,c,E),null!=u&&t.execute(u,c,E)},f,m,x)},mxDefaultPopupMenu.prototype.createConditions=function(e,t,r){var o=e.graph.getModel(),a=o.getChildCount(t),u=[];u.nocell=null==t,u.ncells=e.graph.getSelectionCount()>1,u.notRoot=o.getRoot()!=o.getParent(e.graph.getDefaultParent()),u.cell=null!=t;var c=null!=t&&1==e.graph.getSelectionCount();u.nonEmpty=c&&a>0,u.expandable=c&&e.graph.isCellFoldable(t,!1),u.collapsable=c&&e.graph.isCellFoldable(t,!0),u.validRoot=c&&e.graph.isValidRoot(t),u.emptyValidRoot=u.validRoot&&0==a,u.swimlane=c&&e.graph.isSwimlane(t);for(var f=this.config.getElementsByTagName("condition"),m=0;m<f.length;m++){var x=mxUtils.eval(mxUtils.getTextContent(f[m])),v=f[m].getAttribute("name");null!=v&&"function"==typeof x&&(u[v]=x(e,t,r))}return u},__mxOutput.mxDefaultPopupMenu=void 0!==mxDefaultPopupMenu?mxDefaultPopupMenu:void 0,mxDefaultToolbar.prototype.editor=null,mxDefaultToolbar.prototype.toolbar=null,mxDefaultToolbar.prototype.resetHandler=null,mxDefaultToolbar.prototype.spacing=4,mxDefaultToolbar.prototype.connectOnDrop=!1,mxDefaultToolbar.prototype.init=function(e){null!=e&&(this.toolbar=new mxToolbar(e),this.toolbar.addListener(mxEvent.SELECT,mxUtils.bind(this,function(t,r){var o=r.getProperty("function");this.editor.insertFunction=null!=o?mxUtils.bind(this,function(){o.apply(this,arguments),this.toolbar.resetMode()}):null})),this.resetHandler=mxUtils.bind(this,function(){null!=this.toolbar&&this.toolbar.resetMode(!0)}),this.editor.graph.addListener(mxEvent.DOUBLE_CLICK,this.resetHandler),this.editor.addListener(mxEvent.ESCAPE,this.resetHandler))},mxDefaultToolbar.prototype.addItem=function(e,t,r,o){var a=mxUtils.bind(this,function(){null!=r&&r.length>0&&this.editor.execute(r)});return this.toolbar.addItem(e,t,a,o)},mxDefaultToolbar.prototype.addSeparator=function(e){this.toolbar.addSeparator(e=e||mxClient.imageBasePath+"/separator.gif")},mxDefaultToolbar.prototype.addCombo=function(){return this.toolbar.addCombo()},mxDefaultToolbar.prototype.addActionCombo=function(e){return this.toolbar.addActionCombo(e)},mxDefaultToolbar.prototype.addActionOption=function(e,t,r){var o=mxUtils.bind(this,function(){this.editor.execute(r)});this.addOption(e,t,o)},mxDefaultToolbar.prototype.addOption=function(e,t,r){return this.toolbar.addOption(e,t,r)},mxDefaultToolbar.prototype.addMode=function(e,t,r,o,a){var u=mxUtils.bind(this,function(){this.editor.setMode(r),null!=a&&a(this.editor)});return this.toolbar.addSwitchMode(e,t,u,o)},mxDefaultToolbar.prototype.addPrototype=function(e,t,r,o,a,u){var c=mxUtils.bind(this,function(){return"function"==typeof r?r():null!=r?this.editor.graph.cloneCell(r):null}),f=mxUtils.bind(this,function(v,E){"function"==typeof a?a(this.editor,c(),v,E):this.drop(c(),v,E),this.toolbar.resetMode(),mxEvent.consume(v)}),m=this.toolbar.addMode(e,t,f,o,null,u);return this.installDropHandler(m,function(v,E,S){f(E,S)}),m},mxDefaultToolbar.prototype.drop=function(e,t,r){var o=this.editor.graph,a=o.getModel();if(null!=r&&!a.isEdge(r)&&this.connectOnDrop&&o.isCellConnectable(r))this.connect(e,t,r);else{for(;null!=r&&!o.isValidDropTarget(r,[e],t);)r=a.getParent(r);this.insert(e,t,r)}},mxDefaultToolbar.prototype.insert=function(e,t,r){var o=this.editor.graph;if(o.canImportCell(e)){var a=mxEvent.getClientX(t),u=mxEvent.getClientY(t),c=mxUtils.convertPoint(o.container,a,u);return o.isSplitEnabled()&&o.isSplitTarget(r,[e],t)?o.splitEdge(r,[e],null,c.x,c.y):this.editor.addVertex(r,e,c.x,c.y)}return null},mxDefaultToolbar.prototype.connect=function(e,t,r){var o=this.editor.graph,a=o.getModel();if(null!=r&&o.isCellConnectable(e)&&o.isEdgeValid(null,r,e)){var u=null;a.beginUpdate();try{var c=a.getGeometry(r),f=a.getGeometry(e).clone();f.x=c.x+(c.width-f.width)/2,f.y=c.y+(c.height-f.height)/2;var m=this.spacing*o.gridSize,x=20*a.getDirectedEdgeCount(r,!0);this.editor.horizontalFlow?f.x+=(f.width+c.width)/2+m+x:f.y+=(f.height+c.height)/2+m+x,e.setGeometry(f);var v=a.getParent(r);if(o.addCell(e,v),o.constrainChild(e),u=this.editor.createEdge(r,e),null==a.getGeometry(u)){var E=new mxGeometry;E.relative=!0,a.setGeometry(u,E)}o.addEdge(u,v,r,e)}finally{a.endUpdate()}o.setSelectionCells([e,u]),o.scrollCellToVisible(e)}},mxDefaultToolbar.prototype.installDropHandler=function(e,t){var r=document.createElement("img");r.setAttribute("src",e.getAttribute("src"));var o=mxUtils.bind(this,function(a){r.style.width=2*e.offsetWidth+"px",r.style.height=2*e.offsetHeight+"px",mxUtils.makeDraggable(e,this.editor.graph,t,r),mxEvent.removeListener(r,"load",o)});mxClient.IS_IE?o():mxEvent.addListener(r,"load",o)},mxDefaultToolbar.prototype.destroy=function(){null!=this.resetHandler&&(this.editor.graph.removeListener("dblclick",this.resetHandler),this.editor.removeListener("escape",this.resetHandler),this.resetHandler=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null)},__mxOutput.mxDefaultToolbar=void 0!==mxDefaultToolbar?mxDefaultToolbar:void 0,mxLoadResources?mxResources.add(mxClient.basePath+"/resources/editor"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/editor"),mxEditor.prototype=new mxEventSource,mxEditor.prototype.constructor=mxEditor,mxEditor.prototype.askZoomResource="none"!=mxClient.language?"askZoom":"",mxEditor.prototype.lastSavedResource="none"!=mxClient.language?"lastSaved":"",mxEditor.prototype.currentFileResource="none"!=mxClient.language?"currentFile":"",mxEditor.prototype.propertiesResource="none"!=mxClient.language?"properties":"",mxEditor.prototype.tasksResource="none"!=mxClient.language?"tasks":"",mxEditor.prototype.helpResource="none"!=mxClient.language?"help":"",mxEditor.prototype.outlineResource="none"!=mxClient.language?"outline":"",mxEditor.prototype.outline=null,mxEditor.prototype.graph=null,mxEditor.prototype.graphRenderHint=null,mxEditor.prototype.toolbar=null,mxEditor.prototype.status=null,mxEditor.prototype.popupHandler=null,mxEditor.prototype.undoManager=null,mxEditor.prototype.keyHandler=null,mxEditor.prototype.actions=null,mxEditor.prototype.dblClickAction="edit",mxEditor.prototype.swimlaneRequired=!1,mxEditor.prototype.disableContextMenu=!0,mxEditor.prototype.insertFunction=null,mxEditor.prototype.forcedInserting=!1,mxEditor.prototype.templates=null,mxEditor.prototype.defaultEdge=null,mxEditor.prototype.defaultEdgeStyle=null,mxEditor.prototype.defaultGroup=null,mxEditor.prototype.groupBorderSize=null,mxEditor.prototype.filename=null,mxEditor.prototype.linefeed="&#xa;",mxEditor.prototype.postParameterName="xml",mxEditor.prototype.escapePostData=!0,mxEditor.prototype.urlPost=null,mxEditor.prototype.urlImage=null,mxEditor.prototype.horizontalFlow=!1,mxEditor.prototype.layoutDiagram=!1,mxEditor.prototype.swimlaneSpacing=0,mxEditor.prototype.maintainSwimlanes=!1,mxEditor.prototype.layoutSwimlanes=!1,mxEditor.prototype.cycleAttributeValues=null,mxEditor.prototype.cycleAttributeIndex=0,mxEditor.prototype.cycleAttributeName="fillColor",mxEditor.prototype.tasks=null,mxEditor.prototype.tasksWindowImage=null,mxEditor.prototype.tasksTop=20,mxEditor.prototype.help=null,mxEditor.prototype.helpWindowImage=null,mxEditor.prototype.urlHelp=null,mxEditor.prototype.helpWidth=300,mxEditor.prototype.helpHeight=260,mxEditor.prototype.propertiesWidth=240,mxEditor.prototype.propertiesHeight=null,mxEditor.prototype.movePropertiesDialog=!1,mxEditor.prototype.validating=!1,mxEditor.prototype.modified=!1,mxEditor.prototype.isModified=function(){return this.modified},mxEditor.prototype.setModified=function(e){this.modified=e},mxEditor.prototype.addActions=function(){this.addAction("save",function(e){e.save()}),this.addAction("print",function(e){new mxPrintPreview(e.graph,1).open()}),this.addAction("show",function(e){mxUtils.show(e.graph,null,10,10)}),this.addAction("exportImage",function(e){var t=e.getUrlImage();if(null==t||mxClient.IS_LOCAL)e.execute("show");else{var r=mxUtils.getViewXml(e.graph,1),o=mxUtils.getXml(r,"\n");mxUtils.submit(t,e.postParameterName+"="+encodeURIComponent(o),document,"_blank")}}),this.addAction("refresh",function(e){e.graph.refresh()}),this.addAction("cut",function(e){e.graph.isEnabled()&&mxClipboard.cut(e.graph)}),this.addAction("copy",function(e){e.graph.isEnabled()&&mxClipboard.copy(e.graph)}),this.addAction("paste",function(e){e.graph.isEnabled()&&mxClipboard.paste(e.graph)}),this.addAction("delete",function(e){e.graph.isEnabled()&&e.graph.removeCells()}),this.addAction("group",function(e){e.graph.isEnabled()&&e.graph.setSelectionCell(e.groupCells())}),this.addAction("ungroup",function(e){e.graph.isEnabled()&&e.graph.setSelectionCells(e.graph.ungroupCells())}),this.addAction("removeFromParent",function(e){e.graph.isEnabled()&&e.graph.removeCellsFromParent()}),this.addAction("undo",function(e){e.graph.isEnabled()&&e.undo()}),this.addAction("redo",function(e){e.graph.isEnabled()&&e.redo()}),this.addAction("zoomIn",function(e){e.graph.zoomIn()}),this.addAction("zoomOut",function(e){e.graph.zoomOut()}),this.addAction("actualSize",function(e){e.graph.zoomActual()}),this.addAction("fit",function(e){e.graph.fit()}),this.addAction("showProperties",function(e,t){e.showProperties(t)}),this.addAction("selectAll",function(e){e.graph.isEnabled()&&e.graph.selectAll()}),this.addAction("selectNone",function(e){e.graph.isEnabled()&&e.graph.clearSelection()}),this.addAction("selectVertices",function(e){e.graph.isEnabled()&&e.graph.selectVertices()}),this.addAction("selectEdges",function(e){e.graph.isEnabled()&&e.graph.selectEdges()}),this.addAction("edit",function(e,t){e.graph.isEnabled()&&e.graph.isCellEditable(t)&&e.graph.startEditingAtCell(t)}),this.addAction("toBack",function(e,t){e.graph.isEnabled()&&e.graph.orderCells(!0)}),this.addAction("toFront",function(e,t){e.graph.isEnabled()&&e.graph.orderCells(!1)}),this.addAction("enterGroup",function(e,t){e.graph.enterGroup(t)}),this.addAction("exitGroup",function(e){e.graph.exitGroup()}),this.addAction("home",function(e){e.graph.home()}),this.addAction("selectPrevious",function(e){e.graph.isEnabled()&&e.graph.selectPreviousCell()}),this.addAction("selectNext",function(e){e.graph.isEnabled()&&e.graph.selectNextCell()}),this.addAction("selectParent",function(e){e.graph.isEnabled()&&e.graph.selectParentCell()}),this.addAction("selectChild",function(e){e.graph.isEnabled()&&e.graph.selectChildCell()}),this.addAction("collapse",function(e){e.graph.isEnabled()&&e.graph.foldCells(!0)}),this.addAction("collapseAll",function(e){if(e.graph.isEnabled()){var t=e.graph.getChildVertices();e.graph.foldCells(!0,!1,t)}}),this.addAction("expand",function(e){e.graph.isEnabled()&&e.graph.foldCells(!1)}),this.addAction("expandAll",function(e){if(e.graph.isEnabled()){var t=e.graph.getChildVertices();e.graph.foldCells(!1,!1,t)}}),this.addAction("bold",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_BOLD)}),this.addAction("italic",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_ITALIC)}),this.addAction("underline",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_UNDERLINE)}),this.addAction("alignCellsLeft",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_LEFT)}),this.addAction("alignCellsCenter",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_CENTER)}),this.addAction("alignCellsRight",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_RIGHT)}),this.addAction("alignCellsTop",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_TOP)}),this.addAction("alignCellsMiddle",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_MIDDLE)}),this.addAction("alignCellsBottom",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_BOTTOM)}),this.addAction("alignFontLeft",function(e){e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT)}),this.addAction("alignFontCenter",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER)}),this.addAction("alignFontRight",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_RIGHT)}),this.addAction("alignFontTop",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_TOP)}),this.addAction("alignFontMiddle",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE)}),this.addAction("alignFontBottom",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_BOTTOM)}),this.addAction("zoom",function(e){var t=100*e.graph.getView().scale,r=parseFloat(mxUtils.prompt(mxResources.get(e.askZoomResource)||e.askZoomResource,t))/100;isNaN(r)||e.graph.getView().setScale(r)}),this.addAction("toggleTasks",function(e){null!=e.tasks?e.tasks.setVisible(!e.tasks.isVisible()):e.showTasks()}),this.addAction("toggleHelp",function(e){null!=e.help?e.help.setVisible(!e.help.isVisible()):e.showHelp()}),this.addAction("toggleOutline",function(e){null==e.outline?e.showOutline():e.outline.setVisible(!e.outline.isVisible())}),this.addAction("toggleConsole",function(e){mxLog.setVisible(!mxLog.isVisible())})},mxEditor.prototype.configure=function(e){null!=e&&(new mxCodec(e.ownerDocument).decode(e,this),this.resetHistory())},mxEditor.prototype.resetFirstTime=function(){document.cookie="mxgraph=seen; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/"},mxEditor.prototype.resetHistory=function(){this.lastSnapshot=(new Date).getTime(),this.undoManager.clear(),this.ignoredChanges=0,this.setModified(!1)},mxEditor.prototype.addAction=function(e,t){this.actions[e]=t},mxEditor.prototype.execute=function(e,t,r){var o=this.actions[e];if(null!=o)try{var a=arguments;a[0]=this,o.apply(this,a)}catch(u){throw mxUtils.error("Cannot execute "+e+": "+u.message,280,!0),u}else mxUtils.error("Cannot find action "+e,280,!0)},mxEditor.prototype.addTemplate=function(e,t){this.templates[e]=t},mxEditor.prototype.getTemplate=function(e){return this.templates[e]},mxEditor.prototype.createGraph=function(){var e=new mxGraph(null,null,this.graphRenderHint);return e.setTooltips(!0),e.setPanning(!0),this.installDblClickHandler(e),this.installUndoHandler(e),this.installDrillHandler(e),this.installChangeHandler(e),this.installInsertHandler(e),e.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(t,r,o){return this.createPopupMenu(t,r,o)}),e.connectionHandler.factoryMethod=mxUtils.bind(this,function(t,r){return this.createEdge(t,r)}),this.createSwimlaneManager(e),this.createLayoutManager(e),e},mxEditor.prototype.createSwimlaneManager=function(e){var t=new mxSwimlaneManager(e,!1);return t.isHorizontal=mxUtils.bind(this,function(){return this.horizontalFlow}),t.isEnabled=mxUtils.bind(this,function(){return this.maintainSwimlanes}),t},mxEditor.prototype.createLayoutManager=function(e){var t=new mxLayoutManager(e),r=this;return t.getLayout=function(o){var a=null,u=r.graph.getModel();return null!=u.getParent(o)&&(r.layoutSwimlanes&&e.isSwimlane(o)?(null==r.swimlaneLayout&&(r.swimlaneLayout=r.createSwimlaneLayout()),a=r.swimlaneLayout):r.layoutDiagram&&(e.isValidRoot(o)||null==u.getParent(u.getParent(o)))&&(null==r.diagramLayout&&(r.diagramLayout=r.createDiagramLayout()),a=r.diagramLayout)),a},t},mxEditor.prototype.setGraphContainer=function(e){null==this.graph.container&&(this.graph.init(e),this.rubberband=new mxRubberband(this.graph),this.disableContextMenu&&mxEvent.disableContextMenu(e),mxClient.IS_QUIRKS&&new mxDivResizer(e))},mxEditor.prototype.installDblClickHandler=function(e){e.addListener(mxEvent.DOUBLE_CLICK,mxUtils.bind(this,function(t,r){var o=r.getProperty("cell");null!=o&&e.isEnabled()&&null!=this.dblClickAction&&(this.execute(this.dblClickAction,o),r.consume())}))},mxEditor.prototype.installUndoHandler=function(e){var t=mxUtils.bind(this,function(o,a){var u=a.getProperty("edit");this.undoManager.undoableEditHappened(u)});e.getModel().addListener(mxEvent.UNDO,t),e.getView().addListener(mxEvent.UNDO,t);var r=function(o,a){var u=a.getProperty("edit").changes;e.setSelectionCells(e.getSelectionCellsForChanges(u))};this.undoManager.addListener(mxEvent.UNDO,r),this.undoManager.addListener(mxEvent.REDO,r)},mxEditor.prototype.installDrillHandler=function(e){var t=mxUtils.bind(this,function(r){this.fireEvent(new mxEventObject(mxEvent.ROOT))});e.getView().addListener(mxEvent.DOWN,t),e.getView().addListener(mxEvent.UP,t)},mxEditor.prototype.installChangeHandler=function(e){var t=mxUtils.bind(this,function(r,o){this.setModified(!0),1==this.validating&&e.validateGraph();for(var a=o.getProperty("edit").changes,u=0;u<a.length;u++){var c=a[u];if(c instanceof mxRootChange||c instanceof mxValueChange&&c.cell==this.graph.model.root||c instanceof mxCellAttributeChange&&c.cell==this.graph.model.root){this.fireEvent(new mxEventObject(mxEvent.ROOT));break}}});e.getModel().addListener(mxEvent.CHANGE,t)},mxEditor.prototype.installInsertHandler=function(e){var t=this;e.addMouseListener({mouseDown:function(o,a){null!=t.insertFunction&&!a.isPopupTrigger()&&(t.forcedInserting||null==a.getState())&&(t.graph.clearSelection(),t.insertFunction(a.getEvent(),a.getCell()),this.isActive=!0,a.consume())},mouseMove:function(o,a){this.isActive&&a.consume()},mouseUp:function(o,a){this.isActive&&(this.isActive=!1,a.consume())}})},mxEditor.prototype.createDiagramLayout=function(){var e=this.graph.gridSize,t=new mxStackLayout(this.graph,!this.horizontalFlow,this.swimlaneSpacing,2*e,2*e);return t.isVertexIgnored=function(r){return!t.graph.isSwimlane(r)},t},mxEditor.prototype.createSwimlaneLayout=function(){return new mxCompactTreeLayout(this.graph,this.horizontalFlow)},mxEditor.prototype.createToolbar=function(){return new mxDefaultToolbar(null,this)},mxEditor.prototype.setToolbarContainer=function(e){this.toolbar.init(e),mxClient.IS_QUIRKS&&new mxDivResizer(e)},mxEditor.prototype.setStatusContainer=function(e){null==this.status&&(this.status=e,this.addListener(mxEvent.SAVE,mxUtils.bind(this,function(){var t=(new Date).toLocaleString();this.setStatus((mxResources.get(this.lastSavedResource)||this.lastSavedResource)+": "+t)})),this.addListener(mxEvent.OPEN,mxUtils.bind(this,function(){this.setStatus((mxResources.get(this.currentFileResource)||this.currentFileResource)+": "+this.filename)})),mxClient.IS_QUIRKS&&new mxDivResizer(e))},mxEditor.prototype.setStatus=function(e){null!=this.status&&null!=e&&(this.status.innerHTML=e)},mxEditor.prototype.setTitleContainer=function(e){this.addListener(mxEvent.ROOT,mxUtils.bind(this,function(t){e.innerHTML=this.getTitle()})),mxClient.IS_QUIRKS&&new mxDivResizer(e)},mxEditor.prototype.treeLayout=function(e,t){null!=e&&new mxCompactTreeLayout(this.graph,t).execute(e)},mxEditor.prototype.getTitle=function(){for(var e="",t=this.graph,r=t.getCurrentRoot();null!=r&&null!=t.getModel().getParent(t.getModel().getParent(r));)t.isValidRoot(r)&&(e=" > "+t.convertValueToString(r)+e),r=t.getModel().getParent(r);return this.getRootTitle()+e},mxEditor.prototype.getRootTitle=function(){var e=this.graph.getModel().getRoot();return this.graph.convertValueToString(e)},mxEditor.prototype.undo=function(){this.undoManager.undo()},mxEditor.prototype.redo=function(){this.undoManager.redo()},mxEditor.prototype.groupCells=function(){var e=null!=this.groupBorderSize?this.groupBorderSize:this.graph.gridSize;return this.graph.groupCells(this.createGroup(),e)},mxEditor.prototype.createGroup=function(){return this.graph.getModel().cloneCell(this.defaultGroup)},mxEditor.prototype.open=function(e){if(null!=e){var t=mxUtils.load(e).getXml();this.readGraphModel(t.documentElement),this.filename=e,this.fireEvent(new mxEventObject(mxEvent.OPEN,"filename",e))}},mxEditor.prototype.readGraphModel=function(e){new mxCodec(e.ownerDocument).decode(e,this.graph.getModel()),this.resetHistory()},mxEditor.prototype.save=function(e,t){if(null!=(e=e||this.getUrlPost())&&e.length>0){var r=this.writeGraphModel(t);this.postDiagram(e,r),this.setModified(!1)}this.fireEvent(new mxEventObject(mxEvent.SAVE,"url",e))},mxEditor.prototype.postDiagram=function(e,t){this.escapePostData&&(t=encodeURIComponent(t)),mxUtils.post(e,this.postParameterName+"="+t,mxUtils.bind(this,function(r){this.fireEvent(new mxEventObject(mxEvent.POST,"request",r,"url",e,"data",t))}))},mxEditor.prototype.writeGraphModel=function(e){e=null!=e?e:this.linefeed;var r=(new mxCodec).encode(this.graph.getModel());return mxUtils.getXml(r,e)},mxEditor.prototype.getUrlPost=function(){return this.urlPost},mxEditor.prototype.getUrlImage=function(){return this.urlImage},mxEditor.prototype.swapStyles=function(e,t){var r=this.graph.getStylesheet().styles[t];this.graph.getView().getStylesheet().putCellStyle(t,this.graph.getStylesheet().styles[e]),this.graph.getStylesheet().putCellStyle(e,r),this.graph.refresh()},mxEditor.prototype.showProperties=function(e){if(null==(e=e||this.graph.getSelectionCell())&&null==(e=this.graph.getCurrentRoot())&&(e=this.graph.getModel().getRoot()),null!=e){this.graph.stopEditing(!0);var t=mxUtils.getOffset(this.graph.container),r=t.x+10,o=t.y;if(null==this.properties||this.movePropertiesDialog){var a=this.graph.getCellBounds(e);null!=a&&(r+=a.x+Math.min(200,a.width),o+=a.y)}else r=this.properties.getX(),o=this.properties.getY();this.hideProperties();var u=this.createProperties(e);null!=u&&(this.properties=new mxWindow(mxResources.get(this.propertiesResource)||this.propertiesResource,u,r,o,this.propertiesWidth,this.propertiesHeight,!1),this.properties.setVisible(!0))}},mxEditor.prototype.isPropertiesVisible=function(){return null!=this.properties},mxEditor.prototype.createProperties=function(e){var t=this.graph.getModel(),r=t.getValue(e);if(mxUtils.isNode(r)){var o=new mxForm("properties");o.addText("ID",e.getId()).setAttribute("readonly","true");var u=null,c=null,f=null,m=null,x=null;t.isVertex(e)&&null!=(u=t.getGeometry(e))&&(c=o.addText("top",u.y),f=o.addText("left",u.x),m=o.addText("width",u.width),x=o.addText("height",u.height));for(var v=t.getStyle(e),E=o.addText("Style",v||""),S=r.attributes,b=[],_=0;_<S.length;_++)b[_]=o.addTextarea(S[_].nodeName,S[_].value,"label"==S[_].nodeName?4:2);var M=mxUtils.bind(this,function(){this.hideProperties(),t.beginUpdate();try{null!=u&&((u=u.clone()).x=parseFloat(f.value),u.y=parseFloat(c.value),u.width=parseFloat(m.value),u.height=parseFloat(x.value),t.setGeometry(e,u)),t.setStyle(e,E.value.length>0?E.value:null);for(var N=0;N<S.length;N++){var V=new mxCellAttributeChange(e,S[N].nodeName,b[N].value);t.execute(V)}this.graph.isAutoSizeCell(e)&&this.graph.updateCellSize(e)}finally{t.endUpdate()}}),R=mxUtils.bind(this,function(){this.hideProperties()});return o.addButtons(M,R),o.table}return null},mxEditor.prototype.hideProperties=function(){null!=this.properties&&(this.properties.destroy(),this.properties=null)},mxEditor.prototype.showTasks=function(){if(null==this.tasks){var e=document.createElement("div");e.style.padding="4px",e.style.paddingLeft="20px";var t=document.body.clientWidth,r=new mxWindow(mxResources.get(this.tasksResource)||this.tasksResource,e,t-220,this.tasksTop,200);r.setClosable(!0),r.destroyOnClose=!1;var o=mxUtils.bind(this,function(a){mxEvent.release(e),e.innerHTML="",this.createTasks(e)});this.graph.getModel().addListener(mxEvent.CHANGE,o),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,o),this.graph.addListener(mxEvent.ROOT,o),null!=this.tasksWindowImage&&r.setImage(this.tasksWindowImage),this.tasks=r,this.createTasks(e)}this.tasks.setVisible(!0)},mxEditor.prototype.refreshTasks=function(e){null!=this.tasks&&(mxEvent.release(e=this.tasks.content),e.innerHTML="",this.createTasks(e))},mxEditor.prototype.createTasks=function(e){},mxEditor.prototype.showHelp=function(e){if(null==this.help){var t=document.createElement("iframe");t.setAttribute("src",mxResources.get("urlHelp")||this.urlHelp),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("frameBorder","0"),t.style.backgroundColor="white";var r=document.body.clientWidth,o=document.body.clientHeight||document.documentElement.clientHeight,a=new mxWindow(mxResources.get(this.helpResource)||this.helpResource,t,(r-this.helpWidth)/2,(o-this.helpHeight)/3,this.helpWidth,this.helpHeight);if(a.setMaximizable(!0),a.setClosable(!0),a.destroyOnClose=!1,a.setResizable(!0),null!=this.helpWindowImage&&a.setImage(this.helpWindowImage),mxClient.IS_NS){var u=function(c){t.setAttribute("height",a.div.offsetHeight-26+"px")};a.addListener(mxEvent.RESIZE_END,u),a.addListener(mxEvent.MAXIMIZE,u),a.addListener(mxEvent.NORMALIZE,u),a.addListener(mxEvent.SHOW,u)}this.help=a}this.help.setVisible(!0)},mxEditor.prototype.showOutline=function(){if(null==this.outline){var t=document.createElement("div");t.style.overflow="hidden",t.style.position="relative",t.style.width="100%",t.style.height="100%",t.style.background="white",t.style.cursor="move",8==document.documentMode&&(t.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=100)");var r=new mxWindow(mxResources.get(this.outlineResource)||this.outlineResource,t,600,480,200,200,!1),o=new mxOutline(this.graph,t);r.setClosable(!0),r.setResizable(!0),r.destroyOnClose=!1,r.addListener(mxEvent.RESIZE_END,function(){o.update()}),this.outline=r,this.outline.outline=o}this.outline.setVisible(!0),this.outline.outline.update(!0)},mxEditor.prototype.setMode=function(e){"select"==e?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!1)):"connect"==e?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!0)):"pan"==e&&(this.graph.panningHandler.useLeftButtonForPanning=!0,this.graph.setConnectable(!1))},mxEditor.prototype.createPopupMenu=function(e,t,r){this.popupHandler.createMenu(this,e,t,r)},mxEditor.prototype.createEdge=function(e,t){var r=null;if(null!=this.defaultEdge)r=this.graph.getModel().cloneCell(this.defaultEdge);else{(r=new mxCell("")).setEdge(!0);var a=new mxGeometry;a.relative=!0,r.setGeometry(a)}var u=this.getEdgeStyle();return null!=u&&r.setStyle(u),r},mxEditor.prototype.getEdgeStyle=function(){return this.defaultEdgeStyle},mxEditor.prototype.consumeCycleAttribute=function(e){return null!=this.cycleAttributeValues&&this.cycleAttributeValues.length>0&&this.graph.isSwimlane(e)?this.cycleAttributeValues[this.cycleAttributeIndex++%this.cycleAttributeValues.length]:null},mxEditor.prototype.cycleAttribute=function(e){if(null!=this.cycleAttributeName){var t=this.consumeCycleAttribute(e);null!=t&&e.setStyle(e.getStyle()+";"+this.cycleAttributeName+"="+t)}},mxEditor.prototype.addVertex=function(e,t,r,o){for(var a=this.graph.getModel();null!=e&&!this.graph.isValidDropTarget(e);)e=a.getParent(e);e=null!=e?e:this.graph.getSwimlaneAt(r,o);var u=this.graph.getView().scale,c=a.getGeometry(t),f=a.getGeometry(e);if(this.graph.isSwimlane(t)&&!this.graph.swimlaneNesting)e=null;else{if(null==e&&this.swimlaneRequired)return null;if(null!=e&&null!=f){var m=this.graph.getView().getState(e);if(null!=m){if(r-=m.origin.x*u,o-=m.origin.y*u,this.graph.isConstrainedMoving){var x=c.width,v=c.height,E=m.x+m.width;r+x>E&&(r-=r+x-E),o+v>(E=m.y+m.height)&&(o-=o+v-E)}}else null!=f&&(r-=f.x*u,o-=f.y*u)}}(c=c.clone()).x=this.graph.snap(r/u-this.graph.getView().translate.x-this.graph.gridSize/2),c.y=this.graph.snap(o/u-this.graph.getView().translate.y-this.graph.gridSize/2),t.setGeometry(c),null==e&&(e=this.graph.getDefaultParent()),this.cycleAttribute(t),this.fireEvent(new mxEventObject(mxEvent.BEFORE_ADD_VERTEX,"vertex",t,"parent",e)),a.beginUpdate();try{null!=(t=this.graph.addCell(t,e))&&(this.graph.constrainChild(t),this.fireEvent(new mxEventObject(mxEvent.ADD_VERTEX,"vertex",t)))}finally{a.endUpdate()}return null!=t&&(this.graph.setSelectionCell(t),this.graph.scrollCellToVisible(t),this.fireEvent(new mxEventObject(mxEvent.AFTER_ADD_VERTEX,"vertex",t))),t},mxEditor.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tasks&&this.tasks.destroy(),null!=this.outline&&this.outline.destroy(),null!=this.properties&&this.properties.destroy(),null!=this.keyHandler&&this.keyHandler.destroy(),null!=this.rubberband&&this.rubberband.destroy(),null!=this.toolbar&&this.toolbar.destroy(),null!=this.graph&&this.graph.destroy(),this.status=null,this.templates=null)},__mxOutput.mxEditor=void 0!==mxEditor?mxEditor:void 0;var mxCodecRegistry={codecs:[],aliases:[],register:function(e){if(null!=e){var t=e.getName();mxCodecRegistry.codecs[t]=e;var r=mxUtils.getFunctionName(e.template.constructor);r!=t&&mxCodecRegistry.addAlias(r,t)}return e},addAlias:function(e,t){mxCodecRegistry.aliases[e]=t},getCodec:function(e){var t=null;if(null!=e){var r=mxUtils.getFunctionName(e),o=mxCodecRegistry.aliases[r];if(null!=o&&(r=o),null==(t=mxCodecRegistry.codecs[r]))try{t=new mxObjectCodec(new e),mxCodecRegistry.register(t)}catch(a){}}return t}};function mxCodec(e){this.document=e||mxUtils.createXmlDocument(),this.objects=[]}function mxObjectCodec(e,t,r,o){for(var a in this.template=e,this.exclude=null!=t?t:[],this.idrefs=null!=r?r:[],this.mapping=null!=o?o:[],this.reverse=new Object,this.mapping)this.reverse[this.mapping[a]]=a}__mxOutput.mxCodecRegistry=void 0!==mxCodecRegistry?mxCodecRegistry:void 0,mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(e,t){return this.objects[e]=t,t},mxCodec.prototype.getObject=function(e){var t=null;if(null!=e&&null==(t=this.objects[e])&&null==(t=this.lookup(e))){var r=this.getElementById(e);null!=r&&(t=this.decode(r))}return t},mxCodec.prototype.lookup=function(e){return null},mxCodec.prototype.getElementById=function(e){return this.updateElements(),this.elements[e]},mxCodec.prototype.updateElements=function(){null==this.elements&&(this.elements=new Object,null!=this.document.documentElement&&this.addElement(this.document.documentElement))},mxCodec.prototype.addElement=function(e){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var t=e.getAttribute("id");if(null!=t)if(null==this.elements[t])this.elements[t]=e;else if(this.elements[t]!=e)throw new Error(t+": Duplicate ID")}for(e=e.firstChild;null!=e;)this.addElement(e),e=e.nextSibling},mxCodec.prototype.getId=function(e){var t=null;return null!=e&&null==(t=this.reference(e))&&e instanceof mxCell&&null==(t=e.getId())&&0==(t=mxCellPath.create(e)).length&&(t="root"),t},mxCodec.prototype.reference=function(e){return null},mxCodec.prototype.encode=function(e){var t=null;if(null!=e&&null!=e.constructor){var r=mxCodecRegistry.getCodec(e.constructor);null!=r?t=r.encode(this,e):mxUtils.isNode(e)?t=mxUtils.importNode(this.document,e,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(e.constructor))}return t},mxCodec.prototype.decode=function(e,t){this.updateElements();var r=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var o=null;try{o=window[e.nodeName]}catch(u){}var a=mxCodecRegistry.getCodec(o);null!=a?r=a.decode(this,e,t):(r=e.cloneNode(!0)).removeAttribute("as")}return r},mxCodec.prototype.encodeCell=function(e,t,r){if(t.appendChild(this.encode(e)),null==r||r)for(var o=e.getChildCount(),a=0;a<o;a++)this.encodeCell(e.getChildAt(a),t)},mxCodec.prototype.isCellCodec=function(e){return null!=e&&"function"==typeof e.isCellCodec&&e.isCellCodec()},mxCodec.prototype.decodeCell=function(e,t){t=null==t||t;var r=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var o=mxCodecRegistry.getCodec(e.nodeName);if(!this.isCellCodec(o))for(var a=e.firstChild;null!=a&&!this.isCellCodec(o);)o=mxCodecRegistry.getCodec(a.nodeName),a=a.nextSibling;this.isCellCodec(o)||(o=mxCodecRegistry.getCodec(mxCell)),r=o.decode(this,e),t&&this.insertIntoGraph(r)}return r},mxCodec.prototype.insertIntoGraph=function(e){var t=e.parent,r=e.getTerminal(!0),o=e.getTerminal(!1);if(e.setTerminal(null,!1),e.setTerminal(null,!0),e.parent=null,null!=t){if(t==e)throw new Error(t.id+": Self Reference");t.insert(e)}null!=r&&r.insertEdge(e,!0),null!=o&&o.insertEdge(e,!1)},mxCodec.prototype.setAttribute=function(e,t,r){null!=t&&null!=r&&e.setAttribute(t,r)},__mxOutput.mxCodec=void 0!==mxCodec?mxCodec:void 0,mxObjectCodec.allowEval=!1,mxObjectCodec.prototype.template=null,mxObjectCodec.prototype.exclude=null,mxObjectCodec.prototype.idrefs=null,mxObjectCodec.prototype.mapping=null,mxObjectCodec.prototype.reverse=null,mxObjectCodec.prototype.getName=function(){return mxUtils.getFunctionName(this.template.constructor)},mxObjectCodec.prototype.cloneTemplate=function(){return new this.template.constructor},mxObjectCodec.prototype.getFieldName=function(e){if(null!=e){var t=this.reverse[e];null!=t&&(e=t)}return e},mxObjectCodec.prototype.getAttributeName=function(e){if(null!=e){var t=this.mapping[e];null!=t&&(e=t)}return e},mxObjectCodec.prototype.isExcluded=function(e,t,r,o){return t==mxObjectIdentity.FIELD_NAME||mxUtils.indexOf(this.exclude,t)>=0},mxObjectCodec.prototype.isReference=function(e,t,r,o){return mxUtils.indexOf(this.idrefs,t)>=0},mxObjectCodec.prototype.encode=function(e,t){var r=e.document.createElement(this.getName());return t=this.beforeEncode(e,t,r),this.encodeObject(e,t,r),this.afterEncode(e,t,r)},mxObjectCodec.prototype.encodeObject=function(e,t,r){for(var o in e.setAttribute(r,"id",e.getId(t)),t){var a=o,u=t[a];null!=u&&!this.isExcluded(t,a,u,!0)&&(mxUtils.isInteger(a)&&(a=null),this.encodeValue(e,t,a,u,r))}},mxObjectCodec.prototype.encodeValue=function(e,t,r,o,a){if(null!=o){if(this.isReference(t,r,o,!0)){var u=e.getId(o);if(null==u)return void mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+r+"="+o);o=u}(null==r||e.encodeDefaults||this.template[r]!=o)&&(r=this.getAttributeName(r),this.writeAttribute(e,t,r,o,a))}},mxObjectCodec.prototype.writeAttribute=function(e,t,r,o,a){"object"!=typeof o?this.writePrimitiveAttribute(e,t,r,o,a):this.writeComplexAttribute(e,t,r,o,a)},mxObjectCodec.prototype.writePrimitiveAttribute=function(e,t,r,o,a){if(o=this.convertAttributeToXml(e,t,r,o,a),null==r){var u=e.document.createElement("add");"function"==typeof o?u.appendChild(e.document.createTextNode(o)):e.setAttribute(u,"value",o),a.appendChild(u)}else"function"!=typeof o&&e.setAttribute(a,r,o)},mxObjectCodec.prototype.writeComplexAttribute=function(e,t,r,o,a){var u=e.encode(o);null!=u?(null!=r&&u.setAttribute("as",r),a.appendChild(u)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+r+": "+o)},mxObjectCodec.prototype.convertAttributeToXml=function(e,t,r,o){return this.isBooleanAttribute(e,t,r,o)&&(o=1==o?"1":"0"),o},mxObjectCodec.prototype.isBooleanAttribute=function(e,t,r,o){return void 0===o.length&&(1==o||0==o)},mxObjectCodec.prototype.convertAttributeFromXml=function(e,t,r){var o=t.value;return this.isNumericAttribute(e,t,r)&&(o=parseFloat(o),(isNaN(o)||!isFinite(o))&&(o=0)),o},mxObjectCodec.prototype.isNumericAttribute=function(e,t,r){return r.constructor==mxGeometry&&("x"==t.name||"y"==t.name||"width"==t.name||"height"==t.name)||r.constructor==mxPoint&&("x"==t.name||"y"==t.name)||mxUtils.isNumeric(t.value)},mxObjectCodec.prototype.beforeEncode=function(e,t,r){return t},mxObjectCodec.prototype.afterEncode=function(e,t,r){return r},mxObjectCodec.prototype.decode=function(e,t,r){var o=t.getAttribute("id"),a=e.objects[o];return null==a&&(a=r||this.cloneTemplate(),null!=o&&e.putObject(o,a)),t=this.beforeDecode(e,t,a),this.decodeNode(e,t,a),this.afterDecode(e,t,a)},mxObjectCodec.prototype.decodeNode=function(e,t,r){null!=t&&(this.decodeAttributes(e,t,r),this.decodeChildren(e,t,r))},mxObjectCodec.prototype.decodeAttributes=function(e,t,r){var o=t.attributes;if(null!=o)for(var a=0;a<o.length;a++)this.decodeAttribute(e,o[a],r)},mxObjectCodec.prototype.isIgnoredAttribute=function(e,t,r){return"as"==t.nodeName||"id"==t.nodeName},mxObjectCodec.prototype.decodeAttribute=function(e,t,r){if(!this.isIgnoredAttribute(e,t,r)){var o=t.nodeName,a=this.convertAttributeFromXml(e,t,r),u=this.getFieldName(o);if(this.isReference(r,u,a,!1)){var c=e.getObject(a);if(null==c)return void mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+o+"="+a);a=c}this.isExcluded(r,o,a,!1)||(r[o]=a)}},mxObjectCodec.prototype.decodeChildren=function(e,t,r){for(var o=t.firstChild;null!=o;){var a=o.nextSibling;o.nodeType==mxConstants.NODETYPE_ELEMENT&&!this.processInclude(e,o,r)&&this.decodeChild(e,o,r),o=a}},mxObjectCodec.prototype.decodeChild=function(e,t,r){var o=this.getFieldName(t.getAttribute("as"));if(null==o||!this.isExcluded(r,o,t,!1)){var a=this.getFieldTemplate(r,o,t),u=null;"add"==t.nodeName?null==(u=t.getAttribute("value"))&&mxObjectCodec.allowEval&&(u=mxUtils.eval(mxUtils.getTextContent(t))):u=e.decode(t,a);try{this.addObjectValue(r,o,u,a)}catch(c){throw new Error(c.message+" for "+t.nodeName)}}},mxObjectCodec.prototype.getFieldTemplate=function(e,t,r){var o=e[t];return o instanceof Array&&o.length>0&&(o=null),o},mxObjectCodec.prototype.addObjectValue=function(e,t,r,o){null!=r&&r!=o&&(null!=t&&t.length>0?e[t]=r:e.push(r))},mxObjectCodec.prototype.processInclude=function(e,t,r){if("include"==t.nodeName){var o=t.getAttribute("name");if(null!=o)try{var a=mxUtils.load(o).getDocumentElement();null!=a&&e.decode(a,r)}catch(u){}return!0}return!1},mxObjectCodec.prototype.beforeDecode=function(e,t,r){return t},mxObjectCodec.prototype.afterDecode=function(e,t,r){return r},__mxOutput.mxObjectCodec=void 0!==mxObjectCodec?mxObjectCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"]);return e.isCellCodec=function(){return!0},e.isNumericAttribute=function(t,r,o){return"value"!==r.nodeName&&mxObjectCodec.prototype.isNumericAttribute.apply(this,arguments)},e.isExcluded=function(t,r,o,a){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||a&&"value"==r&&o.nodeType==mxConstants.NODETYPE_ELEMENT},e.afterEncode=function(t,r,o){if(null!=r.value&&r.value.nodeType==mxConstants.NODETYPE_ELEMENT){var a=o;(o=mxUtils.importNode(t.document,r.value,!0)).appendChild(a);var u=a.getAttribute("id");o.setAttribute("id",u),a.removeAttribute("id")}return o},e.beforeDecode=function(t,r,o){var a=r.cloneNode(!0),u=this.getName();if(r.nodeName!=u){var c=r.getElementsByTagName(u)[0];null!=c&&c.parentNode==r?(mxUtils.removeWhitespace(c,!0),mxUtils.removeWhitespace(c,!1),c.parentNode.removeChild(c),a=c):a=null,o.value=r.cloneNode(!0);var f=o.value.getAttribute("id");null!=f&&(o.setId(f),o.value.removeAttribute("id"))}else o.setId(r.getAttribute("id"));if(null!=a)for(var m=0;m<this.idrefs.length;m++){var x=this.idrefs[m],v=a.getAttribute(x);if(null!=v){a.removeAttribute(x);var E=t.objects[v]||t.lookup(v);if(null==E){var S=t.getElementById(v);null!=S&&(E=(mxCodecRegistry.codecs[S.nodeName]||this).decode(t,S))}o[x]=E}}return a},e}()),__mxOutput.mxCellCodec="undefined"!=typeof mxCellCodec?mxCellCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxGraphModel);return e.encodeObject=function(t,r,o){var a=t.document.createElement("root");t.encodeCell(r.getRoot(),a),o.appendChild(a)},e.decodeChild=function(t,r,o){"root"==r.nodeName?this.decodeRoot(t,r,o):mxObjectCodec.prototype.decodeChild.apply(this,arguments)},e.decodeRoot=function(t,r,o){for(var a=null,u=r.firstChild;null!=u;){var c=t.decodeCell(u);null!=c&&null==c.getParent()&&(a=c),u=u.nextSibling}null!=a&&o.setRoot(a)},e}()),__mxOutput.mxModelCodec="undefined"!=typeof mxModelCodec?mxModelCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxRootChange,["model","previous","root"]);return e.afterEncode=function(t,r,o){return t.encodeCell(r.root,o),o},e.beforeDecode=function(t,r,o){if(null!=r.firstChild&&r.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var a=(r=r.cloneNode(!0)).firstChild;o.root=t.decodeCell(a,!1);var u=a.nextSibling;for(a.parentNode.removeChild(a),a=u;null!=a;)u=a.nextSibling,t.decodeCell(a),a.parentNode.removeChild(a),a=u}return r},e.afterDecode=function(t,r,o){return o.previous=o.root,o},e}()),__mxOutput.mxRootChangeCodec="undefined"!=typeof mxRootChangeCodec?mxRootChangeCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxChildChange,["model","child","previousIndex"],["parent","previous"]);return e.isReference=function(t,r,o,a){return!("child"!=r||a&&!t.model.contains(t.previous))||mxUtils.indexOf(this.idrefs,r)>=0},e.isExcluded=function(t,r,o,a){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||a&&null!=o&&("previous"==r||"parent"==r)&&!t.model.contains(o)},e.afterEncode=function(t,r,o){return this.isReference(r,"child",r.child,!0)?o.setAttribute("child",t.getId(r.child)):t.encodeCell(r.child,o),o},e.beforeDecode=function(t,r,o){if(null!=r.firstChild&&r.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var a=(r=r.cloneNode(!0)).firstChild;o.child=t.decodeCell(a,!1);var u=a.nextSibling;for(a.parentNode.removeChild(a),a=u;null!=a;){if(u=a.nextSibling,a.nodeType==mxConstants.NODETYPE_ELEMENT){var c=a.getAttribute("id");null==t.lookup(c)&&t.decodeCell(a)}a.parentNode.removeChild(a),a=u}}else{var f=r.getAttribute("child");o.child=t.getObject(f)}return r},e.afterDecode=function(t,r,o){return null!=o.child&&(null!=o.child.parent&&null!=o.previous&&o.child.parent!=o.previous&&(o.previous=o.child.parent),o.child.parent=o.previous,o.previous=o.parent,o.previousIndex=o.index),o},e}()),__mxOutput.mxChildChangeCodec="undefined"!=typeof mxChildChangeCodec?mxChildChangeCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxTerminalChange,["model","previous"],["cell","terminal"]);return e.afterDecode=function(t,r,o){return o.previous=o.terminal,o},e}()),__mxOutput.mxTerminalChangeCodec="undefined"!=typeof mxTerminalChangeCodec?mxTerminalChangeCodec:void 0;var mxGenericChangeCodec=function(e,t){var r=new mxObjectCodec(e,["model","previous"],["cell"]);return r.afterDecode=function(o,a,u){return mxUtils.isNode(u.cell)&&(u.cell=o.decodeCell(u.cell,!1)),u.previous=u[t],u},r};mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value")),__mxOutput.mxGenericChangeCodec=void 0!==mxGenericChangeCodec?mxGenericChangeCodec:void 0,mxCodecRegistry.register(new mxObjectCodec(new mxGraph,["graphListeners","eventListeners","view","container","cellRenderer","editor","selection"])),__mxOutput.mxGraphCodec="undefined"!=typeof mxGraphCodec?mxGraphCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxGraphView);return e.encode=function(t,r){return this.encodeCell(t,r,r.graph.getModel().getRoot())},e.encodeCell=function(t,r,o){var a=r.graph.getModel(),u=r.getState(o),c=a.getParent(o);if(null==c||null!=u){var f=a.getChildCount(o),m=r.graph.getCellGeometry(o),x=null;if(c==a.getRoot()?x="layer":null==c?x="graph":a.isEdge(o)?x="edge":f>0&&null!=m?x="group":a.isVertex(o)&&(x="vertex"),null!=x){var v=t.document.createElement(x);if(null!=r.graph.getLabel(o)&&(v.setAttribute("label",r.graph.getLabel(o)),r.graph.isHtmlLabel(o)&&v.setAttribute("html",!0)),null==c){var S=r.getGraphBounds();null!=S&&(v.setAttribute("x",Math.round(S.x)),v.setAttribute("y",Math.round(S.y)),v.setAttribute("width",Math.round(S.width)),v.setAttribute("height",Math.round(S.height))),v.setAttribute("scale",r.scale)}else if(null!=u&&null!=m){for(var b in u.style){var _=u.style[b];"function"==typeof _&&"object"==typeof _&&(_=mxStyleRegistry.getName(_)),null!=_&&"function"!=typeof _&&"object"!=typeof _&&v.setAttribute(b,_)}var D=u.absolutePoints;if(null!=D&&D.length>0){var M=Math.round(D[0].x)+","+Math.round(D[0].y);for(b=1;b<D.length;b++)M+=" "+Math.round(D[b].x)+","+Math.round(D[b].y);v.setAttribute("points",M)}else v.setAttribute("x",Math.round(u.x)),v.setAttribute("y",Math.round(u.y)),v.setAttribute("width",Math.round(u.width)),v.setAttribute("height",Math.round(u.height));var R=u.absoluteOffset;null!=R&&(0!=R.x&&v.setAttribute("dx",Math.round(R.x)),0!=R.y&&v.setAttribute("dy",Math.round(R.y)))}for(b=0;b<f;b++){var N=this.encodeCell(t,r,a.getChildAt(o,b));null!=N&&v.appendChild(N)}}}return v},e}()),__mxOutput.mxGraphViewCodec="undefined"!=typeof mxGraphViewCodec?mxGraphViewCodec:void 0;var mxStylesheetCodec=mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxStylesheet);return e.encode=function(t,r){var o=t.document.createElement(this.getName());for(var a in r.styles){var u=r.styles[a],c=t.document.createElement("add");if(null!=a){for(var f in c.setAttribute("as",a),u){var m=this.getStringValue(f,u[f]);if(null!=m){var x=t.document.createElement("add");x.setAttribute("value",m),x.setAttribute("as",f),c.appendChild(x)}}c.childNodes.length>0&&o.appendChild(c)}}return o},e.getStringValue=function(t,r){var o=typeof r;return"function"==o?r=mxStyleRegistry.getName(r):"object"==o&&(r=null),r},e.decode=function(t,r,o){var a=o||new this.template.constructor,u=r.getAttribute("id");for(null!=u&&(t.objects[u]=a),r=r.firstChild;null!=r;){if(!this.processInclude(t,r,a)&&"add"==r.nodeName){var c=r.getAttribute("as");if(null!=c){var f=r.getAttribute("extend"),m=null!=f?mxUtils.clone(a.styles[f]):null;null==m&&(null!=f&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+f+" not found to extend"),m=new Object);for(var x=r.firstChild;null!=x;){if(x.nodeType==mxConstants.NODETYPE_ELEMENT){var v=x.getAttribute("as");if("add"==x.nodeName){var E=mxUtils.getTextContent(x),S=null;null!=E&&E.length>0&&mxStylesheetCodec.allowEval?S=mxUtils.eval(E):(S=x.getAttribute("value"),mxUtils.isNumeric(S)&&(S=parseFloat(S))),null!=S&&(m[v]=S)}else"remove"==x.nodeName&&delete m[v]}x=x.nextSibling}a.putCellStyle(c,m)}}r=r.nextSibling}return a},e}());mxStylesheetCodec.allowEval=!0,__mxOutput.mxStylesheetCodec=void 0!==mxStylesheetCodec?mxStylesheetCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultKeyHandler);return e.encode=function(t,r){return null},e.decode=function(t,r,o){if(null!=o)for(r=r.firstChild;null!=r;){if(!this.processInclude(t,r,o)&&"add"==r.nodeName){var u=r.getAttribute("as"),c=r.getAttribute("action"),f=r.getAttribute("control");o.bindAction(u,c,f)}r=r.nextSibling}return o},e}()),__mxOutput.mxDefaultKeyHandlerCodec="undefined"!=typeof mxDefaultKeyHandlerCodec?mxDefaultKeyHandlerCodec:void 0;var mxDefaultToolbarCodec=mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultToolbar);return e.encode=function(t,r){return null},e.decode=function(t,r,o){if(null!=o){var a=o.editor;for(r=r.firstChild;null!=r;){if(r.nodeType==mxConstants.NODETYPE_ELEMENT&&!this.processInclude(t,r,o))if("separator"==r.nodeName)o.addSeparator();else if("br"==r.nodeName)o.toolbar.addBreak();else if("hr"==r.nodeName)o.toolbar.addLine();else if("add"==r.nodeName){var u=r.getAttribute("as");u=mxResources.get(u)||u;var c=r.getAttribute("icon"),f=r.getAttribute("pressedIcon"),m=r.getAttribute("action"),x=r.getAttribute("mode"),v=r.getAttribute("template"),E="0"!=r.getAttribute("toggle"),S=mxUtils.getTextContent(r),b=null;if(null!=m)b=o.addItem(u,c,m,f);else if(null!=x){var _=mxDefaultToolbarCodec.allowEval?mxUtils.eval(S):null;b=o.addMode(u,c,x,f,_)}else if(null!=v||null!=S&&S.length>0){var D=a.templates[v],M=r.getAttribute("style");null!=D&&null!=M&&(D=a.graph.cloneCell(D)).setStyle(M);var R=null;null!=S&&S.length>0&&mxDefaultToolbarCodec.allowEval&&(R=mxUtils.eval(S)),b=o.addPrototype(u,c,D,f,R,E)}else{var N=mxUtils.getChildNodes(r);if(N.length>0)if(null==c){for(var V=o.addActionCombo(u),O=0;O<N.length;O++)if("separator"==(F=N[O]).nodeName)o.addOption(V,"---");else if("add"==F.nodeName){var G=F.getAttribute("as"),j=F.getAttribute("action");o.addActionOption(V,G,j)}}else{var Y=null,q=o.addPrototype(u,c,function(){var ie=a.templates[Y.value];if(null!=ie){var U=ie.clone(),he=Y.options[Y.selectedIndex].cellStyle;return null!=he&&U.setStyle(he),U}return mxLog.warn("Template "+ie+" not found"),null},null,null,E);for(Y=o.addCombo(),mxEvent.addListener(Y,"change",function(){o.toolbar.selectMode(q,function(ie){var U=mxUtils.convertPoint(a.graph.container,mxEvent.getClientX(ie),mxEvent.getClientY(ie));return a.addVertex(null,_(),U.x,U.y)}),o.toolbar.noReset=!1}),O=0;O<N.length;O++){var F;if("separator"==(F=N[O]).nodeName)o.addOption(Y,"---");else if("add"==F.nodeName){G=F.getAttribute("as");var Z=F.getAttribute("template");o.addOption(Y,G,Z||v).cellStyle=F.getAttribute("style")}}}}if(null!=b){var K=r.getAttribute("id");null!=K&&K.length>0&&b.setAttribute("id",K)}}r=r.nextSibling}}return o},e}());return mxDefaultToolbarCodec.allowEval=!0,__mxOutput.mxDefaultToolbarCodec=void 0!==mxDefaultToolbarCodec?mxDefaultToolbarCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultPopupMenu);return e.encode=function(t,r){return null},e.decode=function(t,r,o){var a=r.getElementsByTagName("include")[0];return null!=a?this.processInclude(t,a,o):null!=o&&(o.config=r),o},e}()),__mxOutput.mxDefaultPopupMenuCodec="undefined"!=typeof mxDefaultPopupMenuCodec?mxDefaultPopupMenuCodec:void 0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxEditor,["modified","lastSnapshot","ignoredChanges","undoManager","graphContainer","toolbarContainer"]);return e.afterDecode=function(t,r,o){var a=r.getAttribute("defaultEdge");null!=a&&(r.removeAttribute("defaultEdge"),o.defaultEdge=o.templates[a]);var u=r.getAttribute("defaultGroup");return null!=u&&(r.removeAttribute("defaultGroup"),o.defaultGroup=o.templates[u]),o},e.decodeChild=function(t,r,o){if("Array"==r.nodeName){var a=r.getAttribute("as");if("templates"==a)return void this.decodeTemplates(t,r,o)}else if("ui"==r.nodeName)return void this.decodeUi(t,r,o);mxObjectCodec.prototype.decodeChild.apply(this,arguments)},e.decodeUi=function(t,r,o){for(var a=r.firstChild;null!=a;){if("add"==a.nodeName){var u=a.getAttribute("as"),c=a.getAttribute("element"),f=a.getAttribute("style"),m=null;if(null!=c)null!=(m=document.getElementById(c))&&null!=f&&(m.style.cssText+=";"+f);else{var x=parseInt(a.getAttribute("x")),v=parseInt(a.getAttribute("y")),E=a.getAttribute("width"),S=a.getAttribute("height");(m=document.createElement("div")).style.cssText=f,new mxWindow(mxResources.get(u)||u,m,x,v,E,S,!1,!0).setVisible(!0)}"graph"==u?o.setGraphContainer(m):"toolbar"==u?o.setToolbarContainer(m):"title"==u?o.setTitleContainer(m):"status"==u?o.setStatusContainer(m):"map"==u&&o.setMapContainer(m)}else"resource"==a.nodeName?mxResources.add(a.getAttribute("basename")):"stylesheet"==a.nodeName&&mxClient.link("stylesheet",a.getAttribute("name"));a=a.nextSibling}},e.decodeTemplates=function(t,r,o){null==o.templates&&(o.templates=[]);for(var a=mxUtils.getChildNodes(r),u=0;u<a.length;u++){for(var c=a[u].getAttribute("as"),f=a[u].firstChild;null!=f&&1!=f.nodeType;)f=f.nextSibling;null!=f&&(o.templates[c]=t.decodeCell(f))}},e}()),__mxOutput.mxEditorCodec="undefined"!=typeof mxEditorCodec?mxEditorCodec:void 0,__mxOutput}},__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=t)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},227:(e,t,r)=>{"use strict";function o(n){return"function"==typeof n}let a=!1;const u={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const i=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+i.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=n},get useDeprecatedSynchronousErrorHandling(){return a}};function c(n){setTimeout(()=>{throw n},0)}const f={closed:!0,next(n){},error(n){if(u.useDeprecatedSynchronousErrorHandling)throw n;c(n)},complete(){}},m=Array.isArray||(n=>n&&"number"==typeof n.length);function x(n){return null!==n&&"object"==typeof n}const E=(()=>{function n(i){return Error.call(this),this.message=i?`${i.length} errors occurred during unsubscription:\n${i.map((s,l)=>`${l+1}) ${s.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=i,this}return n.prototype=Object.create(Error.prototype),n})();class S{constructor(i){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,i&&(this._ctorUnsubscribe=!0,this._unsubscribe=i)}unsubscribe(){let i;if(this.closed)return;let{_parentOrParents:s,_ctorUnsubscribe:l,_unsubscribe:d,_subscriptions:p}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof S)s.remove(this);else if(null!==s)for(let g=0;g<s.length;++g)s[g].remove(this);if(o(d)){l&&(this._unsubscribe=void 0);try{d.call(this)}catch(g){i=g instanceof E?b(g.errors):[g]}}if(m(p)){let g=-1,y=p.length;for(;++g<y;){const C=p[g];if(x(C))try{C.unsubscribe()}catch(T){i=i||[],T instanceof E?i=i.concat(b(T.errors)):i.push(T)}}}if(i)throw new E(i)}add(i){let s=i;if(!i)return S.EMPTY;switch(typeof i){case"function":s=new S(i);case"object":if(s===this||s.closed||"function"!=typeof s.unsubscribe)return s;if(this.closed)return s.unsubscribe(),s;if(!(s instanceof S)){const p=s;s=new S,s._subscriptions=[p]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}let{_parentOrParents:l}=s;if(null===l)s._parentOrParents=this;else if(l instanceof S){if(l===this)return s;s._parentOrParents=[l,this]}else{if(-1!==l.indexOf(this))return s;l.push(this)}const d=this._subscriptions;return null===d?this._subscriptions=[s]:d.push(s),s}remove(i){const s=this._subscriptions;if(s){const l=s.indexOf(i);-1!==l&&s.splice(l,1)}}}var n;function b(n){return n.reduce((i,s)=>i.concat(s instanceof E?s.errors:s),[])}S.EMPTY=((n=new S).closed=!0,n);const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class M extends S{constructor(i,s,l){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=f;break;case 1:if(!i){this.destination=f;break}if("object"==typeof i){i instanceof M?(this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)):(this.syncErrorThrowable=!0,this.destination=new R(this,i));break}default:this.syncErrorThrowable=!0,this.destination=new R(this,i,s,l)}}[_](){return this}static create(i,s,l){const d=new M(i,s,l);return d.syncErrorThrowable=!1,d}next(i){this.isStopped||this._next(i)}error(i){this.isStopped||(this.isStopped=!0,this._error(i))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(i){this.destination.next(i)}_error(i){this.destination.error(i),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:i}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=i,this}}class R extends M{constructor(i,s,l,d){super(),this._parentSubscriber=i;let p,g=this;o(s)?p=s:s&&(p=s.next,l=s.error,d=s.complete,s!==f&&(g=Object.create(s),o(g.unsubscribe)&&this.add(g.unsubscribe.bind(g)),g.unsubscribe=this.unsubscribe.bind(this))),this._context=g,this._next=p,this._error=l,this._complete=d}next(i){if(!this.isStopped&&this._next){const{_parentSubscriber:s}=this;u.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable?this.__tryOrSetError(s,this._next,i)&&this.unsubscribe():this.__tryOrUnsub(this._next,i)}}error(i){if(!this.isStopped){const{_parentSubscriber:s}=this,{useDeprecatedSynchronousErrorHandling:l}=u;if(this._error)l&&s.syncErrorThrowable?(this.__tryOrSetError(s,this._error,i),this.unsubscribe()):(this.__tryOrUnsub(this._error,i),this.unsubscribe());else if(s.syncErrorThrowable)l?(s.syncErrorValue=i,s.syncErrorThrown=!0):c(i),this.unsubscribe();else{if(this.unsubscribe(),l)throw i;c(i)}}}complete(){if(!this.isStopped){const{_parentSubscriber:i}=this;if(this._complete){const s=()=>this._complete.call(this._context);u.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?(this.__tryOrSetError(i,s),this.unsubscribe()):(this.__tryOrUnsub(s),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(i,s){try{i.call(this._context,s)}catch(l){if(this.unsubscribe(),u.useDeprecatedSynchronousErrorHandling)throw l;c(l)}}__tryOrSetError(i,s,l){if(!u.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{s.call(this._context,l)}catch(d){return u.useDeprecatedSynchronousErrorHandling?(i.syncErrorValue=d,i.syncErrorThrown=!0,!0):(c(d),!0)}return!1}_unsubscribe(){const{_parentSubscriber:i}=this;this._context=null,this._parentSubscriber=null,i.unsubscribe()}}const O="function"==typeof Symbol&&Symbol.observable||"@@observable";function F(n){return n}let Y=(()=>{class n{constructor(s){this._isScalar=!1,s&&(this._subscribe=s)}lift(s){const l=new n;return l.source=this,l.operator=s,l}subscribe(s,l,d){const{operator:p}=this,g=function(n,i,s){if(n){if(n instanceof M)return n;if(n[_])return n[_]()}return n||i||s?new M(n,i,s):new M(f)}(s,l,d);if(g.add(p?p.call(g,this.source):this.source||u.useDeprecatedSynchronousErrorHandling&&!g.syncErrorThrowable?this._subscribe(g):this._trySubscribe(g)),u.useDeprecatedSynchronousErrorHandling&&g.syncErrorThrowable&&(g.syncErrorThrowable=!1,g.syncErrorThrown))throw g.syncErrorValue;return g}_trySubscribe(s){try{return this._subscribe(s)}catch(l){u.useDeprecatedSynchronousErrorHandling&&(s.syncErrorThrown=!0,s.syncErrorValue=l),function(n){for(;n;){const{closed:i,destination:s,isStopped:l}=n;if(i||l)return!1;n=s&&s instanceof M?s:null}return!0}(s)?s.error(l):console.warn(l)}}forEach(s,l){return new(l=W(l))((d,p)=>{let g;g=this.subscribe(y=>{try{s(y)}catch(C){p(C),g&&g.unsubscribe()}},p,d)})}_subscribe(s){const{source:l}=this;return l&&l.subscribe(s)}[O](){return this}pipe(...s){return 0===s.length?this:function(n){return 0===n.length?F:1===n.length?n[0]:function(s){return n.reduce((l,d)=>d(l),s)}}(s)(this)}toPromise(s){return new(s=W(s))((l,d)=>{let p;this.subscribe(g=>p=g,g=>d(g),()=>l(p))})}}return n.create=i=>new n(i),n})();function W(n){if(n||(n=u.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const Z=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class Q extends S{constructor(i,s){super(),this.subject=i,this.subscriber=s,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const i=this.subject,s=i.observers;if(this.subject=null,!s||0===s.length||i.isStopped||i.closed)return;const l=s.indexOf(this.subscriber);-1!==l&&s.splice(l,1)}}class K extends M{constructor(i){super(i),this.destination=i}}let ie=(()=>{class n extends Y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_](){return new K(this)}lift(s){const l=new U(this,this);return l.operator=s,l}next(s){if(this.closed)throw new Z;if(!this.isStopped){const{observers:l}=this,d=l.length,p=l.slice();for(let g=0;g<d;g++)p[g].next(s)}}error(s){if(this.closed)throw new Z;this.hasError=!0,this.thrownError=s,this.isStopped=!0;const{observers:l}=this,d=l.length,p=l.slice();for(let g=0;g<d;g++)p[g].error(s);this.observers.length=0}complete(){if(this.closed)throw new Z;this.isStopped=!0;const{observers:s}=this,l=s.length,d=s.slice();for(let p=0;p<l;p++)d[p].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(s){if(this.closed)throw new Z;return super._trySubscribe(s)}_subscribe(s){if(this.closed)throw new Z;return this.hasError?(s.error(this.thrownError),S.EMPTY):this.isStopped?(s.complete(),S.EMPTY):(this.observers.push(s),new Q(this,s))}asObservable(){const s=new Y;return s.source=this,s}}return n.create=(i,s)=>new U(i,s),n})();class U extends ie{constructor(i,s){super(),this.destination=i,this.source=s}next(i){const{destination:s}=this;s&&s.next&&s.next(i)}error(i){const{destination:s}=this;s&&s.error&&this.destination.error(i)}complete(){const{destination:i}=this;i&&i.complete&&this.destination.complete()}_subscribe(i){const{source:s}=this;return s?this.source.subscribe(i):S.EMPTY}}class Oe{constructor(i,s){this.project=i,this.thisArg=s}call(i,s){return s.subscribe(new Me(i,this.project,this.thisArg))}}class Me extends M{constructor(i,s,l){super(i),this.project=s,this.count=0,this.thisArg=l||this}_next(i){let s;try{s=this.project.call(this.thisArg,i,this.count++)}catch(l){return void this.destination.error(l)}this.destination.next(s)}}const Ce=n=>i=>{for(let s=0,l=n.length;s<l&&!i.closed;s++)i.next(n[s]);i.complete()},Ae="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",dt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ct(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const we=n=>{if(n&&"function"==typeof n[O])return(n=>i=>{const s=n[O]();if("function"!=typeof s.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return s.subscribe(i)})(n);if(dt(n))return Ce(n);if(ct(n))return(n=>i=>(n.then(s=>{i.closed||(i.next(s),i.complete())},s=>i.error(s)).then(null,c),i))(n);if(n&&"function"==typeof n[Ae])return(n=>i=>{const s=n[Ae]();for(;;){let l;try{l=s.next()}catch(d){return i.error(d),i}if(l.done){i.complete();break}if(i.next(l.value),i.closed)break}return"function"==typeof s.return&&i.add(()=>{s.return&&s.return()}),i})(n);{const s=`You provided ${x(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(s)}};function In(n,i){return new Y(s=>{const l=new S;let d=0;return l.add(i.schedule(function(){d!==n.length?(s.next(n[d++]),s.closed||l.add(this.schedule())):s.complete()})),l})}class Rt extends M{constructor(i){super(),this.parent=i}_next(i){this.parent.notifyNext(i)}_error(i){this.parent.notifyError(i),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class vi extends M{notifyNext(i){this.destination.next(i)}notifyError(i){this.destination.error(i)}notifyComplete(){this.destination.complete()}}function Br(n,i,s=Number.POSITIVE_INFINITY){return"function"==typeof i?l=>l.pipe(Br((d,p)=>function(n,i){return n instanceof Y?n:new Y(we(n))}(n(d,p)).pipe(function(n,i){return function(l){return l.lift(new Oe(n,undefined))}}((g,y)=>i(d,g,p,y))),s)):("number"==typeof i&&(s=i),l=>l.lift(new Yn(n,s)))}class Yn{constructor(i,s=Number.POSITIVE_INFINITY){this.project=i,this.concurrent=s}call(i,s){return s.subscribe(new ri(i,this.project,this.concurrent))}}class ri extends vi{constructor(i,s,l=Number.POSITIVE_INFINITY){super(i),this.project=s,this.concurrent=l,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(i){this.active<this.concurrent?this._tryNext(i):this.buffer.push(i)}_tryNext(i){let s;const l=this.index++;try{s=this.project(i,l)}catch(d){return void this.destination.error(d)}this.active++,this._innerSub(s)}_innerSub(i){const s=new Rt(this),l=this.destination;l.add(s);const d=function(n,i){if(i.closed)return;if(n instanceof Y)return n.subscribe(i);let s;try{s=we(n)(i)}catch(l){i.error(l)}return s}(i,s);d!==s&&l.add(d)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(i){this.destination.next(i)}notifyComplete(){const i=this.buffer;this.active--,i.length>0?this._next(i.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function si(){return function(i){return i.lift(new zn(i))}}class zn{constructor(i){this.connectable=i}call(i,s){const{connectable:l}=this;l._refCount++;const d=new za(i,l),p=s.subscribe(d);return d.closed||(d.connection=l.connect()),p}}class za extends M{constructor(i,s){super(i),this.connectable=s}_unsubscribe(){const{connectable:i}=this;if(!i)return void(this.connection=null);this.connectable=null;const s=i._refCount;if(s<=0)return void(this.connection=null);if(i._refCount=s-1,s>1)return void(this.connection=null);const{connection:l}=this,d=i._connection;this.connection=null,d&&(!l||d===l)&&d.unsubscribe()}}class io extends Y{constructor(i,s){super(),this.source=i,this.subjectFactory=s,this._refCount=0,this._isComplete=!1}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let i=this._connection;return i||(this._isComplete=!1,i=this._connection=new S,i.add(this.source.subscribe(new ro(this.getSubject(),this))),i.closed&&(this._connection=null,i=S.EMPTY)),i}refCount(){return si()(this)}}const Wa=(()=>{const n=io.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class ro extends K{constructor(i,s){super(i),this.connectable=s}_error(i){this._unsubscribe(),super._error(i)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const i=this.connectable;if(i){this.connectable=null;const s=i._connection;i._refCount=0,i._subject=null,i._connection=null,s&&s.unsubscribe()}}}function Jy(){return new ie}function be(n){for(let i in n)if(n[i]===be)return i;throw Error("Could not find renamed property on target object.")}function ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function Ka(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const tv=be({__forward_ref__:be});function qa(n){return n.__forward_ref__=qa,n.toString=function(){return ge(this())},n}function ne(n){return function(n){return"function"==typeof n&&n.hasOwnProperty(tv)&&n.__forward_ref__===qa}(n)?n():n}class Ci extends Error{constructor(i,s){super(function(n,i){return`${n?`NG0${n}: `:""}${i}`}(i,s)),this.code=i}}function St(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():function(n){return"string"==typeof n?n:null==n?"":String(n)}(n)}function so(n,i){const s=i?` in ${i}`:"";throw new Ci("201",`No provider for ${St(n)} found${s}`)}function Ft(n,i){null==n&&function(n,i,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${i} <=Actual]`))}(i,n,null,"!=")}function Pe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ei(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xn(n){return _d(n,oo)||_d(n,Id)}function _d(n,i){return n.hasOwnProperty(i)?n[i]:null}function Dd(n){return n&&(n.hasOwnProperty(Qa)||n.hasOwnProperty(lv))?n[Qa]:null}const oo=be({\u0275prov:be}),Qa=be({\u0275inj:be}),Id=be({ngInjectableDef:be}),lv=be({ngInjectorDef:be});var oe=(()=>((oe=oe||{})[oe.Default=0]="Default",oe[oe.Host=1]="Host",oe[oe.Self=2]="Self",oe[oe.SkipSelf=4]="SkipSelf",oe[oe.Optional=8]="Optional",oe))();let Ja;function oi(n){const i=Ja;return Ja=n,i}function Md(n,i,s){const l=Xn(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&oe.Optional?null:void 0!==i?i:void so(ge(n),"Injector")}function ai(n){return{toString:n}.toString()}var Xt=(()=>((Xt=Xt||{})[Xt.OnPush=0]="OnPush",Xt[Xt.Default=1]="Default",Xt))(),st=(()=>((st=st||{})[st.Emulated=0]="Emulated",st[st.None=2]="None",st[st.ShadowDom=3]="ShadowDom",st))();const hv="undefined"!=typeof globalThis&&globalThis,dv="undefined"!=typeof window&&window,cv="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_e=hv||"undefined"!=typeof global&&global||dv||cv,Ui={},Ne=[],ao=be({\u0275cmp:be}),el=be({\u0275dir:be}),tl=be({\u0275pipe:be}),Ad=be({\u0275mod:be}),pv=be({\u0275loc:be}),$n=be({\u0275fac:be}),jr=be({__NG_ELEMENT_ID__:be});let fv=0;function lo(n){return ai(()=>{const s={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Xt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ne,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||st.Emulated,id:"c",styles:n.styles||Ne,_:null,setInput:null,schemas:n.schemas||null,tView:null},d=n.directives,p=n.features,g=n.pipes;return l.id+=fv++,l.inputs=Od(n.inputs,s),l.outputs=Od(n.outputs),p&&p.forEach(y=>y(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(Ld):null,l.pipeDefs=g?()=>("function"==typeof g?g():g).map(Rd):null,l})}function Ld(n){return wt(n)||function(n){return n[el]||null}(n)}function Rd(n){return function(n){return n[tl]||null}(n)}const Pd={};function zr(n){return ai(()=>{const i={type:n.type,bootstrap:n.bootstrap||Ne,declarations:n.declarations||Ne,imports:n.imports||Ne,exports:n.exports||Ne,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Pd[n.id]=n.type),i})}function Od(n,i){if(null==n)return Ui;const s={};for(const l in n)if(n.hasOwnProperty(l)){let d=n[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),s[d]=l,i&&(i[d]=p)}return s}function wt(n){return n[ao]||null}function Kt(n,i){const s=n[Ad]||null;if(!s&&!0===i)throw new Error(`Type ${ge(n)} does not have '\u0275mod' property.`);return s}function An(n){return Array.isArray(n)&&"object"==typeof n[1]}function pn(n){return Array.isArray(n)&&!0===n[1]}function rl(n){return 0!=(8&n.flags)}function fn(n){return null!==n.template}function Ev(n){return 0!=(512&n[2])}function _i(n,i){return n.hasOwnProperty($n)?n[$n]:null}class Hd{constructor(i,s,l){this.previousValue=i,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function Gd(n){return n.type.prototype.ngOnChanges&&(n.setInput=bv),Tv}function Tv(){const n=Vd(this),i=null==n?void 0:n.current;if(i){const s=n.previous;if(s===Ui)n.previous=i;else for(let l in i)s[l]=i[l];n.current=null,this.ngOnChanges(i)}}function bv(n,i,s,l){const d=Vd(n)||function(n,i){return n[Fd]=i}(n,{previous:Ui,current:null}),p=d.current||(d.current={}),g=d.previous,y=this.declaredInputs[s],C=g[y];p[y]=new Hd(C&&C.currentValue,i,g===Ui),n[l]=i}const Fd="__ngSimpleChanges__";function Vd(n){return n[Fd]||null}let al;function Xe(n){return!!n.listen}const Bd={createRenderer:(n,i)=>void 0!==al?al:"undefined"!=typeof document?document:void 0};function nt(n){for(;Array.isArray(n);)n=n[0];return n}function Qt(n,i){return nt(i[n.index])}function kt(n,i){const s=i[n];return An(s)?s:s[0]}function Yd(n){return 4==(4&n[2])}function hl(n){return 128==(128&n[2])}function ui(n,i){return null==i?null:n[i]}function jd(n){n[18]=0}function dl(n,i){n[5]+=i;let s=n,l=n[3];for(;null!==l&&(1===i&&1===s[5]||-1===i&&0===s[5]);)l[5]+=i,s=l,l=l[3]}const le={lFrame:Qd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function zd(){return le.bindingsEnabled}function X(){return le.lFrame.lView}function Te(){return le.lFrame.tView}function ot(){let n=Wd();for(;null!==n&&64===n.type;)n=n.parent;return n}function Wd(){return le.lFrame.currentTNode}function Ln(n,i){const s=le.lFrame;s.currentTNode=n,s.isParent=i}function cl(){return le.lFrame.isParent}function xo(){return le.isInCheckNoChangesMode}function yo(n){le.isInCheckNoChangesMode=n}function Uv(n,i){const s=le.lFrame;s.bindingIndex=s.bindingRootIndex=n,fl(i)}function fl(n){le.lFrame.currentDirectiveIndex=n}function Kd(){return le.lFrame.currentQueryIndex}function gl(n){le.lFrame.currentQueryIndex=n}function Yv(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function qd(n,i,s){if(s&oe.SkipSelf){let d=i,p=n;for(;!(d=d.parent,null!==d||s&oe.Host||(d=Yv(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;i=d,n=p}const l=le.lFrame=Zd();return l.currentTNode=i,l.lView=n,!0}function vo(n){const i=Zd(),s=n[1];le.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function Zd(){const n=le.lFrame,i=null===n?null:n.child;return null===i?Qd(n):i}function Qd(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Jd(){const n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ec=Jd;function Co(){const n=Jd();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hi(n){le.lFrame.selectedIndex=n}function Eo(n,i){for(let s=i.directiveStart,l=i.directiveEnd;s<l;s++){const p=n.data[s].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:I}=p;g&&(n.contentHooks||(n.contentHooks=[])).push(-s,g),y&&((n.contentHooks||(n.contentHooks=[])).push(s,y),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,y)),C&&(n.viewHooks||(n.viewHooks=[])).push(-s,C),T&&((n.viewHooks||(n.viewHooks=[])).push(s,T),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,T)),null!=I&&(n.destroyHooks||(n.destroyHooks=[])).push(s,I)}}function So(n,i,s){tc(n,i,3,s)}function wo(n,i,s,l){(3&n[2])===s&&tc(n,i,s,l)}function xl(n,i){let s=n[2];(3&s)===i&&(s&=2047,s+=1,n[2]=s)}function tc(n,i,s,l){const p=null!=l?l:-1,g=i.length-1;let y=0;for(let C=void 0!==l?65535&n[18]:0;C<g;C++)if("number"==typeof i[C+1]){if(y=i[C],null!=l&&y>=l)break}else i[C]<0&&(n[18]+=65536),(y<p||-1==p)&&(Qv(n,s,i,C),n[18]=(4294901760&n[18])+C+2),C++}function Qv(n,i,s,l){const d=s[l]<0,p=s[l+1],y=n[d?-s[l]:s[l]];if(d){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{p.call(y)}finally{}}}else try{p.call(y)}finally{}}class qr{constructor(i,s,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function To(n,i,s){const l=Xe(n);let d=0;for(;d<s.length;){const p=s[d];if("number"==typeof p){if(0!==p)break;d++;const g=s[d++],y=s[d++],C=s[d++];l?n.setAttribute(i,y,C,g):i.setAttributeNS(g,y,C)}else{const g=p,y=s[++d];vl(g)?l&&n.setProperty(i,g,y):l?n.setAttribute(i,g,y):i.setAttribute(g,y),d++}}return d}function nc(n){return 3===n||4===n||6===n}function vl(n){return 64===n.charCodeAt(0)}function bo(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let l=0;l<i.length;l++){const d=i[l];"number"==typeof d?s=d:0===s||ic(n,s,d,null,-1===s||2===s?i[++l]:null)}}return n}function ic(n,i,s,l,d){let p=0,g=n.length;if(-1===i)g=-1;else for(;p<n.length;){const y=n[p++];if("number"==typeof y){if(y===i){g=-1;break}if(y>i){g=p-1;break}}}for(;p<n.length;){const y=n[p];if("number"==typeof y)break;if(y===s){if(null===l)return void(null!==d&&(n[p+1]=d));if(l===n[p+1])return void(n[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==g&&(n.splice(g,0,i),p=g+1),n.splice(p++,0,s),null!==l&&n.splice(p++,0,l),null!==d&&n.splice(p++,0,d)}function rc(n){return-1!==n}function $i(n){return 32767&n}function Ki(n,i){let s=function(n){return n>>16}(n),l=i;for(;s>0;)l=l[15],s--;return l}let Cl=!0;function _o(n){const i=Cl;return Cl=n,i}let rC=0;function Qr(n,i){const s=Sl(n,i);if(-1!==s)return s;const l=i[1];l.firstCreatePass&&(n.injectorIndex=i.length,El(l.data,n),El(i,null),El(l.blueprint,null));const d=Do(n,i),p=n.injectorIndex;if(rc(d)){const g=$i(d),y=Ki(d,i),C=y[1].data;for(let T=0;T<8;T++)i[p+T]=y[g+T]|C[g+T]}return i[p+8]=d,p}function El(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Sl(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Do(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,d=i;for(;null!==d;){const p=d[1],g=p.type;if(l=2===g?p.declTNode:1===g?d[6]:null,null===l)return-1;if(s++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function Io(n,i,s){!function(n,i,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(jr)&&(l=s[jr]),null==l&&(l=s[jr]=rC++);const d=255&l;i.data[n+(d>>5)]|=1<<d}(n,i,s)}function ac(n,i,s){if(s&oe.Optional)return n;so(i,"NodeInjector")}function lc(n,i,s,l){if(s&oe.Optional&&void 0===l&&(l=null),0==(s&(oe.Self|oe.Host))){const d=n[9],p=oi(void 0);try{return d?d.get(i,l,s&oe.Optional):Md(i,l,s&oe.Optional)}finally{oi(p)}}return ac(l,i,s)}function uc(n,i,s,l=oe.Default,d){if(null!==n){const p=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(jr)?n[jr]:void 0;return"number"==typeof i?i>=0?255&i:aC:i}(s);if("function"==typeof p){if(!qd(i,n,l))return l&oe.Host?ac(d,s,l):lc(i,s,l,d);try{const g=p(l);if(null!=g||l&oe.Optional)return g;so(s)}finally{ec()}}else if("number"==typeof p){let g=null,y=Sl(n,i),C=-1,T=l&oe.Host?i[16][6]:null;for((-1===y||l&oe.SkipSelf)&&(C=-1===y?Do(n,i):i[y+8],-1!==C&&cc(l,!1)?(g=i[1],y=$i(C),i=Ki(C,i)):y=-1);-1!==y;){const I=i[1];if(dc(p,y,I.data)){const A=lC(y,i,s,g,l,T);if(A!==hc)return A}C=i[y+8],-1!==C&&cc(l,i[1].data[y+8]===T)&&dc(p,y,i)?(g=I,y=$i(C),i=Ki(C,i)):y=-1}}}return lc(i,s,l,d)}const hc={};function aC(){return new qi(ot(),X())}function lC(n,i,s,l,d,p){const g=i[1],y=g.data[n+8],I=Mo(y,g,s,null==l?function(n){return 2==(2&n.flags)}(y)&&Cl:l!=g&&0!=(3&y.type),d&oe.Host&&p===y);return null!==I?Jr(i,g,I,y):hc}function Mo(n,i,s,l,d){const p=n.providerIndexes,g=i.data,y=1048575&p,C=n.directiveStart,I=p>>20,L=d?y+I:n.directiveEnd;for(let P=l?y:y+I;P<L;P++){const H=g[P];if(P<C&&s===H||P>=C&&H.type===s)return P}if(d){const P=g[C];if(P&&fn(P)&&P.type===s)return C}return null}function Jr(n,i,s,l){let d=n[s];const p=i.data;if(function(n){return n instanceof qr}(d)){const g=d;g.resolving&&function(n,i){throw new Ci("200",`Circular dependency in DI detected for ${n}`)}(St(p[s]));const y=_o(g.canSeeViewProviders);g.resolving=!0;const C=g.injectImpl?oi(g.injectImpl):null;qd(n,l,oe.Default);try{d=n[s]=g.factory(void 0,p,n,l),i.firstCreatePass&&s>=l.directiveStart&&function(n,i,s){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=i.type.prototype;if(l){const g=Gd(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,g),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,g)}d&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,d),p&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,p),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,p))}(s,p[s],i)}finally{null!==C&&oi(C),_o(y),g.resolving=!1,ec()}}return d}function dc(n,i,s){return!!(s[i+(n>>5)]&1<<n)}function cc(n,i){return!(n&oe.Self||n&oe.Host&&i)}class qi{constructor(i,s){this._tNode=i,this._lView=s}get(i,s){return uc(this._tNode,this._lView,i,void 0,s)}}const Qi="__parameters__";function Di(n,i,s){return ai(()=>{const l=function(n){return function(...s){if(n){const l=n(...s);for(const d in l)this[d]=l[d]}}}(i);function d(...p){if(this instanceof d)return l.apply(this,p),this;const g=new d(...p);return y.annotation=g,y;function y(C,T,I){const A=C.hasOwnProperty(Qi)?C[Qi]:Object.defineProperty(C,Qi,{value:[]})[Qi];for(;A.length<=I;)A.push(null);return(A[I]=A[I]||[]).push(g),C}}return s&&(d.prototype=Object.create(s.prototype)),d.prototype.ngMetadataName=n,d.annotationCls=d,d})}class He{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Pe({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Jt(n,i){void 0===i&&(i=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(i===n&&(i=n.slice(0,s)),Jt(l,i)):i!==n&&i.push(l)}return i}function Pn(n,i){n.forEach(s=>Array.isArray(s)?Pn(s,i):i(s))}function Lo(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function Ii(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}const is={},Ml="__NG_DI_FLAG__",tr="ngTempTokenPath",SC=/\n/gm,Al="__source",Ll=be({provide:String,useValue:be});let rs;function nr(n){const i=rs;return rs=n,i}function TC(n,i=oe.Default){if(void 0===rs)throw new Error("inject() must be called from an injection context");return null===rs?Md(n,void 0,i):rs.get(n,i&oe.Optional?null:void 0,i)}function Se(n,i=oe.Default){return(Ja||TC)(ne(n),i)}function Mi(n){const i=[];for(let s=0;s<n.length;s++){const l=ne(n[s]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,p=oe.Default;for(let g=0;g<l.length;g++){const y=l[g],C=bC(y);"number"==typeof C?-1===C?d=y.token:p|=C:d=y}i.push(Se(d,p))}else i.push(Se(l))}return i}function ss(n,i){return n[Ml]=i,n.prototype[Ml]=i,n}function bC(n){return n[Ml]}function yc(n,i,s,l){const d=n[tr];throw i[Al]&&d.unshift(i[Al]),n.message=function(n,i,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let d=ge(i);if(Array.isArray(i))d=i.map(ge).join(" -> ");else if("object"==typeof i){let p=[];for(let g in i)if(i.hasOwnProperty(g)){let y=i[g];p.push(g+":"+("string"==typeof y?JSON.stringify(y):ge(y)))}d=`{${p.join(", ")}}`}return`${s}${l?"("+l+")":""}[${d}]: ${n.replace(SC,"\n  ")}`}("\n"+n.message,d,s,l),n.ngTokenPath=d,n[tr]=null,n}const os=ss(Di("Inject",n=>({token:n})),-1),On=ss(Di("Optional"),8),Ai=ss(Di("SkipSelf"),4),Fc="__ngContext__";function yt(n,i){n[Fc]=i}function kl(n){const i=function(n){return n[Fc]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function Fo(n){return n.ngOriginalError}function yE(n,...i){n.error(...i)}class Ri{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i),l=this._findContext(i),d=function(n){return n&&n.ngErrorLogger||yE}(i);d(this._console,"ERROR",i),s&&d(this._console,"ORIGINAL ERROR",s),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(i){return i?function(n){return n.ngDebugContext}(i)||this._findContext(Fo(i)):null}_findOriginalError(i){let s=i&&Fo(i);for(;s&&Fo(s);)s=Fo(s);return s||null}}const Xc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_e))();function Gn(n){return n instanceof Function?n():n}var Yt=(()=>((Yt=Yt||{})[Yt.Important=1]="Important",Yt[Yt.DashCase=2]="DashCase",Yt))();function Yl(n,i){return undefined(n,i)}function cs(n){const i=n[3];return pn(i)?i[3]:i}function jl(n){return Qc(n[13])}function zl(n){return Qc(n[4])}function Qc(n){for(;null!==n&&!pn(n);)n=n[4];return n}function or(n,i,s,l,d){if(null!=l){let p,g=!1;pn(l)?p=l:An(l)&&(g=!0,l=l[0]);const y=nt(l);0===n&&null!==s?null==d?rp(i,s,y):Pi(i,s,y,d||null,!0):1===n&&null!==s?Pi(i,s,y,d||null,!0):2===n?function(n,i,s){const l=ko(n,i);l&&function(n,i,s,l){Xe(n)?n.removeChild(i,s,l):i.removeChild(s)}(n,l,i,s)}(i,y,g):3===n&&i.destroyNode(y),null!=p&&function(n,i,s,l,d){const p=s[7];p!==nt(s)&&or(i,n,l,p,d);for(let y=10;y<s.length;y++){const C=s[y];ps(C[1],C,n,i,l,p)}}(i,n,p,s,d)}}function Xl(n,i,s){return Xe(n)?n.createElement(i,s):null===s?n.createElement(i):n.createElementNS(s,i)}function ep(n,i){const s=n[9],l=s.indexOf(i),d=i[3];1024&i[2]&&(i[2]&=-1025,dl(d,-1)),s.splice(l,1)}function $l(n,i){if(n.length<=10)return;const s=10+i,l=n[s];if(l){const d=l[17];null!==d&&d!==n&&ep(d,l),i>0&&(n[s-1][4]=l[4]);const p=Ii(n,10+i);!function(n,i){ps(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(l[1],l);const g=p[19];null!==g&&g.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function tp(n,i){if(!(256&i[2])){const s=i[11];Xe(s)&&s.destroyNode&&ps(n,i,s,3,null,null),function(n){let i=n[13];if(!i)return Kl(n[1],n);for(;i;){let s=null;if(An(i))s=i[13];else{const l=i[10];l&&(s=l)}if(!s){for(;i&&!i[4]&&i!==n;)An(i)&&Kl(i[1],i),i=i[3];null===i&&(i=n),An(i)&&Kl(i[1],i),s=i&&i[4]}i=s}}(i)}}function Kl(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const d=i[s[l]];if(!(d instanceof qr)){const p=s[l+1];if(Array.isArray(p))for(let g=0;g<p.length;g+=2){const y=d[p[g]],C=p[g+1];try{C.call(y)}finally{}}else try{p.call(d)}finally{}}}}(n,i),function(n,i){const s=n.cleanup,l=i[7];let d=-1;if(null!==s)for(let p=0;p<s.length-1;p+=2)if("string"==typeof s[p]){const g=s[p+1],y="function"==typeof g?g(i):nt(i[g]),C=l[d=s[p+2]],T=s[p+3];"boolean"==typeof T?y.removeEventListener(s[p],C,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),p+=2}else{const g=l[d=s[p+1]];s[p].call(g)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();i[7]=null}}(n,i),1===i[1].type&&Xe(i[11])&&i[11].destroy();const s=i[17];if(null!==s&&pn(i[3])){s!==i[3]&&ep(s,i);const l=i[19];null!==l&&l.detachView(n)}}}function np(n,i,s){return function(n,i,s){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return s[0];if(2&l.flags){const d=n.data[l.directiveStart].encapsulation;if(d===st.None||d===st.Emulated)return null}return Qt(l,s)}(n,i.parent,s)}function Pi(n,i,s,l,d){Xe(n)?n.insertBefore(i,s,l,d):i.insertBefore(s,l,d)}function rp(n,i,s){Xe(n)?n.appendChild(i,s):i.appendChild(s)}function sp(n,i,s,l,d){null!==l?Pi(n,i,s,l,d):rp(n,i,s)}function ko(n,i){return Xe(n)?n.parentNode(i):i.parentNode}let lp=function(n,i,s){return 40&n.type?Qt(n,s):null};function Uo(n,i,s,l){const d=np(n,l,i),p=i[11],y=function(n,i,s){return lp(n,i,s)}(l.parent||i[6],l,i);if(null!=d)if(Array.isArray(s))for(let C=0;C<s.length;C++)sp(p,d,s[C],y,!1);else sp(p,d,s,y,!1)}function Bo(n,i){if(null!==i){const s=i.type;if(3&s)return Qt(i,n);if(4&s)return Zl(-1,n[i.index]);if(8&s){const l=i.child;if(null!==l)return Bo(n,l);{const d=n[i.index];return pn(d)?Zl(-1,d):nt(d)}}if(32&s)return Yl(i,n)()||nt(n[i.index]);{const l=hp(n,i);return null!==l?Array.isArray(l)?l[0]:Bo(cs(n[16]),l):Bo(n,i.next)}}return null}function hp(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Zl(n,i){const s=10+n+1;if(s<i.length){const l=i[s],d=l[1].firstChild;if(null!==d)return Bo(l,d)}return i[7]}function Ql(n,i,s,l,d,p,g){for(;null!=s;){const y=l[s.index],C=s.type;if(g&&0===i&&(y&&yt(nt(y),l),s.flags|=4),64!=(64&s.flags))if(8&C)Ql(n,i,s.child,l,d,p,!1),or(i,n,d,y,p);else if(32&C){const T=Yl(s,l);let I;for(;I=T();)or(i,n,d,I,p);or(i,n,d,y,p)}else 16&C?cp(n,i,l,s,d,p):or(i,n,d,y,p);s=g?s.projectionNext:s.next}}function ps(n,i,s,l,d,p){Ql(s,l,n.firstChild,i,d,p,!1)}function cp(n,i,s,l,d,p){const g=s[16],C=g[6].projection[l.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)or(i,n,d,C[T],p);else Ql(n,i,C,g[3],d,p,!0)}function pp(n,i,s){Xe(n)?n.setAttribute(i,"style",s):i.style.cssText=s}function Jl(n,i,s){Xe(n)?""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s):i.className=s}function fp(n,i,s){let l=n.length;for(;;){const d=n.indexOf(i,s);if(-1===d)return d;if(0===d||n.charCodeAt(d-1)<=32){const p=i.length;if(d+p===l||n.charCodeAt(d+p)<=32)return d}s=d+1}}const mp="ng-template";function jE(n,i,s){let l=0;for(;l<n.length;){let d=n[l++];if(s&&"class"===d){if(d=n[l],-1!==fp(d.toLowerCase(),i,0))return!0}else if(1===d){for(;l<n.length&&"string"==typeof(d=n[l++]);)if(d.toLowerCase()===i)return!0;return!1}}return!1}function gp(n){return 4===n.type&&n.value!==mp}function zE(n,i,s){return i===(4!==n.type||s?n.value:mp)}function WE(n,i,s){let l=4;const d=n.attrs||[],p=function(n){for(let i=0;i<n.length;i++)if(nc(n[i]))return i;return n.length}(d);let g=!1;for(let y=0;y<i.length;y++){const C=i[y];if("number"!=typeof C){if(!g)if(4&l){if(l=2|1&l,""!==C&&!zE(n,C,s)||""===C&&1===i.length){if(mn(l))return!1;g=!0}}else{const T=8&l?C:i[++y];if(8&l&&null!==n.attrs){if(!jE(n.attrs,T,s)){if(mn(l))return!1;g=!0}continue}const A=XE(8&l?"class":C,d,gp(n),s);if(-1===A){if(mn(l))return!1;g=!0;continue}if(""!==T){let L;L=A>p?"":d[A+1].toLowerCase();const P=8&l?L:null;if(P&&-1!==fp(P,T,0)||2&l&&T!==L){if(mn(l))return!1;g=!0}}}}else{if(!g&&!mn(l)&&!mn(C))return!1;if(g&&mn(C))continue;g=!1,l=C|1&l}}return mn(l)||g}function mn(n){return 0==(1&n)}function XE(n,i,s,l){if(null===i)return-1;let d=0;if(l||!s){let p=!1;for(;d<i.length;){const g=i[d];if(g===n)return d;if(3===g||6===g)p=!0;else{if(1===g||2===g){let y=i[++d];for(;"string"==typeof y;)y=i[++d];continue}if(4===g)break;if(0===g){d+=4;continue}}d+=p?1:2}return-1}return function(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===i)return s;s++}return-1}(i,n)}function xp(n,i,s=!1){for(let l=0;l<i.length;l++)if(WE(n,i[l],s))return!0;return!1}function yp(n,i){return n?":not("+i.trim()+")":i}function QE(n){let i=n[0],s=1,l=2,d="",p=!1;for(;s<n.length;){let g=n[s];if("string"==typeof g)if(2&l){const y=n[++s];d+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&l?d+="."+g:4&l&&(d+=" "+g);else""!==d&&!mn(g)&&(i+=yp(p,d),d=""),l=g,p=p||!mn(l);s++}return""!==d&&(i+=yp(p,d)),i}const de={};function Mp(n,i){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const d=s[l],p=s[l+1];if(-1!==p){const g=n.data[p];gl(d),g.contentQueries(2,i[p],p)}}}function fs(n,i,s,l,d,p,g,y,C,T){const I=i.blueprint.slice();return I[0]=d,I[2]=140|l,jd(I),I[3]=I[15]=n,I[8]=s,I[10]=g||n&&n[10],I[11]=y||n&&n[11],I[12]=C||n&&n[12]||null,I[9]=T||n&&n[9]||null,I[6]=p,I[16]=2==i.type?n[16]:I,I}function ar(n,i,s,l,d){let p=n.data[i];if(null===p)p=function(n,i,s,l,d){const p=Wd(),g=cl(),C=n.data[i]=function(n,i,s,l,d,p){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?p:p&&p.parent,s,i,l,d);return null===n.firstChild&&(n.firstChild=C),null!==p&&(g?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(n,i,s,l,d),le.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=s,p.value=l,p.attrs=d;const g=function(){const n=le.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();p.injectorIndex=null===g?-1:g.injectorIndex}return Ln(p,!0),p}function lr(n,i,s,l){if(0===s)return-1;const d=i.length;for(let p=0;p<s;p++)i.push(l),n.blueprint.push(l),n.data.push(null);return d}function ms(n,i,s){vo(i);try{const l=n.viewQuery;null!==l&&yu(1,l,s);const d=n.template;null!==d&&Ap(n,i,d,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Mp(n,i),n.staticViewQueries&&yu(2,n.viewQuery,s);const p=n.components;null!==p&&function(n,i){for(let s=0;s<i.length;s++)RS(n,i[s])}(i,p)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{i[2]&=-5,Co()}}function ur(n,i,s,l){const d=i[2];if(256==(256&d))return;vo(i);const p=xo();try{jd(i),function(n){le.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Ap(n,i,s,2,l);const g=3==(3&d);if(!p)if(g){const T=n.preOrderCheckHooks;null!==T&&So(i,T,null)}else{const T=n.preOrderHooks;null!==T&&wo(i,T,0,null),xl(i,0)}if(function(n){for(let i=jl(n);null!==i;i=zl(i)){if(!i[2])continue;const s=i[9];for(let l=0;l<s.length;l++){const d=s[l],p=d[3];0==(1024&d[2])&&dl(p,1),d[2]|=1024}}}(i),function(n){for(let i=jl(n);null!==i;i=zl(i))for(let s=10;s<i.length;s++){const l=i[s],d=l[1];hl(l)&&ur(d,l,d.template,l[8])}}(i),null!==n.contentQueries&&Mp(n,i),!p)if(g){const T=n.contentCheckHooks;null!==T&&So(i,T)}else{const T=n.contentHooks;null!==T&&wo(i,T,1),xl(i,1)}!function(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const d=s[l];if(d<0)hi(~d);else{const p=d,g=s[++l],y=s[++l];Uv(g,p),y(2,i[p])}}}finally{hi(-1)}}(n,i);const y=n.components;null!==y&&function(n,i){for(let s=0;s<i.length;s++)LS(n,i[s])}(i,y);const C=n.viewQuery;if(null!==C&&yu(2,C,l),!p)if(g){const T=n.viewCheckHooks;null!==T&&So(i,T)}else{const T=n.viewHooks;null!==T&&wo(i,T,2),xl(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),p||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,dl(i[3],-1))}finally{Co()}}function cS(n,i,s,l){const d=i[10],p=!xo(),g=Yd(i);try{p&&!g&&d.begin&&d.begin(),g&&ms(n,i,l),ur(n,i,s,l)}finally{p&&!g&&d.end&&d.end()}}function Ap(n,i,s,l,d){const p=le.lFrame.selectedIndex,g=2&l;try{hi(-1),g&&i.length>20&&function(n,i,s,l){if(!l)if(3==(3&i[2])){const p=n.preOrderCheckHooks;null!==p&&So(i,p,s)}else{const p=n.preOrderHooks;null!==p&&wo(i,p,0,s)}hi(s)}(n,i,20,xo()),s(l,d)}finally{hi(p)}}function Rp(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Wo(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Wo(n,i,s,l,d,p,g,y,C,T){const I=20+l,A=I+d,L=function(n,i){const s=[];for(let l=0;l<i;l++)s.push(l<n?null:de);return s}(I,A),P="function"==typeof T?T():T;return L[1]={type:n,blueprint:L,template:s,queries:null,viewQuery:y,declTNode:i,data:L.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:C,consts:P,incompleteFirstPass:!1}}function Np(n,i,s,l){const d=function(n){return n[7]||(n[7]=[])}(i);null===s?d.push(l):(d.push(s),n.firstCreatePass&&function(n){return n.cleanup||(n.cleanup=[])}(n).push(l,d.length-1))}function Hp(n,i,s){for(let l in n)if(n.hasOwnProperty(l)){const d=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(i,d):s[l]=[i,d]}return s}function Fp(n,i,s,l,d,p){const g=p.hostBindings;if(g){let y=n.hostBindingOpCodes;null===y&&(y=n.hostBindingOpCodes=[]);const C=~i.index;(function(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(y)!=C&&y.push(C),y.push(l,d,g)}}function Vp(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function kp(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function bS(n,i,s){if(s){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)s[i.exportAs[l]]=n;fn(i)&&(s[""]=n)}}function Up(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}function Bp(n,i,s,l,d){n.data[l]=d;const p=d.factory||(d.factory=_i(d.type)),g=new qr(p,fn(d),null);n.blueprint[l]=g,s[l]=g,Fp(n,i,0,l,lr(n,s,d.hostVars,de),d)}function _S(n,i,s){const l=Qt(i,n),d=Rp(s),p=n[10],g=Xo(n,fs(n,d,null,s.onPush?64:16,l,i,p,p.createRenderer(l,s),null,null));n[i.index]=g}function DS(n,i,s,l,d,p){const g=p[i];if(null!==g){const y=l.setInput;for(let C=0;C<g.length;){const T=g[C++],I=g[C++],A=g[C++];null!==y?l.setInput(s,A,T,I):s[I]=A}}}function IS(n,i){let s=null,l=0;for(;l<i.length;){const d=i[l];if(0!==d)if(5!==d){if("number"==typeof d)break;n.hasOwnProperty(d)&&(null===s&&(s=[]),s.push(d,n[d],i[l+1])),l+=2}else l+=2;else l+=4}return s}function LS(n,i){const s=kt(i,n);if(hl(s)){const l=s[1];80&s[2]?ur(l,s,l.template,s[8]):s[5]>0&&fu(s)}}function fu(n){for(let l=jl(n);null!==l;l=zl(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const g=p[1];ur(g,p,g.template,p[8])}else p[5]>0&&fu(p)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const d=kt(s[l],n);hl(d)&&d[5]>0&&fu(d)}}function RS(n,i){const s=kt(i,n),l=s[1];(function(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])})(l,s),ms(l,s,s[8])}function Xo(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function xu(n,i,s){const l=i[10];l.begin&&l.begin();try{ur(n,i,n.template,s)}catch(d){throw function(n,i){const s=n[9],l=s?s.get(Ri,null):null;l&&l.handleError(i)}(i,d),d}finally{l.end&&l.end()}}function jp(n){!function(n){for(let i=0;i<n.components.length;i++){const s=n.components[i],l=kl(s),d=l[1];cS(d,l,d.template,s)}}(n[8])}function yu(n,i,s){gl(0),i(n,s)}const GS=(()=>Promise.resolve(null))();function $o(n,i,s){let l=s?n.styles:null,d=s?n.classes:null,p=0;if(null!==i)for(let g=0;g<i.length;g++){const y=i[g];"number"==typeof y?p=y:1==p?d=Ka(d,y):2==p&&(l=Ka(l,y+": "+i[++g]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=d:n.classesWithoutHost=d}const hr=new He("INJECTOR",-1);class qp{get(i,s=is){if(s===is){const l=new Error(`NullInjectorError: No provider for ${ge(i)}!`);throw l.name="NullInjectorError",l}return s}}const gs=new He("Set Injector scope."),xs={},kS={};let vu;function Zp(){return void 0===vu&&(vu=new qp),vu}function Qp(n,i=null,s=null,l){return new BS(n,s,i||Zp(),l)}class BS{constructor(i,s,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];s&&Pn(s,y=>this.processProvider(y,i,s)),Pn([i],y=>this.processInjectorType(y,[],p)),this.records.set(hr,dr(void 0,this));const g=this.records.get(gs);this.scope=null!=g?g.value:null,this.source=d||("object"==typeof i?null:ge(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,s=is,l=oe.Default){this.assertNotDestroyed();const d=nr(this),p=oi(void 0);try{if(!(l&oe.SkipSelf)){let y=this.records.get(i);if(void 0===y){const C=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof He}(i)&&Xn(i);y=C&&this.injectableDefInScope(C)?dr(Cu(i),xs):null,this.records.set(i,y)}if(null!=y)return this.hydrate(i,y)}return(l&oe.Self?Zp():this.parent).get(i,s=l&oe.Optional&&s===is?null:s)}catch(g){if("NullInjectorError"===g.name){if((g[tr]=g[tr]||[]).unshift(ge(i)),d)throw g;return yc(g,i,"R3InjectorError",this.source)}throw g}finally{oi(p),nr(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((l,d)=>i.push(ge(d))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,s,l){if(!(i=ne(i)))return!1;let d=Dd(i);const p=null==d&&i.ngModule||void 0,g=void 0===p?i:p,y=-1!==l.indexOf(g);if(void 0!==p&&(d=Dd(p)),null==d)return!1;if(null!=d.imports&&!y){let I;l.push(g);try{Pn(d.imports,A=>{this.processInjectorType(A,s,l)&&(void 0===I&&(I=[]),I.push(A))})}finally{}if(void 0!==I)for(let A=0;A<I.length;A++){const{ngModule:L,providers:P}=I[A];Pn(P,H=>this.processProvider(H,L,P||Ne))}}this.injectorDefTypes.add(g);const C=_i(g)||(()=>new g);this.records.set(g,dr(C,xs));const T=d.providers;if(null!=T&&!y){const I=i;Pn(T,A=>this.processProvider(A,I,T))}return void 0!==p&&void 0!==i.providers}processProvider(i,s,l){let d=cr(i=ne(i))?i:ne(i&&i.provide);const p=function(n,i,s){return ef(n)?dr(void 0,n.useValue):dr(function(n,i,s){let l;if(cr(n)){const d=ne(n);return _i(d)||Cu(d)}if(ef(n))l=()=>ne(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Mi(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))l=()=>Se(ne(n.useExisting));else{const d=ne(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return _i(d)||Cu(d);l=()=>new d(...Mi(n.deps))}return l}(n),xs)}(i);if(cr(i)||!0!==i.multi)this.records.get(d);else{let g=this.records.get(d);g||(g=dr(void 0,xs,!0),g.factory=()=>Mi(g.multi),this.records.set(d,g)),d=i,g.multi.push(i)}this.records.set(d,p)}hydrate(i,s){return s.value===xs&&(s.value=kS,s.value=s.factory()),"object"==typeof s.value&&s.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=ne(i.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Cu(n){const i=Xn(n),s=null!==i?i.factory:_i(n);if(null!==s)return s;if(n instanceof He)throw new Error(`Token ${ge(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const i=n.length;if(i>0){const l=function(n,i){const s=[];for(let l=0;l<n;l++)s.push(i);return s}(i,"?");throw new Error(`Can't resolve all parameters for ${ge(n)}: (${l.join(", ")}).`)}const s=function(n){const i=n&&(n[oo]||n[Id]);if(i){const s=function(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Error("unreachable")}function dr(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function ef(n){return null!==n&&"object"==typeof n&&Ll in n}function cr(n){return"function"==typeof n}const tf=function(n,i,s){return function(n,i=null,s=null,l){const d=Qp(n,i,s,l);return d._resolveInjectorDefTypes(),d}({name:s},i,n,s)};let Ye=(()=>{class n{static create(s,l){return Array.isArray(s)?tf(s,l,""):tf(s.providers,s.parent,s.name||"")}}return n.THROW_IF_NOT_FOUND=is,n.NULL=new qp,n.\u0275prov=Pe({token:n,providedIn:"any",factory:()=>Se(hr)}),n.__NG_ELEMENT_ID__=-1,n})();function uw(n,i){Eo(kl(n)[1],ot())}let Ko=null;function pr(){if(!Ko){const n=_e.Symbol;if(n&&n.iterator)Ko=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const l=i[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ko=l)}}}return Ko}function vs(n){return!!Du(n)&&(Array.isArray(n)||!(n instanceof Map)&&pr()in n)}function Du(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ve(n,i=oe.Default){const s=X();return null===s?Se(n,i):uc(ot(),s,ne(n),i)}function Ru(n,i,s,l,d){const g=d?"class":"style";!function(n,i,s,l,d){for(let p=0;p<s.length;){const g=s[p++],y=s[p++],C=i[g],T=n.data[g];null!==T.setInput?T.setInput(C,d,l,y):C[y]=d}}(n,s,i.inputs[g],g,l)}function Pu(n,i,s,l){const d=X(),p=Te(),g=20+n,y=d[11],C=d[g]=Xl(y,i,le.lFrame.currentNamespace),T=p.firstCreatePass?function(n,i,s,l,d,p,g){const y=i.consts,T=ar(i,n,2,d,ui(y,p));return function(n,i,s,l){let d=!1;if(zd()){const p=function(n,i,s){const l=n.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const g=l[p];xp(s,g.selectors,!1)&&(d||(d=[]),Io(Qr(s,i),n,g.type),fn(g)?(kp(n,s),d.unshift(g)):d.push(g))}return d}(n,i,s),g=null===l?null:{"":-1};if(null!==p){d=!0,Up(s,n.data.length,p.length);for(let I=0;I<p.length;I++){const A=p[I];A.providersResolver&&A.providersResolver(A)}let y=!1,C=!1,T=lr(n,i,p.length,null);for(let I=0;I<p.length;I++){const A=p[I];s.mergedAttrs=bo(s.mergedAttrs,A.hostAttrs),Bp(n,s,i,T,A),bS(T,A,g),null!==A.contentQueries&&(s.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(s.flags|=128);const L=A.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),y=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),C=!0),T++}!function(n,i){const l=i.directiveEnd,d=n.data,p=i.attrs,g=[];let y=null,C=null;for(let T=i.directiveStart;T<l;T++){const I=d[T],A=I.inputs,L=null===p||gp(i)?null:IS(A,p);g.push(L),y=Hp(A,T,y),C=Hp(I.outputs,T,C)}null!==y&&(y.hasOwnProperty("class")&&(i.flags|=16),y.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=g,i.inputs=y,i.outputs=C}(n,s)}g&&function(n,i,s){if(i){const l=n.localNames=[];for(let d=0;d<i.length;d+=2){const p=s[i[d+1]];if(null==p)throw new Ci("301",`Export of name '${i[d+1]}' not found!`);l.push(i[d],p)}}}(s,l,g)}s.mergedAttrs=bo(s.mergedAttrs,s.attrs)}(i,s,T,ui(y,g)),null!==T.attrs&&$o(T,T.attrs,!1),null!==T.mergedAttrs&&$o(T,T.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,T),T}(g,p,d,0,i,s,l):p.data[g];Ln(T,!0);const I=T.mergedAttrs;null!==I&&To(y,C,I);const A=T.classes;null!==A&&Jl(y,C,A);const L=T.styles;null!==L&&pp(y,C,L),64!=(64&T.flags)&&Uo(p,d,C,T),0===le.lFrame.elementDepthCount&&yt(C,d),le.lFrame.elementDepthCount++,function(n){return 1==(1&n.flags)}(T)&&(function(n,i,s){!zd()||(function(n,i,s,l){const d=s.directiveStart,p=s.directiveEnd;n.firstCreatePass||Qr(s,i),yt(l,i);const g=s.initialInputs;for(let y=d;y<p;y++){const C=n.data[y],T=fn(C);T&&_S(i,s,C);const I=Jr(i,n,y,s);yt(I,i),null!==g&&DS(0,y-d,I,C,0,g),T&&(kt(s.index,i)[8]=I)}}(n,i,s,Qt(s,i)),128==(128&s.flags)&&function(n,i,s){const l=s.directiveStart,d=s.directiveEnd,g=s.index,y=le.lFrame.currentDirectiveIndex;try{hi(g);for(let C=l;C<d;C++){const T=n.data[C],I=i[C];fl(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Vp(T,I)}}finally{hi(-1),fl(y)}}(n,i,s))}(p,d,T),function(n,i,s){if(rl(i)){const d=i.directiveEnd;for(let p=i.directiveStart;p<d;p++){const g=n.data[p];g.contentQueries&&g.contentQueries(1,s[p],p)}}}(p,T,d)),null!==l&&function(n,i,s=Qt){const l=i.localNames;if(null!==l){let d=i.index+1;for(let p=0;p<l.length;p+=2){const g=l[p+1],y=-1===g?s(i,n):n[g];n[d++]=y}}}(d,T)}function Ou(){let n=ot();cl()?le.lFrame.isParent=!1:(n=n.parent,Ln(n,!1));const i=n;le.lFrame.elementDepthCount--;const s=Te();s.firstCreatePass&&(Eo(s,n),rl(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(i)&&Ru(s,i,X(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(i)&&Ru(s,i,X(),i.stylesWithoutHost,!1)}function Nu(n,i,s,l){Pu(n,i,s,l),Ou()}function Hu(n){return!!n&&"function"==typeof n.then}const Wf=function(n){return!!n&&"function"==typeof n.subscribe};function Em(n,i=""){const s=X(),l=Te(),d=n+20,p=l.firstCreatePass?ar(l,d,1,i,null):l.data[d],g=s[d]=function(n,i){return Xe(n)?n.createText(i):n.createTextNode(i)}(s[11],i);Uo(l,s,g,p),Ln(p,!1)}const Ni=void 0;var FT=["en",[["a","p"],["AM","PM"],Ni],[["AM","PM"],Ni,Ni],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ni,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ni,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ni,"{1} 'at' {0}",Ni],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const i=Math.floor(Math.abs(n)),s=n.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let br={};function Ym(n){return n in br||(br[n]=_e.ng&&_e.ng.common&&_e.ng.common.locales&&_e.ng.common.locales[n]),br[n]}var ee=(()=>((ee=ee||{})[ee.LocaleId=0]="LocaleId",ee[ee.DayPeriodsFormat=1]="DayPeriodsFormat",ee[ee.DayPeriodsStandalone=2]="DayPeriodsStandalone",ee[ee.DaysFormat=3]="DaysFormat",ee[ee.DaysStandalone=4]="DaysStandalone",ee[ee.MonthsFormat=5]="MonthsFormat",ee[ee.MonthsStandalone=6]="MonthsStandalone",ee[ee.Eras=7]="Eras",ee[ee.FirstDayOfWeek=8]="FirstDayOfWeek",ee[ee.WeekendRange=9]="WeekendRange",ee[ee.DateFormat=10]="DateFormat",ee[ee.TimeFormat=11]="TimeFormat",ee[ee.DateTimeFormat=12]="DateTimeFormat",ee[ee.NumberSymbols=13]="NumberSymbols",ee[ee.NumberFormats=14]="NumberFormats",ee[ee.CurrencyCode=15]="CurrencyCode",ee[ee.CurrencySymbol=16]="CurrencySymbol",ee[ee.CurrencyName=17]="CurrencyName",ee[ee.Currencies=18]="Currencies",ee[ee.Directionality=19]="Directionality",ee[ee.PluralCase=20]="PluralCase",ee[ee.ExtraData=21]="ExtraData",ee))();const Jo="en-US";let jm=Jo;function Uu(n){Ft(n,"Expected localeId to be defined"),"string"==typeof n&&(jm=n.toLowerCase().replace(/_/g,"-"))}class mg{}const xg="ngComponent";class Vb{resolveComponentFactory(i){throw function(n){const i=Error(`No component factory found for ${ge(n)}. Did you add it to @NgModule.entryComponents?`);return i[xg]=n,i}(i)}}let Dr=(()=>{class n{}return n.NULL=new Vb,n})();function ra(...n){}function Ir(n,i){return new nn(Qt(n,i))}const Bb=function(){return Ir(ot(),X())};let nn=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Bb,n})();function yg(n){return n instanceof nn?n.nativeElement:n}class sa{}let Ku=(()=>{class n{}return n.\u0275prov=Pe({token:n,providedIn:"root",factory:()=>null}),n})();class qu{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Cg=new qu("12.2.9");class Eg{constructor(){}supports(i){return vs(i)}create(i){return new $b(i)}}const Xb=(n,i)=>i;class $b{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Xb}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,l=this._removalsHead,d=0,p=null;for(;s||l;){const g=!l||s&&s.currentIndex<wg(l,d,p)?s:l,y=wg(g,d,p),C=g.currentIndex;if(g===l)d--,l=l._nextRemoved;else if(s=s._next,null==g.previousIndex)d++;else{p||(p=[]);const T=y-d,I=C-d;if(T!=I){for(let L=0;L<T;L++){const P=L<p.length?p[L]:p[L]=0,H=P+L;I<=H&&H<T&&(p[L]=P+1)}p[g.previousIndex]=I-T}}y!==C&&i(g,y,C)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!vs(i))throw new Error(`Error trying to diff '${ge(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d,p,g,s=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let y=0;y<this.length;y++)p=i[y],g=this._trackByFn(y,p),null!==s&&Object.is(s.trackById,g)?(l&&(s=this._verifyReinsertion(s,p,g,y)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,g,y),l=!0),s=s._next}else d=0,function(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[pr()]();let l;for(;!(l=s.next()).done;)i(l.value)}}(i,y=>{g=this._trackByFn(d,y),null!==s&&Object.is(s.trackById,g)?(l&&(s=this._verifyReinsertion(s,y,g,d)),Object.is(s.item,y)||this._addIdentityChange(s,y)):(s=this._mismatch(s,y,g,d),l=!0),s=s._next,d++}),this.length=d;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,l,d){let p;return null===i?p=this._itTail:(p=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,p,d)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,p,d)):i=this._addAfter(new Kb(s,l),p,d),i}_verifyReinsertion(i,s,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?i=this._reinsertAfter(p,i._prev,d):i.currentIndex!=d&&(i.currentIndex=d,this._addToMoves(i,d)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const d=i._prevRemoved,p=i._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(i,s,l),this._addToMoves(i,l),i}_moveAfter(i,s,l){return this._unlink(i),this._insertAfter(i,s,l),this._addToMoves(i,l),i}_addAfter(i,s,l){return this._insertAfter(i,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,l){const d=null===s?this._itHead:s._next;return i._next=d,i._prev=s,null===d?this._itTail=i:d._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new Sg),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,l=i._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sg),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Kb{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qb{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const s=i._prevDup,l=i._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class Sg{constructor(){this.map=new Map}put(i){const s=i.trackById;let l=this.map.get(s);l||(l=new qb,this.map.set(s,l)),l.add(i)}get(i,s){const d=this.map.get(i);return d?d.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wg(n,i,s){const l=n.previousIndex;if(null===l)return l;let d=0;return s&&l<s.length&&(d=s[l]),l+i+d}class Tg{constructor(){}supports(i){return i instanceof Map||Du(i)}create(){return new Zb}}class Zb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||Du(i)))throw new Error(`Error trying to diff '${ge(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,d)=>{if(s&&s.key===d)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const p=this._getOrCreateRecordForKey(d,l);s=this._insertBeforeOrAppend(s,p)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const l=i._prev;return s._next=i,s._prev=l,i._prev=s,l&&(l._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const d=this._records.get(i);this._maybeAddToChanges(d,s);const p=d._prev,g=d._next;return p&&(p._next=g),g&&(g._prev=p),d._next=null,d._prev=null,d}const l=new Qb(i);return this._records.set(i,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(l=>s(i[l],l))}}class Qb{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bg(){return new _s([new Eg])}let _s=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const d=l.factories.slice();s=s.concat(d)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||bg()),deps:[[n,new Ai,new On]]}}find(s){const l=this.factories.find(d=>d.supports(s));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${s}' of type '${function(n){return n.name||typeof n}(s)}'`)}}return n.\u0275prov=Pe({token:n,providedIn:"root",factory:bg}),n})();function _g(){return new Mr([new Tg])}let Mr=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const d=l.factories.slice();s=s.concat(d)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||_g()),deps:[[n,new Ai,new On]]}}find(s){const l=this.factories.find(d=>d.supports(s));if(l)return l;throw new Error(`Cannot find a differ supporting object '${s}'`)}}return n.\u0275prov=Pe({token:n,providedIn:"root",factory:_g}),n})();function oa(n,i,s,l,d=!1){for(;null!==s;){const p=i[s.index];if(null!==p&&l.push(nt(p)),pn(p))for(let y=10;y<p.length;y++){const C=p[y],T=C[1].firstChild;null!==T&&oa(C[1],C,T,l)}const g=s.type;if(8&g)oa(n,i,s.child,l);else if(32&g){const y=Yl(s,i);let C;for(;C=y();)l.push(C)}else if(16&g){const y=hp(i,s);if(Array.isArray(y))l.push(...y);else{const C=cs(i[16]);oa(C[1],C,y,l,!0)}}s=d?s.projectionNext:s.next}return l}class Ds{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return oa(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(pn(i)){const s=i[8],l=s?s.indexOf(this):-1;l>-1&&($l(i,l),Ii(s,l))}this._attachedToViewContainer=!1}tp(this._lView[1],this._lView)}onDestroy(i){Np(this._lView[1],this._lView,null,i)}markForCheck(){!function(n){for(;n;){n[2]|=64;const i=cs(n);if(Ev(n)&&!i)return n;n=i}}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){xu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,i,s){yo(!0);try{xu(n,i,s)}finally{yo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,i){ps(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class e_ extends Ds{constructor(i){super(i),this._view=i}detectChanges(){jp(this._view)}checkNoChanges(){!function(n){yo(!0);try{jp(n)}finally{yo(!1)}}(this._view)}get context(){return null}}const o_=[new Tg],l_=new _s([new Eg]),u_=new Mr(o_),d_=function(){return aa(ot(),X())};let ei=(()=>{class n{}return n.__NG_ELEMENT_ID__=d_,n})();const c_=ei,p_=class extends c_{constructor(i,s,l){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(i){const s=this._declarationTContainer.tViews,l=fs(this._declarationLView,s,i,16,null,s.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(s)),ms(s,l,i),new Ds(l)}};function aa(n,i){return 4&n.type?new p_(i,n,Ir(n,i)):null}class Hi{}const x_=function(){return Mg(ot(),X())};let Bn=(()=>{class n{}return n.__NG_ELEMENT_ID__=x_,n})();const v_=Bn,Dg=class extends v_{constructor(i,s,l){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=l}get element(){return Ir(this._hostTNode,this._hostLView)}get injector(){return new qi(this._hostTNode,this._hostLView)}get parentInjector(){const i=Do(this._hostTNode,this._hostLView);if(rc(i)){const s=Ki(i,this._hostLView),l=$i(i);return new qi(s[1].data[l+8],s)}return new qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Ig(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,l){const d=i.createEmbeddedView(s||{});return this.insert(d,l),d}createComponent(i,s,l,d,p){const g=l||this.parentInjector;if(!p&&null==i.ngModule&&g){const C=g.get(Hi,null);C&&(p=C)}const y=i.create(g,d,void 0,p);return this.insert(y.hostView,s),y}insert(i,s){const l=i._lView,d=l[1];if(function(n){return pn(n[3])}(l)){const I=this.indexOf(i);if(-1!==I)this.detach(I);else{const A=l[3],L=new Dg(A,A[6],A[3]);L.detach(L.indexOf(i))}}const p=this._adjustIndex(s),g=this._lContainer;!function(n,i,s,l){const d=10+l,p=s.length;l>0&&(s[d-1][4]=i),l<p-10?(i[4]=s[d],Lo(s,10+l,i)):(s.push(i),i[4]=null),i[3]=s;const g=i[17];null!==g&&s!==g&&function(n,i){const s=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===s?n[9]=[i]:s.push(i)}(g,i);const y=i[19];null!==y&&y.insertView(n),i[2]|=128}(d,l,g,p);const y=Zl(p,g),C=l[11],T=ko(C,g[7]);return null!==T&&function(n,i,s,l,d,p){l[0]=d,l[6]=i,ps(n,l,s,1,d,p)}(d,g[6],C,l,T,y),i.attachToViewContainerRef(),Lo(Zu(g),p,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Ig(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),l=$l(this._lContainer,s);l&&(Ii(Zu(this._lContainer),s),tp(l[1],l))}detach(i){const s=this._adjustIndex(i,-1),l=$l(this._lContainer,s);return l&&null!=Ii(Zu(this._lContainer),s)?new Ds(l):null}_adjustIndex(i,s=0){return null==i?this.length+s:i}};function Ig(n){return n[8]}function Zu(n){return n[8]||(n[8]=[])}function Mg(n,i){let s;const l=i[n.index];if(pn(l))s=l;else{let d;if(8&n.type)d=nt(l);else{const p=i[11];d=p.createComment("");const g=Qt(n,i);Pi(p,ko(p,g),d,function(n,i){return Xe(n)?n.nextSibling(i):i.nextSibling}(p,g),!1)}i[n.index]=s=function(n,i,s,l){return new Array(n,!0,!1,i,null,0,l,s,null,null)}(l,i,d,n),Xo(i,s)}return new Dg(s,n,i)}const Pr={};class Kg extends Dr{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=wt(i);return new Zg(s,this.ngModule)}}function qg(n){const i=[];for(let s in n)n.hasOwnProperty(s)&&i.push({propName:n[s],templateName:s});return i}const m0=new He("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xc});class Zg extends mg{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function(n){return n.map(QE).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return qg(this.componentDef.inputs)}get outputs(){return qg(this.componentDef.outputs)}create(i,s,l,d){const p=(d=d||this.ngModule)?function(n,i){return{get:(s,l,d)=>{const p=n.get(s,Pr,d);return p!==Pr||l===Pr?p:i.get(s,l,d)}}}(i,d.injector):i,g=p.get(sa,Bd),y=p.get(Ku,null),C=g.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",I=l?function(n,i,s){if(Xe(n))return n.selectRootElement(i,s===st.ShadowDom);let l="string"==typeof i?n.querySelector(i):i;return l.textContent="",l}(C,l,this.componentDef.encapsulation):Xl(g.createRenderer(null,this.componentDef),T,function(n){const i=n.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(T)),A=this.componentDef.onPush?576:528,L=function(n,i){return{components:[],scheduler:n||Xc,clean:GS,playerHandler:i||null,flags:0}}(),P=Wo(0,null,null,1,0,null,null,null,null,null),H=fs(null,P,L,A,null,null,g,C,y,p);let B,k;vo(H);try{const $=function(n,i,s,l,d,p){const g=s[1];s[20]=n;const C=ar(g,20,2,"#host",null),T=C.mergedAttrs=i.hostAttrs;null!==T&&($o(C,T,!0),null!==n&&(To(d,n,T),null!==C.classes&&Jl(d,n,C.classes),null!==C.styles&&pp(d,n,C.styles)));const I=l.createRenderer(n,i),A=fs(s,Rp(i),null,i.onPush?64:16,s[20],C,l,I,p||null,null);return g.firstCreatePass&&(Io(Qr(C,s),g,i.type),kp(g,C),Up(C,s.length,1)),Xo(s,A),s[20]=A}(I,this.componentDef,H,g,C);if(I)if(l)To(C,I,["ng-version",Cg.full]);else{const{attrs:z,classes:te}=function(n){const i=[],s=[];let l=1,d=2;for(;l<n.length;){let p=n[l];if("string"==typeof p)2===d?""!==p&&i.push(p,n[++l]):8===d&&s.push(p);else{if(!mn(d))break;d=p}l++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);z&&To(C,I,z),te&&te.length>0&&Jl(C,I,te.join(" "))}if(k=function(n,i){return n.data[i]}(P,20),void 0!==s){const z=k.projection=[];for(let te=0;te<this.ngContentSelectors.length;te++){const re=s[te];z.push(null!=re?Array.from(re):null)}}B=function(n,i,s,l,d){const p=s[1],g=function(n,i,s){const l=ot();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Bp(n,l,i,lr(n,i,1,null),s));const d=Jr(i,n,l.directiveStart,l);yt(d,i);const p=Qt(l,i);return p&&yt(p,i),d}(p,s,i);if(l.components.push(g),n[8]=g,d&&d.forEach(C=>C(g,i)),i.contentQueries){const C=ot();i.contentQueries(1,g,C.directiveStart)}const y=ot();return!p.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(hi(y.index),Fp(s[1],y,0,y.directiveStart,y.directiveEnd,i),Vp(i,g)),g}($,this.componentDef,H,L,[uw]),ms(P,H,null)}finally{Co()}return new y0(this.componentType,B,Ir(k,H),H,k)}}class y0 extends class{}{constructor(i,s,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=s,this.hostView=this.changeDetectorRef=new e_(d),this.componentType=i}get injector(){return new qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const Or=new Map;class E0 extends Hi{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Kg(this);const l=Kt(i),d=function(n){return n[pv]||null}(i);d&&Uu(d),this._bootstrapComponents=Gn(l.bootstrap),this._r3Injector=Qp(i,s,[{provide:Hi,useValue:this},{provide:Dr,useValue:this.componentFactoryResolver}],ge(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,s=Ye.THROW_IF_NOT_FOUND,l=oe.Default){return i===Ye||i===Hi||i===hr?this:this._r3Injector.get(i,s,l)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class hh extends class{}{constructor(i){super(),this.moduleType=i,null!==Kt(i)&&function(n){const i=new Set;!function s(l){const d=Kt(l,!0),p=d.id;null!==p&&(function(n,i,s){if(i&&i!==s)throw new Error(`Duplicate module registered for ${n} - ${ge(i)} vs ${ge(i.name)}`)}(p,Or.get(p),l),Or.set(p,l));const g=Gn(d.imports);for(const y of g)i.has(y)||(i.add(y),s(y))}(n)}(i)}create(i){return new E0(this.moduleType,i)}}function dh(n){return i=>{setTimeout(n,void 0,i)}}const ti=class extends ie{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,l){var d,p,g;let y=i,C=s||(()=>null),T=l;if(i&&"object"==typeof i){const A=i;y=null===(d=A.next)||void 0===d?void 0:d.bind(A),C=null===(p=A.error)||void 0===p?void 0:p.bind(A),T=null===(g=A.complete)||void 0===g?void 0:g.bind(A)}this.__isAsync&&(C=dh(C),y&&(y=dh(y)),T&&(T=dh(T)));const I=super.subscribe({next:y,error:C,complete:T});return i instanceof S&&i.add(I),I}};function k0(){return this._results[pr()]()}class ca{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=pr(),l=ca.prototype;l[s]||(l[s]=k0)}get changes(){return this._changes||(this._changes=new ti)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const l=this;l.dirty=!1;const d=Jt(i);(this._changesDetected=!function(n,i,s){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){let d=n[l],p=i[l];if(s&&(d=s(d),p=s(p)),p!==d)return!1}return!0}(l._results,d,s))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class ch{constructor(i){this.queryList=i,this.matches=null}clone(){return new ch(this.queryList)}setDirty(){this.queryList.setDirty()}}class ph{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const l=null!==i.contentQueries?i.contentQueries[0]:s.length,d=[];for(let p=0;p<l;p++){const g=s.getByIndex(p);d.push(this.queries[g.indexInDeclarationView].clone())}return new ph(d)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==cx(i,s).matches&&this.queries[s].setDirty()}}class sx{constructor(i,s,l=null){this.predicate=i,this.flags=s,this.read=l}}class fh{constructor(i=[]){this.queries=i}elementStart(i,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let l=0;l<this.length;l++){const d=null!==s?s.length:0,p=this.getByIndex(l).embeddedTView(i,d);p&&(p.indexInDeclarationView=l,null!==s?s.push(p):s=[p])}return null!==s?new fh(s):null}template(i,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class mh{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new mh(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(i,s,Y0(s,p)),this.matchTNodeWithReadOption(i,s,Mo(s,i,p,!1,!1))}else l===ei?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,Mo(s,i,l,!1,!1))}matchTNodeWithReadOption(i,s,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===nn||d===Bn||d===ei&&4&s.type)this.addMatch(s.index,-2);else{const p=Mo(s,i,d,!1,!1);null!==p&&this.addMatch(s.index,p)}else this.addMatch(s.index,l)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function Y0(n,i){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===i)return s[l+1];return null}function z0(n,i,s,l){return-1===s?function(n,i){return 11&n.type?Ir(n,i):4&n.type?aa(n,i):null}(i,n):-2===s?function(n,i,s){return s===nn?Ir(i,n):s===ei?aa(i,n):s===Bn?Mg(i,n):void 0}(n,i,l):Jr(n,n[1],s,i)}function ox(n,i,s,l){const d=i[19].queries[l];if(null===d.matches){const p=n.data,g=s.matches,y=[];for(let C=0;C<g.length;C+=2){const T=g[C];y.push(T<0?null:z0(i,p[T],g[C+1],s.metadata.read))}d.matches=y}return d.matches}function gh(n,i,s,l){const d=n.queries.getByIndex(s),p=d.matches;if(null!==p){const g=ox(n,i,d,s);for(let y=0;y<p.length;y+=2){const C=p[y];if(C>0)l.push(g[y/2]);else{const T=p[y+1],I=i[-C];for(let A=10;A<I.length;A++){const L=I[A];L[17]===L[3]&&gh(L[1],L,T,l)}if(null!==I[9]){const A=I[9];for(let L=0;L<A.length;L++){const P=A[L];gh(P[1],P,T,l)}}}}}return l}function ax(n){const i=X(),s=Te(),l=Kd();gl(l+1);const d=cx(s,l);if(n.dirty&&Yd(i)===(2==(2&d.metadata.flags))){if(null===d.matches)n.reset([]);else{const p=d.crossesNgTemplate?gh(s,i,l,[]):ox(s,i,d,l);n.reset(p,yg),n.notifyOnChanges()}return!0}return!1}function lx(n,i,s){const l=Te();l.firstCreatePass&&(function(n,i,s){null===n.queries&&(n.queries=new fh),n.queries.track(new mh(i,s))}(l,new sx(n,i,s),-1),2==(2&i)&&(l.staticViewQueries=!0)),function(n,i,s){const l=new ca(4==(4&s));Np(n,i,l,l.destroy),null===i[19]&&(i[19]=new ph),i[19].queries.push(new ch(l))}(l,X(),i)}function cx(n,i){return n.queries.getByIndex(i)}const ma=new He("Application Initializer");let Hr=(()=>{class n{constructor(s){this.appInits=s,this.resolve=ra,this.reject=ra,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Hu(p))s.push(p);else if(Wf(p)){const g=new Promise((y,C)=>{p.subscribe({complete:y,error:C})});s.push(g)}}Promise.all(s).then(()=>{l()}).catch(d=>{this.reject(d)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Se(ma,8))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();const Vs=new He("AppId"),wD={provide:Vs,useFactory:function(){return`${Sh()}${Sh()}${Sh()}`},deps:[]};function Sh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ax=new He("Platform Initializer"),wh=new He("Platform ID"),TD=new He("appBootstrapListener");let Th=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();const gi=new He("LocaleId"),Lx=new He("DefaultCurrencyCode");class _D{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}const bh=function(n){return new hh(n)},DD=bh,ID=function(n){return Promise.resolve(bh(n))},Rx=function(n){const i=bh(n),l=Gn(Kt(n).declarations).reduce((d,p)=>{const g=wt(p);return g&&d.push(new Zg(g)),d},[]);return new _D(i,l)},MD=Rx,AD=function(n){return Promise.resolve(Rx(n))};let xa=(()=>{class n{constructor(){this.compileModuleSync=DD,this.compileModuleAsync=ID,this.compileModuleAndAllComponentsSync=MD,this.compileModuleAndAllComponentsAsync=AD}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();const PD=(()=>Promise.resolve(0))();function _h(n){"undefined"==typeof Zone?PD.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class gt{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ti(!1),this.onMicrotaskEmpty=new ti(!1),this.onStable=new ti(!1),this.onError=new ti(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&s,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let n=_e.requestAnimationFrame,i=_e.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(n){const i=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(_e,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Ih(n),n.isCheckStableRunning=!0,Dh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Ih(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,d,p,g,y)=>{try{return Px(n),s.invokeTask(d,p,g,y)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||n.shouldCoalesceRunChangeDetection)&&i(),Ox(n)}},onInvoke:(s,l,d,p,g,y,C)=>{try{return Px(n),s.invoke(d,p,g,y,C)}finally{n.shouldCoalesceRunChangeDetection&&i(),Ox(n)}},onHasTask:(s,l,d,p)=>{s.hasTask(d,p),l===d&&("microTask"==p.change?(n._hasPendingMicrotasks=p.microTask,Ih(n),Dh(n)):"macroTask"==p.change&&(n.hasPendingMacrotasks=p.macroTask))},onHandleError:(s,l,d,p)=>(s.handleError(d,p),n.runOutsideAngular(()=>n.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,s,l){return this._inner.run(i,s,l)}runTask(i,s,l,d){const p=this._inner,g=p.scheduleEventTask("NgZoneEvent: "+d,i,ND,ra,ra);try{return p.runTask(g,s,l)}finally{p.cancelTask(g)}}runGuarded(i,s,l){return this._inner.runGuarded(i,s,l)}runOutsideAngular(i){return this._outer.run(i)}}const ND={};function Dh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ih(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Px(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ox(n){n._nesting--,Dh(n)}class FD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ti,this.onMicrotaskEmpty=new ti,this.onStable=new ti,this.onError=new ti}run(i,s,l){return i.apply(s,l)}runGuarded(i,s,l){return i.apply(s,l)}runOutsideAngular(i){return i()}runTask(i,s,l,d){return i.apply(s,l)}}let Mh=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gt.assertNotInAngularZone(),_h(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_h(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==p),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:p,updateCb:d})}whenStable(s,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,l,d){return[]}}return n.\u0275fac=function(s){return new(s||n)(Se(gt))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})(),Nx=(()=>{class n{constructor(){this._applications=new Map,Ah.addToWindow(this)}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return Ah.findTestabilityInTree(this,s,l)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();class VD{addToWindow(i){}findTestabilityInTree(i,s,l){return null}}let Ah=new VD,Hx=!0,Gx=!1;let wn;const Vx=new He("AllowMultipleToken");function kx(n,i,s=[]){const l=`Platform: ${i}`,d=new He(l);return(p=[])=>{let g=Ux();if(!g||g.injector.get(Vx,!1))if(n)n(s.concat(p).concat({provide:d,useValue:!0}));else{const y=s.concat(p).concat({provide:d,useValue:!0},{provide:gs,useValue:"platform"});!function(n){if(wn&&!wn.destroyed&&!wn.injector.get(Vx,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");wn=n.get(Bx);const i=n.get(Ax,null);i&&i.forEach(s=>s())}(Ye.create({providers:y,name:l}))}return function(n){const i=Ux();if(!i)throw new Error("No platform exists!");if(!i.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(d)}}function Ux(){return wn&&!wn.destroyed?wn:null}let Bx=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const y=function(n,i){let s;return s="noop"===n?new FD:("zone.js"===n?void 0:n)||new gt({enableLongStackTrace:(Gx=!0,Hx),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),s}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:gt,useValue:y}];return y.run(()=>{const T=Ye.create({providers:C,parent:this.injector,name:s.moduleType.name}),I=s.create(T),A=I.injector.get(Ri,null);if(!A)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const L=y.onError.subscribe({next:P=>{A.handleError(P)}});I.onDestroy(()=>{Lh(this._modules,I),L.unsubscribe()})}),function(n,i,s){try{const l=s();return Hu(l)?l.catch(d=>{throw i.runOutsideAngular(()=>n.handleError(d)),d}):l}catch(l){throw i.runOutsideAngular(()=>n.handleError(l)),l}}(A,y,()=>{const L=I.injector.get(Hr);return L.runInitializers(),L.donePromise.then(()=>(Uu(I.injector.get(gi,Jo)||Jo),this._moduleDoBootstrap(I),I))})})}bootstrapModule(s,l=[]){const d=Yx({},l);return function(n,i,s){const l=new hh(s);return Promise.resolve(l)}(0,0,s).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(s){const l=s.injector.get(ks);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!s.instance.ngDoBootstrap)throw new Error(`The module ${ge(s.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Se(Ye))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();function Yx(n,i){return Array.isArray(i)?i.reduce(Yx,n):Object.assign(Object.assign({},n),i)}let ks=(()=>{class n{constructor(s,l,d,p,g){this._zone=s,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new Y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new Y(T=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{gt.assertNotInAngularZone(),_h(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{gt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{I.unsubscribe(),A.unsubscribe()}});this.isStable=function(...n){let i=Number.POSITIVE_INFINITY,s=null,l=n[n.length-1];return function(n){return n&&"function"==typeof n.schedule}(l)?(s=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(i=n.pop())):"number"==typeof l&&(i=n.pop()),null===s&&1===n.length&&n[0]instanceof Y?n[0]:function(n=Number.POSITIVE_INFINITY){return Br(F,n)}(i)(function(n,i){return i?In(n,i):new Y(Ce(n))}(n,s))}(y,C.pipe(n=>si()(function(n,i){return function(l){let d;d="function"==typeof n?n:function(){return n};const p=Object.create(l,Wa);return p.source=l,p.subjectFactory=d,p}}(Jy)(n))))}bootstrap(s,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=s instanceof mg?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(d.componentType);const p=function(n){return n.isBoundToModule}(d)?void 0:this._injector.get(Hi),y=d.create(Ye.NULL,[],l||d.selector,p),C=y.location.nativeElement,T=y.injector.get(Mh,null),I=T&&y.injector.get(Nx);return T&&I&&I.registerApplication(C,T),y.onDestroy(()=>{this.detachView(y.hostView),Lh(this.components,y),I&&I.unregisterApplication(C)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;Lh(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(TD,[]).concat(this._bootstrapListeners).forEach(d=>d(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Se(gt),Se(Ye),Se(Ri),Se(Dr),Se(Hr))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();function Lh(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}const cI=kx(null,"core",[{provide:wh,useValue:"unknown"},{provide:Bx,deps:[Ye]},{provide:Nx,deps:[]},{provide:Th,deps:[]}]),xI=[{provide:ks,useClass:ks,deps:[gt,Ye,Ri,Dr,Hr]},{provide:m0,deps:[gt],useFactory:function(n){let i=[];return n.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(s){i.push(s)}}},{provide:Hr,useClass:Hr,deps:[[new On,ma]]},{provide:xa,useClass:xa,deps:[]},wD,{provide:_s,useFactory:function(){return l_},deps:[]},{provide:Mr,useFactory:function(){return u_},deps:[]},{provide:gi,useFactory:function(n){return Uu(n=n||"undefined"!=typeof $localize&&$localize.locale||Jo),n},deps:[[new os(gi),new On,new Ai]]},{provide:Lx,useValue:"USD"}];let vI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Se(ks))},n.\u0275mod=zr({type:n}),n.\u0275inj=Ei({providers:xI}),n})(),Da=null;function zs(){return Da}const At=new He("DocumentToken");var it=(()=>((it=it||{})[it.Zero=0]="Zero",it[it.One=1]="One",it[it.Two=2]="Two",it[it.Few=3]="Few",it[it.Many=4]="Many",it[it.Other=5]="Other",it))();const DM=function(n){return function(n){const i=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Ym(i);if(s)return s;const l=i.split("-")[0];if(s=Ym(l),s)return s;if("en"===l)return FT;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[ee.PluralCase]};class Ga{}let nA=(()=>{class n extends Ga{constructor(s){super(),this.locale=s}getPluralCategory(s,l){switch(DM(l||this.locale)(s)){case it.Zero:return"zero";case it.One:return"one";case it.Two:return"two";case it.Few:return"few";case it.Many:return"many";default:return"other"}}}return n.\u0275fac=function(s){return new(s||n)(Se(gi))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})(),HA=(()=>{class n{}return n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=zr({type:n}),n.\u0275inj=Ei({providers:[{provide:Ga,useClass:nA}]}),n})();class sd extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){Da||(Da=n)}(new sd)}onAndCancel(i,s,l){return i.addEventListener(s,l,!1),()=>{i.removeEventListener(s,l,!1)}}dispatchEvent(i,s){i.dispatchEvent(s)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,s){return(s=s||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,s){return"window"===s?window:"document"===s?i:"body"===s?i.body:null}getBaseHref(i){const s=($s=$s||document.querySelector("base"),$s?$s.getAttribute("href"):null);return null==s?null:function(n){Fa=Fa||document.createElement("a"),Fa.setAttribute("href",n);const i=Fa.pathname;return"/"===i.charAt(0)?i:`/${i}`}(s)}resetBaseElement(){$s=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return function(n,i){i=encodeURIComponent(i);for(const s of n.split(";")){const l=s.indexOf("="),[d,p]=-1==l?[s,""]:[s.slice(0,l),s.slice(l+1)];if(d.trim()===i)return decodeURIComponent(p)}return null}(document.cookie,i)}}let Fa,$s=null;const Py=new He("TRANSITION_ID"),WA=[{provide:ma,useFactory:function(n,i,s){return()=>{s.get(Hr).donePromise.then(()=>{const l=zs(),d=i.querySelectorAll(`style[ng-transition="${n}"]`);for(let p=0;p<d.length;p++)l.remove(d[p])})}},deps:[Py,At,Ye],multi:!0}];class od{static init(){!function(n){Ah=n}(new od)}addToWindow(i){_e.getAngularTestability=(l,d=!0)=>{const p=i.findTestabilityInTree(l,d);if(null==p)throw new Error("Could not find testability for element.");return p},_e.getAllAngularTestabilities=()=>i.getAllTestabilities(),_e.getAllAngularRootElements=()=>i.getAllRootElements(),_e.frameworkStabilizers||(_e.frameworkStabilizers=[]),_e.frameworkStabilizers.push(l=>{const d=_e.getAllAngularTestabilities();let p=d.length,g=!1;const y=function(C){g=g||C,p--,0==p&&l(g)};d.forEach(function(C){C.whenStable(y)})})}findTestabilityInTree(i,s,l){if(null==s)return null;const d=i.getTestability(s);return null!=d?d:l?zs().isShadowRoot(s)?this.findTestabilityInTree(i,s.host,!0):this.findTestabilityInTree(i,s.parentElement,!0):null}}let XA=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();const Ks=new He("EventManagerPlugins");let ka=(()=>{class n{constructor(s,l){this._zone=l,this._eventNameToPlugin=new Map,s.forEach(d=>d.manager=this),this._plugins=s.slice().reverse()}addEventListener(s,l,d){return this._findPluginFor(l).addEventListener(s,l,d)}addGlobalEventListener(s,l,d){return this._findPluginFor(l).addGlobalEventListener(s,l,d)}getZone(){return this._zone}_findPluginFor(s){const l=this._eventNameToPlugin.get(s);if(l)return l;const d=this._plugins;for(let p=0;p<d.length;p++){const g=d[p];if(g.supports(s))return this._eventNameToPlugin.set(s,g),g}throw new Error(`No event manager plugin found for event ${s}`)}}return n.\u0275fac=function(s){return new(s||n)(Se(Ks),Se(gt))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();class ad{constructor(i){this._doc=i}addGlobalEventListener(i,s,l){const d=zs().getGlobalEventTarget(this._doc,i);if(!d)throw new Error(`Unsupported event target ${d} for event ${s}`);return this.addEventListener(d,s,l)}}let Ny=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(s){const l=new Set;s.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),l.add(d))}),this.onStylesAdded(l)}onStylesAdded(s){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})(),qs=(()=>{class n extends Ny{constructor(s){super(),this._doc=s,this._hostNodes=new Map,this._hostNodes.set(s.head,[])}_addStylesToHost(s,l,d){s.forEach(p=>{const g=this._doc.createElement("style");g.textContent=p,d.push(l.appendChild(g))})}addHost(s){const l=[];this._addStylesToHost(this._stylesSet,s,l),this._hostNodes.set(s,l)}removeHost(s){const l=this._hostNodes.get(s);l&&l.forEach(Hy),this._hostNodes.delete(s)}onStylesAdded(s){this._hostNodes.forEach((l,d)=>{this._addStylesToHost(s,d,l)})}ngOnDestroy(){this._hostNodes.forEach(s=>s.forEach(Hy))}}return n.\u0275fac=function(s){return new(s||n)(Se(At))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();function Hy(n){zs().remove(n)}const ld={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ud=/%COMP%/g;function Ua(n,i,s){for(let l=0;l<i.length;l++){let d=i[l];Array.isArray(d)?Ua(n,d,s):(d=d.replace(ud,n),s.push(d))}return s}function Vy(n){return i=>{if("__ngUnwrap__"===i)return n;!1===n(i)&&(i.preventDefault(),i.returnValue=!1)}}let hd=(()=>{class n{constructor(s,l,d){this.eventManager=s,this.sharedStylesHost=l,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new dd(s)}createRenderer(s,l){if(!s||!l)return this.defaultRenderer;switch(l.encapsulation){case st.Emulated:{let d=this.rendererByCompId.get(l.id);return d||(d=new lL(this.eventManager,this.sharedStylesHost,l,this.appId),this.rendererByCompId.set(l.id,d)),d.applyToHost(s),d}case 1:case st.ShadowDom:return new uL(this.eventManager,this.sharedStylesHost,s,l);default:if(!this.rendererByCompId.has(l.id)){const d=Ua(l.id,l.styles,[]);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(l.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(s){return new(s||n)(Se(ka),Se(qs),Se(Vs))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();class dd{constructor(i){this.eventManager=i,this.data=Object.create(null)}destroy(){}createElement(i,s){return s?document.createElementNS(ld[s]||s,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,s){i.appendChild(s)}insertBefore(i,s,l){i&&i.insertBefore(s,l)}removeChild(i,s){i&&i.removeChild(s)}selectRootElement(i,s){let l="string"==typeof i?document.querySelector(i):i;if(!l)throw new Error(`The selector "${i}" did not match any elements`);return s||(l.textContent=""),l}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,s,l,d){if(d){s=d+":"+s;const p=ld[d];p?i.setAttributeNS(p,s,l):i.setAttribute(s,l)}else i.setAttribute(s,l)}removeAttribute(i,s,l){if(l){const d=ld[l];d?i.removeAttributeNS(d,s):i.removeAttribute(`${l}:${s}`)}else i.removeAttribute(s)}addClass(i,s){i.classList.add(s)}removeClass(i,s){i.classList.remove(s)}setStyle(i,s,l,d){d&(Yt.DashCase|Yt.Important)?i.style.setProperty(s,l,d&Yt.Important?"important":""):i.style[s]=l}removeStyle(i,s,l){l&Yt.DashCase?i.style.removeProperty(s):i.style[s]=""}setProperty(i,s,l){i[s]=l}setValue(i,s){i.nodeValue=s}listen(i,s,l){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,s,Vy(l)):this.eventManager.addEventListener(i,s,Vy(l))}}class lL extends dd{constructor(i,s,l,d){super(i),this.component=l;const p=Ua(d+"-"+l.id,l.styles,[]);s.addStyles(p),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(ud,n)}(d+"-"+l.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(ud,n)}(d+"-"+l.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,s){const l=super.createElement(i,s);return super.setAttribute(l,this.contentAttr,""),l}}class uL extends dd{constructor(i,s,l,d){super(i),this.sharedStylesHost=s,this.hostEl=l,this.shadowRoot=l.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const p=Ua(d.id,d.styles,[]);for(let g=0;g<p.length;g++){const y=document.createElement("style");y.textContent=p[g],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,s){return super.appendChild(this.nodeOrShadowRoot(i),s)}insertBefore(i,s,l){return super.insertBefore(this.nodeOrShadowRoot(i),s,l)}removeChild(i,s){return super.removeChild(this.nodeOrShadowRoot(i),s)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let hL=(()=>{class n extends ad{constructor(s){super(s)}supports(s){return!0}addEventListener(s,l,d){return s.addEventListener(l,d,!1),()=>this.removeEventListener(s,l,d)}removeEventListener(s,l,d){return s.removeEventListener(l,d)}}return n.\u0275fac=function(s){return new(s||n)(Se(At))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();const By=["alt","control","meta","shift"],xL={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yy={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vL=(()=>{class n extends ad{constructor(s){super(s)}supports(s){return null!=n.parseEventName(s)}addEventListener(s,l,d){const p=n.parseEventName(l),g=n.eventCallback(p.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zs().onAndCancel(s,p.domEventName,g))}static parseEventName(s){const l=s.toLowerCase().split("."),d=l.shift();if(0===l.length||"keydown"!==d&&"keyup"!==d)return null;const p=n._normalizeKey(l.pop());let g="";if(By.forEach(C=>{const T=l.indexOf(C);T>-1&&(l.splice(T,1),g+=C+".")}),g+=p,0!=l.length||0===p.length)return null;const y={};return y.domEventName=d,y.fullKey=g,y}static getEventFullKey(s){let l="",d=function(n){let i=n.key;if(null==i){if(i=n.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===n.location&&Yy.hasOwnProperty(i)&&(i=Yy[i]))}return xL[i]||i}(s);return d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),By.forEach(p=>{p!=d&&yL[p](s)&&(l+=p+".")}),l+=d,l}static eventCallback(s,l,d){return p=>{n.getEventFullKey(p)===s&&d.runGuarded(()=>l(p))}}static _normalizeKey(s){switch(s){case"esc":return"escape";default:return s}}}return n.\u0275fac=function(s){return new(s||n)(Se(At))},n.\u0275prov=Pe({token:n,factory:n.\u0275fac}),n})();const DL=kx(cI,"browser",[{provide:wh,useValue:"browser"},{provide:Ax,useValue:function(){sd.makeCurrent(),od.init()},multi:!0},{provide:At,useFactory:function(){return function(n){al=n}(document),document},deps:[]}]),IL=[[],{provide:gs,useValue:"root"},{provide:Ri,useFactory:function(){return new Ri},deps:[]},{provide:Ks,useClass:hL,multi:!0,deps:[At,gt,wh]},{provide:Ks,useClass:vL,multi:!0,deps:[At]},[],{provide:hd,useClass:hd,deps:[ka,qs,Vs]},{provide:sa,useExisting:hd},{provide:Ny,useExisting:qs},{provide:qs,useClass:qs,deps:[At]},{provide:Mh,useClass:Mh,deps:[gt]},{provide:ka,useClass:ka,deps:[Ks,gt]},{provide:class{},useClass:XA,deps:[]},[]];let ML=(()=>{class n{constructor(s){if(s)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(s){return{ngModule:n,providers:[{provide:Vs,useValue:s.appId},{provide:Py,useExisting:Vs},WA]}}}return n.\u0275fac=function(s){return new(s||n)(Se(n,12))},n.\u0275mod=zr({type:n}),n.\u0275inj=Ei({providers:IL,imports:[HA,vI]}),n})();"undefined"!=typeof window&&window;var GL=r(500),FL=r.n(GL);const Ie=(window.mxLoadResources=!1,window.mxLoadStylesheets=!1,window.mxForceIncludes=!1,window.mxResourceExtension=".txt",FL()({}));function Ba(n,i,s,l){var g,d=arguments.length,p=d<3?i:null===l?l=Object.getOwnPropertyDescriptor(i,s):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(n,i,s,l);else for(var y=n.length-1;y>=0;y--)(g=n[y])&&(p=(d<3?g(p):d>3?g(i,s,p):g(i,s))||p);return d>3&&p&&Object.defineProperty(i,s,p),p}class xd{constructor(i,s){this.x=i,this.y=s}}function Zs(n,i,s){return i.x<=Math.max(n.x,s.x)&&i.x>=Math.min(n.x,s.x)&&i.y<=Math.max(n.y,s.y)&&i.y>=Math.min(n.y,s.y)}function Qs(n,i,s){let l=(i.y-n.y)*(s.x-i.x)-(i.x-n.x)*(s.y-i.y);return 0==l?0:l>0?1:2}function YL(n,i,s,l){let d=Qs(n,i,s),p=Qs(n,i,l),g=Qs(s,l,n),y=Qs(s,l,i);return!!(d!=p&&g!=y||0==d&&Zs(n,s,i)||0==p&&Zs(n,l,i)||0==g&&Zs(s,n,l)||0==y&&Zs(s,i,l))}function $y(n){const i=n.getState();return new xd(i.x,i.y)}function Ky(n,i){let s;return i.e1&&i.e1!=n?s=i.e1:i.e2&&i.e2!=n&&(s=i.e2),s?[s,s.v1===i?s.v2:s.v1]:[void 0,void 0]}class WL{connect(i){if(this.e1){if(this.e2)throw"unable to connect, vertex already has 2 edges";this.e2=i}else this.e1=i}fullConnected(){return!!this.e1&&!!this.e2}disconnect(i){this.e1===i?this.e1=void 0:this.e2===i&&(this.e2=void 0)}getState(){return this.g.graph.view.getState(this.native)}}class XL{split(i,s){this.g.splitEdge(i,s,this)}removeFromGraph(){this.g.remove([this]),[this.v1,this.v2].forEach(i=>i.disconnect(this))}}class Js{constructor(i,s){this.graph=i,this.container=s,this.vertexes=[],this.edges=[],this.isMouseDown=!1,this.model=i.getModel(),this.initialize()}initialize(){this.undoManager=new Ie.mxUndoManager;const i=this.onUndoableEdit.bind(this);this.graph.getModel().addListener(Ie.mxEvent.UNDO,i),this.graph.getView().addListener(Ie.mxEvent.UNDO,i),this.graph.addListener(Ie.mxEvent.DOUBLE_CLICK,this.onDoubleClick.bind(this)),this.graph.addListener(Ie.mxEvent.CLICK,this.onClick.bind(this)),this.graph.addMouseListener({mouseDown:this.onMouseDown.bind(this),mouseMove:this.onMouseMove.bind(this),mouseUp:this.onMouseUp.bind(this)}),this.graph.setBackgroundImage(new Ie.mxImage("./assets/img/image.png",900,900)),this.originPanningTrigger=this.graph.panningHandler.isPanningTrigger,this.graph.panningHandler.isPanningTrigger=this.isPanningTrigger.bind(this),Ie.mxEvent.addMouseWheelListener(this.onMouseWheel.bind(this)),this.root=this.graph.getDefaultParent()}isPanningTrigger(i){return!this.mouseDownInGraph(i)}moveAll(i){this.graph.moveCells(this.graph.getChildCells(this.root,!0,!0),(i.x-this.lastMousePt.x)/this.graph.view.scale,(i.y-this.lastMousePt.y)/this.graph.view.scale,!1)}getPoint(i){return new Ie.mxPoint(i.getGraphX(),i.getGraphY())}onMouseWheel(i,s){s?this.graph.zoomIn():this.graph.zoomOut()}onMouseDown(i,s){this.mouseDownInGraph(s)&&(this.isMouseDown=!0,this.lastMousePt=this.getPoint(s),s.consume())}onMouseUp(i,s){if(this.isMouseDown){const l=this.getPoint(s);this.moveAll(l),s.consume()}this.isMouseDown=!1}onMouseMove(i,s){if(!this.isMouseDown)return;const l=this.getPoint(s);this.moveAll(l),this.lastMousePt=l,s.consume()}onUndoableEdit(i,s){this.undoManager.undoableEditHappened(s.getProperty("edit"))}onDoubleClick(i,s){const l=s.getProperty("cell"),d=s.getProperty("event"),p=Ie.mxUtils.convertPoint(this.container,Ie.mxEvent.getClientX(d),Ie.mxEvent.getClientY(d)),g=p.x/this.graph.view.scale-this.graph.view.translate.x,y=p.y/this.graph.view.scale-this.graph.view.translate.y;l&&l.isEdge()&&l.EDGE.split(g,y),s.consume()}onClick(i,s){}remove(i){this.graph.removeCells(i.map(l=>l.native));for(var s=0;s<i.length;s++)[this.vertexes,this.edges].forEach(l=>{const d=l.indexOf(i[s]);d>=0&&l.splice(d,1)})}addVertex(i,s){return this.doAddVertex(i,s)}doAddVertex(i,s){const l=new WL;return l.native=this.graph.insertVertex(this.root,"","",i,s,5,5,"VERTEX;whiteSpace=wrap;html=1;"),l.native.VERTEX=l,l.g=this,this.vertexes.push(l),l}addEdge(i,s){return this.doAddEdge(i,s)}doAddEdge(i,s){const l=new XL;return l.v1=i,l.v2=s,l.native=this.graph.insertEdge(this.root,null,"",i.native,s.native,"EDGE"),l.native.EDGE=l,l.g=this,i.connect(l),s.connect(l),this.edges.push(l),l}splitEdge(i,s,l){const d=l.v1,p=l.v2;(d.fullConnected()||p.fullConnected())&&l.removeFromGraph();const g=this.doAddVertex(i,s);return this.doAddEdge(g,d),this.doAddEdge(g,p),g}mouseDownInGraph(i){return!(i.getCell()&&!i.getCell().isEdge())&&function(n,i,s){const l=[];l.push($y(n));let d=Ky(void 0,n);for(;d[0]&&d[1]!==n;)l.push($y(d[1])),d=Ky(d[0],d[1]);return function(n,i,s){if(i<3)return!1;let l=new xd(1e4,s.y),d=0,p=0;do{let g=(p+1)%i;if(YL(n[p],n[g],s,l)){if(0==Qs(n[p],s,n[g]))return Zs(n[p],s,n[g]);d++}p=g}while(0!=p);return d%2==1}(l,l.length,new xd(i,s))}(this.vertexes[0],i.getGraphX(),i.getGraphY())}}Ba([function(n,i,s){const l=s.value;return s.value=function(...d){this.model.beginUpdate();try{try{return l.apply(this,d)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},s}],Js.prototype,"remove",null),Ba([function(n,i,s){const l=s.value;return s.value=function(...d){this.model.beginUpdate();try{try{return l.apply(this,d)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},s}],Js.prototype,"addVertex",null),Ba([function(n,i,s){const l=s.value;return s.value=function(...d){this.model.beginUpdate();try{try{return l.apply(this,d)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},s}],Js.prototype,"addEdge",null),Ba([function(n,i,s){const l=s.value;return s.value=function(...d){this.model.beginUpdate();try{try{return l.apply(this,d)}finally{this.model.endUpdate()}}catch(p){throw this.undoManager.undo(),p}},s}],Js.prototype,"splitEdge",null);let Zy=(()=>{class n{constructor(){this.initialize()}initialize(){const s=Ie.mxGraph.prototype.fireMouseEvent;Ie.mxGraph.prototype.fireMouseEvent=function(d,p,g){if(null==p.getState()){if(null==p.graphX||null==p.graphY){const C=Ie.mxUtils.convertPoint(this.container,p.getX(),p.getY());p.graphX=C.x,p.graphY=C.y}const y=this.getCellAt(p.graphX,p.graphY);this.getModel().isEdge(y)&&(p.state=this.view.getState(y),null!=p.state&&null!=p.state.shape&&(this.container.style.cursor=p.state.shape.node.style.cursor))}null==p.state&&(this.container.style.cursor="default"),s.apply(this,[d,p,g])};const l=Ie.mxGraph.prototype.dblClick;Ie.mxGraph.prototype.dblClick=function(d,p){if(null==p){const g=Ie.mxUtils.convertPoint(this.container,Ie.mxEvent.getClientX(d),Ie.mxEvent.getClientY(d));p=this.getCellAt(g.x,g.y)}l.call(this,d,p)}}createGraph(s){Ie.mxEvent.disableContextMenu(s);const l=new Ie.mxGraph(s);l.setAllowDanglingEdges(!1),l.setDisconnectOnMove(!1),l.isCellSelectable=function(g){return!g.isEdge()};const d={};d[Ie.mxConstants.STYLE_SHAPE]=Ie.mxConstants.SHAPE_RECTANGLE,d[Ie.mxConstants.STYLE_OPACITY]=100,d[Ie.mxConstants.STYLE_FONTCOLOR]="#774400",d[Ie.mxConstants.STYLE_RESIZABLE]="0",d[Ie.mxConstants.STYLE_NOLABEL]="1",l.getStylesheet().putCellStyle("VERTEX",d);const p={};return p[Ie.mxConstants.STYLE_ENDSIZE]="0",p[Ie.mxConstants.STYLE_NOLABEL]="1",p[Ie.mxConstants.STYLE_MOVABLE]="0",l.getStylesheet().putCellStyle("EDGE",p),l.setTolerance(20),l.centerZoom=!0,l.setPanning(!0),l.panningHandler.useLeftButtonForPanning=!0,new Js(l,s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Pe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $L=["canvas"];let KL=(()=>{class n{constructor(s,l){this.container=s,this.graphService=l}ngOnInit(){this.graph=this.graphService.createGraph(this.graphCanvas.nativeElement);const s=this.graph.addVertex(126,126),l=this.graph.addVertex(126,184),d=this.graph.addVertex(184,184),p=this.graph.addVertex(184,126);this.graph.addEdge(s,l),this.graph.addEdge(l,d),this.graph.addEdge(d,p),this.graph.addEdge(s,p)}}return n.\u0275fac=function(s){return new(s||n)(ve(nn),ve(Zy))},n.\u0275cmp=lo({type:n,selectors:[["app-editor"]],viewQuery:function(s,l){if(1&s&&lx($L,7),2&s){let d;ax(d=function(n,i){return n[19].queries[i].queryList}(X(),Kd()))&&(l.graphCanvas=d.first)}},decls:4,vars:0,consts:[[1,"canvas"],["canvas",""]],template:function(s,l){1&s&&(Pu(0,"p"),Em(1,"editor works!"),Ou(),Nu(2,"div",0,1))},styles:[".canvas[_ngcontent-%COMP%]{width:900px;height:900px;border:solid 1px red}"]}),n})(),qL=(()=>{class n{constructor(){this.title="editor"}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275cmp=lo({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(s,l){1&s&&Nu(0,"app-editor")},directives:[KL],styles:[""]}),n})(),ZL=(()=>{class n{}return n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=zr({type:n,bootstrap:[qL]}),n.\u0275inj=Ei({providers:[Zy],imports:[[ML]]}),n})();(function(){if(Gx)throw new Error("Cannot enable prod mode after platform setup.");Hx=!1})(),DL().bootstrapModule(ZL).catch(n=>console.error(n))}},e=>{e(e.s=227)}]);